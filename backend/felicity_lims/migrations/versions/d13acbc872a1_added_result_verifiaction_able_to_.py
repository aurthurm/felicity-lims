"""added result_verifiaction able to enable multiiple verifications

Revision ID: d13acbc872a1
Revises: ea1bc6b07d6a
Create Date: 2022-03-19 12:37:08.985062

"""
from alembic import op
import sqlalchemy as sa
import sqlmodel


# revision identifiers, used by Alembic.
revision = 'd13acbc872a1'
down_revision = 'ea1bc6b07d6a'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('result_verification',
    sa.Column('analysis_uid', sa.Integer(), nullable=False),
    sa.Column('user_uid', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['analysis_uid'], ['analysisresult.uid'], ),
    sa.ForeignKeyConstraint(['user_uid'], ['user.uid'], ),
    sa.PrimaryKeyConstraint('analysis_uid', 'user_uid')
    )
    op.drop_constraint('analysisresult_verified_by_uid_fkey', 'analysisresult', type_='foreignkey')
    op.drop_column('analysisresult', 'verified_by_uid')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('analysisresult', sa.Column('verified_by_uid', sa.INTEGER(), autoincrement=False, nullable=True))
    op.create_foreign_key('analysisresult_verified_by_uid_fkey', 'analysisresult', 'user', ['verified_by_uid'], ['uid'])
    op.drop_table('result_verification')
    # ### end Alembic commands ###
