import{W as R,f as T,t as O,a2 as f,h as B,Y as L,i as $,r as k,o as l,c as i,a as A,M as u,N as j,O as e,F as b,H as C,J as a,a7 as r,z as q,D as g,a4 as K,Z as S,C as P,af as W,L as Y,a0 as z,a1 as H,_ as J}from"./index-93739211.js";import{D as Q,F as Z}from"./analyses.mutations-e3a0ff1f.js";import{u as G}from"./analysis-689a99f8.js";import{u as X}from"./setup-e711c708.js";import"./_queries-2ba61825.js";const ee={class:"overflow-x-auto mt-4"},te={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},oe={class:"min-w-full"},se={class:"bg-card"},ne={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},re={class:"text-sm text-foreground"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},le={class:"text-sm text-foreground"},ie={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},ue={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},ce=["onClick"],me={class:"text-lg font-bold text-foreground"},pe={action:"post",class:"p-6 space-y-6"},fe={class:"space-y-4"},be={class:"grid grid-cols-3 gap-4"},ge={class:"space-y-2"},ye=["value"],xe={class:"space-y-2"},ve={class:"space-y-2"},_e={class:"pt-4"},he=R({__name:"InterimFields",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(F){const D=z(()=>H(()=>import("./index-93739211.js").then(s=>s.cQ),["assets/index-93739211.js","assets/index-0f090789.css"])),y=G(),x=X(),{withClientMutation:v}=T(),_=F,{analysis:h}=O(_);let d=f(!1),w=f(""),n=B({});const c=f(!0);L(()=>_.analysisUid,(s,t)=>{}),x.fetchInstruments();const m=$(()=>x.getInstruments);function U(){n.key=+n.key;const s={...n,analysisUid:h?.value?.uid};v(Q,{payload:s},"createAnalysisInterim").then(t=>y.addAnalysisInterim(t))}function V(){const s={...n};delete s.uid,delete s.__typename,v(Z,{uid:n.uid,payload:s},"updateAnalysisInterim").then(t=>y.updateAnalysisInterim(t))}function I(s,t={}){c.value=s,d.value=!0,w.value=(s?"CREATE":"EDIT")+" ANALYSIS INTERIM",s?Object.assign(n,{key:null,value:null}):Object.assign(n,{...t})}function E(){c.value===!0&&U(),c.value===!1&&V(),d.value=!1}const M=s=>{const t=m?.value?.findIndex(p=>p.uid===s);return m?.value[t]?.name||"unknown"};return(s,t)=>{const p=k("fel-button"),N=k("fel-heading");return l(),i(b,null,[A(N,{title:"Interim Fields"},{default:u(()=>[A(p,{onClick:t[0]||(t[0]=o=>I(!0))},{default:u(()=>t[6]||(t[6]=[j("Add Interim Field")])),_:1})]),_:1}),e("div",ee,[e("div",te,[e("table",oe,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Interim Key"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Value"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",se,[(l(!0),i(b,null,C(r(h)?.interims,o=>(l(),i("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",ne,[e("div",re,a(o?.key),1)]),e("td",de,[e("div",le,a(o?.value),1)]),e("td",ie,[e("div",ae,a(M(o?.instrumentUid)),1)]),e("td",ue,[e("button",{onClick:we=>I(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ce)])]))),128))])])])]),r(d)?(l(),q(r(D),{key:0,onClose:t[5]||(t[5]=o=>W(d)?d.value=!1:d=!1),contentWidth:"w-2/4"},{header:u(()=>[e("h3",me,a(r(w)),1)]),body:u(()=>[e("form",pe,[e("div",fe,[e("div",be,[e("label",ge,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),g(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r(n).instrumentUid=o)},[t[8]||(t[8]=e("option",{value:""},"Select Instrument",-1)),(l(!0),i(b,null,C(m.value,o=>(l(),i("option",{key:o?.uid,value:o.uid},a(o?.name),9,ye))),128))],512),[[K,r(n).instrumentUid]])]),e("label",xe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Interim",-1)),g(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r(n).key=o),placeholder:"Interim Key ..."},null,512),[[S,r(n).key]])]),e("label",ve,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result",-1)),g(e("input",{type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r(n).value=o),placeholder:"Result Value ..."},null,512),[[S,r(n).value]])])])]),e("div",_e,[e("button",{type:"button",onClick:t[4]||(t[4]=P(o=>E(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):Y("",!0)],64)}}}),Fe=J(he,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/InterimFields.vue"]]);export{Fe as default};
