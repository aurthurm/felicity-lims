import{W as U,f as G,a2 as a,h as z,a9 as W,ah as Z,r as D,o as r,c as l,a as N,M as w,N as q,O as e,F as m,H as v,J as u,z as H,C as J,D as b,Z as A,$ as T,L as Q,_ as X}from"./index-5d85e9da.js";import{g as Y,a as K,X as R,Y as ee,Z as te}from"./microbiology.mutations-bbc8c44b.js";const se={class:"overflow-x-auto"},oe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-background shadow-dashboard rounded-lg"},ie={class:"min-w-full divide-y divide-border"},ne={class:"bg-background divide-y divide-border"},re={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},le={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},de={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ae={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ue={class:"px-3 py-3.5 whitespace-nowrap text-right text-sm"},ce=["onClick"],fe={class:"text-xl font-semibold text-foreground"},me={class:"space-y-4"},be={class:"grid grid-cols-1 gap-4"},pe={class:"block"},ge={class:"block"},ve={class:"flex gap-4"},xe={class:"w-2/3 space-y-2"},he={class:"block"},ye={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},_e=["value"],we={class:"ml-2 text-sm text-foreground"},Ae={class:"w-1/3"},ke={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Oe={class:"text-sm text-foreground"},Ce=["onClick"],Pe={class:"flex gap-4"},De={class:"w-2/3 space-y-2"},Se={class:"block"},Ve={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},Ee=["value"],Me={class:"ml-2 text-sm text-foreground"},Le={class:"w-1/3"},Ne={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Te={class:"text-sm text-foreground"},$e=["onClick"],Be=U({__name:"AstPanel",setup(je){const{withClientMutation:S,withClientQuery:k}=G(),x=a(!1),V=a(""),E=a(!0),h=a(""),y=a(""),f=a([]),p=a([]),_=a([]),c=a([]),O=a([]),o=z({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});W(()=>{$(),M(),B()});function $(){k(Y,{},"abxLaboratoryAntibiotics").then(i=>{i&&(p.value=i,_.value=[...p.value])})}function M(){k(K,{text:h.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(i=>{c.value=c.value?.filter(t=>o.selectedOrganisms.includes(t.uid))||[],c.value=Z(c.value,i?.items,"uid"),O.value=[...c.value]})}function B(){k(R,{},"abxAstPanelAll").then(i=>{i&&(f.value=i,f.value.forEach(t=>t.organisms?.forEach(d=>c.value.push(d))))})}function L(i,t={}){E.value=i,x.value=!0,V.value=(i?"Create":"Edit")+" AST Panel",i?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=t.uid,o.name=t.name,o.description=t.description,o.selectedAntibiotics=t.antibiotics?.map(d=>d.uid)||[],o.selectedOrganisms=t.organisms?.map(d=>d.uid)||[])}function j(){const i={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};E.value?S(ee,{payload:i},"createAbxAstPanel").then(t=>{t&&f.value.unshift(t)}):S(te,{uid:o.uid,payload:i},"updateAbxAstPanel").then(t=>{if(t){const d=f.value.findIndex(g=>g.uid===t.uid);d>-1&&(f.value=[...f.value.map((g,C)=>C===d?t:g)])}}),x.value=!1}function F(){if(!y.value){_.value=[...p.value];return}_.value=p.value.filter(i=>i.name.toLowerCase().includes(y.value.toLowerCase()))}function I(){if(!h.value){O.value=[...c.value];return}M()}return(i,t)=>{const d=D("fel-button"),g=D("fel-heading"),C=D("fel-modal");return r(),l(m,null,[N(g,{title:"AST Panels"},{default:w(()=>[N(d,{onClick:t[0]||(t[0]=s=>L(!0))},{default:w(()=>t[8]||(t[8]=[q("Add Panel")])),_:1})]),_:1}),e("div",se,[e("div",oe,[e("table",ie,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Organisms"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Antibiotics"),e("th",{class:"px-3 py-3.5"})])],-1)),e("tbody",ne,[(r(!0),l(m,null,v(f.value,s=>(r(),l("tr",{key:s?.uid},[e("td",re,u(s?.name),1),e("td",le,u(s?.description),1),e("td",de,u(s?.organisms?.map(n=>n.name).join(", ")),1),e("td",ae,u(s?.antibiotics?.map(n=>n.name).join(", ")),1),e("td",ue,[e("button",{onClick:n=>L(!1,s),class:"px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Edit ",8,ce)])]))),128))])])])]),x.value?(r(),H(C,{key:0,onClose:t[7]||(t[7]=s=>x.value=!1),contentWidth:"w-1/2"},{header:w(()=>[e("h3",fe,u(V.value),1)]),body:w(()=>[e("form",{onSubmit:J(j,["prevent"]),class:"space-y-6 p-4"},[e("div",me,[e("div",be,[e("label",pe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-foreground"},"Panel Name",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter panel name"},null,512),[[A,o.name]])]),e("label",ge,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),rows:"2",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description"},null,512),[[A,o.description]])])]),e("div",ve,[e("div",xe,[e("label",he,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-foreground"},"Search Organisms",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),onInput:I,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search organisms..."},null,544),[[A,h.value]])]),e("div",ye,[(r(!0),l(m,null,v(O.value,s=>(r(),l("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[4]||(t[4]=n=>o.selectedOrganisms=n),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,_e),[[T,o.selectedOrganisms]]),e("span",we,u(s.name),1)]))),128))])]),e("div",Ae,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Organisms",-1)),e("div",ke,[(r(!0),l(m,null,v(o.selectedOrganisms,s=>(r(),l("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Oe,u(c.value?.find(n=>n.uid===s)?.name),1),e("button",{onClick:n=>o.selectedOrganisms=o.selectedOrganisms.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Ce)]))),128))])])]),e("div",Pe,[e("div",De,[e("label",Se,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-foreground"},"Search Antibiotics",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>y.value=s),onInput:F,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search antibiotics..."},null,544),[[A,y.value]])]),e("div",Ve,[(r(!0),l(m,null,v(_.value,s=>(r(),l("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[6]||(t[6]=n=>o.selectedAntibiotics=n),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,Ee),[[T,o.selectedAntibiotics]]),e("span",Me,u(s.name),1)]))),128))])]),e("div",Le,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Antibiotics",-1)),e("div",Ne,[(r(!0),l(m,null,v(o.selectedAntibiotics,s=>(r(),l("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Te,u(p.value.find(n=>n.uid==s)?.name),1),e("button",{onClick:n=>o.selectedAntibiotics=o.selectedAntibiotics.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,$e)]))),128))])])])]),t[16]||(t[16]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):Q("",!0)],64)}}});const Ue=X(Be,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{Ue as default};
