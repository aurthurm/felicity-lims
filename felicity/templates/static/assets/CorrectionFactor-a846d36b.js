import{V as B,f as L,t as j,a1 as x,h as q,X as H,i as k,r as U,o as d,c as a,a as M,M as p,N as J,O as t,F as f,H as v,J as l,a6 as n,L as S,z as P,D as y,a3 as I,Y,C as z,ae as G,$ as W,a0 as X,_ as K}from"./index-74595aff.js";import{G as Q,H as Z}from"./analyses.mutations-185deb2b.js";import{u as ee}from"./analysis-7c37619c.js";import{u as te}from"./setup-fa628218.js";import"./_queries-3a88eae7.js";const oe={class:"overflow-x-auto mt-4"},re={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},se={class:"min-w-full"},ne={class:"bg-card"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},ie={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},le={class:"text-sm text-foreground"},ue={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ce={class:"text-sm text-foreground"},pe={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},fe=["onClick"],me={class:"text-lg font-bold text-foreground"},be={action:"post",class:"p-6 space-y-6"},ge={class:"space-y-4"},xe={class:"grid grid-cols-3 gap-4"},ve={class:"space-y-2"},ye=["value"],_e={class:"space-y-2"},he=["value"],Ce={class:"space-y-2"},we={class:"pt-4"},Fe=B({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(D){const E=W(()=>X(()=>import("./index-74595aff.js").then(r=>r.cJ),["assets/index-74595aff.js","assets/index-8412b2a5.css"])),_=ee(),c=te(),{withClientMutation:h}=L(),C=D,{analysis:w}=j(C);let i=x(!1),F=x(""),s=q({});const m=x(!0);H(()=>C.analysisUid,(r,e)=>{}),c.fetchInstruments();const b=k(()=>c.getInstruments);c.fetchMethods();const g=k(()=>c.getMethods);function N(){const r={...s,analysisUid:w?.value?.uid};h(Q,{payload:r},"createAnalysisCorrectionFactor").then(e=>_.AddAnalysisCorrectionFactor(e))}function V(){const r={...s};delete r.uid,delete r.__typename,h(Z,{uid:s.uid,payload:r},"updateAnalysisCorrectionFactor").then(e=>_.updateAnalysisCorrectionFactor(e))}function A(r,e={}){m.value=r,i.value=!0,F.value=(r?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",r?Object.assign(s,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(s,{...e})}function O(){m.value===!0&&N(),m.value===!1&&V(),i.value=!1}const T=r=>{const e=b?.value?.findIndex(u=>u.uid===r);return b?.value[e]?.name||"unknown"},R=r=>{const e=g?.value?.findIndex(u=>u.uid===r);return g?.value[e]?.name||"unknown"};return(r,e)=>{const u=U("fel-button"),$=U("fel-heading");return d(),a(f,null,[M($,{title:"Correction Factors"},{default:p(()=>[M(u,{onClick:e[0]||(e[0]=o=>A(!0))},{default:p(()=>e[6]||(e[6]=[J("Add Correction Factor")])),_:1})]),_:1}),t("div",oe,[t("div",re,[t("table",se,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Factor"),t("th",{class:"px-4 py-2 border-b border-border"})])],-1)),t("tbody",ne,[(d(!0),a(f,null,v(n(w)?.correctionFactors,o=>(d(),a("tr",{key:o?.uid,class:"hover:bg-accent/50"},[t("td",de,[t("div",ae,l(T(o?.instrumentUid)),1)]),t("td",ie,[t("div",le,l(R(o?.methodUid)),1)]),t("td",ue,[t("div",ce,l(o.factor),1)]),t("td",pe,[t("button",{onClick:Ae=>A(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,fe)])]))),128))])])])]),S(" Correction Factor Form Modal "),n(i)?(d(),P(n(E),{key:0,onClose:e[5]||(e[5]=o=>G(i)?i.value=!1:i=!1),contentWidth:"w-2/4"},{header:p(()=>[t("h3",me,l(n(F)),1)]),body:p(()=>[t("form",be,[t("div",ge,[t("div",xe,[t("label",ve,[e[9]||(e[9]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),y(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[1]||(e[1]=o=>n(s).instrumentUid=o)},[e[8]||(e[8]=t("option",{value:""},"Select Instrument",-1)),(d(!0),a(f,null,v(b.value,o=>(d(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,ye))),128))],512),[[I,n(s).instrumentUid]])]),t("label",_e,[e[11]||(e[11]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),y(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=o=>n(s).methodUid=o)},[e[10]||(e[10]=t("option",{value:""},"Select Method",-1)),(d(!0),a(f,null,v(g.value,o=>(d(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,he))),128))],512),[[I,n(s).methodUid]])]),t("label",Ce,[e[12]||(e[12]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Factor",-1)),y(t("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[3]||(e[3]=o=>n(s).factor=o),placeholder:"Factor ..."},null,512),[[Y,n(s).factor]])])])]),t("div",we,[t("button",{type:"button",onClick:e[4]||(e[4]=z(o=>O(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):S("v-if",!0)],64)}}}),De=K(Fe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/CorrectionFactor.vue"]]);export{De as default};
