import{d as q,r as n,q as C,I as L,a8 as U,av as y,m as x,o as k,c as I,b as t,e as P,v as $,f as i,i as u,t as m,y as R,B as Q,g as j,w as z,k as G}from"./index-d5ae4e74.js";import{C as O,A as W,a as J,b as K,B as X,c as Z,E as ee,H as te,I as oe,d as ie,e as se,L as ae,P as ne,S as le,T as re,f as de,U as ce,g as ue}from"./index-6fbc7104.js";import{A as me,E as pe}from"./Notices-2c08c12f.js";import{u as ge}from"./notice-74528e74.js";import{c as he,d as _e,a as w,f as be,e as N,u as ve,b as p}from"./array-b622a333.js";import"./isArray-513c67aa.js";import"./setup-c76e85aa.js";import"./_queries-827ee6fb.js";const fe={class:"grid grid-cols-2 gap-x-4 mb-4"},ye={class:"block col-span-2 mb-2"},xe=t("span",{class:"text-gray-700"},"Title",-1),ke={class:"text-orange-600 w-4/12"},we={class:"block col-span-2 mb-2"},Ne=t("span",{class:"text-gray-700"},"Body",-1),De={class:"main-container min-w-full prose prose-slate"},He={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},Ve={class:"editor-container__editor"},Ee={ref:"editorElement"},Be={class:"text-orange-600 w-4/12"},Se={class:"block col-span-2 mb-2"},Ae=t("span",{class:"text-gray-700"},"Expiration",-1),Fe={class:"text-orange-600 w-4/12"},Me=t("hr",null,null,-1),Te=t("button",{type:"submit",class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ",-1),Ye=q({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(D,{emit:H}){const g=n(!1),h=n(null),V=n(O);C(()=>{h.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[W,J,K,X,Z,ee,te,oe,ie,se,ae,ne,le,re,de,ce,ue],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},g.value=!0});const E=D,_=H,{withClientMutation:b}=L(),v=ge(),{notice:a}=U(E),B=n(new Date),S=he({uid:_e(),title:w().required("Notice is required"),body:w().required("Notice body message is required"),expiry:be().required("Expiry is required").typeError("Invalid Date format"),groups:N(),departments:N()}),{handleSubmit:A,errors:l}=ve({validationSchema:S,initialValues:{uid:a?.value?.uid,title:a?.value?.title,body:a?.value?.body,expiry:a?.value?.expiry,groups:a?.value?.groups,departments:a?.value?.departments}}),{value:r}=p("title"),{value:d}=p("body"),{value:c}=p("expiry"),f=A(e=>{e.uid||F(e),e.uid&&M(e)});function F(e){b(me,{payload:{title:e.title,body:e.body,expiry:y(e.expiry,"YYYY-MM-DD HH:mm"),groups:e.groups||[],departments:e.departments||[]}},"createNotice").then(o=>{v.addNotice(o),_("close")})}function M(e){b(pe,{uid:e.uid,payload:{title:e.title,body:e.body,expiry:y(e.expiry,"YYYY-MM-DD HH:mm"),groups:e.groups||[],departments:e.departments||[]}},"updateNotice").then(o=>{v.updateNotice(o),_("close")})}return(e,o)=>{const T=x("ckeditor"),Y=x("VueDatePicker");return k(),I("form",{action:"post",class:"p-1",onSubmit:o[3]||(o[3]=z((...s)=>i(f)&&i(f)(...s),["prevent"]))},[t("div",fe,[t("label",ye,[xe,P(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[0]||(o[0]=s=>u(r)?r.value=s:null),placeholder:"Name ..."},null,512),[[$,i(r)]]),t("div",ke,m(i(l).title),1)]),t("label",we,[Ne,t("div",De,[t("div",He,[t("div",Ve,[t("div",Ee,[g.value?(k(),R(T,{key:0,modelValue:i(d),"onUpdate:modelValue":o[1]||(o[1]=s=>u(d)?d.value=s:null),editor:V.value,config:h.value,"tag-name":"textarea"},null,8,["modelValue","editor","config"])):Q("",!0)],512)])],512)]),t("div",Be,m(i(l).body),1)]),t("label",Se,[Ae,j(Y,{class:"z-60",modelValue:i(c),"onUpdate:modelValue":o[2]||(o[2]=s=>u(c)?c.value=s:null),"min-date":B.value,placeholder:"Select Expiry Date"},null,8,["modelValue","min-date"]),t("div",Fe,m(i(l).expiry),1)])]),Me,Te],32)}}}),Qe=G(Ye,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{Qe as default};
