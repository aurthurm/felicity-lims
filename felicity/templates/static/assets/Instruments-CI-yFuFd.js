const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-v7Q387fb.js","assets/index-c4lX_LAY.css"])))=>i.map(i=>d[i]);
import{a0 as Z,f as j,a7 as g,h as w,a1 as $,a6 as ee,_ as te,r as h,c as a,o as d,A as e,C as re,E as ne,a as q,N as T,P as oe,J as y,K as U,L as l,D as ie,F as m,a2 as I,a9 as S}from"./index-v7Q387fb.js";import{c as se,d as de}from"./instrument.mutations-BFbIddKt.js";import{u as le}from"./user-COlWaJ-j.js";import{u as ae}from"./setup-sVxge2CR.js";import{c as ue,a as p,u as me,b as f}from"./index.esm-D-THTBXR.js";const pe=Z({__name:"Instruments",setup(B,{expose:t}){t();const M=$(()=>ee(()=>import("./index-v7Q387fb.js").then(o=>o.cl),__vite__mapDeps([0,1]))),n=le(),i=ae(),{withClientMutation:x}=j();let v=g("view");const k=["view","configs"];let u=g(!1),r=g("");const c=g(!0),b=g(null),E=ue({name:p().required("Name is required"),keyword:p().required("Keyword is required"),description:p().nullable(),instrumentTypeUid:p().nullable(),manufacturerUid:p().nullable(),supplierUid:p().nullable()}),{handleSubmit:C,errors:L,resetForm:V,setValues:A}=me({validationSchema:E,initialValues:{name:"",keyword:"",description:"",instrumentTypeUid:null,manufacturerUid:null,supplierUid:null}}),{value:P}=f("name"),{value:K}=f("keyword"),{value:R}=f("description"),{value:O}=f("instrumentTypeUid"),{value:J}=f("manufacturerUid"),{value:Y}=f("supplierUid");i.fetchInstrumentTypes();const z=w(()=>i.getInstrumentTypes);i.fetchInstruments();const G=w(()=>i.getInstruments);i.fetchManufacturers();const H=w(()=>i.getManufacturers);i.fetchSuppliers();const Q=w(()=>i.getSuppliers);function F(o){const s={name:o.name,keyword:o.keyword,description:o.description,instrumentTypeUid:o.instrumentTypeUid,manufacturerUid:o.manufacturerUid,supplierUid:o.supplierUid};x(se,{payload:s},"createInstrument").then(_=>i.addInstrument(_))}function N(o){if(!b.value)return;const s={name:o.name,keyword:o.keyword,description:o.description,instrumentTypeUid:o.instrumentTypeUid,manufacturerUid:o.manufacturerUid,supplierUid:o.supplierUid};x(de,{uid:b.value,payload:s},"updateInstrument").then(_=>i.updateInstrument(_))}function W(o,s={}){c.value=o,u.value=!0,r.value=(o?"CREATE":"EDIT")+" ANALYSES INSTRUMENT",o?(b.value=null,V({values:{name:"",keyword:"",description:"",instrumentTypeUid:null,manufacturerUid:null,supplierUid:null}})):(b.value=s.uid??null,A({name:s.name??"",keyword:s.keyword??"",description:s.description??"",instrumentTypeUid:s.instrumentTypeUid??null,manufacturerUid:s.manufacturerUid??null,supplierUid:s.supplierUid??null}))}const X=C(o=>{c.value===!0&&F(o),c.value===!1&&N(o),u.value=!1}),D={modal:M,userStore:n,setupStore:i,withClientMutation:x,get currentTab(){return v},set currentTab(o){v=o},tabs:k,get showModal(){return u},set showModal(o){u=o},get formTitle(){return r},set formTitle(o){r=o},formAction:c,currentUid:b,formSchema:E,handleSubmit:C,errors:L,resetForm:V,setValues:A,name:P,keyword:K,description:R,instrumentTypeUid:O,manufacturerUid:J,supplierUid:Y,instrumentTypes:z,instruments:G,manufacturers:H,suppliers:Q,addInstrument:F,editInstrument:N,FormManager:W,saveForm:X};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),fe={class:"space-y-6"},ce={class:"border border-border bg-background rounded-lg shadow-sm p-6 overflow-hidden"},be={class:"min-w-full divide-y divide-border"},ge={class:"bg-background divide-y divide-border"},ye={class:"px-4 py-2 whitespace-nowrap text-sm text-foreground"},xe={class:"px-4 py-2 whitespace-nowrap text-sm text-foreground"},ve={class:"px-4 py-2 whitespace-nowrap text-sm text-foreground"},we={class:"px-4 py-2 whitespace-nowrap text-sm text-foreground"},Ue={class:"px-4 py-2 whitespace-nowrap text-sm text-right"},ke=["onClick"],_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"space-y-2 md:col-span-2"},Te={class:"text-sm text-destructive"},Ie={class:"space-y-2"},Se={class:"text-sm text-destructive"},Me={class:"space-y-2"},Ee=["value"],Ce={class:"space-y-2"},Ve=["value"],Ae={class:"space-y-2"},Fe=["value"],Ne={class:"space-y-2 md:col-span-2"},De={class:"flex justify-end pt-6"},qe={type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"};function Be(B,t,M,n,i,x){const v=h("fel-button"),k=h("fel-heading"),u=h("fel-modal");return d(),a(y,null,[e("div",fe,[q(k,{title:"Instruments"},{default:T(()=>[q(v,{onClick:t[0]||(t[0]=r=>n.FormManager(!0))},{default:T(()=>[...t[9]||(t[9]=[oe(" Add Instrument",-1)])]),_:1})]),_:1}),e("div",ce,[e("table",be,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-sm font-medium text-muted-foreground tracking-wider"},"Name"),e("th",{class:"px-4 py-2 text-left text-sm font-medium text-muted-foreground tracking-wider"},"Type"),e("th",{class:"px-4 py-2 text-left text-sm font-medium text-muted-foreground tracking-wider"},"Manufacturer"),e("th",{class:"px-4 py-2 text-left text-sm font-medium text-muted-foreground tracking-wider"},"Supplier"),e("th",{class:"px-4 py-2 text-right text-sm font-medium text-muted-foreground tracking-wider"},"Actions")])],-1)),e("tbody",ge,[(d(!0),a(y,null,U(n.instruments,r=>(d(),a("tr",{key:r?.uid,class:"hover:bg-muted/50"},[e("td",ye,l(r?.name),1),e("td",xe,l(r?.instrumentType?.name),1),e("td",ve,l(r?.manufacturer?.name),1),e("td",we,l(r?.supplier?.name),1),e("td",Ue,[e("button",{onClick:c=>n.FormManager(!1,r),class:"text-primary hover:text-primary/80 focus:outline-none focus:underline","aria-label":"Edit instrument"}," Edit ",8,ke)])]))),128))])])])]),n.showModal?(d(),re(u,{key:0,onClose:t[8]||(t[8]=r=>n.showModal=!1),title:n.formTitle},{body:T(()=>[e("form",{onSubmit:t[7]||(t[7]=ie((...r)=>n.saveForm&&n.saveForm(...r),["prevent"])),class:"space-y-6"},[e("div",_e,[e("div",he,[t[11]||(t[11]=e("label",{for:"name",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Instrument Name ",-1)),m(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=r=>n.name=r),type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter instrument name"},null,512),[[I,n.name]]),e("div",Te,l(n.errors.name),1)]),e("div",Ie,[t[12]||(t[12]=e("label",{for:"keyword",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Keyword ",-1)),m(e("input",{id:"keyword","onUpdate:modelValue":t[2]||(t[2]=r=>n.keyword=r),type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter keyword"},null,512),[[I,n.keyword]]),e("div",Se,l(n.errors.keyword),1)]),e("div",Me,[t[14]||(t[14]=e("label",{for:"instrumentType",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Instrument Type ",-1)),m(e("select",{id:"instrumentType","onUpdate:modelValue":t[3]||(t[3]=r=>n.instrumentTypeUid=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[13]||(t[13]=e("option",{value:""},"Select instrument type",-1)),(d(!0),a(y,null,U(n.instrumentTypes,r=>(d(),a("option",{key:r?.uid,value:r.uid},l(r?.name),9,Ee))),128))],512),[[S,n.instrumentTypeUid]])]),e("div",Ce,[t[16]||(t[16]=e("label",{for:"manufacturer",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Manufacturer ",-1)),m(e("select",{id:"manufacturer","onUpdate:modelValue":t[4]||(t[4]=r=>n.manufacturerUid=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[15]||(t[15]=e("option",{value:""},"Select manufacturer",-1)),(d(!0),a(y,null,U(n.manufacturers,r=>(d(),a("option",{key:r?.uid,value:r.uid},l(r?.name),9,Ve))),128))],512),[[S,n.manufacturerUid]])]),e("div",Ae,[t[18]||(t[18]=e("label",{for:"supplier",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Supplier ",-1)),m(e("select",{id:"supplier","onUpdate:modelValue":t[5]||(t[5]=r=>n.supplierUid=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[17]||(t[17]=e("option",{value:""},"Select supplier",-1)),(d(!0),a(y,null,U(n.suppliers,r=>(d(),a("option",{key:r?.uid,value:r.uid},l(r?.name),9,Fe))),128))],512),[[S,n.supplierUid]])]),e("div",Ne,[t[19]||(t[19]=e("label",{for:"description",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Description ",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=r=>n.description=r),rows:"3",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description"},null,512),[[I,n.description]])])]),e("div",De,[e("button",qe,l(n.formAction?"Create":"Update")+" Instrument ",1)])],32)]),_:1},8,["title"])):ne("",!0)],64)}const Je=te(pe,[["render",Be],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/Instruments.vue"]]);export{Je as default};
