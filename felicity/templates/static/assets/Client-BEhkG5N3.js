import{a0 as V,f as B,ac as A,ad as I,a7 as c,_ as L,r as x,c as d,o as i,A as e,C as R,E as j,a as y,L as r,F as u,H as q,N as D,a2 as M,J as _,K as w,a9 as U,D as H}from"./index-Daoe3XS9.js";import{A as J,E as K}from"./clients.mutations-Dg0hX0Bq.js";import{u as O}from"./location-CxPODs5_.js";import{u as z}from"./client-CTaZ-zn-.js";import{s as G}from"./index-YWAiCrzl.js";const Q=V({__name:"Client",setup(E,{expose:t}){t();const f=O(),{withClientMutation:o}=B(),b=A(),v=z();I(()=>{v.fetchClientByUid(b.query.clientUid),f.fetchCountries()});let m=c(!1),a=c(!1),p=c(""),l=c({}),n=c(),g=c();function T(s){f.filterProvincesByCountry(n.value)}function P(s){f.filterDistrictsByProvince(g.value)}function F(s,C={}){a.value=s,p.value=`${s?"CREATE":"EDIT"} CLIENT`,m.value=!0,s?l.value={}:(n.value=C?.district?.province?.countryUid,g.value=C?.district?.provinceUid,l.value=C)}function k(){o(J,{payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"createClient").then(s=>v.addClient(s))}function h(){o(K,{uid:l?.value?.uid,payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"updateClient").then(s=>v.updateClient(s))}function N(){a.value&&k(),a.value||h(),m.value=!1,l.value={}}const S={locationStore:f,withClientMutation:o,route:b,clientStore:v,get showClientModal(){return m},set showClientModal(s){m=s},get createItem(){return a},set createItem(s){a=s},get formTitle(){return p},set formTitle(s){p=s},get form(){return l},set form(s){l=s},get countryUid(){return n},set countryUid(s){n=s},get provinceUid(){return g},set provinceUid(s){g=s},getProvinces:T,getDistricts:P,FormManager:F,addClient:k,editClient:h,saveForm:N,get shield(){return G}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),W={class:"grid grid-cols-12 gap-4 mt-2 mb-4"},X={class:"col-span-12"},Y={class:"bg-background rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Z={key:0,class:"py-4 text-center"},$={key:1,class:"grid grid-cols-12 gap-3"},tt={class:"col-span-12 px-3 sm:px-0"},et={class:"flex justify-between sm:text-sm md:text-md lg:text-lg text-foreground font-bold"},ot={class:"grid grid-cols-2 mt-2"},nt={class:"col-span-1"},st={class:"flex"},lt={class:"text-foreground text-sm md:text-md"},it={class:"flex"},rt={class:"text-foreground text-sm md:text-md"},dt={class:"flex"},at={class:"text-foreground text-sm md:text-md"},mt={class:"col-span-1"},ct={class:"flex"},ut={class:"text-foreground text-sm md:text-md"},ft={class:"flex"},vt={class:"text-foreground text-sm md:text-md"},pt={action:"post",class:"p-1"},gt={class:"grid grid-cols-2 gap-x-4 mb-4"},xt={class:"block col-span-1 mb-2"},_t={class:"block col-span-1 mb-2"},bt={class:"grid grid-cols-3 gap-x-4 mb-4"},Ct={class:"block col-span-1 mb-2"},yt=["value"],wt={class:"block col-span-1 mb-2"},Ut=["value"],kt={class:"block col-span-1 mb-2"},ht=["value"];function St(E,t,f,o,b,v){const m=x("fel-loader"),a=x("font-awesome-icon"),p=x("router-view"),l=x("fel-modal");return i(),d(_,null,[e("div",null,[e("div",W,[e("section",X,[e("div",Y,[o.clientStore.fetchingClient?(i(),d("div",Z,[y(m,{message:"Fetching client metadata ..."})])):(i(),d("div",$,[e("div",tt,[e("div",et,[e("span",null,r(o.clientStore.client?.name),1),e("div",null,[u(e("button",{onClick:t[0]||(t[0]=n=>o.FormManager(!1,o.clientStore.client)),class:"p-1 ml-2 rounded-sm border border-foreground text-muted-foreground text-md transition duration-300 hover:text-primary focus:outline-none"},[y(a,{icon:"fa-edit"})],512),[[q,o.shield.hasRights(o.shield.actions.UPDATE,o.shield.objects.CLIENT)]])])]),t[15]||(t[15]=e("hr",null,null,-1)),e("div",ot,[e("div",nt,[e("div",st,[t[10]||(t[10]=e("span",{class:"text-foreground text-sm font-medium w-16"},"Province:",-1)),e("span",lt,r(o.clientStore.client?.district?.province?.name),1)]),e("div",it,[t[11]||(t[11]=e("span",{class:"text-foreground text-sm font-medium w-16"},"District:",-1)),e("span",rt,r(o.clientStore.client?.district?.name),1)]),e("div",dt,[t[12]||(t[12]=e("span",{class:"text-foreground text-sm font-medium w-16"},"Code:",-1)),e("span",at,r(o.clientStore.client?.code),1)])]),e("div",mt,[e("div",ct,[t[13]||(t[13]=e("span",{class:"text-foreground text-sm font-medium w-16"},"Email:",-1)),e("span",ut,r(o.clientStore.client?.email),1)]),e("div",ft,[t[14]||(t[14]=e("span",{class:"text-foreground text-sm font-medium w-16"},"Mobile:",-1)),e("span",vt,r(o.clientStore.client?.mobilePhone),1)])])])])]))])])]),y(p)]),o.showClientModal?(i(),R(l,{key:0,onClose:t[9]||(t[9]=n=>o.showClientModal=!1)},{header:D(()=>[e("h3",null,r(o.formTitle),1)]),body:D(()=>[e("form",pt,[e("div",gt,[e("label",xt,[t[16]||(t[16]=e("span",{class:"text-foreground"},"Name",-1)),u(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[1]||(t[1]=n=>o.form.name=n),placeholder:"Name ..."},null,512),[[M,o.form.name]])]),e("label",_t,[t[17]||(t[17]=e("span",{class:"text-foreground"},"Code",-1)),u(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=n=>o.form.code=n),placeholder:"Code ..."},null,512),[[M,o.form.code]])])]),e("div",bt,[e("label",Ct,[t[19]||(t[19]=e("span",{class:"text-foreground"},"Country",-1)),u(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[3]||(t[3]=n=>o.countryUid=n),onChange:t[4]||(t[4]=n=>o.getProvinces(n))},[t[18]||(t[18]=e("option",null,null,-1)),(i(!0),d(_,null,w(o.locationStore.countries,n=>(i(),d("option",{key:n.uid,value:n.uid},r(n.name),9,yt))),128))],544),[[U,o.countryUid]])]),e("label",wt,[t[21]||(t[21]=e("span",{class:"text-foreground"},"Province",-1)),u(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[5]||(t[5]=n=>o.provinceUid=n),onChange:t[6]||(t[6]=n=>o.getDistricts(n))},[t[20]||(t[20]=e("option",null,null,-1)),(i(!0),d(_,null,w(o.locationStore.provinces,n=>(i(),d("option",{key:n.uid,value:n.uid},r(n.name),9,Ut))),128))],544),[[U,o.provinceUid]])]),e("label",kt,[t[23]||(t[23]=e("span",{class:"text-foreground"},"District",-1)),u(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[7]||(t[7]=n=>o.form.districtUid=n)},[t[22]||(t[22]=e("option",null,null,-1)),(i(!0),d(_,null,w(o.locationStore.districts,n=>(i(),d("option",{key:n.uid,value:n.uid},r(n.name),9,ht))),128))],512),[[U,o.form.districtUid]])])]),t[24]||(t[24]=e("hr",null,null,-1)),e("button",{type:"button",onClick:t[8]||(t[8]=H(n=>o.saveForm(),["prevent"])),class:"m-2 -mb-4 w-full rounded-sm border border-primary bg-primary px-4 py-2 text-primary-foreground transition-colors duration-500 ease select-none hover:bg-primary focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):j("",!0)],64)}const Ft=L(Q,[["render",St],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/client/_id/Client.vue"]]);export{Ft as default};
