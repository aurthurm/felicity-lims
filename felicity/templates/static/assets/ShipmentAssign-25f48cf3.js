import{V as j,u as H,i as k,h as J,a1 as K,r as O,al as S,o as i,c as n,D as a,O as e,F as f,H as h,J as d,a6 as g,a3 as Z,a as x,M as C,N as w,C as U,aK as A,E as D,Z as _,_ as z}from"./index-74595aff.js";import{u as G}from"./shipment-edabec92.js";import{u as P}from"./shipment-72cbe54b.js";const Q={class:"space-y-6"},W={action:"post",class:"space-y-4"},X={class:"flex flex-wrap gap-4 items-end"},Y={class:"flex-1 min-w-[200px]"},ee={class:"block space-y-1.5"},te=["value"],se={class:"rounded-md border border-border"},oe={class:"overflow-x-auto"},ie={key:0,class:"p-4 text-center"},ne={key:1,class:"w-full"},de={class:"border-b border-border bg-muted/50"},le={class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},ae={class:"divide-y divide-border"},re={class:"p-4 align-middle"},ue=["onUpdate:modelValue","onChange"],me={class:"p-4 align-middle"},ce={class:"text-sm font-medium text-foreground"},pe={class:"p-4 align-middle"},fe={class:"text-sm font-medium text-foreground"},he={class:"p-4 align-middle"},ge={class:"text-sm font-medium text-foreground"},xe={class:"p-4 align-middle"},_e={class:"text-sm text-foreground"},ve={class:"space-y-2"},ye=["onUpdate:modelValue","disabled"],be={class:"flex-1"},ke={class:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary"},Se={class:"p-4 align-middle"},Ce={class:"text-sm text-foreground"},we={class:"p-4 align-middle"},Ue={class:"text-sm text-foreground"},Ae={class:"p-4 align-middle"},De={class:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary"},Ve={class:"flex justify-end"},Te=j({__name:"ShipmentAssign",setup(Fe){const r=G(),v=H(),{manageSamples:V}=P();r.fetchReferralLaboratories();const T=k(()=>r.getShipment);v.fetchSampleTypes();const c=J({sampleTypeUid:void 0,analysisUid:void 0}),u=K(!1),y=k(()=>{const s=[];return r.getSamples?.forEach(m=>{s?.some(p=>p.uid===m.uid)||s.push(m)}),s}),F=()=>{b(),r.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,...c})},R=()=>{const s=B();V(T?.value?.uid,s,"assign")};function b(){return r.samples?.filter(s=>s.checked)}function B(){return b().map(s=>({sampleUid:s.uid,shipedSampleUid:void 0,analyses:s.analysisResults?.filter(t=>t.checked)?.map(t=>t.uid)}))?.filter(s=>s?.analyses?.length>0)}function M(s){q()?u.value=!0:u.value=!1}function E(s){s.checked=!0}function I(s){s.checked=!1}async function N(){await y?.value?.forEach(s=>u.value?E(s):I(s))}function q(){return y?.value?.every(s=>s.checked===!0)}return(s,t)=>{const m=O("fel-loader"),p=S("motion-slide-left"),L=S("motion-slide-right");return i(),n("div",Q,[a((i(),n("form",W,[e("div",X,[e("div",Y,[e("label",ee,[t[3]||(t[3]=e("span",{class:"text-sm font-medium leading-none"},"Sample Type",-1)),a(e("select",{name:"analyses_uids","onUpdate:modelValue":t[0]||(t[0]=o=>c.sampleTypeUid=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(i(!0),n(f,null,h(g(v).sampleTypes,o=>(i(),n("option",{key:o.uid,value:o.uid},d(o.name),9,te))),128))],512),[[Z,c.sampleTypeUid]])])]),e("div",null,[a(x(A,{onClick:t[1]||(t[1]=U(o=>F(),["prevent"])),color:"sky-800",class:"h-10 px-4"},{default:C(()=>t[4]||(t[4]=[w(" Apply Filters ")])),_:1},512),[[D,!0]])])])])),[[p]]),e("div",se,[e("div",oe,[g(r).fetchingSamples?(i(),n("div",ie,[x(m,{message:"Fetching samples ..."})])):(i(),n("table",ne,[e("thead",null,[e("tr",de,[e("th",le,[a(e("input",{type:"checkbox",onChange:N,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value=o),class:"h-4 w-4 rounded border-input text-primary focus:ring-primary"},null,544),[[_,u.value]])]),t[5]||(t[5]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},null,-1)),t[6]||(t[6]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Sample ID",-1)),t[7]||(t[7]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Sample Type",-1)),t[8]||(t[8]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Client Sample ID",-1)),t[9]||(t[9]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Analysis",-1)),t[10]||(t[10]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Date Created",-1)),t[11]||(t[11]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Date Received",-1)),t[12]||(t[12]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Status",-1))])]),a((i(),n("tbody",ae,[(i(!0),n(f,null,h(g(r).samples,o=>(i(),n("tr",{key:o?.uid,class:"hover:bg-muted/50"},[e("td",re,[a(e("input",{type:"checkbox","onUpdate:modelValue":l=>o.checked=l,onChange:l=>M(),class:"h-4 w-4 rounded border-input text-primary focus:ring-primary"},null,40,ue),[[_,o.checked]])]),t[13]||(t[13]=e("td",{class:"p-4 align-middle"},null,-1)),e("td",me,[e("div",ce,d(o?.sampleId),1)]),e("td",pe,[e("div",fe,d(o?.sampleType?.name),1)]),e("td",he,[e("div",ge,d(o?.analysisRequest?.clientRequestId),1)]),e("td",xe,[e("div",_e,[e("ul",ve,[(i(!0),n(f,null,h(o?.analysisResults,l=>(i(),n("li",{key:l.uid,class:"flex items-center space-x-2"},[a(e("input",{type:"checkbox","onUpdate:modelValue":$=>l.checked=$,class:"h-4 w-4 rounded border-input text-primary focus:ring-primary",disabled:!o.checked},null,8,ye),[[_,l.checked]]),e("span",be,d(l?.analysis?.name),1),e("span",ke,d(l?.status),1)]))),128))])])]),e("td",Se,[e("div",Ce,d(o?.createdAt),1)]),e("td",we,[e("div",Ue,d(o?.dateReceived),1)]),e("td",Ae,[e("span",De,d(o?.status),1)])]))),128))])),[[L]])]))])]),e("section",Ve,[a(x(A,{onClick:U(R,["prevent"]),color:"orange-600",class:"h-10 px-4"},{default:C(()=>t[14]||(t[14]=[w(" Assign Samples ")])),_:1},512),[[D,!0]])])])}}}),Ee=z(Te,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{Ee as default};
