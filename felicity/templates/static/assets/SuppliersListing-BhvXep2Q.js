import{Y as D,u as A,a0 as v,a7 as H,a3 as P,_ as N,r as m,c as M,o as x,z as u,A as w,C as V,a as t,K as o,M as s,F as h,H as R,I as y,B as U,a4 as B}from"./index-OdhKCqIc.js";import{u as q}from"./setup-BcFG_bXr.js";import{m as z,n as K}from"./instrument.mutations-BxEMyJNC.js";import{c as O,a as I,u as Y,F as j}from"./index.esm-BfHj8iGm.js";import{I as G}from"./Input-BEm5S0CJ.js";import{T as J}from"./Textarea-T3VcJTEo.js";import{F as Q,a as W,b as X}from"./FormMessage-CgXFMXx9.js";import{F as Z}from"./FormLabel-DxP9wnWS.js";import{P as $}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const ee=D({__name:"SuppliersListing",setup(k,{expose:r}){r();const p=q(),{withClientMutation:e}=A();let c=v(!1),_=v("");const i=v(!0),d=v(null),g=O({name:I().required("Name is required"),description:I().nullable()}),{handleSubmit:f,resetForm:b,setValues:F}=Y({validationSchema:g,initialValues:{name:"",description:""}});p.fetchSuppliers();const S=H(()=>p.getSuppliers);function a(l){e(z,{payload:l},"createSupplier").then(n=>p.addSupplier(n))}function T(l){d.value&&e(K,{uid:d.value,payload:l},"updateSupplier").then(n=>p.updateSupplier(n))}function E(l,n={}){i.value=l,c.value=!0,_.value=(l?"CREATE":"EDIT")+" SUPPLIER",l?(d.value=null,b({values:{name:"",description:""}})):(d.value=n.uid??null,F({name:n.name??"",description:n.description??""}))}const L=f(l=>{const n={name:l.name,description:l.description};i.value===!0&&a(n),i.value===!1&&T(n),c.value=!1}),C={setupStore:p,withClientMutation:e,get showModal(){return c},set showModal(l){c=l},get formTitle(){return _},set formTitle(l){_=l},formAction:i,currentUid:d,formSchema:g,handleSubmit:f,resetForm:b,setValues:F,suppliers:S,addSupplier:a,editSupplier:T,FormManager:E,saveForm:L,get Button(){return P},get Input(){return G},get Textarea(){return J},get FormControl(){return X},get FormField(){return j},get FormItem(){return W},get FormLabel(){return Z},get FormMessage(){return Q},PageHeading:$};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),te={class:"space-y-6"},oe={class:"border border-border bg-card rounded-lg shadow-md"},re={class:"relative w-full overflow-auto"},ae={class:"text-lg font-semibold text-foreground"},le={class:"space-y-4"},ne={class:"flex justify-end"};function se(k,r,p,e,c,_){const i=m("TableHead"),d=m("TableRow"),g=m("TableHeader"),f=m("TableCell"),b=m("TableBody"),F=m("Table"),S=m("Modal");return x(),M(h,null,[u("div",te,[t(e.PageHeading,{title:"Suppliers"},{default:o(()=>[t(e.Button,{onClick:r[0]||(r[0]=a=>e.FormManager(!0))},{default:o(()=>[...r[3]||(r[3]=[s(" Add Supplier",-1)])]),_:1})]),_:1}),u("div",oe,[u("div",re,[t(F,{class:"w-full caption-bottom text-sm"},{default:o(()=>[t(g,{class:"[&_tr]:border-b"},{default:o(()=>[t(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...r[4]||(r[4]=[s("Supplier",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...r[5]||(r[5]=[s("Description",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...r[6]||(r[6]=[s("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(b,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(x(!0),M(h,null,R(e.suppliers,a=>(x(),w(d,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(f,{class:"px-4 py-3 align-middle text-sm"},{default:o(()=>[s(y(a?.name),1)]),_:2},1024),t(f,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:o(()=>[s(y(a?.description),1)]),_:2},1024),t(f,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:T=>e.FormManager(!1,a)},{default:o(()=>[...r[7]||(r[7]=[s(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e.showModal?(x(),w(S,{key:0,onClose:r[2]||(r[2]=a=>e.showModal=!1)},{header:o(()=>[u("h3",ae,y(e.formTitle),1)]),body:o(()=>[u("form",{onSubmit:r[1]||(r[1]=U((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-4"},[u("div",le,[t(e.FormField,{name:"name"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...r[8]||(r[8]=[s("Name",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Input,B(a,{placeholder:"Enter supplier name..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...r[9]||(r[9]=[s("Description",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Textarea,B(a,{placeholder:"Enter supplier description..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),u("div",ne,[t(e.Button,{type:"submit"},{default:o(()=>[...r[10]||(r[10]=[s("Save Changes",-1)])]),_:1})])],32)]),_:1})):V("",!0)],64)}const Fe=N(ee,[["render",se],["__scopeId","data-v-33160deb"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/suppliers/SuppliersListing.vue"]]);export{Fe as default};
