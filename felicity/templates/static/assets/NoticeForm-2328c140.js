import{S as U,a0 as d,a7 as q,f as I,t as P,r as N,o as n,c as l,N as o,C as $,X as R,a5 as i,ad as f,H as g,K as c,y as Q,a as j,A as G,_ as K}from"./index-3686e2f1.js";import{C as O,A as W,a as X,b as z,B as J,c as Z,E as ee,H as te,I as oe,d as ie,e as se,L as ae,P as re,S as ne,T as de,f as le,U as ce,g as ue}from"./index-ff750461.js";import{A as me,E as pe}from"./Notices-e696b3bc.js";import{u as fe}from"./notice-18897fec.js";import{c as ge,b as ve,a as w,f as be,d as D,u as ye,e as v}from"./array-b472961d.js";import{f as H}from"./index-31a85e3f.js";import"./_baseForOwn-33007ed9.js";import"./merge-a1120275.js";import"./_isIterateeCall-1ed06e8a.js";import"./isArray-513c67aa.js";import"./mapValues-b7764e64.js";import"./isString-3d48de3a.js";import"./clone-98fb3be5.js";import"./_baseSet-274c0953.js";import"./setup-613b4e8e.js";import"./_queries-d6963687.js";const he={class:"space-y-4"},xe={class:"space-y-2"},_e={key:0,class:"text-sm text-destructive"},ke={class:"space-y-2"},Ne={class:"main-container min-w-full prose prose-slate"},we={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},De={class:"editor-container__editor"},He={ref:"editorElement"},Ve={key:0,class:"text-sm text-destructive"},Ee={class:"space-y-2"},Se={key:0,class:"text-sm text-destructive"},Be=U({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(V,{emit:E}){const b=d(!1),y=d(null),S=d(O);q(()=>{y.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[W,X,z,J,Z,ee,te,oe,ie,se,ae,re,ne,de,le,ce,ue],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},b.value=!0});const B=V,h=E,{withClientMutation:x}=I(),_=fe(),{notice:a}=P(B),A=d(new Date),C=ge({uid:ve(),title:w().required("Notice is required"),body:w().required("Notice body message is required"),expiry:be().required("Expiry is required").typeError("Invalid Date format"),groups:D(),departments:D()}),{handleSubmit:M,errors:r}=ye({validationSchema:C,initialValues:{uid:a?.value?.uid,title:a?.value?.title,body:a?.value?.body,expiry:a?.value?.expiry,groups:a?.value?.groups,departments:a?.value?.departments}}),{value:u}=v("title"),{value:m}=v("body"),{value:p}=v("expiry"),k=M(t=>{t.uid||T(t),t.uid&&Y(t)});function T(t){x(me,{payload:{title:t.title,body:t.body,expiry:H(t.expiry,"YYYY-MM-DD HH:mm"),groups:t.groups||[],departments:t.departments||[]}},"createNotice").then(e=>{_.addNotice(e),h("close")})}function Y(t){x(pe,{uid:t.uid,payload:{title:t.title,body:t.body,expiry:H(t.expiry,"YYYY-MM-DD HH:mm"),groups:t.groups||[],departments:t.departments||[]}},"updateNotice").then(e=>{_.updateNotice(e),h("close")})}return(t,e)=>{const F=N("ckeditor"),L=N("VueDatePicker");return n(),l("form",{action:"post",class:"space-y-4 p-4",onSubmit:e[3]||(e[3]=G((...s)=>i(k)&&i(k)(...s),["prevent"]))},[o("div",he,[o("div",xe,[e[4]||(e[4]=o("label",{class:"block text-sm font-medium text-foreground"},"Title",-1)),$(o("input",{class:"w-full px-3 py-2 text-foreground bg-background border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200","onUpdate:modelValue":e[0]||(e[0]=s=>f(u)?u.value=s:null),placeholder:"Notice title..."},null,512),[[R,i(u)]]),i(r).title?(n(),l("div",_e,g(i(r).title),1)):c("v-if",!0)]),o("div",ke,[e[5]||(e[5]=o("label",{class:"block text-sm font-medium text-foreground"},"Body",-1)),o("div",Ne,[o("div",we,[o("div",De,[o("div",He,[b.value?(n(),Q(F,{key:0,modelValue:i(m),"onUpdate:modelValue":e[1]||(e[1]=s=>f(m)?m.value=s:null),editor:S.value,config:y.value,"tag-name":"textarea"},null,8,["modelValue","editor","config"])):c("v-if",!0)],512)])],512)]),i(r).body?(n(),l("div",Ve,g(i(r).body),1)):c("v-if",!0)]),o("div",Ee,[e[6]||(e[6]=o("label",{class:"block text-sm font-medium text-foreground"},"Expiration",-1)),j(L,{class:"w-full",modelValue:i(p),"onUpdate:modelValue":e[2]||(e[2]=s=>f(p)?p.value=s:null),"min-date":A.value,placeholder:"Select Expiry Date"},null,8,["modelValue","min-date"]),i(r).expiry?(n(),l("div",Se,g(i(r).expiry),1)):c("v-if",!0)])]),e[7]||(e[7]=o("div",{class:"border-t border-border my-4"},null,-1)),e[8]||(e[8]=o("button",{type:"submit",class:"w-full px-4 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"}," Save Notice ",-1))],32)}}}),Ke=K(Be,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{Ke as default};
