import{Y as H,u as I,a0 as F,a7 as S,a3 as A,_ as D,r as i,c as x,o as v,z as p,A as E,C as w,a as o,K as t,M as s,F as M,H as q,I as h,B as V,a4 as N}from"./index-OdhKCqIc.js";import{c as P,a as R,u as z,F as U}from"./index.esm-BfHj8iGm.js";import{W as K,X as O}from"./analyses.mutations-DUxQZn1r.js";import{u as W}from"./analysis-PB9AMevg.js";import{I as X}from"./Input-BEm5S0CJ.js";import{E as Y,a as j,b as G,c as J,d as Z}from"./EmptyTitle-aCQRDpx3.js";import{F as $,a as ee,b as te}from"./FormMessage-CgXFMXx9.js";import{F as le}from"./FormLabel-DxP9wnWS.js";import{P as oe}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const ae=H({__name:"QCLevels",setup(B,{expose:l}){l();const u=W(),{withClientMutation:e}=I();let f=F(!1),g=F("");const m=F(!0),d=F(null),_=P({level:R().trim().required("QC level is required")}),{handleSubmit:c,resetForm:b,setValues:y}=z({validationSchema:_,initialValues:{level:""}});u.fetchQCLevels();const L=S(()=>u.getQCLevels);function C(a){e(K,a,"createQcLevel").then(n=>u.addQcLevel(n))}function r(a){d.value&&e(O,{uid:d.value,...a},"updateQcLevel").then(n=>u.updateQcLevel(n))}function T(a,n={}){m.value=a,f.value=!0,g.value=(a?"CREATE":"EDIT")+" QC Level",a?(d.value=null,b({values:{level:""}})):(d.value=n.uid??null,y({level:n.level??""}))}const k=c(a=>{const n={level:a.level};m.value===!0&&C(n),m.value===!1&&r(n),f.value=!1}),Q={analysisStore:u,withClientMutation:e,get showModal(){return f},set showModal(a){f=a},get formTitle(){return g},set formTitle(a){g=a},formAction:m,currentUid:d,qcLevelSchema:_,handleSubmit:c,resetForm:b,setValues:y,qcLevels:L,addQCLevel:C,editQCLevel:r,FormManager:T,saveForm:k,get Button(){return A},get Input(){return X},get Empty(){return Z},get EmptyContent(){return J},get EmptyDescription(){return G},get EmptyHeader(){return j},get EmptyTitle(){return Y},get FormControl(){return te},get FormField(){return U},get FormItem(){return ee},get FormLabel(){return le},get FormMessage(){return $},PageHeading:oe};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),re={class:"border border-border bg-card rounded-lg shadow-md"},ne={class:"relative w-full overflow-auto"},se={class:"text-lg font-semibold leading-none tracking-tight"};function de(B,l,u,e,f,g){const m=i("TableHead"),d=i("TableRow"),_=i("TableHeader"),c=i("TableCell"),b=i("TableEmpty"),y=i("TableBody"),L=i("Table"),C=i("Modal");return v(),x(M,null,[p("div",null,[o(e.PageHeading,{title:"QC Levels"},{default:t(()=>[o(e.Button,{onClick:l[0]||(l[0]=r=>e.FormManager(!0))},{default:t(()=>[...l[3]||(l[3]=[s("Add QC Level",-1)])]),_:1})]),_:1}),p("div",re,[p("div",ne,[o(L,{class:"w-full caption-bottom text-sm"},{default:t(()=>[o(_,{class:"[&_tr]:border-b"},{default:t(()=>[o(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:t(()=>[o(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...l[4]||(l[4]=[s("Level",-1)])]),_:1}),o(m,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:t(()=>[...l[5]||(l[5]=[s("Actions",-1)])]),_:1})]),_:1})]),_:1}),o(y,{class:"[&_tr:last-child]:border-0"},{default:t(()=>[(v(!0),x(M,null,q(e.qcLevels,r=>(v(),E(d,{key:r?.uid,class:"border-b border-border/50 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:t(()=>[o(c,{class:"px-4 py-3 align-middle text-sm"},{default:t(()=>[s(h(r?.level),1)]),_:2},1024),o(c,{class:"px-4 py-3 align-middle text-right"},{default:t(()=>[o(e.Button,{variant:"outline",size:"sm",onClick:T=>e.FormManager(!1,r)},{default:t(()=>[...l[6]||(l[6]=[s(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e.qcLevels?.length?w("",!0):(v(),E(b,{key:0,colspan:2},{default:t(()=>[o(e.Empty,{class:"border-0 bg-transparent p-0"},{default:t(()=>[o(e.EmptyContent,null,{default:t(()=>[o(e.EmptyHeader,null,{default:t(()=>[o(e.EmptyTitle,null,{default:t(()=>[...l[7]||(l[7]=[s("No QC levels found",-1)])]),_:1}),o(e.EmptyDescription,null,{default:t(()=>[...l[8]||(l[8]=[s("Add a QC level to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})])])]),e.showModal?(v(),E(C,{key:0,onClose:l[2]||(l[2]=r=>e.showModal=!1)},{header:t(()=>[p("h3",se,h(e.formTitle),1)]),body:t(()=>[p("form",{onSubmit:l[1]||(l[1]=V((...r)=>e.saveForm&&e.saveForm(...r),["prevent"])),class:"space-y-4 p-4"},[o(e.FormField,{name:"level"},{default:t(({componentField:r})=>[o(e.FormItem,null,{default:t(()=>[o(e.FormLabel,null,{default:t(()=>[...l[9]||(l[9]=[s("QC Level",-1)])]),_:1}),o(e.FormControl,null,{default:t(()=>[o(e.Input,N(r,{placeholder:"Enter QC level name..."}),null,16)]),_:2},1024),o(e.FormMessage)]),_:2},1024)]),_:1}),o(e.Button,{type:"submit",class:"w-full"},{default:t(()=>[...l[10]||(l[10]=[s(" Save Changes ",-1)])]),_:1})],32)]),_:1})):w("",!0)],64)}const ye=D(ae,[["render",de],["__scopeId","data-v-89951d03"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/QCLevels.vue"]]);export{ye as default};
