import{S as v,f as P,i as b,o as r,c as o,N as t,F as d,E as u,H as p,a as w,a5 as U,Z as A,$ as G,aw as D,_ as S}from"./index-8d0a01b3.js";import{u as V}from"./user-157f78e9.js";import"./_queries-5236cda4.js";const B={class:"space-y-6"},E={class:"bg-background rounded-lg shadow-sm overflow-hidden"},z={class:"relative"},C={class:"w-full"},F={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},N={class:"w-full"},L={class:"divide-y divide-border"},O={class:"bg-muted/50"},T={class:"px-4 py-3 font-medium text-sm text-foreground"},j={class:"px-4 py-2 text-sm text-muted-foreground"},H=v({__name:"Permissions",setup(I){const f=A(()=>G(()=>import("./FelSwitch-dc2e2b79.js"),["assets/FelSwitch-dc2e2b79.js","assets/index-8d0a01b3.js","assets/index-a402b5a2.css"]));let a=V();const{withClientMutation:_}=P();a.fetchGroupsAndPermissions();const l=b(()=>a.getGroups);function m(i,s){return i?.permissions?.some(e=>e?.uid===s?.uid)??!1}const g=(i,s)=>i?.reduce(function(e,n){return(e[n[s]]=e[n[s]]||[]).push(n),e},{}),k=b(()=>Array.from(Object.entries(g(a.getPermissions,"target"))));function h(i,s){_(D,{groupUid:i?.uid,permissionUid:s?.uid},"updateGroupPermissions").then(e=>a.updateGroupsAndPermissions(e))}function x(i,s,e){e!==m(i,s)&&h(i,s)}return(i,s)=>(r(),o("div",B,[t("div",E,[t("div",z,[t("table",C,[t("thead",null,[t("tr",null,[s[0]||(s[0]=t("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),o(d,null,u(l.value,e=>(r(),o("th",{key:e.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},p(e.name),1))),128)),s[1]||(s[1]=t("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),t("div",F,[t("table",N,[t("tbody",L,[(r(!0),o(d,null,u(k.value,e=>(r(),o(d,{key:e[0]},[t("tr",O,[t("td",T,p(e[0]),1),(r(!0),o(d,null,u(l.value,n=>(r(),o("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:n.uid}))),128))]),(r(!0),o(d,null,u(e[1],n=>(r(),o("tr",{key:n.uid},[t("td",j,p(n.action),1),(r(!0),o(d,null,u(l.value,c=>(r(),o("td",{key:c.uid,class:"px-4 py-2"},[w(U(f),{"model-value":m(c,n),"onUpdate:modelValue":y=>x(c,n,y),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),$=S(H,[["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{$ as default};
