import{S as J,f as ee,a0 as n,h as I,i as g,a7 as se,r as h,o as S,c as ae,N as o,a as u,L as p,M as oe,a5 as l,K as P,y as le,H as te,A as ne,C as y,X as C,Y as re,ad as ie,F as ue,Z as M,$ as N,ae as F,_ as de}from"./index-56caabce.js";import{o as me,p as fe,q as ce,r as be,s as ge,t as pe,a as ye,u as ve,v as xe}from"./microbiology.mutations-46e71ed8.js";const he={class:"space-y-6"},Ce={class:"bg-card p-6 shadow-sm rounded-lg"},Oe={class:"text-xl font-semibold text-foreground"},Ae={class:"grid grid-cols-2 gap-4"},ke={class:"block"},Be={class:"block"},_e={class:"grid grid-cols-2 gap-4"},we={class:"block"},Te={class:"block"},Ve={class:"grid grid-cols-2 gap-4"},Ge={class:"block"},Ue={class:"block"},De={class:"grid grid-cols-2 gap-4"},Ie={class:"block"},Se={class:"block"},Pe={class:"grid grid-cols-2 gap-4"},Me={class:"block"},Ne={class:"block"},Fe=J({__name:"AbxOrganism",setup(Ee){const E=M(()=>N(()=>import("./FelDataTable-10e10bd5.js"),["assets/FelDataTable-10e10bd5.js","assets/index-56caabce.js","assets/index-f2df9813.css"])),f=M(()=>N(()=>import("./vue-multiselect.esm-e39c9416.js"),["assets/vue-multiselect.esm-e39c9416.js","assets/index-56caabce.js","assets/index-f2df9813.css"])),{withClientMutation:O,withClientQuery:d}=ee();let c=n(!1),A=n(""),s=I({});const v=n(!0),k=n(!1),i=n([]),B=n([]),_=n([]),K=g(()=>_.value.filter(a=>a.kingdomUid===s.kingdom?.uid)),w=n([]),L=g(()=>w.value.filter(a=>a.phylumUid===s.phylum?.uid)),T=n([]),j=g(()=>T.value.filter(a=>a.classUid===s.class?.uid)),V=n([]),R=g(()=>V.value.filter(a=>a.orderUid===s.order?.uid)),G=n([]),$=g(()=>G.value.filter(a=>a.familyUid===s.family?.uid));let r=I({first:50,after:"",text:"",sortBy:["name"],filterAction:!1});const U=n(0);let D=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const q=g(()=>i?.value?.length+" of "+U.value+" organisms"),W=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Name",value:"name",sortable:!1,sortBy:"asc",hidden:!1},{name:"whonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"replacedBy",value:"replacedBy",sortable:!1,sortBy:"asc",hidden:!0},{name:"taxonomicStatus",value:"taxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"common",value:"common",sortable:!1,sortBy:"asc",hidden:!0},{name:"organismType",value:"organismType",sortable:!1,sortBy:"asc",hidden:!1},{name:"anaerobe",value:"anaerobe",sortable:!1,sortBy:"asc",hidden:!1},{name:"morphology",value:"morphology",sortable:!1,sortBy:"asc",hidden:!0},{name:"subkingdomCode",value:"subkingdomCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"familyCode",value:"familyCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusGroup",value:"genusGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusCode",value:"genusCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"speciesGroup",value:"speciesGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"serovarGroup",value:"serovarGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"msfGrpClin",value:"msfGrpClin",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctCode",value:"sctCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctText",value:"sctText",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonId",value:"gbifTaxonId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifDatasetId",value:"gbifDatasetId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonomicStatus",value:"gbifTaxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"kingdom",value:"kingdom.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"phylum",value:"phylum.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"class",value:"class_.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"order",value:"order.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"family",value:"family.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"genus",value:"genus.name",sortable:!1,sortBy:"asc",hidden:!1}]);function x(a){d(ye,{text:a.text,pageSize:a.first,sortBy:a.sortBy},void 0).then(e=>{const m=e.abxOrganismAll,b=m.items;a.filterAction?(i.value=[],i.value=b):i.value=F(i.value,b,"uid"),U.value=m?.totalCount,D.value=m?.pageInfo}).finally(()=>{k.value=!1})}se(()=>{x(r),d(me,{},"abxOrderAll").then(a=>{a&&(T.value=a)}),d(fe,{},"abxFamilyAll").then(a=>{a&&(V.value=a)}),d(ce,{},"abxKingdomAll").then(a=>{a&&(B.value=a)}),d(be,{},"abxPhylumAll").then(a=>{a&&(_.value=a)}),d(ge,{},"abxGenusAll").then(a=>{a&&(G.value=a)}),d(pe,{},"abxClassAll").then(a=>{a&&(w.value=a)})});function z(a){r.first=100,r.after="",r.text=a.filterText,r.filterAction=!0,x(r)}function H(a){r.first=a.fetchCount,r.after=D?.value?.endCursor,r.text=a.filterText,r.filterAction=!1,x(r)}const Q=()=>Object.assign(s,{});function X(a,e={}){v.value=a,c.value=!0,A.value=(a?"Create":"Edit")+" Organism",a?Object.assign(s,{}):Object.assign(s,{...e})}function Y(){const a={name:s?.name,whonetOrgCode:s?.whonetOrgCode,replacedBy:s?.replacedBy,taxonomicStatus:s?.taxonomicStatus,common:s?.common,organismType:s?.organismType,anaerobe:s?.anaerobe,morphology:s?.morphology,subkingdomCode:s?.subkingdomCode,familyCode:s?.familyCode,genusGroup:s?.genusGroup,genusCode:s?.genusCode,speciesGroup:s?.speciesGroup,serovarGroup:s?.serovarGroup,msfGrpClin:s?.msfGrpClin,sctCode:s?.sctCode,sctText:s?.sctText,gbifTaxonId:s?.gbifTaxonId,gbifDatasetId:s?.gbifDatasetId,gbifTaxonomicStatus:s?.gbifTaxonomicStatus,kingdomUid:s?.kingdom?.uid,phylumUid:s?.phylum?.uid,classUid:s?.class?.uid,orderUid:s?.order?.uid,familyUid:s?.family?.uid,genusUid:s?.genus?.uid,comments:s?.comments};v.value===!0&&O(ve,{payload:a},"createAbxOrganism").then(e=>{e&&(i.value=F(i.value,[e],"uid"))}),v.value===!1&&O(xe,{uid:s.uid,payload:a},"updateAbxOrganism").then(e=>{if(e){const m=i.value.findIndex(b=>b.uid==e.uid);i.value[m]=e}}),c.value=!1}return(a,e)=>{const m=h("fel-button"),b=h("fel-heading"),Z=h("fel-modal");return S(),ae(ue,null,[o("div",he,[u(b,{title:"Organisms"},{default:p(()=>[u(m,{onClick:e[0]||(e[0]=t=>X(!0))},{default:p(()=>e[12]||(e[12]=[oe("Add Organism")])),_:1})]),_:1}),o("div",Ce,[u(l(E),{columns:W.value,data:i.value,toggleColumns:!0,loading:k.value,paginable:!0,pageMeta:{fetchCount:l(r).first,hasNextPage:!0,countNone:q.value},searchable:!0,filterable:!1,onOnSearchKeyUp:z,onOnSearchFocus:Q,onOnPaginate:H,selectable:!1},{footer:p(()=>e[13]||(e[13]=[])),_:1},8,["columns","data","loading","pageMeta"])])]),P(" Organism Edit Form Modal "),l(c)?(S(),le(Z,{key:0,onClose:e[11]||(e[11]=t=>ie(c)?c.value=!1:c=!1),"content-width":"w-1/2"},{header:p(()=>[o("h3",Oe,te(l(A)),1)]),body:p(()=>[o("form",{onSubmit:ne(Y,["prevent"]),class:"space-y-6 p-4"},[o("div",Ae,[o("label",ke,[e[14]||(e[14]=o("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),y(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[1]||(e[1]=t=>l(s).name=t),placeholder:"Name ..."},null,512),[[C,l(s).name]])]),o("label",Be,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),y(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[2]||(e[2]=t=>l(s).whonetOrgCode=t),placeholder:"Whonet Org Code ..."},null,512),[[C,l(s).whonetOrgCode]])])]),o("div",_e,[o("label",we,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),u(l(f),{modelValue:l(s).kingdom,"onUpdate:modelValue":e[3]||(e[3]=t=>l(s).kingdom=t),options:B.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",Te,[e[17]||(e[17]=o("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),u(l(f),{modelValue:l(s).phylum,"onUpdate:modelValue":e[4]||(e[4]=t=>l(s).phylum=t),options:K.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",Ve,[o("label",Ge,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),u(l(f),{modelValue:l(s).class,"onUpdate:modelValue":e[5]||(e[5]=t=>l(s).class=t),options:L.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",Ue,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),u(l(f),{modelValue:l(s).order,"onUpdate:modelValue":e[6]||(e[6]=t=>l(s).order=t),options:j.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",De,[o("label",Ie,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"Family",-1)),u(l(f),{modelValue:l(s).family,"onUpdate:modelValue":e[7]||(e[7]=t=>l(s).family=t),options:R.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",Se,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Genus",-1)),u(l(f),{modelValue:l(s).genus,"onUpdate:modelValue":e[8]||(e[8]=t=>l(s).genus=t),options:$.value,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",Pe,[o("label",Me,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Organism Type",-1)),y(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[9]||(e[9]=t=>l(s).organismType=t),placeholder:"Organism Type ..."},null,512),[[C,l(s).organismType]])]),o("label",Ne,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Anaerobe",-1)),y(o("input",{type:"checkbox",class:"mt-1 h-4 w-4 rounded border-border text-primary focus:ring-primary","onUpdate:modelValue":e[10]||(e[10]=t=>l(s).anaerobe=t)},null,512),[[re,l(s).anaerobe]])])]),e[24]||(e[24]=o("hr",{class:"border-border"},null,-1)),e[25]||(e[25]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Organism ",-1))],32)]),_:1})):P("v-if",!0)],64)}}});const je=de(Fe,[["__scopeId","data-v-4d09f0a0"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganism.vue"]]);export{je as default};
