import{d as oe,W as ne,N as re,u as ie,q as le,s as de,V as C,x as c,m as S,z as ce,o as u,c as m,b as e,C as _,g as h,f as s,A as ue,B as R,D as k,e as i,I as pe,t as o,P as l,aG as v,F as j,E as me,j as ve,_ as ye,k as he}from"./index-53659ec0.js";import{u as xe}from"./samples-c9ae01a2.js";const _e={class:"flex justify-between items-center"},be=e("h3",{class:"my-4 font-bold"},"Sample Detail",-1),fe=e("hr",null,null,-1),ge={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},we={key:0,class:"py-4 text-center"},Se={key:1,class:"grid grid-cols-12 gap-3"},ke={class:"col-span-12 px-3 sm:px-0"},Ce={class:"mb-2 flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Re=e("i",{class:"fa fa-star"},null,-1),je=[Re],De={key:1},Le={type:"button",class:"bg-sky-800 text-white px-2 py-1 rounded-sm leading-none"},Pe={class:"ml-2"},$e={class:"absolute mt-4 py-0 bg-gray-300 rounded-sm shadow-xl z-20"},Be=e("hr",null,null,-1),Ie={class:"grid grid-cols-3 gap-x-4 mt-2"},Oe={class:"col-span-1"},qe={class:"flex justify-between"},Ue=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client Request ID:",-1),Ve={class:"text-gray-600 text-sm md:text-md"},Ne={class:"flex justify-between"},Te=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client:",-1),Ae={class:"text-gray-600 text-sm md:text-md"},Ee=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800 text-sm font-semibold"},"Cliet Contact:"),e("span",{class:"text-gray-600 text-sm md:text-md"},"Sister in Charge")],-1),ze={class:"col-span-1"},Fe={class:"flex justify-between"},Je=e("span",{class:"text-gray-800 text-sm font-semibold"},"Sample Type:",-1),We={class:"text-gray-600 text-sm md:text-md"},Ge={class:"flex justify-between"},Me=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Sampled:",-1),He={class:"text-gray-600 text-sm md:text-md"},Ke={class:"flex justify-between"},Qe=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Registered:",-1),Xe={class:"text-gray-600 text-sm md:text-md"},Ye={class:"flex justify-between"},Ze=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Received:",-1),et={class:"text-gray-600 text-sm md:text-md"},tt={class:"col-span-1"},st={class:"flex justify-between"},at=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Submitted:",-1),ot={class:"text-gray-600 text-sm md:text-md"},nt={class:"flex justify-between"},rt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Verified:",-1),it={class:"text-gray-600 text-sm md:text-md"},lt={class:"flex justify-between"},dt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Published:",-1),ct={class:"text-gray-600 text-sm md:text-md"},ut={class:"flex justify-between"},pt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Printed:",-1),mt={class:"text-gray-600 text-sm md:text-md"},vt={class:"bg-blue-300 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},yt={class:"flex"},ht=e("div",{class:"mr-4 font-semibold"},"Storage:",-1),xt={class:"bg-orange-600 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},_t=oe({__name:"Sample",setup(bt){const D=ve(()=>ye(()=>import("./FelLoadingMessage-95452cc5.js"),["assets/FelLoadingMessage-95452cc5.js","assets/index-53659ec0.js","assets/index-5e1ff226.css"])),p=ne(),b=re(),f=ie();p.resetSample();const{cancelSamples:L,reInstateSamples:P,receiveSamples:$,invalidateSamples:B,publishSamples:I,verifySamples:O,recoverSamples:q}=xe(),x=le({dropdownOpen:!1}),{sample:t,fetchingSample:U,repeatSample:g}=de(p);p.fetchSampleByUid(b.params.sampleUid),C(()=>t?.value?.status,(n,a)=>{if(n)if(n!=="invalidated"){p.resetRepeatSample();return}else p.fetchRepeatSampleByParentId(b.params.sampleUid)}),C(()=>b.params.sampleUid,(n,a)=>{p.fetchSampleByUid(+n)});function V(n,a){let d=[];return n?.forEach(y=>d.push(y.name)),a?.forEach(y=>d.push(y.name)),d.join(", ")}const N=c(()=>!!["expected"].includes(t?.value?.status?.toLowerCase())),T=async()=>$([t?.value?.uid]),A=c(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),E=async()=>L([t?.value?.uid]),z=c(()=>!!["cancelled"].includes(t?.value?.status?.toLowerCase())),F=async()=>P([t?.value?.uid]),J=c(()=>t?.value?.status?.toLowerCase()==="awaiting"),W=async()=>O([t?.value?.uid]),G=c(()=>t?.value?.status?.toLowerCase()==="published"),w=c(()=>["approved"].includes(t?.value?.status?.toLowerCase())?"Publish":["published"].includes(t?.value?.status?.toLowerCase())?"Re publish":"Pre publish"),M=c(()=>{if(["awaiting","approved","published"].includes(t?.value?.status?.toLowerCase()))return!0;const n=p.analysisResults;return!!(["received","paired"].includes(t?.value?.status?.toLowerCase()??"")&&n?.some(a=>["approved"].includes(a.status?.toLowerCase()??"")))}),H=async()=>{const n=w.value.startsWith("Pre")?"pre-publish":w.value.startsWith("Re")?"re-publish":"publish";I([{uid:t?.value?.uid,action:n}])},K=async()=>B([t?.value?.uid]).then(n=>{let a=n?.filter(d=>d.uid!==t?.value?.uid);a.length>0&&p.setRepeatSample(a[0])}),Q=async()=>f.push({name:"print-barcodes",state:{sampleUids:JSON.stringify([t?.value?.uid])}}),X=c(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),Y=async()=>{f.push({name:"reject-samples",state:{samples:JSON.stringify([t?.value])}})},Z=c(()=>!!["stored"].includes(t?.value?.status?.toLowerCase())),ee=async()=>q([t?.value?.uid]),te=async n=>{f.push({path:"/bio-banking",state:{sample:JSON.stringify(n)}})};return(n,a)=>{const d=S("font-awesome-icon"),y=S("router-link"),se=S("router-view"),ae=ce("motion-slide-right");return u(),m(j,null,[e("div",_e,[be,e("div",null,[e("button",{class:"p-2 mr-8 text-sm hover:border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none",onClick:Q},[_(" Barcode "),h(d,{icon:"barcode",class:"ml-2"})]),s(t)?.analysisRequest?.patient?.uid?(u(),ue(y,{key:0,to:{name:"patient-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid}},class:"p-2 my-2 ml-4 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[_(" ... other samples ")]),_:1},8,["to"])):k("",!0)])]),fe,i((u(),m("div",ge,[s(U)?(u(),m("div",we,[h(s(D),{message:"Fetching sample details ..."})])):(u(),m("div",Se,[e("div",ke,[e("div",Ce,[e("div",null,[s(t)?.priority??0<1?(u(),m("span",{key:0,class:pe(["font-small",{"text-orange-600":s(t)?.priority??0<1}])},[...je],2)):k("",!0),_(" "+o(s(t)?.sampleId)+" ",1),s(t)?.analysisRequest?.patient?.uid&&s(g)?.uid?(u(),m("span",De,[h(d,{icon:"angle-double-right",class:"mx-2"}),h(y,{to:{name:"sample-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid,sampleUid:s(g)?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[_(o(s(g)?.sampleId),1)]),_:1},8,["to"])])):k("",!0)]),e("span",null,o(V(s(t)?.profiles,s(t)?.analyses)),1),e("div",null,[e("div",{onClick:a[0]||(a[0]=r=>x.dropdownOpen=!x.dropdownOpen),class:"hidden md:block md:flex md:items-center ml-2 mt-2"},[e("button",Le,o(s(t)?.status),1),e("div",Pe,[h(d,{icon:"chevron-down",class:"text-gray-400"})])]),i(e("div",{onClick:a[1]||(a[1]=r=>x.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[l,x.dropdownOpen]]),i(e("div",$e,[i(e("div",{onClick:a[2]||(a[2]=r=>T()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Receive ",512),[[l,N.value]]),i(e("div",{onClick:a[3]||(a[3]=r=>W()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Approve ",512),[[l,J.value]]),i(e("div",{onClick:a[4]||(a[4]=r=>Y()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reject ",512),[[l,X.value]]),i(e("div",{onClick:a[5]||(a[5]=r=>E()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Cancel ",512),[[l,A.value]]),i(e("div",{onClick:a[6]||(a[6]=r=>F()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reinstate ",512),[[l,z.value]]),i(e("div",{onClick:a[7]||(a[7]=r=>H()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"},o(w.value),513),[[l,M.value]]),i(e("div",{onClick:a[8]||(a[8]=r=>K()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Invalidate ",512),[[l,G.value]]),i(e("div",{onClick:a[9]||(a[9]=r=>ee()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Recover ",512),[[l,Z.value]])],512),[[l,x.dropdownOpen]])])]),Be,e("div",Ie,[e("div",Oe,[e("div",qe,[Ue,e("span",Ve,o(s(t)?.analysisRequest?.clientRequestId),1)]),e("div",Ne,[Te,e("span",Ae,o(s(t)?.analysisRequest?.client?.name),1)]),Ee]),e("div",ze,[e("div",Fe,[Je,e("span",We,o(s(t)?.sampleType?.name),1)]),e("div",Ge,[Me,e("span",He,o(s(v)(s(t)?.dateCollected,!0)),1)]),e("div",Ke,[Qe,e("span",Xe,o(s(v)(s(t)?.createdAt,!0)),1)]),e("div",Ye,[Ze,e("span",et,o(s(v)(s(t)?.dateReceived,!0)),1)])]),e("div",tt,[e("div",st,[at,e("span",ot,o(s(v)(s(t)?.dateSubmitted,!0)),1)]),e("div",nt,[rt,e("span",it,o(s(v)(s(t)?.dateVerified,!0)),1)]),e("div",lt,[dt,e("span",ct,o(s(v)(s(t)?.datePublished,!0)),1)]),e("div",ut,[pt,e("span",mt,o(s(v)(s(t)?.datePrinted,!0)),1)])])])])]))])),[[ae]]),i(e("div",vt,[e("div",yt,[ht,e("div",{class:"hover:underline hover:cursor-pointer",onClick:a[10]||(a[10]=r=>te(s(t)))},[e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.name)+" › ",1),e("span",null,o(s(t)?.storageSlot),1)])])],512),[[l,s(t)?.status==="stored"]]),i(e("div",xt,[e("ul",null,[(u(!0),m(j,null,me(s(t)?.rejectionReasons,r=>(u(),m("li",{key:r.uid},o(r.reason),1))),128))])],512),[[l,s(t)?.status==="rejected"]]),h(se)],64)}}}),wt=he(_t,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/Sample.vue"]]);export{wt as default};
