import{d as P,I as k,p as _,o,c as i,b as t,y as h,F as a,C as l,t as u,g as A,f as U,j as G,_ as V,ba as B,k as C}from"./index-06e172a4.js";import{u as D}from"./user-d1932fe2.js";import"./_queries-bf8d5dc4.js";const S={class:"overflow-x-auto mt-4"},F={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},z={class:"relative"},E={class:"min-w-full"},N=t("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Permissions ",-1),j=t("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300"},null,-1),I={class:"flex-1 overflow-y-auto max-h-[700px]"},L={class:"min-w-full"},O={class:"bg-white"},T={class:"bg-slate-100"},H={class:"py-1 font-bold px-1 text-gray-600"},M={class:"py-1 font-sm italic text-gray-500 px-1"},R=P({__name:"Permissions",setup(q){const f=G(()=>V(()=>import("./FelSwitch-af7fbe58.js"),["assets/FelSwitch-af7fbe58.js","assets/index-06e172a4.js","assets/index-3e01f4af.css"]));let d=D();const{withClientMutation:b}=k();d.fetchGroupsAndPermissions();const c=_(()=>d.getGroups);function p(n,r){return n?.permissions?.some(e=>e?.uid===r?.uid)??!1}const y=(n,r)=>n?.reduce(function(e,s){return(e[s[r]]=e[s[r]]||[]).push(s),e},{}),g=_(()=>Array.from(Object.entries(y(d.getPermissions,"target"))));function x(n,r){b(B,{groupUid:n?.uid,permissionUid:r?.uid},"updateGroupPermissions").then(e=>d.updateGroupsAndPermissions(e))}function w(n,r,e){e!==p(n,r)&&x(n,r)}return(n,r)=>(o(),i("div",S,[t("div",F,[t("div",z,[h(" Fixed Header "),t("table",E,[t("thead",null,[t("tr",null,[N,(o(!0),i(a,null,l(c.value,e=>(o(),i("th",{key:e.uid,class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},u(e.name),1))),128)),j])])]),h(" Scrollable Body "),t("div",I,[t("table",L,[t("tbody",O,[(o(!0),i(a,null,l(g.value,e=>(o(),i(a,{key:e[0]},[t("tr",T,[t("td",H,u(e[0]),1),(o(!0),i(a,null,l(c.value,s=>(o(),i("td",{class:"py-1 font-medium px-1 text-slate-100",key:s.uid},u(s.name),1))),128))]),(o(!0),i(a,null,l(e[1],s=>(o(),i("tr",{key:s.uid,class:"border-b border-slate-200"},[t("td",M,u(s.action),1),(o(!0),i(a,null,l(c.value,m=>(o(),i("td",{key:m.uid,class:"px-1"},[A(U(f),{"model-value":p(m,s),"onUpdate:modelValue":v=>w(m,s,v),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),W=C(R,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{W as default};
