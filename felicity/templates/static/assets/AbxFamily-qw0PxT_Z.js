const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as L,u as R,a0 as x,ah as G,a5 as z,a6 as K,a3 as Q,_ as Y,r as s,c as E,o as u,z as l,A as M,C as T,a,K as o,M as f,F as N,H as J,I as _,B as W,D as X,al as Z}from"./index-OdhKCqIc.js";import{c as O,a as j,u as $,b as S}from"./index.esm-BfHj8iGm.js";import{o as ee,p as te,L as oe,M as ae}from"./microbiology.mutations-cVAbKt4K.js";import{E as re,a as le,b as ne,c as se,d as ie}from"./EmptyTitle-aCQRDpx3.js";import{P as de}from"./PageHeading-Czi_4opS.js";const me=L({__name:"AbxFamily",setup(P,{expose:e}){e();const k=z(()=>K(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),{withClientMutation:t,withClientQuery:v}=R();let g=x(!1),i=x("");const d=x(!0),m=x(null),c=O({name:j().trim().required("Name is required"),order:O().required("Order is required")}),{handleSubmit:F,resetForm:w,setValues:h,errors:A}=$({validationSchema:c,initialValues:{name:"",order:null}}),{value:n}=S("name"),{value:D}=S("order"),b=x([]),V=x([]);G(()=>{v(ee,{},"abxOrderAll").then(r=>{r&&(V.value=r)}),v(te,{},"abxFamilyAll").then(r=>{r&&(b.value=r)})});function U(r,p={}){d.value=r,g.value=!0,i.value=(r?"Create":"Edit")+" Family",r?(m.value=null,w()):(m.value=p.uid??null,h({name:p.name??"",order:p.order??null}))}const q=F(r=>{const p={name:r.name,orderUid:r.order?.uid};d.value===!0&&t(oe,{payload:p},"createAbxFamily").then(y=>{y&&b.value.unshift(y)}),d.value===!1&&m.value&&t(ae,{uid:m.value,payload:p},"updateAbxFamily").then(y=>{if(y){const H=b.value.findIndex(C=>C.uid==y.uid);H>-1&&(b.value=[...b.value.map((C,I)=>I===H?y:C)])}}),g.value=!1}),B={VueMultiselect:k,withClientMutation:t,withClientQuery:v,get showModal(){return g},set showModal(r){g=r},get formTitle(){return i},set formTitle(r){i=r},formAction:d,currentUid:m,familySchema:c,handleSubmit:F,resetForm:w,setValues:h,errors:A,name:n,order:D,abxFamilys:b,abxOrders:V,FormManager:U,saveForm:q,get Button(){return Q},get Empty(){return ie},get EmptyContent(){return se},get EmptyDescription(){return ne},get EmptyHeader(){return le},get EmptyTitle(){return re},PageHeading:de};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),ue={class:"space-y-6"},fe={class:"border border-border bg-card rounded-lg shadow-md"},ce={class:"relative w-full overflow-auto"},be=["onClick"],pe={class:"text-xl font-semibold text-foreground"},ye={class:"grid grid-cols-2 gap-4"},xe={class:"block"},ge={key:0,class:"text-sm text-destructive"},_e={class:"block"},ve={key:0,class:"text-sm text-destructive"};function Fe(P,e,k,t,v,g){const i=s("TableHead"),d=s("TableRow"),m=s("TableHeader"),c=s("TableCell"),F=s("TableEmpty"),w=s("TableBody"),h=s("Table"),A=s("Modal");return u(),E(N,null,[l("div",ue,[a(t.PageHeading,{title:"Families"},{default:o(()=>[a(t.Button,{onClick:e[0]||(e[0]=n=>t.FormManager(!0))},{default:o(()=>[...e[5]||(e[5]=[f("Add Family",-1)])]),_:1})]),_:1}),l("div",fe,[l("div",ce,[a(h,{class:"w-full caption-bottom text-sm"},{default:o(()=>[a(m,{class:"[&_tr]:border-b"},{default:o(()=>[a(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[6]||(e[6]=[f("Name",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[7]||(e[7]=[f("Order",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[8]||(e[8]=[l("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),a(w,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(u(!0),E(N,null,J(t.abxFamilys,n=>(u(),M(d,{key:n?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(c,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[f(_(n?.name),1)]),_:2},1024),a(c,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[f(_(n?.order?.name),1)]),_:2},1024),a(c,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[l("button",{onClick:D=>t.FormManager(!1,n),class:"text-primary hover:text-primary/80"}," Edit ",8,be)]),_:2},1024)]),_:2},1024))),128)),!t.abxFamilys||t.abxFamilys.length===0?(u(),M(F,{key:0,colspan:3},{default:o(()=>[a(t.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[a(t.EmptyContent,null,{default:o(()=>[a(t.EmptyHeader,null,{default:o(()=>[a(t.EmptyTitle,null,{default:o(()=>[...e[9]||(e[9]=[f("No families found",-1)])]),_:1}),a(t.EmptyDescription,null,{default:o(()=>[...e[10]||(e[10]=[f("Add a family to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})])])]),t.showModal?(u(),M(A,{key:0,onClose:e[4]||(e[4]=n=>t.showModal=!1),"content-width":"w-1/2"},{header:o(()=>[l("h3",pe,_(t.formTitle),1)]),body:o(()=>[l("form",{onSubmit:e[3]||(e[3]=W((...n)=>t.saveForm&&t.saveForm(...n),["prevent"])),class:"space-y-6 p-4"},[l("div",ye,[l("label",xe,[e[11]||(e[11]=l("span",{class:"text-sm font-medium text-foreground"},"Family Name",-1)),X(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=n=>t.name=n),placeholder:"Name ..."},null,512),[[Z,t.name]]),t.errors.name?(u(),E("p",ge,_(t.errors.name),1)):T("",!0)]),l("label",_e,[e[12]||(e[12]=l("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),a(t.VueMultiselect,{modelValue:t.order,"onUpdate:modelValue":e[2]||(e[2]=n=>t.order=n),options:t.abxOrders,multiple:!1,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),t.errors.order?(u(),E("p",ve,_(t.errors.order),1)):T("",!0)])]),e[13]||(e[13]=l("hr",{class:"border-border"},null,-1)),e[14]||(e[14]=l("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Family ",-1))],32)]),_:1})):T("",!0)],64)}const Ce=Y(me,[["render",Fe],["__scopeId","data-v-4853c3ca"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxFamily.vue"]]);export{Ce as default};
