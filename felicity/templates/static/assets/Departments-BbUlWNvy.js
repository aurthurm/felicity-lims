import{a0 as N,f as T,a7 as c,h as E,aL as V,aM as A,_ as B,r as b,c as g,o as f,A as t,C as L,E as U,a as D,N as p,P as j,J as w,K as q,L as v,D as P,F as I,a2 as J}from"./index-Daoe3XS9.js";import{c as K,a as O,u as R,b as z}from"./index.esm-BT7_X8h2.js";import{u as G}from"./setup-B4brziEy.js";const H=N({__name:"Departments",setup(k,{expose:e}){e();const a=G(),{withClientMutation:o}=T();let l=c(!1),m=c("");const d=c(!0),r=c(null),u=K({name:O().required("Department name is required")}),{handleSubmit:s,errors:_,resetForm:x,setValues:h}=R({validationSchema:u,initialValues:{name:""}}),{value:F}=z("name");a.fetchDepartments({});const M=E(()=>a.getDepartments);function C(n,i){d.value=n,l.value=!0,m.value=(n?"CREATE":"EDIT")+" Department",n?(r.value=null,x({values:{name:""}})):(r.value=i?.uid??null,h({name:i?.name??""}))}const S=s(n=>{if(d.value===!0)o(V,{payload:{name:n.name}},"createDepartment").then(i=>a.addDepartment(i));else{if(!r.value)return;o(A,{uid:r.value,payload:{name:n.name}},"updateDepartment").then(i=>a.updateDepartment(i))}l.value=!1}),y={setupStore:a,withClientMutation:o,get showModal(){return l},set showModal(n){l=n},get formTitle(){return m},set formTitle(n){m=n},formAction:d,currentUid:r,formSchema:u,handleSubmit:s,errors:_,resetForm:x,setValues:h,name:F,departments:M,FormManager:C,saveForm:S};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),Q={class:"space-y-6"},W={class:"rounded-md border bg-card"},X={class:"relative w-full overflow-auto"},Y={class:"w-full caption-bottom text-sm fel-table"},Z={class:"[&_tr:last-child]:border-0"},$={class:"px-4 py-2 align-middle"},ee={class:"px-4 py-2 align-middle text-right"},te=["onClick"],oe={class:"text-lg font-semibold text-foreground"},se={class:"space-y-2"},ne={class:"text-sm text-destructive"};function re(k,e,a,o,l,m){const d=b("fel-button"),r=b("fel-heading"),u=b("fel-modal");return f(),g(w,null,[t("div",Q,[D(r,{title:"Departments"},{default:p(()=>[D(d,{onClick:e[0]||(e[0]=s=>o.FormManager(!0,null))},{default:p(()=>[...e[4]||(e[4]=[j("Add Department",-1)])]),_:1})]),_:1}),t("div",W,[t("div",X,[t("table",Y,[e[5]||(e[5]=t("thead",{class:"[&_tr]:border-b"},[t("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"})])],-1)),t("tbody",Z,[(f(!0),g(w,null,q(o.departments,s=>(f(),g("tr",{key:s?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("td",$,v(s?.name),1),t("td",ee,[t("button",{onClick:_=>o.FormManager(!1,s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,te)])]))),128))])])])])]),o.showModal?(f(),L(u,{key:0,onClose:e[3]||(e[3]=s=>o.showModal=!1)},{header:p(()=>[t("h3",oe,v(o.formTitle),1)]),body:p(()=>[t("form",{class:"space-y-6",onSubmit:e[2]||(e[2]=P((...s)=>o.saveForm&&o.saveForm(...s),["prevent"]))},[t("div",se,[e[6]||(e[6]=t("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Department Name ",-1)),I(t("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=s=>o.name=s),placeholder:"Name ..."},null,512),[[J,o.name]]),t("div",ne,v(o.errors.name),1)]),e[7]||(e[7]=t("hr",{class:"border-border"},null,-1)),e[8]||(e[8]=t("button",{type:"submit",class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Form ",-1))],32)]),_:1})):U("",!0)],64)}const de=B(H,[["render",re],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/laboratory/Departments.vue"]]);export{de as default};
