import{Y as S,u as k,a0 as b,a7 as D,bb as A,a3 as I,a9 as N,aa as V,ab as R,ac as L,ad as q,ae as P,af as U,_ as K,c as E,o as u,z as m,A as y,C as O,a,K as r,M as o,F as Y,H as Z,I as T,B as j,a4 as z}from"./index-OdhKCqIc.js";import{c as G,a as C,u as J,F as Q}from"./index.esm-BfHj8iGm.js";import{u as W,g as X,h as $}from"./inventory-CcBllciv.js";import{E as ee,a as te,b as ae,c as re,d as le}from"./EmptyTitle-aCQRDpx3.js";import{F as oe,a as ne,b as de}from"./FormMessage-CgXFMXx9.js";import{F as se}from"./FormLabel-DxP9wnWS.js";import{I as ie}from"./Input-BEm5S0CJ.js";import{T as me}from"./Textarea-T3VcJTEo.js";import"./inventory.queries-Bx-sCQu8.js";import"./Label-CS46LzLb.js";const ue=S({name:"Hazard",__name:"Hazard",setup(w,{expose:t}){t();const s=W(),{withClientMutation:e}=k(),f=b(!1),g=b(""),l=b(!0),i=b(null),F=G({name:C().trim().required("Hazard name is required"),description:C().trim().nullable()}),c={name:"",description:""},{handleSubmit:_,setValues:p}=J({validationSchema:F,initialValues:{...c}});s.fetchHazards();const M=D(()=>s.getHazards);function x(n){e(X,{payload:n},"createHazard").then(d=>s.addHazard(d))}function H(n){i.value&&e($,{uid:i.value,payload:n},"updateHazard").then(d=>s.updateHazard(d))}function h(n,d){l.value=n,g.value=(n?"CREATE":"EDIT")+" A HAZARD",n?(i.value=null,p({...c})):(i.value=d?.uid??null,p({name:d?.name??"",description:d?.description??""})),f.value=!0}const B=_(n=>{const d={name:n.name,description:n.description??null};l.value===!0&&x(d),l.value===!1&&H(d),f.value=!1}),v={inventoryStore:s,withClientMutation:e,showModal:f,formTitle:g,formAction:l,currentUid:i,hazardSchema:F,defaultValues:c,handleSubmit:_,setValues:p,hazards:M,addHazard:x,editHazard:H,FormManager:h,onModalFormSubmit:B,Modal:A,get Table(){return U},get TableBody(){return P},get TableCell(){return q},get TableEmpty(){return L},get TableHead(){return R},get TableHeader(){return V},get TableRow(){return N},get Empty(){return le},get EmptyContent(){return re},get EmptyDescription(){return ae},get EmptyHeader(){return te},get EmptyTitle(){return ee},get Button(){return I},get FormControl(){return de},get FormField(){return Q},get FormItem(){return ne},get FormLabel(){return se},get FormMessage(){return oe},get Input(){return ie},get Textarea(){return me}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),fe={class:"space-y-6"},be={class:"flex items-center justify-between"},ge={class:"border border-border bg-card rounded-lg shadow-md"},ce={class:"relative w-full overflow-auto"},pe={class:"text-lg font-semibold text-foreground"};function ye(w,t,s,e,f,g){return u(),E("div",fe,[m("div",be,[t[4]||(t[4]=m("h2",{class:"text-2xl font-semibold text-foreground"},"Hazards",-1)),a(e.Button,{onClick:t[0]||(t[0]=l=>e.FormManager(!0,null))},{default:r(()=>[...t[3]||(t[3]=[o("Add Hazard",-1)])]),_:1})]),m("div",ge,[m("div",ce,[a(e.Table,{class:"w-full caption-bottom text-sm"},{default:r(()=>[a(e.TableHeader,{class:"[&_tr]:border-b"},{default:r(()=>[a(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[a(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...t[5]||(t[5]=[o(" Hazard Name ",-1)])]),_:1}),a(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...t[6]||(t[6]=[o(" Description ",-1)])]),_:1}),a(e.TableHead,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:r(()=>[...t[7]||(t[7]=[o(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),a(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:r(()=>[e.hazards.length===0?(u(),y(e.TableEmpty,{key:0,colspan:3},{default:r(()=>[a(e.Empty,{class:"border-0 bg-transparent p-0"},{default:r(()=>[a(e.EmptyContent,null,{default:r(()=>[a(e.EmptyHeader,null,{default:r(()=>[a(e.EmptyTitle,null,{default:r(()=>[...t[8]||(t[8]=[o("No hazards found",-1)])]),_:1}),a(e.EmptyDescription,null,{default:r(()=>[...t[9]||(t[9]=[o("Add hazards to tag stock items safely.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(u(!0),E(Y,{key:1},Z(e.hazards,l=>(u(),y(e.TableRow,{key:l?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[a(e.TableCell,{class:"px-4 py-3 align-middle text-sm"},{default:r(()=>[o(T(l?.name),1)]),_:2},1024),a(e.TableCell,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:r(()=>[o(T(l?.description),1)]),_:2},1024),a(e.TableCell,{class:"px-4 py-3 text-right align-middle"},{default:r(()=>[a(e.Button,{variant:"outline",size:"sm",onClick:i=>e.FormManager(!1,l)},{default:r(()=>[...t[10]||(t[10]=[o("Edit",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),e.showModal?(u(),y(e.Modal,{key:0,onClose:t[2]||(t[2]=l=>e.showModal=!1)},{header:r(()=>[m("h3",pe,T(e.formTitle),1)]),body:r(()=>[m("form",{onSubmit:t[1]||(t[1]=j((...l)=>e.onModalFormSubmit&&e.onModalFormSubmit(...l),["prevent"])),class:"space-y-6"},[a(e.FormField,{name:"name"},{default:r(({componentField:l})=>[a(e.FormItem,null,{default:r(()=>[a(e.FormLabel,null,{default:r(()=>[...t[11]||(t[11]=[o("Hazard Name",-1)])]),_:1}),a(e.FormControl,null,{default:r(()=>[a(e.Input,z(l,{placeholder:"Enter hazard name..."}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"description"},{default:r(({componentField:l})=>[a(e.FormItem,null,{default:r(()=>[a(e.FormLabel,null,{default:r(()=>[...t[12]||(t[12]=[o("Description",-1)])]),_:1}),a(e.FormControl,null,{default:r(()=>[a(e.Textarea,z(l,{class:"min-h-[80px]",placeholder:"Enter description..."}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.Button,{type:"submit",class:"w-full"},{default:r(()=>[...t[13]||(t[13]=[o("Save Changes",-1)])]),_:1})],32)]),_:1})):O("",!0)])}const Me=K(ue,[["render",ye],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/inventory/Hazard.vue"]]);export{Me as default};
