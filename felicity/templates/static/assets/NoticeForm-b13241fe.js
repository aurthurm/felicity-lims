import{f as S,T as F,h as q,k as T,x as t,ag as d,u as s,i as p,D as m,_ as V}from"./_plugin-vue_export-helper-dacf3d65.js";import{A as B,E as C}from"./index-36be58a8.js";import{v as I,w as U}from"./shipment-53265c2d.js";import{c as $,d as A,a as v,f as M,e as h,u as O,b as a}from"./array-9d3d6c63.js";import{v as b,a as R}from"./runtime-dom.esm-bundler-98433118.js";const j={class:"grid grid-cols-2 gap-x-4 mb-4"},z={class:"block col-span-2 mb-2"},G=t("span",{class:"text-gray-700"},"Title",-1),H={class:"text-orange-600 w-4/12"},J={class:"block col-span-2 mb-2"},K=t("span",{class:"text-gray-700"},"Body",-1),L={class:"text-orange-600 w-4/12"},P={class:"block col-span-2 mb-2"},Q=t("span",{class:"text-gray-700"},"Expiration",-1),W={class:"text-orange-600 w-4/12"},X=t("hr",null,null,-1),Y=t("button",{type:"submit",class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ",-1),Z=S({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(g,{emit:f}){const N=g,{withClientMutation:_}=U(),y=I(),{notice:r}=F(N),w=$({uid:A(),title:v().required("Notice is required"),body:v().required("Notice body message is required"),expiry:M().required("Expiry is required").typeError("Invalid Date format"),groups:h(),departments:h()}),{handleSubmit:k,errors:l}=O({validationSchema:w,initialValues:{uid:r?.value?.uid,title:r?.value?.title,body:r?.value?.body,expiry:r?.value?.expiry,groups:r?.value?.groups,departments:r?.value?.departments}}),{value:n}=a("title"),{value:c}=a("body"),{value:u}=a("expiry");a("groups"),a("departments");const x=k(e=>{e.uid||D(e),e.uid&&E(e)});function D(e){_(B,{payload:{title:e.title,body:e.body,expiry:e.expiry,groups:e.groups||[],departments:e.departments||[]}},"createNotice").then(o=>{y.addNotice(o),f("close")})}function E(e){_(C,{uid:e.uid,payload:{title:e.title,body:e.body,expiry:e.expiry,groups:e.groups||[],departments:e.departments||[]}},"updateNotice").then(o=>{y.updateNotice(o),f("close")})}return(e,o)=>(q(),T("form",{action:"post",class:"p-1",onSubmit:o[3]||(o[3]=R((...i)=>s(x)&&s(x)(...i),["prevent"]))},[t("div",j,[t("label",z,[G,d(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[0]||(o[0]=i=>p(n)?n.value=i:null),placeholder:"Name ..."},null,512),[[b,s(n)]]),t("div",H,m(s(l).title),1)]),t("label",J,[K,d(t("textarea",{class:"form-input mt-1 block w-full",rows:"5","onUpdate:modelValue":o[1]||(o[1]=i=>p(c)?c.value=i:null),placeholder:"Name ..."},null,512),[[b,s(c)]]),t("div",L,m(s(l).body),1)]),t("label",P,[Q,d(t("input",{class:"form-input mt-1 block w-full",type:"datetime-local","onUpdate:modelValue":o[2]||(o[2]=i=>p(u)?u.value=i:null),placeholder:"Name ..."},null,512),[[b,s(u)]]),t("div",W,m(s(l).expiry),1)])]),X,Y],32))}}),re=V(Z,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{re as default};
