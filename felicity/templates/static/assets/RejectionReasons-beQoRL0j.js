import{Y as I,u as k,a0 as g,a7 as A,a3 as E,_ as H,r as m,c as j,o as v,z as i,A as C,C as D,a,K as o,M as c,F as w,H as N,I as h,B as V,a4 as P}from"./index-OdhKCqIc.js";import{c as L,a as O,u as q,F as z}from"./index.esm-BfHj8iGm.js";import{s as U,t as J}from"./analyses.mutations-DUxQZn1r.js";import{u as K}from"./analysis-PB9AMevg.js";import{I as Y}from"./Input-BEm5S0CJ.js";import{F as G,a as Q,b as W}from"./FormMessage-CgXFMXx9.js";import{F as X}from"./FormLabel-DxP9wnWS.js";import{P as Z}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const $=I({__name:"RejectionReasons",setup(M,{expose:t}){t();const u=K(),{withClientMutation:e}=k(),_=g(!1),F=g(""),d=g(!1),l=g(null),R=L({reason:O().trim().required("Reason is required")}),{handleSubmit:f,resetForm:p,setValues:b}=q({validationSchema:R,initialValues:{reason:""}});u.fetchRejectionReasons();const x=A(()=>u.getRejectionReasons);function n(s){e(U,s,"createRejectionReason").then(r=>u.addRejectionReason(r))}function y(s){l.value&&e(J,{uid:l.value,...s},"updateRejectionReason").then(r=>u.updateRejectionReason(r))}function B(s,r={}){d.value=s,_.value=!0,F.value=(s?"CREATE":"EDIT")+" REJECTION REASON",s?(l.value=null,p({values:{reason:""}})):(l.value=r.uid??null,b({reason:r.reason??""}))}const S=f(s=>{const r={reason:s.reason};d.value===!0&&n(r),d.value===!1&&y(r),_.value=!1}),T={analysisStore:u,withClientMutation:e,showModal:_,formTitle:F,formAction:d,currentUid:l,rejectionSchema:R,handleSubmit:f,resetForm:p,setValues:b,rejectionReasons:x,addRejectionReason:n,editRejectionReason:y,FormManager:B,saveForm:S,get Button(){return E},get Input(){return Y},get FormControl(){return W},get FormField(){return z},get FormItem(){return Q},get FormLabel(){return X},get FormMessage(){return G},PageHeading:Z};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),ee={class:"mt-4 border border-border bg-card rounded-lg shadow-md"},te={class:"relative w-full overflow-auto"},oe={class:"text-sm text-foreground"},ae={class:"text-lg font-bold text-foreground"},ne={class:"space-y-4"},se={class:"pt-4"};function re(M,t,u,e,_,F){const d=m("TableHead"),l=m("TableRow"),R=m("TableHeader"),f=m("TableCell"),p=m("TableBody"),b=m("Table"),x=m("Modal");return v(),j(w,null,[i("div",null,[a(e.PageHeading,{title:"Rejection Reasons"},{default:o(()=>[a(e.Button,{onClick:t[0]||(t[0]=n=>e.FormManager(!0))},{default:o(()=>[...t[3]||(t[3]=[c("Add Rejection Reason",-1)])]),_:1})]),_:1}),i("div",ee,[i("div",te,[a(b,{class:"w-full caption-bottom text-sm"},{default:o(()=>[a(R,{class:"[&_tr]:border-b"},{default:o(()=>[a(l,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...t[4]||(t[4]=[c("Reason",-1)])]),_:1}),a(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...t[5]||(t[5]=[c("Actions",-1)])]),_:1})]),_:1})]),_:1}),a(p,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(v(!0),j(w,null,N(e.rejectionReasons,n=>(v(),C(l,{key:n?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(f,{class:"px-4 py-3 align-middle text-sm"},{default:o(()=>[i("div",oe,h(n?.reason),1)]),_:2},1024),a(f,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[a(e.Button,{variant:"outline",size:"sm",onClick:y=>e.FormManager(!1,n)},{default:o(()=>[...t[6]||(t[6]=[c(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e.showModal?(v(),C(x,{key:0,onClose:t[2]||(t[2]=n=>e.showModal=!1)},{header:o(()=>[i("h3",ae,h(e.formTitle),1)]),body:o(()=>[i("form",{onSubmit:t[1]||(t[1]=V((...n)=>e.saveForm&&e.saveForm(...n),["prevent"])),class:"p-6 space-y-6"},[i("div",ne,[a(e.FormField,{name:"reason"},{default:o(({componentField:n})=>[a(e.FormItem,null,{default:o(()=>[a(e.FormLabel,null,{default:o(()=>[...t[7]||(t[7]=[c("Rejection Reason",-1)])]),_:1}),a(e.FormControl,null,{default:o(()=>[a(e.Input,P(n,{placeholder:"Reason ..."}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1})]),i("div",se,[a(e.Button,{type:"submit",class:"w-full"},{default:o(()=>[...t[8]||(t[8]=[c("Save Form",-1)])]),_:1})])],32)]),_:1})):D("",!0)],64)}const pe=H($,[["render",re],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/RejectionReasons.vue"]]);export{pe as default};
