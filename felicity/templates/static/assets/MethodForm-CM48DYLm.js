const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as U,u as j,aw as q,an as L,a7 as C,a0 as E,a5 as N,a6 as O,a3 as P,_ as K,c as R,o as z,z as c,a as s,K as n,M as p,a4 as _,B as Y}from"./index-OdhKCqIc.js";import{c as G,a as h,u as H,F as J}from"./index.esm-BfHj8iGm.js";import{k as Q,l as W}from"./instrument.mutations-BxEMyJNC.js";import{u as X}from"./analysis-PB9AMevg.js";import{u as Z}from"./setup-BcFG_bXr.js";import{I as $}from"./Input-BEm5S0CJ.js";import{T as ee}from"./Textarea-T3VcJTEo.js";import{F as te,a as se,b as oe}from"./FormMessage-CgXFMXx9.js";import{F as ae}from"./FormLabel-DxP9wnWS.js";import{L as ne}from"./Label-CS46LzLb.js";/* empty css                                                                 */const le=U({__name:"MethodForm",props:{method:Object,methodUid:String,analysis:Object,analysisUid:String},emits:["close"],setup(g,{expose:o,emit:b}){o();const e=N(()=>O(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),y=X(),d=Z(),{withClientMutation:a}=j(),v=g,{method:l,analysis:f}=q(v),M=G({name:h().required("Method name is required"),keyword:h().required("Keyword is required"),description:h().nullable()}),{handleSubmit:w,setValues:I}=H({validationSchema:M,initialValues:{name:l?.value?.name??"",keyword:l?.value?.keyword??"",description:l?.value?.description??""}});L(()=>v.analysisUid,(t,r)=>{}),L(()=>l?.value,t=>{I({name:t?.name??"",keyword:t?.keyword??"",description:t?.description??""})});const F=b,k=C(()=>y.getAnalysesServicesSimple);let m=E([]);f?.value?.uid!==void 0?m.value.push(f.value):k.value?.forEach(t=>{t?.methods?.some(r=>r.uid==l?.value?.uid)&&m.value.push(t)}),d.fetchInstruments();const B=C(()=>d.getInstruments);let u=E([]);const S=()=>{const t=[];return l?.value?.instruments?.forEach(r=>{f?.value?.instruments?.some(T=>T?.uid===r?.uid)&&t.push(r)}),t};u.value=S(),l?.value?.uid!==void 0&&l?.value?.instruments?.forEach(t=>u.value.push(t));function V(t){const r={name:t.name,keyword:t.keyword,description:t.description,instruments:u.value?.map(i=>i.uid),analyses:m.value?.map(i=>i.uid)};a(Q,{payload:r},"createMethod").then(i=>{F("close"),d.addMethod(i)})}function A(t){const r={name:t.name,keyword:t.keyword,description:t.description,instruments:u.value?.map(i=>i.uid),analyses:m.value?.map(i=>i.uid)};a(W,{uid:l?.value?.uid,payload:r},"updateMethod").then(i=>{F("close"),d.updateMethod(i)})}const D=w(t=>{const r={name:t.name,keyword:t.keyword,description:t.description};l?.value?.uid||V(r),l?.value?.uid&&A(r)}),x={VueMultiselect:e,analysisStore:y,setupStore:d,withClientMutation:a,props:v,method:l,analysis:f,formSchema:M,handleSubmit:w,setValues:I,emit:F,analyses:k,get selectedAnalyses(){return m},set selectedAnalyses(t){m=t},instruments:B,get selectedIntsruments(){return u},set selectedIntsruments(t){u=t},getAnalMethInstruments:S,addMethod:V,editMethod:A,saveForm:D,get Button(){return P},get Input(){return $},get Textarea(){return ee},get FormControl(){return oe},get FormField(){return J},get FormItem(){return se},get FormLabel(){return ae},get FormMessage(){return te},get Label(){return ne}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),re={class:"space-y-4"},ie={class:"grid grid-cols-3 gap-4"},de={class:"space-y-4"},me={class:"grid gap-2"},ue={class:"grid gap-2"},ce={class:"flex justify-end"};function pe(g,o,b,e,y,d){return z(),R("form",{onSubmit:o[2]||(o[2]=Y((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-4"},[c("div",re,[c("div",ie,[s(e.FormField,{name:"name"},{default:n(({componentField:a})=>[s(e.FormItem,{class:"col-span-2"},{default:n(()=>[s(e.FormLabel,null,{default:n(()=>[...o[3]||(o[3]=[p("Method Name",-1)])]),_:1}),s(e.FormControl,null,{default:n(()=>[s(e.Input,_(a,{placeholder:"Enter method name..."}),null,16)]),_:2},1024),s(e.FormMessage)]),_:2},1024)]),_:1}),s(e.FormField,{name:"keyword"},{default:n(({componentField:a})=>[s(e.FormItem,null,{default:n(()=>[s(e.FormLabel,null,{default:n(()=>[...o[4]||(o[4]=[p("Keyword",-1)])]),_:1}),s(e.FormControl,null,{default:n(()=>[s(e.Input,_(a,{placeholder:"Enter keyword..."}),null,16)]),_:2},1024),s(e.FormMessage)]),_:2},1024)]),_:1})]),c("div",de,[c("div",me,[s(e.Label,null,{default:n(()=>[...o[5]||(o[5]=[p("Analyses",-1)])]),_:1}),s(e.VueMultiselect,{modelValue:e.selectedAnalyses,"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectedAnalyses=a),options:e.analyses,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:e.analysis?.uid!=null,class:"multiselect-blue"},null,8,["modelValue","options","disabled"])]),c("div",ue,[s(e.Label,null,{default:n(()=>[...o[6]||(o[6]=[p("Instruments",-1)])]),_:1}),s(e.VueMultiselect,{modelValue:e.selectedIntsruments,"onUpdate:modelValue":o[1]||(o[1]=a=>e.selectedIntsruments=a),options:e.instruments,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-blue"},null,8,["modelValue","options"])]),s(e.FormField,{name:"description"},{default:n(({componentField:a})=>[s(e.FormItem,null,{default:n(()=>[s(e.FormLabel,null,{default:n(()=>[...o[7]||(o[7]=[p("Description",-1)])]),_:1}),s(e.FormControl,null,{default:n(()=>[s(e.Textarea,_(a,{placeholder:"Enter description..."}),null,16)]),_:2},1024),s(e.FormMessage)]),_:2},1024)]),_:1})])]),c("div",ce,[s(e.Button,{type:"submit"},{default:n(()=>[...o[8]||(o[8]=[p("Save Changes",-1)])]),_:1})])],32)}const ke=K(le,[["render",pe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/MethodForm.vue"]]);export{ke as default};
