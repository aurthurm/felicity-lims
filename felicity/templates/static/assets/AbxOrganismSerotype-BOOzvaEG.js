const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelDataTable-BgRrYa9n.js","assets/index-Daoe3XS9.js","assets/index-C7Rn7ES8.css","assets/vue-multiselect.esm-C31Sh9AO.js"])))=>i.map(i=>d[i]);
import{a0 as le,f as ie,a7 as d,h as de,ad as ue,aj as T,a1 as V,a6 as I,_ as fe,r as A,c as N,o as _,A as o,C as ge,E,a as k,N as p,P as me,D as ce,L as H,F as f,a2 as g,J as be}from"./index-Daoe3XS9.js";import{c as L,u as pe,b as u}from"./index.esm-BT7_X8h2.js";import{w as xe,x as he,y as ve,a as ye}from"./microbiology.mutations-t5_lptzK.js";const Se=le({__name:"AbxOrganismSerotype",setup(q,{expose:e}){e();const w=V(()=>I(()=>import("./FelDataTable-BgRrYa9n.js"),__vite__mapDeps([0,1,2]))),s=V(()=>I(()=>import("./vue-multiselect.esm-C31Sh9AO.js"),__vite__mapDeps([3,1,2]))),{withClientMutation:x,withClientQuery:h}=ie();let m=d(!1),b=d("");const c=d(!0),r=d(null),C=L({organism:L().required("Organism is required")}),{handleSubmit:B,resetForm:P,setValues:M,errors:X}=pe({validationSchema:C,initialValues:{organism:null,serotype:"",serogroup:"",subspecies:"",oAntigens:"",hPhase1:"",hPhase2:"",x997Check:"",fate:""}}),{value:z}=u("organism"),{value:G}=u("serotype"),{value:R}=u("serogroup"),{value:J}=u("subspecies"),{value:K}=u("oAntigens"),{value:Q}=u("hPhase1"),{value:W}=u("hPhase2"),{value:Y}=u("x997Check"),{value:Z}=u("fate"),U=d(!1),i=d([]),D=d([]);let a=reactive({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const O=d(0);let v=d({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const j=de(()=>i?.value?.length+" of "+O.value+" organisms"),$=d([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1}]);function y(t){h(ve,{text:t.text,pageSize:t.first,sortBy:t.sortBy},void 0).then(n=>{const l=n.abxOrganismSerotypeAll,S=l.items;t.filterAction?(i.value=[],i.value=S):i.value=T(i.value,S,"uid"),O.value=l?.totalCount,v.value=l?.pageInfo}).finally(()=>{U.value=!1})}function ee(t,n){t?.length<3||h(ye,{pageSize:50,text:t,sortBy:["name"]},"abxOrganismAll").then(l=>{l&&(D.value=l?.items??[])})}ue(()=>{y(a)});function se(t){a.first=100,a.after="",a.text=t.filterText,a.filterAction=!0,y(a)}function oe(t){a.first=t.fetchCount,a.after=v?.value?.endCursor,a.text=t.filterText,a.filterAction=!1,y(a)}const te=()=>P();function re(t,n={}){c.value=t,m.value=!0,b.value=(t?"Create":"Edit")+" OrganismSerotype",t?(r.value=null,P()):(r.value=n.uid??null,M({organism:n.organism??null,serotype:n.serotype??"",serogroup:n.serogroup??"",subspecies:n.subspecies??"",oAntigens:n.oAntigens??"",hPhase1:n.hPhase1??"",hPhase2:n.hPhase2??"",x997Check:n.x997Check??"",fate:n.fate??""}))}const ne=B(t=>{const n={organismUid:t.organism?.uid,serotype:t.serotype,serogroup:t.serogroup,subspecies:t.subspecies,oAntigens:t.oAntigens,hPhase1:t.hPhase1,hPhase2:t.hPhase2,x997Check:t.x997Check,fate:t.fate};c.value===!0&&x(xe,{payload:n},"createAbxOrganismSerotype").then(l=>{l&&(i.value=T(i.value,[l],"uid"))}),c.value===!1&&r.value&&x(he,{uid:r.value,payload:n},"updateAbxOrganismSerotype").then(l=>{if(l){const S=i.value.findIndex(ae=>ae.uid==l.uid);i.value[S]=l}}),m.value=!1}),F={DataTable:w,VueMultiselect:s,withClientMutation:x,withClientQuery:h,get showModal(){return m},set showModal(t){m=t},get formTitle(){return b},set formTitle(t){b=t},formAction:c,currentUid:r,organismSerotypeSchema:C,handleSubmit:B,resetForm:P,setValues:M,errors:X,organism:z,serotype:G,serogroup:R,subspecies:J,oAntigens:K,hPhase1:Q,hPhase2:W,x997Check:Y,fate:Z,fetchingOrganismSerotypes:U,abxOrganismSerotypes:i,abxOrganisms:D,get abxParams(){return a},set abxParams(t){a=t},organismCount:O,get organismPageInfo(){return v},set organismPageInfo(t){v=t},countNone:j,tableColumns:$,fetchOrganismSerotypes:y,organismSearch:ee,searchOrganismSerotypes:se,showMoreOrganismSerotypes:oe,resetOrganismSerotype:te,FormManager:re,saveForm:ne};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),ke={class:"space-y-6"},Pe={class:"bg-card p-6 shadow-sm rounded-lg"},Oe={class:"text-xl font-semibold text-foreground"},Ae={class:"grid grid-cols-2 gap-4"},_e={class:"block"},we={key:0,class:"text-sm text-destructive"},Ce={class:"block"},Be={class:"grid grid-cols-2 gap-4"},Me={class:"block"},Ue={class:"block"},De={class:"grid grid-cols-2 gap-4"},Fe={class:"block"},Te={class:"block"},Ve={class:"grid grid-cols-2 gap-4"},Ie={class:"block"},Ne={class:"block"},Ee={class:"grid grid-cols-2 gap-4"},He={class:"block"};function Le(q,e,w,s,x,h){const m=A("fel-button"),b=A("fel-heading"),c=A("fel-modal");return _(),N(be,null,[o("div",ke,[k(b,{title:"Organism Serotypes"},{default:p(()=>[k(m,{onClick:e[0]||(e[0]=r=>s.FormManager(!0))},{default:p(()=>[...e[12]||(e[12]=[me("Add Organism Serotype",-1)])]),_:1})]),_:1}),o("div",Pe,[k(s.DataTable,{columns:s.tableColumns,data:s.abxOrganismSerotypes,toggleColumns:!0,loading:s.fetchingOrganismSerotypes,paginable:!0,pageMeta:{fetchCount:s.abxParams.first,hasNextPage:!0,countNone:s.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:s.searchOrganismSerotypes,onOnSearchFocus:s.resetOrganismSerotype,onOnPaginate:s.showMoreOrganismSerotypes,selectable:!1},{footer:p(()=>[...e[13]||(e[13]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),s.showModal?(_(),ge(c,{key:0,onClose:e[11]||(e[11]=r=>s.showModal=!1),"content-width":"w-1/2"},{header:p(()=>[o("h3",Oe,H(s.formTitle),1)]),body:p(()=>[o("form",{onSubmit:e[10]||(e[10]=ce((...r)=>s.saveForm&&s.saveForm(...r),["prevent"])),class:"space-y-6 p-4"},[o("div",Ae,[o("label",_e,[e[14]||(e[14]=o("span",{class:"text-sm font-medium text-foreground"},"Organism",-1)),k(s.VueMultiselect,{modelValue:s.organism,"onUpdate:modelValue":e[1]||(e[1]=r=>s.organism=r),options:s.abxOrganisms,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:s.organismSearch,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),s.errors.organism?(_(),N("p",we,H(s.errors.organism),1)):E("",!0)]),o("label",Ce,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Serotype",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=r=>s.serotype=r),placeholder:"Serotype ..."},null,512),[[g,s.serotype]])])]),o("div",Be,[o("label",Me,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Serogroup",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=r=>s.serogroup=r),placeholder:"Serogroup ..."},null,512),[[g,s.serogroup]])]),o("label",Ue,[e[17]||(e[17]=o("span",{class:"text-sm font-medium text-foreground"},"Subspecies",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=r=>s.subspecies=r),placeholder:"Subspecies ..."},null,512),[[g,s.subspecies]])])]),o("div",De,[o("label",Fe,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"O Antigens",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=r=>s.oAntigens=r),placeholder:"O Antigens ..."},null,512),[[g,s.oAntigens]])]),o("label",Te,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"H Phase1",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=r=>s.hPhase1=r),placeholder:"H Phase1 ..."},null,512),[[g,s.hPhase1]])])]),o("div",Ve,[o("label",Ie,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"H Phase2",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=r=>s.hPhase2=r),placeholder:"H Phase2 ..."},null,512),[[g,s.hPhase2]])]),o("label",Ne,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"X997 Check",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=r=>s.x997Check=r),placeholder:"X997 Check ..."},null,512),[[g,s.x997Check]])])]),o("div",Ee,[o("label",He,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Fate",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[9]||(e[9]=r=>s.fate=r),placeholder:"Fate ..."},null,512),[[g,s.fate]])])]),e[23]||(e[23]=o("hr",{class:"border-border"},null,-1)),e[24]||(e[24]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Serotype ",-1))],32)]),_:1})):E("",!0)],64)}const Ge=fe(Se,[["render",Le],["__scopeId","data-v-a814e9fb"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{Ge as default};
