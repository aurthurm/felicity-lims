import{W as R,f as $,t as j,a2 as y,h as q,Y as P,i as A,r as U,o as i,c as d,a as C,M as m,N as W,O as t,F as p,H as v,J as l,a7 as r,z as Y,D as f,a4 as M,Z as I,C as z,af as H,L as J,a0 as Q,a1 as Z,_ as G}from"./index-93739211.js";import{L as K,M as X}from"./analyses.mutations-e3a0ff1f.js";import{u as ee}from"./analysis-689a99f8.js";import{u as te}from"./setup-e711c708.js";import"./_queries-2ba61825.js";const oe={class:"overflow-x-auto mt-4"},se={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},ne={class:"min-w-full"},re={class:"bg-card"},ie={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},de={class:"text-sm text-foreground"},le={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},ue={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ce={class:"text-sm text-foreground"},me={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},pe={class:"text-sm text-foreground"},fe={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},be=["onClick"],ge={class:"text-lg font-bold text-foreground"},xe={action:"post",class:"p-6 space-y-6"},ye={class:"space-y-4"},ve={class:"grid grid-cols-4 gap-4"},_e={class:"space-y-2"},he=["value"],we={class:"space-y-2"},Le=["value"],De={class:"space-y-2"},ke={class:"space-y-2"},Ae={class:"pt-4"},Ue=R({__name:"DetectionLimit",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(S){const V=Q(()=>Z(()=>import("./index-93739211.js").then(s=>s.cQ),["assets/index-93739211.js","assets/index-0f090789.css"])),_=ee(),c=te(),{withClientMutation:h}=$(),w=S,{analysis:L}=j(w);let a=y(!1),D=y(""),n=q({});const b=y(!0);P(()=>w.analysisUid,(s,e)=>{}),c.fetchInstruments();const g=A(()=>c.getInstruments);c.fetchMethods();const x=A(()=>c.getMethods);function E(){const s={...n,analysisUid:L?.value?.uid};h(K,{payload:s},"createAnalysisDetectionLimit").then(e=>_.addAnalysisDetectionLimit(e))}function N(){const s={...n};delete s.uid,delete s.__typename,h(X,{uid:n.uid,payload:s},"updateAnalysisDetectionLimit").then(e=>_.updateAnalysisDetectionLimit(e))}function k(s,e={}){b.value=s,a.value=!0,D.value=(s?"CREATE":"EDIT")+" ANALYSIS DETECTION_LIMIT",s?Object.assign(n,{lowerLimit:null,upperLimit:null,instrumentUid:null,methodUid:null}):Object.assign(n,{...e})}function T(){b.value===!0&&E(),b.value===!1&&N(),a.value=!1}const O=s=>{const e=g?.value?.findIndex(u=>u.uid===s);return g?.value[e]?.name||"unknown"},F=s=>{const e=x?.value?.findIndex(u=>u.uid===s);return x?.value[e]?.name||"unknown"};return(s,e)=>{const u=U("fel-button"),B=U("fel-heading");return i(),d(p,null,[C(B,{title:"Detection Limits"},{default:m(()=>[C(u,{onClick:e[0]||(e[0]=o=>k(!0))},{default:m(()=>e[7]||(e[7]=[W("Add Detection Limit")])),_:1})]),_:1}),t("div",oe,[t("div",se,[t("table",ne,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Lower Limit"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Upper Limit"),t("th",{class:"px-4 py-2 border-b border-border"})])],-1)),t("tbody",re,[(i(!0),d(p,null,v(r(L)?.detectionLimits,o=>(i(),d("tr",{key:o?.uid,class:"hover:bg-accent/50"},[t("td",ie,[t("div",de,l(O(o?.instrumentUid)),1)]),t("td",le,[t("div",ae,l(F(o?.methodUid)),1)]),t("td",ue,[t("div",ce,l(o.lowerLimit),1)]),t("td",me,[t("div",pe,l(o.upperLimit),1)]),t("td",fe,[t("button",{onClick:Ce=>k(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,be)])]))),128))])])])]),r(a)?(i(),Y(r(V),{key:0,onClose:e[6]||(e[6]=o=>H(a)?a.value=!1:a=!1),contentWidth:"w-2/4"},{header:m(()=>[t("h3",ge,l(r(D)),1)]),body:m(()=>[t("form",xe,[t("div",ye,[t("div",ve,[t("label",_e,[e[10]||(e[10]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),f(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[1]||(e[1]=o=>r(n).instrumentUid=o)},[e[9]||(e[9]=t("option",{value:""},"Select Instrument",-1)),(i(!0),d(p,null,v(g.value,o=>(i(),d("option",{key:o?.uid,value:o.uid},l(o?.name),9,he))),128))],512),[[M,r(n).instrumentUid]])]),t("label",we,[e[12]||(e[12]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),f(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=o=>r(n).methodUid=o)},[e[11]||(e[11]=t("option",{value:""},"Select Method",-1)),(i(!0),d(p,null,v(x.value,o=>(i(),d("option",{key:o?.uid,value:o.uid},l(o?.name),9,Le))),128))],512),[[M,r(n).methodUid]])]),t("label",De,[e[13]||(e[13]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Lower Limit",-1)),f(t("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[3]||(e[3]=o=>r(n).lowerLimit=o),placeholder:"Value ..."},null,512),[[I,r(n).lowerLimit]])]),t("label",ke,[e[14]||(e[14]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Upper Limit",-1)),f(t("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[4]||(e[4]=o=>r(n).upperLimit=o),placeholder:"Value ..."},null,512),[[I,r(n).upperLimit]])])])]),t("div",Ae,[t("button",{type:"button",onClick:e[5]||(e[5]=z(o=>T(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):J("",!0)],64)}}}),Ne=G(Ue,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/DetectionLimit.vue"]]);export{Ne as default};
