import{d as P,R as $,p as k,n as O,r as z,x as w,o as a,c as n,b as e,e as l,F as h,C as y,t as i,f as u,ad as G,y as H,g,A as S,B as C,w as A,L as U,ae as b,j as J,_ as K,k as Q}from"./index-68ba4247.js";import V from"./FelButton-60e4fad2.js";import{u as W}from"./shipment-fec1d411.js";import{u as X}from"./shipment-22f737b2.js";const Y={class:"overflow-x-auto mt-4"},Z={action:"post",class:"p-1"},ee={class:"flex justify-start mb-4"},te={class:"flex justify-between items-center"},se=e("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Sample Type",-1),oe=["value"],ae={class:"ml-6 mt-2"},ne={class:"overflow-x-auto mt-4"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},re={key:0,class:"py-4 text-center"},le={key:1,class:"min-w-full"},de={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},ce=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1),pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample Type ",-1),ue=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Sample ID ",-1),me=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1),_e=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1),ye=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1),ge=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1),be={class:"bg-white"},fe=["onUpdate:modelValue","onChange"],xe=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ke={class:"text-sm leading-5 text-sky-800 font-semibold"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se={class:"text-sm leading-5 text-sky-800 font-semibold"},Ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ae={class:"text-sm leading-5 text-sky-800 font-semibold"},Ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ve={class:"text-sm leading-5 text-sky-800"},De=["onUpdate:modelValue","disabled"],Re={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Te={class:"text-sm leading-5 text-sky-800"},Fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Be={class:"text-sm leading-5 text-sky-800"},je={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ee={class:"text-sm leading-5 text-sky-800"},Ie={class:"my-4"},Le=P({__name:"ShipmentAssign",setup(Me){const D=J(()=>K(()=>import("./FelLoadingMessage-98edf6b0.js"),["assets/FelLoadingMessage-98edf6b0.js","assets/index-68ba4247.js","assets/index-d6482eee.css"])),d=W(),f=$(),{manageSamples:R}=X();d.fetchReferralLaboratories();const T=k(()=>d.getShipment);f.fetchSampleTypes();const m=O({sampleTypeUid:void 0,analysisUid:void 0}),c=z(!1),x=k(()=>{const t=[];return d.getSamples?.forEach(p=>{t?.some(_=>_.uid===p.uid)||t.push(p)}),t}),F=()=>{v(),d.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,...m})},B=()=>{const t=j();R(T?.value?.uid,t,"assign")};function v(){return d.samples?.filter(t=>t.checked)}function j(){return v().map(t=>({sampleUid:t.uid,shipedSampleUid:void 0,analyses:t.analysisResults?.filter(o=>o.checked)?.map(o=>o.uid)}))?.filter(t=>t?.analyses?.length>0)}function E(t){N()?c.value=!0:c.value=!1}function I(t){t.checked=!0}function L(t){t.checked=!1}async function M(){await x?.value?.forEach(t=>c.value?I(t):L(t))}function N(){return x?.value?.every(t=>t.checked===!0)}return(t,o)=>{const p=w("motion-slide-left"),_=w("motion-slide-right");return a(),n(h,null,[e("div",Y,[l((a(),n("form",Z,[e("div",ee,[e("label",te,[se,l(e("select",{name:"analyses_uids","onUpdate:modelValue":o[0]||(o[0]=s=>m.sampleTypeUid=s),class:"form-input mt-1 block w-full py-1"},[(a(!0),n(h,null,y(u(f).sampleTypes,s=>(a(),n("option",{key:s.uid,value:s.uid},i(s.name),9,oe))),128))],512),[[G,m.sampleTypeUid]])]),H(` <label class="flex justify-between items-center ml-6">\r
          <span class="text-gray-700 mr-2">Analyses</span>\r
          <select\r
            name="analyses_uids"\r
            v-model="filterForm.analysisUid"\r
            class="form-input mt-1 block w-full py-1"\r
          >\r
            <option\r
              v-for="service in analysisStore.analysesServices"\r
              :key="service.uid"\r
              :value="service.uid"\r
            >\r
              {{ service.name }}\r
            </option>\r
          </select>\r
        </label> `),e("div",ae,[l(g(V,{onClick:o[1]||(o[1]=A(s=>F(),["prevent"])),color:"sky-800",class:"p-1"},{default:S(()=>[C("Apply Filters")]),_:1},512),[[U,!0]])])])])),[[p]])]),e("div",ne,[e("div",ie,[u(d).fetchingSamples?(a(),n("div",re,[g(u(D),{message:"Fetching samples ..."})])):(a(),n("table",le,[e("thead",null,[e("tr",null,[e("th",de,[l(e("input",{type:"checkbox",onChange:M,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s)},null,544),[[b,c.value]])]),ce,pe,he,ue,me,_e,ye,ge])]),l((a(),n("tbody",be,[(a(!0),n(h,null,y(u(d).samples,s=>(a(),n("tr",{key:s?.uid},[e("td",null,[l(e("input",{type:"checkbox","onUpdate:modelValue":r=>s.checked=r,onChange:r=>E()},null,40,fe),[[b,s.checked]])]),xe,e("td",ve,[e("div",ke,i(s?.sampleId),1)]),e("td",we,[e("div",Se,i(s?.sampleType?.name),1)]),e("td",Ce,[e("div",Ae,i(s?.analysisRequest?.clientRequestId),1)]),e("td",Ue,[e("div",Ve,[e("ul",null,[(a(!0),n(h,null,y(s?.analysisResults,r=>(a(),n("li",{class:"flex justify-start items-center",key:r.uid},[l(e("input",{type:"checkbox","onUpdate:modelValue":q=>r.checked=q,class:"mr-2",disabled:!s.checked},null,8,De),[[b,r.checked]]),e("span",null,i(r?.analysis?.name),1),e("span",null,i(r?.status),1)]))),128))])])]),e("td",Re,[e("div",Te,i(s?.createdAt),1)]),e("td",Fe,[e("div",Be,i(s?.dateReceived),1)]),e("td",je,[e("div",Ee,i(s?.status),1)])]))),128))])),[[_]])]))])]),e("section",Ie,[l(g(V,{onClick:A(B,["prevent"]),color:"orange-600"},{default:S(()=>[C("Assign Samples")]),_:1},512),[[U,!0]])])],64)}}}),Oe=Q(Le,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{Oe as default};
