import{P as G,M as J,u as ee,e as te,Z as w,h,f as se,$ as V,o as l,c as n,b as t,A as a,F as u,D as y,E as r,a4 as b,z as _,C as A,a2 as c,a as C,K as M,L as F,W as j,X as L,Y as N,S as P,aP as oe,aQ as le,_ as ne}from"./index-f86d8273.js";import{u as ae}from"./analysis-f80e6c89.js";import{h as re,o as ie,a as de}from"./constants-bd793a40.js";const ue={action:"post",class:"mt-4"},ce={class:"flex justify-start items-center mr-4"},pe={class:"block mx-4"},me=["value"],ye={class:"overflow-x-auto mt-4"},fe={action:"post",class:"p-1"},ge={class:"flex justify-start mb-4"},he={class:"flex justify-between items-center"},be=["value"],xe={class:"flex justify-between items-center ml-6"},ve=["value"],ke={class:"ml-6 mt-2"},we={class:"overflow-x-auto mt-4"},_e={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Ae={key:0,class:"py-4 text-center"},Ce={key:1,class:"min-w-full"},Se={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},Te={class:"bg-white"},Ue=["onUpdate:modelValue","onChange"],Be={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},We={class:"text-sm leading-5 text-sky-800 font-semibold"},Ee={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},De={class:"text-sm leading-5 text-sky-800"},Ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Me={class:"text-sm leading-5 text-sky-800"},Fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},je={class:"text-sm leading-5 text-sky-800"},Le={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ne={class:"text-sm leading-5 text-sky-800"},Pe={class:"my-4"},Re={action:"post",class:"mb-4"},Ye={class:"flex justify-start items-center mr-4"},Ie={class:"block mx-4"},Qe=["value"],$e=G({__name:"WorkSheetAssign",setup(qe){const R=L(()=>N(()=>import("./FelLoadingMessage-e1e357b9.js"),["assets/FelLoadingMessage-e1e357b9.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),S=L(()=>N(()=>import("./FelButton-e12f0980.js"),["assets/FelButton-e12f0980.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),d=J(),f=ae(),T=ee(),{withClientMutation:U}=te(),x=w();d.fetchWorkSheetTemplates();const B=h(()=>d.getWorkSheet),Y=h(()=>d.getWorkSheetTemplates),I=async()=>{try{P.fire({title:"Are you sure?",text:"You want to apply this template to add samples?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(o=>{o.isConfirmed&&U(oe,{worksheetUid:B?.value?.uid,templateUid:x.value},"updateWorksheetApplyTemplate").then(e=>{})})}catch{}};f.fetchAnalysesServices({first:void 0,after:"",text:"",sortBy:["name"]}),T.fetchSampleTypes(),f.fetchQCTemplates();const Q=h(()=>f.getQCTemplates),v=w(void 0),p=se({sampleTypeUid:void 0,analysisUid:void 0}),m=w(!1),g=h(()=>{const o=W;return d.getAnalysisResults?.forEach(i=>{o?.some(k=>k.uid===i.uid)||o.push(i)}),o}),$=()=>{E(),d.fetchForWorkSheetsAssign({first:50,after:"",text:"",sortBy:void 0,...p})},q=()=>{const o=O();try{P.fire({title:"Are you sure?",text:"You want to assign selected to worksheet?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign now!",cancelButtonText:"No, cancel apply!"}).then(e=>{e.isConfirmed&&U(le,{uid:B?.value?.uid,qcTemplateUid:v.value,analysesUids:o},"updateWorksheetManualAssign").then(i=>{})})}catch{}};let W=[];function E(){let o=[];return g?.value?.forEach(e=>{e.checked&&o.push(e)}),W=o,o}function O(){const o=E();let e=[];return o?.forEach(i=>e.push(i.uid)),e}function K(o){Z()?m.value=!0:m.value=!1}function z(o){o.checked=!0}function H(o){o.checked=!1}async function X(){await g?.value?.forEach(o=>m.value?z(o):H(o))}function Z(){return g?.value?.every(o=>o.checked===!0)}return(o,e)=>{const i=V("motion-slide-right"),k=V("motion-slide-left");return l(),n(u,null,[t("section",null,[e[9]||(e[9]=t("hr",null,null,-1)),a((l(),n("form",ue,[t("div",ce,[e[8]||(e[8]=t("span",{class:"text-gray-700"},"Worksheet Template",-1)),t("label",pe,[a(t("select",{class:"form-select block w-full py-1","onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s)},[e[7]||(e[7]=t("option",null,null,-1)),(l(!0),n(u,null,y(Y.value,s=>(l(),n("option",{key:s.uid,value:s.uid},r(s.name),9,me))),128))],512),[[b,x.value]])]),a(t("button",{type:"button",onClick:e[1]||(e[1]=_(s=>I(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ",512),[[A,re(de.CREATE,ie.WORKSHEET)]])])])),[[i]])]),e[23]||(e[23]=t("hr",{class:"mt-4 mb-2"},null,-1)),e[24]||(e[24]=t("h3",{class:"font-bold"},"Manual Analyses Assignment",-1)),e[25]||(e[25]=t("hr",{class:"mb-4 mt-2"},null,-1)),t("div",ye,[a((l(),n("form",fe,[t("div",ge,[t("label",he,[e[10]||(e[10]=t("span",{class:"text-gray-700 mr-2"},"SampleType",-1)),a(t("select",{name:"analyses_uids","onUpdate:modelValue":e[2]||(e[2]=s=>p.sampleTypeUid=s),class:"form-input mt-1 block w-full py-1"},[(l(!0),n(u,null,y(c(T).sampleTypes,s=>(l(),n("option",{key:s.uid,value:s.uid},r(s.name),9,be))),128))],512),[[b,p.sampleTypeUid]])]),t("label",xe,[e[11]||(e[11]=t("span",{class:"text-gray-700 mr-2"},"Analyses",-1)),a(t("select",{name:"analyses_uids","onUpdate:modelValue":e[3]||(e[3]=s=>p.analysisUid=s),class:"form-input mt-1 block w-full py-1"},[(l(!0),n(u,null,y(c(f).analysesServices,s=>(l(),n("option",{key:s.uid,value:s.uid},r(s.name),9,ve))),128))],512),[[b,p.analysisUid]])]),t("div",ke,[a(C(c(S),{onClick:e[4]||(e[4]=_(s=>$(),["prevent"])),color:"sky-800",class:"p-1"},{default:M(()=>e[12]||(e[12]=[F("Apply Filters")])),_:1},512),[[A,!0]])])])])),[[k]])]),t("div",we,[t("div",_e,[c(d).fetchingAnalysisResults?(l(),n("div",Ae,[C(c(R),{message:"Fetching analytes ..."})])):(l(),n("table",Ce,[t("thead",null,[t("tr",null,[t("th",Se,[a(t("input",{type:"checkbox",onChange:X,"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s)},null,544),[[j,m.value]])]),e[13]||(e[13]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1)),e[14]||(e[14]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1)),e[15]||(e[15]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1)),e[16]||(e[16]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1)),e[17]||(e[17]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1)),e[18]||(e[18]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1))])]),a((l(),n("tbody",Te,[(l(!0),n(u,null,y(g.value,s=>(l(),n("tr",{key:s?.uid},[t("td",null,[a(t("input",{type:"checkbox","onUpdate:modelValue":D=>s.checked=D,onChange:D=>K()},null,40,Ue),[[j,s.checked]])]),e[19]||(e[19]=t("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1)),t("td",Be,[t("div",We,r(s?.sample?.sampleId),1)]),t("td",Ee,[t("div",De,r(s?.analysis?.name),1)]),t("td",Ve,[t("div",Me,r(s?.sample?.createdAt),1)]),t("td",Fe,[t("div",je,r(s?.sample?.dateReceived),1)]),t("td",Le,[t("div",Ne,r(s?.sample?.status),1)])]))),128))])),[[i]])]))])]),t("section",Pe,[t("form",Re,[t("div",Ye,[e[21]||(e[21]=t("span",{class:"text-gray-700"},"Apply QC Template",-1)),t("label",Ie,[a(t("select",{class:"form-select block w-full py-1","onUpdate:modelValue":e[6]||(e[6]=s=>v.value=s)},[e[20]||(e[20]=t("option",null,null,-1)),(l(!0),n(u,null,y(Q.value,s=>(l(),n("option",{key:s.uid,value:s.uid},r(s.name),9,Qe))),128))],512),[[b,v.value]])])])]),a(C(c(S),{onClick:_(q,["prevent"]),color:"orange-600"},{default:M(()=>e[22]||(e[22]=[F("Assign Analyses")])),_:1},512),[[A,!0]])])],64)}}}),He=ne($e,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/worksheet/_id/WorkSheetAssign.vue"]]);export{He as default};
