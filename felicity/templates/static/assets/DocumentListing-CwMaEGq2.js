import{h as F,Y as U,u as R,a0 as w,an as J,a7 as j,bA as Y,_ as I,A as _,o as d,c as f,C as M,z as o,D as E,al as T,J as B,M as m,a,I as y,F as L,H as A,B as V,O as W,$ as q,c7 as G,r as x,ap as X,K as s}from"./index-OdhKCqIc.js";import{u as Z}from"./DocumentEntry-CjG2uhYk.js";import{a as $}from"./document.mutations-DOSH3hTX.js";import{C as ee}from"./chevron-down-Dqf-ptA3.js";import{E as te,a as oe,b as ne,c as re,d as ie}from"./EmptyTitle-aCQRDpx3.js";const ae=F("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);const se=F("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const de=F("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);const K=F("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),le=U({__name:"CreateDocumentDialog",props:{isOpen:{type:Boolean,required:!0},initialFolderId:{type:[String,null],required:!1}},emits:["update:isOpen"],setup(h,{expose:t,emit:r}){t();const e=h,b=r,{withClientMutation:g}=R(),n=Z(),l=w(""),u=w(""),p=w(""),C=w(!1),k=w("");J(()=>e.initialFolderId,i=>{i&&(u.value=i)},{immediate:!0});const S=j(()=>{if(!k.value)return n.folders;const i=k.value.toLowerCase();return n.folders.filter(v=>v.name.toLowerCase().includes(i))}),c=j(()=>{const i=n.folders.find(v=>v.uid===u.value);return i?i.name:"Select folder"}),D=j(()=>l.value.trim()!==""&&u.value!=="");function P(i){u.value=i,C.value=!1}async function Q(){if(D.value)try{const i=await g($,{payload:{name:l.value.trim(),folderUid:u.value,documentId:p.value.trim()}},"createDocument");if(i&&typeof i=="object"&&"uid"in i){const v=i;n.addDocument(v)}}catch{}finally{z()}}function z(){H(),b("update:isOpen",!1)}function H(){l.value="",p.value="",C.value=!1,k.value=""}const N={props:e,emit:b,withClientMutation:g,store:n,name:l,folderUid:u,documentId:p,isFolderSelectOpen:C,folderSearchQuery:k,filteredFolders:S,selectedFolderName:c,isFormValid:D,selectFolder:P,handleCreateDocument:Q,closeDialog:z,resetForm:H,vClickOutside:{mounted(i,v){i._clickOutside=O=>{i===O.target||i.contains(O.target)||v.value(O)},document.addEventListener("click",i._clickOutside)},unmounted(i){i._clickOutside&&document.removeEventListener("click",i._clickOutside)}},get ChevronDown(){return ee},get Check(){return Y}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),ce={key:0,class:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",role:"dialog","aria-labelledby":"create-document-title","aria-modal":"true"},ue={class:"space-y-4"},me={class:"relative"},fe=["aria-expanded","aria-controls"],be={key:0,id:"folder-list",class:"absolute top-full left-0 z-10 mt-1 w-full rounded-md border border-border bg-card shadow-md"},ge={class:"max-h-[200px] overflow-auto p-1"},pe=["onClick","aria-selected"],ye={key:1,class:"mr-2 w-4","aria-hidden":"true"},he={class:"flex justify-end gap-2 mt-6"},ve=["disabled"];function xe(h,t,r,e,b,g){return d(),_(W,{to:"body"},[r.isOpen?(d(),f("div",ce,[o("div",{class:"bg-card rounded-lg shadow-lg p-6 max-w-sm w-full mx-4 border border-border",onClick:t[4]||(t[4]=V(()=>{},["stop"]))},[t[8]||(t[8]=o("h3",{id:"create-document-title",class:"text-lg font-medium text-card-foreground mb-4"},"Create new document",-1)),o("div",ue,[o("div",null,[t[5]||(t[5]=o("label",{for:"name",class:"block text-sm font-medium text-card-foreground mb-1"},"Document Name",-1)),E(o("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=n=>e.name=n),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document name",onKeyup:B(e.handleCreateDocument,["enter"])},null,544),[[T,e.name]])]),o("div",null,[t[6]||(t[6]=o("label",{for:"documentId",class:"block text-sm font-medium text-card-foreground mb-1"},"Document ID",-1)),E(o("input",{id:"documentId","onUpdate:modelValue":t[1]||(t[1]=n=>e.documentId=n),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document id",onKeyup:B(e.handleCreateDocument,["enter"])},null,544),[[T,e.documentId]])]),o("div",null,[t[7]||(t[7]=o("label",{for:"folder",class:"block text-sm font-medium text-card-foreground mb-1"},"Folder",-1)),o("div",me,[o("button",{id:"folder",type:"button",onClick:t[2]||(t[2]=n=>e.isFolderSelectOpen=!e.isFolderSelectOpen),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-expanded":e.isFolderSelectOpen,"aria-controls":e.isFolderSelectOpen?"folder-list":void 0},[m(y(e.selectedFolderName)+" ",1),a(e.ChevronDown,{class:"ml-2 h-4 w-4 shrink-0 opacity-50","aria-hidden":"true"})],8,fe),e.isFolderSelectOpen?E((d(),f("div",be,[o("div",ge,[E(o("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>e.folderSearchQuery=n),class:"flex h-8 w-full rounded-sm border-0 bg-background px-3 py-1 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring mb-1",placeholder:"Search folders...","aria-label":"Search folders"},null,512),[[T,e.folderSearchQuery]]),(d(!0),f(L,null,A(e.filteredFolders,n=>(d(),f("button",{key:n.uid,onClick:l=>e.selectFolder(n.uid),class:"flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent text-left text-card-foreground","aria-selected":n.uid===e.folderUid},[n.uid===e.folderUid?(d(),_(e.Check,{key:0,class:"mr-2 h-4 w-4","aria-hidden":"true"})):(d(),f("span",ye)),m(" "+y(n.name),1)],8,pe))),128))])])),[[e.vClickOutside,()=>e.isFolderSelectOpen=!1]]):M("",!0)])])]),o("div",he,[o("button",{onClick:e.closeDialog,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Cancel "),o("button",{onClick:e.handleCreateDocument,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",disabled:!e.isFormValid}," Create ",8,ve)])])])):M("",!0)])}const Ye=I(le,[["render",xe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/document/CreateDocumentDialog.vue"]]),_e=U({__name:"DocumentCard",props:{document:{type:Object,required:!0}},setup(h,{expose:t}){t();const r=h,e=q();function b(){e.push({name:"document-editor",params:{documentVersionUid:r.document?.latestVersion?.uid}})}function g(l){return G(new Date(l),"MMM d, yyyy")}const n={props:r,router:e,handleEdit:b,formatDate:g,get File(){return ae},get Edit(){return K}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),ke=["aria-label"],we={class:"relative mb-4 rounded-lg overflow-hidden bg-muted aspect-3/4 flex items-center justify-center"},Ce={key:0,class:"w-full h-full"},De=["src","alt"],Ee={class:"absolute inset-0 flex items-center justify-center gap-x-2 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},Ve=["aria-label"],Fe={class:"h-12 w-12 rounded-full bg-background/90 flex items-center justify-center"},Se={class:"flex flex-col"},Oe=["title"],je={class:"text-xs text-muted-foreground mt-1"};function Te(h,t,r,e,b,g){return d(),f("div",{class:"document-card animate-scale-in group bg-card rounded-lg border border-border p-4 transition-all hover:shadow-md hover:border-accent",role:"article","aria-label":`Document: ${r.document.name}`},[o("div",we,[r.document?.latestVersion?.thumbnail?(d(),f("div",Ce,[o("img",{src:`data:image/png;base64,${r.document?.latestVersion?.thumbnail}`,alt:r.document.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,De),t[0]||(t[0]=o("div",{class:"absolute inset-0 bg-linear-to-t from-foreground/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},null,-1))])):(d(),_(e.File,{key:1,class:"text-muted-foreground w-12 h-12","aria-hidden":"true"})),o("div",Ee,[o("button",{onClick:V(e.handleEdit,["stop"]),class:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full transition-transform hover:scale-105","aria-label":`Edit document: ${r.document.name}`},[o("div",Fe,[a(e.Edit,{class:"text-foreground w-5 h-5","aria-hidden":"true"})])],8,Ve)])]),o("div",Se,[o("h3",{class:"font-medium text-sm text-card-foreground truncate",title:r.document.name},y(r.document.name),9,Oe),o("p",je," Updated "+y(e.formatDate(r.document.updatedAt)),1)])],8,ke)}const Me=I(_e,[["render",Te],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/document/DocumentCard.vue"]]),Le=U({__name:"DocumentListing",props:{documents:{type:Array,required:!0}},setup(h,{expose:t}){t();const r=w(!1);function e(u){return G(new Date(u),"MMM d, yyyy")}const b=q();function g(u){b.push({name:"document-editor",params:{documentVersionUid:u?.latestVersion?.uid}})}function n(){r.value=!r.value}const l={isCardView:r,formatDate:e,router:b,handleEdit:g,toggleView:n,get Edit(){return K},get LayoutGrid(){return se},get List(){return de},DocumentCard:Me,get Empty(){return ie},get EmptyContent(){return re},get EmptyDescription(){return ne},get EmptyHeader(){return oe},get EmptyTitle(){return te}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Ae={class:"space-y-4",role:"region","aria-label":"Document listing"},Ue={class:"flex justify-end"},Ie=["aria-label","aria-pressed"],ze={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},He={key:1,class:"border border-border bg-card rounded-lg shadow-md"},Ne={class:"relative w-full overflow-auto"},Be=["onClick","aria-label"];function qe(h,t,r,e,b,g){const n=x("TableHead"),l=x("TableRow"),u=x("TableHeader"),p=x("TableCell"),C=x("TableEmpty"),k=x("TableBody"),S=x("Table");return d(),f("div",Ae,[o("div",Ue,[o("button",{onClick:e.toggleView,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2","aria-label":`Switch to ${e.isCardView?"list":"grid"} view`,"aria-pressed":e.isCardView},[(d(),_(X(e.isCardView?e.List:e.LayoutGrid),{class:"w-4 h-4 mr-2","aria-hidden":"true"})),m(" "+y(e.isCardView?"List View":"Grid View"),1)],8,Ie)]),e.isCardView?(d(),f("div",ze,[(d(!0),f(L,null,A(r.documents,c=>(d(),_(e.DocumentCard,{key:c.uid,document:c},null,8,["document"]))),128))])):(d(),f("div",He,[o("div",Ne,[a(S,{class:"w-full caption-bottom text-sm"},{default:s(()=>[a(u,{class:"[&_tr]:border-b"},{default:s(()=>[a(l,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:s(()=>[a(n,{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},{default:s(()=>[...t[0]||(t[0]=[m("Name",-1)])]),_:1}),a(n,{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},{default:s(()=>[...t[1]||(t[1]=[m("Created At",-1)])]),_:1}),a(n,{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},{default:s(()=>[...t[2]||(t[2]=[m("Updated At",-1)])]),_:1}),a(n,{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},{default:s(()=>[...t[3]||(t[3]=[m("Actions",-1)])]),_:1})]),_:1})]),_:1}),a(k,{class:"[&_tr:last-child]:border-0"},{default:s(()=>[(d(!0),f(L,null,A(r.documents,c=>(d(),_(l,{key:c.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:s(()=>[a(p,{class:"px-4 py-3 text-sm font-medium text-card-foreground cursor-pointer hover:text-accent-foreground",onClick:V(D=>e.handleEdit(c),["stop"]),role:"button","aria-label":`Edit document: ${c.name}`},{default:s(()=>[m(y(c.name),1)]),_:2},1032,["onClick","aria-label"]),a(p,{class:"px-4 py-3 text-sm text-muted-foreground"},{default:s(()=>[m(y(e.formatDate(c.createdAt)),1)]),_:2},1024),a(p,{class:"px-4 py-3 text-sm text-muted-foreground"},{default:s(()=>[m(y(e.formatDate(c.updatedAt)),1)]),_:2},1024),a(p,{class:"px-4 py-3 text-sm"},{default:s(()=>[o("button",{onClick:V(D=>e.handleEdit(c),["stop"]),class:"inline-flex items-center justify-center rounded-full h-8 w-8 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground","aria-label":`Edit document: ${c.name}`},[a(e.Edit,{class:"w-4 h-4","aria-hidden":"true"})],8,Be)]),_:2},1024)]),_:2},1024))),128)),r.documents.length===0?(d(),_(C,{key:0,colspan:4},{default:s(()=>[a(e.Empty,{class:"border-0 bg-transparent p-0"},{default:s(()=>[a(e.EmptyContent,null,{default:s(()=>[a(e.EmptyHeader,null,{default:s(()=>[a(e.EmptyTitle,null,{default:s(()=>[...t[4]||(t[4]=[m("No documents found",-1)])]),_:1}),a(e.EmptyDescription,null,{default:s(()=>[...t[5]||(t[5]=[m("Try adjusting your filters or add a new document.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):M("",!0)]),_:1})]),_:1})])]))])}const We=I(Le,[["render",qe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/document/DocumentListing.vue"]]);export{Ye as C,We as D};
