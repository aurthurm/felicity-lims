import{P as I,e as N,t as F,f as C,R,h,Z as k,o as j,c as B,b as s,A as m,V as p,a as w,a2 as u,a7 as M,z as O,X as P,Y as T,_ as z}from"./index-e1b11e1a.js";import{i as K,j as L}from"./instrument.mutations-10e2a1ae.js";import{u as X}from"./analysis-0aa9b5f6.js";import{u as Y}from"./setup-84875ac0.js";/* empty css                                                                 */import"./_queries-2b677941.js";const Z={action:"post",class:"p-1"},q={class:"grid grid-cols-3 gap-x-4 mb-4"},G={class:"block col-span-2 mb-2"},H={class:"block col-span-1 mb-2"},J={class:"grid grid-cols-2 gap-x-4 mb-4"},Q={class:"block col-span-2 mb-2"},W={class:"block col-span-2 mb-2"},$={class:"block col-span-2 mb-2"},ee=I({__name:"MethodForm",props:{method:Object,methodUid:Number,analysis:Object,analysisUid:Number},emits:["close"],setup(g,{emit:x}){const c=P(()=>T(()=>import("./vue-multiselect.esm-0b4dedd5.js"),["assets/vue-multiselect.esm-0b4dedd5.js","assets/index-e1b11e1a.js","assets/index-78b87750.css"])),V=X(),d=Y(),{withClientMutation:f}=N(),b=g,{method:i,analysis:r}=F(b),t=C({...i?.value});R(()=>b.analysisUid,(o,e)=>{});const v=x,y=h(()=>V.getAnalysesServicesSimple);let a=k([]);r?.value?.uid!==void 0?a.value.push(r.value):y.value?.forEach(o=>{o?.methods?.some(e=>e.uid==i?.value?.uid)&&a.value.push(o)}),d.fetchInstruments();const A=h(()=>d.getInstruments);let n=k([]);const _=()=>{const o=[];return i?.value?.instruments?.forEach(e=>{r?.value?.instruments?.some(E=>E?.uid===e?.uid)&&o.push(e)}),o};n.value=_(),i?.value?.uid!==void 0&&i?.value?.instruments?.forEach(o=>n.value.push(o));function U(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:a.value?.map(e=>e.uid)};f(K,{payload:o},"createMethod").then(e=>{v("close"),d.addMethod(e)})}function D(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:a.value?.map(e=>e.uid)};f(L,{uid:t?.uid,payload:o},"updateMethod").then(e=>{v("close"),d.updateMethod(e)})}function S(){i?.value?.uid||U(),i?.value?.uid&&D()}return(o,e)=>(j(),B("form",Z,[s("div",q,[s("label",G,[e[6]||(e[6]=s("span",{class:"text-gray-700"},"Method Name",-1)),m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),placeholder:"Name ..."},null,512),[[p,t.name]])]),s("label",H,[e[7]||(e[7]=s("span",{class:"text-gray-700"},"keyword",-1)),m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=l=>t.keyword=l),placeholder:"Keyword ..."},null,512),[[p,t.keyword]])])]),s("div",J,[s("label",Q,[e[8]||(e[8]=s("span",{class:"text-gray-700"},"Analyses",-1)),w(u(c),{modelValue:u(a),"onUpdate:modelValue":e[2]||(e[2]=l=>M(a)?a.value=l:a=l),options:y.value,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:u(r)?.uid!=null},null,8,["modelValue","options","disabled"])]),s("label",W,[e[9]||(e[9]=s("span",{class:"text-gray-700"},"Instruments",-1)),w(u(c),{modelValue:u(n),"onUpdate:modelValue":e[3]||(e[3]=l=>M(n)?n.value=l:n=l),options:A.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),s("label",$,[e[10]||(e[10]=s("span",{class:"text-gray-700"},"Description",-1)),m(s("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=l=>t.description=l),placeholder:"Description ..."},null,512),[[p,t.description]])])]),e[11]||(e[11]=s("hr",null,null,-1)),s("button",{type:"button",onClick:e[5]||(e[5]=O(l=>S(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")]))}}),ie=z(ee,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/instruments/MethodForm.vue"]]);export{ie as default};
