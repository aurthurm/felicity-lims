import{d as Z,I as ee,r as T,o as m,c as v,B as te,t as o,f as l,b as e,e as n,ad as b,i,g as C,A as se,y as q,F,C as I,v as w,L as A,w as le,j as oe,_ as ae,k as ne}from"./index-fc86f1fc.js";import ie from"./vue-multiselect.esm-2e9cf21d.js";import{c as L,a as y,d as _,f as Q,u as re,b as r}from"./array-110655e3.js";import{u as ce,R as ue,k as de}from"./inventory-8d839f74.js";import{a as pe}from"./storage-c684b9f3.js";import{u as me}from"./setup-c594dd58.js";import{u as ve}from"./user-203c70d8.js";import"./_queries-be63b368.js";const we=["inert"],_e={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},fe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Reveice Type",-1),ge=e("option",{value:"null"},null,-1),ye=e("option",{value:"purchase"},"Purchased",-1),he=e("option",{value:"pushed"},"Pushed",-1),be=e("option",{value:"transfer_in"},"Transfer In",-1),ke=[ge,ye,he,be],xe={class:"text-orange-600 w-4/12"},Re={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Se=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Stock Item",-1),Ue={class:"w-full col-span-4"},Pe={class:"text-orange-600 w-4/12"},Ve={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},De=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Supplier",-1),qe=e("option",{value:"null"},null,-1),Fe=["value"],Ie={class:"text-orange-600 w-4/12"},Ne={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Be=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Unit (Single)",-1),Te=e("option",{value:"null"},null,-1),Ce=["value"],Ae={class:"text-orange-600 w-4/12"},Le={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Qe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Lot Number",-1),$e={class:"w-full col-span-4"},Ee={class:"text-orange-600 w-4/12"},Me={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ke=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Packages Received",-1),je={class:"w-full col-span-4"},ze={class:"text-orange-600 w-4/12"},Ge={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Oe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Package Factor",-1),He={class:"w-full col-span-4"},Je={class:"text-orange-600 w-4/12"},We={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Xe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Singles Received",-1),Ye={class:"w-full col-span-4"},Ze={class:"text-orange-600 w-4/12"},et={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},tt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Quantity Received",-1),st={class:"w-full col-span-4"},lt={class:"text-orange-600 w-4/12"},ot={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},at=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Expiry Date",-1),nt={class:"w-full col-span-4"},it={class:"text-orange-600 w-4/12"},rt={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},ct=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received Date",-1),ut={class:"w-full col-span-4"},dt={class:"text-orange-600 w-4/12"},pt={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},mt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received By",-1),vt=e("option",{value:"null"},null,-1),wt=["value"],_t={class:"text-orange-600 w-4/12"},ft=e("hr",{class:"my-4"},null,-1),gt={type:"submit",class:"-mb-4 w-1/5 border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"},yt=Z({__name:"StockReceiveForm",emits:["close"],setup(ht,{emit:$}){const E=oe(()=>ae(()=>import("./FelLoadingMessage-50e7808b.js"),["assets/FelLoadingMessage-50e7808b.js","assets/index-fc86f1fc.js","assets/index-246842b1.css"])),M=$,K=ce(),j=me();pe();const z=ve(),{withClientMutation:G,withClientQuery:O}=ee(),N=T([]),f=T(!1),H=L({stockItemVariant:L().required("StockItem is required"),supplierUid:y().required(),unitUid:y().required(),lotNumber:y().required(),unitPrice:_().nullable().default(0),totalPrice:_().nullable().default(0),singlesReceived:_().required().default(0),packagesReceived:_().required().default(0),packageFactor:_().required().default(1),quantityReceived:_().default(0),receiptType:y().required().default("purchase"),receiptDate:Q().required("Date received is required"),receiptByUid:y().required("Receiver is required"),expiryDate:Q().required("Date expiring is required")}),{handleSubmit:J,errors:a}=re({validationSchema:H,initialValues:{singlesReceived:0,packagesReceived:0,packageFactor:1,quantityReceived:0}}),{value:h}=r("stockItemVariant"),{value:k}=r("supplierUid"),{value:x}=r("unitUid"),{value:R}=r("lotNumber"),{value:d}=r("totalPrice"),{value:c}=r("packagesReceived"),{value:g}=r("packageFactor"),{value:p}=r("quantityReceived"),{value:S}=r("receiptType"),{value:U}=r("receiptDate"),{value:P}=r("receiptByUid"),{value:V}=r("expiryDate"),B=J(u=>W(u));function W(u){f.value=!0;const s={...u,productUid:h?.value?.uid,unitPrice:0,totalPrice:0};delete s.stockItemVariant,G(ue,{payload:s},"createStockReceipt").then(t=>{console.log(t)}).finally(()=>{f.value=!1,M("close")})}const X=async u=>{u.length>3&&O(de,{first:50,after:"",text:u,sortBy:["name"]},"stockProductAll").then(t=>{N.value=t?.items})},Y=(u,s)=>`${u.stockItem?.name} - ${u.name}`,D=()=>{!d.value&&!c.value&&(p.value=0),!d.value&&c.value&&(p.value=c.value*g.value),d.value&&!c.value&&(p.value=d.value),c.value||(c.value=0),p.value=d.value+c.value*g.value};return(u,s)=>(m(),v("form",{onSubmit:s[15]||(s[15]=le((...t)=>l(B)&&l(B)(...t),["prevent"])),class:"rounded-sm py-2",autocomplete:"off",inert:f.value},[te(o(l(a))+" ",1),e("label",_e,[fe,n(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[0]||(s[0]=t=>i(S)?S.value=t:null)},[...ke],512),[[b,l(S)]])]),e("div",xe,o(l(a).receiptType),1),e("label",Re,[Se,e("div",Ue,[C(l(ie),{placeholder:"Select a Stock Item",modelValue:l(h),"onUpdate:modelValue":s[1]||(s[1]=t=>i(h)?h.value=t:null),options:N.value,searchable:!0,"track-by":"uid",customLabel:Y,onSearchChange:X},{default:se(()=>[q(' <template v-slot:option="slotProps">\r\n          {{ `${slotProps.option?.stockItem?.name} ${slotProps.option?.name}` }}\r\n        </template> ')]),_:1},8,["modelValue","options"]),e("div",Pe,o(l(a).stockItemVariantUid),1)])]),e("label",Ve,[De,n(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=t=>i(k)?k.value=t:null)},[qe,(m(!0),v(F,null,I(l(j).suppliers,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.name),9,Fe))),128))],512),[[b,l(k)]])]),e("div",Ie,o(l(a).supplierUid),1),e("label",Ne,[Be,n(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[3]||(s[3]=t=>i(x)?x.value=t:null)},[Te,(m(!0),v(F,null,I(l(K).units,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.name),9,Ce))),128))],512),[[b,l(x)]])]),e("div",Ae,o(l(a).unitUid),1),q(` <label class="mt-2 grid grid-cols-6 whitespace-nowrap w-full">\r
      <span class="col-span-2 text-gray-700 w-4/12">Store Room</span>\r
      <select class="col-span-4 form-select ml-1 mt-1 w-full" v-model="storeRoomUid">\r
        <option value="null"></option>\r
        <option v-for="storeRoom in storageStore.storeRooms" :key="storeRoom.uid" :value="storeRoom.uid">\r
          {{ storeRoom.name }}\r
        </option>\r
      </select>\r
    </label>\r
    <div class="text-orange-600 w-4/12">{{ errors.storeRoomUid }}</div> `),e("label",Le,[Qe,e("div",$e,[n(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[4]||(s[4]=t=>i(R)?R.value=t:null),placeholder:"Lot Number..."},null,512),[[w,l(R)]]),e("div",Ee,o(l(a).lotNumber),1)])]),e("label",Me,[Ke,e("div",je,[n(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[5]||(s[5]=t=>i(c)?c.value=t:null),placeholder:"Quantity Received...",onKeyup:D,onFocus:s[6]||(s[6]=t=>t.target.select())},null,544),[[w,l(c)]]),e("div",ze,o(l(a).packagesReceived),1)])]),e("label",Ge,[Oe,e("div",He,[n(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[7]||(s[7]=t=>i(g)?g.value=t:null),placeholder:"Quantity Received...",onKeyup:D,onFocus:s[8]||(s[8]=t=>t.target.select())},null,544),[[w,l(g)]]),e("div",Je,o(l(a).packageFactor),1)])]),e("label",We,[Xe,e("div",Ye,[n(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[9]||(s[9]=t=>i(d)?d.value=t:null),placeholder:"Quantity Received...",onKeyup:D,onFocus:s[10]||(s[10]=t=>t.target.select())},null,544),[[w,l(d)]]),e("div",Ze,o(l(a).singlesReceived),1)])]),e("label",et,[tt,e("div",st,[n(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[11]||(s[11]=t=>i(p)?p.value=t:null),disabled:""},null,512),[[w,l(p)]]),e("div",lt,o(l(a).quantityReceived),1)])]),q(` <label class="mt-2 grid grid-cols-6 whitespace-nowrap w-full">\r
      <span class="col-span-2 text-gray-700 w-4/12">Unit Price</span>\r
      <div class="w-full col-span-4">\r
        <input class=" form-input mt-1 block w-full" type="number" v-model="unitPrice" placeholder="Size..." />\r
        <div class="text-orange-600 w-4/12">{{ errors.unitPrice }}</div>\r
      </div>\r
    </label>\r
\r
    <label class="mt-2 grid grid-cols-6 whitespace-nowrap w-full">\r
      <span class="col-span-2 text-gray-700 w-4/12">Total Price</span>\r
      <div class="w-full col-span-4">\r
        <input class=" form-input mt-1 block w-full" type="number" v-model="totalPrice"\r
          placeholder="Quantity Received..." />\r
        <div class="text-orange-600 w-4/12">{{ errors.totalPrice }}</div>\r
      </div>\r
    </label> `),e("label",ot,[at,e("div",nt,[n(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[12]||(s[12]=t=>i(V)?V.value=t:null),placeholder:"Expiry Date"},null,512),[[w,l(V)]]),e("div",it,o(l(a).expiryDate),1)])]),e("label",rt,[ct,e("div",ut,[n(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[13]||(s[13]=t=>i(U)?U.value=t:null),placeholder:"Expiry Date"},null,512),[[w,l(U)]]),e("div",dt,o(l(a).receiptDate),1)])]),e("label",pt,[mt,n(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[14]||(s[14]=t=>i(P)?P.value=t:null)},[vt,(m(!0),v(F,null,I(l(z).users,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.firstName)+" "+o(t.lastName),9,wt))),128))],512),[[b,l(P)]])]),e("div",_t,o(l(a).receiptByUid),1),ft,n(e("button",gt," Save ",512),[[A,!f.value]]),n(C(l(E),{message:"Adding Inventory ..."},null,512),[[A,f.value]])],40,we))}}),Dt=ne(yt,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/inventory/StockReceiveForm.vue"]]);export{Dt as default};
