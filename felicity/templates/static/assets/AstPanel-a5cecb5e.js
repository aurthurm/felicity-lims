import{P as U,e as $,Z as d,f as F,aa as G,af as z,o as n,c as l,b as e,F as p,D as v,E as c,x as W,K as V,z as X,A as b,V as A,W as I,a2 as Y,J as Z,X as q,Y as J,aT as K,aU as Q,_ as R}from"./index-fa13e788.js";import{g as H,a as ee,X as te,Y as se,Z as oe}from"./microbiology.mutations-652bcc63.js";const r=f=>(K("data-v-195d3b3a"),f=f(),Q(),f),ie={class:"w-full my-4"},ae={class:"flex justify-between items-center mb-4"},ne=r(()=>e("h2",{class:"text-xl font-semibold"},"AST Panels",-1)),le=r(()=>e("hr",null,null,-1)),de={class:"overflow-x-auto mt-4"},re={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ce={class:"min-w-full"},ue=r(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Name"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Description"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Organisms"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Antibiotics"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),me={class:"bg-white"},pe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"text-sm leading-5 text-gray-800"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},he={class:"text-sm leading-5 text-sky-800"},ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},fe={class:"text-sm leading-5 text-sky-800"},xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ge={class:"text-sm leading-5 text-sky-800"},ye={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},we=["onClick"],Ae={class:"space-y-4"},ke={class:"grid grid-cols-1 gap-4"},Oe={class:"block"},Pe=r(()=>e("span",{class:"text-gray-700"},"Panel Name",-1)),Ce={class:"block"},Se=r(()=>e("span",{class:"text-gray-700"},"Description",-1)),De={class:"flex gap-4"},Ee={class:"w-2/3 space-y-2"},Ve={class:"block"},Ie=r(()=>e("span",{class:"text-gray-700"},"Search Organisms",-1)),Te={class:"border p-2 h-64 overflow-y-auto"},Le=["value"],Me={class:"ml-2"},je={class:"w-1/3"},Be=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Organisms",-1)),Ne={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Ue={class:"text-sm"},$e=["onClick"],Fe={class:"flex gap-4"},Ge={class:"w-2/3 space-y-2"},ze={class:"block"},We=r(()=>e("span",{class:"text-gray-700"},"Search Antibiotics",-1)),Xe={class:"border p-2 h-64 overflow-y-auto"},Ye=["value"],Ze={class:"ml-2"},qe={class:"w-1/3"},Je=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Antibiotics",-1)),Ke={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Qe={class:"text-sm"},Re=["onClick"],He=r(()=>e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2"}," Save Panel ")],-1)),et=U({__name:"AstPanel",setup(f){const T=q(()=>J(()=>import("./index-fa13e788.js").then(i=>i.cN),["assets/index-fa13e788.js","assets/index-ccc6a521.css"])),{withClientMutation:P,withClientQuery:k}=$(),x=d(!1),C=d(""),S=d(!0),g=d(""),y=d(""),m=d([]),_=d([]),w=d([]),u=d([]),O=d([]),o=F({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});G(()=>{L(),D(),M()});function L(){k(H,{},"abxLaboratoryAntibiotics").then(i=>{i&&(_.value=i,w.value=[..._.value])})}function D(){k(ee,{text:g.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(i=>{u.value=u.value?.filter(s=>o.selectedOrganisms.includes(s.uid))||[],u.value=z(u.value,i?.items,"uid"),O.value=[...u.value]})}function M(){k(te,{},"abxAstPanelAll").then(i=>{i&&(m.value=i,m.value.forEach(s=>s.organisms?.forEach(t=>u.value.push(t))))})}function E(i,s={}){S.value=i,x.value=!0,C.value=(i?"Create":"Edit")+" AST Panel",i?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=s.uid,o.name=s.name,o.description=s.description,o.selectedAntibiotics=s.antibiotics?.map(t=>t.uid)||[],o.selectedOrganisms=s.organisms?.map(t=>t.uid)||[])}function j(){const i={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};S.value?P(se,{payload:i},"createAbxAstPanel").then(s=>{s&&m.value.unshift(s)}):P(oe,{uid:o.uid,payload:i},"updateAbxAstPanel").then(s=>{if(s){const t=m.value.findIndex(a=>a.uid===s.uid);t>-1&&(m.value=[...m.value.map((a,h)=>h===t?s:a)])}}),x.value=!1}function B(){if(!y.value){w.value=[..._.value];return}w.value=_.value.filter(i=>i.name.toLowerCase().includes(y.value.toLowerCase()))}function N(){if(!g.value){O.value=[...u.value];return}D()}return(i,s)=>(n(),l(p,null,[e("div",ie,[e("div",ae,[ne,e("button",{onClick:s[0]||(s[0]=t=>E(!0)),class:"px-4 py-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Panel ")]),le,e("div",de,[e("div",re,[e("table",ce,[ue,e("tbody",me,[(n(!0),l(p,null,v(m.value,t=>(n(),l("tr",{key:t?.uid},[e("td",pe,[e("div",be,c(t?.name),1)]),e("td",_e,[e("div",he,c(t?.description),1)]),e("td",ve,[e("div",fe,c(t?.organisms?.map(a=>a.name).join(", ")),1)]),e("td",xe,[e("div",ge,c(t?.antibiotics?.map(a=>a.name).join(", ")),1)]),e("td",ye,[e("button",{onClick:a=>E(!1,t),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Edit ",8,we)])]))),128))])])])])]),x.value?(n(),W(Y(T),{key:0,onClose:s[7]||(s[7]=t=>x.value=!1),contentWidth:"w-1/2"},{header:V(()=>[e("h3",null,c(C.value),1)]),body:V(()=>[e("form",{onSubmit:X(j,["prevent"]),class:"p-4"},[e("div",Ae,[e("div",ke,[e("label",Oe,[Pe,b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.name=t),class:"form-input mt-1 block w-full",placeholder:"Enter panel name"},null,512),[[A,o.name]])]),e("label",Ce,[Se,b(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.description=t),rows:"2",class:"form-input mt-1 block w-full",placeholder:"Enter description"},null,512),[[A,o.description]])])]),e("div",De,[e("div",Ee,[e("label",Ve,[Ie,b(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),onInput:N,class:"form-input mt-1 block w-full",placeholder:"Search organisms..."},null,544),[[A,g.value]])]),e("div",Te,[(n(!0),l(p,null,v(O.value,t=>(n(),l("div",{key:t.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[4]||(s[4]=a=>o.selectedOrganisms=a),class:"form-checkbox"},null,8,Le),[[I,o.selectedOrganisms]]),e("span",Me,c(t.name),1)]))),128))])]),e("div",je,[Be,e("div",Ne,[(n(!0),l(p,null,v(o.selectedOrganisms,t=>(n(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Ue,c(u.value?.find(a=>a.uid===t)?.name),1),e("button",{onClick:a=>o.selectedOrganisms=o.selectedOrganisms.filter(h=>h!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,$e)]))),128))])])]),e("div",Fe,[e("div",Ge,[e("label",ze,[We,b(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>y.value=t),onInput:B,class:"form-input mt-1 block w-full",placeholder:"Search antibiotics..."},null,544),[[A,y.value]])]),e("div",Xe,[(n(!0),l(p,null,v(w.value,t=>(n(),l("div",{key:t.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[6]||(s[6]=a=>o.selectedAntibiotics=a),class:"form-checkbox"},null,8,Ye),[[I,o.selectedAntibiotics]]),e("span",Ze,c(t.name),1)]))),128))])]),e("div",qe,[Je,e("div",Ke,[(n(!0),l(p,null,v(o.selectedAntibiotics,t=>(n(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Qe,c(_.value.find(a=>a.uid==t)?.name),1),e("button",{onClick:a=>o.selectedAntibiotics=o.selectedAntibiotics.filter(h=>h!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,Re)]))),128))])])])]),He],32)]),_:1})):Z("",!0)],64))}});const ot=R(et,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{ot as default};
