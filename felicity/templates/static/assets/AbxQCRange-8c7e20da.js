import{W as N,f as W,a2 as u,h as T,i as q,a9 as F,r as M,o as V,c as L,a as c,O as o,M as x,a7 as s,z as j,J as z,C as Y,D as a,Z as r,ai as J,L as K,F as Z,a0 as _,a1 as B,ah as Q,_ as $}from"./index-5d85e9da.js";import{j as H,P as X,Q as ee,R as oe,T as te}from"./microbiology.mutations-bbc8c44b.js";const se={class:"rounded-lg shadow-sm bg-card p-6"},le={class:"text-xl font-semibold text-foreground"},ne={class:"space-y-4"},ie={class:"grid grid-cols-2 gap-4"},ae={class:"block"},re={class:"block"},de={class:"space-y-4"},ue={class:"grid grid-cols-3 gap-4"},fe={class:"block"},me={class:"block"},be={class:"block"},ce={class:"block"},ge={class:"block"},pe={class:"block"},xe={class:"block"},ve={class:"block"},ye={class:"block"},he={class:"block"},we={class:"space-y-4"},Ae={class:"block"},Ce=N({__name:"AbxQCRange",setup(ke){const U=_(()=>B(()=>import("./FelDataTable-f331e430.js"),["assets/FelDataTable-f331e430.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css"])),v=_(()=>B(()=>import("./vue-multiselect.esm-8e9ddbb7.js"),["assets/vue-multiselect.esm-8e9ddbb7.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css"])),{withClientMutation:y,withClientQuery:g}=W();let b=u(!1),O=u(""),t=T({});const h=u(!0),w=u(!1),d=u([]),A=u([]),C=u([]);let i=T({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const k=u(0);let R=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const D=q(()=>d?.value?.length+" of "+k.value+" qcRanges"),P=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function p(n){g(ee,{text:n.text,pageSize:n.first,sortBy:n.sortBy},void 0).then(e=>{const f=e.abxQcRangeAll,m=f.items;n.filterAction?(d.value=[],d.value=m):d.value=Q(d.value,m,"uid"),k.value=f?.totalCount,R.value=f?.pageInfo}).finally(()=>{w.value=!1})}F(()=>{g(H,{},"abxGuidelinesAll").then(n=>{n&&(A.value=n)}),p(i),g(X,{},"abxMediumAll").then(n=>{n&&(C.value=n)})});function S(n){i.first=100,i.after="",i.text=n.filterText,i.filterAction=!0,p(i)}function I(n){i.first=n.fetchCount,i.after=R?.value?.endCursor,i.text=n.filterText,i.filterAction=!1,p(i)}const G=()=>Object.assign(t,{});function E(){const n={guidelineUid:t.guideline?.uid,year:t.year,strain:t.strain,referenceTable:t.referenceTable,whonetOrgCode:t.whonetOrgCode,antibiotic:t.antibiotic,abxTest:t.abxTest,whonetAbxCode:t.whonetAbxCode,method:t.method,medium:t.medium,minimum:t.minimum,maximum:t.maximum};h.value===!0&&y(oe,{payload:n},"createAbxQcRange").then(e=>{e&&(d.value=Q(d.value,[e],"uid"))}),h.value===!1&&y(te,{uid:t.uid,payload:n},"updateAbxQcRange").then(e=>{if(e){const f=d.value.findIndex(m=>m.uid==e.uid);d.value[f]=e}}),b.value=!1}return(n,e)=>{const f=M("fel-heading"),m=M("fel-modal");return V(),L(Z,null,[c(f,{title:"Quality Control range"}),o("div",se,[c(s(U),{columns:P.value,data:d.value,toggleColumns:!0,loading:w.value,paginable:!0,pageMeta:{fetchCount:s(i).first,hasNextPage:!0,countNone:D.value},searchable:!0,filterable:!1,onOnSearchKeyUp:S,onOnSearchFocus:G,onOnPaginate:I,selectable:!1},{footer:x(()=>e[14]||(e[14]=[])),_:1},8,["columns","data","loading","pageMeta"])]),s(b)?(V(),j(m,{key:0,onClose:e[13]||(e[13]=l=>J(b)?b.value=!1:b=!1),"content-width":"w-1/2"},{header:x(()=>[o("h3",le,z(s(O)),1)]),body:x(()=>[o("form",{onSubmit:Y(E,["prevent"]),class:"space-y-6 p-4"},[o("div",ne,[e[17]||(e[17]=o("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),o("div",ie,[o("label",ae,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),c(s(v),{modelValue:s(t).guidelines,"onUpdate:modelValue":e[0]||(e[0]=l=>s(t).guidelines=l),options:A.value,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",re,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),a(o("input",{type:"number",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=l=>s(t).year=l),placeholder:"Enter year"},null,512),[[r,s(t).year]])])])]),o("div",de,[o("div",ue,[o("label",fe,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"Strain",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=l=>s(t).strain=l),placeholder:"Strain"},null,512),[[r,s(t).strain]])]),o("label",me,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"Reference Table",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=l=>s(t).referenceTable=l),placeholder:"Reference Table"},null,512),[[r,s(t).referenceTable]])]),o("label",be,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=l=>s(t).whonetOrgCode=l),placeholder:"Whonet Org Code"},null,512),[[r,s(t).whonetOrgCode]])]),o("label",ce,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Antibiotic",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=l=>s(t).antibiotic=l),placeholder:"Antibiotic"},null,512),[[r,s(t).antibiotic]])]),o("label",ge,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Abx Test",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=l=>s(t).abxTest=l),placeholder:"Abx Test"},null,512),[[r,s(t).abxTest]])]),o("label",pe,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Abx Code",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=l=>s(t).whonetAbxCode=l),placeholder:"Whonet Abx Code"},null,512),[[r,s(t).whonetAbxCode]])]),o("label",xe,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-foreground"},"Method",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=l=>s(t).method=l),placeholder:"Method"},null,512),[[r,s(t).method]])]),o("label",ve,[e[25]||(e[25]=o("span",{class:"text-sm font-medium text-foreground"},"Medium",-1)),c(s(v),{modelValue:s(t).medium,"onUpdate:modelValue":e[9]||(e[9]=l=>s(t).medium=l),options:C.value,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",ye,[e[26]||(e[26]=o("span",{class:"text-sm font-medium text-foreground"},"Minimum",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[10]||(e[10]=l=>s(t).minimum=l),placeholder:"Minimum"},null,512),[[r,s(t).minimum]])]),o("label",he,[e[27]||(e[27]=o("span",{class:"text-sm font-medium text-foreground"},"Maximum",-1)),a(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=l=>s(t).maximum=l),placeholder:"Maximum"},null,512),[[r,s(t).maximum]])])])]),o("div",we,[o("label",Ae,[e[28]||(e[28]=o("span",{class:"text-sm font-medium text-foreground"},"Comments",-1)),a(o("textarea",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[12]||(e[12]=l=>s(t).comments=l),rows:"3",placeholder:"Additional comments..."},null,512),[[r,s(t).comments]])])]),e[29]||(e[29]=o("hr",{class:"border-border"},null,-1)),e[30]||(e[30]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save QcRange ",-1))],32)]),_:1})):K("",!0)],64)}}});const Me=$(Ce,[["__scopeId","data-v-2041ea59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{Me as default};
