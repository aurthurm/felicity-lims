const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as P,P as L,u as U,a7 as D,aw as q,a0 as b,an as N,bb as z,a5 as W,a6 as Y,a9 as G,aa as J,ab as Q,ad as X,ae as Z,af as j,a3 as $,_ as ee,c as g,o as u,a as t,z as i,A as V,C as te,K as l,M as n,F as _,H as B,I as y,B as le,a4 as K}from"./index-OdhKCqIc.js";import{c as ae,e as oe,a as se,d as re,u as ne,F as de}from"./index.esm-BfHj8iGm.js";import{y as ie,z as ue}from"./analyses.mutations-DUxQZn1r.js";import{u as me}from"./analysis-PB9AMevg.js";import{I as fe}from"./Input-BEm5S0CJ.js";import{F as pe,a as ce,b as be}from"./FormMessage-CgXFMXx9.js";import{F as ge}from"./FormLabel-DxP9wnWS.js";import{P as ye}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const ve=P({__name:"ResultOptions",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:""}},setup(F,{expose:a}){a();const x=W(()=>Y(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),e=me(),v=L(),{withClientMutation:f}=U(),o=D(()=>v.getSampleTypes),d=F,{analysis:R}=q(d);let p=b(!1),T=b("");const c=b(!0),m=b(null),w=ae({optionKey:re().typeError("Result key must be a number").integer("Result key must be an integer").required("Result key is required"),value:se().trim().required("Result value is required"),sampleTypes:oe().nullable()}),{handleSubmit:C,resetForm:M,setValues:O}=ne({validationSchema:w,initialValues:{optionKey:"",value:"",sampleTypes:[]}});N(()=>d.analysisUid,(s,r)=>{});function S(s){f(ie,{payload:s},"createResultOption").then(r=>e.addResultOption(r))}function h(s){m.value&&f(ue,{uid:m.value,payload:s},"updateResultOption").then(r=>e.updateResultOption(r))}function H(s,r={}){c.value=s,p.value=!0,T.value=(s?"CREATE":"EDIT")+" RESULT OPTION",s?(m.value=null,M({values:{optionKey:"",value:"",sampleTypes:[]}})):(m.value=r.uid??null,O({optionKey:r.optionKey??"",value:r.value??"",sampleTypes:r.sampleTypes??[]}))}const A=C(s=>{const r=R?.value?.uid;if(!r)return;const I={optionKey:Number(s.optionKey),value:s.value,sampleTypes:(s.sampleTypes??[]).map(E=>E.uid),analysisUid:r};c.value===!0&&S(I),c.value===!1&&h(I),p.value=!1}),k={VueMultiselect:x,analysisStore:e,sampleStore:v,withClientMutation:f,sampleTypes:o,props:d,analysis:R,get showModal(){return p},set showModal(s){p=s},get formTitle(){return T},set formTitle(s){T=s},formAction:c,currentUid:m,resultOptionSchema:w,handleSubmit:C,resetForm:M,setValues:O,addResultOption:S,editResultOption:h,FormManager:H,saveForm:A,get Button(){return $},get Input(){return fe},get FormControl(){return be},get FormField(){return de},get FormItem(){return ce},get FormLabel(){return ge},get FormMessage(){return pe},get Table(){return j},get TableBody(){return Z},get TableCell(){return X},get TableHead(){return Q},get TableHeader(){return J},get TableRow(){return G},Modal:z,PageHeading:ye};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),Te={class:"mt-4 border border-border bg-card rounded-lg shadow-md"},_e={class:"relative w-full overflow-auto"},Fe={class:"text-sm text-foreground"},xe={class:"flex flex-wrap gap-2"},Re={class:"text-lg font-bold text-foreground"},we={class:"space-y-4"},Ce={class:"grid grid-cols-3 gap-4"},Me={class:"pt-4"};function Oe(F,a,x,e,v,f){return u(),g(_,null,[t(e.PageHeading,{title:"Result Options"},{default:l(()=>[t(e.Button,{onClick:a[0]||(a[0]=o=>e.FormManager(!0))},{default:l(()=>[...a[3]||(a[3]=[n("Add Result Option",-1)])]),_:1})]),_:1}),i("div",Te,[i("div",_e,[t(e.Table,{class:"w-full caption-bottom text-sm"},{default:l(()=>[t(e.TableHeader,{class:"[&_tr]:border-b"},{default:l(()=>[t(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[4]||(a[4]=[n("Result Key",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[5]||(a[5]=[n("Result Value",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[6]||(a[6]=[n("Sample Types",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[7]||(a[7]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:l(()=>[(u(!0),g(_,null,B(e.analysis?.resultOptions,o=>(u(),V(e.TableRow,{key:o?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[i("div",Fe,y(o?.optionKey),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[n(y(o?.value),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle text-sm"},{default:l(()=>[i("div",xe,[(u(!0),g(_,null,B(o?.sampleTypes,d=>(u(),g("span",{key:d.uid,class:"px-2 py-1 text-xs font-medium bg-accent text-accent-foreground rounded-md"},y(d.name),1))),128))])]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle text-right"},{default:l(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:d=>e.FormManager(!1,o)},{default:l(()=>[...a[8]||(a[8]=[n(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),e.showModal?(u(),V(e.Modal,{key:0,onClose:a[2]||(a[2]=o=>e.showModal=!1),contentWidth:"w-2/4"},{header:l(()=>[i("h3",Re,y(e.formTitle),1)]),body:l(()=>[i("form",{onSubmit:a[1]||(a[1]=le((...o)=>e.saveForm&&e.saveForm(...o),["prevent"])),class:"p-6 space-y-6"},[i("div",we,[i("div",Ce,[t(e.FormField,{name:"optionKey"},{default:l(({componentField:o})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[9]||(a[9]=[n("Result Key",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,K(o,{type:"number",placeholder:"Key ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"value"},{default:l(({componentField:o})=>[t(e.FormItem,{class:"col-span-2"},{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[10]||(a[10]=[n("Result Value",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,K(o,{placeholder:"Value ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),t(e.FormField,{name:"sampleTypes"},{default:l(({value:o,handleChange:d})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[11]||(a[11]=[n("Sample Types",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.VueMultiselect,{"model-value":o,"onUpdate:modelValue":d,options:e.sampleTypes,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-primary"},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),i("div",Me,[t(e.Button,{type:"submit",class:"w-full"},{default:l(()=>[...a[12]||(a[12]=[n("Save Form",-1)])]),_:1})])],32)]),_:1})):te("",!0)],64)}const Ee=ee(ve,[["render",Oe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/services/ResultOptions.vue"]]);export{Ee as default};
