import{_,z as X,a2 as Y,m as Z,D as ee,H as te,ao as se,w as oe}from"./shipment-53265c2d.js";import{f as ae,G as b,r as y,C as g,c as ne,d as C,h as i,k as u,B as E,u as a,x as t,ag as c,i as d,A as S,y as R,j as re,F as m,ak as w,D as x,_ as le}from"./_plugin-vue_export-helper-dacf3d65.js";import{c as ie,d as f,u as ue,b as h}from"./array-9d3d6c63.js";import{h as de,o as ce,a as me}from"./constants-743d82a1.js";import{b as fe,a as M,d as N,v as he}from"./runtime-dom.esm-bundler-98433118.js";const pe={class:"flex justify-between items-center"},ve=t("h3",null,"Create Worksheet",-1),ke=t("hr",null,null,-1),_e={action:"post",class:"p-1"},be={class:"grid grid-cols-3 gap-x-4 mb-4"},ye={class:"block col-span-1 mb-2"},ge=t("span",{class:"text-gray-700"},"Analyst",-1),Se=["value"],we={class:"block col-span-1 mb-2"},xe=t("span",{class:"text-gray-700"},"Worksheet Template",-1),We=t("option",{value:"undefined"},null,-1),Ae=["value"],Te={class:"block col-span-1 mb-2"},Ue=t("span",{class:"text-gray-700"},"How Many",-1),Ce=t("hr",null,null,-1),Ee=ae({__name:"WorkSheetListing",setup(Re){const B=b(()=>_(()=>import("./SimpleModal-9e28c074.js"),["assets/SimpleModal-9e28c074.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js","assets/SimpleModal-f645a074.css"])),D=b(()=>_(()=>import("./DataTable-f385048e.js"),["assets/DataTable-f385048e.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js"])),L=b(()=>_(()=>import("./PageHeading-f8f1dd15.js"),["assets/PageHeading-f8f1dd15.js","assets/_plugin-vue_export-helper-dacf3d65.js"])),l=X(),W=Y(),{withClientMutation:P}=oe(),{workSheets:A,fetchingWorkSheets:I,workSheetPageInfo:T,workSheetTemplates:V}=Z(l);ee();let r=y(!1);const O=y([{name:"All",value:""},{name:"Pending",value:"pending"},{name:"Awaiting",value:"awaiting"},{name:"Approved",value:"approved"},{name:"Empty",value:"empty"}]),F=y([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"WorkSheet Id",value:"workSheetId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,o){return g(te,{to:{name:"worksheet-detail",params:{workSheetUid:e?.uid}},innerHTML:e?.worksheetId})}},{name:"Analysis/Test",value:"analysis.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Samples",value:"assignedCount",sortable:!1,sortBy:"asc",hidden:!1},{name:"Instrument",value:"instrument.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Analyst",value:"clientPatientId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,o){return g("div",{innerHTML:U(e?.analyst)})}},{name:"Status",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,o){return g("button",{type:"button",class:"bg-sky-800 text-white py-1 px-2 rounded-sm leading-none",innerHTML:e?.state||"unknown"})}}]);l.removeWorksheet();let n=ne({first:25,before:"",status:"",text:"",sort:["-uid"],filterAction:!1});l.fetchWorkSheets(n),l.fetchWorkSheetTemplates(),W.fetchUsers({});const H=ie({analystUid:f().required("Analyst is Required").typeError("Analyst is Required"),templateUid:f().typeError("Worksheet Template is required"),instrumentUid:f(),count:f().typeError("Required number of worksheets must be defined")}),{handleSubmit:q,errors:j}=ue({validationSchema:H,initialValues:{count:1,analystUid:void 0,templateUid:void 0,instrumentUid:void 0}}),{value:p}=h("count"),{value:v}=h("analystUid"),{value:k}=h("templateUid");h("instrumentUid");const $=q(e=>{r.value=!1,P(se,e,"createWorksheet").then(o=>{l.addWorksheet(o),r.value=!1})});function K(e){n.first=e.fetchCount,n.before=T?.value?.endCursor??"",n.text=e.filterText,n.status=e.filterStatus,n.filterAction=!1,l.fetchWorkSheets(n)}function z(e){n.first=25,n.before="",n.text=e.filterText,n.status=e.filterStatus,n.filterAction=!0,l.fetchWorkSheets(n)}const G=C(()=>W.getUsers),U=e=>e?.auth?.userName?e?.auth?.userName:e?.firstName?e.firstName+" "+e.lastName:"----",J=C(()=>A?.value?.length+" of "+l.getWorkSheetCount+" WorkSheets");return(e,o)=>(i(),u(m,null,[E(a(L),{title:"Worksheets"}),t("div",pe,[t("div",null,[c(t("button",{onClick:o[0]||(o[0]=M(s=>d(r)?r.value=!0:r=!0,["prevent"])),class:"p-2 h-10 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add WorkSheet ",512),[[fe,de(me.CREATE,ce.WORKSHEET)]])])]),E(a(D),{columns:F.value,data:a(A),toggleColumns:!0,loading:a(I),paginable:!0,pageMeta:{fetchCount:a(n).first,hasNextPage:a(T)?.hasNextPage,countNone:a(J)},searchable:!0,filterable:!0,filterMeta:{defaultFilter:a(n).status,filters:O.value},onOnSearch:z,onOnPaginate:K,selectable:!1},{footer:S(()=>[]),_:1},8,["columns","data","loading","pageMeta","filterMeta"]),R(" Location Edit Form Modal "),a(r)?(i(),re(a(B),{key:0,onClose:o[5]||(o[5]=s=>d(r)?r.value=!1:r=!1)},{header:S(()=>[t("div",null,[ve,ke,t("ul",null,[(i(!0),u(m,null,w(Object.values(a(j)),(s,Q)=>(i(),u("li",{key:Q,class:"text-orange-600"},x(s),1))),128))])])]),body:S(()=>[t("form",_e,[t("div",be,[t("label",ye,[ge,c(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":o[1]||(o[1]=s=>d(v)?v.value=s:null)},[(i(!0),u(m,null,w(a(G),s=>(i(),u("option",{key:s.uid,value:s.uid},x(U(s)),9,Se))),128))],512),[[N,a(v)]])]),t("label",we,[xe,c(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":o[2]||(o[2]=s=>d(k)?k.value=s:null)},[We,(i(!0),u(m,null,w(a(V),s=>(i(),u("option",{key:s.uid,value:s.uid},x(s.name),9,Ae))),128))],512),[[N,a(k)]])]),t("label",Te,[Ue,c(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":o[3]||(o[3]=s=>d(p)?p.value=s:null),min:"1"},null,512),[[he,a(p)]])])]),Ce,t("button",{type:"button",onClick:o[4]||(o[4]=M(s=>a($)(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):R("v-if",!0)],64))}}),Pe=le(Ee,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/worksheet/WorkSheetListing.vue"]]);export{Pe as default};
