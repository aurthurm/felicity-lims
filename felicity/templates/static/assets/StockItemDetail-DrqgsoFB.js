import{Y as D,u as B,an as H,a0 as v,bb as A,a3 as N,a9 as R,aa as q,ab as z,ac as O,ad as P,ae as U,af as K,_ as Y,c as C,o as c,z as i,A as _,C as j,I as s,a as t,K as a,M as o,F as G,H as J,B as Q,a4 as x}from"./index-OdhKCqIc.js";import{c as W,d as S,a as M,u as X,F as Z}from"./index.esm-BfHj8iGm.js";import{u as $,i as ee,j as te}from"./inventory-CcBllciv.js";import{E as ae,a as le,b as ne,c as re,d as oe}from"./EmptyTitle-aCQRDpx3.js";import{F as me,a as ie,b as de}from"./FormMessage-CgXFMXx9.js";import{F as se}from"./FormLabel-DxP9wnWS.js";import{I as ue}from"./Input-BEm5S0CJ.js";import{T as fe}from"./Textarea-T3VcJTEo.js";import"./inventory.queries-Bx-sCQu8.js";import"./Label-CS46LzLb.js";const ce=D({name:"StockItemDetail",__name:"StockItemDetail",props:{stockItem:{type:[Object,null],required:!1}},setup(p,{expose:l}){l();const d=p,e=$(),{withClientMutation:b}=B();H(()=>d.stockItem?.uid,async r=>{r&&await e.fetchItemVariants(r)});const g=v(!1),n=v(""),u=v(!0),f=v(null),I=W({name:M().trim().required("Variant name is required"),description:M().trim().nullable(),minimumLevel:S().nullable(),maximumLevel:S().nullable()}),y={name:"",description:"",minimumLevel:null,maximumLevel:null},{handleSubmit:T,setValues:F}=X({validationSchema:I,initialValues:{...y}});function k(r){const m=d.stockItem?.uid;m&&b(ee,{stockItemUid:m,payload:r},"createStockItemVariant").then(h=>e.addItemVariant(h))}function E(r){f.value&&b(te,{uid:f.value,payload:r},"updateStockItemVariant").then(m=>e.updateItemVariant(m))}function V(r,m){u.value=r,n.value=(r?"CREATE":"EDIT")+" A VARIANT",r?(f.value=null,F({...y})):(f.value=m?.uid??null,F({name:m?.name??"",description:m?.description??"",minimumLevel:m?.minimumLevel??null,maximumLevel:m?.maximumLevel??null})),g.value=!0}const w=T(r=>{const m={name:r.name,description:r.description??null,minimumLevel:r.minimumLevel==null||r.minimumLevel===""?null:Number(r.minimumLevel),maximumLevel:r.maximumLevel==null||r.maximumLevel===""?null:Number(r.maximumLevel)};u.value===!0&&k(m),u.value===!1&&E(m),g.value=!1}),L={props:d,inventoryStore:e,withClientMutation:b,showModal:g,formTitle:n,formAction:u,currentUid:f,variantSchema:I,defaultValues:y,handleSubmit:T,setValues:F,addStockItemVariant:k,editStockItemVariant:E,FormManager:V,onModalFormSubmit:w,Modal:A,get Table(){return K},get TableBody(){return U},get TableCell(){return P},get TableEmpty(){return O},get TableHead(){return z},get TableHeader(){return q},get TableRow(){return R},get Empty(){return oe},get EmptyContent(){return re},get EmptyDescription(){return ne},get EmptyHeader(){return le},get EmptyTitle(){return ae},get Button(){return N},get FormControl(){return de},get FormField(){return Z},get FormItem(){return ie},get FormLabel(){return se},get FormMessage(){return me},get Input(){return ue},get Textarea(){return fe}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),be={class:"space-y-6"},ge={class:"space-y-2"},ve={class:"text-2xl font-semibold text-foreground"},xe={class:"text-sm text-muted-foreground"},ye={class:"flex items-center justify-between"},Fe={class:"border border-border bg-card rounded-lg shadow-md"},_e={class:"relative w-full overflow-auto"},pe={class:"text-lg font-semibold text-foreground"},Ie={class:"grid grid-cols-2 gap-4"};function Te(p,l,d,e,b,g){return c(),C("div",be,[i("section",ge,[i("h2",ve,s(d.stockItem?.name),1),i("p",xe,s(d.stockItem?.description),1)]),i("div",ye,[l[3]||(l[3]=i("h3",{class:"text-xl font-semibold text-foreground"},"Item Variants",-1)),t(e.Button,{onClick:l[0]||(l[0]=n=>e.FormManager(!0,null))},{default:a(()=>[o("Add New "+s(d.stockItem?.name),1)]),_:1})]),i("div",Fe,[i("div",_e,[t(e.Table,{class:"w-full caption-bottom text-sm"},{default:a(()=>[t(e.TableHeader,{class:"[&_tr]:border-b"},{default:a(()=>[t(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...l[4]||(l[4]=[o("Variant Name",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...l[5]||(l[5]=[o("Description",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:a(()=>[...l[6]||(l[6]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:a(()=>[d.stockItem?.variants?.length?(c(!0),C(G,{key:1},J(d.stockItem?.variants,n=>(c(),_(e.TableRow,{key:n?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[t(e.TableCell,{class:"px-4 py-3 align-middle text-sm"},{default:a(()=>[o(s(n?.name),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:a(()=>[o(s(n?.description),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 text-right align-middle"},{default:a(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:u=>e.FormManager(!1,n)},{default:a(()=>[...l[9]||(l[9]=[o("Edit",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(c(),_(e.TableEmpty,{key:0,colspan:3},{default:a(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:a(()=>[t(e.EmptyContent,null,{default:a(()=>[t(e.EmptyHeader,null,{default:a(()=>[t(e.EmptyTitle,null,{default:a(()=>[...l[7]||(l[7]=[o("No variants yet",-1)])]),_:1}),t(e.EmptyDescription,null,{default:a(()=>[...l[8]||(l[8]=[o("Add a variant to manage stock levels.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})])]),e.showModal?(c(),_(e.Modal,{key:0,onClose:l[2]||(l[2]=n=>e.showModal=!1)},{header:a(()=>[i("h3",pe,s(e.formTitle),1)]),body:a(()=>[i("form",{onSubmit:l[1]||(l[1]=Q((...n)=>e.onModalFormSubmit&&e.onModalFormSubmit(...n),["prevent"])),class:"space-y-6"},[t(e.FormField,{name:"name"},{default:a(({componentField:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...l[10]||(l[10]=[o("Variant Name",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,x(n,{placeholder:"Enter variant name..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:a(({componentField:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...l[11]||(l[11]=[o("Description",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Textarea,x(n,{class:"min-h-[80px]",placeholder:"Enter description..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),i("div",Ie,[t(e.FormField,{name:"minimumLevel"},{default:a(({componentField:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...l[12]||(l[12]=[o("Minimum Level",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,x(n,{type:"number",min:"0",placeholder:"0"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"maximumLevel"},{default:a(({componentField:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...l[13]||(l[13]=[o("Maximum Level",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,x(n,{type:"number",min:"0",placeholder:"0"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),t(e.Button,{type:"submit",class:"w-full"},{default:a(()=>[...l[14]||(l[14]=[o("Save Changes",-1)])]),_:1})],32)]),_:1})):j("",!0)])}const Be=Y(ce,[["render",Te],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/inventory/StockItemDetail.vue"]]);export{Be as default};
