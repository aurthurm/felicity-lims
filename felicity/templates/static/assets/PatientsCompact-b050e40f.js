import{P as G,ai as $,Z as E,f as U,h as x,aa as Q,r as H,$ as K,o as a,c as u,a as v,b as t,x as f,K as g,L as z,J as y,A as k,a2 as A,F as J,D as X,X as n,a1 as Y,E as l,Y as i,_ as Z}from"./index-d30fd8e2.js";import{u as q}from"./patient-c7440fbf.js";import{u as W}from"./location-ff7a5433.js";import{h as T,o as I,a as L}from"./constants-cb49b235.js";const ee={class:"flex justify-between mb-4"},te={class:"flex items-center gap-4"},se={class:"grid grid-cols-12 gap-4"},oe={initial:{opacity:0,y:100},enter:{opacity:1,y:0},delay:400,class:"col-span-3 h-screen overflow-y-auto scrollbar scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},ae=["onClick"],ne={class:"flex-grow p-3"},ie={class:"flex justify-between font-semibold"},re={class:"text-sm text-gray-500"},le={class:"text-sm text-gray-500 flex justify-between mt-1"},ce={class:"text-sm text-gray-500 flex justify-between mt-1"},de={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0},delay:400,class:"col-span-9"},ue=G({__name:"PatientsCompact",setup(_e){const m={MALE:0,FEMALE:1,MISSING:2,TRANS:3},w={[m.MALE]:"Male",[m.FEMALE]:"Female",[m.MISSING]:"Missing",[m.TRANS]:"Trans Gender"},c={LoadingMessage:n(()=>i(()=>import("./FelLoadingMessage-e38294dc.js"),["assets/FelLoadingMessage-e38294dc.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),PageHeading:n(()=>i(()=>import("./index-d30fd8e2.js").then(e=>e.cM),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),Modal:n(()=>i(()=>import("./index-d30fd8e2.js").then(e=>e.cN),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),PatientForm:n(()=>i(()=>import("./PatientForm-5ba5e777.js"),["assets/PatientForm-5ba5e777.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/vue-multiselect.esm-26d4ec41.js","assets/patient.mutations-01b69066.js","assets/client-1382fcd8.js","assets/location-ff7a5433.js","assets/patient-c7440fbf.js","assets/array-1b5e3a20.js","assets/vue-multiselect-a538cd7c.css"])),PatientInfo:n(()=>i(()=>import("./PatientInfo-2abb61b5.js"),["assets/PatientInfo-2abb61b5.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/constants-cb49b235.js","assets/patient-c7440fbf.js"])),Tabs:n(()=>i(()=>import("./FelTabs-7643f139.js"),["assets/FelTabs-7643f139.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/FelTabs-2560176b.css"]))},_=q(),R=W(),{patients:C,fetchingPatients:D}=$(_),p=E(!1),r=E({}),d=U({first:25,before:"",text:"",sortBy:["-uid"],filterAction:!1}),S=x(()=>Object.keys(r.value).length>0),N=x(()=>[{id:"samples",label:"Samples",component:n(()=>i(()=>import("./FelAnalyisRequestListing-bc56c0b7.js"),["assets/FelAnalyisRequestListing-bc56c0b7.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),props:{target:"patient-samples",targetUid:r.value.uid}},{id:"billing",label:"Billing",component:n(()=>i(()=>import("./PatientBill-7a71d71a.js"),["assets/PatientBill-7a71d71a.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/billing-c9a6c7fc.js","assets/array-1b5e3a20.js","assets/PatientBill-7bdbff76.css"])),props:{patientUid:r.value.uid}},{id:"logs",label:"Logs",component:n(()=>i(()=>import("./FelAuditLog-c8ce93bb.js"),["assets/FelAuditLog-c8ce93bb.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/user-8c4e124f.js","assets/_queries-3ca7633b.js"])),props:{targetType:"patient",targetUid:r.value.uid}}]),M=e=>`${e.firstName} ${e.lastName}`,V=e=>w[e]||"Unknown",b=e=>{r.value=e,_.setPatient(e)},h=()=>{r.value={},_.resetPatient()},F=e=>{const s=e.target;d.first=100,d.before="",d.text=s.value,d.filterAction=!0,_.fetchPatients(d)},O=async()=>{h(),p.value=!0},B=e=>{b(e),p.value=!1};return Q(()=>{R.fetchCountries(),_.fetchPatients(d)}),(e,s)=>{const j=H("router-link"),P=K("motion");return a(),u("div",null,[v(c.PageHeading,{title:"Patients Quick View"}),t("div",ee,[t("div",te,[T(L.CREATE,I.PATIENT)?(a(),f(j,{key:0,to:"/patients/search",class:"px-4 py-2 text-sm border border-sky-800 text-dark-800 rounded-sm hover:bg-sky-800 hover:text-gray-100 transition-colors duration-150"},{default:g(()=>s[2]||(s[2]=[z(" Add Patient ")])),_:1})):y("",!0),t("input",{type:"text",placeholder:"Search patients...",class:"w-64 px-4 py-2 text-sm text-gray-800 placeholder-gray-400 border border-gray-400 rounded-sm focus:border-sky-800 focus:outline-none focus:ring-1 focus:ring-sky-800",onKeyup:F,onFocus:h},null,32)]),T(L.CREATE,I.PATIENT)?(a(),u("button",{key:0,class:"px-4 py-2 text-sm border border-sky-800 text-dark-700 rounded-sm hover:bg-sky-800 hover:text-gray-100 transition-colors duration-150",onClick:O}," Quick Registration ")):y("",!0)]),s[4]||(s[4]=t("hr",{class:"my-4"},null,-1)),t("div",se,[k((a(),u("section",oe,[A(D)?(a(),f(c.LoadingMessage,{key:0,message:"Fetching patients..."})):(a(!0),u(J,{key:1},X(A(C),o=>(a(),u("div",{key:o.patientId,onClick:pe=>b(o),class:Y(["bg-white w-full flex items-center mb-1 rounded-sm shadow border cursor-pointer transition-colors duration-150 hover:border-sky-800 hover:bg-sky-50",{"border-sky-800 bg-emerald-200":o.uid===r.value?.uid}])},[t("div",ne,[t("div",ie,[t("span",null,l(M(o)),1),t("span",re,l(o.age)+" yrs, "+l(V(o.gender)),1)]),t("div",le,[t("span",null,l(o.patientId),1),t("span",null,l(o.clientPatientId),1)]),t("div",ce,[t("span",null,l(o?.client?.district?.province?.name),1),t("span",null,l(o?.client?.name),1)])])],10,ae))),128))])),[[P]]),S.value?k((a(),u("section",de,[v(c.PatientInfo,{onEditPatient:s[0]||(s[0]=o=>p.value=!0)}),v(c.Tabs,{tabs:N.value,"initial-tab":"samples"},null,8,["tabs"])])),[[P]]):y("",!0)]),p.value?(a(),f(c.Modal,{key:0,onClose:s[1]||(s[1]=o=>p.value=!1),"content-width":"w-3/6"},{header:g(()=>s[3]||(s[3]=[t("h3",null,"Patient Form",-1)])),body:g(()=>[v(c.PatientForm,{patient:r.value,navigate:!1,onClose:B},null,8,["patient"])]),_:1})):y("",!0)])}}});const ge=Z(ue,[["__scopeId","data-v-81af20fc"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/patient/PatientsCompact.vue"]]);export{ge as default};
