const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IIMapper-c9q1G6Nu.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/Document-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{Y as j,u as $,a0 as g,ah as ee,a7 as V,a5 as te,a6 as le,aM as re,a3 as oe,_ as ne,r as y,c as h,o as v,z as x,A as S,C as w,a as t,K as l,M as n,F as L,H as O,I as u,B as ae,aK as C,aL as k,a4 as z}from"./index-OdhKCqIc.js";import{g as se,h as q}from"./instrument.mutations-BxEMyJNC.js";import{u as de,G as ie}from"./setup-BcFG_bXr.js";import{c as me,f as G,a as A,u as ue,F as fe}from"./index.esm-BfHj8iGm.js";import{I as ce}from"./Input-BEm5S0CJ.js";import{F as pe,a as ge,b as ye}from"./FormMessage-CgXFMXx9.js";import{F as ve}from"./FormLabel-DxP9wnWS.js";import{S as Ie,a as be,b as xe,c as _e,d as Fe}from"./SelectValue-Ds0cfAgl.js";import{E as Te,a as Me,b as Se,c as Ce,d as ke}from"./EmptyTitle-aCQRDpx3.js";import{P as Ae}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const Ee=j({__name:"InstrumentInterface",setup(K,{expose:r}){r();const R=te(()=>le(()=>import("./IIMapper-c9q1G6Nu.js"),__vite__mapDeps([0,1,2,3]))),e=de(),{withClientMutation:T,withClientQuery:E}=$();let d=g(!1),_=g(!1),i=g(null),m=g("");const F=g(!0),I=g(null);let f=g([]);const c=g({syncUnits:!1,driverMapping:null}),a=me({laboratoryInstrumentUid:A().required("Laboratory instrument is required"),host:A().nullable(),port:A().nullable(),protocolType:A().nullable(),socketType:A().nullable(),autoReconnect:G().nullable(),isActive:G().nullable()}),{handleSubmit:p,resetForm:P,setValues:B}=ue({validationSchema:a,initialValues:{laboratoryInstrumentUid:"",host:"",port:"",protocolType:"",socketType:"",autoReconnect:!1,isActive:!0}});ee(()=>{e.fetchLaboratoryInstruments(),E(ie,{},"instrumentInterfaces").then(o=>{f.value=o??[]})});const Y=V(()=>e.getInstruments),J=V(()=>e.getLaboratoryInstruments);function D(o){const s={laboratoryInstrumentUid:o.laboratoryInstrumentUid,host:o.host||"",port:o.port||"",protocolType:o.protocolType||"",socketType:o.socketType||"",syncUnits:c.value.syncUnits,driverMapping:c.value.driverMapping,isActive:o.isActive};T(se,{payload:s},"createInstrumentInterface").then(b=>f.value.push(b))}function H(o){if(!I.value)return;const s={laboratoryInstrumentUid:o.laboratoryInstrumentUid,host:o.host||"",port:o.port||"",protocolType:o.protocolType||"",socketType:o.socketType||"",syncUnits:c.value.syncUnits,driverMapping:c.value.driverMapping,isActive:o.isActive};T(q,{uid:I.value,payload:s},"updateInstrumentInterface").then(b=>{const M=f.value.findIndex(U=>U.uid===b.uid);M!==-1&&(f.value[M]=b)})}function Q(o,s={}){F.value=o,d.value=!0,m.value=(o?"CREATE":"EDIT")+" INSTRUMENT INTERFACE",o?(I.value=null,c.value={syncUnits:!1,driverMapping:null},P({values:{laboratoryInstrumentUid:"",host:"",port:"",protocolType:"",socketType:"",autoReconnect:!1,isActive:!0}})):(I.value=s.uid??null,c.value={syncUnits:s.syncUnits??!1,driverMapping:s.driverMapping??null},B({laboratoryInstrumentUid:s.laboratoryInstrumentUid??"",host:s.host??"",port:s.port??"",protocolType:s.protocolType??"",socketType:s.socketType??"",autoReconnect:s.autoReconnect??!1,isActive:s.isActive??!0}))}const W=p(o=>{F.value===!0&&D(o),F.value===!1&&H(o),d.value=!1});function X(o){i.value=o,_.value=!0}function Z(o){if(!i.value)return;const s={laboratoryInstrumentUid:i.value.laboratoryInstrumentUid,host:i.value.host||"",port:i.value.port||"",protocolType:i.value.protocolType||"",socketType:i.value.socketType||"",syncUnits:i.value.syncUnits,driverMapping:JSON.stringify(o),isActive:i.value.isActive};T(q,{uid:i.value.uid,payload:s},"updateInstrumentInterface").then(b=>{const M=f.value.findIndex(U=>U.uid===b.uid);M!==-1&&(f.value[M]=b)})}const N={IIMapper:R,setupStore:e,withClientMutation:T,withClientQuery:E,get showModal(){return d},set showModal(o){d=o},get showMapperModal(){return _},set showMapperModal(o){_=o},get selectedInterfaceForMapping(){return i},set selectedInterfaceForMapping(o){i=o},get formTitle(){return m},set formTitle(o){m=o},formAction:F,currentUid:I,get instrumentInterfaces(){return f},set instrumentInterfaces(o){f=o},interfaceExtras:c,formSchema:a,handleSubmit:p,resetForm:P,setValues:B,instruments:Y,laboratoryInstruments:J,addInstrumentInterface:D,editInstrumentInterface:H,FormManager:Q,saveForm:W,mapDriver:X,onMapperSave:Z,get Button(){return oe},get Checkbox(){return re},get Input(){return ce},get FormControl(){return ye},get FormField(){return fe},get FormItem(){return ge},get FormLabel(){return ve},get FormMessage(){return pe},get Select(){return Fe},get SelectContent(){return _e},get SelectItem(){return xe},get SelectTrigger(){return be},get SelectValue(){return Ie},get Empty(){return ke},get EmptyContent(){return Ce},get EmptyDescription(){return Se},get EmptyHeader(){return Me},get EmptyTitle(){return Te},PageHeading:Ae};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Ue={class:"space-y-6"},he={class:"border border-border bg-card rounded-lg shadow-md"},we={class:"relative w-full overflow-auto"},Le={class:"text-lg font-semibold text-foreground"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={class:"flex justify-end"};function Be(K,r,R,e,T,E){const d=y("TableHead"),_=y("TableRow"),i=y("TableHeader"),m=y("TableCell"),F=y("TableEmpty"),I=y("TableBody"),f=y("Table"),c=y("Modal");return v(),h(L,null,[x("div",Ue,[t(e.PageHeading,{title:"Instrument Interfaces"},{default:l(()=>[t(e.Button,{onClick:r[0]||(r[0]=a=>e.FormManager(!0))},{default:l(()=>[...r[4]||(r[4]=[n("Add Instrument Interface",-1)])]),_:1})]),_:1}),x("div",he,[x("div",we,[t(f,{class:"w-full caption-bottom text-sm"},{default:l(()=>[t(i,{class:"[&_tr]:border-b"},{default:l(()=>[t(_,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[5]||(r[5]=[n("Laboratory Instrument",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[6]||(r[6]=[n("TCPIP",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[7]||(r[7]=[n("Protocol",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[8]||(r[8]=[n("Socket Type",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[9]||(r[9]=[n("Auto Reconnect",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[10]||(r[10]=[n("Sync Units",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[11]||(r[11]=[n("Mapped",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[12]||(r[12]=[n("Active",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:l(()=>[...r[13]||(r[13]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(I,{class:"[&_tr:last-child]:border-0"},{default:l(()=>[(v(!0),h(L,null,O(e.instrumentInterfaces,a=>(v(),S(_,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(m,{class:"px-4 py-3 align-middle text-sm"},{default:l(()=>[n(u(a?.laboratoryInstrument?.labName),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm"},{default:l(()=>[n(u(a?.host)+":"+u(a?.port),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.protocolType),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.socketType),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.autoReconnect),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.syncUnits),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.driverMapping?"Yes":"No"),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:l(()=>[n(u(a?.isActive),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-right text-sm"},{default:l(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:p=>e.FormManager(!1,a)},{default:l(()=>[...r[14]||(r[14]=[n(" Edit ",-1)])]),_:1},8,["onClick"]),t(e.Button,{variant:"outline",size:"sm",class:"ml-2",onClick:p=>e.mapDriver(a)},{default:l(()=>[...r[15]||(r[15]=[n(" Mapper ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e.instrumentInterfaces||e.instrumentInterfaces.length===0?(v(),S(F,{key:0,colspan:9},{default:l(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:l(()=>[t(e.EmptyContent,null,{default:l(()=>[t(e.EmptyHeader,null,{default:l(()=>[t(e.EmptyTitle,null,{default:l(()=>[...r[16]||(r[16]=[n("No instrument interfaces found",-1)])]),_:1}),t(e.EmptyDescription,null,{default:l(()=>[...r[17]||(r[17]=[n("Add an interface to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})])])]),e.showModal?(v(),S(c,{key:0,onClose:r[2]||(r[2]=a=>e.showModal=!1)},{header:l(()=>[x("h3",Le,u(e.formTitle),1)]),body:l(()=>[x("form",{onSubmit:r[1]||(r[1]=ae((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-6"},[x("div",Re,[t(e.FormField,{name:"laboratoryInstrumentUid"},{default:l(({componentField:a})=>[t(e.FormItem,{class:"col-span-1 md:col-span-2"},{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...r[18]||(r[18]=[n("Instrument",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,C(k(a)),{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select Laboratory Instrument"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[(v(!0),h(L,null,O(e.laboratoryInstruments,p=>(v(),S(e.SelectItem,{key:p?.uid,value:p.uid},{default:l(()=>[n(u(p?.labName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"host"},{default:l(({componentField:a})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...r[19]||(r[19]=[n("Host",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,z(a,{placeholder:"Host Adress..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"port"},{default:l(({componentField:a})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...r[20]||(r[20]=[n("Port",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,z(a,{placeholder:"Port Number..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"protocolType"},{default:l(({componentField:a})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...r[21]||(r[21]=[n("Protocol Type",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,C(k(a)),{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select protocol"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:"hl7"},{default:l(()=>[...r[22]||(r[22]=[n("HL7",-1)])]),_:1}),t(e.SelectItem,{value:"astm"},{default:l(()=>[...r[23]||(r[23]=[n("ASTM",-1)])]),_:1})]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"socketType"},{default:l(({componentField:a})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...r[24]||(r[24]=[n("Socket Type",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,C(k(a)),{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select socket type"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:"server"},{default:l(()=>[...r[25]||(r[25]=[n("Server",-1)])]),_:1}),t(e.SelectItem,{value:"client"},{default:l(()=>[...r[26]||(r[26]=[n("Client",-1)])]),_:1})]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"autoReconnect",type:"checkbox","checked-value":!0,"unchecked-value":!1},{default:l(({componentField:a})=>[t(e.FormItem,{class:"flex items-center space-x-2"},{default:l(()=>[t(e.FormControl,null,{default:l(()=>[t(e.Checkbox,C(k(a)),null,16)]),_:2},1024),t(e.FormLabel,null,{default:l(()=>[...r[27]||(r[27]=[n("Auto Reconnect",-1)])]),_:1}),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"isActive",type:"checkbox","checked-value":!0,"unchecked-value":!1},{default:l(({componentField:a})=>[t(e.FormItem,{class:"flex items-center space-x-2"},{default:l(()=>[t(e.FormControl,null,{default:l(()=>[t(e.Checkbox,C(k(a)),null,16)]),_:2},1024),t(e.FormLabel,null,{default:l(()=>[...r[28]||(r[28]=[n("Is Active",-1)])]),_:1}),t(e.FormMessage)]),_:2},1024)]),_:1})]),x("div",Pe,[t(e.Button,{type:"submit"},{default:l(()=>[...r[29]||(r[29]=[n("Save Changes",-1)])]),_:1})])],32)]),_:1})):w("",!0),e.showMapperModal?(v(),S(e.IIMapper,{key:1,isOpen:e.showMapperModal,instrumentInterface:e.selectedInterfaceForMapping,onClose:r[3]||(r[3]=a=>{e.showMapperModal=!1,e.selectedInterfaceForMapping=null}),onSave:e.onMapperSave},null,8,["isOpen","instrumentInterface"])):w("",!0)],64)}const je=ne(Ee,[["render",Be],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/InstrumentInterface.vue"]]);export{je as default};
