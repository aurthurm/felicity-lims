const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css"])))=>i.map(i=>d[i]);
import{a0 as N,f as R,ac as P,u as V,h as Y,ad as T,a7 as B,a1 as j,a6 as L,aQ as U,_ as F,aa as K,c as u,o as i,A as e,F as b,D as v,J as _,K as A,L as p,a9 as O,C as I,N as D,P as J}from"./index-DApeomWQ.js";import{u as Q}from"./analysis-BTUsl5OO.js";import{w as q,x as z}from"./analyses.mutations-Bu696l9I.js";const G=N({__name:"ManageAnalyses",emits:["changeTab"],setup(M,{expose:t,emit:C}){t();const n=j(()=>L(()=>import("./index-DApeomWQ.js").then(s=>s.co),__vite__mapDeps([0,1]))),{withClientMutation:y}=R(),m=P(),d=Q(),o=V(),h=Y(()=>d.getAnalysesServices);T(()=>{d.fetchAnalysesTemplates(),d.fetchAnalysesServices({})});const l=C,f=s=>{l("changeTab",s)},w=B(),E=async()=>{try{U.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"hsl(var(--primary))",cancelButtonColor:"hsl(var(--destructive))",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(s=>{s.isConfirmed&&y(q,{uid:m.params.sampleUid,analysisTemplateUid:w.value},"samplesApplyTemplate").then(a=>f("analysis-results"))})}catch{}},r=B([]);T(()=>{r.value=[...o.analysisResults?.map(s=>s.analysisUid)]});const x=s=>{r.value.includes(s)?r.value=r.value.filter(a=>a!==s):r.value=[...r.value,s]},g=s=>r.value.includes(s),S={accordion:n,withClientMutation:y,route:m,analysisStore:d,sampleStore:o,analysesServices:h,emit:l,changeTab:f,templateUid:w,applyTemplate:E,selectedAnalyses:r,selectAnalysis:x,isSelectedAnalysis:g,isSelectedCategory:s=>s.every(a=>g(a.uid)),selectCategory:s=>{s.every(a=>g(a.uid))?s.forEach(a=>x(a.uid)):s.forEach(a=>{g(a.uid)||x(a.uid)})},applyChanges:async()=>{const s=o.analysisResults?.filter(c=>!r.value.includes(c.analysisUid)).map(c=>c.uid),a=r.value.filter(c=>!o.analysisResults?.map(k=>k.analysisUid).includes(c));try{U.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"hsl(var(--primary))",cancelButtonColor:"hsl(var(--destructive))",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(c=>{c.isConfirmed&&y(z,{sampleUid:m.params.sampleUid,payload:{cancel:s,add:a}},"manageAnalyses").then(k=>f("analysis-results"))})}catch{}}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),H={class:"space-y-6"},W={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},X={class:"flex items-center space-x-4"},Z=["value"],$={class:"space-y-4"},ee={class:"flex items-center justify-between"},te={class:"text-lg font-semibold text-foreground"},se={class:"max-h-[540px] overflow-y-auto rounded-md border border-border"},oe={class:"w-full"},ne={class:"overflow-x-auto"},ae={class:"w-full fel-table"},le={class:"border-b border-border bg-muted/50"},re={class:"px-4 py-2 text-left"},ie=["checked","onChange"],de={class:"px-4 py-2"},ce=["checked","onChange"],ue={class:"px-4 py-2 text-sm text-foreground"},pe={class:"px-4 py-2 text-sm text-muted-foreground"},ye={class:"px-4 py-2 text-sm text-muted-foreground"},me={class:"flex justify-end pt-4"};function fe(M,t,C,n,y,m){const d=K("motion-slide-right");return i(),u("div",H,[e("section",W,[b((i(),u("form",{onSubmit:t[2]||(t[2]=v(()=>{},["prevent"])),class:"space-y-4"},[e("div",X,[t[5]||(t[5]=e("span",{class:"text-sm font-medium text-foreground"},"Analyses Template (Auto)",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.templateUid=o),class:"w-64 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[t[4]||(t[4]=e("option",null,null,-1)),(i(!0),u(_,null,A(n.analysisStore.analysesTemplates,o=>(i(),u("option",{key:o.uid,value:o.uid},p(o.name),9,Z))),128))],512),[[O,n.templateUid]]),e("button",{type:"button",onClick:t[1]||(t[1]=v(o=>n.applyTemplate(),["prevent"])),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Template ")])],32)),[[d]]),t[10]||(t[10]=e("div",{class:"border-t border-border"},null,-1)),e("div",$,[e("div",ee,[e("h3",te," Manually Modify Analyses: ("+p(n.selectedAnalyses?.length)+") ",1)]),t[9]||(t[9]=e("div",{class:"border-t border-border"},null,-1)),e("div",se,[e("div",oe,[(i(!0),u(_,null,A(n.analysesServices,(o,h)=>(i(),I(n.accordion,{key:h},{title:D(()=>[J(p(o[0]),1)]),body:D(()=>[e("div",ne,[e("table",ae,[e("thead",null,[e("tr",le,[e("th",re,[e("input",{type:"checkbox",checked:n.isSelectedCategory(o[1]),onChange:l=>n.selectCategory(o[1]),class:"rounded border-input"},null,40,ie)]),t[6]||(t[6]=e("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Analysis",-1)),t[7]||(t[7]=e("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Keyword",-1)),t[8]||(t[8]=e("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Description",-1))])]),e("tbody",null,[(i(!0),u(_,null,A(o[1],l=>b((i(),u("tr",{key:l?.uid,class:"border-b border-border hover:bg-muted/50 transition-colors duration-200"},[e("td",de,[e("input",{type:"checkbox",checked:n.isSelectedAnalysis(l?.uid),onChange:f=>n.selectAnalysis(l?.uid),class:"rounded border-input"},null,40,ce)]),e("td",ue,p(l?.name),1),e("td",pe,p(l?.keyword),1),e("td",ye,p(l?.description),1)])),[[d]])),128))])])])]),_:2},1024))),128))])]),e("div",me,[e("button",{type:"button",onClick:t[3]||(t[3]=v(o=>n.applyChanges(),["prevent"])),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Changes ")])])])])}const Ae=F(G,[["render",fe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{Ae as default};
