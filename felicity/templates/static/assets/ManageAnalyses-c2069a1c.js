import{d as Y,I as $,J as j,R as F,p as I,q as x,r as v,x as J,o as l,c as i,b as e,e as _,F as p,C as b,t as c,f as k,ad as K,w as A,z as L,A as C,B as P,j as q,_ as z,S as T,k as O}from"./index-06e172a4.js";import{u as G}from"./analysis-69e84d8d.js";import{J as H,K as Q}from"./analyses.mutations-fb5a044f.js";const W=e("hr",null,null,-1),X={action:"post",class:"mt-4"},Z={class:"flex justify-start items-center mr-4"},ee=e("span",{class:"text-gray-700"},"Analyses Template (Auto)",-1),te={class:"block mx-4"},se=e("option",null,null,-1),oe=["value"],ne=e("hr",{class:"mt-4 mb-2"},null,-1),ae={class:"font-bold"},le=e("hr",{class:"mb-4 mt-2"},null,-1),re={class:"col-span-2 overflow-y-scroll overscroll-contain max-h-[540px] bg-white"},ie={class:"w-full"},ce={class:"min-w-full"},de={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},ue=["checked","onChange"],pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Analysis",-1),ye=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Keyword",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Description",-1),me={class:"bg-white"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},be=["checked","onChange"],fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},ge={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},xe=e("hr",null,null,-1),ve=Y({__name:"ManageAnalyses",emits:["changeTab"],setup(ke,{emit:S}){const B=q(()=>z(()=>import("./FelAccordion-69ab58bd.js"),["assets/FelAccordion-69ab58bd.js","assets/index-06e172a4.js","assets/index-3e01f4af.css"])),{withClientMutation:f}=$(),g=j(),d=G(),y=F(),M=I(()=>d.getAnalysesServices);x(()=>{d.fetchAnalysesTemplates(),d.fetchAnalysesServices({})});const U=S,w=t=>{U("changeTab",t)},h=v(),D=async()=>{try{T.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(t=>{t.isConfirmed&&f(H,{uid:g.params.sampleUid,analysisTemplateUid:h.value},"samplesApplyTemplate").then(s=>w("analysis-results"))})}catch{}},a=v([]);x(()=>{a.value=[...y.analysisResults?.map(t=>t.analysisUid)]});const m=t=>{a.value.includes(t)?a.value=a.value.filter(s=>s!==t):a.value=[...a.value,t]},u=t=>a.value.includes(t),E=t=>t.every(s=>u(s.uid)),R=t=>{t.every(s=>u(s.uid))?t.forEach(s=>m(s.uid)):t.forEach(s=>{u(s.uid)||m(s.uid)})},N=async()=>{const t=y.analysisResults?.filter(n=>!a.value.includes(n.analysisUid)).map(n=>n.uid),s=a.value.filter(n=>!y.analysisResults?.map(o=>o.analysisUid).includes(n));try{T.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(n=>{n.isConfirmed&&f(Q,{sampleUid:g.params.sampleUid,payload:{cancel:t,add:s}},"manageAnalyses").then(o=>w("analysis-results"))})}catch{}};return(t,s)=>{const n=J("motion-slide-right");return l(),i(p,null,[e("section",null,[W,_((l(),i("form",X,[e("div",Z,[ee,e("label",te,[_(e("select",{class:"form-select block w-full py-1","onUpdate:modelValue":s[0]||(s[0]=o=>h.value=o)},[se,(l(!0),i(p,null,b(k(d).analysesTemplates,o=>(l(),i("option",{key:o.uid,value:o.uid},c(o.name),9,oe))),128))],512),[[K,h.value]])]),e("button",{type:"button",onClick:s[1]||(s[1]=A(o=>D(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ")])])),[[n]])]),ne,e("h3",ae,"Manually Modify Analyses: ("+c(a.value?.length)+")",1),le,e("section",re,[e("div",ie,[(l(!0),i(p,null,b(M.value,(o,V)=>(l(),L(k(B),{key:V},{title:C(()=>[P(c(o[0]),1)]),body:C(()=>[e("table",ce,[e("thead",null,[e("tr",null,[e("th",de,[e("input",{type:"checkbox",class:"",checked:E(o[1]),onChange:r=>R(o[1])},null,40,ue)]),pe,ye,he])]),e("tbody",me,[(l(!0),i(p,null,b(o[1],r=>_((l(),i("tr",{key:r?.uid},[e("td",_e,[e("input",{type:"checkbox",class:"border-red-500",checked:u(r?.uid),onChange:Ae=>m(r?.uid)},null,40,be)]),e("td",fe,c(r?.name),1),e("td",ge,c(r?.keyword),1),e("td",we,c(r?.description),1)])),[[n]])),128))])])]),_:2},1024))),128)),xe,e("button",{type:"button",onClick:s[2]||(s[2]=A(o=>N(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Changes ")])])],64)}}}),Be=O(ve,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{Be as default};
