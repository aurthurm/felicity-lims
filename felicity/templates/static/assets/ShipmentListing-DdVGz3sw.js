const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelDataTable-CqqGlMhZ.js","assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css"])))=>i.map(i=>d[i]);
import{a0 as K,f as Q,aq as G,ac as W,a7 as p,g as X,h as Y,a1 as Z,a6 as $,a8 as d,ar as ee,_ as te,r as w,c as u,o as r,A as o,C as oe,E as U,a as g,N as i,P as _,L as S,Q as se,F as c,a3 as ne,J as C,K as N,a9 as ae,a2 as k,D as ie}from"./index-DApeomWQ.js";import{u as re,a as le}from"./shipment-B4LcXKYu.js";import{c as de,d as B,a as D,u as ue,b as v}from"./index.esm-Cx9agkcQ.js";const ce=K({__name:"ShipmentListing",setup(T,{expose:t}){t();const M=Z(()=>$(()=>import("./FelDataTable-CqqGlMhZ.js"),__vite__mapDeps([0,1,2]))),e=re(),{withClientMutation:h}=Q(),{shipments:y,fetchingShipments:m,shipmentPageInfo:f}=G(e),x=W();let s=p(!1);const l=p(!1),A=p([{name:"All",value:""},{name:"Due",value:"due"},{name:"Awaiting",value:"awaiting"},{name:"Failed",value:"failed"}]),V=p([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Shipment Id",value:"shipmentId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(n,b){return d(ee,{to:{name:"shipment-detail",params:{shipmentUid:n?.uid}},innerHTML:n?.shipmentId})}},{name:"External Laboratory",value:"laboratory.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Courier",value:"courier",sortable:!1,sortBy:"asc",hidden:!1},{name:"Flow Detail",value:"",sortable:!1,sortBy:"asc",hidden:!1},{name:"Assigned Count",value:"assignedCount",sortable:!1,sortBy:"asc",hidden:!1},{name:"Current Status",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(n,b){return d("button",{type:"button",class:"bg-primary text-primary-foreground py-1 px-2 rounded-sm leading-none",innerHTML:n?.state||"unknown"})}},{name:"",value:"",sortable:!1,showInToggler:!1,hidden:!1,customRender:function(n,b){return n.incoming?d("span",{class:"text-success"},d("i",{class:"fa fa-reply-all"})):d("span",{class:"text-destructive"},d("i",{class:"fa fa-share-from-square"}))}}]);e.removeShipment();let a=X({first:25,before:"",incoming:l.value,status:"",text:"",sort:["-uid"],filterAction:!1});e.fetchShipments(a),e.fetchReferralLaboratories();const I=de({laboratoryUid:B().required("Laboratory is Required").typeError("Laboratory is Required"),comment:D().nullable(),courier:D().required("Courier is required"),count:B()}),{handleSubmit:L,errors:R}=ue({validationSchema:I,initialValues:{laboratoryUid:void 0,comment:"",courier:"",count:1}}),{value:F}=v("laboratoryUid"),{value:q}=v("comment"),{value:E}=v("courier"),{value:O}=v("count"),H=L(n=>{s.value=!1,h(le,{payload:n},"createShipment").then(b=>{e.addShipment(b),s.value=!1})});function j(n){a.first=n.fetchCount,a.before=f?.value?.endCursor??"",a.text=n.filterText,a.status=n.filterStatus,a.incoming=l.value,a.filterAction=!1,e.fetcShipments(a)}function z(n){a.first=25,a.before="",a.text=n.filterText,a.status=n.filterStatus,a.incoming=l.value,a.filterAction=!0,e.clearShipment(),e.fetcShipments(a)}const J=Y(()=>y?.value?.length+" of "+e.getShipmentCount+" Shipments"),P={DataTable:M,shipmentStore:e,withClientMutation:h,shipments:y,fetchingShipments:m,shipmentPageInfo:f,route:x,get showModal(){return s},set showModal(n){s=n},viewIncoming:l,filterOptions:A,tableColumns:V,get shipmentParams(){return a},set shipmentParams(n){a=n},shipmentSchema:I,handleSubmit:L,errors:R,laboratoryUid:F,comment:q,courier:E,count:O,saveForm:H,showMoreShipments:j,searchShipments:z,countNone:J};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),me={class:"space-y-6"},fe={class:"flex items-center space-x-4 mb-4"},be={class:"bg-card rounded-lg shadow-sm p-6"},pe={class:"flex"},ge={key:0,class:"bg-destructive/10 text-destructive p-4 rounded-md mb-4"},ve={class:"list-disc list-inside space-y-1"},he={action:"post",class:"space-y-6"},ye={class:"grid grid-cols-3 gap-6"},xe={class:"col-span-1"},we={class:"block space-y-1.5"},_e=["value"],Se={class:"col-span-1"},Ce={class:"block space-y-1.5"},ke={class:"col-span-1"},Me={class:"block space-y-1.5"},Ie={class:"block space-y-1.5"},Le={class:"border-t border-border pt-4"};function Pe(T,t,M,e,h,y){const m=w("fel-button"),f=w("fel-heading"),x=w("fel-modal");return r(),u(C,null,[o("div",me,[g(f,{title:"Shipments"},{default:i(()=>[g(m,{onClick:t[0]||(t[0]=s=>e.showModal=!0)},{default:i(()=>[...t[9]||(t[9]=[_("Create New",-1)])]),_:1})]),_:1}),o("div",fe,[g(m,{onClick:t[1]||(t[1]=s=>e.viewIncoming=!e.viewIncoming),class:se([e.viewIncoming?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"]),"aria-pressed":e.viewIncoming},{default:i(()=>[_(S(e.viewIncoming?"Incoming":"Outgoing"),1)]),_:1},8,["class","aria-pressed"])]),o("div",be,[g(e.DataTable,{columns:e.tableColumns,data:e.shipments,toggleColumns:!0,loading:e.fetchingShipments,paginable:!0,pageMeta:{fetchCount:e.shipmentParams.first,hasNextPage:e.shipmentPageInfo?.hasNextPage,countNone:e.countNone},searchable:!0,filterable:!0,filterMeta:{defaultFilter:e.shipmentParams.status,filters:e.filterOptions},onOnSearch:e.searchShipments,onOnPaginate:e.showMoreShipments,selectable:!1},{"pre-filter":i(()=>[o("label",pe,[c(o("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>e.viewIncoming=s)},null,512),[[ne,e.viewIncoming]]),t[10]||(t[10]=_()),t[11]||(t[11]=o("span",{class:"mx-2"},"InBound",-1))])]),footer:i(()=>[...t[12]||(t[12]=[])]),_:1},8,["columns","data","loading","pageMeta","filterMeta"])])]),e.showModal?(r(),oe(x,{key:0,onClose:t[8]||(t[8]=s=>e.showModal=!1)},{header:i(()=>[...t[13]||(t[13]=[o("h3",{class:"text-lg font-medium leading-6 text-foreground"},"Create New Shipment",-1)])]),validation:i(()=>[e.errors.length?(r(),u("div",ge,[o("ul",ve,[(r(!0),u(C,null,N(e.errors,(s,l)=>(r(),u("li",{key:l,class:"text-sm"},S(s),1))),128))])])):U("",!0)]),body:i(()=>[o("form",he,[o("div",ye,[o("div",xe,[o("label",we,[t[14]||(t[14]=o("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"External Laboratory",-1)),c(o("select",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[3]||(t[3]=s=>e.laboratoryUid=s)},[(r(!0),u(C,null,N(e.shipmentStore.laboratories,s=>(r(),u("option",{key:s.uid,value:s.uid},S(s.name),9,_e))),128))],512),[[ae,e.laboratoryUid]])])]),o("div",Se,[o("label",Ce,[t[15]||(t[15]=o("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Courier",-1)),c(o("input",{type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[4]||(t[4]=s=>e.courier=s)},null,512),[[k,e.courier]])])]),o("div",ke,[o("label",Me,[t[16]||(t[16]=o("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"How Many",-1)),c(o("input",{type:"number",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[5]||(t[5]=s=>e.count=s),min:"1",default:"1"},null,512),[[k,e.count]])])])]),o("div",null,[o("label",Ie,[t[17]||(t[17]=o("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Comment",-1)),c(o("textarea",{class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",rows:"2",placeholder:"Notes ...","onUpdate:modelValue":t[6]||(t[6]=s=>e.comment=s)},null,512),[[k,e.comment]])])]),o("div",Le,[o("button",{type:"button",onClick:t[7]||(t[7]=ie(s=>e.saveForm(),["prevent"])),class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4"}," Create Shipment ")])])]),_:1})):U("",!0)],64)}const De=te(ce,[["render",Pe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/shipment/ShipmentListing.vue"]]);export{De as default};
