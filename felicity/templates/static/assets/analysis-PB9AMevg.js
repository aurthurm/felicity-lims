import{d as c,u,j as f,k as d,l as o,m as h,n as y,p as A,q as g,s as m,t as p,v as S,x as C}from"./index-OdhKCqIc.js";const{withClientQuery:n}=u();function a(s,i){const e=s.findIndex(t=>t.uid===i.uid);e!==-1&&(s[e]=i)}const L=c("analysis",{state:()=>({codingStandards:[],fetchingCodingStandards:!1,analysesCategories:[],analysesServices:[],analysesMappings:[],analysesProfiles:[],analysesTemplates:[],profileMappings:[],qcLevels:[],qcTemplates:[],rejectionReasons:[]}),getters:{getCodingStandards:s=>s.codingStandards,getAnalysesCategories:s=>s.analysesCategories,getAnalysesServices:s=>{const i=s.analysesServices;if(i?.length>0){const e=i?.reduce((t,l)=>{const r=l?.category?.name||"No Category";return t[r]=t[r]||[],t[r].push(l),t},{});return Object.entries(e||{}).sort()}else return[]},getAnalysesServicesSimple:s=>s.analysesServices,analysesMapings:s=>s.analysesMappings,getAnalysesProfiles:s=>s.analysesProfiles,getAnalysesTemplates:s=>s.analysesTemplates,profileMapings:s=>s.profileMappings,getQCLevels:s=>s.qcLevels,getQCTemplates:s=>s.qcTemplates,getRejectionReasons:s=>s.rejectionReasons},actions:{async fetchCodingStandards(){try{this.fetchingCodingStandards=!0;const s=await n(C,{},"codingStandardAll");s&&Array.isArray(s)&&(this.codingStandards=s)}catch{}finally{this.fetchingCodingStandards=!1}},updateCodingStandard(s){s?.uid&&a(this.codingStandards,s)},addCodingStandard(s){s?.uid&&this.codingStandards?.unshift(s)},async fetchAnalysesCategories(){try{const s=await n(S,{},"analysisCategoryAll");s&&Array.isArray(s)&&(this.analysesCategories=s)}catch{}},updateAnalysisCategory(s){s?.uid&&a(this.analysesCategories,s)},addAnalysisCategory(s){s?.uid&&this.analysesCategories?.unshift(s)},async fetchAnalysesServices(s){try{const i=await n(p,s,"analysisAll");i&&typeof i=="object"&&"items"in i&&(this.analysesServices=i.items||[])}catch{}},updateAnalysisService(s){s?.uid&&a(this.analysesServices,s)},addAnalysesService(s){s?.uid&&this.analysesServices?.unshift(s)},async fetchAnalysesProfilesAndServices(){try{const s=await n(m,{},void 0);if(s&&typeof s=="object"&&("profileAll"in s&&(this.analysesProfiles=s.profileAll),"analysisAll"in s)){const i=s.analysisAll;this.analysesServices=i?.items}}catch{}},async fetchAnalysesMappings(s){if(s)try{const i=await n(g,{uid:s},"analysisMappingsByAnalysis");i&&Array.isArray(i)&&(this.analysesMappings=i)}catch{}},addAnalysesMapping(s){s?.uid&&this.analysesMappings?.unshift(s)},updateAnalysesMapping(s){s?.uid&&a(this.analysesMappings,s)},async fetchAnalysesProfiles(){try{const s=await n(A,{},"profileAll");s&&Array.isArray(s)&&(this.analysesProfiles=s)}catch{}},updateAnalysesProfile(s){s?.uid&&a(this.analysesProfiles,s)},addAnalysisProfile(s){s?.uid&&this.analysesProfiles.unshift(s)},async fetchProfileMappings(s){if(s)try{const i=await n(y,{uid:s},"profileMappingsByProfile");i&&Array.isArray(i)&&(this.profileMappings=i)}catch{}},addProfileMapping(s){s?.uid&&this.profileMappings?.unshift(s)},updateProfileMapping(s){s?.uid&&a(this.profileMappings,s)},async fetchAnalysesTemplates(){try{const s=await n(h,{},"analysisTemplateAll");s&&Array.isArray(s)&&(this.analysesTemplates=s)}catch{}},updateAnalysesTemplate(s){s?.uid&&a(this.analysesTemplates,s)},addAnalysisTemplate(s){s?.uid&&this.analysesTemplates.unshift(s)},async fetchQCLevels(){try{const s=await n(o,{},"qcLevelAll");s&&Array.isArray(s)&&(this.qcLevels=s)}catch{}},updateQcLevel(s){s?.uid&&a(this.qcLevels,s)},addQcLevel(s){s?.uid&&this.qcLevels.unshift(s)},async fetchQCTemplates(){try{const s=await n(d,{},"qcTemplateAll");s&&Array.isArray(s)&&(this.qcTemplates=s.map(i=>(i.qcLevels=i?.qcLevels||[],i.departments=i?.departments||[],i)))}catch{}},updateQcTemplate(s){if(!s?.uid)return;const i=this.qcTemplates.findIndex(e=>e.uid===s.uid);i>-1&&(s.qcLevels=s?.qcLevels||[],s.departments=s?.departments||[],this.qcTemplates[i]=s)},addQcTemplate(s){s?.uid&&(s.qcLevels=s?.qcLevels||[],s.departments=s?.departments||[],this.qcTemplates.unshift(s))},addResultOption(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.resultOptions?i.resultOptions.push(s):i.resultOptions=[s])})},updateResultOption(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.resultOptions?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.resultOptions&&(i.resultOptions[e]=s)}})},addAnalysisInterim(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.interims?i.interims.push(s):i.interims=[s])})},updateAnalysisInterim(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.interims?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.interims&&(i.interims[e]=s)}})},addAnalysisCorrectionFactor(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.correctionFactors?i.correctionFactors.push(s):i.correctionFactors=[s])})},updateAnalysisCorrectionFactor(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.correctionFactors?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.correctionFactors&&(i.correctionFactors[e]=s)}})},addAnalysisDetectionLimit(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.detectionLimits?i.detectionLimits.push(s):i.detectionLimits=[s])})},updateAnalysisDetectionLimit(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.detectionLimits?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.detectionLimits&&(i.detectionLimits[e]=s)}})},addAnalysisUncertainty(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.uncertainties?i.uncertainties.push(s):i.uncertainties=[s])})},updateAnalysisUncertainty(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.uncertainties?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.uncertainties&&(i.uncertainties[e]=s)}})},addAnalysisSpecification(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{i?.uid===s?.analysisUid&&(i?.specifications?i.specifications.push(s):i.specifications=[s])})},updateAnalysisSpecification(s){!s?.uid||!s?.analysisUid||this.analysesServices?.forEach(i=>{if(i?.uid===s?.analysisUid){const e=i.specifications?.findIndex(t=>t.uid===s.uid);e!==void 0&&e>-1&&i.specifications&&(i.specifications[e]=s)}})},async fetchRejectionReasons(){try{const s=await n(f,{},"rejectionReasonsAll");s&&Array.isArray(s)&&(this.rejectionReasons=s)}catch{}},updateRejectionReason(s){s?.uid&&a(this.rejectionReasons,s)},addRejectionReason(s){s?.uid&&this.rejectionReasons.unshift(s)}}});export{L as u};
