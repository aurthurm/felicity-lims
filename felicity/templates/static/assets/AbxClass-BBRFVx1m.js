const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as G,u as L,a0 as x,ah as O,a5 as z,a6 as K,a3 as Q,_ as Y,r,c as E,o as u,z as o,A as k,C as T,a,K as l,M as f,F as B,H as J,I as _,B as W,D as X,al as Z}from"./index-OdhKCqIc.js";import{c as N,a as j,u as $,b as S}from"./index.esm-BfHj8iGm.js";import{t as ee,r as te,H as le,I as ae}from"./microbiology.mutations-cVAbKt4K.js";import{E as se,a as oe,b as ne,c as re,d as ie}from"./EmptyTitle-aCQRDpx3.js";import{P as de}from"./PageHeading-Czi_4opS.js";const me=G({__name:"AbxClass",setup(I,{expose:e}){e();const D=z(()=>K(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),{withClientMutation:t,withClientQuery:v}=L();let g=x(!1),i=x("");const d=x(!0),m=x(null),c=N({name:j().trim().required("Name is required"),phylum:N().required("Phylum is required")}),{handleSubmit:h,resetForm:C,setValues:w,errors:A}=$({validationSchema:c,initialValues:{name:"",phylum:null}}),{value:n}=S("name"),{value:P}=S("phylum"),p=x([]),V=x([]);O(()=>{v(ee,{},"abxClassAll").then(s=>{s&&(p.value=s)}),v(te,{},"abxPhylumAll").then(s=>{s&&(V.value=s)})});function U(s,b={}){d.value=s,g.value=!0,i.value=(s?"Create":"Edit")+" Class",s?(m.value=null,C()):(m.value=b.uid??null,w({name:b.name??"",phylum:b.phylum??null}))}const q=h(s=>{const b={name:s.name,phylumUid:s.phylum?.uid};d.value===!0&&t(le,{payload:b},"createAbxClass").then(y=>{y&&p.value.unshift(y)}),d.value===!1&&m.value&&t(ae,{uid:m.value,payload:b},"updateAbxClass").then(y=>{if(y){const H=p.value.findIndex(M=>M.uid==y.uid);H>-1&&(p.value=[...p.value.map((M,R)=>R===H?y:M)])}}),g.value=!1}),F={VueMultiselect:D,withClientMutation:t,withClientQuery:v,get showModal(){return g},set showModal(s){g=s},get formTitle(){return i},set formTitle(s){i=s},formAction:d,currentUid:m,classSchema:c,handleSubmit:h,resetForm:C,setValues:w,errors:A,name:n,phylum:P,abxClasss:p,abxPhylums:V,FormManager:U,saveForm:q,get Button(){return Q},get Empty(){return ie},get EmptyContent(){return re},get EmptyDescription(){return ne},get EmptyHeader(){return oe},get EmptyTitle(){return se},PageHeading:de};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),ue={class:"space-y-6"},fe={class:"border border-border bg-card rounded-lg shadow-md"},ce={class:"relative w-full overflow-auto"},pe=["onClick"],be={class:"text-xl font-semibold text-foreground"},ye={class:"grid grid-cols-2 gap-4"},xe={class:"block"},ge={key:0,class:"text-sm text-destructive"},_e={class:"block"},ve={key:0,class:"text-sm text-destructive"};function he(I,e,D,t,v,g){const i=r("TableHead"),d=r("TableRow"),m=r("TableHeader"),c=r("TableCell"),h=r("TableEmpty"),C=r("TableBody"),w=r("Table"),A=r("Modal");return u(),E(B,null,[o("div",ue,[a(t.PageHeading,{title:"Classes"},{default:l(()=>[a(t.Button,{onClick:e[0]||(e[0]=n=>t.FormManager(!0))},{default:l(()=>[...e[5]||(e[5]=[f("Add Class",-1)])]),_:1})]),_:1}),o("div",fe,[o("div",ce,[a(w,{class:"w-full caption-bottom text-sm"},{default:l(()=>[a(m,{class:"[&_tr]:border-b"},{default:l(()=>[a(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...e[6]||(e[6]=[f("Name",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...e[7]||(e[7]=[f("Phylum",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:l(()=>[...e[8]||(e[8]=[o("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),a(C,{class:"[&_tr:last-child]:border-0"},{default:l(()=>[(u(!0),E(B,null,J(t.abxClasss,n=>(u(),k(d,{key:n?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[a(c,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[f(_(n?.name),1)]),_:2},1024),a(c,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[f(_(n?.phylum?.name),1)]),_:2},1024),a(c,{class:"px-4 py-3 align-middle text-right"},{default:l(()=>[o("button",{onClick:P=>t.FormManager(!1,n),class:"text-primary hover:text-primary/80"}," Edit ",8,pe)]),_:2},1024)]),_:2},1024))),128)),!t.abxClasss||t.abxClasss.length===0?(u(),k(h,{key:0,colspan:3},{default:l(()=>[a(t.Empty,{class:"border-0 bg-transparent p-0"},{default:l(()=>[a(t.EmptyContent,null,{default:l(()=>[a(t.EmptyHeader,null,{default:l(()=>[a(t.EmptyTitle,null,{default:l(()=>[...e[9]||(e[9]=[f("No classes found",-1)])]),_:1}),a(t.EmptyDescription,null,{default:l(()=>[...e[10]||(e[10]=[f("Add a class to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})])])]),t.showModal?(u(),k(A,{key:0,onClose:e[4]||(e[4]=n=>t.showModal=!1),"content-width":"w-1/2"},{header:l(()=>[o("h3",be,_(t.formTitle),1)]),body:l(()=>[o("form",{onSubmit:e[3]||(e[3]=W((...n)=>t.saveForm&&t.saveForm(...n),["prevent"])),class:"space-y-6 p-4"},[o("div",ye,[o("label",xe,[e[11]||(e[11]=o("span",{class:"text-sm font-medium text-foreground"},"Class Name",-1)),X(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=n=>t.name=n),placeholder:"Name ..."},null,512),[[Z,t.name]]),t.errors.name?(u(),E("p",ge,_(t.errors.name),1)):T("",!0)]),o("label",_e,[e[12]||(e[12]=o("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),a(t.VueMultiselect,{modelValue:t.phylum,"onUpdate:modelValue":e[2]||(e[2]=n=>t.phylum=n),options:t.abxPhylums,multiple:!1,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),t.errors.phylum?(u(),E("p",ve,_(t.errors.phylum),1)):T("",!0)])]),e[13]||(e[13]=o("hr",{class:"border-border"},null,-1)),e[14]||(e[14]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Class ",-1))],32)]),_:1})):T("",!0)],64)}const Me=Y(me,[["render",he],["__scopeId","data-v-83715e86"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxClass.vue"]]);export{Me as default};
