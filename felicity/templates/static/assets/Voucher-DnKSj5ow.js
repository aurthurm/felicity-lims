const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VoucherCodes-CLoIGCXh.js","assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css","assets/billing.mutations-CV4LRWQQ.js","assets/billing-BI13Y5Zt.js","assets/billing.queries-DvXlf0-X.js","assets/index.esm-Cx9agkcQ.js","assets/VoucherCodes-CAQ3oOox.css"])))=>i.map(i=>d[i]);
import{a0 as Q,f as W,aq as G,ad as H,a7 as X,a1 as Z,a6 as $,_ as ee,r as f,aa as N,c as l,o as d,a as b,A as e,C as te,E as j,N as v,P as oe,F as a,J as se,K as re,Q as g,L as i,a2 as y,a3 as F,D as ne}from"./index-DApeomWQ.js";import{A as ie,d as de}from"./billing.mutations-CV4LRWQQ.js";import{u as ae}from"./billing-BI13Y5Zt.js";import{c as le,f as Y,a as k,d as ue,g as q,u as ce,b as u}from"./index.esm-Cx9agkcQ.js";import{f as E}from"./index-BqfY99Wm.js";import"./billing.queries-DvXlf0-X.js";const me=Q({__name:"Voucher",setup(A,{expose:t}){t();const C=Z(()=>$(()=>import("./VoucherCodes-CLoIGCXh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),{withClientMutation:o}=W();let c=ae();const{vouchers:P,fetchingVouchers:h}=G(c);H(()=>{c.fetchVouchers()});let m=X(!1);const p=le({uid:k().nullable(),name:k().required("Voucher Name is Required"),startDate:q().required("Start Date is Required"),endDate:q().required("End Date is Required"),usageLimit:ue().required("Usage Limit is Required"),used:k().nullable(),oncePerCustomer:Y().default(!0),oncePerOrder:Y().default(!0)}),{handleSubmit:x,errors:V,setFieldValue:n}=ce({validationSchema:p,initialValues:{oncePerCustomer:!0,oncePerOrder:!0}}),{value:_}=u("uid"),{value:r}=u("name"),{value:L}=u("startDate"),{value:T}=u("endDate"),{value:R}=u("usageLimit"),{value:B}=u("used"),{value:I}=u("oncePerCustomer"),{value:z}=u("oncePerOrder"),J=x(s=>{s.uid||M(s),s.uid&&S(s)});let O=s=>{n("uid",s.uid),n("name",s.name),n("startDate",E(s.startDate,"DD/MM/YYYY")),n("endDate",E(s.endDate,"DD/MM/YYYY")),n("usageLimit",s.usageLimit),n("used",s.used),n("oncePerCustomer",s.oncePerCustomer),n("oncePerOrder",s.oncePerOrder)},D=()=>{n("uid",void 0),n("name",void 0),n("startDate",void 0),n("endDate",void 0),n("usageLimit",void 0),n("oncePerCustomer",!0),n("oncePerOrder",!0)};const K=()=>{D(),m.value=!0},M=s=>{delete s.uid,o(ie,{payload:s},"createVoucher").then(w=>c.addVoucher(w)).finally(()=>m.value=!1)},S=s=>{delete s.uid,delete s.used,o(de,{uid:_?.value,payload:s},"updateVoucher").then(w=>c.updateVoucher(w)).finally(()=>m.value=!1)},U={VoucherCodes:C,withClientMutation:o,get billingStore(){return c},set billingStore(s){c=s},vouchers:P,fetchingVouchers:h,get showModal(){return m},set showModal(s){m=s},voucherSchema:p,handleSubmit:x,errors:V,setFieldValue:n,uid:_,name:r,startDate:L,endDate:T,usageLimit:R,used:B,oncePerCustomer:I,oncePerOrder:z,submitVoucherForm:J,get selectVoucher(){return O},set selectVoucher(s){O=s},get setVoucherToNull(){return D},set setVoucherToNull(s){D=s},newVoucher:K,addVoucher:M,updateVoucher:S};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),fe={class:"space-y-6"},be={class:"rounded-lg border border-border bg-card p-6"},ge={class:"grid grid-cols-12 gap-6"},pe={initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-3 overflow-y-auto overscroll-contain voucher-scroll"},xe={key:0,class:"rounded-lg border border-border bg-card p-4"},_e={key:1,class:"space-y-2"},ve=["onClick"],ye={class:"grow"},he={class:"flex justify-between items-center"},Ve={class:"font-medium text-foreground"},De={class:"text-sm text-muted-foreground"},we={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-9 space-y-6"},ke={class:"rounded-lg border border-border bg-card p-6"},Ce={class:"flex justify-between items-center mb-4"},Pe={class:"text-lg font-semibold text-foreground"},Le={class:"grid grid-cols-3 gap-8"},Oe={class:"space-y-4"},Me={class:"flex justify-between items-center"},Se={class:"text-sm text-foreground"},Ue={class:"flex justify-between items-center"},Ne={class:"text-sm text-foreground"},je={class:"space-y-4"},Fe={class:"flex justify-between items-center"},Ye={class:"text-sm text-foreground"},qe={class:"flex justify-between items-center"},Ee={class:"text-sm text-foreground"},Ae={class:"space-y-4"},Te={class:"flex justify-between items-center"},Re={class:"text-sm text-foreground"},Be={class:"flex justify-between items-center"},Ie={class:"text-sm text-foreground"},ze={class:"space-y-6"},Je={class:"grid grid-cols-4 gap-4"},Ke={class:"block col-span-2 space-y-2"},Qe={class:"block col-span-1 space-y-2"},We={class:"block col-span-1 space-y-2"},Ge={class:"grid grid-cols-4 gap-4"},He={class:"block col-span-2 space-y-2"},Xe={class:"grid grid-cols-2 gap-4"},Ze={class:"flex items-center space-x-2"},$e={class:"flex items-center space-x-2"},et={class:"flex justify-end"};function tt(A,t,C,o,c,P){const h=f("fel-button"),m=f("fel-heading"),p=f("fel-loader"),x=f("font-awesome-icon"),V=f("fel-modal"),n=N("motion"),_=N("motion-slide-top");return d(),l("div",fe,[b(m,{title:"Vouchers"},{default:v(()=>[b(h,{onClick:o.newVoucher},{default:v(()=>[...t[9]||(t[9]=[oe("Add Voucher",-1)])]),_:1})]),_:1}),e("div",be,[e("div",ge,[a((d(),l("section",pe,[o.fetchingVouchers?(d(),l("div",xe,[b(p,{message:"Fetching vouchers ..."})])):(d(),l("div",_e,[(d(!0),l(se,null,re(o.vouchers,r=>(d(),l("button",{key:r.uid,onClick:L=>o.selectVoucher(r),class:g(["w-full flex items-center p-4 rounded-lg border transition-colors hover:bg-accent hover:text-accent-foreground",[r.uid===o.uid?"border-primary bg-primary/10":"border-border bg-card"]])},[e("div",ye,[e("div",he,[e("span",Ve,i(r.name),1),e("span",De,i(r.used)+" of "+i(r.usageLimit),1)])])],10,ve))),128))]))])),[[n]]),o.vouchers?.length>0&&o.uid?a((d(),l("section",we,[a((d(),l("div",ke,[e("div",Ce,[e("h4",Pe,i(o.name?.toUpperCase()),1),e("button",{onClick:t[0]||(t[0]=r=>o.showModal=!0),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 w-9"},[b(x,{icon:"pen",class:"text-muted-foreground"})])]),e("div",Le,[e("div",Oe,[e("div",Me,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date:",-1)),e("span",Se,i(o.startDate),1)]),e("div",Ue,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"End Date:",-1)),e("span",Ne,i(o.endDate),1)])]),e("div",je,[e("div",Fe,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Usage Limit:",-1)),e("span",Ye,i(o.usageLimit),1)]),e("div",qe,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Used:",-1)),e("span",Ee,i(o.used),1)])]),e("div",Ae,[e("div",Te,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per customer:",-1)),e("span",Re,i(o.oncePerCustomer?"Yes":"No"),1)]),e("div",Be,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per order:",-1)),e("span",Ie,i(o.oncePerOrder?"Yes":"No"),1)])])])])),[[_]]),b(o.VoucherCodes,{voucherUid:o.uid},null,8,["voucherUid"])])),[[n]]):j("",!0)])]),o.showModal?(d(),te(V,{key:0,onClose:t[8]||(t[8]=r=>o.showModal=!1),contentWidth:"w-2/6"},{header:v(()=>[...t[16]||(t[16]=[e("h3",{class:"text-lg font-semibold text-foreground"},"Voucher Form",-1)])]),body:v(()=>[e("form",ze,[e("div",Je,[e("label",Ke,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-foreground"},"Voucher Name",-1)),a(e("input",{class:g(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":o.errors.name}]),type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>o.name=r),placeholder:"Name ..."},null,2),[[y,o.name]])]),e("label",Qe,[t[18]||(t[18]=e("span",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),a(e("input",{class:g(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":o.errors.startDate}]),type:"date","onUpdate:modelValue":t[2]||(t[2]=r=>o.startDate=r)},null,2),[[y,o.startDate]])]),e("label",We,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-foreground"},"End Date",-1)),a(e("input",{class:g(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":o.errors.endDate}]),type:"date","onUpdate:modelValue":t[3]||(t[3]=r=>o.endDate=r)},null,2),[[y,o.endDate]])])]),e("div",Ge,[e("label",He,[t[20]||(t[20]=e("span",{class:"text-sm font-medium text-foreground"},"Usage Limit",-1)),a(e("input",{class:g(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":o.errors.usageLimit}]),type:"number",min:"1","onUpdate:modelValue":t[4]||(t[4]=r=>o.usageLimit=r)},null,2),[[y,o.usageLimit]])])]),e("div",Xe,[e("label",Ze,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=r=>o.oncePerCustomer=r),checked:""},null,512),[[F,o.oncePerCustomer]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Customer",-1))]),e("label",$e,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=r=>o.oncePerOrder=r),checked:""},null,512),[[F,o.oncePerOrder]]),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Order",-1))])]),e("div",et,[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:t[7]||(t[7]=ne((...r)=>o.submitVoucherForm&&o.submitVoucherForm(...r),["prevent"]))}," Save Voucher ")])])]),_:1})):j("",!0)])}const at=ee(me,[["render",tt],["__scopeId","data-v-3f30ca74"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/billing/Voucher.vue"]]);export{at as default};
