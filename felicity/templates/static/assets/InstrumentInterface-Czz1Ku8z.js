const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-v7Q387fb.js","assets/index-c4lX_LAY.css","assets/IIMapper-CVWLVe75.js","assets/Document-tn0RQdqM.css"])))=>i.map(i=>d[i]);
import{a0 as ue,f as ce,a7 as a,ad as pe,h as L,a1 as O,a6 as B,_ as fe,r as U,c as I,o as c,A as e,C as H,E as q,a as G,N as M,P as me,J as A,K as J,L as i,D as be,F as p,a9 as S,a2 as K,a3 as Q}from"./index-v7Q387fb.js";import{g as ge,h as Y}from"./instrument.mutations-BFbIddKt.js";import{u as ve,G as ye}from"./setup-sVxge2CR.js";import{c as xe,f as z,a as _,u as he,b as f}from"./index.esm-D-THTBXR.js";const Ie=ue({__name:"InstrumentInterface",setup(W,{expose:t}){t();const C=O(()=>B(()=>import("./index-v7Q387fb.js").then(n=>n.cl),__vite__mapDeps([0,1]))),r=O(()=>B(()=>import("./IIMapper-CVWLVe75.js"),__vite__mapDeps([2,0,1,3]))),b=ve(),{withClientMutation:g,withClientQuery:k}=ce();let m=a(!1),v=a(!1),o=a(null),y=a("");const T=a(!0),x=a(null);let l=a([]);const d=a({syncUnits:!1,driverMapping:null}),R=xe({laboratoryInstrumentUid:_().required("Laboratory instrument is required"),host:_().nullable(),port:_().nullable(),protocolType:_().nullable(),socketType:_().nullable(),autoReconnect:z().nullable(),isActive:z().nullable()}),{handleSubmit:F,errors:X,resetForm:E,setValues:V}=he({validationSchema:R,initialValues:{laboratoryInstrumentUid:"",host:"",port:"",protocolType:"",socketType:"",autoReconnect:!1,isActive:!0}}),{value:Z}=f("laboratoryInstrumentUid"),{value:j}=f("host"),{value:$}=f("port"),{value:ee}=f("protocolType"),{value:te}=f("socketType"),{value:oe}=f("autoReconnect"),{value:ne}=f("isActive");pe(()=>{b.fetchLaboratoryInstruments(),k(ye,{},"instrumentInterfaces").then(n=>{l.value=n??[]})});const re=L(()=>b.getInstruments),se=L(()=>b.getLaboratoryInstruments);function D(n){const s={laboratoryInstrumentUid:n.laboratoryInstrumentUid,host:n.host||"",port:n.port||"",protocolType:n.protocolType||"",socketType:n.socketType||"",syncUnits:d.value.syncUnits,driverMapping:d.value.driverMapping,isActive:n.isActive};console.log(s),g(ge,{payload:s},"createInstrumentInterface").then(u=>l.value.push(u))}function N(n){if(!x.value)return;const s={laboratoryInstrumentUid:n.laboratoryInstrumentUid,host:n.host||"",port:n.port||"",protocolType:n.protocolType||"",socketType:n.socketType||"",syncUnits:d.value.syncUnits,driverMapping:d.value.driverMapping,isActive:n.isActive};g(Y,{uid:x.value,payload:s},"updateInstrumentInterface").then(u=>{const h=l.value.findIndex(w=>w.uid===u.uid);h!==-1&&(l.value[h]=u)})}function ie(n,s={}){T.value=n,m.value=!0,y.value=(n?"CREATE":"EDIT")+" INSTRUMENT INTERFACE",n?(x.value=null,d.value={syncUnits:!1,driverMapping:null},E({values:{laboratoryInstrumentUid:"",host:"",port:"",protocolType:"",socketType:"",autoReconnect:!1,isActive:!0}})):(x.value=s.uid??null,d.value={syncUnits:s.syncUnits??!1,driverMapping:s.driverMapping??null},V({laboratoryInstrumentUid:s.laboratoryInstrumentUid??"",host:s.host??"",port:s.port??"",protocolType:s.protocolType??"",socketType:s.socketType??"",autoReconnect:s.autoReconnect??!1,isActive:s.isActive??!0}))}const le=F(n=>{T.value===!0&&D(n),T.value===!1&&N(n),m.value=!1});function ae(n){o.value=n,v.value=!0}function de(n){if(!o.value)return;const s={laboratoryInstrumentUid:o.value.laboratoryInstrumentUid,host:o.value.host||"",port:o.value.port||"",protocolType:o.value.protocolType||"",socketType:o.value.socketType||"",syncUnits:o.value.syncUnits,driverMapping:JSON.stringify(n),isActive:o.value.isActive};g(Y,{uid:o.value.uid,payload:s},"updateInstrumentInterface").then(u=>{const h=l.value.findIndex(w=>w.uid===u.uid);h!==-1&&(l.value[h]=u)})}const P={modal:C,IIMapper:r,setupStore:b,withClientMutation:g,withClientQuery:k,get showModal(){return m},set showModal(n){m=n},get showMapperModal(){return v},set showMapperModal(n){v=n},get selectedInterfaceForMapping(){return o},set selectedInterfaceForMapping(n){o=n},get formTitle(){return y},set formTitle(n){y=n},formAction:T,currentUid:x,get instrumentInterfaces(){return l},set instrumentInterfaces(n){l=n},interfaceExtras:d,formSchema:R,handleSubmit:F,errors:X,resetForm:E,setValues:V,laboratoryInstrumentUid:Z,host:j,port:$,protocolType:ee,socketType:te,autoReconnect:oe,isActive:ne,instruments:re,laboratoryInstruments:se,addInstrumentInterface:D,editInstrumentInterface:N,FormManager:ie,saveForm:le,mapDriver:ae,onMapperSave:de};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),_e={class:"space-y-6"},ke={class:"border border-border bg-background rounded-lg shadow-sm p-6 overflow-hidden"},Te={class:"relative w-full overflow-auto"},Me={class:"w-full caption-bottom text-sm"},we={class:"[&_tr:last-child]:border-0"},Ue={class:"px-4 py-2 align-middle"},Ae={class:"px-4 py-2 align-middle"},Se={class:"px-4 py-2 align-middle text-primary"},Ce={class:"px-4 py-2 align-middle text-primary"},Re={class:"px-4 py-2 align-middle text-primary"},Fe={class:"px-4 py-2 align-middle text-primary"},Ee={class:"px-4 py-2 align-middle text-primary"},Ve={class:"px-4 py-2 align-middle text-primary"},De={class:"px-4 py-2 align-middle text-right"},Ne=["onClick"],Pe=["onClick"],Le={class:"text-lg font-semibold text-foreground"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Be={class:"space-y-2 col-span-1 md:col-span-2"},He=["value"],qe={class:"text-sm text-destructive"},Ge={class:"space-y-2"},Je={class:"space-y-2"},Ke={class:"space-y-2"},Qe={class:"space-y-2"},Ye={class:"flex items-center space-x-2"},ze={class:"flex items-center space-x-2"};function We(W,t,C,r,b,g){const k=U("fel-button"),m=U("fel-heading"),v=U("fel-modal");return c(),I(A,null,[e("div",_e,[G(m,{title:"Instrument Interfaces"},{default:M(()=>[G(k,{onClick:t[0]||(t[0]=o=>r.FormManager(!0))},{default:M(()=>[...t[11]||(t[11]=[me("Add Instrument Interface",-1)])]),_:1})]),_:1}),e("div",ke,[e("div",Te,[e("table",Me,[t[12]||(t[12]=e("thead",{class:"[&_tr]:border-b"},[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Laboratory Instrument"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"TCPIP"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Protocol"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Socket Type"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Auto Reconnect"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Sync Units"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Mapped"),e("th",{class:"px-4 py-2 text-left align-middle font-medium text-muted-foreground"},"Active"),e("th",{class:"px-4 py-2 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",we,[(c(!0),I(A,null,J(r.instrumentInterfaces,o=>(c(),I("tr",{key:o?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",Ue,i(o?.laboratoryInstrument?.labName),1),e("td",Ae,i(o?.host)+":"+i(o?.port),1),e("td",Se,i(o?.protocolType),1),e("td",Ce,i(o?.socketType),1),e("td",Re,i(o?.autoReconnect),1),e("td",Fe,i(o?.syncUnits),1),e("td",Ee,i(o?.driverMapping?"Yes":"No"),1),e("td",Ve,i(o?.isActive),1),e("td",De,[e("button",{onClick:y=>r.FormManager(!1,o),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,Ne),e("button",{onClick:y=>r.mapDriver(o),class:"ml-2 inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Mapper ",8,Pe)])]))),128))])])])])]),r.showModal?(c(),H(v,{key:0,onClose:t[9]||(t[9]=o=>r.showModal=!1)},{header:M(()=>[e("h3",Le,i(r.formTitle),1)]),body:M(()=>[e("form",{onSubmit:t[8]||(t[8]=be((...o)=>r.saveForm&&r.saveForm(...o),["prevent"])),class:"space-y-6"},[e("div",Oe,[e("div",Be,[t[14]||(t[14]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Instrument ",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.laboratoryInstrumentUid=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[13]||(t[13]=e("option",{value:""},"Select Laboratory Instrument",-1)),(c(!0),I(A,null,J(r.laboratoryInstruments,o=>(c(),I("option",{key:o?.uid,value:o.uid},i(o?.labName),9,He))),128))],512),[[S,r.laboratoryInstrumentUid]]),e("div",qe,i(r.errors.laboratoryInstrumentUid),1)]),e("div",Ge,[t[15]||(t[15]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Host ",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.host=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Host Adress..."},null,512),[[K,r.host]])]),e("div",Je,[t[16]||(t[16]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Port ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.port=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Port Number..."},null,512),[[K,r.port]])]),e("div",Ke,[t[18]||(t[18]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Protocol Type ",-1)),p(e("select",{id:"instrumentType","onUpdate:modelValue":t[4]||(t[4]=o=>r.protocolType=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[17]||(t[17]=[e("option",{value:"hl7"},"HL7",-1),e("option",{value:"astm"},"ASTM",-1)])],512),[[S,r.protocolType]])]),e("div",Qe,[t[20]||(t[20]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Socket Type ",-1)),p(e("select",{id:"instrumentType","onUpdate:modelValue":t[5]||(t[5]=o=>r.socketType=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[19]||(t[19]=[e("option",{value:"server"},"Server",-1),e("option",{value:"client"},"Client",-1)])],512),[[S,r.socketType]])]),e("div",Ye,[p(e("input",{type:"checkbox",id:"autoReconnect","onUpdate:modelValue":t[6]||(t[6]=o=>r.autoReconnect=o),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[Q,r.autoReconnect]]),t[21]||(t[21]=e("label",{for:"autoReconnect",class:"text-sm font-medium text-muted-foreground"},"Auto Reconnect",-1))]),e("div",ze,[p(e("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":t[7]||(t[7]=o=>r.isActive=o),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[Q,r.isActive]]),t[22]||(t[22]=e("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Is Active",-1))])]),t[23]||(t[23]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ")],-1))],32)]),_:1})):q("",!0),r.showMapperModal?(c(),H(r.IIMapper,{key:1,isOpen:r.showMapperModal,instrumentInterface:r.selectedInterfaceForMapping,onClose:t[10]||(t[10]=o=>{r.showMapperModal=!1,r.selectedInterfaceForMapping=null}),onSave:r.onMapperSave},null,8,["isOpen","instrumentInterface"])):q("",!0)],64)}const et=fe(Ie,[["render",We],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/InstrumentInterface.vue"]]);export{et as default};
