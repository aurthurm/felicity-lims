import{W as Z,ab as ee,X as oe,a2 as p,Y as te,a6 as re,i as w,f as ne,ac as se,a9 as $,aa as i,r as k,o as r,c as n,O as o,a as s,M as m,a7 as a,J as g,ad as P,L as v,D as y,E as C,F as N,H as L,z as D,ae as O,N as R,a4 as ae,C as ie,a5 as le,a0 as ue,a1 as de,af as ce,_ as fe}from"./index-5d85e9da.js";import{u as me}from"./notification-ebc5d67f.js";const pe={id:"main-nav",class:"flex items-center px-6 bg-primary border-b border-border",role:"navigation","aria-label":"Main Navigation"},ge={class:"flex-1"},ve={class:"flex text-right align-middle"},be={class:"text-left text-2xl font-medium ml-2"},xe={key:0,class:"mx-8 border-l border-border my-2","aria-hidden":"true"},ye=["aria-expanded"],he={class:"grid grid-cols-3 gap-4",role:"menu","aria-label":"Main Menu"},_e={class:"mr-4","aria-hidden":"true"},we={class:"text-lg font-medium"},ke={class:"flex items-center space-x-4"},Ce={class:"bg-destructive text-destructive-foreground text-xs rounded-full px-2 py-1"},Ne={key:1,class:"border-l border-border h-6","aria-hidden":"true"},Ee={class:"px-4 flex text-right items-center relative"},Se={class:"flex justify-center items-center h-8 w-8 rounded-full border-2 border-border hover:border-primary text-primary-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary cursor-pointer","aria-hidden":"true",tabindex:"0"},Me={class:"relative"},Le=["aria-expanded"],Ae={class:"text-lg font-medium uppercase"},Te=["aria-label"],Ie=["aria-label"],$e={class:"flex items-center justify-between"},Pe={key:0,class:"text-muted-foreground italic"},De={key:1,"aria-label":"Error messages",class:"divide-y divide-border"},Oe={class:"block whitespace-pre-wrap"},Re={action:"post",class:"p-6 space-y-6"},Be={class:"space-y-4"},Ue={class:"grid grid-cols-2 gap-4"},Fe={class:"col-span-2 space-y-2"},Ve=["value"],je=["disabled"],ze={key:0,class:"flex items-center justify-center gap-2"},He={key:1},Ge=Z({__name:"NavigationMain",setup(Ke){const B=ue(()=>de(()=>import("./Logo-48d8b542.js"),["assets/Logo-48d8b542.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css"])),{isFullscreen:E,toggle:A}=ee(),U=oe(),d=p(!1),c=p(!1);te(()=>U.currentRoute.value,(u,e)=>{u.path!==e?.path&&(d.value=!1,c.value=!1)});const f=re(),F=w(()=>f.auth?.activeLaboratory),T=w(()=>f.auth?.laboratories),V=w(()=>{const u=f.auth?.user?.firstName||"",e=f.auth?.user?.lastName||"";return`${u} ${e}`.trim()}),{errors:b,clearErrors:j,withClientMutation:z}=ne(),S=p(!1),H=me(),G=u=>H.showNotifications(u),{loadPreferredTheme:K}=se();$(()=>{K()});const W=w(()=>[{id:"patients-compact",label:"Compact",icon:"bullseye",route:"/patients-compact",guard:i.PATIENTS_COMPACT},{id:"patients",label:"Patients",icon:"user-injured",route:"/patients",guard:i.PATIENTS},{id:"clients",label:"Clients",icon:"clinic-medical",route:"/clients",guard:i.CLIENTS},{id:"samples",label:"Samples",icon:"vial",route:"/samples",guard:i.SAMPLES},{id:"worksheets",label:"WorkSheets",icon:"grip-vertical",route:"/worksheets",guard:i.WORKSHEETS},{id:"quality-control",label:"QControl",icon:"anchor",route:"/quality-control",guard:i.QC_SAMPLES},{id:"notice-manager",label:"NoticeManager",icon:"bell",route:"/notice-manager",guard:i.NOTICE_MANAGER},{id:"bio-banking",label:"BioBanking",icon:"database",route:"/bio-banking",guard:i.BIO_BANKING},{id:"shipments",label:"Referrals",icon:"truck",route:"/shipments",guard:i.REFERRAL},{id:"inventory",label:"Inventory",icon:"fa-solid fa-boxes-stacked",route:"/inventory",guard:i.INVENTORY},{id:"schemes",label:"Projects",icon:"project-diagram",route:"/schemes",guard:i.SCHEMES},{id:"documents",label:"Documents",icon:"file",route:"/documents",guard:i.DOCUMENT}]),q=()=>{d.value=!1,c.value=!1},Q=u=>{u.key==="Escape"&&q()};$(()=>{document.addEventListener("keydown",Q)});const h=p(!1),_=p(null),x=p(!1),Y=()=>{if(!_.value){alert("Please select a laboratory to switch to.");return}x.value=!0,setTimeout(async()=>{await z(ce,{userUid:f.auth?.user?.uid,laboratoryUid:_.value},"setUserActiveLaboratory").then(u=>f.logout()).catch(u=>console.error).finally(()=>{h.value=!1,x.value=!1})},3e3)};return(u,e)=>{const M=k("router-link"),l=k("font-awesome-icon"),J=k("fel-drawer"),X=k("fel-modal");return r(),n(N,null,[o("nav",pe,[o("div",ge,[o("div",ve,[s(M,{to:"/",id:"brand",class:"flex items-center md:w-auto text-primary-foreground/80 hover:text-primary-foreground transition-colors","aria-label":"Felicity LIMS Home"},{default:m(()=>[s(a(B)),o("h1",be,g(F.value?.name??"Felicity LIMS"),1)]),_:1}),a(P)?(r(),n("span",xe)):v("",!0),a(P)?(r(),n("button",{key:1,onClick:e[0]||(e[0]=t=>d.value=!d.value),class:"hidden md:flex md:items-center focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md p-2","aria-expanded":d.value,"aria-controls":"main-menu"},[e[15]||(e[15]=o("span",{class:"text-xl font-medium mr-2 text-primary-foreground/80 hover:text-primary-foreground uppercase"},"Menu",-1)),s(l,{icon:d.value?"chevron-up":"chevron-down",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,ye)):v("",!0),y(o("div",{id:"main-menu",class:"absolute left-64 top-12 mt-1 p-4 w-1/2 bg-primary rounded-md shadow-lg border border-border z-20",onClick:e[2]||(e[2]=t=>d.value=!1)},[o("div",he,[(r(!0),n(N,null,L(W.value,t=>y((r(),D(M,{key:t.id,to:t.route,id:`${t.id}-link`,class:"flex items-center py-2 px-4 text-primary-foreground hover:bg-accent hover:text-accent-foreground rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",role:"menuitem",onClick:e[1]||(e[1]=I=>d.value=!1)},{default:m(()=>[o("span",_e,[s(l,{icon:t.icon},null,8,["icon"])]),o("span",we,g(t.label),1)]),_:2},1032,["to","id"])),[[C,O(t.guard)]])),128))])],512),[[C,d.value]])])]),o("div",ke,[a(b).length>0?(r(),n("button",{key:0,class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[3]||(e[3]=t=>S.value=!0),"aria-label":"Show errors"},[s(l,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[16]||(e[16]=o("span",{class:"text-lg font-medium mr-2 uppercase"},"Errors",-1)),o("span",Ce,g(a(b).length),1)])):v("",!0),a(b).length>0?(r(),n("span",Ne)):v("",!0),o("button",{class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[4]||(e[4]=t=>G(!0)),"aria-label":"Show notifications"},[s(l,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[17]||(e[17]=o("span",{class:"text-lg font-medium uppercase"},"Notifications",-1))]),e[20]||(e[20]=o("span",{class:"border-l border-border h-6","aria-hidden":"true"},null,-1)),y(s(M,{to:"/admin",class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":"Settings"},{default:m(()=>[s(l,{icon:"cog",class:"mr-2","aria-hidden":"true"}),e[18]||(e[18]=o("span",{class:"text-lg font-medium uppercase"},"Settings",-1))]),_:1},512),[[C,O(i.ADMINISTRATION)]]),o("div",Ee,[o("span",Se,[s(l,{icon:"user"})]),o("div",Me,[o("button",{onClick:e[5]||(e[5]=t=>c.value=!c.value),class:"text-primary-foreground/80 hover:text-primary-foreground hidden md:flex md:items-center ml-2 focus:outline-none rounded-lg p-1 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":c.value,"aria-controls":"user-menu"},[o("span",Ae,g(V.value),1),s(l,{icon:c.value?"chevron-up":"chevron-down",class:"ml-2 text-primary-foreground/80 transition-transform","aria-hidden":"true"},null,8,["icon"])],8,Le),y(o("div",{id:"user-menu",class:"absolute right-0 top-11 py-2 w-48 bg-popover text-popover-foreground rounded-lg shadow-xl z-20",onClick:e[7]||(e[7]=t=>c.value=!1),role:"menu"},[o("button",{onClick:e[6]||(e[6]=t=>a(f).logout()),class:"w-full text-left cursor-pointer py-2 px-4 flex items-center hover:bg-primary hover:text-primary-foreground uppercase transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground rounded",role:"menuitem"},[s(l,{icon:"sign-out-alt",class:"mr-2","aria-hidden":"true"}),e[19]||(e[19]=R(" Log out "))])],512),[[C,c.value]])])]),(T.value?.length??0)>1?(r(),n("button",{key:2,onClick:e[8]||(e[8]=t=>h.value=!0),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":a(E)?"Exit fullscreen":"Enter fullscreen"},[s(l,{icon:"shuffle",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"})],8,Te)):v("",!0),o("button",{onClick:e[9]||(e[9]=(...t)=>a(A)&&a(A)(...t)),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":a(E)?"Exit fullscreen":"Enter fullscreen"},[s(l,{icon:a(E)?"compress":"expand"},null,8,["icon"])],8,Ie)])]),s(J,{show:S.value,onClose:e[11]||(e[11]=t=>S.value=!1)},{header:m(()=>[o("div",$e,[e[21]||(e[21]=o("h3",{class:"font-semibold text-lg"},"Errors List",-1)),o("button",{class:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-secondary transition-colors focus:outline-none",onClick:e[10]||(e[10]=t=>a(j)()),"aria-label":"Clear all errors"},[s(l,{icon:"trash-alt",class:"w-5 h-5","aria-hidden":"true"})])])]),body:m(()=>[a(b).length===0?(r(),n("p",Pe,"No errors to display")):(r(),n("ul",De,[(r(!0),n(N,null,L(a(b),(t,I)=>(r(),n("li",{key:I,class:"mb-2 p-3 bg-background rounded text-sm border-l-4 border-destructive"},[o("code",Oe,g(t),1)]))),128))]))]),_:1},8,["show"]),h.value?(r(),D(X,{key:0,onClose:e[14]||(e[14]=t=>h.value=!1)},{header:m(()=>e[22]||(e[22]=[o("h3",{class:"text-lg font-bold text-foreground"},"Current Laboratory Switcher",-1)])),body:m(()=>[o("form",Re,[o("div",Be,[o("div",Ue,[o("label",Fe,[e[24]||(e[24]=o("span",{class:"text-md font-medium"},"Laboratory Name",-1)),y(o("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[12]||(e[12]=t=>_.value=t)},[e[23]||(e[23]=o("option",{value:""},"Select Department",-1)),(r(!0),n(N,null,L(T.value,t=>(r(),n("option",{key:t.uid,value:t?.uid},g(t.name),9,Ve))),128))],512),[[ae,_.value]])])])]),o("button",{type:"button",onClick:e[13]||(e[13]=ie(t=>Y(),["prevent"])),class:le(["w-full rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring",x.value?"bg-primary/50 text-primary-foreground cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"]),disabled:x.value},[x.value?(r(),n("span",ze,e[25]||(e[25]=[o("svg",{class:"w-4 h-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3.5-3.5L12 0v4a8 8 0 11-8 8z"})],-1),R(" Switchingâ€¦ ")]))):(r(),n("span",He,"Switch Laboratory"))],10,je)])]),_:1})):v("",!0)],64)}}}),Qe=fe(Ge,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/nav/NavigationMain.vue"]]);export{Qe as default};
