import{P as M,e as q,a9 as N,Z as i,aa as P,f as R,Q as j,r as L,o as d,c as b,b as e,a as $,a2 as o,E as u,F as g,D as z,a1 as Q,x as k,J as _,K as w,z as I,L as J,A as B,V as C,a7 as K,X as O,ar as X,as as Y,Y as Z,_ as H}from"./index-03a7f0eb.js";import{G as W,A as ee,E as te}from"./grind.queries-4e5f98f5.js";import{r as se}from"./ArrowLeftIcon-d0161c60.js";const oe={class:"flex items-center"},re={class:"h3 text-xl"},ae={class:"leading-2 bg-slate-50 p-2 italic font-medium text-gray-500"},le={class:"flex justify-start items-center mb-2"},ne=["onClick","onDblclick"],ie={class:"text-lg font-semibold"},de={class:"mb-4"},ue={class:"mb-4"},ce={class:"flex justify-end"},me={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-sky-600 border border-transparent rounded-md shadow-sm hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500"},fe=M({__name:"Scheme",setup(pe){const D=O(()=>Z(()=>import("./Board-c6137b2e.js"),["assets/Board-c6137b2e.js","assets/index-03a7f0eb.js","assets/index-81d3252e.css","assets/grind.queries-4e5f98f5.js"])),{withClientMutation:y,withClientQuery:S}=q(),c=N(),l=i();P(async()=>{if(await h(),c.query.board){const s=l.value?.boards?.find(t=>t.uid===c.query.board);s&&v(s)}});function h(s="cache-first"){return S(W,{uid:c.params.schemeUid},"grindSchemeByUid",s).then(t=>{l.value=t})}let m=i(!1),n=i(!1),U=i(!1),p=i(""),r=R({});const A=()=>{m.value=!0,n.value=!0,p.value="Create Board",X(r)},E=()=>{n.value=!1,m.value?y(ee,{payload:{...r,schemeUid:c.params.schemeUid}},"createGrindBoard").then(s=>{l.value.boards||(l.value.boards=[]),l.value.boards.push(s)}):y(te,{uid:r.uid,payload:{title:r.title,description:r.description}},"updateGrindBoard").then(()=>h("network-only")),m.value=!1},F=s=>{m.value=!1,Y(r,s,!0),p.value="Update Board",n.value=!0};let f=i();const v=s=>{f.value=s,x.push({query:{board:s.uid}})},x=j();function V(){x.back()}return(s,t)=>{const G=L("modal");return d(),b(g,null,[e("div",oe,[e("button",{onClick:V,class:"mr-4 text-gray-500 hover:text-gray-700"},[$(o(se),{class:"w-5 h-5"})]),e("h3",re,[t[3]||(t[3]=e("span",{class:"font-bold mr-4"},"Project Title:",-1)),e("span",null,u(l.value?.title),1)])]),t[6]||(t[6]=e("hr",{class:"mt-2 mb-2"},null,-1)),e("p",ae,u(l.value?.description),1),t[7]||(t[7]=e("hr",{class:"mt-2 mb-2"},null,-1)),t[8]||(t[8]=e("h4",{class:"h3 text-xl font-semibold mb-2"},"Boards:",-1)),e("div",le,[e("div",null,[(d(!0),b(g,null,z(l.value?.boards,a=>(d(),b("button",{key:a.uid,class:Q(["py-1 px-4 mr-2 bg-gray-200 text-gray-600 shadow-md overflow-hidden font-medium border-2 border-gray-200",{"bg-sky-500 text-white border-sky-500":o(f)?.uid===a.uid}]),onClick:T=>v(a),onDblclick:T=>F(a)},u(a.title),43,ne))),128))]),e("button",{onClick:A,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded"},"+ Board")]),o(f)?(d(),k(o(D),{key:0,board:o(f)},null,8,["board"])):_("",!0),o(n)?(d(),k(G,{key:1,onClose:t[2]||(t[2]=a=>K(n)?n.value=!1:n=!1),"content-width":"w-full max-w-2xl"},{header:w(()=>[e("h3",ie,u(o(p)),1)]),body:w(()=>[e("form",{onSubmit:I(E,["prevent"])},[e("div",de,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"title"},[J(" Scheme Title "),e("span",{class:"text-red-500"},"*")],-1)),B(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=a=>o(r).title=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter scheme title"},null,512),[[C,o(r).title]])]),e("div",ue,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"description"}," Description ",-1)),B(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=a=>o(r).description=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter scheme description"},null,512),[[C,o(r).description]])]),e("div",ce,[e("button",me,u(o(U)?"Create":"Update"),1)])],32)]),_:1})):_("",!0)],64)}}}),ve=H(fe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/_id/Scheme.vue"]]);export{ve as default};
