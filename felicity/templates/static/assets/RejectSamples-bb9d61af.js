import{W as S,X as k,h as C,a9 as D,i as V,r as E,o as a,c as r,O as e,F as g,H as h,L as y,J as n,D as p,a4 as N,Z as q,E as I,a as M,C as T,_ as U}from"./index-93739211.js";import{u as A}from"./samples-9048c815.js";import{u as B}from"./analysis-689a99f8.js";import"./analyses.mutations-e3a0ff1f.js";import"./storage.mutations-d0d2f9f3.js";const O={class:"space-y-6"},P={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},F={key:0,class:"border-t border-border"},J={class:"text-lg font-semibold text-foreground"},L={class:"grid grid-cols-12 gap-6"},$={class:"col-span-6 grid grid-cols-2 gap-6"},H={class:"space-y-4"},W={class:"flex items-center justify-between"},X={class:"text-muted-foreground"},Z={class:"flex items-center justify-between"},z={class:"text-muted-foreground"},G={class:"flex items-center justify-between"},K={class:"text-muted-foreground"},Q={class:"space-y-4"},Y={class:"flex items-center justify-between"},ee={class:"text-muted-foreground"},se={class:"flex items-center justify-between"},te={class:"text-muted-foreground"},oe={class:"col-span-5"},ne={class:"grid grid-cols-2 gap-6"},ie={class:"space-y-2"},ae={class:"space-y-2"},re=["onUpdate:modelValue"],ce=["value"],de={class:"space-y-2"},le={class:"space-y-2"},ue=["onUpdate:modelValue"],pe={class:"col-span-1 flex items-center justify-center"},fe=["onClick"],me={class:"flex justify-end"},_e=S({__name:"RejectSamples",setup(ge){const l=k(),f=B(),{rejectSamples:v}=A(),m=l.options.history.state,c=C({rejections:[]}),x=JSON.parse(window.history.state.samples);let _=[];for(let o of x)o.reasons=[],o.other=void 0,_.push(o);c.rejections=_,D(()=>f.fetchRejectionReasons());const b=(o,s)=>{let d=[];return o?.forEach(t=>d.push(t.name)),s?.forEach(t=>d.push(t.name)),d.join(", ")},j=o=>{c.rejections?.forEach(s=>{s.reasons=o.reasons,s.other=o.other})},w=V(()=>f.getRejectionReasons),R=async()=>{const o=[];c.rejections?.forEach(s=>{o.push({uid:s?.uid,reasons:s?.reasons,other:s?.other})}),await v(o).then(s=>{o.length==1&&m.back?.toString().includes("patient")?l.push({path:m.back.toString()}):l.push({name:"samples-listing"})})};return(o,s)=>{const d=E("font-awesome-icon");return a(),r("div",O,[s[9]||(s[9]=e("h4",{class:"text-xl font-semibold text-foreground"},"Sample Rejection",-1)),e("div",P,[(a(!0),r(g,null,h(c.rejections,(t,u)=>(a(),r("div",{key:u,class:"space-y-6"},[u>0?(a(),r("div",F)):y("",!0),e("h2",J,n(t?.sampleId)+" â†’ "+n(t?.status),1),e("div",L,[e("div",$,[e("div",H,[e("div",W,[s[1]||(s[1]=e("span",{class:"font-medium text-foreground"},"Sample Type",-1)),e("span",X,n(t?.sampleType?.name),1)]),e("div",Z,[s[2]||(s[2]=e("span",{class:"font-medium text-foreground"},"Client Sample ID",-1)),e("span",z,n(t?.analysisRequest?.clientRequestId),1)]),e("div",G,[s[3]||(s[3]=e("span",{class:"font-medium text-foreground"},"Analyses",-1)),e("span",K,n(b(t?.profiles,t?.analyses)),1)])]),e("div",Q,[e("div",Y,[s[4]||(s[4]=e("span",{class:"font-medium text-foreground"},"Patient",-1)),e("span",ee,n(t?.analysisRequest?.patient?.firstName)+" "+n(t?.analysisRequest?.patient?.lastName),1)]),e("div",se,[s[5]||(s[5]=e("span",{class:"font-medium text-foreground"},"Client Patient ID",-1)),e("span",te,n(t?.analysisRequest?.patient?.clientPatientId),1)])])]),e("div",oe,[e("div",ne,[e("div",ie,[e("label",ae,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-foreground"},"Rejection Reasons",-1)),p(e("select",{name:"reasons",multiple:"","onUpdate:modelValue":i=>t.reasons=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[s[6]||(s[6]=e("option",{value:""},null,-1)),(a(!0),r(g,null,h(w.value,i=>(a(),r("option",{key:i.uid,value:i.uid},n(i.reason),9,ce))),128))],8,re),[[N,t.reasons]])])]),e("div",de,[e("label",le,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-foreground"},"Other",-1)),p(e("input",{type:"text","onUpdate:modelValue":i=>t.other=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,ue),[[q,t.other]])])])])]),e("div",pe,[p(e("button",{onClick:i=>j(t),class:"text-primary hover:text-primary/80 transition-colors"},[M(d,{icon:"level-down-alt"})],8,fe),[[I,u===0]])])])]))),128))]),e("div",me,[c.rejections?.length>0?(a(),r("button",{key:0,onClick:s[0]||(s[0]=T(t=>R(),["prevent"])),class:"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destructive/50"}," Reject Samples ")):y("",!0)])])}}}),je=U(_e,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{je as default};
