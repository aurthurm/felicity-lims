import{S as R,f as $,a0 as u,h as k,i as z,a7 as G,r as h,o as C,c as K,N as s,a as g,L as p,M as q,a5 as t,K as P,y as Z,H as J,A as Q,C as d,X as m,ad as W,F as Y,Z as B,$ as V,ae as U,_ as ee}from"./index-628f1f8f.js";import{w as se,a as oe,x as te,y as ae}from"./microbiology.mutations-5c59feca.js";const re={class:"space-y-6"},ne={class:"bg-card p-6 shadow-sm rounded-lg"},le={class:"text-xl font-semibold text-foreground"},ie={class:"grid grid-cols-2 gap-4"},ue={class:"block"},de={class:"block"},me={class:"grid grid-cols-2 gap-4"},fe={class:"block"},ce={class:"block"},pe={class:"grid grid-cols-2 gap-4"},ge={class:"block"},be={class:"block"},ye={class:"grid grid-cols-2 gap-4"},he={class:"block"},ve={class:"block"},xe={class:"grid grid-cols-2 gap-4"},Se={class:"block"},_e=R({__name:"AbxOrganismSerotype",setup(Oe){const D=B(()=>V(()=>import("./FelDataTable-464ee606.js"),["assets/FelDataTable-464ee606.js","assets/index-628f1f8f.js","assets/index-f2df9813.css"])),M=B(()=>V(()=>import("./vue-multiselect.esm-c818a0fb.js"),["assets/vue-multiselect.esm-c818a0fb.js","assets/index-628f1f8f.js","assets/index-f2df9813.css"])),{withClientMutation:v,withClientQuery:x}=$();let f=u(!1),S=u(""),o=k({});const b=u(!0),_=u(!1),l=u([]),O=u([]);let n=k({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const A=u(0);let w=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const F=z(()=>l?.value?.length+" of "+A.value+" organisms"),N=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1}]);function y(a){x(se,{text:a.text,pageSize:a.first,sortBy:a.sortBy},void 0).then(e=>{const i=e.abxOrganismSerotypeAll,c=i.items;a.filterAction?(l.value=[],l.value=c):l.value=U(l.value,c,"uid"),A.value=i?.totalCount,w.value=i?.pageInfo}).finally(()=>{_.value=!1})}function T(a,e){a?.length<3||x(oe,{pageSize:50,text:a,sortBy:["name"]},"abxOrganismAll").then(i=>{i&&(O.value=i?.items??[])})}G(()=>{y(n)});function E(a){n.first=100,n.after="",n.text=a.filterText,n.filterAction=!0,y(n)}function I(a){n.first=a.fetchCount,n.after=w?.value?.endCursor,n.text=a.filterText,n.filterAction=!1,y(n)}const H=()=>Object.assign(o,{});function L(a,e={}){b.value=a,f.value=!0,S.value=(a?"Create":"Edit")+" OrganismSerotype",a?Object.assign(o,{}):Object.assign(o,{...e})}function X(){const a={organismUid:o?.organism?.uid,serotype:o?.serotype,serogroup:o?.serogroup,subspecies:o?.subspecies,oAntigens:o?.oAntigens,hPhase1:o?.hPhase1,hPhase2:o?.hPhase2,x997Check:o?.x997Check,fate:o?.fate};b.value===!0&&v(te,{payload:a},"createAbxOrganismSerotype").then(e=>{e&&(l.value=U(l.value,[e],"uid"))}),b.value===!1&&v(ae,{uid:o.uid,payload:a},"updateAbxOrganismSerotype").then(e=>{if(e){const i=l.value.findIndex(c=>c.uid==e.uid);l.value[i]=e}}),f.value=!1}return(a,e)=>{const i=h("fel-button"),c=h("fel-heading"),j=h("fel-modal");return C(),K(Y,null,[s("div",re,[g(c,{title:"Organism Serotypes"},{default:p(()=>[g(i,{onClick:e[0]||(e[0]=r=>L(!0))},{default:p(()=>e[11]||(e[11]=[q("Add Organism Serotype")])),_:1})]),_:1}),s("div",ne,[g(t(D),{columns:N.value,data:l.value,toggleColumns:!0,loading:_.value,paginable:!0,pageMeta:{fetchCount:t(n).first,hasNextPage:!0,countNone:F.value},searchable:!0,filterable:!1,onOnSearchKeyUp:E,onOnSearchFocus:H,onOnPaginate:I,selectable:!1},{footer:p(()=>e[12]||(e[12]=[])),_:1},8,["columns","data","loading","pageMeta"])])]),P(" Organism Serotype Edit Form Modal "),t(f)?(C(),Z(j,{key:0,onClose:e[10]||(e[10]=r=>W(f)?f.value=!1:f=!1),"content-width":"w-1/2"},{header:p(()=>[s("h3",le,J(t(S)),1)]),body:p(()=>[s("form",{onSubmit:Q(X,["prevent"]),class:"space-y-6 p-4"},[s("div",ie,[s("label",ue,[e[13]||(e[13]=s("span",{class:"text-sm font-medium text-foreground"},"Organism",-1)),g(t(M),{modelValue:t(o).organism,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).organism=r),options:O.value,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:T,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),s("label",de,[e[14]||(e[14]=s("span",{class:"text-sm font-medium text-foreground"},"Serotype",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[2]||(e[2]=r=>t(o).serotype=r),placeholder:"Serotype ..."},null,512),[[m,t(o).serotype]])])]),s("div",me,[s("label",fe,[e[15]||(e[15]=s("span",{class:"text-sm font-medium text-foreground"},"Serogroup",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[3]||(e[3]=r=>t(o).serogroup=r),placeholder:"Serogroup ..."},null,512),[[m,t(o).serogroup]])]),s("label",ce,[e[16]||(e[16]=s("span",{class:"text-sm font-medium text-foreground"},"Subspecies",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[4]||(e[4]=r=>t(o).subspecies=r),placeholder:"Subspecies ..."},null,512),[[m,t(o).subspecies]])])]),s("div",pe,[s("label",ge,[e[17]||(e[17]=s("span",{class:"text-sm font-medium text-foreground"},"O Antigens",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[5]||(e[5]=r=>t(o).oAntigens=r),placeholder:"O Antigens ..."},null,512),[[m,t(o).oAntigens]])]),s("label",be,[e[18]||(e[18]=s("span",{class:"text-sm font-medium text-foreground"},"H Phase1",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[6]||(e[6]=r=>t(o).hPhase1=r),placeholder:"H Phase1 ..."},null,512),[[m,t(o).hPhase1]])])]),s("div",ye,[s("label",he,[e[19]||(e[19]=s("span",{class:"text-sm font-medium text-foreground"},"H Phase2",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[7]||(e[7]=r=>t(o).hPhase2=r),placeholder:"H Phase2 ..."},null,512),[[m,t(o).hPhase2]])]),s("label",ve,[e[20]||(e[20]=s("span",{class:"text-sm font-medium text-foreground"},"X997 Check",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[8]||(e[8]=r=>t(o).x997Check=r),placeholder:"X997 Check ..."},null,512),[[m,t(o).x997Check]])])]),s("div",xe,[s("label",Se,[e[21]||(e[21]=s("span",{class:"text-sm font-medium text-foreground"},"Fate",-1)),d(s("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[9]||(e[9]=r=>t(o).fate=r),placeholder:"Fate ..."},null,512),[[m,t(o).fate]])])]),e[22]||(e[22]=s("hr",{class:"border-border"},null,-1)),e[23]||(e[23]=s("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Serotype ",-1))],32)]),_:1})):P("v-if",!0)],64)}}});const ke=ee(_e,[["__scopeId","data-v-a814e9fb"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{ke as default};
