import{V as ce,u as pe,f as fe,a1 as y,h as L,i as w,r as A,o as r,c as d,O as t,a as P,M as x,N as B,L as l,F as m,H as v,C as T,a4 as z,a6 as n,J as u,ae as V,D as p,Z as I,b as me,z as R,Y as k,a3 as H,$ as Y,a0 as G,_ as ge}from"./index-74595aff.js";import{Q as xe,T as be,U as ye,W as ve}from"./analyses.mutations-185deb2b.js";import{u as _e}from"./setup-fa628218.js";import{u as he}from"./analysis-7c37619c.js";import"./_queries-3a88eae7.js";const ke={class:"space-y-6"},we={class:"grid grid-cols-12 gap-6"},Pe={class:"col-span-3"},Se={class:"rounded-lg border border-border bg-card"},Ae={class:"overflow-y-auto max-h-[540px] p-2"},Ue={class:"space-y-1"},Ce=["onClick"],Me={class:"flex items-center justify-between"},Ee={class:"text-sm font-medium"},Te={key:0,class:"text-xs text-muted-foreground"},Ve={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},De={key:0,class:"col-span-9"},je={class:"space-y-6"},Ne={class:"rounded-lg border border-border bg-card p-6"},Fe={class:"flex items-center justify-between"},$e={class:"space-y-1"},Oe={class:"flex items-center space-x-2"},Le={class:"text-xl font-semibold text-foreground"},Be={key:0,class:"px-2 py-0.5 text-xs font-medium bg-accent text-accent-foreground rounded"},ze={key:0,class:"text-sm text-muted-foreground"},Ie={class:"flex items-center space-x-2"},Re={class:"border-b border-border"},He={class:"flex space-x-2"},Ye=["onClick"],Ge={class:"rounded-lg border border-border bg-card"},Je={class:"p-6"},Ke={key:0,class:"space-y-6"},Qe={class:"grid grid-cols-3 gap-6"},We={class:"text-sm font-medium"},Ze={class:"space-y-2 pt-2"},qe={class:"flex items-center h-5"},Xe=["id","onUpdate:modelValue"],et=["for"],tt={class:"flex justify-end pt-4"},ot={key:1,class:"space-y-6"},st={class:"flex justify-between items-center"},nt={class:"overflow-hidden rounded-lg border border-border"},rt={class:"w-full"},it={class:"px-6 py-4 whitespace-nowrap border-b border-border"},dt={class:"font-medium text-foreground"},lt={key:0,class:"text-sm text-muted-foreground"},at={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},ut={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},ct={class:"px-6 py-4 whitespace-nowrap text-right border-b border-border"},pt=["onClick"],ft={key:2,class:"space-y-6"},mt={class:"text-xl font-semibold text-foreground"},gt={class:"space-y-4"},xt={class:"space-y-2"},bt={class:"space-y-2"},yt={class:"space-y-2"},vt=["value"],_t={class:"space-y-2"},ht={class:"space-y-2"},kt={class:"flex items-center space-x-2"},wt={class:"text-xl font-semibold text-foreground"},Pt={class:"space-y-4"},St={class:"space-y-2"},At=["value"],Ut={class:"space-y-2"},Ct={class:"space-y-2"},Mt={class:"space-y-2"},Et=ce({__name:"AnalysesProfiles",setup(Tt){const J=Y(()=>G(()=>import("./vue-multiselect.esm-b1f61583.js"),["assets/vue-multiselect.esm-b1f61583.js","assets/index-74595aff.js","assets/index-8412b2a5.css"])),K=Y(()=>G(()=>import("./Billing-02158eb6.js"),["assets/Billing-02158eb6.js","assets/index-74595aff.js","assets/index-8412b2a5.css","assets/billing-c8e17d5c.js"])),c=he(),Q=pe(),W=_e(),{withClientMutation:S}=fe();let b=y("analyses-services");const Z=["analyses-services","mappings","billing"];let _=y(!1),D=y("");const U=y(!0);let s=L({});const q=w(()=>Q.getSampleTypes),X=w(()=>W.getDepartments);c.fetchAnalysesProfilesAndServices();const C=w(()=>c.getAnalysesServices),ee=w(()=>c.getAnalysesProfiles);function te(){const i={name:s.name,keyword:s.keyword,description:s.description,departmentUid:s.departmentUid,sampleTypes:s.sampleTypes?.map(e=>e.uid),active:s.active};S(xe,{payload:i},"createProfile").then(e=>c.addAnalysisProfile(e))}function j(){const i={name:s.name,keyword:s.keyword,description:s.description,departmentUid:s.departmentUid,active:s.active,services:s.analyses?.map(e=>e.uid),sampleTypes:s.sampleTypes?.map(e=>e.uid)};S(be,{uid:s.uid,payload:i},"updateProfile").then(e=>c.updateAnalysesProfile(e))}function oe(i){Object.assign(s,{...i}),C.value?.forEach(e=>{e[1].forEach(g=>{g.checked=!1,g.profiles?.some(E=>E.uid===s.uid)&&(g.checked=!0)})}),c.fetchProfileMappings(i?.uid)}function se(){const i=[];C.value?.forEach(e=>{e[1].forEach(g=>{g.checked&&i.push(g)})}),s.analyses=i,j()}function N(i,e={}){U.value=i,_.value=!0,D.value=(i?"CREATE":"EDIT")+" ANALYSES PROFILE",i?Object.assign(s,{}):Object.assign(s,{...e})}function ne(){U.value===!0&&te(),U.value===!1&&j(),_.value=!1}c.fetchCodingStandards();const re=w(()=>c.profileMapings?.filter(i=>i.profileUid===s?.uid));let h=y(!1),F=y("");const M=y(!0),a=L({uid:void 0,profileUid:void 0,codingStandardUid:void 0,name:"",code:"",description:""});function ie(){const i={profileUid:s?.uid,codingStandardUid:a.codingStandardUid,name:a.name,code:a.code,description:a.description};S(ye,{payload:i},"createProfileMapping").then(e=>c.addProfileMapping(e))}function de(){const i={profileUid:s?.uid,codingStandardUid:a.codingStandardUid,name:a.name,code:a.code,description:a.description};S(ve,{uid:a.uid,payload:i},"updateProfileMapping").then(e=>c.updateProfileMapping(e))}function $(i,e={}){M.value=i,h.value=!0,F.value=(i?"CREATE":"EDIT")+" CONCEPT MAPPING",i?Object.assign(a,{}):Object.assign(a,{...e})}function le(){M.value===!0&&ie(),M.value===!1&&de(),h.value=!1}return(i,e)=>{const g=A("fel-button"),E=A("fel-heading"),ae=A("fel-accordion"),O=A("fel-modal");return r(),d(m,null,[t("div",ke,[P(E,{title:"Analyses Profiles"},{default:x(()=>[P(g,{onClick:e[0]||(e[0]=o=>N(!0))},{default:x(()=>e[16]||(e[16]=[B("Add Analyses Profile")])),_:1})]),_:1}),t("div",we,[l(" Profiles List "),t("section",Pe,[t("div",Se,[e[17]||(e[17]=t("div",{class:"p-4 border-b border-border"},[t("h3",{class:"text-sm font-medium text-muted-foreground"},"Profiles")],-1)),t("div",Ae,[t("ul",Ue,[(r(!0),d(m,null,v(ee.value,o=>(r(),d("li",{key:o.uid,onClick:T(f=>oe(o),["prevent","stop"]),class:z(["rounded-md p-2 cursor-pointer transition-colors duration-200",o?.uid===n(s)?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[t("div",Me,[t("span",Ee,u(o?.name),1),o?.keyword?(r(),d("span",Te,u(o?.keyword),1)):l("v-if",!0)]),o?.description?(r(),d("p",Ve,u(o?.description),1)):l("v-if",!0)],10,Ce))),128))])])])]),l(" Profile Details "),n(s)?.uid!==void 0?(r(),d("section",De,[t("div",je,[l(" Header "),t("div",Ne,[t("div",Fe,[t("div",$e,[t("div",Oe,[t("h2",Le,u(n(s)?.name),1),n(s)?.keyword?(r(),d("span",Be,u(n(s)?.keyword),1)):l("v-if",!0)]),n(s)?.description?(r(),d("p",ze,u(n(s)?.description),1)):l("v-if",!0)]),t("div",Ie,[t("button",{onClick:e[1]||(e[1]=o=>N(!1,n(s))),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},e[18]||(e[18]=[t("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[t("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]))])])]),l(" Tabs "),t("nav",Re,[t("div",He,[(r(),d(m,null,v(Z,o=>t("button",{key:o,class:z(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n(b)===o?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:f=>V(b)?b.value=o:b=o},u(o),11,Ye)),64))])]),l(" Content "),t("div",Ge,[t("div",Je,[l(" Analyses Services Tab "),n(b)==="analyses-services"?(r(),d("div",Ke,[t("div",Qe,[(r(!0),d(m,null,v(C.value,o=>(r(),d("div",{key:o[0],class:"space-y-4"},[P(ae,null,{title:x(()=>[t("span",We,u(o[0]),1)]),body:x(()=>[t("ul",Ze,[(r(!0),d(m,null,v(o[1],f=>(r(),d("li",{key:f?.uid,class:"flex items-start space-x-2"},[t("div",qe,[p(t("input",{type:"checkbox",id:`toggle-${f?.uid}`,"onUpdate:modelValue":ue=>f.checked=ue,class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,Xe),[[I,f.checked]])]),t("label",{for:`toggle-${f?.uid}`,class:"text-sm text-foreground"},u(f?.name),9,et)]))),128))])]),_:2},1024)]))),128))]),t("div",tt,[t("button",{onClick:e[2]||(e[2]=o=>se()),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Profile ")])])):l("v-if",!0),l(" Mappings Tab "),n(b)==="mappings"?(r(),d("div",ot,[t("div",st,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-foreground"},"Concept Mappings",-1)),t("button",{onClick:e[3]||(e[3]=o=>$(!0)),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"},e[19]||(e[19]=[t("span",{class:"mr-2"},"+",-1),B(" Add Mapping ")]))]),t("div",nt,[t("table",rt,[e[21]||(e[21]=t("thead",null,[t("tr",{class:"border-b border-border bg-muted/50"},[t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Name"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Code"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Standard"),t("th",{class:"px-6 py-3 text-right text-sm font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",null,[(r(!0),d(m,null,v(re.value,o=>(r(),d("tr",{key:o.uid,class:"hover:bg-accent/50 transition-colors duration-200"},[t("td",it,[t("div",dt,u(o?.name),1),o?.description?(r(),d("div",lt,u(o?.description),1)):l("v-if",!0)]),t("td",at,u(o?.code),1),t("td",ut,u(o?.codingStandard?.name),1),t("td",ct,[t("button",{onClick:f=>$(!1,o),class:"inline-flex items-center px-3 py-1.5 border border-input bg-background text-foreground text-sm font-medium transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,pt)])]))),128))])])])])):l("v-if",!0),l(" Billing Tab "),n(b)==="billing"?(r(),d("div",ft,[P(n(K),{target:"profile",targetUid:n(s)?.uid},null,8,["targetUid"])])):l("v-if",!0)])])])])):(r(),d(m,{key:1},[l(" Empty State "),e[22]||(e[22]=me('<section class="col-span-9"><div class="rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"><div class="text-4xl text-muted-foreground">📋</div><h3 class="text-lg font-medium text-foreground">No Profile Selected</h3><p class="text-sm text-muted-foreground">Select a profile from the list to view its details</p></div></section>',1))],2112))])]),l(" Profile Form Modal "),n(_)?(r(),R(O,{key:0,onClose:e[10]||(e[10]=o=>V(_)?_.value=!1:_=!1)},{header:x(()=>[t("h3",mt,u(n(D)),1)]),body:x(()=>[t("form",{onSubmit:T(ne,["prevent"]),class:"p-6 space-y-6"},[t("div",gt,[t("label",xt,[e[23]||(e[23]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Profile Name",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>n(s).name=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter profile name"},null,512),[[k,n(s).name]])]),t("label",bt,[e[24]||(e[24]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Keyword",-1)),p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>n(s).keyword=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter keyword"},null,512),[[k,n(s).keyword]])]),t("label",yt,[e[26]||(e[26]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>n(s).departmentUid=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[e[25]||(e[25]=t("option",{value:""},"Select department",-1)),(r(!0),d(m,null,v(X.value,o=>(r(),d("option",{key:o.uid,value:o.uid},u(o.name),9,vt))),128))],512),[[H,n(s).departmentUid]])]),t("label",_t,[e[27]||(e[27]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),P(n(J),{modelValue:n(s).sampleTypes,"onUpdate:modelValue":e[7]||(e[7]=o=>n(s).sampleTypes=o),options:q.value,multiple:!0,"track-by":"uid",label:"name",placeholder:"Select sample types",class:"multiselect-primary"},null,8,["modelValue","options"])]),t("label",ht,[e[28]||(e[28]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),p(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>n(s).description=o),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter profile description"},null,512),[[k,n(s).description]])]),t("div",kt,[p(t("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":e[9]||(e[9]=o=>n(s).active=o),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[I,n(s).active]]),e[29]||(e[29]=t("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Active",-1))])]),e[30]||(e[30]=t("div",{class:"pt-4"},[t("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):l("v-if",!0),l(" Mapping Form Modal "),n(h)?(r(),R(O,{key:1,onClose:e[15]||(e[15]=o=>V(h)?h.value=!1:h=!1)},{header:x(()=>[t("h3",wt,u(n(F)),1)]),body:x(()=>[t("form",{onSubmit:T(le,["prevent"]),class:"p-6 space-y-6"},[t("div",Pt,[t("label",St,[e[32]||(e[32]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Coding Standard",-1)),p(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>a.codingStandardUid=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[e[31]||(e[31]=t("option",{value:""},"Select standard",-1)),(r(!0),d(m,null,v(n(c).codingStandards,o=>(r(),d("option",{key:o.uid,value:o.uid},u(o.name),9,At))),128))],512),[[H,a.codingStandardUid]])]),t("label",Ut,[e[33]||(e[33]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Name",-1)),p(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>a.name=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping name"},null,512),[[k,a.name]])]),t("label",Ct,[e[34]||(e[34]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Code",-1)),p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>a.code=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping code"},null,512),[[k,a.code]])]),t("label",Mt,[e[35]||(e[35]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),p(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=o=>a.description=o),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter mapping description"},null,512),[[k,a.description]])])]),e[36]||(e[36]=t("div",{class:"pt-4"},[t("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):l("v-if",!0)],64)}}});const $t=ge(Et,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesProfiles.vue"]]);export{$t as default};
