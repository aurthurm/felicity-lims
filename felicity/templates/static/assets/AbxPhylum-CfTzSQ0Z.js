const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as R,u as G,a0 as g,ah as L,a5 as O,a6 as z,_ as Q,r,c as E,o as u,z as l,A as C,C as T,a,K as o,M as y,F as H,H as Y,I as _,B as j,D as J,al as W}from"./index-OdhKCqIc.js";import{c as K,a as X,u as Z,b as S}from"./index.esm-BfHj8iGm.js";import{q as $,r as ee,C as te,F as oe}from"./microbiology.mutations-cVAbKt4K.js";import{E as le,a as ne,b as ae,c as se,d as re}from"./EmptyTitle-aCQRDpx3.js";const ie=R({__name:"AbxPhylum",setup(B,{expose:e}){e();const M=O(()=>z(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),{withClientMutation:t,withClientQuery:v}=G();let x=g(!1),i=g("");const d=g(!0),m=g(null),f=K({name:X().trim().required("Name is required"),kingdom:K().required("Kingdom is required")}),{handleSubmit:h,resetForm:k,setValues:w,errors:A}=Z({validationSchema:f,initialValues:{name:"",kingdom:null}}),{value:s}=S("name"),{value:D}=S("kingdom"),c=g([]),F=g([]);L(()=>{v($,{},"abxKingdomAll").then(n=>{n&&(F.value=n)}),v(ee,{},"abxPhylumAll").then(n=>{n&&(c.value=n)})});function q(n,b={}){d.value=n,x.value=!0,i.value=(n?"Create":"Edit")+" Phylum",n?(m.value=null,k()):(m.value=b.uid??null,w({name:b.name??"",kingdom:b.kingdom??null}))}const U=h(n=>{const b={name:n.name,kingdomUid:n.kingdom?.uid};d.value===!0&&t(te,{payload:b},"createAbxPhylum").then(p=>{p&&c.value.unshift(p)}),d.value===!1&&m.value&&t(oe,{uid:m.value,payload:b},"updateAbxPhylum").then(p=>{if(p){const N=c.value.findIndex(P=>P.uid==p.uid);N>-1&&(c.value=[...c.value.map((P,I)=>I===N?p:P)])}}),x.value=!1}),V={VueMultiselect:M,withClientMutation:t,withClientQuery:v,get showModal(){return x},set showModal(n){x=n},get formTitle(){return i},set formTitle(n){i=n},formAction:d,currentUid:m,phylumSchema:f,handleSubmit:h,resetForm:k,setValues:w,errors:A,name:s,kingdom:D,abxPhylums:c,abxKingdoms:F,FormManager:q,saveForm:U,get Empty(){return re},get EmptyContent(){return se},get EmptyDescription(){return ae},get EmptyHeader(){return ne},get EmptyTitle(){return le}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),de={class:"space-y-6"},me={class:"flex items-center justify-between"},ue={class:"border border-border bg-card rounded-lg shadow-md"},fe={class:"relative w-full overflow-auto"},ce=["onClick"],be={class:"text-xl font-semibold text-foreground"},pe={class:"grid grid-cols-2 gap-4"},ge={class:"block"},ye={key:0,class:"text-sm text-destructive"},xe={class:"block"},_e={key:0,class:"text-sm text-destructive"};function ve(B,e,M,t,v,x){const i=r("TableHead"),d=r("TableRow"),m=r("TableHeader"),f=r("TableCell"),h=r("TableEmpty"),k=r("TableBody"),w=r("Table"),A=r("Modal");return u(),E(H,null,[l("div",de,[l("div",me,[e[5]||(e[5]=l("h2",{class:"text-2xl font-semibold text-foreground"},"Phyla",-1)),l("button",{onClick:e[0]||(e[0]=s=>t.FormManager(!0)),class:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Add Phylum ")]),l("div",ue,[l("div",fe,[a(w,{class:"w-full caption-bottom text-sm"},{default:o(()=>[a(m,{class:"[&_tr]:border-b"},{default:o(()=>[a(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[6]||(e[6]=[y("Name",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[7]||(e[7]=[y("Kingdom",-1)])]),_:1}),a(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[8]||(e[8]=[l("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),a(k,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(u(!0),E(H,null,Y(t.abxPhylums,s=>(u(),C(d,{key:s?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(f,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[y(_(s?.name),1)]),_:2},1024),a(f,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[y(_(s?.kingdom?.name),1)]),_:2},1024),a(f,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[l("button",{onClick:D=>t.FormManager(!1,s),class:"text-primary hover:text-primary/80"}," Edit ",8,ce)]),_:2},1024)]),_:2},1024))),128)),!t.abxPhylums||t.abxPhylums.length===0?(u(),C(h,{key:0,colspan:3},{default:o(()=>[a(t.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[a(t.EmptyContent,null,{default:o(()=>[a(t.EmptyHeader,null,{default:o(()=>[a(t.EmptyTitle,null,{default:o(()=>[...e[9]||(e[9]=[y("No phyla found",-1)])]),_:1}),a(t.EmptyDescription,null,{default:o(()=>[...e[10]||(e[10]=[y("Add a phylum to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})])])]),t.showModal?(u(),C(A,{key:0,onClose:e[4]||(e[4]=s=>t.showModal=!1),"content-width":"w-1/2"},{header:o(()=>[l("h3",be,_(t.formTitle),1)]),body:o(()=>[l("form",{onSubmit:e[3]||(e[3]=j((...s)=>t.saveForm&&t.saveForm(...s),["prevent"])),class:"space-y-6 p-4"},[l("div",pe,[l("label",ge,[e[11]||(e[11]=l("span",{class:"text-sm font-medium text-foreground"},"Phylum Name",-1)),J(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),placeholder:"Name ..."},null,512),[[W,t.name]]),t.errors.name?(u(),E("p",ye,_(t.errors.name),1)):T("",!0)]),l("label",xe,[e[12]||(e[12]=l("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),a(t.VueMultiselect,{modelValue:t.kingdom,"onUpdate:modelValue":e[2]||(e[2]=s=>t.kingdom=s),options:t.abxKingdoms,multiple:!1,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),t.errors.kingdom?(u(),E("p",_e,_(t.errors.kingdom),1)):T("",!0)])]),e[13]||(e[13]=l("hr",{class:"border-border"},null,-1)),e[14]||(e[14]=l("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Phylum ",-1))],32)]),_:1})):T("",!0)],64)}const Te=Q(ie,[["render",ve],["__scopeId","data-v-bc047b6b"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxPhylum.vue"]]);export{Te as default};
