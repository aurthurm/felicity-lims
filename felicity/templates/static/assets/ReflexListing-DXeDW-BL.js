import{a0 as D,f as E,a7 as b,g as A,ad as T,_ as F,r as p,c as g,o as x,A as e,C as S,E as L,a as v,N as d,P as R,J as w,K as N,L as _,D as V,F as k,a2 as M}from"./index-C5OmCQ1r.js";import{u as B,A as U,E as j}from"./reflex.mutations-B2ihNwEb.js";const O=D({__name:"ReflexListing",setup(C,{expose:t}){t();const{withClientMutation:f}=E(),o=B();let i=b(!1),u=b(""),l=A({});const n=b(!0);T(async()=>{o.fetchAllReflexRules()});function m(){const r={name:l.name,description:l.description};f(U,{payload:r},"createReflexRule").then(a=>o.addReflexRule(a))}function c(){const r={name:l.name,description:l.description};f(j,{uid:l.uid,payload:r},"updateReflexRule").then(a=>o.updateReflexRule(a))}function s(r,a={}){n.value=r,i.value=!0,u.value=(r?"CREATE":"EDIT")+" REFLEX RULE",r?Object.assign(l,{}):Object.assign(l,{...a})}function y(){n.value===!0&&m(),n.value===!1&&c(),i.value=!1}const h={withClientMutation:f,reflexStore:o,get showModal(){return i},set showModal(r){i=r},get formTitle(){return u},set formTitle(r){u=r},get form(){return l},set form(r){l=r},formAction:n,addReflexRule:m,editReflexRule:c,FormManager:s,saveForm:y};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),P={class:"space-y-6"},I={class:"rounded-md border border-border bg-card p-6"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-border"},X={class:"divide-y divide-border bg-background"},q={class:"whitespace-nowrap px-4 py-2 text-sm text-foreground"},z={class:"whitespace-nowrap px-4 py-2 text-sm text-foreground"},G={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},H=["onClick"],Q={class:"text-xl font-semibold text-foreground"},W={class:"grid grid-cols-1 gap-4"},Y={class:"block"},Z={class:"block"};function $(C,t,f,o,i,u){const l=p("fel-button"),n=p("fel-heading"),m=p("router-link"),c=p("fel-modal");return x(),g(w,null,[e("div",P,[v(n,{title:"Reflex Rules"},{default:d(()=>[v(l,{onClick:t[0]||(t[0]=s=>o.FormManager(!0))},{default:d(()=>[...t[4]||(t[4]=[R("Add Reflex Rule",-1)])]),_:1})]),_:1}),e("div",I,[e("div",J,[e("table",K,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-sm font-semibold text-foreground"},"Title"),e("th",{class:"px-4 py-2 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",X,[(x(!0),g(w,null,N(o.reflexStore.reflexRules,s=>(x(),g("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",q,[v(m,{to:{name:"reflex-detail",params:{uid:s?.uid}},class:"text-primary hover:text-primary/80"},{default:d(()=>[R(_(s?.name),1)]),_:2},1032,["to"])]),e("td",z,_(s?.description),1),e("td",G,[e("button",{onClick:y=>o.FormManager(!1,s),class:"text-primary hover:text-primary/80"}," Edit ",8,H)])]))),128))])])])])]),o.showModal?(x(),S(c,{key:0,onClose:t[3]||(t[3]=s=>o.showModal=!1),"content-width":"w-1/2"},{header:d(()=>[e("h3",Q,_(o.formTitle),1)]),body:d(()=>[e("form",{onSubmit:V(o.saveForm,["prevent"]),class:"space-y-6 p-4"},[e("div",W,[e("label",Y,[t[6]||(t[6]=e("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),k(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[1]||(t[1]=s=>o.form.name=s),placeholder:"Name ..."},null,512),[[M,o.form.name]])]),e("label",Z,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),k(e("textarea",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[2]||(t[2]=s=>o.form.description=s),placeholder:"Description ...",rows:"3"},null,512),[[M,o.form.description]])])]),t[8]||(t[8]=e("hr",{class:"border-border"},null,-1)),t[9]||(t[9]=e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Reflex Rule ",-1))],32)]),_:1})):L("",!0)],64)}const oe=F(O,[["render",$],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/reflex/ReflexListing.vue"]]);export{oe as default};
