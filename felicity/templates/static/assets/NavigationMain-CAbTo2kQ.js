const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Logo-BY4Gso2Y.js","assets/index-C5OmCQ1r.js","assets/index-DNLAO2yS.css","assets/UserPreferences-C5NLqUPT.js","assets/setup-BMS7aX7t.js"])))=>i.map(i=>d[i]);
import{a0 as J,af as X,a4 as Z,a7 as f,a5 as $,ab as ee,h as y,f as oe,ag as re,ad as R,ae as l,a1 as V,a6 as B,ah as te,ai as ne,_ as se,r as h,c as a,A as r,a as n,C as j,E as p,F as v,N as c,H as w,J as _,K as C,L as b,P as S,o as s,a9 as ie,Q as ae,D as le}from"./index-C5OmCQ1r.js";import{u as de}from"./notification-DXGaL9Y7.js";import{s as ue}from"./index-K3ETbf84.js";const ce=J({__name:"NavigationMain",setup(G,{expose:e}){e();const M=V(()=>B(()=>import("./Logo-BY4Gso2Y.js"),__vite__mapDeps([0,1,2]))),o=V(()=>B(()=>import("./UserPreferences-C5NLqUPT.js"),__vite__mapDeps([3,1,2,4]))),{isFullscreen:L,toggle:O}=X(),m=Z(),i=f(!1),g=f(!1);$(()=>m.currentRoute.value,(u,N)=>{u.path!==N?.path&&(i.value=!1,g.value=!1)});const d=ee(),t=y(()=>d.auth?.activeLaboratory),x=y(()=>d.auth?.laboratories),z=y(()=>{const u=d.auth?.user?.firstName||"",N=d.auth?.user?.lastName||"";return`${u} ${N}`.trim()}),{errors:H,clearErrors:K,withClientMutation:A}=oe(),Q=f(!1),q=f(!1),P=de(),W=u=>P.showNotifications(u),{loadPreferredTheme:I}=re();R(()=>{I()});const Y=y(()=>[{id:"patients-compact",label:"Compact",icon:"bullseye",route:"/patients-compact",guard:l.PATIENTS_COMPACT},{id:"patients",label:"Patients",icon:"user-injured",route:"/patients",guard:l.PATIENTS},{id:"clients",label:"Clients",icon:"clinic-medical",route:"/clients",guard:l.CLIENTS},{id:"samples",label:"Samples",icon:"vial",route:"/samples",guard:l.SAMPLES},{id:"worksheets",label:"WorkSheets",icon:"grip-vertical",route:"/worksheets",guard:l.WORKSHEETS},{id:"quality-control",label:"QControl",icon:"anchor",route:"/quality-control",guard:l.QC_SAMPLES},{id:"notice-manager",label:"NoticeManager",icon:"bell",route:"/notice-manager",guard:l.NOTICE_MANAGER},{id:"bio-banking",label:"BioBanking",icon:"database",route:"/bio-banking",guard:l.BIO_BANKING},{id:"shipments",label:"Referrals",icon:"truck",route:"/shipments",guard:l.REFERRAL},{id:"inventory",label:"Inventory",icon:"fa-solid fa-boxes-stacked",route:"/inventory",guard:l.INVENTORY},{id:"schemes",label:"Projects",icon:"project-diagram",route:"/schemes",guard:l.SCHEMES},{id:"documents",label:"Documents",icon:"file",route:"/documents",guard:l.DOCUMENT}]),T=()=>{i.value=!1,g.value=!1},U=u=>{u.key==="Escape"&&T()};R(()=>{document.addEventListener("keydown",U)});const D=f(!1),E=f(null),k=f(!1),F={Logo:M,UserPreferences:o,isFullscreen:L,toggle:O,router:m,menuOpen:i,dropdownOpen:g,authStore:d,activeLaboratory:t,userLaboratories:x,userFullName:z,errors:H,clearErrors:K,withClientMutation:A,showErrors:Q,showPreferences:q,notificationStore:P,toggleNotifications:W,loadPreferredTheme:I,navItems:Y,closeMenus:T,handleKeyDown:U,showModal:D,targetLaboratoryUid:E,switching:k,switchLabNow:()=>{if(!E.value){alert("Please select a laboratory to switch to.");return}k.value=!0,setTimeout(async()=>{await A(te,{userUid:d.auth?.user?.uid,laboratoryUid:E.value},"setUserActiveLaboratory").then(u=>d.logout()).catch(u=>console.error).finally(()=>{D.value=!1,k.value=!1})},3e3)},get guards(){return ue},get VITE_USE_MEGA_MENU(){return ne}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),fe={id:"main-nav",class:"flex items-center px-6 bg-primary border-b border-border",role:"navigation","aria-label":"Main Navigation"},me={class:"flex-1"},ge={class:"flex text-right align-middle"},pe={class:"text-left text-2xl font-medium ml-2"},be={key:0,class:"mx-8 border-l border-border my-2","aria-hidden":"true"},ve=["aria-expanded"],xe={class:"grid grid-cols-3 gap-4",role:"menu","aria-label":"Main Menu"},ye={class:"mr-4","aria-hidden":"true"},he={class:"text-lg font-medium"},we={class:"flex items-center space-x-4"},_e={class:"bg-destructive text-destructive-foreground text-xs rounded-full px-2 py-1"},Ee={key:1,class:"border-l border-border h-6","aria-hidden":"true"},ke={class:"px-4 flex text-right items-center relative"},Ne={class:"flex justify-center items-center h-8 w-8 rounded-full border-2 border-border hover:border-primary text-primary-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary cursor-pointer","aria-hidden":"true",tabindex:"0"},Ce={class:"relative"},Se=["aria-expanded"],Me={class:"text-lg font-medium uppercase"},Le=["aria-label"],Oe=["aria-label"],Ae={class:"flex items-center justify-between"},Pe={key:0,class:"text-muted-foreground italic"},Ie={key:1,"aria-label":"Error messages",class:"divide-y divide-border"},Te={class:"block whitespace-pre-wrap"},Ue={action:"post",class:"p-6 space-y-6"},De={class:"space-y-4"},Fe={class:"grid grid-cols-2 gap-4"},Re={class:"col-span-2 space-y-2"},Ve=["value"],Be=["disabled"],je={key:0,class:"flex items-center justify-center gap-2"},Ge={key:1};function ze(G,e,M,o,L,O){const m=h("router-link"),i=h("font-awesome-icon"),g=h("fel-drawer"),d=h("fel-modal");return s(),a(_,null,[r("nav",fe,[r("div",me,[r("div",ge,[n(m,{to:"/",id:"brand",class:"flex items-center md:w-auto text-primary-foreground/80 hover:text-primary-foreground transition-colors","aria-label":"Felicity LIMS Home"},{default:c(()=>[n(o.Logo),r("h1",pe,b(o.activeLaboratory?.name??"Felicity LIMS"),1)]),_:1}),o.VITE_USE_MEGA_MENU?(s(),a("span",be)):p("",!0),o.VITE_USE_MEGA_MENU?(s(),a("button",{key:1,onClick:e[0]||(e[0]=t=>o.menuOpen=!o.menuOpen),class:"hidden md:flex md:items-center focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md p-2","aria-expanded":o.menuOpen,"aria-controls":"main-menu"},[e[17]||(e[17]=r("span",{class:"text-xl font-medium mr-2 text-primary-foreground/80 hover:text-primary-foreground uppercase"},"Menu",-1)),n(i,{icon:o.menuOpen?"chevron-up":"chevron-down",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,ve)):p("",!0),v(r("div",{id:"main-menu",class:"absolute left-64 top-12 mt-1 p-4 w-1/2 bg-primary rounded-md shadow-lg border border-border z-20",onClick:e[2]||(e[2]=t=>o.menuOpen=!1)},[r("div",xe,[(s(!0),a(_,null,C(o.navItems,t=>v((s(),j(m,{key:t.id,to:t.route,id:`${t.id}-link`,class:"flex items-center py-2 px-4 text-primary-foreground hover:bg-accent hover:text-accent-foreground rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",role:"menuitem",onClick:e[1]||(e[1]=x=>o.menuOpen=!1)},{default:c(()=>[r("span",ye,[n(i,{icon:t.icon},null,8,["icon"])]),r("span",he,b(t.label),1)]),_:2},1032,["to","id"])),[[w,o.guards.canAccessPage(t.guard)]])),128))])],512),[[w,o.menuOpen]])])]),r("div",we,[o.errors.length>0?(s(),a("button",{key:0,class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[3]||(e[3]=t=>o.showErrors=!0),"aria-label":"Show errors"},[n(i,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[18]||(e[18]=r("span",{class:"text-lg font-medium mr-2 uppercase"},"Errors",-1)),r("span",_e,b(o.errors.length),1)])):p("",!0),o.errors.length>0?(s(),a("span",Ee)):p("",!0),r("button",{class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[4]||(e[4]=t=>o.toggleNotifications(!0)),"aria-label":"Show notifications"},[n(i,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[19]||(e[19]=r("span",{class:"text-lg font-medium uppercase"},"Notifications",-1))]),e[23]||(e[23]=r("span",{class:"border-l border-border h-6","aria-hidden":"true"},null,-1)),v(n(m,{to:"/admin",class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":"Settings"},{default:c(()=>[n(i,{icon:"cog",class:"mr-2","aria-hidden":"true"}),e[20]||(e[20]=r("span",{class:"text-lg font-medium uppercase"},"Settings",-1))]),_:1},512),[[w,o.guards.canAccessPage(o.guards.pages.ADMINISTRATION)]]),r("div",ke,[r("span",Ne,[n(i,{icon:"user"})]),r("div",Ce,[r("button",{onClick:e[5]||(e[5]=t=>o.dropdownOpen=!o.dropdownOpen),class:"text-primary-foreground/80 hover:text-primary-foreground hidden md:flex md:items-center ml-2 focus:outline-none rounded-lg p-1 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":o.dropdownOpen,"aria-controls":"user-menu"},[r("span",Me,b(o.userFullName),1),n(i,{icon:o.dropdownOpen?"chevron-up":"chevron-down",class:"ml-2 text-primary-foreground/80 transition-transform","aria-hidden":"true"},null,8,["icon"])],8,Se),v(r("div",{id:"user-menu",class:"absolute right-0 top-11 py-2 w-48 bg-popover text-popover-foreground rounded-lg shadow-xl z-20",onClick:e[8]||(e[8]=t=>o.dropdownOpen=!1),role:"menu"},[r("button",{class:"w-full text-left cursor-pointer py-2 px-4 flex items-center hover:bg-primary hover:text-primary-foreground uppercase transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground rounded",role:"menuitem",onClick:e[6]||(e[6]=t=>{o.showPreferences=!0,o.dropdownOpen=!1})},[n(i,{icon:"user-gear",class:"mr-2","aria-hidden":"true"}),e[21]||(e[21]=S(" Preferences ",-1))]),r("button",{onClick:e[7]||(e[7]=t=>o.authStore.logout()),class:"w-full text-left cursor-pointer py-2 px-4 flex items-center hover:bg-primary hover:text-primary-foreground uppercase transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground rounded",role:"menuitem"},[n(i,{icon:"sign-out-alt",class:"mr-2","aria-hidden":"true"}),e[22]||(e[22]=S(" Log out ",-1))])],512),[[w,o.dropdownOpen]])])]),(o.userLaboratories?.length??0)>1?(s(),a("button",{key:2,onClick:e[9]||(e[9]=t=>o.showModal=!0),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":o.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n(i,{icon:"shuffle",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"})],8,Le)):p("",!0),r("button",{onClick:e[10]||(e[10]=(...t)=>o.toggle&&o.toggle(...t)),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":o.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n(i,{icon:o.isFullscreen?"compress":"expand"},null,8,["icon"])],8,Oe)])]),n(g,{show:o.showErrors,onClose:e[12]||(e[12]=t=>o.showErrors=!1)},{header:c(()=>[r("div",Ae,[e[24]||(e[24]=r("h3",{class:"font-semibold text-lg"},"Errors List",-1)),r("button",{class:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-secondary transition-colors focus:outline-none",onClick:e[11]||(e[11]=t=>o.clearErrors()),"aria-label":"Clear all errors"},[n(i,{icon:"trash-alt",class:"w-5 h-5","aria-hidden":"true"})])])]),body:c(()=>[o.errors.length===0?(s(),a("p",Pe,"No errors to display")):(s(),a("ul",Ie,[(s(!0),a(_,null,C(o.errors,(t,x)=>(s(),a("li",{key:x,class:"mb-2 p-3 bg-background rounded text-sm border-l-4 border-destructive"},[r("code",Te,b(t),1)]))),128))]))]),_:1},8,["show"]),n(g,{show:o.showPreferences,onClose:e[13]||(e[13]=t=>o.showPreferences=!1)},{header:c(()=>[...e[25]||(e[25]=[r("div",{class:"flex items-center justify-between"},[r("h3",{class:"font-semibold text-lg"},"Your Preferences")],-1)])]),body:c(()=>[n(o.UserPreferences)]),_:1},8,["show"]),o.showModal?(s(),j(d,{key:0,onClose:e[16]||(e[16]=t=>o.showModal=!1)},{header:c(()=>[...e[26]||(e[26]=[r("h3",{class:"text-lg font-bold text-foreground"},"Current Laboratory Switcher",-1)])]),body:c(()=>[r("form",Ue,[r("div",De,[r("div",Fe,[r("label",Re,[e[28]||(e[28]=r("span",{class:"text-md font-medium"},"Laboratory Name",-1)),v(r("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[14]||(e[14]=t=>o.targetLaboratoryUid=t)},[e[27]||(e[27]=r("option",{value:""},"Select Department",-1)),(s(!0),a(_,null,C(o.userLaboratories,t=>(s(),a("option",{key:t.uid,value:t?.uid},b(t.name),9,Ve))),128))],512),[[ie,o.targetLaboratoryUid]])])])]),r("button",{type:"button",onClick:e[15]||(e[15]=le(t=>o.switchLabNow(),["prevent"])),class:ae(["w-full rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring",o.switching?"bg-primary/50 text-primary-foreground cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"]),disabled:o.switching},[o.switching?(s(),a("span",je,[...e[29]||(e[29]=[r("svg",{class:"w-4 h-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3.5-3.5L12 0v4a8 8 0 11-8 8z"})],-1),S(" Switchingâ€¦ ",-1)])])):(s(),a("span",Ge,"Switch Laboratory"))],10,Be)])]),_:1})):p("",!0)],64)}const We=se(ce,[["render",ze],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/nav/NavigationMain.vue"]]);export{We as default};
