import{P as A,e as B,aa as F,Z as l,f as G,r as N,o as a,c as p,b as e,F as x,D as j,a1 as _,E as d,x as S,K as g,z as T,A as f,V as k,a as $,a2 as L,W as q,J as z,L as J,ar as K,aM as P,_ as Q}from"./index-fa13e788.js";import{U as W}from"./_queries-fa6c96fd.js";import{e as Z,f as H,g as I}from"./grind.queries-2a7b3de7.js";import O from"./vue-multiselect.esm-d8a2873c.js";const R=e("h3",{class:"text-gray-700 font-medium"},"Milestones",-1),X=e("span",null,"+ Add New",-1),Y=[X],ee=["onDblclick"],te={class:"absolute left-0 top-0 transform -translate-x-1/2 bg-white p-1 border border-gray-300 rounded-full w-4 h-4 flex items-center justify-center"},se={class:"mb-6"},oe={class:"font-medium"},ne={class:"text-sm text-gray-500"},re={class:"text-lg font-semibold"},le={class:"mb-4"},ie=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"title"},[J(" Title "),e("span",{class:"text-red-500"},"*")],-1),ae={class:"mb-4"},de=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"description"}," Description ",-1),ce=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assignee",-1),ue={class:"my-4 flex justify-start"},me=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"complete"}," Complete ",-1),pe={class:"flex justify-end"},fe={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-sky-600 border border-transparent rounded-md shadow-sm hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500"},be=A({__name:"ErrandMilestone",props:{errandUid:{type:String,required:!0}},setup(w){const c=w,{withClientMutation:b,withClientQuery:y}=B();F(()=>{u(),V()});const h=l([]);function u(){y(Z,{errandUid:c.errandUid},"grindMilestonesByErrand").then(o=>{o&&(h.value=o)})}const r=l(!1),i=l(!1),m=l(""),s=G({});function M(){r.value=!0,m.value="Add Milestone",i.value=!0,K(s)}function U(o){r.value=!0,m.value="Edit Milestone",i.value=!1,P(s,o)}function C(){r.value=!1;const o={title:s.title,description:s.description,complete:s.complete,assigneeUid:s.assignee?.uid,errandUid:c.errandUid};i.value?b(H,{payload:{...o,errandUid:c.errandUid}},"createGrindMilestone").then(()=>u()):b(I,{uid:s.uid,payload:o},"updateGrindMilestone").then(()=>u())}function D({firstName:o,lastName:n}){return`${o} ${n}`}const v=l();function V(){y(W,{first:100},"userAll").then(o=>{v.value=o.items})}return(o,n)=>{const E=N("modal");return a(),p(x,null,[e("div",{class:"flex justify-between items-center"},[R,e("button",{class:"text-sm text-gray-600 hover:text-gray-800 flex items-center gap-1",onClick:M},[...Y])]),(a(!0),p(x,null,j(h.value,t=>(a(),p("div",{key:t.uid,class:_(["pl-6 border-l-2 relative",{"border-green-200":t.complete,"border-red-200":!t.complete}]),onDblclick:ye=>U(t)},[e("div",te,[e("div",{class:_(["w-2 h-2 rounded-full",{"bg-green-500":t.complete,"bg-red-500":!t.complete}])},null,2)]),e("div",se,[e("h4",oe,d(t.title),1),e("p",ne,d(t.description),1)])],42,ee))),128)),r.value?(a(),S(E,{key:0,onClose:n[4]||(n[4]=t=>r.value=!1),"content-width":"w-full max-w-2xl"},{header:g(()=>[e("h3",re,d(m.value),1)]),body:g(()=>[e("form",{onSubmit:T(C,["prevent"])},[e("div",le,[ie,f(e("input",{id:"title","onUpdate:modelValue":n[0]||(n[0]=t=>s.title=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter errand title"},null,512),[[k,s.title]])]),e("div",ae,[de,f(e("textarea",{id:"description","onUpdate:modelValue":n[1]||(n[1]=t=>s.description=t),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter errand description"},null,512),[[k,s.description]])]),e("div",null,[ce,$(L(O),{modelValue:s.assignee,"onUpdate:modelValue":n[2]||(n[2]=t=>s.assignee=t),options:v.value,"track-by":"uid",searchable:!0,"custom-label":D,placeholder:"Select assignee"},null,8,["modelValue","options"])]),e("div",ue,[f(e("input",{id:"complete","onUpdate:modelValue":n[3]||(n[3]=t=>s.complete=t),type:"checkbox",class:"mr-2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[q,s.complete]]),me]),e("div",pe,[e("button",fe,d(i.value?"Create":"Update"),1)])],32)]),_:1})):z("",!0)],64)}}}),ge=Q(be,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/_id/ErrandMilestone.vue"]]);export{ge as default};
