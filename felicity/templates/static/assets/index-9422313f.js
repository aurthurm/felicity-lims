import{_ as $,C as re,A as de,D as ue,F as ce,w as _e}from"./shipment-53265c2d.js";import{f as pe,G as I,r as x,c as M,I as he,v as me,h as n,k as l,x as e,D as d,u as i,F as c,ak as p,B as F,A,al as L,y as B,j as X,ag as h,i as q,_ as fe}from"./_plugin-vue_export-helper-dacf3d65.js";import{a as ye,b as ve,c as xe,d as be}from"./reflex.mutations-6c38bb3c.js";import{v as C,d as b,a as v}from"./runtime-dom.esm-bundler-98433118.js";const ge={class:"mt-4 mb-2 text-xl text-gray-600 font-semibold tracking-wide"},ke={class:"leading-2 text-md italic tracking-wide"},we=e("hr",null,null,-1),Re=e("hr",null,null,-1),Ae=["onClick"],Ce={class:"flex justify-start items-center mb-2"},Ue=e("h4",{class:"text-l leading-4 italic"},"Reflex Action Brains",-1),Ve=["onClick"],Ee={class:"grid grid-cols-3 gap-4"},Fe={class:"flex justify-between items-center"},Be={class:"my-2 text-l text-gray-600 font-bold"},Ne=["onClick"],De=e("hr",{class:"my-2"},null,-1),Se=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Analyses Criteria",-1),Te={class:"flex justify-start items-baseline flex-wrap"},Oe={class:"flex"},je={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},$e={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},Ie=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Add New Analyses",-1),Me={class:"flex justify-start items-baseline flex-wrap"},Le={class:"flex"},Xe={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 focus:outline-none"},qe={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},Pe=e("h4",{class:"my-2 text-md text-gray-500 font-semibold"},"Finalise",-1),ze={class:"flex justify-start items-baseline flex-wrap"},Ge={class:"flex"},He={class:"px-2 py-1 border border-gray-500 bg-gray-500 text-white transition duration-300 focus:outline-none"},We={class:"px-2 py-1 border-gray-500 border text-gray-500 transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},Je={action:"post",class:"p-1"},Ke={class:"grid grid-cols-2 gap-x-4 mb-4"},Qe={class:"block col-span-1 mb-2"},Ye=e("span",{class:"text-gray-700"},"Level",-1),Ze={class:"block col-span-2 mb-2"},et=e("span",{class:"text-gray-700"},"Target Analyses",-1),tt=e("option",{value:""},null,-1),st=["value"],ot={class:"block col-span-2 mb-2"},nt=e("span",{class:"text-gray-700"},"Description",-1),lt=e("hr",null,null,-1),it={action:"post",class:"p-1"},at={class:"grid grid-cols-3 gap-x-4 mb-4"},rt={class:"block col-span-3 mb-2"},dt=e("span",{class:"text-gray-700"},"Description",-1),ut={id:"criteria"},ct=e("hr",null,null,-1),_t={class:"flex justify-between items-center py-2"},pt=e("h5",null,"Criteria",-1),ht=e("span",{class:"text-orange-600"},null,-1),mt=e("hr",{class:"mb-4"},null,-1),ft={class:"flex items-center justify-between"},yt={class:"flex items-bottom gap-x-2"},vt={class:"flex flex-col whitespace-nowrap mb-2"},xt=e("span",{class:"text-gray-700"},"Analysis",-1),bt=["onUpdate:modelValue","onChange"],gt=e("option",{value:""},null,-1),kt=["value"],wt={class:"flex flex-col whitespace-nowrap mb-2"},Rt=e("span",{class:"text-white"},".",-1),At=["onUpdate:modelValue"],Ct=e("option",{value:"eq"},"=",-1),Ut=e("option",{value:"gt"},">",-1),Vt=e("option",{value:"lt"},"<",-1),Et=e("option",{value:"neq"},"â‰ ",-1),Ft=[Ct,Ut,Vt,Et],Bt={class:"block col-span-1 mt-1"},Nt=e("span",{class:"text-gray-700"},"Result",-1),Dt=["onUpdate:modelValue"],St=["onUpdate:modelValue"],Tt=e("option",{value:""},null,-1),Ot=["value"],jt={class:""},$t=["onClick"],It=e("hr",null,null,-1),Mt={id:"add-new"},Lt=e("hr",null,null,-1),Xt={class:"flex justify-between items-center py-2"},qt=e("h5",null,"Add New",-1),Pt=e("span",{class:"text-orange-600"},null,-1),zt=e("hr",{class:"mb-4"},null,-1),Gt={class:"flex items-center justify-between"},Ht={class:"flex items-top gap-x-4"},Wt={class:"flex flex-col whitespace-nowrap mb-2"},Jt=e("span",{class:"text-gray-700"},"Analysis",-1),Kt=["onUpdate:modelValue"],Qt=e("option",{value:""},null,-1),Yt=["value"],Zt={class:"block col-span-1 mb-2"},es=e("span",{class:"text-gray-700"},"Count",-1),ts=["onUpdate:modelValue"],ss={class:""},os=["onClick"],ns=e("hr",null,null,-1),ls={id:"criteria"},is=e("hr",null,null,-1),as={class:"flex justify-between items-center py-2"},rs=e("h5",null,"Finalize",-1),ds=e("span",{class:"text-orange-600"},null,-1),us=e("hr",{class:"mb-4"},null,-1),cs={class:"flex items-center justify-between"},_s={class:"flex items-top gap-x-4"},ps={class:"flex flex-col whitespace-nowrap mb-2"},hs=e("span",{class:"text-gray-700"},"Analysis",-1),ms=["onUpdate:modelValue","onChange"],fs=e("option",{value:""},null,-1),ys=["value"],vs={class:"block col-span-1 mb-2"},xs=e("span",{class:"text-gray-700"},"Result",-1),bs=["onUpdate:modelValue"],gs=["onUpdate:modelValue"],ks=e("option",{value:""},null,-1),ws=["value"],Rs={class:""},As=["onClick"],Cs=e("hr",null,null,-1),Us=e("hr",null,null,-1),Vs=pe({__name:"index",setup(Es){const T=I(()=>$(()=>import("./SimpleModal-9e28c074.js"),["assets/SimpleModal-9e28c074.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js","assets/SimpleModal-f645a074.css"])),P=I(()=>$(()=>import("./Accordion-9e8fd080.js"),["assets/Accordion-9e8fd080.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js"])),m=re(),z=de(),{withClientMutation:V}=_e(),G=ue();let g=x(!1),E=x(""),_=M({});const k=x(!0);let w=x(!1),u=M({addNew:[],analysesValues:[],finalise:[]});he(async()=>{m.fetchReflexRuleByUid(G.params?.uid)});const H=a=>{const s=ce(a);return s.charAt(0).toUpperCase()+s.slice(1)},R=z.getAnalysesServicesSimple;function W(){const a={reflexRuleUid:m.reflexRule?.uid,level:_.level,description:_.description,analyses:_.analyses};V(ye,{payload:a},"createReflexAction").then(s=>m.addReflexAction(s))}function J(){const a={reflexRuleUid:m.reflexRule?.uid,level:_.level,description:_.description,analyses:_.analyses};V(ve,{uid:_.uid,payload:a},"updateReflexAction").then(s=>m.updateReflexAction(s))}function O(a,s={}){if(k.value=a,g.value=!0,E.value=(a?"CREATE":"EDIT")+" REFLEX ACTION",a)Object.assign(_,{});else{let f=[];s.analyses?.forEach(t=>f.push(t?.uid)),Object.assign(_,{...s,analyses:f})}}function K(){k.value===!0&&W(),k.value===!1&&J(),g.value=!1}const N=x();function Q(){const a={...u,reflexActionUid:N.value};V(xe,{payload:a},"createReflexBrain").then(s=>m.updateReflexBrain(s))}function Y(){const a={...u,reflexActionUid:N.value};V(be,{uid:u.uid,payload:a},"updateReflexBrain").then(s=>m.updateReflexBrain(s))}function Z(){u.analysesValues?.push({operator:"eq"})}function ee(a){u.analysesValues?.splice(a,1)}let D=x([]);function te(a,s){const f=R?.find(t=>t.uid===s.analysisUid);s.value=void 0,D.value=f?.resultOptions||[]}function se(){u.addNew?.push({})}function oe(a){u.addNew?.splice(a,1)}function ne(){u.finalise?.push({})}function le(a){u.finalise?.splice(a,1)}let S=x([]);function ie(a,s){const f=R?.find(t=>t.uid===s.analysisUid);s.value=void 0,S.value=f?.resultOptions||[]}function j(a,s={}){k.value=a,w.value=!0,E.value=(a?"CREATE":"EDIT")+" REFLEX BRAIN",N.value=s.uid,a?Object.assign(u,{}):Object.assign(u,{...s})}function ae(){k.value===!0&&Q(),k.value===!1&&Y(),w.value=!1}return(a,s)=>{const f=me("font-awesome-icon");return n(),l(c,null,[e("h3",ge,d(i(m).reflexRule?.name),1),e("p",ke,d(i(m).reflexRule?.description),1),we,e("button",{onClick:s[0]||(s[0]=t=>O(!0)),class:"my-4 px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Reflex Action "),Re,(n(!0),l(c,null,p(i(m).reflexRule?.reflexActions,t=>(n(),l("section",{class:"col-span-1",key:t?.uid},[F(i(P),null,{title:A(()=>[e("span",{class:"p-2",onClick:r=>O(!1,t)},[F(f,{icon:"edit",class:"text-md text-gray-400 mr-1"})],8,Ae),L(" Reflex Action Level "+d(t?.level)+" targeting ",1),(n(!0),l(c,null,p(t?.analyses,r=>(n(),l("span",{key:r.uid,class:"ml-1"},d(r?.name)+",",1))),128))]),body:A(()=>[e("div",Ce,[Ue,e("button",{onClick:r=>j(!0,t),class:"ml-4 px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Brain ",8,Ve)]),e("div",Ee,[(n(!0),l(c,null,p(t?.brains,(r,o)=>(n(),l("div",{key:r?.uid,class:"block col-span-1 bg-white py-2 px-4 m"},[e("div",Fe,[e("h2",Be,d(H(o+1))+" Brain ",1),e("span",{class:"p-2",onClick:y=>j(!1,r)},[F(f,{icon:"edit",class:"text-md text-gray-400 mr-1"})],8,Ne)]),e("h3",null,d(r?.description),1),De,e("div",null,[Se,(n(!0),l(c,null,p(r?.analysesValues,(y,U)=>(n(),l("div",{key:U},[e("div",Te,[e("div",Oe,[e("button",je,d(y?.analysis?.name),1),e("button",$e,d(y?.value),1)])])]))),128)),Ie,(n(!0),l(c,null,p(r?.addNew,(y,U)=>(n(),l("div",{key:U},[e("div",Me,[e("div",Le,[e("button",Xe,[L(d(y?.count)+" ",1),F(f,{icon:"asterisk",class:"text-l text-gray-600 mx-1"})]),e("button",qe,d(y?.analysis?.name),1)])])]))),128)),Pe,(n(!0),l(c,null,p(r?.finalise,(y,U)=>(n(),l("div",{key:U},[e("div",ze,[e("div",Ge,[e("button",He,d(y?.analysis?.name),1),e("button",We,d(y?.value),1)])])]))),128))])]))),128))])]),_:2},1024)]))),128)),B(" Reflex Action Edit Form Modal "),i(g)?(n(),X(i(T),{key:0,onClose:s[5]||(s[5]=t=>q(g)?g.value=!1:g=!1)},{header:A(()=>[e("h3",null,d(i(E)),1)]),body:A(()=>[e("form",Je,[e("div",Ke,[e("label",Qe,[Ye,h(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=t=>i(_).level=t),type:"number",placeholder:"Name ..."},null,512),[[C,i(_).level]])]),e("label",Ze,[et,h(e("select",{name:"analyses",id:"analyses","onUpdate:modelValue":s[2]||(s[2]=t=>i(_).analyses=t),class:"form-input mt-1 block w-full",multiple:""},[tt,(n(!0),l(c,null,p(i(R),t=>(n(),l("option",{key:t.uid,value:t.uid},d(t.name),9,st))),128))],512),[[b,i(_).analyses]])]),e("label",ot,[nt,h(e("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=t=>i(_).description=t),placeholder:"Description ..."},null,512),[[C,i(_).description]])])]),lt,e("button",{type:"button",onClick:s[4]||(s[4]=v(t=>K(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):B("v-if",!0),B(" Reflex Brain Edit Form Modal "),i(w)?(n(),X(i(T),{key:1,onClose:s[11]||(s[11]=t=>q(w)?w.value=!1:w=!1),contentWidth:"w-4/5"},{header:A(()=>[e("h3",null,d(i(E)),1)]),body:A(()=>[e("form",it,[e("div",at,[e("label",rt,[dt,h(e("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[6]||(s[6]=t=>i(u).description=t),placeholder:"Description ..."},null,512),[[C,i(u).description]])]),e("section",ut,[ct,e("div",_t,[pt,ht,e("button",{onClick:s[7]||(s[7]=v(t=>Z(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Criteria ")]),mt,(n(!0),l(c,null,p(i(u).analysesValues,(t,r)=>(n(),l("div",{key:r},[e("div",ft,[e("div",yt,[e("label",vt,[xt,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1",onChange:o=>te(o,t)},[gt,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,kt))),128))],40,bt),[[b,t.analysisUid]])]),e("label",wt,[Rt,h(e("select",{name:"operator",id:"operator","onUpdate:modelValue":o=>t.operator=o,class:"form-input mt-1"},Ft,8,At),[[b,t.operator]])]),e("label",Bt,[Nt,i(D).length==0?h((n(),l("input",{key:0,class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.value=o,type:"text",placeholder:"Result ..."},null,8,Dt)),[[C,t.value]]):h((n(),l("select",{key:1,name:"criteriaValue",id:"criteriaValue","onUpdate:modelValue":o=>t.value=o,class:"form-input"},[Tt,(n(!0),l(c,null,p(i(D),o=>(n(),l("option",{key:o.uid,value:o.value},d(o.value),9,Ot))),128))],8,St)),[[b,t.value]])])]),e("div",jt,[e("button",{onClick:v(o=>ee(r),["prevent"]),class:"px-2 py-1 mt-5 ml-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,$t)])]),It]))),128))]),e("section",Mt,[Lt,e("div",Xt,[qt,Pt,e("button",{onClick:s[8]||(s[8]=v(t=>se(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add New ")]),zt,(n(!0),l(c,null,p(i(u).addNew,(t,r)=>(n(),l("div",{key:r},[e("div",Gt,[e("div",Ht,[e("label",Wt,[Jt,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1"},[Qt,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,Yt))),128))],8,Kt),[[b,t.analysisUid]])]),e("label",Zt,[es,h(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.count=o,type:"number",placeholder:"How Many ...",default:"1"},null,8,ts),[[C,t.count]])])]),e("div",ss,[e("button",{onClick:v(o=>oe(r),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,os)])]),ns]))),128))]),e("section",ls,[is,e("div",as,[rs,ds,e("button",{onClick:s[9]||(s[9]=v(t=>ne(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Final ")]),us,(n(!0),l(c,null,p(i(u).finalise,(t,r)=>(n(),l("div",{key:r},[e("div",cs,[e("div",_s,[e("label",ps,[hs,h(e("select",{name:"analysisService",id:"analysisService","onUpdate:modelValue":o=>t.analysisUid=o,class:"form-input mt-1",onChange:o=>ie(o,t)},[fs,(n(!0),l(c,null,p(i(R),o=>(n(),l("option",{key:o.uid,value:o.uid},d(o.name),9,ys))),128))],40,ms),[[b,t.analysisUid]])]),e("label",vs,[xs,i(S).length==0?h((n(),l("input",{key:0,class:"form-input mt-1 block w-full","onUpdate:modelValue":o=>t.value=o,type:"text",placeholder:"Result ..."},null,8,bs)),[[C,t.value]]):h((n(),l("select",{key:1,name:"finalValue",id:"finalValue","onUpdate:modelValue":o=>t.value=o,class:"form-input mt-1"},[ks,(n(!0),l(c,null,p(i(S),o=>(n(),l("option",{key:o.uid,value:o.value},d(o.value),9,ws))),128))],8,gs)),[[b,t.value]])])]),e("div",Rs,[e("button",{onClick:v(o=>le(r),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,As)])]),Cs]))),128))])]),Us,e("button",{type:"button",onClick:s[10]||(s[10]=v(t=>ae(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):B("v-if",!0)],64)}}}),Ss=fe(Vs,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/admin/reflex/_id/index.vue"]]);export{Ss as default};
