const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Logo-CCq5agoL.js","assets/index-Daoe3XS9.js","assets/index-C7Rn7ES8.css","assets/UserPreferences-DUwucz_J.js","assets/setup-B4brziEy.js"])))=>i.map(i=>d[i]);
import{a0 as Z,af as $,a4 as ee,a7 as f,a5 as oe,ab as re,h,f as te,ag as ne,ad as j,ae as l,a1 as H,a6 as K,ah as se,_ as ae,r as v,c as i,A as r,a as n,C as q,E as p,F as x,N as d,H as w,J as _,K as S,L as b,P as M,o as a,a9 as ie,D as le}from"./index-Daoe3XS9.js";import{u as de}from"./notification-DERBT0z7.js";import{s as ue}from"./index-YWAiCrzl.js";const ce=Z({__name:"NavigationMain",setup(z,{expose:e}){e();const L=H(()=>K(()=>import("./Logo-CCq5agoL.js"),__vite__mapDeps([0,1,2]))),o=H(()=>K(()=>import("./UserPreferences-DUwucz_J.js"),__vite__mapDeps([3,1,2,4]))),{isFullscreen:O,toggle:P}=$(),m=ee(),s=f(!1),g=f(!1);oe(()=>m.currentRoute.value,(c,E)=>{c.path!==E?.path&&(s.value=!1,g.value=!1)});const u=re(),k=h(()=>u.auth?.activeLaboratory),t=h(()=>u.auth?.laboratories),y=h(()=>{const c=u.auth?.user?.firstName||"",E=u.auth?.user?.lastName||"";return`${c} ${E}`.trim()}),{errors:G,clearErrors:Q,withClientMutation:A}=te(),W=f(!1),Y=f(!1),I=de(),J=c=>I.showNotifications(c),{loadPreferredTheme:T,megaMenu:D}=ne(),F=f(!1);j(()=>{T(),F.value=D.value});const X=h(()=>[{id:"patients-compact",label:"Compact",icon:"bullseye",route:"/patients-compact",guard:l.PATIENTS_COMPACT},{id:"patients",label:"Patients",icon:"user-injured",route:"/patients",guard:l.PATIENTS},{id:"clients",label:"Clients",icon:"clinic-medical",route:"/clients",guard:l.CLIENTS},{id:"samples",label:"Samples",icon:"vial",route:"/samples",guard:l.SAMPLES},{id:"worksheets",label:"WorkSheets",icon:"grip-vertical",route:"/worksheets",guard:l.WORKSHEETS},{id:"quality-control",label:"QControl",icon:"anchor",route:"/quality-control",guard:l.QC_SAMPLES},{id:"notice-manager",label:"NoticeManager",icon:"bell",route:"/notice-manager",guard:l.NOTICE_MANAGER},{id:"bio-banking",label:"BioBanking",icon:"database",route:"/bio-banking",guard:l.BIO_BANKING},{id:"shipments",label:"Referrals",icon:"truck",route:"/shipments",guard:l.REFERRAL},{id:"inventory",label:"Inventory",icon:"fa-solid fa-boxes-stacked",route:"/inventory",guard:l.INVENTORY},{id:"schemes",label:"Projects",icon:"project-diagram",route:"/schemes",guard:l.SCHEMES},{id:"documents",label:"Documents",icon:"file",route:"/documents",guard:l.DOCUMENT}]),R=()=>{s.value=!1,g.value=!1},U=c=>{c.key==="Escape"&&R()};j(()=>{document.addEventListener("keydown",U)});const B=f(!1),N=f(null),C=f(!1),V={Logo:L,UserPreferences:o,isFullscreen:O,toggle:P,router:m,menuOpen:s,dropdownOpen:g,authStore:u,activeLaboratory:k,userLaboratories:t,userFullName:y,errors:G,clearErrors:Q,withClientMutation:A,showErrors:W,showPreferences:Y,notificationStore:I,toggleNotifications:J,loadPreferredTheme:T,megaMenu:D,useMegaMenu:F,navItems:X,closeMenus:R,handleKeyDown:U,showModal:B,targetLaboratoryUid:N,switching:C,switchLabNow:()=>{if(!N.value){alert("Please select a laboratory to switch to.");return}C.value=!0,setTimeout(async()=>{await A(se,{userUid:u.auth?.user?.uid,laboratoryUid:N.value},"setUserActiveLaboratory").then(c=>u.logout()).catch(()=>{}).finally(()=>{B.value=!1,C.value=!1})},3e3)},get guards(){return ue}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),fe={id:"main-nav",class:"flex items-center px-6 bg-primary border-b border-border",role:"navigation","aria-label":"Main Navigation"},me={class:"flex-1"},ge={class:"flex text-right align-middle"},pe={class:"text-left text-2xl font-medium ml-2"},be={key:0,class:"mx-8 border-l border-border my-2","aria-hidden":"true"},ve=["aria-expanded"],xe={class:"grid grid-cols-3 gap-4",role:"menu","aria-label":"Main Menu"},ye={class:"mr-4","aria-hidden":"true"},he={class:"text-lg font-medium"},we={class:"flex items-center space-x-4"},_e={class:"bg-destructive text-destructive-foreground text-xs rounded-full px-2 py-1"},ke={key:1,class:"border-l border-border h-6","aria-hidden":"true"},Ne={class:"px-4 flex text-right items-center relative"},Ce={class:"flex justify-center items-center h-8 w-8 rounded-full border-2 border-border hover:border-primary text-primary-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary cursor-pointer","aria-hidden":"true",tabindex:"0"},Ee={class:"relative"},Se=["aria-expanded"],Me={class:"text-lg font-medium uppercase"},Le=["aria-label"],Oe=["aria-label"],Pe={class:"flex items-center justify-between"},Ae={key:0,class:"text-muted-foreground italic"},Ie={key:1,"aria-label":"Error messages",class:"divide-y divide-border"},Te={class:"block whitespace-pre-wrap"},De={action:"post",class:"p-6 space-y-6"},Fe={class:"space-y-4"},Re={class:"grid grid-cols-2 gap-4"},Ue={class:"col-span-2 space-y-2"},Be=["value"];function Ve(z,e,L,o,O,P){const m=v("router-link"),s=v("font-awesome-icon"),g=v("fel-drawer"),u=v("fel-button"),k=v("fel-modal");return a(),i(_,null,[r("nav",fe,[r("div",me,[r("div",ge,[n(m,{to:"/",id:"brand",class:"flex items-center md:w-auto text-primary-foreground/80 hover:text-primary-foreground transition-colors","aria-label":"Felicity LIMS Home"},{default:d(()=>[n(o.Logo),r("h1",pe,b(o.activeLaboratory?.name??"Felicity LIMS"),1)]),_:1}),o.useMegaMenu?(a(),i("span",be)):p("",!0),o.useMegaMenu?(a(),i("button",{key:1,onClick:e[0]||(e[0]=t=>o.menuOpen=!o.menuOpen),class:"hidden md:flex md:items-center focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md p-2","aria-expanded":o.menuOpen,"aria-controls":"main-menu"},[e[17]||(e[17]=r("span",{class:"text-xl font-medium mr-2 text-primary-foreground/80 hover:text-primary-foreground uppercase"},"Menu",-1)),n(s,{icon:o.menuOpen?"chevron-up":"chevron-down",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,ve)):p("",!0),x(r("div",{id:"main-menu",class:"absolute left-64 top-12 mt-1 p-4 w-1/2 bg-primary rounded-md shadow-lg border border-border z-20",onClick:e[2]||(e[2]=t=>o.menuOpen=!1)},[r("div",xe,[(a(!0),i(_,null,S(o.navItems,t=>x((a(),q(m,{key:t.id,to:t.route,id:`${t.id}-link`,class:"flex items-center py-2 px-4 text-primary-foreground hover:bg-accent hover:text-accent-foreground rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",role:"menuitem",onClick:e[1]||(e[1]=y=>o.menuOpen=!1)},{default:d(()=>[r("span",ye,[n(s,{icon:t.icon},null,8,["icon"])]),r("span",he,b(t.label),1)]),_:2},1032,["to","id"])),[[w,o.guards.canAccessPage(t.guard)]])),128))])],512),[[w,o.menuOpen]])])]),r("div",we,[o.errors.length>0?(a(),i("button",{key:0,class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[3]||(e[3]=t=>o.showErrors=!0),"aria-label":"Show errors"},[n(s,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[18]||(e[18]=r("span",{class:"text-lg font-medium mr-2 uppercase"},"Errors",-1)),r("span",_e,b(o.errors.length),1)])):p("",!0),o.errors.length>0?(a(),i("span",ke)):p("",!0),r("button",{class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md",onClick:e[4]||(e[4]=t=>o.toggleNotifications(!0)),"aria-label":"Show notifications"},[n(s,{icon:"bell",class:"mr-2","aria-hidden":"true"}),e[19]||(e[19]=r("span",{class:"text-lg font-medium uppercase"},"Notifications",-1))]),e[23]||(e[23]=r("span",{class:"border-l border-border h-6","aria-hidden":"true"},null,-1)),x(n(m,{to:"/admin",class:"flex items-center px-4 py-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":"Settings"},{default:d(()=>[n(s,{icon:"cog",class:"mr-2","aria-hidden":"true"}),e[20]||(e[20]=r("span",{class:"text-lg font-medium uppercase"},"Settings",-1))]),_:1},512),[[w,o.guards.canAccessPage(o.guards.pages.ADMINISTRATION)]]),r("div",Ne,[r("span",Ce,[n(s,{icon:"user"})]),r("div",Ee,[r("button",{onClick:e[5]||(e[5]=t=>o.dropdownOpen=!o.dropdownOpen),class:"text-primary-foreground/80 hover:text-primary-foreground hidden md:flex md:items-center ml-2 focus:outline-none rounded-lg p-1 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":o.dropdownOpen,"aria-controls":"user-menu"},[r("span",Me,b(o.userFullName),1),n(s,{icon:o.dropdownOpen?"chevron-up":"chevron-down",class:"ml-2 text-primary-foreground/80 transition-transform","aria-hidden":"true"},null,8,["icon"])],8,Se),x(r("div",{id:"user-menu",class:"absolute right-0 top-11 py-2 w-48 bg-popover text-popover-foreground rounded-lg shadow-xl z-20",onClick:e[8]||(e[8]=t=>o.dropdownOpen=!1),role:"menu"},[r("button",{class:"w-full text-left cursor-pointer py-2 px-4 flex items-center hover:bg-primary hover:text-primary-foreground uppercase transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground rounded",role:"menuitem",onClick:e[6]||(e[6]=t=>{o.showPreferences=!0,o.dropdownOpen=!1})},[n(s,{icon:"user-gear",class:"mr-2","aria-hidden":"true"}),e[21]||(e[21]=M(" Preferences ",-1))]),r("button",{onClick:e[7]||(e[7]=t=>o.authStore.logout()),class:"w-full text-left cursor-pointer py-2 px-4 flex items-center hover:bg-primary hover:text-primary-foreground uppercase transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground rounded",role:"menuitem"},[n(s,{icon:"sign-out-alt",class:"mr-2","aria-hidden":"true"}),e[22]||(e[22]=M(" Log out ",-1))])],512),[[w,o.dropdownOpen]])])]),(o.userLaboratories?.length??0)>1?(a(),i("button",{key:2,onClick:e[9]||(e[9]=t=>o.showModal=!0),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":o.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n(s,{icon:"shuffle",class:"text-muted-foreground transition-transform duration-200","aria-hidden":"true"})],8,Le)):p("",!0),r("button",{onClick:e[10]||(e[10]=(...t)=>o.toggle&&o.toggle(...t)),class:"flex items-center p-2 text-primary-foreground/80 hover:text-primary-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 rounded-md","aria-label":o.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n(s,{icon:o.isFullscreen?"compress":"expand"},null,8,["icon"])],8,Oe)])]),n(g,{show:o.showErrors,onClose:e[12]||(e[12]=t=>o.showErrors=!1)},{header:d(()=>[r("div",Pe,[e[24]||(e[24]=r("h3",{class:"font-semibold text-lg"},"Errors List",-1)),r("button",{class:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-secondary transition-colors focus:outline-none",onClick:e[11]||(e[11]=t=>o.clearErrors()),"aria-label":"Clear all errors"},[n(s,{icon:"trash-alt",class:"w-5 h-5","aria-hidden":"true"})])])]),body:d(()=>[o.errors.length===0?(a(),i("p",Ae,"No errors to display")):(a(),i("ul",Ie,[(a(!0),i(_,null,S(o.errors,(t,y)=>(a(),i("li",{key:y,class:"mb-2 p-3 bg-background rounded text-sm border-l-4 border-destructive"},[r("code",Te,b(t),1)]))),128))]))]),_:1},8,["show"]),n(g,{show:o.showPreferences,onClose:e[13]||(e[13]=t=>o.showPreferences=!1)},{header:d(()=>[...e[25]||(e[25]=[r("div",{class:"flex items-center justify-between"},[r("h3",{class:"font-semibold text-lg"},"Your Preferences")],-1)])]),body:d(()=>[n(o.UserPreferences)]),_:1},8,["show"]),o.showModal?(a(),q(k,{key:0,onClose:e[16]||(e[16]=t=>o.showModal=!1)},{header:d(()=>[...e[26]||(e[26]=[r("h3",{class:"text-lg font-bold text-foreground"},"Current Laboratory Switcher",-1)])]),body:d(()=>[r("form",De,[r("div",Fe,[r("div",Re,[r("label",Ue,[e[28]||(e[28]=r("span",{class:"text-md font-medium"},"Laboratory Name",-1)),x(r("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[14]||(e[14]=t=>o.targetLaboratoryUid=t)},[e[27]||(e[27]=r("option",{value:""},"Select Department",-1)),(a(!0),i(_,null,S(o.userLaboratories,t=>(a(),i("option",{key:t.uid,value:t?.uid},b(t.name),9,Be))),128))],512),[[ie,o.targetLaboratoryUid]])])])]),n(u,{type:"button",onClick:e[15]||(e[15]=le(t=>o.switchLabNow(),["prevent"])),loading:o.switching,disabled:o.switching,class:"w-full"},{default:d(()=>[...e[29]||(e[29]=[M(" Switch Laboratory ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})):p("",!0)],64)}const ze=ae(ce,[["render",Ve],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/nav/NavigationMain.vue"]]);export{ze as default};
