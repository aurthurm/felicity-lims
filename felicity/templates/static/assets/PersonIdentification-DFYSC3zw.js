import{Y as N,u as k,a0 as I,a7 as A,a3 as E,_ as D,r as m,c as C,o as w,z as s,A as h,C as H,a,K as o,M as f,F as y,H as V,I as M,B as L,a4 as R}from"./index-OdhKCqIc.js";import{c as O,a as q,u as z,F as U}from"./index.esm-BfHj8iGm.js";import{u as K}from"./patient-BGl7pq_l.js";import{a as Y,b as j}from"./patient.mutations-Ck2KfiSz.js";import{I as G}from"./Input-BEm5S0CJ.js";import{F as J,a as Q,b as W}from"./FormMessage-CgXFMXx9.js";import{F as X}from"./FormLabel-DxP9wnWS.js";import{P as Z}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const $=N({__name:"PersonIdentification",setup(B,{expose:e}){e();const u=K(),{withClientMutation:t}=k();let c=I(!1),_=I("");const d=I(!0),l=I(null),b=O({name:q().trim().required("Identification name is required")}),{handleSubmit:p,resetForm:g,setValues:v}=z({validationSchema:b,initialValues:{name:""}});u.fetchIdentifications();function F(n){t(Y,n,"createIdentification").then(i=>u.addIdentification(i))}function r(n){l.value&&t(j,{uid:l.value,...n},"updateIdentification").then(i=>u.updateIdentification(i))}function x(n,i={}){d.value=n,c.value=!0,_.value=(n?"CREATE":"EDIT")+" PERSON IDENTIFICATION",n?(l.value=null,g({values:{name:""}})):(l.value=i.uid??null,v({name:i.name??""}))}const P=p(n=>{const i={name:n.name};d.value===!0&&F(i),d.value===!1&&r(i),c.value=!1}),S=A(()=>u.getIdentifications),T={patientStore:u,withClientMutation:t,get showModal(){return c},set showModal(n){c=n},get formTitle(){return _},set formTitle(n){_=n},formAction:d,currentUid:l,identificationSchema:b,handleSubmit:p,resetForm:g,setValues:v,addIdentification:F,editIdentification:r,FormManager:x,saveForm:P,identifications:S,get Button(){return E},get Input(){return G},get FormControl(){return W},get FormField(){return U},get FormItem(){return Q},get FormLabel(){return X},get FormMessage(){return J},PageHeading:Z};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),ee={class:"space-y-6"},te={class:"border border-border bg-card rounded-lg shadow-md"},oe={class:"relative w-full overflow-auto"},ae={class:"text-xl font-semibold text-foreground"},ne={class:"grid grid-cols-1 gap-4"};function re(B,e,u,t,c,_){const d=m("TableHead"),l=m("TableRow"),b=m("TableHeader"),p=m("TableCell"),g=m("TableBody"),v=m("Table"),F=m("Modal");return w(),C(y,null,[s("div",ee,[a(t.PageHeading,{title:"Person Identifications"},{default:o(()=>[a(t.Button,{onClick:e[0]||(e[0]=r=>t.FormManager(!0))},{default:o(()=>[...e[3]||(e[3]=[f("Add Person Identification",-1)])]),_:1})]),_:1}),s("div",te,[s("div",oe,[a(v,{class:"w-full caption-bottom text-sm"},{default:o(()=>[a(b,{class:"[&_tr]:border-b"},{default:o(()=>[a(l,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[4]||(e[4]=[f("Name",-1)])]),_:1}),a(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[5]||(e[5]=[s("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),a(g,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(w(!0),C(y,null,V(t.identifications,r=>(w(),h(l,{key:r?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[a(p,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[f(M(r?.name),1)]),_:2},1024),a(p,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[a(t.Button,{variant:"outline",size:"sm",onClick:x=>t.FormManager(!1,r)},{default:o(()=>[...e[6]||(e[6]=[f(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),t.showModal?(w(),h(F,{key:0,onClose:e[2]||(e[2]=r=>t.showModal=!1),"content-width":"w-1/2"},{header:o(()=>[s("h3",ae,M(t.formTitle),1)]),body:o(()=>[s("form",{onSubmit:e[1]||(e[1]=L((...r)=>t.saveForm&&t.saveForm(...r),["prevent"])),class:"space-y-6 p-4"},[s("div",ne,[a(t.FormField,{name:"name"},{default:o(({componentField:r})=>[a(t.FormItem,null,{default:o(()=>[a(t.FormLabel,null,{default:o(()=>[...e[7]||(e[7]=[f("Identification Name",-1)])]),_:1}),a(t.FormControl,null,{default:o(()=>[a(t.Input,R(r,{placeholder:"Name ..."}),null,16)]),_:2},1024),a(t.FormMessage)]),_:2},1024)]),_:1})]),e[9]||(e[9]=s("hr",{class:"border-border"},null,-1)),a(t.Button,{type:"submit",class:"w-full"},{default:o(()=>[...e[8]||(e[8]=[f(" Save Identification ",-1)])]),_:1})],32)]),_:1})):H("",!0)],64)}const _e=D($,[["render",re],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/patient/PersonIdentification.vue"]]);export{_e as default};
