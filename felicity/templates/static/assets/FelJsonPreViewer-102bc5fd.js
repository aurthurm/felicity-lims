import{S as L,a0 as x,W as N,o as b,c as y,N as p,H as w,M as A,K as E,a3 as C,_ as P}from"./index-56caabce.js";const F={class:"mb-2 flex items-center justify-between"},$={class:"text-sm font-medium text-card-foreground"},R={class:"flex items-center space-x-2"},z=["aria-label"],D=["aria-expanded"],K=["aria-label"],U=L({__name:"FelJsonPreViewer",props:{data:{type:null,required:!0},wrapper:{type:String,required:!1,default:""},copyable:{type:Boolean,required:!1,default:!0},expandable:{type:Boolean,required:!1,default:!0},theme:{type:String,required:!1,default:"light"},title:{type:String,required:!1,default:"JSON Preview"}},setup(O){const f=O,d=x(null),c=x(!1),g=x(!1),_=`json-preview-${Math.random().toString(36).slice(2,11)}`;function J(){c.value=!c.value}async function M(){try{await navigator.clipboard.writeText(JSON.stringify(f.data,null,2)),g.value=!0,setTimeout(()=>{g.value=!1},2e3)}catch(r){console.error("Failed to copy text: ",r)}}function k(r,e){const t=f.theme==="dark"?"dark":"light";new H({container:e,data:JSON.stringify(r),theme:t,expand:c.value})}N(()=>f.data,r=>{d.value&&(d.value.innerHTML="",r&&Object.keys(r).length>0&&k(r,d.value))},{immediate:!0}),N(()=>c.value,r=>{d.value&&f.data&&(d.value.innerHTML="",k(f.data,d.value))});const v=Object.prototype.toString;function B(r){return typeof r=="number"}function T(r){return typeof r=="boolean"}function V(r){return typeof r>"u"}function S(r){return v.call(r)==="[object Array]"}function j(r){return v.call(r)==="[object Object]"}function q(r){return v.call(r)==="[object Null]"}class H{options;constructor(e){const t={theme:"light",container:null,data:"{}",expand:!1};if(this.options=Object.assign(t,e),!e.container)throw new Error("Container: dom element is required");this.render()}renderRight(e,t,n){B(n)?t.setAttribute("class",e+"rightNumber"):T(n)?t.setAttribute("class",e+"rightBoolean"):n==="null"?t.setAttribute("class",e+"rightNull"):t.setAttribute("class",e+"rightString"),t.innerText=n}renderChildren(e,t,n,i,a,o){const s=this.createElement("span"),l=this.options.expand?"rotate90":"",u=this.options.expand?"add-height":"";s.setAttribute("class",e+"folder "+l),s.onclick=m=>{const I=m.target.parentNode?.nextSibling;this.toggleItem(I,m.target)};const h=j(n)?Object.keys(n).length:n.length;o.innerHTML=j(n)?t+"&nbsp;&nbsp{"+h+"}":t+"&nbsp;&nbsp["+h+"]",o.prepend(s),i.setAttribute("class",e+"rightObj "+u),this.parse(n,i,a+0,e)}parse(e,t,n,i){this.forEach(e,(a,o)=>{const{left:s,right:l}=this.createItem(n,i,t,o,typeof a!="object");typeof a!="object"?this.renderRight(i,l,a):this.renderChildren(i,o,a,l,n,s)})}createItem(e,t,n,i,a){const o=this.createElement("div"),s=this.createElement("div"),l=this.createElement("div"),u=this.createElement("div");return o.style.marginLeft=e*2+"px",s.innerHTML=`${i}<span class="jv-${t}-symbol">&nbsp;:&nbsp;</span>`,a?(o.appendChild(u),u.appendChild(s),u.appendChild(l),n.appendChild(o),o.setAttribute("class",t+"current"),u.setAttribute("class","jv-wrap"),s.setAttribute("class",t+"left")):(o.appendChild(s),o.appendChild(l),n.appendChild(o),o.setAttribute("class",t+"current"),s.setAttribute("class",t+"left jv-folder"),s.onclick=h=>{const m=h.target.nextSibling;this.toggleItem(m,h.target.querySelector("span"))}),{left:s,right:l,current:o}}render(){const e=this.options.data,t="jv-"+this.options.theme+"-",n=0,i=this.options.container;let a="object",o;i.setAttribute("class",t+"con");try{o=JSON.parse(e)}catch{throw new Error("It is not a json format")}S(o)&&(a="array");const{left:s,right:l}=this.createItem(n,t,i,a,!1);this.renderChildren(t,a,o,l,n,s)}toggleItem(e,t){e.classList.toggle("add-height"),t.classList.toggle("rotate90")}createElement(e){return document.createElement(e)}forEach(e,t){if(!(V(e)||q(e)))if(typeof e=="object"&&S(e))for(let n=0,i=e.length;n<i;n++)t.call(null,e[n],n.toString(),e);else for(const n in e)e.hasOwnProperty(n)&&t.call(null,e[n],n,e)}}return(r,e)=>(b(),y("div",{class:C(["w-full rounded-lg border border-border bg-card p-4",r.wrapper])},[p("div",F,[p("h3",$,w(r.title),1),p("div",R,[r.copyable?(b(),y("button",{key:0,onClick:M,class:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring","aria-label":g.value?"Copied to clipboard":"Copy to clipboard"},[e[0]||(e[0]=p("svg",{class:"mr-1 h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)),A(" "+w(g.value?"Copied":"Copy"),1)],8,z)):E("v-if",!0),r.expandable?(b(),y("button",{key:1,onClick:J,class:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring","aria-expanded":c.value,"aria-controls":_},[(b(),y("svg",{class:C(["mr-1 h-3 w-3 transition-transform duration-200",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},e[1]||(e[1]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)),A(" "+w(c.value?"Collapse":"Expand"),1)],8,D)):E("v-if",!0)])]),p("div",{ref_key:"jsonContainer",ref:d,id:_,class:C(["overflow-auto rounded-md bg-muted p-4 font-mono text-sm",{"max-h-96":!c.value}]),role:"region","aria-label":`JSON preview of ${r.title}`,tabindex:"0"},null,10,K)],2))}});const G=P(U,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/ui/FelJsonPreViewer.vue"]]);export{G as default};
