import{d as $,I as F,r as d,n as G,q as U,a6 as q,o as a,c as l,b as e,F as p,C as v,t as c,y as z,z as I,w as Q,e as b,v as k,ae as V,f as R,B as W,j as H,_ as J,D as K,E as X,k as Y}from"./index-d5ae4e74.js";import{G as Z,k as ee,M as te,N as se,O as oe}from"./microbiology.mutations-146484b7.js";const r=f=>(K("data-v-195d3b3a"),f=f(),X(),f),ie={class:"w-full my-4"},ne={class:"flex justify-between items-center mb-4"},ae=r(()=>e("h2",{class:"text-xl font-semibold"},"AST Panels",-1)),le=r(()=>e("hr",null,null,-1)),de={class:"overflow-x-auto mt-4"},re={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ce={class:"min-w-full"},ue=r(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Name"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Description"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Organisms"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Antibiotics"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),me={class:"bg-white"},pe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"text-sm leading-5 text-gray-800"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},he={class:"text-sm leading-5 text-sky-800"},ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},fe={class:"text-sm leading-5 text-sky-800"},xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ye={class:"text-sm leading-5 text-sky-800"},ge={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},we=["onClick"],ke={class:"space-y-4"},Ae={class:"grid grid-cols-1 gap-4"},Oe={class:"block"},Ce=r(()=>e("span",{class:"text-gray-700"},"Panel Name",-1)),Pe={class:"block"},Se=r(()=>e("span",{class:"text-gray-700"},"Description",-1)),De={class:"flex gap-4"},Ee={class:"w-2/3 space-y-2"},Ie={class:"block"},Ve=r(()=>e("span",{class:"text-gray-700"},"Search Organisms",-1)),Me={class:"border p-2 h-64 overflow-y-auto"},Le=["value"],Te={class:"ml-2"},je={class:"w-1/3"},Be=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Organisms",-1)),Ne={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},$e={class:"text-sm"},Fe=["onClick"],Ge={class:"flex gap-4"},Ue={class:"w-2/3 space-y-2"},qe={class:"block"},ze=r(()=>e("span",{class:"text-gray-700"},"Search Antibiotics",-1)),Qe={class:"border p-2 h-64 overflow-y-auto"},Re=["value"],We={class:"ml-2"},He={class:"w-1/3"},Je=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Antibiotics",-1)),Ke={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Xe={class:"text-sm"},Ye=["onClick"],Ze=r(()=>e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2"}," Save Panel ")],-1)),et=$({__name:"AstPanel",setup(f){const M=H(()=>J(()=>import("./index-d5ae4e74.js").then(i=>i.bs),["assets/index-d5ae4e74.js","assets/index-246842b1.css"])),{withClientMutation:C,withClientQuery:A}=F(),x=d(!1),P=d(""),S=d(!0),y=d(""),g=d(""),m=d([]),_=d([]),w=d([]),u=d([]),O=d([]),o=G({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});U(()=>{L(),D(),T()});function L(){A(Z,{},"abxLaboratoryAntibiotics").then(i=>{i&&(_.value=i,w.value=[..._.value])})}function D(){A(ee,{text:y.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(i=>{u.value=u.value?.filter(s=>o.selectedOrganisms.includes(s.uid))||[],u.value=q(u.value,i?.items,"uid"),O.value=[...u.value]})}function T(){A(te,{},"abxAstPanelAll").then(i=>{i&&(m.value=i,m.value.forEach(s=>s.organisms?.forEach(t=>u.value.push(t))))})}function E(i,s={}){S.value=i,x.value=!0,P.value=(i?"Create":"Edit")+" AST Panel",i?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=s.uid,o.name=s.name,o.description=s.description,o.selectedAntibiotics=s.antibiotics?.map(t=>t.uid)||[],o.selectedOrganisms=s.organisms?.map(t=>t.uid)||[])}function j(){const i={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};S.value?C(se,{payload:i},"createAbxAstPanel").then(s=>{s&&m.value.unshift(s)}):C(oe,{uid:o.uid,payload:i},"updateAbxAstPanel").then(s=>{if(s){const t=m.value.findIndex(n=>n.uid===s.uid);t>-1&&(m.value=[...m.value.map((n,h)=>h===t?s:n)])}}),x.value=!1}function B(){if(!g.value){w.value=[..._.value];return}w.value=_.value.filter(i=>i.name.toLowerCase().includes(g.value.toLowerCase()))}function N(){if(!y.value){O.value=[...u.value];return}D()}return(i,s)=>(a(),l(p,null,[e("div",ie,[e("div",ne,[ae,e("button",{onClick:s[0]||(s[0]=t=>E(!0)),class:"px-4 py-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Panel ")]),le,e("div",de,[e("div",re,[e("table",ce,[ue,e("tbody",me,[(a(!0),l(p,null,v(m.value,t=>(a(),l("tr",{key:t?.uid},[e("td",pe,[e("div",be,c(t?.name),1)]),e("td",_e,[e("div",he,c(t?.description),1)]),e("td",ve,[e("div",fe,c(t?.organisms?.map(n=>n.name).join(", ")),1)]),e("td",xe,[e("div",ye,c(t?.antibiotics?.map(n=>n.name).join(", ")),1)]),e("td",ge,[e("button",{onClick:n=>E(!1,t),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Edit ",8,we)])]))),128))])])])])]),x.value?(a(),z(R(M),{key:0,onClose:s[7]||(s[7]=t=>x.value=!1),contentWidth:"w-1/2"},{header:I(()=>[e("h3",null,c(P.value),1)]),body:I(()=>[e("form",{onSubmit:Q(j,["prevent"]),class:"p-4"},[e("div",ke,[e("div",Ae,[e("label",Oe,[Ce,b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.name=t),class:"form-input mt-1 block w-full",placeholder:"Enter panel name"},null,512),[[k,o.name]])]),e("label",Pe,[Se,b(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.description=t),rows:"2",class:"form-input mt-1 block w-full",placeholder:"Enter description"},null,512),[[k,o.description]])])]),e("div",De,[e("div",Ee,[e("label",Ie,[Ve,b(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>y.value=t),onInput:N,class:"form-input mt-1 block w-full",placeholder:"Search organisms..."},null,544),[[k,y.value]])]),e("div",Me,[(a(!0),l(p,null,v(O.value,t=>(a(),l("div",{key:t.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[4]||(s[4]=n=>o.selectedOrganisms=n),class:"form-checkbox"},null,8,Le),[[V,o.selectedOrganisms]]),e("span",Te,c(t.name),1)]))),128))])]),e("div",je,[Be,e("div",Ne,[(a(!0),l(p,null,v(o.selectedOrganisms,t=>(a(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",$e,c(u.value?.find(n=>n.uid===t)?.name),1),e("button",{onClick:n=>o.selectedOrganisms=o.selectedOrganisms.filter(h=>h!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,Fe)]))),128))])])]),e("div",Ge,[e("div",Ue,[e("label",qe,[ze,b(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>g.value=t),onInput:B,class:"form-input mt-1 block w-full",placeholder:"Search antibiotics..."},null,544),[[k,g.value]])]),e("div",Qe,[(a(!0),l(p,null,v(w.value,t=>(a(),l("div",{key:t.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[6]||(s[6]=n=>o.selectedAntibiotics=n),class:"form-checkbox"},null,8,Re),[[V,o.selectedAntibiotics]]),e("span",We,c(t.name),1)]))),128))])]),e("div",He,[Je,e("div",Ke,[(a(!0),l(p,null,v(o.selectedAntibiotics,t=>(a(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Xe,c(_.value.find(n=>n.uid==t)?.name),1),e("button",{onClick:n=>o.selectedAntibiotics=o.selectedAntibiotics.filter(h=>h!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,Ye)]))),128))])])])]),Ze],32)]),_:1})):W("",!0)],64))}});const ot=Y(et,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{ot as default};
