import{P as L,aa as F,h as x,Z as b,f as M,e as S,o as c,c as p,b as e,F as m,D as y,E as n,a1 as w,A as r,C as P,a2 as l,x as T,K as k,V as u,a4 as G,L as v,W as U,z as O,a7 as R,J as $,X as z,Y as I,aD as j,aE as J,_ as K}from"./index-fa13e788.js";import{u as W}from"./user-c399b7d7.js";import"./_queries-fa6c96fd.js";const X={class:"w-full my-4"},Y=e("hr",null,null,-1),Z={class:"flex justify-between items-center"},q=e("h3",null,"Users",-1),H=e("hr",null,null,-1),Q={class:"overflow-x-auto mt-4"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},te={class:"min-w-full"},se=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," First Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Last Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email Adress "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Active "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Groups "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Username "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Blocked "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),oe={class:"bg-white"},le={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ae={class:"flex items-center"},re={class:"text-sm leading-5 text-gray-800"},ne={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ie={class:"text-sm leading-5 text-sky-800"},de={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ce={class:"text-sm leading-5 text-sky-800"},ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},pe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"text-sm leading-5 text-sky-800"},me={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ge={class:"text-sm leading-5 text-sky-800"},he={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},_e={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},fe=["onClick"],xe={action:"post",class:"p-1",disabled:""},ye={class:"grid grid-cols-2 gap-x-4 mb-4"},we={class:"block col-span-1 mb-2"},ke=e("span",{class:"text-gray-700"},"First Name",-1),ve={class:"block col-span-1 mb-2"},Ue=e("span",{class:"text-gray-700"},"Last Name",-1),Ne={class:"block col-span-1 mb-2"},Ae=e("span",{class:"text-gray-700"},"Email",-1),Ce={class:"block col-span-1 mb-2"},Ee=e("span",{class:"text-gray-700"},"UserName",-1),Ve=["disabled"],Be={class:"block col-span-1 mb-2"},De=e("span",{class:"text-gray-700"},"Password",-1),Le={class:"block col-span-1 mb-2"},Fe=e("span",{class:"text-gray-700"},"Confirm Password",-1),Me={class:"block col-span-2 mb-2"},Se=e("span",{class:"text-gray-700"},"Group",-1),Pe=e("option",null,null,-1),Te=["value"],Ge={for:"toggle",class:"block col-span-1 text-xs text-gray-700 mt-4"},Oe={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Re=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),$e={for:"toggle",class:"block col-span-1 text-xs text-gray-700 mt-4"},ze={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Ie=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),je=e("hr",null,null,-1),Je=L({__name:"UsersListing",setup(Ke){const N=z(()=>I(()=>import("./index-fa13e788.js").then(a=>a.cN),["assets/index-fa13e788.js","assets/index-ccc6a521.css"])),i=W();F(()=>{i.fetchUsers({}),i.fetchGroupsAndPermissions()});let A=x(()=>i.getUsers);const C=x(()=>i.getGroups);let d=b(!1),g=b(""),o=M({});const h=b(!0),{withClientMutation:_}=S();function E(){_(j,o,"createUser").then(a=>i.addUser(a))}function V(){_(J,o,"updateUser").then(a=>i.updateUser(a))}function B(a){let s=[];return a?.groups?.forEach(t=>s.push(t?.name)),s.join(", ")}function f(a,s={}){if(h.value=a,d.value=!0,g.value=(a?"CREATE":"EDIT")+" USER",a){let t=new Object;t.firstName=void 0,t.lastName=void 0,t.email=void 0,t.isActive=!0,t.groupUid=void 0,t.userName=void 0,t.isBlocked=!1,Object.assign(o,{...t})}else s.userUid=s?.uid,s.groupUid=s?.groups[0]?.uid,Object.assign(o,{...s})}function D(){h.value?E():V(),d.value=!1}return(a,s)=>(c(),p(m,null,[e("div",X,[Y,e("div",Z,[q,e("button",{onClick:s[0]||(s[0]=t=>f(!0)),class:"px-2 py-1 ml-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add User/Lab Contact ")]),H,e("div",Q,[e("div",ee,[e("table",te,[se,e("tbody",oe,[(c(!0),p(m,null,y(l(A),t=>(c(),p("tr",{key:t.uid},[e("td",le,[e("div",ae,[e("div",re,n(t.firstName),1)])]),e("td",ne,[e("div",ie,n(t.lastName),1)]),e("td",de,[e("div",ce,n(t.email),1)]),e("td",ue,[e("span",{class:w(["",["block h-4 w-4 rounded-full bottom-0 right-0",t?.isActive?"bg-emerald-600":"bg-orange-600"]])},null,2)]),e("td",pe,[e("div",be,n(B(t)),1)]),e("td",me,[e("div",ge,n(t?.userName),1)]),e("td",he,[e("span",{class:w(["block h-4 w-4 rounded-full bottom-0 right-0",t?.isBlocked?"bg-orange-600":"bg-emerald-600"])},null,2)]),e("td",_e,[r(e("button",{onClick:We=>f(!1,t),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit User ",8,fe),[[P,!t.isSuperuser]])])]))),128))])])])])]),l(d)?(c(),T(l(N),{key:0,onClose:s[11]||(s[11]=t=>R(d)?d.value=!1:d=!1)},{header:k(()=>[e("h3",null,n(l(g)),1)]),body:k(()=>[e("form",xe,[e("div",ye,[e("label",we,[ke,r(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=t=>l(o).firstName=t),placeholder:"First Name ..."},null,512),[[u,l(o).firstName]])]),e("label",ve,[Ue,r(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=t=>l(o).lastName=t),placeholder:"Last Name ..."},null,512),[[u,l(o).lastName]])]),e("label",Ne,[Ae,r(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":s[3]||(s[3]=t=>l(o).email=t),placeholder:"Email ..."},null,512),[[u,l(o).email]])]),e("label",Ce,[Ee,r(e("input",{class:"form-input mt-1 block w-full disabled:bg-slate-300","onUpdate:modelValue":s[4]||(s[4]=t=>l(o).userName=t),placeholder:"First Name ...",disabled:l(o).uid!=null},null,8,Ve),[[u,l(o).userName]])]),e("label",Be,[De,r(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[5]||(s[5]=t=>l(o).password=t),placeholder:"Password ..."},null,512),[[u,l(o).password]])]),e("label",Le,[Fe,r(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":s[6]||(s[6]=t=>l(o).passwordc=t),placeholder:"confirm ..."},null,512),[[u,l(o).passwordc]])]),e("label",Me,[Se,r(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":s[7]||(s[7]=t=>l(o).groupUid=t)},[Pe,(c(!0),p(m,null,y(C.value,t=>(c(),p("option",{key:t.uid,value:t.uid},n(t?.name),9,Te))),128))],512),[[G,l(o).groupUid]])]),e("label",Ge,[v("Blocked "),e("div",Oe,[r(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[8]||(s[8]=t=>l(o).isBlocked=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[U,l(o).isBlocked]]),Re])]),e("label",$e,[v("Active "),e("div",ze,[r(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[9]||(s[9]=t=>l(o).isActive=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[U,l(o).isActive]]),Ie])])]),je,e("button",{type:"button",onClick:s[10]||(s[10]=O(t=>D(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):$("",!0)],64))}}),qe=K(Je,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/UsersListing.vue"]]);export{qe as default};
