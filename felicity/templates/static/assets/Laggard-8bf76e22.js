import{S as b,ai as D,a0 as p,a7 as T,W as w,r as I,o as y,c as f,a5 as k,a as L,K as N,N as e,H as v,_ as S}from"./index-56caabce.js";import{C as g}from"./index-a19bfbc2.js";import{u as A}from"./dashboard-2323e652.js";import"./value-c2034ca5.js";import"./string-6dabfbe0.js";const F={class:"mt-4"},j={key:0,class:"text-start my-4"},B={class:"flex justify-start items-center"},C={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},$={class:"font-bold text-foreground text-2xl"},z={class:"mt-8"},V={class:"flex justify-start items-center"},W={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},M={class:"font-bold text-foreground text-2xl"},O=b({__name:"Laggard",setup(R){const i=A(),{dashboard:r}=D(i),d=p(0),c=p(0);T(()=>{i.getSampleLaggards()}),w(()=>r.value.laggards,(n,a)=>{const t=n?.filter(l=>l?.category==="delayed_and_incomplete")[0],o=n?.filter(l=>l?.category==="authorised_already_delayed")[0];d.value=t?.counts?.totalIncomplete??0;const s=[{item:"On-Time",count:t?.counts?.totalDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalDelayed/t?.counts?.totalIncomplete*100:0},{item:"Delayed",count:t?.counts?.totalNotDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalNotDelayed/t?.counts?.totalIncomplete*100:0}];m(s,"late-active-donut");const h=[{type:"<10",value:t?.counts?.lessThanTen},{type:"10 - 20",value:t?.counts?.tenToTwenty},{type:"20 - 30",value:t?.counts?.twentyToThirty},{type:"> 30",value:t?.counts?.graterThanThirty}];u(h,"late-active-since","days since created","number of samples"),c.value=o?.counts?.totalIncomplete??0;const x=[{item:"On-Time",count:o?.counts?.totalDelayed,percent:o?.counts?.totalIncomplete>0?o?.counts?.totalDelayed/o?.counts?.totalIncomplete*100:0},{item:"Delayed",count:o?.counts?.totalNotDelayed,percent:o?.counts?.totalIncomplete>0?o?.counts?.totalNotDelayed/o?.counts?.totalIncomplete*100:0}];m(x,"late-auth-donut");const _=[{type:"<10",value:o?.counts?.lessThanTen},{type:"10 - 20",value:o?.counts?.tenToTwenty},{type:"20 - 30",value:o?.counts?.twentyToThirty},{type:"> 30",value:o?.counts?.graterThanThirty}];u(_,"late-auth-since","days: created to authorised","number of samples")});const u=(n,a,t,o)=>{const s=new g({container:a,autoFit:!0,height:200,width:600});s.data(n),s.scale({value:{max:150,min:0,alias:o},type:{alias:t}}),s.axis("type",{title:{offset:60,style:{fontSize:12,fontWeight:300}},tickLine:null,line:null}),s.axis("value",{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),s.legend(!1),s.coordinate().transpose(),s.interval().position("type*value").size(26).label("value",{style:{fill:"#8d8d8d"},offset:10}),s.interaction("element-active"),s.render()},m=(n,a)=>{const t=new g({container:a,autoFit:!0,height:150,width:300});t.data(n),t.scale("percent",{formatter:o=>`${(o*100).toFixed(2)}%`}),t.coordinate("theta",{radius:.75,innerRadius:.6}),t.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),t.annotation(),t.interval().adjust("stack").position("percent").color("item").label("percent",{content:o=>`${o.item}: ${(o.percent*100).toFixed(2)}%`}).tooltip("item*percent",(o,s)=>({name:o,value:`${(s*100).toFixed(2)}%`})),t.interaction("element-active"),t.render()};return(n,a)=>{const t=I("fel-loader");return y(),f("div",F,[k(r).fetchingLaggards?(y(),f("div",j,[L(t,{message:"Fetching laggard stats..."})])):N("v-if",!0),e("section",null,[a[2]||(a[2]=e("h1",{class:"text-xl text-foreground font-semibold"},"Delayed and incomplete",-1)),a[3]||(a[3]=e("hr",{class:"my-2"},null,-1)),e("div",B,[e("div",C,[e("div",$,v(d.value),1),a[0]||(a[0]=e("div",{class:"font-semibold text-muted-foreground"},"Already Delayed",-1))]),a[1]||(a[1]=e("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[e("div",{class:"me-8"},[e("div",{id:"late-active-donut"})]),e("div",null,[e("div",{id:"late-active-since"})])],-1))])]),e("section",z,[a[6]||(a[6]=e("h1",{class:"text-xl text-foreground font-semibold"},"Authorised already delayed",-1)),a[7]||(a[7]=e("hr",{class:"my-2"},null,-1)),e("div",V,[e("div",W,[e("div",M,v(c.value),1),a[4]||(a[4]=e("div",{class:"font-semibold text-muted-foreground"},"Authorised Already Delayed",-1))]),a[5]||(a[5]=e("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[e("div",{class:"me-8"},[e("div",{id:"late-auth-donut"})]),e("div",null,[e("div",{id:"late-auth-since"})])],-1))])])])}}});const J=S(O,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{J as default};
