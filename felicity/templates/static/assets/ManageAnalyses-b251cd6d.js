import{P as N,e as V,a9 as F,u as L,h as P,aa as x,Z as v,$ as K,o as l,c as i,b as e,A as _,F as p,D as b,E as c,a2 as k,a4 as j,z as A,x as z,K as C,L as I,X as O,Y as X,S as T,_ as Z}from"./index-fa13e788.js";import{u as q}from"./analysis-235f825e.js";import{D as G,F as H}from"./analyses.mutations-bfee3c87.js";const J=e("hr",null,null,-1),Q={action:"post",class:"mt-4"},W={class:"flex justify-start items-center mr-4"},ee=e("span",{class:"text-gray-700"},"Analyses Template (Auto)",-1),te={class:"block mx-4"},se=e("option",null,null,-1),oe=["value"],ae=e("hr",{class:"mt-4 mb-2"},null,-1),ne={class:"font-bold"},le=e("hr",{class:"mb-4 mt-2"},null,-1),re={class:"col-span-2 overflow-y-scroll overscroll-contain max-h-[540px] bg-white"},ie={class:"w-full"},ce={class:"min-w-full"},de={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},ue=["checked","onChange"],pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Analysis",-1),ye=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Keyword",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Description",-1),me={class:"bg-white"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},be=["checked","onChange"],fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},ge={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},xe=e("hr",null,null,-1),ve=N({__name:"ManageAnalyses",emits:["changeTab"],setup(ke,{emit:S}){const B=O(()=>X(()=>import("./FelAccordion-03f58c1a.js"),["assets/FelAccordion-03f58c1a.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"])),{withClientMutation:f}=V(),g=F(),d=q(),y=L(),D=P(()=>d.getAnalysesServices);x(()=>{d.fetchAnalysesTemplates(),d.fetchAnalysesServices({})});const M=S,w=t=>{M("changeTab",t)},h=v(),U=async()=>{try{T.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(t=>{t.isConfirmed&&f(G,{uid:g.params.sampleUid,analysisTemplateUid:h.value},"samplesApplyTemplate").then(s=>w("analysis-results"))})}catch{}},n=v([]);x(()=>{n.value=[...y.analysisResults?.map(t=>t.analysisUid)]});const m=t=>{n.value.includes(t)?n.value=n.value.filter(s=>s!==t):n.value=[...n.value,t]},u=t=>n.value.includes(t),E=t=>t.every(s=>u(s.uid)),R=t=>{t.every(s=>u(s.uid))?t.forEach(s=>m(s.uid)):t.forEach(s=>{u(s.uid)||m(s.uid)})},Y=async()=>{const t=y.analysisResults?.filter(a=>!n.value.includes(a.analysisUid)).map(a=>a.uid),s=n.value.filter(a=>!y.analysisResults?.map(o=>o.analysisUid).includes(a));try{T.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(a=>{a.isConfirmed&&f(H,{sampleUid:g.params.sampleUid,payload:{cancel:t,add:s}},"manageAnalyses").then(o=>w("analysis-results"))})}catch{}};return(t,s)=>{const a=K("motion-slide-right");return l(),i(p,null,[e("section",null,[J,_((l(),i("form",Q,[e("div",W,[ee,e("label",te,[_(e("select",{class:"form-select block w-full py-1","onUpdate:modelValue":s[0]||(s[0]=o=>h.value=o)},[se,(l(!0),i(p,null,b(k(d).analysesTemplates,o=>(l(),i("option",{key:o.uid,value:o.uid},c(o.name),9,oe))),128))],512),[[j,h.value]])]),e("button",{type:"button",onClick:s[1]||(s[1]=A(o=>U(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ")])])),[[a]])]),ae,e("h3",ne,"Manually Modify Analyses: ("+c(n.value?.length)+")",1),le,e("section",re,[e("div",ie,[(l(!0),i(p,null,b(D.value,(o,$)=>(l(),z(k(B),{key:$},{title:C(()=>[I(c(o[0]),1)]),body:C(()=>[e("table",ce,[e("thead",null,[e("tr",null,[e("th",de,[e("input",{type:"checkbox",class:"",checked:E(o[1]),onChange:r=>R(o[1])},null,40,ue)]),pe,ye,he])]),e("tbody",me,[(l(!0),i(p,null,b(o[1],r=>_((l(),i("tr",{key:r?.uid},[e("td",_e,[e("input",{type:"checkbox",class:"border-red-500",checked:u(r?.uid),onChange:Ae=>m(r?.uid)},null,40,be)]),e("td",fe,c(r?.name),1),e("td",ge,c(r?.keyword),1),e("td",we,c(r?.description),1)])),[[a]])),128))])])]),_:2},1024))),128)),xe,e("button",{type:"button",onClick:s[2]||(s[2]=A(o=>Y(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Changes ")])])],64)}}}),Be=Z(ve,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{Be as default};
