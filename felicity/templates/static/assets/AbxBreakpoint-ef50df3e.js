import{P as F,e as L,Z as n,f as S,h as Y,aa as W,o as D,c as j,b as t,a as p,K as y,a2 as o,x as z,E as K,A as i,V as r,z as $,a7 as J,J as Q,F as X,X as g,Y as x,af as I,_ as Z}from"./index-d30fd8e2.js";import{j as ee,a4 as te,a5 as le,c as oe,a6 as se,a7 as ae,a8 as ne,a9 as ie}from"./microbiology.mutations-54cff9c3.js";const re={class:"w-full my-4"},de={action:"post",class:"p-4"},ue={class:"mb-6"},fe={class:"grid grid-cols-2 gap-4"},pe={class:"block"},ce={class:"block"},be={class:"mb-6"},me={class:"grid grid-cols-3 gap-4"},ve={class:"block"},ye={class:"block"},ge={class:"block"},xe={class:"block"},ke={class:"block"},Te={class:"block"},Be={class:"block"},Ae={class:"block"},Ce={class:"block"},he={class:"block"},Ve={class:"block"},we={class:"block"},Ee={class:"block"},Ue={class:"block"},Se={class:"block"},De={class:"block"},Ie=F({__name:"AbxBreakpoint",setup(Oe){const O=g(()=>x(()=>import("./index-d30fd8e2.js").then(a=>a.cN),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),M=g(()=>x(()=>import("./FelDataTable-cc6b383e.js"),["assets/FelDataTable-cc6b383e.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),c=g(()=>x(()=>import("./vue-multiselect.esm-26d4ec41.js"),["assets/vue-multiselect.esm-26d4ec41.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),{withClientMutation:k,withClientQuery:f}=L();let b=n(!1),P=n(""),l=S({});const T=n(!0),B=n(!1),u=n([]),A=n([]),C=n([]),h=n([]),V=n([]),w=n([]);let d=S({first:50,after:"",text:"",sortBy:["-guideline_year___year"],filterAction:!1});const E=n(0);let U=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const R=Y(()=>u?.value?.length+" of "+E.value+" antibiotics"),G=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guidelineYear.code",sortable:!1,sortBy:"asc",hidden:!1},{name:"Test Method",value:"testMethod.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Potency",value:"potency",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCode",value:"organismCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCodeType",value:"organismCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"BreakpointType",value:"breakpointType.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Host",value:"host.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"SiteOfInfection",value:"siteOfInfection.name",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceSequence",value:"referenceSequence",sortable:!1,sortBy:"asc",hidden:!0},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"R",value:"r",sortable:!1,sortBy:"asc",hidden:!1},{name:"I",value:"i",sortable:!1,sortBy:"asc",hidden:!1},{name:"SDD",value:"sdd",sortable:!1,sortBy:"asc",hidden:!1},{name:"S",value:"s",sortable:!1,sortBy:"asc",hidden:!1},{name:"EcvEcoff",value:"ecvEcoff",sortable:!1,sortBy:"asc",hidden:!0},{name:"ecvEcoffTentative",value:"EcvEcoffTentative",sortable:!1,sortBy:"asc",hidden:!0}]);function v(a){f(ae,{text:a.text,pageSize:a.first,sortBy:a.sortBy},void 0).then(e=>{const s=e.abxBreakpointAll,m=s.items;a.filterAction?(u.value=[],u.value=m):u.value=I(u.value,m,"uid"),E.value=s?.totalCount,U.value=s?.pageInfo}).finally(()=>{B.value=!1})}W(()=>{f(ee,{},"abxGuidelinesAll").then(a=>{a&&(A.value=a)}),v(d),f(te,{},"abxHostAll").then(a=>{a&&(C.value=a)}),f(le,{},"abxSiteOfInfectionAll").then(a=>{a&&(V.value=a)}),f(oe,{},"abxTestMethodAll").then(a=>{a&&(w.value=a)}),f(se,{},"abxBreakpointTypeAll").then(a=>{a&&(h.value=a)})});function _(a){d.first=100,d.after="",d.text=a.filterText,d.filterAction=!0,v(d)}function q(a){d.first=a.fetchCount,d.after=U?.value?.endCursor,d.text=a.filterText,d.filterAction=!1,v(d)}const N=()=>Object.assign(l,{});function H(){const a={guidelineUid:l.guidelineUid,year:l.year,testMethod:l.testMethod,potency:l.potency,organismCode:l.organismCode,organismCodeType:l.organismCodeType,breakpointTypeUid:l.breakpointTypeUid,hostUid:l.hostUid,siteOfInfectionUid:l.siteOfInfectionUid,referenceTable:l.referenceTable,referenceSequence:l.referenceSequence,whonetAbxCode:l.whonetAbxCode,comments:l.comments,r:l.r,i:l.i,sdd:l.sdd,s:l.s,ecvEcoff:l.ecvEcoff,ecvEcoffTentative:l.ecvEcoffTentative};T.value===!0&&k(ne,{payload:a},"createAbxBreakpoint").then(e=>{e&&(u.value=I(u.value,[e],"uid"))}),T.value===!1&&k(ie,{uid:l.uid,payload:a},"updateAbxBreakpoint").then(e=>{if(e){const s=u.value.findIndex(m=>m.uid==e.uid);u.value[s]=e}}),b.value=!1}return(a,e)=>(D(),j(X,null,[t("div",re,[e[21]||(e[21]=t("hr",null,null,-1)),p(o(M),{columns:G.value,data:u.value,toggleColumns:!0,loading:B.value,paginable:!0,pageMeta:{fetchCount:o(d).first,hasNextPage:!0,countNone:R.value},searchable:!0,filterable:!1,onOnSearchKeyUp:_,onOnSearchFocus:N,onOnPaginate:q,selectable:!1},{footer:y(()=>e[20]||(e[20]=[])),_:1},8,["columns","data","loading","pageMeta"])]),o(b)?(D(),z(o(O),{key:0,onClose:e[19]||(e[19]=s=>J(b)?b.value=!1:b=!1),"content-width":"w-1/2"},{header:y(()=>[t("h3",null,K(o(P)),1)]),body:y(()=>[t("form",de,[t("div",ue,[e[24]||(e[24]=t("h4",{class:"text-lg font-semibold mb-4"},"Basic Information",-1)),t("div",fe,[t("label",pe,[e[22]||(e[22]=t("span",{class:"text-gray-700"},"Guidelines",-1)),p(o(c),{modelValue:o(l).guidelines,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).guidelines=s),options:A.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",ce,[e[23]||(e[23]=t("span",{class:"text-gray-700"},"Year",-1)),i(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=s=>o(l).year=s),placeholder:"Year"},null,512),[[r,o(l).year]])])])]),t("div",be,[t("div",me,[t("label",ve,[e[25]||(e[25]=t("span",{class:"text-gray-700"},"Test Method",-1)),p(o(c),{modelValue:o(l).testMethod,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).testMethod=s),options:w.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",ye,[e[26]||(e[26]=t("span",{class:"text-gray-700"},"Potency",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=s=>o(l).potency=s),placeholder:"Potency"},null,512),[[r,o(l).potency]])]),t("label",ge,[e[27]||(e[27]=t("span",{class:"text-gray-700"},"Organism Code",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=s=>o(l).organismCode=s),placeholder:"Organism Code"},null,512),[[r,o(l).organismCode]])]),t("label",xe,[e[28]||(e[28]=t("span",{class:"text-gray-700"},"Organism Code Type",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=s=>o(l).organismCodeType=s),placeholder:"Organism Code Type"},null,512),[[r,o(l).organismCodeType]])]),t("label",ke,[e[29]||(e[29]=t("span",{class:"text-gray-700"},"Breakpoint Type",-1)),p(o(c),{modelValue:o(l).breakpointType,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).breakpointType=s),options:h.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",Te,[e[30]||(e[30]=t("span",{class:"text-gray-700"},"Host",-1)),p(o(c),{modelValue:o(l).host,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).host=s),options:C.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",Be,[e[31]||(e[31]=t("span",{class:"text-gray-700"},"Site Of Infection",-1)),p(o(c),{modelValue:o(l).siteOfInfection,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).siteOfInfection=s),options:V.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",Ae,[e[32]||(e[32]=t("span",{class:"text-gray-700"},"Reference Table",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=s=>o(l).referenceTable=s),placeholder:"Reference Table"},null,512),[[r,o(l).referenceTable]])]),t("label",Ce,[e[33]||(e[33]=t("span",{class:"text-gray-700"},"Reference Sequence",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[10]||(e[10]=s=>o(l).referenceSequence=s),placeholder:"Reference Sequence"},null,512),[[r,o(l).referenceSequence]])]),t("label",he,[e[34]||(e[34]=t("span",{class:"text-gray-700"},"Whonet AbxCode",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[11]||(e[11]=s=>o(l).whonetAbxCode=s),placeholder:"Whonet AbxCode"},null,512),[[r,o(l).whonetAbxCode]])]),t("label",Ve,[e[35]||(e[35]=t("span",{class:"text-gray-700"},"R",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[12]||(e[12]=s=>o(l).r=s),placeholder:"R"},null,512),[[r,o(l).r]])]),t("label",we,[e[36]||(e[36]=t("span",{class:"text-gray-700"},"I",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[13]||(e[13]=s=>o(l).i=s),placeholder:"I"},null,512),[[r,o(l).i]])]),t("label",Ee,[e[37]||(e[37]=t("span",{class:"text-gray-700"},"SDD",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[14]||(e[14]=s=>o(l).sdd=s),placeholder:"SDD"},null,512),[[r,o(l).sdd]])]),t("label",Ue,[e[38]||(e[38]=t("span",{class:"text-gray-700"},"S",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[15]||(e[15]=s=>o(l).s=s),placeholder:"S"},null,512),[[r,o(l).s]])]),t("label",Se,[e[39]||(e[39]=t("span",{class:"text-gray-700"},"EcvEcoff",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[16]||(e[16]=s=>o(l).ecvEcoff=s),placeholder:"EcvEcoff"},null,512),[[r,o(l).ecvEcoff]])]),t("label",De,[e[40]||(e[40]=t("span",{class:"text-gray-700"},"EcvEcoff Tentative",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[17]||(e[17]=s=>o(l).ecvEcoffTentative=s),placeholder:"EcvEcoff Tentative"},null,512),[[r,o(l).ecvEcoffTentative]])])])]),e[41]||(e[41]=t("hr",{class:"my-6"},null,-1)),t("button",{type:"button",onClick:e[18]||(e[18]=$(s=>H(),["prevent"])),class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save Breakpoint ")])]),_:1})):Q("",!0)],64))}});const Re=Z(Ie,[["__scopeId","data-v-98440155"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/breakpoints/AbxBreakpoint.vue"]]);export{Re as default};
