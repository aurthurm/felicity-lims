import{d as $,I as G,r as d,n as U,q,a6 as z,o as a,c as l,b as e,F as b,C as f,t as c,y as p,z as Q,A as I,w as R,e as _,v as k,ae as M,f as W,j as H,_ as J,D as K,E as X,k as Y}from"./index-68ba4247.js";import{G as Z,k as ee,M as te,N as se,O as oe}from"./microbiology.mutations-f934cb5e.js";const r=x=>(K("data-v-195d3b3a"),x=x(),X(),x),ie={class:"w-full my-4"},ne={class:"flex justify-between items-center mb-4"},ae=r(()=>e("h2",{class:"text-xl font-semibold"},"AST Panels",-1)),le=r(()=>e("hr",null,null,-1)),de={class:"overflow-x-auto mt-4"},re={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ce={class:"min-w-full"},ue=r(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Name"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Description"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Organisms"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Antibiotics"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),me={class:"bg-white"},be={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},pe={class:"text-sm leading-5 text-gray-800"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},he={class:"text-sm leading-5 text-sky-800"},ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},fe={class:"text-sm leading-5 text-sky-800"},xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ge={class:"text-sm leading-5 text-sky-800"},ye={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},we=["onClick"],Ae={class:"space-y-4"},ke={class:"grid grid-cols-1 gap-4"},Oe={class:"block"},Se=r(()=>e("span",{class:"text-gray-700"},"Panel Name",-1)),Ce={class:"block"},Pe=r(()=>e("span",{class:"text-gray-700"},"Description",-1)),De={class:"flex gap-4"},Ee={class:"w-2/3 space-y-2"},Le={class:"block"},Ie=r(()=>e("span",{class:"text-gray-700"},"Search Organisms",-1)),Me={class:"border p-2 h-64 overflow-y-auto"},Ve=["value"],Te={class:"ml-2"},je={class:"w-1/3"},Be=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Organisms",-1)),Fe={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Ne={class:"text-sm"},$e=["onClick"],Ge={class:"flex gap-4"},Ue={class:"w-2/3 space-y-2"},qe={class:"block"},ze=r(()=>e("span",{class:"text-gray-700"},"Search Antibiotics",-1)),Qe={class:"border p-2 h-64 overflow-y-auto"},Re=["value"],We={class:"ml-2"},He={class:"w-1/3"},Je=r(()=>e("div",{class:"text-gray-700 mb-1"},"Selected Antibiotics",-1)),Ke={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Xe={class:"text-sm"},Ye=["onClick"],Ze=r(()=>e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2"}," Save Panel ")],-1)),et=$({__name:"AstPanel",setup(x){const V=H(()=>J(()=>import("./index-68ba4247.js").then(i=>i.bs),["assets/index-68ba4247.js","assets/index-d6482eee.css"])),{withClientMutation:C,withClientQuery:O}=G(),g=d(!1),P=d(""),D=d(!0),y=d(""),w=d(""),m=d([]),h=d([]),A=d([]),u=d([]),S=d([]),o=U({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});q(()=>{T(),E(),j()});function T(){O(Z,{},"abxLaboratoryAntibiotics").then(i=>{i&&(h.value=i,A.value=[...h.value])})}function E(){O(ee,{text:y.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(i=>{u.value=u.value?.filter(s=>o.selectedOrganisms.includes(s.uid))||[],u.value=z(u.value,i?.items,"uid"),S.value=[...u.value]})}function j(){O(te,{},"abxAstPanelAll").then(i=>{i&&(m.value=i,m.value.forEach(s=>s.organisms?.forEach(t=>u.value.push(t))))})}function L(i,s={}){D.value=i,g.value=!0,P.value=(i?"Create":"Edit")+" AST Panel",i?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=s.uid,o.name=s.name,o.description=s.description,o.selectedAntibiotics=s.antibiotics?.map(t=>t.uid)||[],o.selectedOrganisms=s.organisms?.map(t=>t.uid)||[])}function B(){const i={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};D.value?C(se,{payload:i},"createAbxAstPanel").then(s=>{s&&m.value.unshift(s)}):C(oe,{uid:o.uid,payload:i},"updateAbxAstPanel").then(s=>{if(s){const t=m.value.findIndex(n=>n.uid===s.uid);t>-1&&(m.value=[...m.value.map((n,v)=>v===t?s:n)])}}),g.value=!1}function F(){if(!w.value){A.value=[...h.value];return}A.value=h.value.filter(i=>i.name.toLowerCase().includes(w.value.toLowerCase()))}function N(){if(!y.value){S.value=[...u.value];return}E()}return(i,s)=>(a(),l(b,null,[e("div",ie,[e("div",ne,[ae,e("button",{onClick:s[0]||(s[0]=t=>L(!0)),class:"px-4 py-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Panel ")]),le,e("div",de,[e("div",re,[e("table",ce,[ue,e("tbody",me,[(a(!0),l(b,null,f(m.value,t=>(a(),l("tr",{key:t?.uid},[e("td",be,[e("div",pe,c(t?.name),1)]),e("td",_e,[e("div",he,c(t?.description),1)]),e("td",ve,[e("div",fe,c(t?.organisms?.map(n=>n.name).join(", ")),1)]),e("td",xe,[e("div",ge,c(t?.antibiotics?.map(n=>n.name).join(", ")),1)]),e("td",ye,[e("button",{onClick:n=>L(!1,t),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Edit ",8,we)])]))),128))])])])])]),p(" Panel Form Modal "),g.value?(a(),Q(W(V),{key:0,onClose:s[7]||(s[7]=t=>g.value=!1),contentWidth:"w-1/2"},{header:I(()=>[e("h3",null,c(P.value),1)]),body:I(()=>[e("form",{onSubmit:R(B,["prevent"]),class:"p-4"},[e("div",Ae,[e("div",ke,[e("label",Oe,[Se,_(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.name=t),class:"form-input mt-1 block w-full",placeholder:"Enter panel name"},null,512),[[k,o.name]])]),e("label",Ce,[Pe,_(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.description=t),rows:"2",class:"form-input mt-1 block w-full",placeholder:"Enter description"},null,512),[[k,o.description]])])]),p(" Organisms Selection with Selected List "),e("div",De,[e("div",Ee,[e("label",Le,[Ie,_(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>y.value=t),onInput:N,class:"form-input mt-1 block w-full",placeholder:"Search organisms..."},null,544),[[k,y.value]])]),e("div",Me,[(a(!0),l(b,null,f(S.value,t=>(a(),l("div",{key:t.uid,class:"flex items-center py-1"},[_(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[4]||(s[4]=n=>o.selectedOrganisms=n),class:"form-checkbox"},null,8,Ve),[[M,o.selectedOrganisms]]),e("span",Te,c(t.name),1)]))),128))])]),p(" Selected Organisms List "),e("div",je,[Be,e("div",Fe,[(a(!0),l(b,null,f(o.selectedOrganisms,t=>(a(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Ne,c(u.value?.find(n=>n.uid===t)?.name),1),e("button",{onClick:n=>o.selectedOrganisms=o.selectedOrganisms.filter(v=>v!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,$e)]))),128))])])]),p(" Antibiotics Selection with Selected List "),e("div",Ge,[e("div",Ue,[e("label",qe,[ze,_(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>w.value=t),onInput:F,class:"form-input mt-1 block w-full",placeholder:"Search antibiotics..."},null,544),[[k,w.value]])]),e("div",Qe,[(a(!0),l(b,null,f(A.value,t=>(a(),l("div",{key:t.uid,class:"flex items-center py-1"},[_(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":s[6]||(s[6]=n=>o.selectedAntibiotics=n),class:"form-checkbox"},null,8,Re),[[M,o.selectedAntibiotics]]),e("span",We,c(t.name),1)]))),128))])]),p(" Selected Antibiotics List "),e("div",He,[Je,e("div",Ke,[(a(!0),l(b,null,f(o.selectedAntibiotics,t=>(a(),l("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Xe,c(h.value.find(n=>n.uid==t)?.name),1),e("button",{onClick:n=>o.selectedAntibiotics=o.selectedAntibiotics.filter(v=>v!==t),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,Ye)]))),128))])])])]),Ze],32)]),_:1})):p("v-if",!0)],64))}});const ot=Y(et,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{ot as default};
