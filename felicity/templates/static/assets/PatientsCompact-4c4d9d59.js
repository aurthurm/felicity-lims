import{P as G,ai as $,Z as E,f as U,h as x,aa as Q,r as H,$ as K,o as a,c as u,a as v,b as t,x as f,K as g,L as z,J as y,A as k,a2 as A,F as J,D as X,X as n,a1 as Y,E as l,Y as i,_ as Z}from"./index-66877f9a.js";import{u as q}from"./patient-7c5d36e2.js";import{u as W}from"./location-2a6916e7.js";import{h as T,o as I,a as L}from"./constants-ea5b2d4b.js";const ee={class:"p-4"},te={class:"flex justify-between mb-4"},se={class:"flex items-center gap-4"},oe={class:"grid grid-cols-12 gap-4"},ae={initial:{opacity:0,y:100},enter:{opacity:1,y:0},delay:400,class:"col-span-3 h-screen overflow-y-auto scrollbar scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},ne=["onClick"],ie={class:"flex-grow p-3"},re={class:"flex justify-between font-semibold"},le={class:"text-sm text-gray-500"},ce={class:"text-sm text-gray-500 flex justify-between mt-1"},de={class:"text-sm text-gray-500 flex justify-between mt-1"},ue={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0},delay:400,class:"col-span-9"},_e=G({__name:"PatientsCompact",setup(pe){const m={MALE:0,FEMALE:1,MISSING:2,TRANS:3},w={[m.MALE]:"Male",[m.FEMALE]:"Female",[m.MISSING]:"Missing",[m.TRANS]:"Trans Gender"},c={LoadingMessage:n(()=>i(()=>import("./FelLoadingMessage-da26a10d.js"),["assets/FelLoadingMessage-da26a10d.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),PageHeading:n(()=>i(()=>import("./index-66877f9a.js").then(e=>e.cM),["assets/index-66877f9a.js","assets/index-78b87750.css"])),Modal:n(()=>i(()=>import("./index-66877f9a.js").then(e=>e.cN),["assets/index-66877f9a.js","assets/index-78b87750.css"])),PatientForm:n(()=>i(()=>import("./PatientForm-c7a374c8.js"),["assets/PatientForm-c7a374c8.js","assets/index-66877f9a.js","assets/index-78b87750.css","assets/vue-multiselect.esm-c75711a1.js","assets/patient.mutations-c6819497.js","assets/client-cfc36a9d.js","assets/location-2a6916e7.js","assets/patient-7c5d36e2.js","assets/array-08c0d647.js","assets/vue-multiselect-a538cd7c.css"])),PatientInfo:n(()=>i(()=>import("./PatientInfo-7d4f7a26.js"),["assets/PatientInfo-7d4f7a26.js","assets/index-66877f9a.js","assets/index-78b87750.css","assets/constants-ea5b2d4b.js","assets/patient-7c5d36e2.js"])),Tabs:n(()=>i(()=>import("./FelTabs-917231b0.js"),["assets/FelTabs-917231b0.js","assets/index-66877f9a.js","assets/index-78b87750.css","assets/FelTabs-2560176b.css"]))},_=q(),R=W(),{patients:C,fetchingPatients:D}=$(_),p=E(!1),r=E({}),d=U({first:25,before:"",text:"",sortBy:["-uid"],filterAction:!1}),S=x(()=>Object.keys(r.value).length>0),N=x(()=>[{id:"samples",label:"Samples",component:n(()=>i(()=>import("./FelAnalyisRequestListing-684ee823.js"),["assets/FelAnalyisRequestListing-684ee823.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),props:{target:"patient-samples",targetUid:r.value.uid}},{id:"billing",label:"Billing",component:n(()=>i(()=>import("./PatientBill-f7c38ef4.js"),["assets/PatientBill-f7c38ef4.js","assets/index-66877f9a.js","assets/index-78b87750.css","assets/billing-3ae57688.js","assets/array-08c0d647.js","assets/PatientBill-7bdbff76.css"])),props:{patientUid:r.value.uid}},{id:"logs",label:"Logs",component:n(()=>i(()=>import("./FelAuditLog-7bea18c4.js"),["assets/FelAuditLog-7bea18c4.js","assets/index-66877f9a.js","assets/index-78b87750.css","assets/user-dbd21878.js","assets/_queries-6b94db9a.js"])),props:{targetType:"patient",targetUid:r.value.uid}}]),M=e=>`${e.firstName} ${e.lastName}`,V=e=>w[e]||"Unknown",b=e=>{r.value=e,_.setPatient(e)},h=()=>{r.value={},_.resetPatient()},F=e=>{const s=e.target;d.first=100,d.before="",d.text=s.value,d.filterAction=!0,_.fetchPatients(d)},O=async()=>{h(),p.value=!0},B=e=>{b(e),p.value=!1};return Q(()=>{R.fetchCountries(),_.fetchPatients(d)}),(e,s)=>{const j=H("router-link"),P=K("motion");return a(),u("div",ee,[v(c.PageHeading,{title:"Patients Quick View"}),t("div",te,[t("div",se,[T(L.CREATE,I.PATIENT)?(a(),f(j,{key:0,to:"/patients/search",class:"px-4 py-2 text-sm border border-sky-800 text-dark-800 rounded-sm hover:bg-sky-800 hover:text-gray-100 transition-colors duration-150"},{default:g(()=>s[2]||(s[2]=[z(" Add Patient ")])),_:1})):y("",!0),t("input",{type:"text",placeholder:"Search patients...",class:"w-64 px-4 py-2 text-sm text-gray-800 placeholder-gray-400 border border-gray-400 rounded-sm focus:border-sky-800 focus:outline-none focus:ring-1 focus:ring-sky-800",onKeyup:F,onFocus:h},null,32)]),T(L.CREATE,I.PATIENT)?(a(),u("button",{key:0,class:"px-4 py-2 text-sm border border-sky-800 text-dark-700 rounded-sm hover:bg-sky-800 hover:text-gray-100 transition-colors duration-150",onClick:O}," Quick Registration ")):y("",!0)]),s[4]||(s[4]=t("hr",{class:"my-4"},null,-1)),t("div",oe,[k((a(),u("section",ae,[A(D)?(a(),f(c.LoadingMessage,{key:0,message:"Fetching patients..."})):(a(!0),u(J,{key:1},X(A(C),o=>(a(),u("div",{key:o.patientId,onClick:me=>b(o),class:Y(["bg-white w-full flex items-center mb-1 rounded-sm shadow border cursor-pointer transition-colors duration-150 hover:border-sky-800 hover:bg-sky-50",{"border-sky-800 bg-emerald-200":o.uid===r.value?.uid}])},[t("div",ie,[t("div",re,[t("span",null,l(M(o)),1),t("span",le,l(o.age)+" yrs, "+l(V(o.gender)),1)]),t("div",ce,[t("span",null,l(o.patientId),1),t("span",null,l(o.clientPatientId),1)]),t("div",de,[t("span",null,l(o?.client?.district?.province?.name),1),t("span",null,l(o?.client?.name),1)])])],10,ne))),128))])),[[P]]),S.value?k((a(),u("section",ue,[v(c.PatientInfo,{onEditPatient:s[0]||(s[0]=o=>p.value=!0)}),v(c.Tabs,{tabs:N.value,"initial-tab":"samples"},null,8,["tabs"])])),[[P]]):y("",!0)]),p.value?(a(),f(c.Modal,{key:0,onClose:s[1]||(s[1]=o=>p.value=!1),"content-width":"w-3/6"},{header:g(()=>s[3]||(s[3]=[t("h3",null,"Patient Form",-1)])),body:g(()=>[v(c.PatientForm,{patient:r.value,navigate:!1,onClose:B},null,8,["patient"])]),_:1})):y("",!0)])}}});const be=Z(_e,[["__scopeId","data-v-81af20fc"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/patient/PatientsCompact.vue"]]);export{be as default};
