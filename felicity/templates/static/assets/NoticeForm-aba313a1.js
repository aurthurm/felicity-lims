import{P as C,Z as n,aa as L,e as U,t as q,ak as x,r as _,o as k,c as P,b as o,A as I,V as $,a2 as i,a7 as u,E as m,x as R,J as z,a as Q,z as j,_ as G}from"./index-d30fd8e2.js";import{C as J,A as O,a as W,b as Z,B as K,c as X,E as ee,H as te,I as oe,d as ie,e as se,L as ae,P as ne,S as le,T as re,f as de,U as ce,g as ue}from"./index-6a15082c.js";import{A as me,E as pe}from"./Notices-18eb7dcd.js";import{u as ge}from"./notice-e08cdf88.js";import{c as be,d as he,a as w,f as fe,e as N,u as ve,b as p}from"./array-1b5e3a20.js";import"./_baseForOwn-f8b6c6a4.js";import"./merge-7f5b15d7.js";import"./_isIterateeCall-a4fbb5d5.js";import"./isArray-513c67aa.js";import"./mapValues-402b14f2.js";import"./isString-1cf7a4aa.js";import"./clone-5de9f70c.js";import"./_baseSet-fa2fd3bf.js";import"./setup-dd094621.js";import"./_queries-3ca7633b.js";const ye={class:"grid grid-cols-2 gap-x-4 mb-4"},xe={class:"block col-span-2 mb-2"},_e={class:"text-orange-600 w-4/12"},ke={class:"block col-span-2 mb-2"},we={class:"main-container min-w-full prose prose-slate"},Ne={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},De={class:"editor-container__editor"},Ve={ref:"editorElement"},Ee={class:"text-orange-600 w-4/12"},He={class:"block col-span-2 mb-2"},Se={class:"text-orange-600 w-4/12"},Be=C({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(D,{emit:V}){const g=n(!1),b=n(null),E=n(J);L(()=>{b.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[O,W,Z,K,X,ee,te,oe,ie,se,ae,ne,le,re,de,ce,ue],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},g.value=!0});const H=D,h=V,{withClientMutation:f}=U(),v=ge(),{notice:a}=q(H),S=n(new Date),B=be({uid:he(),title:w().required("Notice is required"),body:w().required("Notice body message is required"),expiry:fe().required("Expiry is required").typeError("Invalid Date format"),groups:N(),departments:N()}),{handleSubmit:A,errors:l}=ve({validationSchema:B,initialValues:{uid:a?.value?.uid,title:a?.value?.title,body:a?.value?.body,expiry:a?.value?.expiry,groups:a?.value?.groups,departments:a?.value?.departments}}),{value:r}=p("title"),{value:d}=p("body"),{value:c}=p("expiry"),y=A(t=>{t.uid||F(t),t.uid&&M(t)});function F(t){f(me,{payload:{title:t.title,body:t.body,expiry:x(t.expiry,"YYYY-MM-DD HH:mm"),groups:t.groups||[],departments:t.departments||[]}},"createNotice").then(e=>{v.addNotice(e),h("close")})}function M(t){f(pe,{uid:t.uid,payload:{title:t.title,body:t.body,expiry:x(t.expiry,"YYYY-MM-DD HH:mm"),groups:t.groups||[],departments:t.departments||[]}},"updateNotice").then(e=>{v.updateNotice(e),h("close")})}return(t,e)=>{const T=_("ckeditor"),Y=_("VueDatePicker");return k(),P("form",{action:"post",class:"p-1",onSubmit:e[3]||(e[3]=j((...s)=>i(y)&&i(y)(...s),["prevent"]))},[o("div",ye,[o("label",xe,[e[4]||(e[4]=o("span",{class:"text-gray-700"},"Title",-1)),I(o("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=s=>u(r)?r.value=s:null),placeholder:"Name ..."},null,512),[[$,i(r)]]),o("div",_e,m(i(l).title),1)]),o("label",ke,[e[5]||(e[5]=o("span",{class:"text-gray-700"},"Body",-1)),o("div",we,[o("div",Ne,[o("div",De,[o("div",Ve,[g.value?(k(),R(T,{key:0,modelValue:i(d),"onUpdate:modelValue":e[1]||(e[1]=s=>u(d)?d.value=s:null),editor:E.value,config:b.value,"tag-name":"textarea"},null,8,["modelValue","editor","config"])):z("",!0)],512)])],512)]),o("div",Ee,m(i(l).body),1)]),o("label",He,[e[6]||(e[6]=o("span",{class:"text-gray-700"},"Expiration",-1)),Q(Y,{class:"z-60",modelValue:i(c),"onUpdate:modelValue":e[2]||(e[2]=s=>u(c)?c.value=s:null),"min-date":S.value,placeholder:"Select Expiry Date"},null,8,["modelValue","min-date"]),o("div",Se,m(i(l).expiry),1)])]),e[7]||(e[7]=o("hr",null,null,-1)),e[8]||(e[8]=o("button",{type:"submit",class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ",-1))],32)}}}),je=G(Be,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{je as default};
