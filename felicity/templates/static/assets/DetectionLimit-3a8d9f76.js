import{P as N,e as F,t as O,Z as f,f as R,R as B,h as L,o as l,c as r,b as t,F as m,D as x,E as a,a2 as i,x as $,K as D,A as p,a4 as A,V as U,z as j,a7 as P,J as q,X as Y,Y as z,_ as J}from"./index-66877f9a.js";import{Q as K,T as Q}from"./analyses.mutations-7e87125c.js";import{u as W}from"./analysis-793745a0.js";import{u as X}from"./setup-e3499a38.js";import"./_queries-6b94db9a.js";const Z={class:"overflow-x-auto mt-4"},G={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},H={class:"min-w-full"},tt={class:"bg-white"},et={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},st={class:"flex items-center"},ot={class:"text-sm leading-5 text-gray-800"},nt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},it={class:"text-sm leading-5 text-sky-800"},lt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},rt={class:"text-sm leading-5 text-sky-800"},at={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},dt={class:"text-sm leading-5 text-sky-800"},ut={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},mt=["onClick"],pt={action:"post",class:"p-1"},ct={class:"grid grid-cols-4 gap-x-4 mb-4"},yt={class:"block col-span-1 mb-2"},bt={class:"w-full"},ft=["value"],xt={class:"block col-span-1 mb-2"},vt={class:"w-full"},gt=["value"],wt={class:"block col-span-1 mb-2"},ht={class:"block col-span-1 mb-2"},_t=N({__name:"DetectionLimit",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(C){const I=Y(()=>z(()=>import("./index-66877f9a.js").then(o=>o.cN),["assets/index-66877f9a.js","assets/index-78b87750.css"])),v=W(),u=X(),{withClientMutation:g}=F(),w=C,{analysis:h}=O(w);let d=f(!1),_=f(""),n=R({});const c=f(!0);B(()=>w.analysisUid,(o,e)=>{}),u.fetchInstruments();const y=L(()=>u.getInstruments);u.fetchMethods();const b=L(()=>u.getMethods);function E(){const o={...n,analysisUid:h?.value?.uid};g(K,{payload:o},"createAnalysisDetectionLimit").then(e=>v.addAnalysisDetectionLimit(e))}function M(){const o={...n};delete o.uid,delete o.__typename,g(Q,{uid:n.uid,payload:o},"updateAnalysisDetectionLimit").then(e=>v.updateAnalysisDetectionLimit(e))}function k(o,e={}){c.value=o,d.value=!0,_.value=(o?"CREATE":"EDIT")+" ANALYSIS DETECTION_LIMIT",o?Object.assign(n,{lowerLimit:null,upperLimit:null,instrumentUid:null,methodUid:null}):Object.assign(n,{...e})}function S(){c.value===!0&&E(),c.value===!1&&M(),d.value=!1}const V=o=>{const e=y?.value?.findIndex(s=>s.uid===o);return y?.value[e]?.name||"unknown"},T=o=>{const e=b?.value?.findIndex(s=>s.uid===o);return b?.value[e]?.name||"unknown"};return(o,e)=>(l(),r(m,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[0]||(e[0]=s=>k(!0))},"Add Detection Limit"),e[15]||(e[15]=t("hr",null,null,-1)),t("div",Z,[t("div",G,[t("table",H,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Intrument"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Method"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Lower Limit"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Upper Limit"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),t("tbody",tt,[(l(!0),r(m,null,x(i(h)?.detectionLimits,s=>(l(),r("tr",{key:s?.uid},[t("td",et,[t("div",st,[t("div",null,[t("div",ot,a(V(s?.instrumentUid)),1)])])]),t("td",nt,[t("div",it,a(T(s?.instrumentUid)),1)]),t("td",lt,[t("div",rt,a(s.lowerLimit),1)]),t("td",at,[t("div",dt,a(s.upperLimit),1)]),t("td",ut,[t("button",{onClick:kt=>k(!1,s),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,mt)])]))),128))])])])]),i(d)?(l(),$(i(I),{key:0,onClose:e[6]||(e[6]=s=>P(d)?d.value=!1:d=!1),contentWidth:"w-2/4"},{header:D(()=>[t("h3",null,a(i(_)),1)]),body:D(()=>[t("form",pt,[t("div",ct,[t("label",yt,[e[9]||(e[9]=t("span",{class:"text-gray-700 w-4/12"},"Instrument",-1)),t("div",bt,[p(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":e[1]||(e[1]=s=>i(n).instrumentUid=s)},[e[8]||(e[8]=t("option",null,null,-1)),(l(!0),r(m,null,x(y.value,s=>(l(),r("option",{key:s?.uid,value:s.uid},a(s?.name),9,ft))),128))],512),[[A,i(n).instrumentUid]])])]),t("label",xt,[e[11]||(e[11]=t("span",{class:"text-gray-700 w-4/12"},"Method",-1)),t("div",vt,[p(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":e[2]||(e[2]=s=>i(n).methodUid=s)},[e[10]||(e[10]=t("option",null,null,-1)),(l(!0),r(m,null,x(b.value,s=>(l(),r("option",{key:s?.uid,value:s.uid},a(s?.name),9,gt))),128))],512),[[A,i(n).methodUid]])])]),t("label",wt,[e[12]||(e[12]=t("span",{class:"text-gray-700"},"Lower Limit",-1)),p(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=s=>i(n).lowerLimit=s),placeholder:"Value ..."},null,512),[[U,i(n).lowerLimit]])]),t("label",ht,[e[13]||(e[13]=t("span",{class:"text-gray-700"},"Upper Limit",-1)),p(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=s=>i(n).upperLimit=s),placeholder:"Value ..."},null,512),[[U,i(n).upperLimit]])])]),e[14]||(e[14]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[5]||(e[5]=j(s=>S(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):q("",!0)],64))}}),It=J(_t,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/DetectionLimit.vue"]]);export{It as default};
