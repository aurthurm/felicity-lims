import{d as F,aL as z,D as G,r as v,C as H,o as a,c as r,b as e,F as u,p as h,w,y,f as i,t as d,i as T,g as q,G as f,H as S,e as b,ad as O,x as D,q as K,v as Q,ac as W,j as M,_ as N,P as c,bu as Y,bv as J,bw as X,O as Z,k as ee}from"./index-2a6c9271.js";const se={class:""},te={class:"container w-full my-4"},oe=e("hr",null,null,-1),ne=e("hr",null,null,-1),le=e("hr",null,null,-1),ie={class:"grid grid-cols-12 gap-4 mt-2"},ae={class:"col-span-3 overflow-y-scroll overscroll-contain patient-scrol"},re=["onClick"],ce={class:"cursor-pointer"},de={class:"flex-grow p-1"},ue={class:"font-medium text-gray-800 hover:text-gray-600 flex justify-between"},_e=e("span",{class:"text-sm text-gray-500"},null,-1),pe={key:0,class:"col-span-9"},he={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},me={class:"grid grid-cols-12 gap-3"},ge={class:"col-span-12 px-3 sm:px-0"},ve={class:"flex justify-between"},fe={class:"sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},be=e("hr",null,null,-1),ye={div:"",class:"flex justify-start mt-2"},xe=e("h3",{class:"mr-2 text-gray-600 font-semibold"},"Pages: ",-1),ke=e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),we=[ke],Ae={class:"bg-white shadow-md mt-2"},Ce={class:"-mb-px flex justify-start"},Ee=["onClick"],Pe={class:"mt-2 p-2 bg-white"},Ge={key:0},Te={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Se={class:"grid grid-cols-4 gap-2 w-full"},Oe=["onClick"],De={class:"flex-grow p-1"},Me={class:y(["font-medium text-gray-500 hover:text-gray-700 flex justify-start",{"text-gray-700 font-medium":!1}])},Ne=["onClick"],Ue={class:"inline-block w-10 mr-2 align-middle transition duration-200 ease-in"},Le=["onUpdate:modelValue"],Re=e("hr",null,null,-1),je={key:1},Ve=e("h3",null,"Error",-1),Ie=e("hr",null,null,-1),$e=[Ve,Ie],Be={action:"post",class:"p-1"},Fe={class:"grid grid-cols-2 gap-x-4 mb-4"},ze={class:"block col-span-2 mb-2"},He=e("span",{class:"text-gray-700"},"Group Name",-1),qe={class:"block col-span-2 mb-2"},Ke=e("span",{class:"text-gray-700"},"Pages",-1),Qe=["size"],We=["value"],Ye={for:"toggle",class:"text-xs text-gray-700 mr-4"},Je={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Xe=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),Ze=e("hr",null,null,-1),es=F({__name:"Groups",setup(ss){const U=M(()=>N(()=>import("./SimpleModal-0c0664c5.js"),["assets/SimpleModal-0c0664c5.js","assets/index-2a6c9271.js","assets/index-88806377.css","assets/SimpleModal-f645a074.css"])),L=M(()=>N(()=>import("./Accordion-e7840e62.js"),["assets/Accordion-e7840e62.js","assets/index-2a6c9271.js","assets/index-88806377.css"])),A=[c.ADMINISTRATION,c.DASHBOARD,c.CLIENTS,c.PATIENTS,c.PATIENTS_COMPACT,c.SAMPLES,c.QC_SAMPLES,c.WORKSHEETS,c.NOTICE_MANAGER];let _=z();const{withClientMutation:x}=Z();_.fetchGroupsAndPermissions();const R=G(()=>_.getGroups);let m=v("permissions");const j=["permissions"];let p=v(!1),C=v("");const k=v(!0);let o=H({});function V(n){const t=n.pages;Object.assign(o,{...n,pages:t?.split(",")||[]}),P.value?.forEach(s=>{s[1].forEach(l=>{l.checked=!1,o.permissions?.some(g=>g?.uid==l?.uid||!1)&&(l.checked=!0)})})}function E(n,t={}){k.value=n,p.value=!0,C.value=(n?"CREATE":"EDIT")+" ANALYSES PROFILE",n?Object.assign(o,{name:"",pages:[]}):Object.assign(o,{...t})}function I(){const n={...o},t=n.pages;n.pages=t.join(","),k.value===!0&&x(Y,{payload:n},"createGroup").then(s=>_.addGroup(s)),k.value===!1&&x(J,{uid:o?.uid,payload:{name:n.name,pages:n.pages}},"updateGroup").then(s=>_.updateGroup(s)),p.value=!1}const $=(n,t)=>n?.reduce(function(s,l){return(s[l[t]]=s[l[t]]||[]).push(l),s},{}),P=G(()=>Array.from(Object.entries($(_.getPermissions,"target"))));function B(n,t){x(X,{groupUid:n?.uid,permissionUid:t?.uid},"updateGroupPermissions").then(s=>_.updateGroupsAndPermissions(s))}return(n,t)=>(a(),r(u,null,[e("div",se,[e("div",te,[oe,e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:t[0]||(t[0]=s=>E(!0))},"Add Group"),ne]),le,e("div",ie,[e("section",ae,[e("ul",null,[(a(!0),r(u,null,h(R.value,s=>(a(),r("li",{key:s?.uid,onClick:w(l=>V(s),["prevent","stop"]),class:y(["bg-white shadow w-full p-1 mb-1 rounded-sm",{"border border-sky-800 bg-emerald-200":s?.uid===i(o)?.uid}])},[e("a",ce,[e("div",de,[e("div",ue,[e("span",null,d(s?.name),1),_e])])])],10,re))),128))])]),i(o)?.uid!==void 0?(a(),r("section",pe,[e("div",he,[e("div",me,[e("div",ge,[e("div",ve,[e("section",null,[e("h2",fe,d(i(o)?.name),1),be,e("div",ye,[xe,(a(!0),r(u,null,h(i(o)?.pages,s=>(a(),r("span",{key:s,class:"mr-2"},d(s?.toLowerCase()),1))),128))])]),e("div",null,[e("button",{onClick:t[1]||(t[1]=s=>E(!1)),class:"ml-4 inline-flex items-center justify-center w-8 h-8 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"},[...we])])])])])]),e("nav",Ae,[e("div",Ce,[(a(),r(u,null,h(j,s=>e("a",{key:s,class:y(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":i(m)===s}]),onClick:l=>T(m)?m.value=s:m=s},d(s),11,Ee)),64))])]),e("section",Pe,[i(m)==="permissions"?(a(),r("div",Ge,[e("section",Te,[e("div",Se,[(a(!0),r(u,null,h(P.value,s=>(a(),r("div",{class:"col-span-1",key:s[0]},[q(i(L),null,{title:f(()=>[S(d(s[0]),1)]),body:f(()=>[e("div",null,[e("ul",null,[(a(!0),r(u,null,h(s[1],l=>(a(),r("li",{key:l?.uid,class:y(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]]),onClick:w(g=>l.checked=!l?.checked,["prevent"])},[e("div",De,[e("div",Me,[e("label",{for:"toggle",class:"text-xs text-gray-700 mr-2",onClick:g=>B(i(o),l)},[e("div",Ue,[b(e("input",{type:"checkbox","onUpdate:modelValue":g=>l.checked=g,class:""},null,8,Le),[[O,l.checked]])]),e("span",null,d(l?.action),1)],8,Ne)])]),Re],8,Oe))),128))])])]),_:2},1024)]))),128))])])])):(a(),r("div",je,[...$e]))])])):D("",!0)])]),i(p)?(a(),K(i(U),{key:0,onClose:t[6]||(t[6]=s=>T(p)?p.value=!1:p=!1)},{header:f(()=>[e("h3",null,d(i(C)),1)]),body:f(()=>[e("form",Be,[e("div",Fe,[e("label",ze,[He,b(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=s=>i(o).name=s),placeholder:"Name ..."},null,512),[[Q,i(o).name]])]),e("label",qe,[Ke,b(e("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":t[3]||(t[3]=s=>i(o).pages=s),class:"form-input mt-1 block w-full",multiple:"",size:A.length},[(a(),r(u,null,h(A,s=>e("option",{key:s,value:s},d(s),9,We)),64))],8,Qe),[[W,i(o).pages]])]),e("label",Ye,[S("Active "),e("div",Je,[b(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":t[4]||(t[4]=s=>i(o).active=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[O,i(o).active]]),Xe])])]),Ze,e("button",{type:"button",onClick:t[5]||(t[5]=w(s=>I(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):D("",!0)],64))}}),os=ee(es,[["__file","/home/aurthur/Documents/Development/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{os as default};
