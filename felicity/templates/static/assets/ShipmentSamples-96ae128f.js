import{P as Y,a9 as Z,Z as f,h as U,f as G,r as D,$ as R,o as l,c as d,b as t,A as r,C as i,F as V,D as A,E as u,a2 as n,a4 as H,V as Q,a as I,K as E,L as M,z as v,a7 as ee,W as B,a1 as te,J as se,x as oe,X as re,Y as ae,_ as ne}from"./index-d30fd8e2.js";import{u as le}from"./shipment-6fd2c5e7.js";import{u as ie}from"./shipment-2369751b.js";const de={class:""},pe={class:"flex justify-between items-center"},ue={action:"post",class:"p-1"},ce={class:"flex justify-start items-center mb-4"},me={class:"flex justify-between items-center"},ye=["value"],be={class:"flex justify-between items-center ml-4"},fe={class:"ml-6 mt-2"},ve={class:"overflow-x-auto"},ge={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},xe={class:"min-w-full"},he={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},ke={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},we={class:"bg-white"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se=["onUpdate:modelValue"],Ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},De={class:"text-sm leading-5 text-gray-800 font-semibold"},Re={key:1},Ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ie={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ee={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Me={type:"button",class:"bg-sky-800 text-white py-1 px-2 rounded-sm leading-none"},Be={class:"my-4"},$e=Y({__name:"ShipmentSamples",setup(qe){const $=re(()=>ae(()=>import("./FelButton-a50b979f.js"),["assets/FelButton-a50b979f.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),c=ie(),h=Z();let p=f(!1),a=U(()=>c.getShipment);const k=()=>{c.fetchShipmentByUid(h.params.shipmentUid)},m=G({laboratoryUid:void 0,comment:void 0,courier:void 0}),y=f(!1),q=()=>{y.value=!0,c.updateShipment({uid:h.params.shipmentUid,payload:m}).then(()=>{y.value=!1,k()})};function P(){return a.value?.samples?.every(o=>o.checked===!0)}function w(){let o=[];return a.value?.shippedSamples?.forEach(e=>{e?.checked&&o.push(e.sample)}),o}function j(){P()?p.value=!0:p.value=!1,b()}function L(o){if(N(o)||a.value?.state!=="preperation"){_(o);return}o.checked=!0,b()}function N(o){return["retracted","approved"].includes(o.status)}function _(o){o.checked=!1,b()}function F(){a?.value?.samples?.forEach(o=>p.value?L(o):_(o)),b()}function T(){return w().map(o=>({sampleUid:o.uid,shipedSampleUid:void 0,analyses:[]}))}let g=f(!1),x=f(!1);function b(){g.value=!1,x.value=!1;const o=w();o.length!==0&&(o.every(e=>["referred","paired"].includes(e.status??""))&&(g.value=!0),o.every(e=>e.status==="referred")&&(x.value=!0))}const z=U(()=>!["cancelled","dispatched"].includes(a.value?.state??"")),{manageSamples:J}=le(),S=o=>{const e=T();J(a?.value?.uid,e,o)};return(o,e)=>{const K=D("font-awesome-icon"),O=D("router-link"),W=R("motion-slide-left"),X=R("motion-slide-right");return l(),d("div",de,[e[19]||(e[19]=t("hr",{class:"mt-4"},null,-1)),r((l(),d("div",pe,[r(t("form",ue,[t("div",ce,[t("label",me,[e[9]||(e[9]=t("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Reference Laboratory",-1)),r(t("select",{name:"laboratory_uid","onUpdate:modelValue":e[0]||(e[0]=s=>m.laboratoryUid=s),class:"form-input mt-1 block w-full py-1"},[(l(!0),d(V,null,A(n(c).laboratories,s=>(l(),d("option",{key:s.uid,value:s.uid},u(s.name),9,ye))),128))],512),[[H,m.laboratoryUid]])]),t("label",be,[e[10]||(e[10]=t("span",{class:"text-gray-700 mr-2"},"Courier",-1)),r(t("input",{type:"text",class:"form-input mt-1 block w-full py-1","onUpdate:modelValue":e[1]||(e[1]=s=>m.courier=s)},null,512),[[Q,m.courier]])]),t("div",fe,[I(n($),{onClick:e[2]||(e[2]=v(s=>q(),["prevent"])),color:"sky-800",class:"p-1"},{default:E(()=>e[11]||(e[11]=[M("Apply")])),_:1})])])],512),[[i,!y.value&&!n(c).shipment?.incoming]]),r(t("p",null,"updating ...",512),[[i,y.value]]),t("div",null,[t("button",{onClick:e[3]||(e[3]=v(s=>k(),["prevent"])),class:"px-1 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Refresh ")])])),[[i,z.value],[W]]),e[20]||(e[20]=t("hr",{class:"mb-4"},null,-1)),t("div",ve,[t("div",ge,[t("table",xe,[t("thead",null,[t("tr",null,[r(t("th",he,[r(t("input",{type:"checkbox",class:"",onChange:e[4]||(e[4]=s=>F()),"onUpdate:modelValue":e[5]||(e[5]=s=>ee(p)?p.value=s:p=s)},null,544),[[B,n(p)]])],512),[[i,n(a)?.state==="preperation"]]),e[12]||(e[12]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1)),e[13]||(e[13]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1)),r(t("th",ke," Exernal SID ",512),[[i,n(a)?.incoming]]),e[14]||(e[14]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Request Id ",-1)),e[15]||(e[15]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Collected ",-1)),e[16]||(e[16]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1)),e[17]||(e[17]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1))])]),t("tbody",we,[(l(!0),d(V,null,A(n(a)?.shippedSamples,s=>r((l(),d("tr",{key:s.sampleUid},[r(t("td",_e,[r(t("input",{type:"checkbox",class:"","onUpdate:modelValue":C=>s.checked=C,onChange:e[6]||(e[6]=C=>j())},null,40,Se),[[B,s.checked]])],512),[[i,n(a)?.state==="preperation"]]),t("td",Ce,[s.sample?.priority??0>0?(l(),d("span",{key:0,class:te(["font-small",{"text-orange-600":s.sample?.priority??0>1}])},[I(K,{icon:"fa-star"})],2)):se("",!0)]),t("td",Ue,[t("div",De,[s.sample?.analysisRequest?.patient?.uid?(l(),oe(O,{key:0,to:{name:"sample-detail",params:{patientUid:s.sample?.analysisRequest?.patient?.uid,sampleUid:s.sample?.uid}}},{default:E(()=>[M(u(s.sample?.sampleId),1)]),_:2},1032,["to"])):(l(),d("div",Re,u(s.sample?.sampleId),1))])]),r(t("td",Ve,[t("div",null,u(s.extSampleId),1)],512),[[i,n(a)?.incoming]]),t("td",Ae,[t("div",null,u(s.sample?.analysisRequest?.clientRequestId),1)]),t("td",Ie,[t("div",null,u(s.sample?.dateCollected),1)]),e[18]||(e[18]=t("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},[t("div",null,"tests")],-1)),t("td",Ee,[t("button",Me,u(s.sample?.status||"unknown"),1)])])),[[X]])),128))])])])]),t("section",Be,[r(t("button",{onClick:e[7]||(e[7]=v(s=>S("recover"),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Remove ",512),[[i,n(g)]]),r(t("button",{onClick:e[8]||(e[8]=v(s=>S("recall"),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Pair ",512),[[i,n(x)]])])])}}}),Ne=ne($e,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentSamples.vue"]]);export{Ne as default};
