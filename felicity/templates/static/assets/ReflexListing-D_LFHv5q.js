import{a0 as V,f as U,a7 as x,ad as B,_ as q,r as b,c as g,o as d,A as e,C as P,E as w,a as h,N as u,P as k,J as F,K as I,L as v,D as J,F as M,a2 as C}from"./index-DApeomWQ.js";import{c as K,a as O,u as X,b as D}from"./index.esm-Cx9agkcQ.js";import{u as z,A as G,E as H}from"./reflex-BBXi-AZd.js";const Q=V({__name:"ReflexListing",setup(E,{expose:t}){t();const{withClientMutation:f}=U(),o=z();let a=x(!1),m=x("");const n=x(!0),l=x(null),c=K({name:O().trim().required("Name is required")}),{handleSubmit:p,resetForm:s,setValues:_,errors:S}=X({validationSchema:c,initialValues:{name:"",description:""}}),{value:A}=D("name"),{value:T}=D("description");B(async()=>{o.fetchAllReflexRules()});function N(r,i={}){n.value=r,a.value=!0,m.value=(r?"CREATE":"EDIT")+" REFLEX RULE",r?(l.value=null,s()):(l.value=i.uid??null,_({name:i.name??"",description:i.description??""}))}const L=p(r=>{const i={name:r.name,description:r.description};n.value===!0&&f(G,{payload:i},"createReflexRule").then(y=>{o.addReflexRule(y)}),n.value===!1&&l.value&&f(H,{uid:l.value,payload:i},"updateReflexRule").then(y=>o.updateReflexRule(y)),a.value=!1}),R={withClientMutation:f,reflexStore:o,get showModal(){return a},set showModal(r){a=r},get formTitle(){return m},set formTitle(r){m=r},formAction:n,currentUid:l,reflexRuleSchema:c,handleSubmit:p,resetForm:s,setValues:_,errors:S,name:A,description:T,FormManager:N,saveForm:L};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),W={class:"space-y-6"},Y={class:"rounded-md border border-border bg-card p-6"},Z={class:"overflow-x-auto"},j={class:"min-w-full divide-y divide-border fel-table"},$={class:"divide-y divide-border bg-background"},ee={class:"whitespace-nowrap px-4 py-2 text-sm text-foreground"},te={class:"whitespace-nowrap px-4 py-2 text-sm text-foreground"},oe={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},se=["onClick"],re={class:"text-xl font-semibold text-foreground"},le={class:"grid grid-cols-1 gap-4"},ne={class:"block"},ie={key:0,class:"text-sm text-destructive"},ae={class:"block"};function de(E,t,f,o,a,m){const n=b("fel-button"),l=b("fel-heading"),c=b("router-link"),p=b("fel-modal");return d(),g(F,null,[e("div",W,[h(l,{title:"Reflex Rules"},{default:u(()=>[h(n,{onClick:t[0]||(t[0]=s=>o.FormManager(!0))},{default:u(()=>[...t[5]||(t[5]=[k("Add Reflex Rule",-1)])]),_:1})]),_:1}),e("div",Y,[e("div",Z,[e("table",j,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-sm font-semibold text-foreground"},"Title"),e("th",{class:"px-4 py-2 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",$,[(d(!0),g(F,null,I(o.reflexStore.reflexRules,s=>(d(),g("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",ee,[h(c,{to:{name:"reflex-detail",params:{uid:s?.uid}},class:"text-primary hover:text-primary/80"},{default:u(()=>[k(v(s?.name),1)]),_:2},1032,["to"])]),e("td",te,v(s?.description),1),e("td",oe,[e("button",{onClick:_=>o.FormManager(!1,s),class:"text-primary hover:text-primary/80"}," Edit ",8,se)])]))),128))])])])])]),o.showModal?(d(),P(p,{key:0,onClose:t[4]||(t[4]=s=>o.showModal=!1),"content-width":"w-1/2"},{header:u(()=>[e("h3",re,v(o.formTitle),1)]),body:u(()=>[e("form",{onSubmit:t[3]||(t[3]=J((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"space-y-6 p-4"},[e("div",le,[e("label",ne,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),M(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Name ..."},null,512),[[C,o.name]]),o.errors.name?(d(),g("p",ie,v(o.errors.name),1)):w("",!0)]),e("label",ae,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),M(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Description ...",rows:"3"},null,512),[[C,o.description]])])]),t[9]||(t[9]=e("hr",{class:"border-border"},null,-1)),t[10]||(t[10]=e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Reflex Rule ",-1))],32)]),_:1})):w("",!0)],64)}const ce=q(Q,[["render",de],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/reflex/ReflexListing.vue"]]);export{ce as default};
