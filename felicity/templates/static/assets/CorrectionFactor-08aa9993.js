import{_ as N,A as D,t as V,bj as j,bk as L,w as B}from"./shipment-53265c2d.js";import{f as $,G as Y,T as q,r as h,c as P,w as G,d as C,h as a,k as l,x as t,F as u,ak as y,D as d,u as n,y as A,j as W,A as F,ag as b,i as z,_ as H}from"./_plugin-vue_export-helper-dacf3d65.js";import{d as I,v as J,a as K}from"./runtime-dom.esm-bundler-98433118.js";const Q=t("hr",null,null,-1),X={class:"overflow-x-auto mt-4"},Z={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},tt={class:"min-w-full"},et=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Intrument"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Method"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Factor"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),st={class:"bg-white"},ot={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},nt={class:"flex items-center"},rt={class:"text-sm leading-5 text-gray-800"},at={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},lt={class:"text-sm leading-5 text-sky-800"},it={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},dt={class:"text-sm leading-5 text-sky-800"},ct={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},ut=["onClick"],pt={action:"post",class:"p-1"},mt={class:"grid grid-cols-3 gap-x-4 mb-4"},_t={class:"block col-span-1 mb-2"},ht=t("span",{class:"text-gray-700 w-4/12"},"Instrument",-1),yt={class:"w-full"},bt=t("option",null,null,-1),ft=["value"],vt={class:"block col-span-1 mb-2"},xt=t("span",{class:"text-gray-700 w-4/12"},"Method",-1),gt={class:"w-full"},wt=t("option",null,null,-1),kt=["value"],Ct={class:"block col-span-1 mb-2"},At=t("span",{class:"text-gray-700"},"Factor",-1),Ft=t("hr",null,null,-1),It=$({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(S){const f=S,U=Y(()=>N(()=>import("./SimpleModal-9e28c074.js"),["assets/SimpleModal-9e28c074.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js","assets/SimpleModal-f645a074.css"])),v=D(),c=V(),{withClientMutation:x}=B(),{analysis:g}=q(f);let i=h(!1),w=h(""),r=P({});const p=h(!0);G(()=>f.analysisUid,(o,s)=>{}),c.fetchInstruments();const m=C(()=>c.getInstruments);c.fetchMethods();const _=C(()=>c.getMethods);function O(){const o={...r,analysisUid:g?.value?.uid};x(j,{payload:o},"createAnalysisCorrectionFactor").then(s=>v.AddAnalysisCorrectionFactor(s))}function R(){const o={...r};delete o.uid,delete o.__typename,x(L,{uid:r.uid,payload:o},"updateAnalysisCorrectionFactor").then(s=>v.updateAnalysisCorrectionFactor(s))}function k(o,s={}){p.value=o,i.value=!0,w.value=(o?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",o?Object.assign(r,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(r,{...s})}function T(){p.value===!0&&O(),p.value===!1&&R(),i.value=!1}const E=o=>{const s=m?.value?.findIndex(e=>e.uid===o);return m?.value[s]?.name||"unknown"},M=o=>{const s=_?.value?.findIndex(e=>e.uid===o);return _?.value[s]?.name||"unknown"};return(o,s)=>(a(),l(u,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:s[0]||(s[0]=e=>k(!0))},"Add Correction Factor"),Q,t("div",X,[t("div",Z,[t("table",tt,[et,t("tbody",st,[(a(!0),l(u,null,y(n(g)?.correctionFactors,e=>(a(),l("tr",{key:e?.uid},[t("td",ot,[t("div",nt,[t("div",null,[t("div",rt,d(E(e?.instrumentUid)),1)])])]),t("td",at,[t("div",lt,d(M(e?.instrumentUid)),1)]),t("td",it,[t("div",dt,d(e.factor),1)]),t("td",ct,[t("button",{onClick:St=>k(!1,e),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,ut)])]))),128))])])])]),A(" Correction Factor Form Modal "),n(i)?(a(),W(n(U),{key:0,onClose:s[5]||(s[5]=e=>z(i)?i.value=!1:i=!1),contentWidth:"w-2/4"},{header:F(()=>[t("h3",null,d(n(w)),1)]),body:F(()=>[t("form",pt,[t("div",mt,[t("label",_t,[ht,t("div",yt,[b(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[1]||(s[1]=e=>n(r).instrumentUid=e)},[bt,(a(!0),l(u,null,y(n(m),e=>(a(),l("option",{key:e?.uid,value:e.uid},d(e?.name),9,ft))),128))],512),[[I,n(r).instrumentUid]])])]),t("label",vt,[xt,t("div",gt,[b(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=e=>n(r).methodUid=e)},[wt,(a(!0),l(u,null,y(n(_),e=>(a(),l("option",{key:e?.uid,value:e.uid},d(e?.name),9,kt))),128))],512),[[I,n(r).methodUid]])])]),t("label",Ct,[At,b(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=e=>n(r).factor=e),placeholder:"Factor ..."},null,512),[[J,n(r).factor]])])]),Ft,t("button",{type:"button",onClick:s[4]||(s[4]=K(e=>T(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):A("v-if",!0)],64))}}),Tt=H(It,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/admin/analyses/services/CorrectionFactor.vue"]]);export{Tt as default};
