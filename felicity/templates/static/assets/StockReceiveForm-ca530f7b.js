import{d as Y,I as Z,r as B,o as m,c as v,A as ee,t as o,f as l,b as e,e as i,ad as b,i as n,g as T,F,C as P,v as _,L as A,w as te,j as se,_ as le,k as oe}from"./index-48799f0c.js";import ae from"./vue-multiselect.esm-83a2dab5.js";import{c as L,a as y,d as f,f as C,u as ie,b as c}from"./array-7041bb33.js";import{u as ne,R as ce,k as ue}from"./inventory-8fabf1e7.js";import{a as re}from"./storage-1c29e739.js";import{u as de}from"./setup-0815b6ec.js";import{u as pe}from"./user-5df4f874.js";import"./_queries-16a4477d.js";const me=["inert"],ve={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},_e=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Reveice Type",-1),fe=e("option",{value:"null"},null,-1),we=e("option",{value:"purchase"},"Purchased",-1),ge=e("option",{value:"pushed"},"Pushed",-1),ye=e("option",{value:"transfer_in"},"Transfer In",-1),he=[fe,we,ge,ye],be={class:"text-orange-600 w-4/12"},ke={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},xe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Stock Item",-1),Re={class:"w-full col-span-4"},Se={class:"text-orange-600 w-4/12"},Ue={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ve=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Supplier",-1),De=e("option",{value:"null"},null,-1),qe=["value"],Fe={class:"text-orange-600 w-4/12"},Pe={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ie=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Unit (Single)",-1),Ne=e("option",{value:"null"},null,-1),Be=["value"],Te={class:"text-orange-600 w-4/12"},Ae={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Le=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Lot Number",-1),Ce={class:"w-full col-span-4"},Ee={class:"text-orange-600 w-4/12"},Me={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Qe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Packages Received",-1),$e={class:"w-full col-span-4"},Ke={class:"text-orange-600 w-4/12"},je={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ge=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Package Factor",-1),Oe={class:"w-full col-span-4"},ze={class:"text-orange-600 w-4/12"},He={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Je=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Singles Received",-1),We={class:"w-full col-span-4"},Xe={class:"text-orange-600 w-4/12"},Ye={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ze=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Quantity Received",-1),et={class:"w-full col-span-4"},tt={class:"text-orange-600 w-4/12"},st={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},lt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Expiry Date",-1),ot={class:"w-full col-span-4"},at={class:"text-orange-600 w-4/12"},it={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},nt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received Date",-1),ct={class:"w-full col-span-4"},ut={class:"text-orange-600 w-4/12"},rt={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},dt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received By",-1),pt=e("option",{value:"null"},null,-1),mt=["value"],vt={class:"text-orange-600 w-4/12"},_t=e("hr",{class:"my-4"},null,-1),ft={type:"submit",class:"-mb-4 w-1/5 border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"},wt=Y({__name:"StockReceiveForm",emits:["close"],setup(gt,{emit:E}){const M=se(()=>le(()=>import("./FelLoadingMessage-9cf89d4d.js"),["assets/FelLoadingMessage-9cf89d4d.js","assets/index-48799f0c.js","assets/index-c2286288.css"])),Q=E,$=ne(),K=de();re();const j=pe(),{withClientMutation:G,withClientQuery:O}=Z(),I=B([]),w=B(!1),z=L({stockItemVariant:L().required("StockItem is required"),supplierUid:y().required(),unitUid:y().required(),lotNumber:y().required(),unitPrice:f().nullable().default(0),totalPrice:f().nullable().default(0),singlesReceived:f().required().default(0),packagesReceived:f().required().default(0),packageFactor:f().required().default(1),quantityReceived:f().default(0),receiptType:y().required().default("purchase"),receiptDate:C().required("Date received is required"),receiptByUid:y().required("Receiver is required"),expiryDate:C().required("Date expiring is required")}),{handleSubmit:H,errors:a}=ie({validationSchema:z,initialValues:{singlesReceived:0,packagesReceived:0,packageFactor:1,quantityReceived:0}}),{value:h}=c("stockItemVariant"),{value:k}=c("supplierUid"),{value:x}=c("unitUid"),{value:R}=c("lotNumber"),{value:d}=c("totalPrice"),{value:u}=c("packagesReceived"),{value:g}=c("packageFactor"),{value:p}=c("quantityReceived"),{value:S}=c("receiptType"),{value:U}=c("receiptDate"),{value:V}=c("receiptByUid"),{value:D}=c("expiryDate"),N=H(r=>J(r));function J(r){w.value=!0;const s={...r,productUid:h?.value?.uid,unitPrice:0,totalPrice:0};delete s.stockItemVariant,G(ce,{payload:s},"createStockReceipt").then(t=>{console.log(t)}).finally(()=>{w.value=!1,Q("close")})}const W=async r=>{r.length>3&&O(ue,{first:50,after:"",text:r,sortBy:["name"]},"stockProductAll").then(t=>{I.value=t?.items})},X=(r,s)=>`${r.stockItem?.name} - ${r.name}`,q=()=>{!d.value&&!u.value&&(p.value=0),!d.value&&u.value&&(p.value=u.value*g.value),d.value&&!u.value&&(p.value=d.value),u.value||(u.value=0),p.value=d.value+u.value*g.value};return(r,s)=>(m(),v("form",{onSubmit:s[15]||(s[15]=te((...t)=>l(N)&&l(N)(...t),["prevent"])),class:"rounded-sm py-2",autocomplete:"off",inert:w.value},[ee(o(l(a))+" ",1),e("label",ve,[_e,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[0]||(s[0]=t=>n(S)?S.value=t:null)},[...he],512),[[b,l(S)]])]),e("div",be,o(l(a).receiptType),1),e("label",ke,[xe,e("div",Re,[T(l(ae),{placeholder:"Select a Stock Item",modelValue:l(h),"onUpdate:modelValue":s[1]||(s[1]=t=>n(h)?h.value=t:null),options:I.value,searchable:!0,"track-by":"uid",customLabel:X,onSearchChange:W},null,8,["modelValue","options"]),e("div",Se,o(l(a).stockItemVariantUid),1)])]),e("label",Ue,[Ve,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=t=>n(k)?k.value=t:null)},[De,(m(!0),v(F,null,P(l(K).suppliers,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.name),9,qe))),128))],512),[[b,l(k)]])]),e("div",Fe,o(l(a).supplierUid),1),e("label",Pe,[Ie,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[3]||(s[3]=t=>n(x)?x.value=t:null)},[Ne,(m(!0),v(F,null,P(l($).units,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.name),9,Be))),128))],512),[[b,l(x)]])]),e("div",Te,o(l(a).unitUid),1),e("label",Ae,[Le,e("div",Ce,[i(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[4]||(s[4]=t=>n(R)?R.value=t:null),placeholder:"Lot Number..."},null,512),[[_,l(R)]]),e("div",Ee,o(l(a).lotNumber),1)])]),e("label",Me,[Qe,e("div",$e,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[5]||(s[5]=t=>n(u)?u.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[6]||(s[6]=t=>t.target.select())},null,544),[[_,l(u)]]),e("div",Ke,o(l(a).packagesReceived),1)])]),e("label",je,[Ge,e("div",Oe,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[7]||(s[7]=t=>n(g)?g.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[8]||(s[8]=t=>t.target.select())},null,544),[[_,l(g)]]),e("div",ze,o(l(a).packageFactor),1)])]),e("label",He,[Je,e("div",We,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[9]||(s[9]=t=>n(d)?d.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[10]||(s[10]=t=>t.target.select())},null,544),[[_,l(d)]]),e("div",Xe,o(l(a).singlesReceived),1)])]),e("label",Ye,[Ze,e("div",et,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[11]||(s[11]=t=>n(p)?p.value=t:null),disabled:""},null,512),[[_,l(p)]]),e("div",tt,o(l(a).quantityReceived),1)])]),e("label",st,[lt,e("div",ot,[i(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[12]||(s[12]=t=>n(D)?D.value=t:null),placeholder:"Expiry Date"},null,512),[[_,l(D)]]),e("div",at,o(l(a).expiryDate),1)])]),e("label",it,[nt,e("div",ct,[i(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[13]||(s[13]=t=>n(U)?U.value=t:null),placeholder:"Expiry Date"},null,512),[[_,l(U)]]),e("div",ut,o(l(a).receiptDate),1)])]),e("label",rt,[dt,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[14]||(s[14]=t=>n(V)?V.value=t:null)},[pt,(m(!0),v(F,null,P(l(j).users,t=>(m(),v("option",{key:t.uid,value:t.uid},o(t.firstName)+" "+o(t.lastName),9,mt))),128))],512),[[b,l(V)]])]),e("div",vt,o(l(a).receiptByUid),1),_t,i(e("button",ft," Save ",512),[[A,!w.value]]),i(T(l(M),{message:"Adding Inventory ..."},null,512),[[A,w.value]])],40,me))}}),Vt=oe(wt,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/inventory/StockReceiveForm.vue"]]);export{Vt as default};
