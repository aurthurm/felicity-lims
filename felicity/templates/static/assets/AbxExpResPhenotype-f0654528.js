import{P as S,e as G,Z as u,f as A,h as F,aa as L,o as P,c as j,b as t,a as k,K as c,a2 as l,x as z,E as K,A as r,V as d,z as $,a7 as q,J,F as Q,X as b,Y as x,af as O,_ as X}from"./index-f86d8273.js";import{j as Y,a1 as Z,a2 as H,a3 as W}from"./microbiology.mutations-639b8f1d.js";const ee={class:"w-full my-4"},te={action:"post",class:"p-4"},se={class:"mb-6"},oe={class:"grid grid-cols-2 gap-4"},le={class:"block"},ae={class:"block"},ne={class:"mb-6"},ie={class:"grid grid-cols-2 gap-4"},re={class:"block"},de={class:"block"},ue={class:"block"},pe={class:"block"},me={class:"block"},fe={class:"block"},ce={class:"block"},be={class:"block"},xe={class:"mb-6"},ye={class:"block"},ge=S({__name:"AbxExpResPhenotype",setup(Ce){const R=b(()=>x(()=>import("./index-f86d8273.js").then(a=>a.cN),["assets/index-f86d8273.js","assets/index-ba19faea.css"])),w=b(()=>x(()=>import("./FelDataTable-81fd0c3c.js"),["assets/FelDataTable-81fd0c3c.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),_=b(()=>x(()=>import("./vue-multiselect.esm-1db37a44.js"),["assets/vue-multiselect.esm-1db37a44.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),{withClientMutation:y,withClientQuery:g}=G();let p=u(!1),V=u(""),s=A({});const C=u(!0),v=u(!1),i=u([]),E=u([]);let n=A({first:50,after:"",text:"",sortBy:["guideline___name"],filterAction:!1});const h=u(0);let T=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const B=F(()=>i?.value?.length+" of "+h.value+" abxExptResPhenotypes"),U=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Reference Table",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"Organism Code",value:"organismCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Organism Code Type",value:"organismCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"Exception Organism Code",value:"exceptionOrganismCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Exception Organism Code Type",value:"exceptionOrganismCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"Abx Code",value:"abxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Abx Code Type",value:"abxCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic Exceptions",value:"antibioticExceptions",sortable:!1,sortBy:"asc",hidden:!1},{name:"Comments",value:"comments",sortable:!1,sortBy:"asc",hidden:!1}]);function f(a){g(Z,{text:a.text,pageSize:a.first,sortBy:a.sortBy},void 0).then(e=>{const o=e.abxExpectedResistancePhenotypeAll,m=o.items;a.filterAction?(i.value=[],i.value=m):i.value=O(i.value,m,"uid"),h.value=o?.totalCount,T.value=o?.pageInfo}).finally(()=>{v.value=!1})}L(()=>{f(n),g(Y,{},"abxGuidelinesAll").then(a=>{a&&(E.value=a)})});function D(a){n.first=100,n.after="",n.text=a.filterText,n.filterAction=!0,f(n)}function I(a){n.first=a.fetchCount,n.after=T?.value?.endCursor,n.text=a.filterText,n.filterAction=!1,f(n)}const M=()=>Object.assign(s,{});function N(){const a={guidelineUid:s.guideline?.uid,referenceTable:s.referenceTable,organismCode:s.organismCode,organismCodeType:s.organismCodeType,exceptionOrganismCode:s.exceptionOrganismCode,exceptionOrganismCodeType:s.exceptionOrganismCodeType,abxCode:s.abxCode,abxCodeType:s.abxCodeType,antibioticExceptions:s.antibioticExceptions,comments:s.comments};C.value===!0&&y(H,{payload:a},"createAbxExpResPhenotype").then(e=>{e&&(i.value=O(i.value,[e],"uid"))}),C.value===!1&&y(W,{uid:s.uid,payload:a},"updateAbxExpResPhenotype").then(e=>{if(e){const o=i.value.findIndex(m=>m.uid==e.uid);i.value[o]=e}}),p.value=!1}return(a,e)=>(P(),j(Q,null,[t("div",ee,[e[14]||(e[14]=t("hr",null,null,-1)),k(l(w),{columns:U.value,data:i.value,toggleColumns:!0,loading:v.value,paginable:!0,pageMeta:{fetchCount:l(n).first,hasNextPage:!0,countNone:B.value},searchable:!0,filterable:!1,onOnSearchKeyUp:D,onOnSearchFocus:M,onOnPaginate:I,selectable:!1},{footer:c(()=>e[13]||(e[13]=[])),_:1},8,["columns","data","loading","pageMeta"])]),l(p)?(P(),z(l(R),{key:0,onClose:e[12]||(e[12]=o=>q(p)?p.value=!1:p=!1),"content-width":"w-1/2"},{header:c(()=>[t("h3",null,K(l(V)),1)]),body:c(()=>[t("form",te,[t("div",se,[e[17]||(e[17]=t("h4",{class:"text-lg font-semibold mb-4"},"Basic Information",-1)),t("div",oe,[t("label",le,[e[15]||(e[15]=t("span",{class:"text-gray-700"},"Guidelines",-1)),k(l(_),{modelValue:l(s).guidelines,"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).guidelines=o),options:E.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",ae,[e[16]||(e[16]=t("span",{class:"text-gray-700"},"Reference Tables",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=o=>l(s).referenceTable=o),placeholder:"Reference Table"},null,512),[[d,l(s).referenceTable]])])])]),t("div",ne,[t("div",ie,[t("label",re,[e[18]||(e[18]=t("span",{class:"text-gray-700"},"Strain",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=o=>l(s).strain=o),placeholder:"Strain"},null,512),[[d,l(s).strain]])]),t("label",de,[e[19]||(e[19]=t("span",{class:"text-gray-700"},"Organism Code",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=o=>l(s).organismCode=o),placeholder:"Organism Code"},null,512),[[d,l(s).organismCode]])]),t("label",ue,[e[20]||(e[20]=t("span",{class:"text-gray-700"},"Organism Code Type",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=o=>l(s).organismCodeType=o),placeholder:"Organism Code Type"},null,512),[[d,l(s).organismCodeType]])]),t("label",pe,[e[21]||(e[21]=t("span",{class:"text-gray-700"},"Exception Organism Code",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).exceptionOrganismCode=o),placeholder:"Exception Organism Code"},null,512),[[d,l(s).exceptionOrganismCode]])]),t("label",me,[e[22]||(e[22]=t("span",{class:"text-gray-700"},"Exception Organism Code Type",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).exceptionOrganismCodeType=o),placeholder:"Exception Organism Code Type"},null,512),[[d,l(s).exceptionOrganismCodeType]])]),t("label",fe,[e[23]||(e[23]=t("span",{class:"text-gray-700"},"Abx Code",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=o=>l(s).abxCode=o),placeholder:"Abx Code"},null,512),[[d,l(s).abxCode]])]),t("label",ce,[e[24]||(e[24]=t("span",{class:"text-gray-700"},"Abx Code Type",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=o=>l(s).abxCodeType=o),placeholder:"Abx Code Type"},null,512),[[d,l(s).abxCodeType]])]),t("label",be,[e[25]||(e[25]=t("span",{class:"text-gray-700"},"Antibiotic Exceptions",-1)),r(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=o=>l(s).antibioticExceptions=o),placeholder:"Antibiotic Exceptions"},null,512),[[d,l(s).antibioticExceptions]])])])]),t("div",xe,[t("label",ye,[e[26]||(e[26]=t("span",{class:"text-gray-700"},"Comments",-1)),r(t("textarea",{class:"form-textarea mt-1 block w-full","onUpdate:modelValue":e[10]||(e[10]=o=>l(s).comments=o),rows:"3",placeholder:"Additional comments..."},null,512),[[d,l(s).comments]])])]),e[27]||(e[27]=t("hr",{class:"my-6"},null,-1)),t("button",{type:"button",onClick:e[11]||(e[11]=$(o=>N(),["prevent"])),class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save ExpResPhenotype ")])]),_:1})):J("",!0)],64))}});const he=X(ge,[["__scopeId","data-v-00e73a7e"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/resistance/AbxExpResPhenotype.vue"]]);export{he as default};
