import{a0 as C,ac as k,h as l,g as S,_ as A,r as v,aa as D,c as x,o as h,F as r,a as g,A as e,L as i,P as R,H as a}from"./index-Daoe3XS9.js";import{u as L}from"./shipment-Cdyqi3wm.js";import{u as B}from"./shipment-TK-wbJGg.js";const O=C({__name:"Shipment",setup(b,{expose:o}){o();const d=k(),t=L(),{actionShipment:c}=B();t.fetchReferralLaboratories(),t.fetchShipmentByUid(d.params.shipmentUid);const n=l(()=>t.getShipment),m=S({dropdownOpen:!1}),u=l(()=>!!["due"].includes(n?.value?.state?.toLowerCase())),f=l(()=>!!["preperation"].includes(n?.value?.state?.toLowerCase())),s=l(()=>!!["preperation","ready"].includes(n?.value?.state?.toLowerCase())),_=l(()=>!!["ready"].includes(n?.value?.state?.toLowerCase())),w=l(()=>!!["failed"].includes(n?.value?.state?.toLowerCase())),p={route:d,shipmentStore:t,actionShipment:c,shipment:n,state:m,canReceive:u,canFinalise:f,canCancel:s,canDispatch:_,canRetryDispatch:w,shipmentActor:y=>{if(!n.value?.incoming&&!(n.value?.laboratory?.url&&n.value?.laboratory?.password&&n.value?.laboratory?.username&&n.value?.courier)){alert("The External Laboratory has missing information or the courier missing");return}c(n.value?.uid,y)}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),j={class:"space-y-6"},F={class:"bg-background rounded-lg shadow-sm border border-border p-6 transition-all duration-200 hover:shadow-md"},N={class:"space-y-6"},E={class:"flex items-center justify-between"},V={class:"flex items-center space-x-6"},I={class:"text-lg font-semibold text-foreground"},P={class:"inline-flex items-center rounded-md bg-muted px-2 py-1 text-xs font-medium text-muted-foreground"},T={class:"relative"},U={class:"absolute right-0 mt-2 w-56 rounded-md bg-background shadow-lg ring-1 ring-black ring-opacity/5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button"},z={class:"py-1",role:"none"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-border"},q={class:"space-y-4"},G={class:"flex items-center"},J={class:"text-sm text-foreground"},K={class:"flex items-center"},M={class:"text-sm text-foreground"},Q={class:"flex items-center"},W={class:"text-sm text-foreground"},X={class:"space-y-4"},Y={class:"flex items-start"},Z={class:"text-sm text-foreground"};function $(b,o,d,t,c,n){const m=v("font-awesome-icon"),u=v("router-view"),f=D("motion-slide-top");return h(),x("div",j,[r((h(),x("div",F,[e("div",N,[e("div",E,[e("div",V,[e("h3",I,i(t.shipment?.shipmentId),1),e("span",P,i(t.shipment?.incoming?"InBound":"OutBound"),1)]),e("div",T,[e("button",{onClick:o[0]||(o[0]=s=>t.state.dropdownOpen=!t.state.dropdownOpen),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4"},[R(i(t.shipment?.state||"unknown")+" ",1),g(m,{icon:"chevron-down",class:"ml-2 h-4 w-4"})]),r(e("div",U,[e("div",z,[r(e("button",{onClick:o[1]||(o[1]=s=>t.shipmentActor("reject")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Reject ",512),[[a,t.canReceive]]),r(e("button",{onClick:o[2]||(o[2]=s=>t.shipmentActor("receive")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Receive ",512),[[a,t.canReceive]]),r(e("button",{onClick:o[3]||(o[3]=s=>t.shipmentActor("finalise")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Finalise ",512),[[a,t.canFinalise]]),r(e("button",{onClick:o[4]||(o[4]=s=>t.shipmentActor("dispatch")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Dispatch ",512),[[a,t.canDispatch]]),r(e("button",{onClick:o[5]||(o[5]=s=>t.shipmentActor("dispatch-now")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Retry Notification ",512),[[a,t.canRetryDispatch]]),r(e("button",{onClick:o[6]||(o[6]=s=>t.shipmentActor("cancel")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Cancel ",512),[[a,t.canCancel]])])],512),[[a,t.state.dropdownOpen]])])]),e("div",H,[e("div",q,[e("div",G,[o[7]||(o[7]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"External Laboratory",-1)),e("span",J,i(t.shipment?.laboratory?.name),1)]),e("div",K,[o[8]||(o[8]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Courier",-1)),e("span",M,i(t.shipment?.courier),1)]),e("div",Q,[o[9]||(o[9]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Assigned Count",-1)),e("span",W,i(t.shipment?.assignedCount),1)])]),e("div",X,[e("div",Y,[o[10]||(o[10]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Comment",-1)),e("span",Z,i(t.shipment?.comment),1)])])])])])),[[f]]),g(u)])}const se=A(O,[["render",$],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/shipment/_id/Shipment.vue"]]);export{se as default};
