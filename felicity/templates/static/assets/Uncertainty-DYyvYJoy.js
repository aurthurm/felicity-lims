import{a0 as F,f as j,t as B,a7 as w,g as O,a5 as L,h as C,_ as R,r as U,c as a,o as d,a as I,A as e,C as q,E as J,N as x,P,J as y,K as M,L as l,F as c,a9 as T,a2 as k,D as Y}from"./index-CNAOKjig.js";import{H,J as K}from"./analyses.mutations-BhfuTbLn.js";import{u as W}from"./setup-Cw0fY--X.js";import{u as z}from"./analysis-CIDyy6YR.js";const G=F({__name:"Uncertainty",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(A,{expose:t}){t();const f=z(),n=W(),{withClientMutation:p}=j(),b=A,{analysis:g}=B(b);let i=w(!1),u=w(""),o=O({});const m=w(!0);L(()=>b.analysisUid,(r,s)=>{}),n.fetchInstruments();const _=C(()=>n.getInstruments);n.fetchMethods();const h=C(()=>n.getMethods);function S(){const r={...o,analysisUid:g?.value?.uid};p(H,{payload:r},"createAnalysisUncertainty").then(s=>f.addAnalysisUncertainty(s))}function N(){const r={...o};delete r.uid,delete r.__typename,p(K,{uid:o.uid,payload:r},"updateAnalysisUncertainty").then(s=>f.updateAnalysisUncertainty(s))}function D(r,s={}){m.value=r,i.value=!0,u.value=(r?"CREATE":"EDIT")+" ANALYSIS UNCERTAINTY",r?Object.assign(o,{min:null,max:null,value:null,instrumentUid:null,methodUid:null}):Object.assign(o,{...s})}function E(){m.value===!0&&S(),m.value===!1&&N(),i.value=!1}const V={analysisStore:f,setupStore:n,withClientMutation:p,props:b,analysis:g,get showModal(){return i},set showModal(r){i=r},get formTitle(){return u},set formTitle(r){u=r},get form(){return o},set form(r){o=r},formAction:m,instruments:_,methods:h,addAnalysisUncertainty:S,editAnalysisUncertainty:N,FormManager:D,saveForm:E,instrumentName:r=>{const s=_?.value?.findIndex(v=>v.uid===r);return _?.value[s]?.name||"unknown"},methodName:r=>{const s=h?.value?.findIndex(v=>v.uid===r);return h?.value[s]?.name||"unknown"}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Q={class:"overflow-x-auto mt-4"},X={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},Z={class:"min-w-full"},$={class:"bg-card"},ee={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},te={class:"text-sm text-foreground"},oe={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ne={class:"text-sm text-foreground"},re={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},se={class:"text-sm text-foreground"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},le={class:"text-sm text-foreground"},ae={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ie={class:"text-sm text-foreground"},ue={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},me=["onClick"],ce={class:"text-lg font-bold text-foreground"},fe={action:"post",class:"p-6 space-y-6"},pe={class:"space-y-4"},be={class:"grid grid-cols-5 gap-4"},ge={class:"space-y-2"},xe=["value"],ye={class:"space-y-2"},_e=["value"],he={class:"space-y-2"},ve={class:"space-y-2"},we={class:"space-y-2"},Ue={class:"pt-4"};function Me(A,t,f,n,p,b){const g=U("fel-button"),i=U("fel-heading"),u=U("fel-modal");return d(),a(y,null,[I(i,{title:"Uncertainty"},{default:x(()=>[I(g,{onClick:t[0]||(t[0]=o=>n.FormManager(!0))},{default:x(()=>[...t[8]||(t[8]=[P("Add Uncertainty",-1)])]),_:1})]),_:1}),e("div",Q,[e("div",X,[e("table",Z,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Min"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Max"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Variance (+/-)"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",$,[(d(!0),a(y,null,M(n.analysis?.uncertainties,o=>(d(),a("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",ee,[e("div",te,l(n.instrumentName(o?.instrumentUid)),1)]),e("td",oe,[e("div",ne,l(n.methodName(o?.methodUid)),1)]),e("td",re,[e("div",se,l(o.min),1)]),e("td",de,[e("div",le,l(o.max),1)]),e("td",ae,[e("div",ie,l(o.value),1)]),e("td",ue,[e("button",{onClick:m=>n.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"},"Edit",8,me)])]))),128))])])])]),n.showModal?(d(),q(u,{key:0,onClose:t[7]||(t[7]=o=>n.showModal=!1),contentWidth:"w-2/4"},{header:x(()=>[e("h3",ce,l(n.formTitle),1)]),body:x(()=>[e("form",fe,[e("div",pe,[e("div",be,[e("label",ge,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),c(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>n.form.instrumentUid=o)},[t[10]||(t[10]=e("option",{value:""},"Select Instrument",-1)),(d(!0),a(y,null,M(n.instruments,o=>(d(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,xe))),128))],512),[[T,n.form.instrumentUid]])]),e("label",ye,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),c(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>n.form.methodUid=o)},[t[12]||(t[12]=e("option",{value:""},"Select Method",-1)),(d(!0),a(y,null,M(n.methods,o=>(d(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,_e))),128))],512),[[T,n.form.methodUid]])]),e("label",he,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Min",-1)),c(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>n.form.min=o),placeholder:"Value ..."},null,512),[[k,n.form.min]])]),e("label",ve,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Max",-1)),c(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[4]||(t[4]=o=>n.form.max=o),placeholder:"Value ..."},null,512),[[k,n.form.max]])]),e("label",we,[t[16]||(t[16]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Variance +/-",-1)),c(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[5]||(t[5]=o=>n.form.value=o),placeholder:"Value ..."},null,512),[[k,n.form.value]])])])]),e("div",Ue,[e("button",{type:"button",onClick:t[6]||(t[6]=Y(o=>n.saveForm(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):J("",!0)],64)}const Ie=R(G,[["render",Me],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/Uncertainty.vue"]]);export{Ie as default};
