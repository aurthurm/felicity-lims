import{a0 as _,ab as k,aq as h,a7 as y,g as R,h as P,_ as C,r as S,c as r,o as a,A as t,b as V,D as x,P as f,F as c,a2 as m,Q as d,a as p,L as T}from"./index-DApeomWQ.js";const F=_({__name:"PasswordReset",emits:["forgot"],setup(g,{expose:e,emit:b}){e();const s=b,i=k(),{auth:u}=h(i),l=y(""),o=y(""),n=R({password:"",passwordc:""}),v=P(()=>!(!n.password||!n.passwordc||n.password!==n.passwordc)),w={emit:s,authStore:i,auth:u,email:l,token:o,resetForm:n,formIsValid:v,submitForm:()=>{u.value.receivedToken?i.validatePasswordResetToken(o.value):i.resetPasswordRequest(l.value)},changePassword:()=>{if(!v.value){alert("Please correct form errors");return}i.resetPassword(n.password,n.passwordc)}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={class:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary to-accent p-6"},D={class:"w-full max-w-md"},I={class:"space-y-6 rounded-xl bg-background/95 p-8 shadow-2xl backdrop-blur-sm"},B={key:0},E={class:"mb-6"},N={class:"space-y-1"},q=["disabled"],M={class:"flex justify-end"},U=["disabled"],L={key:1,class:"flex justify-center"},A={key:1,class:"space-y-5"},z={class:"mb-6"},H={class:"space-y-1"},O=["disabled"],Q=["disabled"],Z={key:1,class:"flex justify-center"},G={class:"mb-4 text-center"},J={class:"text-foreground"},K={class:"rounded bg-secondary px-2 py-1"},W={class:"space-y-4"},X={class:"space-y-1"},Y=["disabled"],$={class:"space-y-1"},ee=["disabled"],se=["disabled"],te={key:1,class:"flex justify-center"};function oe(g,e,b,s,i,u){const l=S("fel-loader");return a(),r("div",j,[t("div",D,[t("div",I,[e[15]||(e[15]=V('<div class="flex flex-col items-center space-y-2"><div class="relative flex h-16 w-16 items-center justify-center"><div class="absolute flex h-12 w-12 items-center justify-center rounded-xl bg-accent transform rotate-45"><svg class="h-8 w-8 -rotate-45 transform text-primary-foreground" viewBox="0 0 512 512" fill="none"><path d="M364.61 390.213C304.625 450.196 207.37 450.196 147.386 390.213C117.394 360.22 102.398 320.911 102.398 281.6C102.398 242.291 117.394 202.981 147.386 172.989C147.386 230.4 153.6 281.6 230.4 307.2C230.4 256 256 102.4 294.4 76.7999C320 128 334.618 142.997 364.608 172.989C394.601 202.981 409.597 242.291 409.597 281.6C409.597 320.911 394.601 360.22 364.61 390.213Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><h2 class="text-2xl font-bold text-foreground">Felicity LIMS</h2><p class="text-sm text-muted-foreground">Password Recovery</p></div>',1)),s.auth.resetData?.canReset?(a(),r("form",{key:1,class:"space-y-5",onSubmit:x(s.changePassword,["prevent"])},[t("div",G,[t("p",J,[e[11]||(e[11]=f(" Hello ",-1)),t("span",K,"@"+T(s.auth?.resetData?.username),1)]),e[12]||(e[12]=t("p",{class:"mt-1 text-sm text-foreground"},"Please enter your new password below",-1))]),t("div",W,[t("div",X,[e[13]||(e[13]=t("label",{class:"fel-label",for:"password"},"New Password",-1)),c(t("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=o=>s.resetForm.password=o),class:d(["fel-input",s.formIsValid?"":"border-destructive"]),disabled:s.auth.processing,placeholder:"Enter new password",type:"password"},null,10,Y),[[m,s.resetForm.password]])]),t("div",$,[e[14]||(e[14]=t("label",{class:"fel-label",for:"passwordc"},"Confirm Password",-1)),c(t("input",{id:"passwordc","onUpdate:modelValue":e[6]||(e[6]=o=>s.resetForm.passwordc=o),class:d(["fel-input",s.formIsValid?"":"border-destructive"]),disabled:s.auth.processing,placeholder:"Confirm new password",type:"password"},null,10,ee),[[m,s.resetForm.passwordc]])])]),s.auth.processing?(a(),r("div",te,[p(l,{message:"Resetting password..."})])):(a(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",s.formIsValid?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!s.formIsValid,type:"submit"}," Reset Password ",10,se))],32)):(a(),r("form",{key:0,class:"space-y-5",onSubmit:x(s.submitForm,["prevent"])},[s.auth.receivedToken?(a(),r("div",A,[t("div",z,[t("button",{type:"button",class:"inline-flex items-center text-sm text-accent transition-colors duration-200 hover:text-accent",onClick:e[3]||(e[3]=o=>s.authStore.setReceivedResetToken(!1))},[...e[9]||(e[9]=[t("span",{class:"mr-1"},"←",-1),f(" Token not received ",-1)])])]),t("div",H,[e[10]||(e[10]=t("label",{class:"fel-label",for:"token"},"Reset Token",-1)),c(t("input",{id:"token","onUpdate:modelValue":e[4]||(e[4]=o=>s.token=o),class:"fel-input",disabled:s.auth.processing,placeholder:"Enter your reset token",type:"text"},null,8,O),[[m,s.token]])]),s.auth.processing?(a(),r("div",Z,[p(l,{message:"Validating password reset token..."})])):(a(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",s.token?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!s.token,type:"submit"}," Submit Token ",10,Q))])):(a(),r("div",B,[t("div",E,[t("button",{type:"button",class:"inline-flex items-center text-sm text-accent transition-colors duration-200 hover:text-accent",onClick:e[0]||(e[0]=o=>s.emit("forgot"))},[...e[7]||(e[7]=[t("span",{class:"mr-1"},"←",-1),f(" Back to Login ",-1)])])]),t("div",N,[e[8]||(e[8]=t("label",{class:"fel-label",for:"email"},"Email",-1)),c(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>s.email=o),class:"fel-input",disabled:s.auth.processing,placeholder:"Enter your email",type:"email"},null,8,q),[[m,s.email]])]),t("div",M,[t("button",{type:"button",class:"text-sm text-accent transition-colors duration-200 hover:text-accent",onClick:e[2]||(e[2]=o=>s.authStore.setReceivedResetToken(!0))}," Received a Token? ")]),s.auth.processing?(a(),r("div",L,[p(l,{message:"Requesting..."})])):(a(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",s.email?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!s.email,type:"submit"}," Request Password Reset ",10,U))]))],32))]),e[16]||(e[16]=t("div",{class:"mt-6 text-center"},[t("p",{class:"text-sm text-primary-foreground/80"}," Secure Password Recovery System ")],-1))])])}const ie=C(F,[["render",oe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/auth/PasswordReset.vue"]]);export{ie as default};
