const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataTable-DLBrhw2Z.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/TooltipTrigger-BWIYwmnQ.js","assets/PopperContent-BfyCnGUj.js","assets/Input-BEm5S0CJ.js","assets/SelectValue-Ds0cfAgl.js","assets/useNonce-B4v0IDPb.js","assets/chevron-down-Dqf-ptA3.js","assets/useFocusGuards-Bjb6OG0k.js","assets/Spinner-Bl8RfjFA.js"])))=>i.map(i=>d[i]);
import{Y as V,u as O,aB as U,ag as q,a0 as g,av as E,a7 as H,a5 as z,a6 as K,aM as j,a3 as Y,aD as m,aC as G,_ as J,r as Q,c as I,o as h,z as s,A as w,C as W,a as t,K as r,M as i,I as x,N as X,B as Z,aK as $,aL as ee,F as M,H as te,a4 as S}from"./index-OdhKCqIc.js";import{u as ae,a as re}from"./shipment-DcKVexkp.js";import{c as oe,d as L,a as B,u as ne,F as le}from"./index.esm-BfHj8iGm.js";import{I as se}from"./Input-BEm5S0CJ.js";import{T as ie}from"./Textarea-T3VcJTEo.js";import{F as me,a as de,b as ue}from"./FormMessage-CgXFMXx9.js";import{F as fe}from"./FormLabel-DxP9wnWS.js";import{S as ce,a as ge,b as he,c as be,d as pe}from"./SelectValue-Ds0cfAgl.js";import{P as ve}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const Se=V({__name:"ShipmentListing",setup(P,{expose:a}){a();const F=z(()=>K(()=>import("./DataTable-DLBrhw2Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),e=ae(),{withClientMutation:b}=O(),{shipments:p,fetchingShipments:v,shipmentPageInfo:n}=U(e),d=q();let u=g(!1);const f=g(!1),T=g([{name:"All",value:""},{name:"Due",value:"due"},{name:"Awaiting",value:"awaiting"},{name:"Failed",value:"failed"}]),k=g([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Shipment Id",value:"shipmentId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(o,c){return m(G,{to:{name:"shipment-detail",params:{shipmentUid:o?.uid}},innerHTML:o?.shipmentId})}},{name:"External Laboratory",value:"laboratory.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Courier",value:"courier",sortable:!1,sortBy:"asc",hidden:!1},{name:"Flow Detail",value:"",sortable:!1,sortBy:"asc",hidden:!1},{name:"Assigned Count",value:"assignedCount",sortable:!1,sortBy:"asc",hidden:!1},{name:"Current Status",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(o,c){return m("button",{type:"button",class:"bg-primary text-primary-foreground py-1 px-2 rounded-sm leading-none",innerHTML:o?.state||"unknown"})}},{name:"",value:"",sortable:!1,showInToggler:!1,hidden:!1,customRender:function(o,c){return o.incoming?m("span",{class:"text-success"},m("i",{class:"fa fa-reply-all"})):m("span",{class:"text-destructive"},m("i",{class:"fa fa-share-from-square"}))}}]);e.removeShipment();let l=E({first:25,before:"",incoming:f.value,status:"",text:"",sort:["-uid"],filterAction:!1});e.fetchShipments(l),e.fetchReferralLaboratories();const _=oe({laboratoryUid:L().required("Laboratory is Required").typeError("Laboratory is Required"),comment:B().nullable(),courier:B().required("Courier is required"),count:L()}),{handleSubmit:C}=ne({validationSchema:_,initialValues:{laboratoryUid:void 0,comment:"",courier:"",count:1}}),N=C(o=>{u.value=!1,b(re,{payload:o},"createShipment").then(c=>{e.addShipment(c),u.value=!1})});function A(o){l.first=o.fetchCount,l.before=n?.value?.endCursor??"",l.text=o.filterText,l.status=o.filterStatus,l.incoming=f.value,l.filterAction=!1,e.fetcShipments(l)}function D(o){l.first=25,l.before="",l.text=o.filterText,l.status=o.filterStatus,l.incoming=f.value,l.filterAction=!0,e.clearShipment(),e.fetcShipments(l)}const R=H(()=>p?.value?.length+" of "+e.getShipmentCount+" Shipments"),y={DataTable:F,shipmentStore:e,withClientMutation:b,shipments:p,fetchingShipments:v,shipmentPageInfo:n,route:d,get showModal(){return u},set showModal(o){u=o},viewIncoming:f,filterOptions:T,tableColumns:k,get shipmentParams(){return l},set shipmentParams(o){l=o},shipmentSchema:_,handleSubmit:C,saveForm:N,showMoreShipments:A,searchShipments:D,countNone:R,get Button(){return Y},get Checkbox(){return j},get Input(){return se},get Textarea(){return ie},get FormControl(){return ue},get FormField(){return le},get FormItem(){return de},get FormLabel(){return fe},get FormMessage(){return me},get Select(){return pe},get SelectContent(){return be},get SelectItem(){return he},get SelectTrigger(){return ge},get SelectValue(){return ce},PageHeading:ve};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),Fe={class:"space-y-6"},_e={class:"flex items-center space-x-4 mb-4"},Ce={class:"bg-card rounded-lg shadow-sm p-6"},ye={class:"flex items-center"},Ie={class:"grid grid-cols-3 gap-6"},we={class:"border-t border-border pt-4"};function xe(P,a,F,e,b,p){const v=Q("Modal");return h(),I(M,null,[s("div",Fe,[t(e.PageHeading,{title:"Shipments"},{default:r(()=>[t(e.Button,{onClick:a[0]||(a[0]=n=>e.showModal=!0)},{default:r(()=>[...a[5]||(a[5]=[i("Create New",-1)])]),_:1})]),_:1}),s("div",_e,[t(e.Button,{onClick:a[1]||(a[1]=n=>e.viewIncoming=!e.viewIncoming),class:X([e.viewIncoming?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"]),"aria-pressed":e.viewIncoming},{default:r(()=>[i(x(e.viewIncoming?"Incoming":"Outgoing"),1)]),_:1},8,["class","aria-pressed"])]),s("div",Ce,[t(e.DataTable,{columns:e.tableColumns,data:e.shipments,toggleColumns:!0,loading:e.fetchingShipments,paginable:!0,pageMeta:{fetchCount:e.shipmentParams.first,hasNextPage:e.shipmentPageInfo?.hasNextPage,countNone:e.countNone},searchable:!0,filterable:!0,filterMeta:{defaultFilter:e.shipmentParams.status,filters:e.filterOptions},onOnSearch:e.searchShipments,onOnPaginate:e.showMoreShipments,selectable:!1},{"pre-filter":r(()=>[s("label",ye,[t(e.Checkbox,{checked:e.viewIncoming,"onUpdate:checked":a[2]||(a[2]=n=>e.viewIncoming=n)},null,8,["checked"]),a[6]||(a[6]=s("span",{class:"mx-2"},"InBound",-1))])]),footer:r(()=>[...a[7]||(a[7]=[])]),_:1},8,["columns","data","loading","pageMeta","filterMeta"])])]),e.showModal?(h(),w(v,{key:0,onClose:a[4]||(a[4]=n=>e.showModal=!1)},{header:r(()=>[...a[8]||(a[8]=[s("h3",{class:"text-lg font-medium leading-6 text-foreground"},"Create New Shipment",-1)])]),body:r(()=>[s("form",{class:"space-y-6",onSubmit:a[3]||(a[3]=Z((...n)=>e.saveForm&&e.saveForm(...n),["prevent"]))},[s("div",Ie,[t(e.FormField,{name:"laboratoryUid"},{default:r(({componentField:n})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[9]||(a[9]=[i("External Laboratory",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Select,$(ee(n)),{default:r(()=>[t(e.SelectTrigger,null,{default:r(()=>[t(e.SelectValue,{placeholder:"Select a laboratory"})]),_:1}),t(e.SelectContent,null,{default:r(()=>[(h(!0),I(M,null,te(e.shipmentStore.laboratories,d=>(h(),w(e.SelectItem,{key:d.uid,value:d.uid},{default:r(()=>[i(x(d.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"courier"},{default:r(({componentField:n})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[10]||(a[10]=[i("Courier",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,S(n,{placeholder:"Courier"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"count"},{default:r(({componentField:n})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[11]||(a[11]=[i("How Many",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,S(n,{type:"number",min:"1"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),t(e.FormField,{name:"comment"},{default:r(({componentField:n})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[12]||(a[12]=[i("Comment",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Textarea,S(n,{rows:"2",placeholder:"Notes ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),s("div",we,[t(e.Button,{type:"submit",class:"w-full"},{default:r(()=>[...a[13]||(a[13]=[i("Create Shipment",-1)])]),_:1})])],32)]),_:1})):W("",!0)],64)}const Ee=J(Se,[["render",xe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/shipment/ShipmentListing.vue"]]);export{Ee as default};
