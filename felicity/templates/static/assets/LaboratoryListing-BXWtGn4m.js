import{a0 as A,f as V,a4 as j,ad as B,h as N,a7 as y,g as O,i as z,aK as K,aH as R,_ as H,r as x,c as f,o as d,A as e,C as I,E as J,a as C,N as b,P as Q,J as h,K as U,L as u,F as _,a2 as S,a9 as q,D as G}from"./index-C5OmCQ1r.js";import{u as W}from"./user-QlIHobL1.js";import{u as X}from"./setup-BMS7aX7t.js";const Y=A({__name:"LaboratoryListing",setup(T,{expose:t}){t();const{toastSuccess:w,toastError:s}=z(),{withClientQuery:M,withClientMutation:m}=V(),g=j(),l=W(),i=X();B(()=>{i.fetchOrganization(),l.fetchUsers({}),i.fetchLaboratories()});const o=N(()=>l.getUsers),L=N(()=>i.getLaboratories),D=r=>{if(r.labManagerUid){const a=l.getUsers?.filter(P=>P.uid==r.labManagerUid);if(a?.length>0)return`${a[0]?.firstName} ${a[0]?.lastName}`}return"No Manager Assigned"};let c=y(!1),p=y(""),n=O({});const v=y(!0);function E(r,a){v.value=r,c.value=!0,p.value=(r?"CREATE":"EDIT")+" Laboratory",r?Object.assign(n,{...new Object}):Object.assign(n,{...a})}function F(){if(v.value===!0)delete n.uid,m(K,{payload:{...n,organizationUid:i.getOrganization?.uid}},"createLaboratory").then(r=>i.addLaboratory(r));else{const r=n.uid;delete n.settings,delete n.__typename,delete n.uid,m(R,{uid:r,payload:n},"updateLaboratory").then(a=>i.updateLaboratory(a,!0))}c.value=!1}const k={toastSuccess:w,toastError:s,withClientQuery:M,withClientMutation:m,router:g,userStore:l,setupStore:i,users:o,laboratories:L,getManagerName:D,get showModal(){return c},set showModal(r){c=r},get formTitle(){return p},set formTitle(r){p=r},get form(){return n},set form(r){n=r},formAction:v,FormManager:E,saveForm:F};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),Z={class:"space-y-6"},$={class:"rounded-md border bg-card"},ee={class:"relative w-full overflow-auto"},te={class:"w-full caption-bottom text-sm"},oe={class:"[&_tr:last-child]:border-0"},se={class:"px-4 py-2 align-middle"},re={class:"px-4 py-2 align-middle"},ne={class:"px-4 py-2 align-middle"},ie={class:"px-4 py-2 align-middle text-right"},ae=["onClick"],le={class:"text-lg font-semibold text-foreground"},de={class:"space-y-6"},ue={class:"space-y-2"},fe={class:"space-y-2"},me=["value"],ce={class:"space-y-2"};function be(T,t,w,s,M,m){const g=x("fel-button"),l=x("fel-heading"),i=x("fel-modal");return d(),f(h,null,[e("div",Z,[C(l,{title:"Laboratories",description:"Manage your laboratories and their details."},{default:b(()=>[C(g,{onClick:t[0]||(t[0]=o=>s.FormManager(!0,null))},{default:b(()=>[...t[6]||(t[6]=[Q("Add Laboratory",-1)])]),_:1})]),_:1}),e("div",$,[e("div",ee,[e("table",te,[t[7]||(t[7]=e("thead",{class:"[&_tr]:border-b"},[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Manager"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Contact Phone"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"})])],-1)),e("tbody",oe,[(d(!0),f(h,null,U(s.laboratories,o=>(d(),f("tr",{key:o?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",se,u(o?.name),1),e("td",re,u(s.getManagerName(o)),1),e("td",ne,u(o?.businessPhone),1),e("td",ie,[e("button",{onClick:L=>s.FormManager(!1,o),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,ae)])]))),128))])])])])]),s.showModal?(d(),I(i,{key:0,onClose:t[5]||(t[5]=o=>s.showModal=!1)},{header:b(()=>[e("h3",le,u(s.formTitle),1)]),body:b(()=>[e("form",de,[e("div",ue,[t[8]||(t[8]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Laboratory Name ",-1)),_(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[1]||(t[1]=o=>s.form.name=o),placeholder:"Name ..."},null,512),[[S,s.form.name]])]),e("div",fe,[t[10]||(t[10]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Lab Manager ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.form.labManagerUid=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[9]||(t[9]=e("option",{value:""},"Select Manager",-1)),(d(!0),f(h,null,U(s.users,o=>(d(),f("option",{key:o?.uid,value:o.uid},u(o?.firstName)+" "+u(o?.lastName),9,me))),128))],512),[[q,s.form.labManagerUid]])]),e("div",ce,[t[11]||(t[11]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Business Phone ",-1)),_(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[3]||(t[3]=o=>s.form.businessPhone=o),placeholder:"Business Phone ..."},null,512),[[S,s.form.businessPhone]])]),t[12]||(t[12]=e("hr",{class:"border-border"},null,-1)),e("button",{type:"button",onClick:t[4]||(t[4]=G(o=>s.saveForm(),["prevent"])),class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Form ")])]),_:1})):J("",!0)],64)}const ye=H(Y,[["render",be],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/laboratory/LaboratoryListing.vue"]]);export{ye as default};
