import{P as L,aa as D,h as w,Z as m,f as M,e as S,o as u,c as b,b as e,F as c,D as k,E as n,a1 as v,A as a,C as P,a2 as l,x as T,K as h,V as p,a4 as G,L as U,W as _,z as O,a7 as R,J as $,X as z,Y as I,aE as j,aF as J,_ as K}from"./index-d30fd8e2.js";import{u as W}from"./user-8c4e124f.js";import"./_queries-3ca7633b.js";const X={class:"w-full my-4"},Y={class:"flex justify-between items-center"},Z={class:"overflow-x-auto mt-4"},q={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},H={class:"min-w-full"},Q={class:"bg-white"},ee={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},te={class:"flex items-center"},se={class:"text-sm leading-5 text-gray-800"},oe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},le={class:"text-sm leading-5 text-sky-800"},re={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ae={class:"text-sm leading-5 text-sky-800"},ne={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ie={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},de={class:"text-sm leading-5 text-sky-800"},ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},pe={class:"text-sm leading-5 text-sky-800"},be={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},me={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},ce=["onClick"],ge={action:"post",class:"p-1",disabled:""},fe={class:"grid grid-cols-2 gap-x-4 mb-4"},xe={class:"block col-span-1 mb-2"},ye={class:"block col-span-1 mb-2"},we={class:"block col-span-1 mb-2"},ke={class:"block col-span-1 mb-2"},ve=["disabled"],he={class:"block col-span-1 mb-2"},Ue={class:"block col-span-1 mb-2"},_e={class:"block col-span-2 mb-2"},Ne=["value"],Ae={for:"toggle",class:"block col-span-1 text-xs text-gray-700 mt-4"},Ce={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Ee={for:"toggle",class:"block col-span-1 text-xs text-gray-700 mt-4"},Ve={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Be=L({__name:"UsersListing",setup(Fe){const N=z(()=>I(()=>import("./index-d30fd8e2.js").then(r=>r.cN),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),i=W();D(()=>{i.fetchUsers({}),i.fetchGroupsAndPermissions()});let A=w(()=>i.getUsers);const C=w(()=>i.getGroups);let d=m(!1),g=m(""),o=M({});const f=m(!0),{withClientMutation:x}=S();function E(){x(j,o,"createUser").then(r=>i.addUser(r))}function V(){x(J,o,"updateUser").then(r=>i.updateUser(r))}function B(r){let t=[];return r?.groups?.forEach(s=>t.push(s?.name)),t.join(", ")}function y(r,t={}){if(f.value=r,d.value=!0,g.value=(r?"CREATE":"EDIT")+" USER",r){let s=new Object;s.firstName=void 0,s.lastName=void 0,s.email=void 0,s.isActive=!0,s.groupUid=void 0,s.userName=void 0,s.isBlocked=!1,Object.assign(o,{...s})}else t.userUid=t?.uid,t.groupUid=t?.groups[0]?.uid,Object.assign(o,{...t})}function F(){f.value?E():V(),d.value=!1}return(r,t)=>(u(),b(c,null,[e("div",X,[t[14]||(t[14]=e("hr",null,null,-1)),e("div",Y,[t[12]||(t[12]=e("h3",null,"Users",-1)),e("button",{onClick:t[0]||(t[0]=s=>y(!0)),class:"px-2 py-1 ml-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add User/Lab Contact ")]),t[15]||(t[15]=e("hr",null,null,-1)),e("div",Z,[e("div",q,[e("table",H,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," First Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Last Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email Adress "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Active "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Groups "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Username "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Blocked "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),e("tbody",Q,[(u(!0),b(c,null,k(l(A),s=>(u(),b("tr",{key:s.uid},[e("td",ee,[e("div",te,[e("div",se,n(s.firstName),1)])]),e("td",oe,[e("div",le,n(s.lastName),1)]),e("td",re,[e("div",ae,n(s.email),1)]),e("td",ne,[e("span",{class:v(["",["block h-4 w-4 rounded-full bottom-0 right-0",s?.isActive?"bg-emerald-600":"bg-orange-600"]])},null,2)]),e("td",ie,[e("div",de,n(B(s)),1)]),e("td",ue,[e("div",pe,n(s?.userName),1)]),e("td",be,[e("span",{class:v(["block h-4 w-4 rounded-full bottom-0 right-0",s?.isBlocked?"bg-orange-600":"bg-emerald-600"])},null,2)]),e("td",me,[a(e("button",{onClick:Le=>y(!1,s),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit User ",8,ce),[[P,!s.isSuperuser]])])]))),128))])])])])]),l(d)?(u(),T(l(N),{key:0,onClose:t[11]||(t[11]=s=>R(d)?d.value=!1:d=!1)},{header:h(()=>[e("h3",null,n(l(g)),1)]),body:h(()=>[e("form",ge,[e("div",fe,[e("label",xe,[t[16]||(t[16]=e("span",{class:"text-gray-700"},"First Name",-1)),a(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[1]||(t[1]=s=>l(o).firstName=s),placeholder:"First Name ..."},null,512),[[p,l(o).firstName]])]),e("label",ye,[t[17]||(t[17]=e("span",{class:"text-gray-700"},"Last Name",-1)),a(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=s=>l(o).lastName=s),placeholder:"Last Name ..."},null,512),[[p,l(o).lastName]])]),e("label",we,[t[18]||(t[18]=e("span",{class:"text-gray-700"},"Email",-1)),a(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":t[3]||(t[3]=s=>l(o).email=s),placeholder:"Email ..."},null,512),[[p,l(o).email]])]),e("label",ke,[t[19]||(t[19]=e("span",{class:"text-gray-700"},"UserName",-1)),a(e("input",{class:"form-input mt-1 block w-full disabled:bg-slate-300","onUpdate:modelValue":t[4]||(t[4]=s=>l(o).userName=s),placeholder:"First Name ...",disabled:l(o).uid!=null},null,8,ve),[[p,l(o).userName]])]),e("label",he,[t[20]||(t[20]=e("span",{class:"text-gray-700"},"Password",-1)),a(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[5]||(t[5]=s=>l(o).password=s),placeholder:"Password ..."},null,512),[[p,l(o).password]])]),e("label",Ue,[t[21]||(t[21]=e("span",{class:"text-gray-700"},"Confirm Password",-1)),a(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":t[6]||(t[6]=s=>l(o).passwordc=s),placeholder:"confirm ..."},null,512),[[p,l(o).passwordc]])]),e("label",_e,[t[23]||(t[23]=e("span",{class:"text-gray-700"},"Group",-1)),a(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[7]||(t[7]=s=>l(o).groupUid=s)},[t[22]||(t[22]=e("option",null,null,-1)),(u(!0),b(c,null,k(C.value,s=>(u(),b("option",{key:s.uid,value:s.uid},n(s?.name),9,Ne))),128))],512),[[G,l(o).groupUid]])]),e("label",Ae,[t[25]||(t[25]=U("Blocked ")),e("div",Ce,[a(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":t[8]||(t[8]=s=>l(o).isBlocked=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[_,l(o).isBlocked]]),t[24]||(t[24]=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))])]),e("label",Ee,[t[27]||(t[27]=U("Active ")),e("div",Ve,[a(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":t[9]||(t[9]=s=>l(o).isActive=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[_,l(o).isActive]]),t[26]||(t[26]=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))])])]),t[28]||(t[28]=e("hr",null,null,-1)),e("button",{type:"button",onClick:t[10]||(t[10]=O(s=>F(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):$("",!0)],64))}}),Pe=K(Be,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/UsersListing.vue"]]);export{Pe as default};
