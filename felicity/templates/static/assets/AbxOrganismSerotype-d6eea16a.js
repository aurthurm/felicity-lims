import{d as R,I as z,r as u,n as P,p as X,q as j,o as w,c as q,b as e,g as C,z as g,f as o,y as G,t as K,w as $,e as c,v as d,i as J,B as Q,F as W,j as b,_,a6 as B,D as Y,E as Z,k as ee}from"./index-d5ae4e74.js";import{n as se,k as te,o as ae,p as oe}from"./microbiology.mutations-146484b7.js";const i=f=>(Y("data-v-a814e9fb"),f=f(),Z(),f),le={class:"w-full my-4"},ne=i(()=>e("hr",null,null,-1)),ie={class:"mb-6"},re={class:"grid grid-cols-2 gap-4"},ue={class:"block"},ce=i(()=>e("span",{class:"text-gray-700"},"Organism",-1)),de={class:"block"},pe=i(()=>e("span",{class:"text-gray-700"},"Serotype",-1)),fe={class:"block"},me=i(()=>e("span",{class:"text-gray-700"},"Serogroup",-1)),he={class:"block"},ge=i(()=>e("span",{class:"text-gray-700"},"Subspecies",-1)),be={class:"block"},_e=i(()=>e("span",{class:"text-gray-700"},"O Antigens",-1)),ye={class:"block"},ve=i(()=>e("span",{class:"text-gray-700"},"H Phase1",-1)),xe={class:"block"},Se=i(()=>e("span",{class:"text-gray-700"},"H Phase2",-1)),ke={class:"block"},Ae=i(()=>e("span",{class:"text-gray-700"},"X997 Check",-1)),Oe={class:"block"},Pe=i(()=>e("span",{class:"text-gray-700"},"Fate",-1)),we=i(()=>e("hr",{class:"my-6"},null,-1)),Ce=i(()=>e("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save OrganismSerotype ",-1)),Be=R({__name:"AbxOrganismSerotype",setup(f){const V=b(()=>_(()=>import("./index-d5ae4e74.js").then(l=>l.bs),["assets/index-d5ae4e74.js","assets/index-246842b1.css"])),D=b(()=>_(()=>import("./FelDataTable-ca271ba4.js"),["assets/FelDataTable-ca271ba4.js","assets/index-d5ae4e74.js","assets/index-246842b1.css"])),U=b(()=>_(()=>import("./vue-multiselect.esm-3a760e8f.js"),["assets/vue-multiselect.esm-3a760e8f.js","assets/index-d5ae4e74.js","assets/index-246842b1.css"])),{withClientMutation:y,withClientQuery:v}=z();let p=u(!1),I=u(""),t=P({});const x=u(!0),S=u(!1),r=u([]),k=u([]);let n=P({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const A=u(0);let O=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const E=X(()=>r?.value?.length+" of "+A.value+" organisms"),M=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1}]);function h(l){v(se,{text:l.text,pageSize:l.first,sortBy:l.sortBy},void 0).then(s=>{const a=s.abxOrganismSerotypeAll,m=a.items;l.filterAction?(r.value=[],r.value=m):r.value=B(r.value,m,"uid"),A.value=a?.totalCount,O.value=a?.pageInfo}).finally(()=>{S.value=!1})}function T(l,s){l?.length<3||v(te,{pageSize:50,text:l,sortBy:["name"]},"abxOrganismAll").then(a=>{a&&(k.value=a?.items??[])})}j(()=>{h(n)});function N(l){n.first=100,n.after="",n.text=l.filterText,n.filterAction=!0,h(n)}function F(l){n.first=l.fetchCount,n.after=O?.value?.endCursor,n.text=l.filterText,n.filterAction=!1,h(n)}const H=()=>Object.assign(t,{});function L(){const l={organismUid:t?.organism?.uid,serotype:t?.serotype,serogroup:t?.serogroup,subspecies:t?.subspecies,oAntigens:t?.oAntigens,hPhase1:t?.hPhase1,hPhase2:t?.hPhase2,x997Check:t?.x997Check,fate:t?.fate};x.value===!0&&y(ae,{payload:l},"createAbxOrganismSerotype").then(s=>{s&&(r.value=B(r.value,[s],"uid"))}),x.value===!1&&y(oe,{uid:t.uid,payload:l},"updateAbxOrganismSerotype").then(s=>{if(s){const a=r.value.findIndex(m=>m.uid==s.uid);r.value[a]=s}}),p.value=!1}return(l,s)=>(w(),q(W,null,[e("div",le,[ne,C(o(D),{columns:M.value,data:r.value,toggleColumns:!0,loading:S.value,paginable:!0,pageMeta:{fetchCount:o(n).first,hasNextPage:!0,countNone:E.value},searchable:!0,filterable:!1,onOnSearchKeyUp:N,onOnSearchFocus:H,onOnPaginate:F,selectable:!1},{footer:g(()=>[]),_:1},8,["columns","data","loading","pageMeta"])]),o(p)?(w(),G(o(V),{key:0,onClose:s[9]||(s[9]=a=>J(p)?p.value=!1:p=!1),"content-width":"w-1/2"},{header:g(()=>[e("h3",null,K(o(I)),1)]),body:g(()=>[e("form",{onSubmit:$(L,["prevent"]),class:"p-4"},[e("div",ie,[e("div",re,[e("label",ue,[ce,C(o(U),{modelValue:o(t).organism,"onUpdate:modelValue":s[0]||(s[0]=a=>o(t).organism=a),options:k.value,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:T,label:"name"},null,8,["modelValue","options"])]),e("label",de,[pe,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[1]||(s[1]=a=>o(t).serotype=a),placeholder:"Serotype"},null,512),[[d,o(t).serotype]])]),e("label",fe,[me,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=a=>o(t).serogroup=a),placeholder:"Serogroup"},null,512),[[d,o(t).serogroup]])]),e("label",he,[ge,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=a=>o(t).subspecies=a),placeholder:"Subspecies"},null,512),[[d,o(t).subspecies]])]),e("label",be,[_e,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[4]||(s[4]=a=>o(t).oAntigens=a),placeholder:"O Antigens"},null,512),[[d,o(t).oAntigens]])]),e("label",ye,[ve,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[5]||(s[5]=a=>o(t).hPhase1=a),placeholder:"H Phase1"},null,512),[[d,o(t).hPhase1]])]),e("label",xe,[Se,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[6]||(s[6]=a=>o(t).hPhase2=a),placeholder:"H Phase2"},null,512),[[d,o(t).hPhase2]])]),e("label",ke,[Ae,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[7]||(s[7]=a=>o(t).x997Check=a),placeholder:"X997 Check"},null,512),[[d,o(t).x997Check]])]),e("label",Oe,[Pe,c(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[8]||(s[8]=a=>o(t).fate=a),placeholder:"fate"},null,512),[[d,o(t).fate]])])])]),we,Ce],32)]),_:1})):Q("",!0)],64))}});const Ue=ee(Be,[["__scopeId","data-v-a814e9fb"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{Ue as default};
