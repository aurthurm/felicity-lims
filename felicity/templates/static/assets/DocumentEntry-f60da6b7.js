import{f as F,d as I,a3 as _,W as A,am as x,a2 as E,a9 as w,r as S,o as f,c as k,a as h,O as s,a5 as C,a7 as c,z as p,F as O,a0 as v,a1 as D,_ as M}from"./index-5d85e9da.js";import{a as P,b as B}from"./document.queries-5c76e084.js";import{b as R}from"./_isIterateeCall-19e805e5.js";import{t as g}from"./toFinite-1f7cfed0.js";var T=Math.floor,L=Math.random;function V(e,t){return e+T(L()*(t-e+1))}var $=parseFloat,j=Math.min,N=Math.random;function U(e,t,o){if(o&&typeof o!="boolean"&&R(e,t,o)&&(t=o=void 0),o===void 0&&(typeof t=="boolean"?(o=t,t=void 0):typeof e=="boolean"&&(o=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=g(e),t===void 0?(t=e,e=0):t=g(t)),e>t){var n=e;e=t,t=n}if(o||e%1||t%1){var r=N();return j(e+r*(t-e+$("1e-"+((r+"").length-1))),t)}return V(e,t)}const{withClientQuery:b}=F(),z=I("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[]}),actions:{async fetchDocuments(e,t=!1){try{const o=await b(P,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll");o&&typeof o=="object"&&"items"in o?(this.documents=o.items,t&&(this.recentDocuments=this.documents.sort((n,r)=>{const d=n.updatedAt?new Date(n.updatedAt).getTime():0;return(r.updatedAt?new Date(r.updatedAt).getTime():0)-d}).slice(0,25))):console.error("Invalid documents data received:",o)}catch(o){console.error("Error fetching documents:",o)}},addDocument(e){if(!e?.uid){console.error("Invalid document payload:",e);return}this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5)},updateDocument(e){if(!e?.uid){console.error("Invalid document payload:",e);return}const t={...e,updatedAt:new Date().toISOString()};this.documents=this.documents.map(o=>o.uid===e.uid?t:o),this.recentDocuments=[t,...this.recentDocuments.filter(o=>o.uid!==e.uid)].slice(0,5)},deleteDocument(e){if(!e){console.error("Invalid document ID provided to deleteDocument");return}this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e)},duplicateDocument(e){if(!e){console.error("Invalid document ID provided to duplicateDocument");return}const t=this.documents.find(n=>n.uid===e);if(!t){console.error("Document not found:",e);return}const o={...t,uid:U(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(o),this.recentDocuments=[o,...this.recentDocuments].slice(0,5)},async setCurrentFolder(e){this.currentFolder=e,await this.fetchDocuments({folderUid:e})},async getFolders(){try{const e=await b(B,{},"documentFolderAll");e&&typeof e=="object"&&"items"in e?this.folders=e.items:console.error("Invalid folders data received:",e)}catch(e){console.error("Error fetching folders:",e)}},addFolder(e){if(!e?.uid){console.error("Invalid folder payload:",e);return}this.folders.push(e)},deleteFolder(e){if(!e){console.error("Invalid folder ID provided to deleteFolder");return}this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e)},updateFolder(e){if(!e?.uid){console.error("Invalid folder payload:",e);return}this.folders=this.folders.map(t=>t.uid===e.uid?e:t)},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){if(!e){console.error("Invalid folder ID provided to toggleFolderExpanded");return}this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t)}},getters:{getChildFolders:e=>t=>e.folders.filter(o=>o.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(o=>o.folderUid===t)}});/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=({size:e,strokeWidth:t=2,absoluteStrokeWidth:o,color:n,iconNode:r,name:d,class:i,...m},{slots:a})=>_("svg",{...u,width:e||u.width,height:e||u.height,stroke:n||u.stroke,"stroke-width":o?Number(t)*24/Number(e):t,class:["lucide",`lucide-${G(d??"icon")}`],...m},[...r.map(l=>_(...l)),...a.default?[a.default()]:[]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(e,t)=>(o,{slots:n})=>_(Z,{...o,iconNode:t,name:e},n);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=H("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Q={class:"flex overflow-hidden"},q={class:"flex-1 overflow-hidden"},J={class:"lg:hidden p-4 flex items-center border-b border-border"},W={class:"h-full overflow-auto p-6"},X=A({__name:"DocumentEntry",setup(e){const t=v(()=>D(()=>import("./FolderNavigation-4f3ef1f5.js"),["assets/FolderNavigation-4f3ef1f5.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css","assets/plus-b155b390.js","assets/document.mutations-0476dc3d.js","assets/document.queries-5c76e084.js","assets/_isIterateeCall-19e805e5.js","assets/toFinite-1f7cfed0.js"])),o=v(()=>D(()=>import("./RecentDocuments-3d7aa884.js"),["assets/RecentDocuments-3d7aa884.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css","assets/DocumentListing-b820711e.js","assets/document.mutations-0476dc3d.js","assets/plus-b155b390.js","assets/document.queries-5c76e084.js","assets/_isIterateeCall-19e805e5.js","assets/toFinite-1f7cfed0.js"])),n=v(()=>D(()=>import("./FolderDocuments-9e83788c.js"),["assets/FolderDocuments-9e83788c.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css","assets/DocumentListing-b820711e.js","assets/document.mutations-0476dc3d.js","assets/plus-b155b390.js","assets/document.queries-5c76e084.js","assets/_isIterateeCall-19e805e5.js","assets/toFinite-1f7cfed0.js"])),r=z(),{currentFolder:d}=x(r),i=E(!1),m=()=>{i.value=!i.value};return w(async()=>{try{await r.getFolders()}catch(a){console.error("Error fetching folders:",a)}}),(a,l)=>{const y=S("fel-heading");return f(),k(O,null,[h(y,{title:"Documents"}),s("div",Q,[s("div",{class:C(["fixed inset-y-0 left-0 z-10 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",{"-translate-x-full":!i.value}])},[h(c(t))],2),s("div",q,[s("div",J,[s("button",{class:"mr-4 p-2 rounded-md border border-border hover:bg-accent",onClick:m},[h(c(K),{class:"h-5 w-5"})]),l[0]||(l[0]=s("h1",{class:"text-xl font-semibold text-foreground"},"Document Manager",-1))]),s("div",W,[c(d)?(f(),p(c(n),{key:1})):(f(),p(c(o),{key:0}))])])])],64)}}}),Y=M(X,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/document/DocumentEntry.vue"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{re as D,K as F,H as c,z as u};
