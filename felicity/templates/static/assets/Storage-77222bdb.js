import{S as $,V as q,f as z,W as y,i as B,h as Q,t as oo,a as o,r as m,M as a,C as s,X as c,Y as F,F as x,Z as T,$ as A}from"./index-3686e2f1.js";import{u as eo,a as to}from"./storage-070968dc.js";import{A as ro,E as no,a as ao,b as io,c as so,d as co,e as lo,f as uo}from"./storage.mutations-b9a45388.js";const mo=T(()=>A(()=>import("./ContainerView-5c9fa857.js"),["assets/ContainerView-5c9fa857.js","assets/index-3686e2f1.js","assets/index-f2df9813.css","assets/storage-070968dc.js"])),po=T(()=>A(()=>import("./FelTreeItem-be3b04c7.js"),["assets/FelTreeItem-be3b04c7.js","assets/index-3686e2f1.js","assets/index-f2df9813.css","assets/storage-070968dc.js"])),yo=$({name:"storage-home",setup(r,fo){const{treeData:f,tags:i,activeTree:d,newStoreRoom:C,newStorageLocation:v,newStorageSection:w,newStorageContainer:O,setActiveTree:p}=eo(),R=q(),l=to(),{withClientMutation:u}=z();l.fetchStorageTree(),y(()=>d.value,(t,n)=>{t&&t.tag===i.STORAGE_CONTAINER&&l.fetchStorageContainer(t.uid)}),y(()=>f.value,(t,n)=>{if(!t)return;const g=R?.options?.history?.state;if(g?.sample){const h=JSON.parse(g?.sample)?.storageContainer,b=h?.storageSection,S=b?.storageLocation,Z=S?.storeRoom;p({...Z,tag:i.STORE_ROOM}),p({...S,tag:i.STORAGE_LOCATION}),p({...b,tag:i.STORAGE_SECTION}),p({...h,tag:i.STORAGE_CONTAINER})}});const E=B(()=>d.value?.tag===i.STORE_ROOM?i.STORAGE_LOCATION:d.value?.tag===i.STORAGE_LOCATION?i.STORAGE_SECTION:d.value?.tag===i.STORAGE_SECTION?i.STORAGE_CONTAINER:d.value?.tag===i.STORAGE_CONTAINER?i.CONTAINER_VIEW:null),e=Q({roomModalShow:!1,roomFormTitle:"",roomForm:{},roomFormAction:!0,locationModalShow:!1,locationFormTitle:"",locationForm:{},locationFormAction:!0,sectionModalShow:!1,sectionFormTitle:"",sectionForm:{},sectionFormAction:!0,containerModalShow:!1,containerFormTitle:"",containerForm:{},containerFormAction:!0});function N(){const t={...e.roomForm};u(ro,{payload:t},"createStoreRoom").then(n=>{l.addStoreRoom(n),C(n)})}function M(){const t={name:e.roomForm.name,description:e.roomForm.description};u(no,{uid:e.roomForm.uid,payload:t},"updateStoreRoom").then(n=>l.updateStoreRoom(n))}function k(t,n){e.roomFormAction=t,e.roomFormTitle=(t?"CREATE":"EDIT")+" A STORE ROOM",e.roomModalShow=!0,t?Object.assign(e.roomForm,{}):Object.assign(e.roomForm,{...n})}function _(){e.roomFormAction===!0&&N(),e.roomFormAction===!1&&M(),e.roomModalShow=!1}function D(){const t={...e.locationForm,storeRoomUid:d.value.uid};u(ao,{payload:t},"createStorageLocation").then(n=>{l.addStorageLocation(n),v(n)})}function I(){const t={name:e.locationForm.name,description:e.locationForm.description};u(io,{uid:e.locationForm.uid,payload:t},"updateStorageLocation").then(n=>l.updateStorageLocation(n))}function L(t,n){e.locationFormAction=t,e.locationFormTitle=(t?"CREATE":"EDIT")+" A STORAGE LOCATION",e.locationModalShow=!0,t?Object.assign(e.locationForm,{}):Object.assign(e.locationForm,{...n})}function V(){e.locationFormAction===!0&&D(),e.locationFormAction===!1&&I(),e.locationModalShow=!1}function G(){const t={...e.sectionForm,storageLocationUid:d.value.uid};u(so,{payload:t},"createStorageSection").then(n=>{l.addStorageSection(n),w(n)})}function U(){const t={name:e.sectionForm.name,description:e.sectionForm.description};u(co,{uid:e.sectionForm.uid,payload:t},"updateStorageSection").then(n=>l.updateStorageSection(n))}function W(t,n){e.sectionFormAction=t,e.sectionFormTitle=(t?"CREATE":"EDIT")+" A STORAGE SECTION",e.sectionModalShow=!0,t?Object.assign(e.sectionForm,{}):Object.assign(e.sectionForm,{...n})}function j(){e.sectionFormAction===!0&&G(),e.sectionFormAction===!1&&U(),e.sectionModalShow=!1}function P(){const t={...e.containerForm,storageSectionUid:d.value.uid};u(lo,{payload:t},"createStorageContainer").then(n=>{l.addStorageContainer(n),O(n)})}function H(){const t={name:e.containerForm.name,description:e.containerForm.description};u(uo,{uid:e.containerForm.uid,payload:t},"updateStorageContainer").then(n=>l.updateStorageContainer(n))}function J(t,n){e.containerFormAction=t,e.containerFormTitle=(t?"CREATE":"EDIT")+" A STORAGE CONTAINER",e.containerModalShow=!0,t?Object.assign(e.containerForm,{}):Object.assign(e.containerForm,{...n})}function K(){e.containerFormAction===!0&&P(),e.containerFormAction===!1&&H(),e.containerModalShow=!1}function X(t){e.containerForm.grid===!0&&(e.containerForm.rows=Math.ceil(e.containerForm?.slots/e.containerForm?.cols))}function Y(t){e.containerForm.grid==!1&&(e.containerForm.cols=void 0,e.containerForm.rows=void 0)}return{...oo(e),treeData:f,activeTree:d,nextTreeType:E,tags:i,saveStoreRoomForm:_,roomFormManager:k,locationFormManager:L,saveLocationForm:V,saveStorageSectionForm:j,sectionFormManager:W,saveStorageContainerForm:K,containerFormManager:J,calculateRows:X,changeContainerType:Y}},render(){return o(x,null,[o(m("fel-heading"),{title:"Storage"},{default:()=>[o("button",{onClick:()=>this.roomFormManager(!0,null),class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Add Store Room")])]}),o("div",{class:"grid grid-cols-12 gap-6 min-h-full bg-background p-6"},[o("div",{class:"col-span-2 space-y-4"},[o("ul",{class:"space-y-2"},[this.treeData.map(r=>o(po,{tree:r},null))])]),this.activeTree?.name&&o("div",{class:"col-span-10 space-y-6"},[o("div",{class:"text-lg font-medium text-foreground"},[a("Selected: "),this.activeTree.name]),o("div",{class:"border-t border-border"},null),o("div",{class:"space-y-6"},[this.nextTreeType===this.tags.STORAGE_LOCATION?o("button",{onClick:()=>this.locationFormManager(!0,null),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Add Storage Location")]):null,this.nextTreeType===this.tags.STORAGE_SECTION?o("button",{onClick:()=>this.sectionFormManager(!0,null),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Add Storage Section")]):null,this.nextTreeType===this.tags.STORAGE_CONTAINER?o("button",{onClick:()=>this.containerFormManager(!0,null),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Add Storage Container")]):null,this.nextTreeType===this.tags.CONTAINER_VIEW?o(mo,null,null):null]),o("div",{class:"border-t border-border"},null)])]),this.roomModalShow?o(m("fel-modal"),{onClose:()=>this.roomModalShow=!1,contentWidth:"w-1/3"},{header:()=>o("h3",{class:"text-lg font-medium"},[this.roomFormTitle]),body:()=>o("form",{action:"post",class:"space-y-6 p-4"},[o("div",{class:"space-y-4"},[o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Store Room Name")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.roomForm.name=r,placeholder:"Name ..."},null),[[c,this.roomForm.name]])]),o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Description")]),s(o("textarea",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary min-h-[100px]","onUpdate:modelValue":r=>this.roomForm.description=r,placeholder:"Description ..."},null),[[c,this.roomForm.description]])])]),o("div",{class:"border-t border-border pt-4"},[o("button",{type:"button",onClick:()=>this.saveStoreRoomForm(),class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Save Form")])])])}):null,this.locationModalShow?o(m("fel-modal"),{onClose:()=>this.locationModalShow=!1,contentWidth:"w-1/3"},{header:()=>o("h3",{class:"text-lg font-medium"},[this.locationFormTitle]),body:()=>o("form",{action:"post",class:"space-y-6 p-4"},[o("div",{class:"space-y-4"},[o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Storage Location Name")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.locationForm.name=r,placeholder:"Name ..."},null),[[c,this.locationForm.name]])]),o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Description")]),s(o("textarea",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary min-h-[100px]","onUpdate:modelValue":r=>this.locationForm.description=r,placeholder:"Description ..."},null),[[c,this.locationForm.description]])])]),o("div",{class:"border-t border-border pt-4"},[o("button",{type:"button",onClick:()=>this.saveLocationForm(),class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Save Form")])])])}):null,this.sectionModalShow?o(m("fel-modal"),{onClose:()=>this.sectionModalShow=!1,contentWidth:"w-1/3"},{header:()=>o("h3",{class:"text-lg font-medium"},[this.sectionFormTitle]),body:()=>o("form",{action:"post",class:"space-y-6 p-4"},[o("div",{class:"space-y-4"},[o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Storage Section Name")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.sectionForm.name=r,placeholder:"Name ..."},null),[[c,this.sectionForm.name]])]),o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Description")]),s(o("textarea",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary min-h-[100px]","onUpdate:modelValue":r=>this.sectionForm.description=r,placeholder:"Description ..."},null),[[c,this.sectionForm.description]])])]),o("div",{class:"border-t border-border pt-4"},[o("button",{type:"button",onClick:()=>this.saveStorageSectionForm(),class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Save Form")])])])}):null,this.containerModalShow?o(m("fel-modal"),{onClose:()=>this.containerModalShow=!1,contentWidth:"w-1/2"},{header:()=>o("h3",{class:"text-lg font-medium"},[this.containerFormTitle]),body:()=>o("form",{action:"post",class:"space-y-6 p-4"},[o("div",{class:"space-y-4"},[o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Storage Container Name")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.containerForm.name=r,placeholder:"Name ..."},null),[[c,this.containerForm.name]])]),o("label",{class:"block space-y-2"},[o("span",{class:"text-sm font-medium"},[a("Description")]),s(o("textarea",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary min-h-[100px]","onUpdate:modelValue":r=>this.containerForm.description=r,placeholder:"Description ..."},null),[[c,this.containerForm.description]])]),o("label",{class:"block col-span-1 mb-2"},[o("span",{class:"text-sm font-medium"},[a("Number of Slots")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.containerForm.slots=r,placeholder:"Slots ...",type:"number"},null),[[c,this.containerForm.slots]])]),o("label",{class:"flex justify-start items-center col-span-1 mt-10 gap-x-2"},[s(o("input",{type:"checkbox",class:"",onChange:r=>this.changeContainerType(r),"onUpdate:modelValue":r=>this.containerForm.grid=r},null),[[F,this.containerForm.grid]]),o("span",{class:"text-sm font-medium"},[a("Add Grid View")])])]),o("div",{class:"grid grid-cols-4 gap-x-4 mb-4"},[this.containerForm.grid?o(x,null,[o("span",{class:"col-span-3"},[o("div",{class:"grid grid-cols-2 gap-x-4"},[o("label",{class:"block col-span-1 mb-2"},[o("span",{class:"text-sm font-medium"},[a("Cols")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.containerForm.cols=r,onKeyup:r=>this.calculateRows(r),type:"number"},null),[[c,this.containerForm.cols]])]),o("label",{class:"block col-span-1 mb-2"},[o("span",{class:"text-sm font-medium"},[a("Rows")]),s(o("input",{class:"w-full px-3 py-2 border border-input rounded-md bg-muted text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":r=>this.containerForm.rows=r,type:"number",disabled:!0},null),[[c,this.containerForm.rows]])]),o("label",{class:"block col-span-1 mt-2"},[s(o("input",{type:"checkbox",class:"","onUpdate:modelValue":r=>this.containerForm.rowWise=r},null),[[F,this.containerForm.rowWise]]),o("span",{class:"text-sm font-medium ml-3"},[a("Row Wise")])])])])]):null]),o("div",{class:"border-t border-border pt-4"},[o("button",{type:"button",onClick:()=>this.saveStorageContainerForm(),class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("Save Form")])])])}):null])}});export{yo as StorageHome,yo as default};
