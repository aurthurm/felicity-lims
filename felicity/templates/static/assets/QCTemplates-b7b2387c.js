import{V as S,f as F,a1 as f,h as U,i as T,r as g,o as l,c as i,O as t,a as Q,M as m,N as j,F as v,H as w,J as u,L as x,a6 as r,z as B,D as b,Y as L,a3 as $,C as O,ae as z,_ as H}from"./index-0a787601.js";import{r as R,s as I}from"./analyses.mutations-7648569c.js";import{u as J}from"./analysis-3bf6dc10.js";const Y={class:"rounded-md border bg-card p-6 shadow-sm"},G={class:"overflow-x-auto"},K={class:"w-full"},P={class:"px-6 py-4 whitespace-nowrap border-b border-border"},W={class:"font-medium text-foreground"},X={key:0,class:"text-sm text-muted-foreground"},Z={class:"px-6 py-4 whitespace-nowrap border-b border-border"},ee={class:"text-sm text-foreground"},te={class:"px-6 py-4 whitespace-nowrap border-b border-border"},oe={class:"text-sm text-foreground"},se={class:"px-6 py-4 whitespace-nowrap text-right border-b border-border"},ne=["onClick"],re={class:"text-xl font-semibold text-foreground"},le={action:"post",class:"p-6 space-y-6"},de={class:"space-y-4"},ae={class:"space-y-2"},ie={class:"space-y-2"},ue={class:"space-y-2"},ce=["value"],me={class:"pt-4"},pe=S({__name:"QCTemplates",setup(fe){const d=J(),{withClientMutation:y}=F();let a=f(!1),_=f(""),s=U({});const p=f(!0);d.fetchQCLevels(),d.fetchQCTemplates();const k=T(()=>d.getQCTemplates),D=T(()=>d.getQCLevels);function E(){const n={name:s.name,description:s.description,levels:h(s.qcLevels),departments:s.departments};y(R,{payload:n},"createQcTemplate").then(e=>d.addQcTemplate(e))}function q(){const n={name:s.name,description:s.description,levels:h(s.qcLevels),departments:s.departments};y(I,{uid:s.uid,payload:n},"updateQcTemplate").then(e=>d.updateQcTemplate(e))}function h(n){if(n?.length<=0)return[];let e=[];return n?.forEach(c=>e.push(c.uid)),e}function C(n,e={}){p.value=n,a.value=!0,_.value=(n?"CREATE":"EDIT")+" QC Template",n?Object.assign(s,{}):Object.assign(s,{...e})}function M(n){if(n?.length<=0)return"";let e=[];return n?.forEach(c=>e.push(c.level)),e.join(", ")}function N(){p.value===!0&&E(),p.value===!1&&q(),a.value=!1}return(n,e)=>{const c=g("fel-button"),V=g("fel-heading"),A=g("fel-modal");return l(),i(v,null,[t("div",null,[Q(V,{title:"QC Templates"},{default:m(()=>[Q(c,{onClick:e[0]||(e[0]=o=>C(!0))},{default:m(()=>e[6]||(e[6]=[j("Add QC Template")])),_:1})]),_:1}),t("div",Y,[t("div",G,[t("table",K,[e[7]||(e[7]=t("thead",null,[t("tr",{class:"border-b border-border bg-muted/50"},[t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"QC Template Name"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Quality Control level(s)"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Department(s)"),t("th",{class:"px-6 py-3 text-right text-sm font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",null,[(l(!0),i(v,null,w(k.value,o=>(l(),i("tr",{key:o?.uid,class:"hover:bg-accent/50 transition-colors duration-200"},[t("td",P,[t("div",W,u(o?.name),1),o?.description?(l(),i("div",X,u(o?.description),1)):x("v-if",!0)]),t("td",Z,[t("div",ee,u(M(o?.qcLevels??[])),1)]),t("td",te,[t("div",oe,u(o?.category),1)]),t("td",se,[t("button",{onClick:ge=>C(!1,o),class:"inline-flex items-center px-3 py-1.5 border border-border bg-background text-foreground text-sm font-medium transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ne)])]))),128))])])])])]),x(" QC Template Form Modal "),r(a)?(l(),B(A,{key:0,onClose:e[5]||(e[5]=o=>z(a)?a.value=!1:a=!1)},{header:m(()=>[t("h3",re,u(r(_)),1)]),body:m(()=>[t("form",le,[t("div",de,[t("div",ae,[e[8]||(e[8]=t("label",{for:"name",class:"text-sm font-medium text-muted-foreground"},"QC Template Name",-1)),b(t("input",{id:"name",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground","onUpdate:modelValue":e[1]||(e[1]=o=>r(s).name=o),placeholder:"Enter template name"},null,512),[[L,r(s).name]])]),t("div",ie,[e[9]||(e[9]=t("label",{for:"description",class:"text-sm font-medium text-muted-foreground"},"Description",-1)),b(t("textarea",{id:"description",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none","onUpdate:modelValue":e[2]||(e[2]=o=>r(s).description=o),placeholder:"Enter template description",rows:"3"},null,512),[[L,r(s).description]])]),t("div",ue,[e[11]||(e[11]=t("label",{for:"controlLevels",class:"text-sm font-medium text-muted-foreground"},"Quality Control Sample Levels",-1)),b(t("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":e[3]||(e[3]=o=>r(s).qcLevels=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",multiple:""},[e[10]||(e[10]=t("option",{disabled:"",value:""},"Select QC Levels",-1)),(l(!0),i(v,null,w(D.value,o=>(l(),i("option",{key:o.uid,value:o,class:"py-1"},u(o.level),9,ce))),128))],512),[[$,r(s).qcLevels]]),e[12]||(e[12]=t("p",{class:"text-xs text-muted-foreground mt-1"},"Hold Ctrl/Cmd to select multiple levels",-1))])]),t("div",me,[t("button",{type:"button",onClick:e[4]||(e[4]=O(o=>N(),["prevent"])),class:"w-full inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"}," Save Changes ")])])]),_:1})):x("v-if",!0)],64)}}}),ye=H(pe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/QCTemplates.vue"]]);export{ye as default};
