import{u as U,f as Y,g as I,h as j,t as _,i as P,I as B,j as L,B as V}from"./index-Cdc6vSVw.js";import{C as x,a as M,R as N,b as Q,P as T,c as q,V as z,d as G,I as H}from"./analyses.mutations-DiZ_xJnn.js";import{R as J,S as K}from"./storage.mutations-DuZpp7PI.js";function Z(){const l=U(),{withClientMutation:n,withClientQuery:u}=Y(),{toastSuccess:r,toastError:t,swalConfirm:o}=P(),f=I({samples:j(()=>l.getSamples)}),p=async a=>l.updateSamplesStatus(a),i=async a=>l.updateSampleStatus(a),d=async a=>l.updateSamples(a),w=async a=>l.addSampleClones(a),m=async a=>{a&&l.fetchAnalysisResultsForSample(a)},S=async a=>{try{if((await o("You want to cancel these samples","Are you sure?")).isConfirmed){const e=await n(x,{samples:a},"cancelSamples");e?.samples?.length>0&&(p(e.samples),i(e.samples[0]),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been cancelled successfully"))}}catch(s){t(`Failed to cancel samples: ${s instanceof Error?s.message:"Unknown error"}`)}},y=async a=>{try{if((await o("You want to clone these samples","Are you sure?")).isConfirmed){const e=await n(M,{samples:a},"cloneSamples");e?.samples?.length>0&&(w(e.samples),r("Samples have been cloned successfully"))}}catch(s){t(`Failed to clone samples: ${s instanceof Error?s.message:"Unknown error"}`)}},h=async a=>{try{if((await o("You want to reinstate samples","Are you sure?")).isConfirmed){const e=await n(N,{samples:a},"reInstateSamples");e?.samples?.length>0&&(p(e.samples),i(e.samples[0]),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been reinstated successfully"))}}catch(s){t(`Failed to reinstate samples: ${s instanceof Error?s.message:"Unknown error"}`)}},g=async a=>{try{if((await o("You want to receive samples","Are you sure?")).isConfirmed){const e=await n(Q,{samples:a},"receiveSamples");e?.samples?.length>0&&(p(e.samples),i(e.samples[0]),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been received successfully"))}}catch(s){t(`Failed to receive samples: ${s instanceof Error?s.message:"Unknown error"}`)}},v=async a=>{try{if((await o("You want to recover these samples from storage","Are you sure?")).isConfirmed){const e=await n(J,{sampleUids:a},"recoverSamples");e?.samples?.length>0&&(d(e.samples),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been recovered successfully"))}}catch(s){t(`Failed to recover samples: ${s instanceof Error?s.message:"Unknown error"}`)}},b=async a=>{try{if((await o("You want to publish samples","Are you sure?")).isConfirmed){const e=await n(T,{samples:a},"publishSamples");e?.samples?.length>0&&l.updateSamples(e.samples??[]),e?.message&&r(e.message)}}catch(s){t(`Failed to publish samples: ${s instanceof Error?s.message:"Unknown error"}`)}},C=async a=>{console.log("Downloading Impress reports for samples:",a);try{if((await o("You want to download PDFs","Are you sure?")).isConfirmed){console.log("impressReportsDownload:",a);const e=await u(B,{sampleIds:a},"impressReportsDownload");if(e){const c=document.createElement("a");c.href=`data:application/pdf;base64,${e}`,c.setAttribute("download","impress-report.pdf"),c.click(),r("Reports downloaded successfully")}}}catch(s){t(`Failed to download reports: ${s instanceof Error?s.message:"Unknown error"}`)}},D=async a=>{try{if((await o("You want to download this report","Are you sure?")).isConfirmed){const e=await u(L,{impressUid:a},"impressReportDownload");if(e){const c=document.createElement("a");c.href=`data:application/pdf;base64,${e}`,c.setAttribute("download","impress-report.pdf"),c.click(),r("Report downloaded successfully")}}}catch(s){t(`Failed to download report: ${s instanceof Error?s.message:"Unknown error"}`)}},k=async a=>{try{return await u(V,{sampleUids:a},"barcodeSamples")||[]}catch(s){return t(`Failed to generate barcodes: ${s instanceof Error?s.message:"Unknown error"}`),[]}},A=async a=>{try{if((await o("You want to print these samples","Are you sure?")).isConfirmed){const e=await n(q,{samples:a},"printSamples");e?.message&&r(e.message)}}catch(s){t(`Failed to print samples: ${s instanceof Error?s.message:"Unknown error"}`)}},E=async a=>{try{if((await o("You want to verify these samples","Are you sure?")).isConfirmed){const e=await n(z,{samples:a},"verifySamples");e?.samples?.length>0&&(p(e.samples),i(e.samples[0]),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been verified successfully"))}}catch(s){t(`Failed to verify samples: ${s instanceof Error?s.message:"Unknown error"}`)}},F=async a=>{try{if((await o("You want to reject these samples","Are you sure?")).isConfirmed){const e=await n(G,{samples:a},"rejectSamples");e?.message&&r(e.message)}}catch(s){t(`Failed to reject samples: ${s instanceof Error?s.message:"Unknown error"}`)}},R=async a=>{try{if((await o("You want to invalidate these samples","Are you sure?")).isConfirmed){const e=await n(H,{samples:a},"invalidateSamples");if(e?.samples?.length>0)return p(e.samples),i(e.samples[0]),e.samples.length===1&&m(e.samples[0].uid),r("Samples have been invalidated successfully"),e.samples}return[]}catch(s){return t(`Failed to invalidate samples: ${s instanceof Error?s.message:"Unknown error"}`),[]}},$=async a=>{try{if((await o("You want to store these samples","Are you sure?")).isConfirmed){const e=await n(K,{payload:a},"storeSamples");if(e?.samples?.length>0)return d(e.samples),r("Samples have been stored successfully"),e.samples}return[]}catch(s){return t(`Failed to store samples: ${s instanceof Error?s.message:"Unknown error"}`),[]}};return{..._(f),cancelSamples:S,cloneSamples:y,reInstateSamples:h,receiveSamples:g,recoverSamples:v,publishSamples:b,downloadSamplesImpress:C,downloadImpress:D,barcodeSamples:k,printSamples:A,verifySamples:E,rejectSamples:F,invalidateSamples:R,storeSamples:$}}export{Z as u};
