import{P as N,e as O,t as T,Z as b,f as V,R as B,h as C,o as l,c as a,b as t,F as c,D as f,E as d,a2 as r,x as L,K as F,A as v,a4 as A,V as $,z as j,a7 as P,J as q,X as Y,Y as z,_ as J}from"./index-e1b11e1a.js";import{L as K,M as W}from"./analyses.mutations-53bc24e5.js";import{u as X}from"./analysis-0aa9b5f6.js";import{u as Z}from"./setup-84875ac0.js";import"./_queries-2b677941.js";const G={class:"overflow-x-auto mt-4"},H={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Q={class:"min-w-full"},tt={class:"bg-white"},et={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},st={class:"flex items-center"},ot={class:"text-sm leading-5 text-gray-800"},nt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},rt={class:"text-sm leading-5 text-sky-800"},lt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},at={class:"text-sm leading-5 text-sky-800"},it={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},dt=["onClick"],ut={action:"post",class:"p-1"},ct={class:"grid grid-cols-3 gap-x-4 mb-4"},mt={class:"block col-span-1 mb-2"},pt={class:"w-full"},yt=["value"],bt={class:"block col-span-1 mb-2"},ft={class:"w-full"},vt=["value"],xt={class:"block col-span-1 mb-2"},ht=N({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(U){const M=Y(()=>z(()=>import("./index-e1b11e1a.js").then(o=>o.cN),["assets/index-e1b11e1a.js","assets/index-78b87750.css"])),x=X(),u=Z(),{withClientMutation:h}=O(),g=U,{analysis:w}=T(g);let i=b(!1),_=b(""),n=V({});const m=b(!0);B(()=>g.analysisUid,(o,e)=>{}),u.fetchInstruments();const p=C(()=>u.getInstruments);u.fetchMethods();const y=C(()=>u.getMethods);function S(){const o={...n,analysisUid:w?.value?.uid};h(K,{payload:o},"createAnalysisCorrectionFactor").then(e=>x.AddAnalysisCorrectionFactor(e))}function E(){const o={...n};delete o.uid,delete o.__typename,h(W,{uid:n.uid,payload:o},"updateAnalysisCorrectionFactor").then(e=>x.updateAnalysisCorrectionFactor(e))}function k(o,e={}){m.value=o,i.value=!0,_.value=(o?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",o?Object.assign(n,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(n,{...e})}function I(){m.value===!0&&S(),m.value===!1&&E(),i.value=!1}const D=o=>{const e=p?.value?.findIndex(s=>s.uid===o);return p?.value[e]?.name||"unknown"},R=o=>{const e=y?.value?.findIndex(s=>s.uid===o);return y?.value[e]?.name||"unknown"};return(o,e)=>(l(),a(c,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[0]||(e[0]=s=>k(!0))},"Add Correction Factor"),e[13]||(e[13]=t("hr",null,null,-1)),t("div",G,[t("div",H,[t("table",Q,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Intrument"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Method"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Factor"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),t("tbody",tt,[(l(!0),a(c,null,f(r(w)?.correctionFactors,s=>(l(),a("tr",{key:s?.uid},[t("td",et,[t("div",st,[t("div",null,[t("div",ot,d(D(s?.instrumentUid)),1)])])]),t("td",nt,[t("div",rt,d(R(s?.instrumentUid)),1)]),t("td",lt,[t("div",at,d(s.factor),1)]),t("td",it,[t("button",{onClick:gt=>k(!1,s),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,dt)])]))),128))])])])]),r(i)?(l(),L(r(M),{key:0,onClose:e[5]||(e[5]=s=>P(i)?i.value=!1:i=!1),contentWidth:"w-2/4"},{header:F(()=>[t("h3",null,d(r(_)),1)]),body:F(()=>[t("form",ut,[t("div",ct,[t("label",mt,[e[8]||(e[8]=t("span",{class:"text-gray-700 w-4/12"},"Instrument",-1)),t("div",pt,[v(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":e[1]||(e[1]=s=>r(n).instrumentUid=s)},[e[7]||(e[7]=t("option",null,null,-1)),(l(!0),a(c,null,f(p.value,s=>(l(),a("option",{key:s?.uid,value:s.uid},d(s?.name),9,yt))),128))],512),[[A,r(n).instrumentUid]])])]),t("label",bt,[e[10]||(e[10]=t("span",{class:"text-gray-700 w-4/12"},"Method",-1)),t("div",ft,[v(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":e[2]||(e[2]=s=>r(n).methodUid=s)},[e[9]||(e[9]=t("option",null,null,-1)),(l(!0),a(c,null,f(y.value,s=>(l(),a("option",{key:s?.uid,value:s.uid},d(s?.name),9,vt))),128))],512),[[A,r(n).methodUid]])])]),t("label",xt,[e[11]||(e[11]=t("span",{class:"text-gray-700"},"Factor",-1)),v(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=s=>r(n).factor=s),placeholder:"Factor ..."},null,512),[[$,r(n).factor]])])]),e[12]||(e[12]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[4]||(e[4]=j(s=>I(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):q("",!0)],64))}}),At=J(ht,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/CorrectionFactor.vue"]]);export{At as default};
