import{P as N,e as V,a9 as F,u as L,h as P,aa as v,Z as _,$ as K,o as l,c as i,b as t,A as b,F as p,D as f,E as d,a2 as k,a4 as j,z as A,x as z,K as C,L as I,X as O,Y as X,S as T,_ as Z}from"./index-66877f9a.js";import{u as q}from"./analysis-793745a0.js";import{D as G,F as H}from"./analyses.mutations-7e87125c.js";const J={action:"post",class:"mt-4"},Q={class:"flex justify-start items-center mr-4"},W={class:"block mx-4"},ee=["value"],te={class:"font-bold"},se={class:"col-span-2 overflow-y-scroll overscroll-contain max-h-[540px] bg-white"},ne={class:"w-full"},oe={class:"min-w-full"},ae={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},le=["checked","onChange"],re={class:"bg-white"},ie={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},de=["checked","onChange"],ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},pe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},ye=N({__name:"ManageAnalyses",emits:["changeTab"],setup(me,{emit:S}){const B=O(()=>X(()=>import("./FelAccordion-418ec686.js"),["assets/FelAccordion-418ec686.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),{withClientMutation:g}=V(),w=F(),u=q(),y=L(),D=P(()=>u.getAnalysesServices);v(()=>{u.fetchAnalysesTemplates(),u.fetchAnalysesServices({})});const M=S,x=s=>{M("changeTab",s)},m=_(),U=async()=>{try{T.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(s=>{s.isConfirmed&&g(G,{uid:w.params.sampleUid,analysisTemplateUid:m.value},"samplesApplyTemplate").then(e=>x("analysis-results"))})}catch{}},a=_([]);v(()=>{a.value=[...y.analysisResults?.map(s=>s.analysisUid)]});const h=s=>{a.value.includes(s)?a.value=a.value.filter(e=>e!==s):a.value=[...a.value,s]},c=s=>a.value.includes(s),E=s=>s.every(e=>c(e.uid)),R=s=>{s.every(e=>c(e.uid))?s.forEach(e=>h(e.uid)):s.forEach(e=>{c(e.uid)||h(e.uid)})},Y=async()=>{const s=y.analysisResults?.filter(o=>!a.value.includes(o.analysisUid)).map(o=>o.uid),e=a.value.filter(o=>!y.analysisResults?.map(n=>n.analysisUid).includes(o));try{T.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(o=>{o.isConfirmed&&g(H,{sampleUid:w.params.sampleUid,payload:{cancel:s,add:e}},"manageAnalyses").then(n=>x("analysis-results"))})}catch{}};return(s,e)=>{const o=K("motion-slide-right");return l(),i(p,null,[t("section",null,[e[5]||(e[5]=t("hr",null,null,-1)),b((l(),i("form",J,[t("div",Q,[e[4]||(e[4]=t("span",{class:"text-gray-700"},"Analyses Template (Auto)",-1)),t("label",W,[b(t("select",{class:"form-select block w-full py-1","onUpdate:modelValue":e[0]||(e[0]=n=>m.value=n)},[e[3]||(e[3]=t("option",null,null,-1)),(l(!0),i(p,null,f(k(u).analysesTemplates,n=>(l(),i("option",{key:n.uid,value:n.uid},d(n.name),9,ee))),128))],512),[[j,m.value]])]),t("button",{type:"button",onClick:e[1]||(e[1]=A(n=>U(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ")])])),[[o]])]),e[10]||(e[10]=t("hr",{class:"mt-4 mb-2"},null,-1)),t("h3",te,"Manually Modify Analyses: ("+d(a.value?.length)+")",1),e[11]||(e[11]=t("hr",{class:"mb-4 mt-2"},null,-1)),t("section",se,[t("div",ne,[(l(!0),i(p,null,f(D.value,(n,$)=>(l(),z(k(B),{key:$},{title:C(()=>[I(d(n[0]),1)]),body:C(()=>[t("table",oe,[t("thead",null,[t("tr",null,[t("th",ae,[t("input",{type:"checkbox",class:"",checked:E(n[1]),onChange:r=>R(n[1])},null,40,le)]),e[6]||(e[6]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Analysis",-1)),e[7]||(e[7]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Keyword",-1)),e[8]||(e[8]=t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Description",-1))])]),t("tbody",re,[(l(!0),i(p,null,f(n[1],r=>b((l(),i("tr",{key:r?.uid},[t("td",ie,[t("input",{type:"checkbox",class:"border-red-500",checked:c(r?.uid),onChange:he=>h(r?.uid)},null,40,de)]),t("td",ue,d(r?.name),1),t("td",ce,d(r?.keyword),1),t("td",pe,d(r?.description),1)])),[[o]])),128))])])]),_:2},1024))),128)),e[9]||(e[9]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[2]||(e[2]=A(n=>Y(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Changes ")])])],64)}}}),we=Z(ye,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{we as default};
