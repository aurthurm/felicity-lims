const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataTable-DLBrhw2Z.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/TooltipTrigger-BWIYwmnQ.js","assets/PopperContent-BfyCnGUj.js","assets/Input-BEm5S0CJ.js","assets/SelectValue-Ds0cfAgl.js","assets/useNonce-B4v0IDPb.js","assets/chevron-down-Dqf-ptA3.js","assets/useFocusGuards-Bjb6OG0k.js","assets/Spinner-Bl8RfjFA.js","assets/vue-multiselect.esm-Cvm3ZCjW.js"])))=>i.map(i=>d[i]);
import{Y as ae,u as ie,a0 as d,av as le,a7 as de,ah as ue,aq as F,a5 as T,a6 as V,a3 as fe,_ as ge,r as me,c as I,o as A,z as o,A as ce,C as N,a as k,K as b,M as be,B as pe,I as H,D as f,al as g,F as xe}from"./index-OdhKCqIc.js";import{c as E,u as he,b as u}from"./index.esm-BfHj8iGm.js";import{w as ve,x as ye,y as Se,a as ke}from"./microbiology.mutations-cVAbKt4K.js";import{P as Pe}from"./PageHeading-Czi_4opS.js";const Oe=ae({__name:"AbxOrganismSerotype",setup(q,{expose:e}){e();const w=T(()=>V(()=>import("./DataTable-DLBrhw2Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),s=T(()=>V(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([11,1,2]))),{withClientMutation:p,withClientQuery:x}=ie();let m=d(!1),r=d("");const h=d(!0),c=d(null),C=E({organism:E().required("Organism is required")}),{handleSubmit:_,resetForm:P,setValues:B,errors:z}=he({validationSchema:C,initialValues:{organism:null,serotype:"",serogroup:"",subspecies:"",oAntigens:"",hPhase1:"",hPhase2:"",x997Check:"",fate:""}}),{value:L}=u("organism"),{value:X}=u("serotype"),{value:G}=u("serogroup"),{value:K}=u("subspecies"),{value:R}=u("oAntigens"),{value:Y}=u("hPhase1"),{value:J}=u("hPhase2"),{value:Q}=u("x997Check"),{value:W}=u("fate"),M=d(!1),l=d([]),U=d([]);let a=le({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const O=d(0);let v=d({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const Z=de(()=>l?.value?.length+" of "+O.value+" organisms"),j=d([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1}]);function y(t){x(Se,{text:t.text,pageSize:t.first,sortBy:t.sortBy},void 0).then(n=>{const i=n.abxOrganismSerotypeAll,S=i.items;t.filterAction?(l.value=[],l.value=S):l.value=F(l.value,S,"uid"),O.value=i?.totalCount,v.value=i?.pageInfo}).finally(()=>{M.value=!1})}function $(t,n){t?.length<3||x(ke,{pageSize:50,text:t,sortBy:["name"]},"abxOrganismAll").then(i=>{i&&(U.value=i?.items??[])})}ue(()=>{y(a)});function ee(t){a.first=100,a.after="",a.text=t.filterText,a.filterAction=!0,y(a)}function se(t){a.first=t.fetchCount,a.after=v?.value?.endCursor,a.text=t.filterText,a.filterAction=!1,y(a)}const oe=()=>P();function te(t,n={}){h.value=t,m.value=!0,r.value=(t?"Create":"Edit")+" OrganismSerotype",t?(c.value=null,P()):(c.value=n.uid??null,B({organism:n.organism??null,serotype:n.serotype??"",serogroup:n.serogroup??"",subspecies:n.subspecies??"",oAntigens:n.oAntigens??"",hPhase1:n.hPhase1??"",hPhase2:n.hPhase2??"",x997Check:n.x997Check??"",fate:n.fate??""}))}const re=_(t=>{const n={organismUid:t.organism?.uid,serotype:t.serotype,serogroup:t.serogroup,subspecies:t.subspecies,oAntigens:t.oAntigens,hPhase1:t.hPhase1,hPhase2:t.hPhase2,x997Check:t.x997Check,fate:t.fate};h.value===!0&&p(ve,{payload:n},"createAbxOrganismSerotype").then(i=>{i&&(l.value=F(l.value,[i],"uid"))}),h.value===!1&&c.value&&p(ye,{uid:c.value,payload:n},"updateAbxOrganismSerotype").then(i=>{if(i){const S=l.value.findIndex(ne=>ne.uid==i.uid);l.value[S]=i}}),m.value=!1}),D={DataTable:w,VueMultiselect:s,withClientMutation:p,withClientQuery:x,get showModal(){return m},set showModal(t){m=t},get formTitle(){return r},set formTitle(t){r=t},formAction:h,currentUid:c,organismSerotypeSchema:C,handleSubmit:_,resetForm:P,setValues:B,errors:z,organism:L,serotype:X,serogroup:G,subspecies:K,oAntigens:R,hPhase1:Y,hPhase2:J,x997Check:Q,fate:W,fetchingOrganismSerotypes:M,abxOrganismSerotypes:l,abxOrganisms:U,get abxParams(){return a},set abxParams(t){a=t},organismCount:O,get organismPageInfo(){return v},set organismPageInfo(t){v=t},countNone:Z,tableColumns:j,fetchOrganismSerotypes:y,organismSearch:$,searchOrganismSerotypes:ee,showMoreOrganismSerotypes:se,resetOrganismSerotype:oe,FormManager:te,saveForm:re,get Button(){return fe},PageHeading:Pe};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),Ae={class:"space-y-6"},we={class:"bg-card p-6 shadow-sm rounded-lg"},Ce={class:"text-xl font-semibold text-foreground"},_e={class:"grid grid-cols-2 gap-4"},Be={class:"block"},Me={key:0,class:"text-sm text-destructive"},Ue={class:"block"},De={class:"grid grid-cols-2 gap-4"},Fe={class:"block"},Te={class:"block"},Ve={class:"grid grid-cols-2 gap-4"},Ie={class:"block"},Ne={class:"block"},He={class:"grid grid-cols-2 gap-4"},Ee={class:"block"},qe={class:"block"},ze={class:"grid grid-cols-2 gap-4"},Le={class:"block"};function Xe(q,e,w,s,p,x){const m=me("Modal");return A(),I(xe,null,[o("div",Ae,[k(s.PageHeading,{title:"Organism Serotypes"},{default:b(()=>[k(s.Button,{onClick:e[0]||(e[0]=r=>s.FormManager(!0))},{default:b(()=>[...e[12]||(e[12]=[be("Add Organism Serotype",-1)])]),_:1})]),_:1}),o("div",we,[k(s.DataTable,{columns:s.tableColumns,data:s.abxOrganismSerotypes,toggleColumns:!0,loading:s.fetchingOrganismSerotypes,paginable:!0,pageMeta:{fetchCount:s.abxParams.first,hasNextPage:!0,countNone:s.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:s.searchOrganismSerotypes,onOnSearchFocus:s.resetOrganismSerotype,onOnPaginate:s.showMoreOrganismSerotypes,selectable:!1},{footer:b(()=>[...e[13]||(e[13]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),s.showModal?(A(),ce(m,{key:0,onClose:e[11]||(e[11]=r=>s.showModal=!1),"content-width":"w-1/2"},{header:b(()=>[o("h3",Ce,H(s.formTitle),1)]),body:b(()=>[o("form",{onSubmit:e[10]||(e[10]=pe((...r)=>s.saveForm&&s.saveForm(...r),["prevent"])),class:"space-y-6 p-4"},[o("div",_e,[o("label",Be,[e[14]||(e[14]=o("span",{class:"text-sm font-medium text-foreground"},"Organism",-1)),k(s.VueMultiselect,{modelValue:s.organism,"onUpdate:modelValue":e[1]||(e[1]=r=>s.organism=r),options:s.abxOrganisms,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:s.organismSearch,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),s.errors.organism?(A(),I("p",Me,H(s.errors.organism),1)):N("",!0)]),o("label",Ue,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Serotype",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=r=>s.serotype=r),placeholder:"Serotype ..."},null,512),[[g,s.serotype]])])]),o("div",De,[o("label",Fe,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Serogroup",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=r=>s.serogroup=r),placeholder:"Serogroup ..."},null,512),[[g,s.serogroup]])]),o("label",Te,[e[17]||(e[17]=o("span",{class:"text-sm font-medium text-foreground"},"Subspecies",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=r=>s.subspecies=r),placeholder:"Subspecies ..."},null,512),[[g,s.subspecies]])])]),o("div",Ve,[o("label",Ie,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"O Antigens",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=r=>s.oAntigens=r),placeholder:"O Antigens ..."},null,512),[[g,s.oAntigens]])]),o("label",Ne,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"H Phase1",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=r=>s.hPhase1=r),placeholder:"H Phase1 ..."},null,512),[[g,s.hPhase1]])])]),o("div",He,[o("label",Ee,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"H Phase2",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=r=>s.hPhase2=r),placeholder:"H Phase2 ..."},null,512),[[g,s.hPhase2]])]),o("label",qe,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"X997 Check",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=r=>s.x997Check=r),placeholder:"X997 Check ..."},null,512),[[g,s.x997Check]])])]),o("div",ze,[o("label",Le,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Fate",-1)),f(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[9]||(e[9]=r=>s.fate=r),placeholder:"Fate ..."},null,512),[[g,s.fate]])])]),e[23]||(e[23]=o("hr",{class:"border-border"},null,-1)),e[24]||(e[24]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Serotype ",-1))],32)]),_:1})):N("",!0)],64)}const Je=ge(Oe,[["render",Xe],["__scopeId","data-v-a814e9fb"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{Je as default};
