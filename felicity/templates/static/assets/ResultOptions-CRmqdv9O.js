const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css","assets/vue-multiselect.esm-CntbZnFq.js"])))=>i.map(i=>d[i]);
import{a0 as X,u as Y,f as Z,h as j,t as $,a7 as y,a5 as ee,a1 as A,a6 as D,_ as te,r as U,c as a,o as n,a as h,A as e,C as oe,E as b,N as g,P as se,J as T,K as N,L as i,D as re,F as q,a2 as P}from"./index-DApeomWQ.js";import{c as le,e as ne,a as ae,d as ie,u as de,b as w}from"./index.esm-Cx9agkcQ.js";import{y as ue,z as pe}from"./analyses.mutations-Bu696l9I.js";import{u as ce}from"./analysis-BTUsl5OO.js";const me=X({__name:"ResultOptions",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(R,{expose:t}){t();const V=A(()=>D(()=>import("./index-DApeomWQ.js").then(r=>r.cl),__vite__mapDeps([0,1]))),o=A(()=>D(()=>import("./vue-multiselect.esm-CntbZnFq.js"),__vite__mapDeps([2,0,1]))),c=ce(),v=Y(),{withClientMutation:u}=Z(),x=j(()=>v.getSampleTypes),s=R,{analysis:d}=$(s);let m=y(!1),_=y("");const f=y(!0),p=y(null),E=le({optionKey:ie().typeError("Result key must be a number").integer("Result key must be an integer").required("Result key is required"),value:ae().trim().required("Result value is required"),sampleTypes:ne().nullable()}),{handleSubmit:k,resetForm:O,setValues:K}=de({validationSchema:E,initialValues:{optionKey:"",value:"",sampleTypes:[]}}),{value:L,errorMessage:B}=w("optionKey"),{value:I,errorMessage:z}=w("value"),{value:J,errorMessage:W}=w("sampleTypes");ee(()=>s.analysisUid,(r,l)=>{});function S(r){u(ue,{payload:r},"createResultOption").then(l=>c.addResultOption(l))}function M(r){p.value&&u(pe,{uid:p.value,payload:r},"updateResultOption").then(l=>c.updateResultOption(l))}function G(r,l={}){f.value=r,m.value=!0,_.value=(r?"CREATE":"EDIT")+" RESULT OPTION",r?(p.value=null,O({values:{optionKey:"",value:"",sampleTypes:[]}})):(p.value=l.uid??null,K({optionKey:l.optionKey??"",value:l.value??"",sampleTypes:l.sampleTypes??[]}))}const H=k(r=>{const l=d?.value?.uid;if(!l)return;const C={optionKey:Number(r.optionKey),value:r.value,sampleTypes:(r.sampleTypes??[]).map(Q=>Q.uid),analysisUid:l};f.value===!0&&S(C),f.value===!1&&M(C),m.value=!1}),F={modal:V,VueMultiselect:o,analysisStore:c,sampleStore:v,withClientMutation:u,sampleTypes:x,props:s,analysis:d,get showModal(){return m},set showModal(r){m=r},get formTitle(){return _},set formTitle(r){_=r},formAction:f,currentUid:p,resultOptionSchema:E,handleSubmit:k,resetForm:O,setValues:K,optionKey:L,optionKeyError:B,resultValue:I,resultValueError:z,sampleTypesField:J,sampleTypesError:W,addResultOption:S,editResultOption:M,FormManager:G,saveForm:H};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),fe={class:"overflow-x-auto mt-4"},ye={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},be={class:"min-w-full fel-table"},ge={class:"bg-card"},ve={class:"px-4 py-2 whitespace-nowrap border-b border-border"},xe={class:"text-sm text-foreground"},_e={class:"px-4 py-2 whitespace-nowrap border-b border-border"},he={class:"text-sm text-foreground"},Te={class:"px-4 py-2 whitespace-nowrap border-b border-border"},we={class:"flex flex-wrap gap-2"},Re={class:"px-4 py-2 whitespace-nowrap text-right border-b border-border"},Ve=["onClick"],Ee={class:"text-lg font-bold text-foreground"},ke={class:"space-y-4"},Oe={class:"grid grid-cols-3 gap-4"},Ke={class:"space-y-2"},Se={key:0,class:"text-sm text-destructive"},Me={class:"col-span-2 space-y-2"},Fe={key:0,class:"text-sm text-destructive"},Ce={class:"space-y-2"},Ae={key:0,class:"text-sm text-destructive"};function De(R,t,V,o,c,v){const u=U("fel-button"),x=U("fel-heading");return n(),a(T,null,[h(x,{title:"Result Options"},{default:g(()=>[h(u,{onClick:t[0]||(t[0]=s=>o.FormManager(!0))},{default:g(()=>[...t[6]||(t[6]=[se("Add Result Option",-1)])]),_:1})]),_:1}),e("div",fe,[e("div",ye,[e("table",be,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Key"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Value"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Sample Types"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",ge,[(n(!0),a(T,null,N(o.analysis?.resultOptions,s=>(n(),a("tr",{key:s?.uid,class:"hover:bg-accent/50"},[e("td",ve,[e("div",xe,i(s?.optionKey),1)]),e("td",_e,[e("div",he,i(s?.value),1)]),e("td",Te,[e("div",we,[(n(!0),a(T,null,N(s?.sampleTypes,d=>(n(),a("span",{key:d.uid,class:"px-2 py-1 text-xs font-medium bg-accent text-accent-foreground rounded-md"},i(d.name),1))),128))])]),e("td",Re,[e("button",{onClick:d=>o.FormManager(!1,s),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,Ve)])]))),128))])])])]),o.showModal?(n(),oe(o.modal,{key:0,onClose:t[5]||(t[5]=s=>o.showModal=!1),contentWidth:"w-2/4"},{header:g(()=>[e("h3",Ee,i(o.formTitle),1)]),body:g(()=>[e("form",{onSubmit:t[4]||(t[4]=re((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"p-6 space-y-6"},[e("div",ke,[e("div",Oe,[e("label",Ke,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result Key",-1)),q(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=s=>o.optionKey=s),placeholder:"Key ..."},null,512),[[P,o.optionKey]]),o.optionKeyError?(n(),a("p",Se,i(o.optionKeyError),1)):b("",!0)]),e("label",Me,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result Value",-1)),q(e("input",{type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=s=>o.resultValue=s),placeholder:"Value ..."},null,512),[[P,o.resultValue]]),o.resultValueError?(n(),a("p",Fe,i(o.resultValueError),1)):b("",!0)])]),e("div",Ce,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),h(o.VueMultiselect,{modelValue:o.sampleTypesField,"onUpdate:modelValue":t[3]||(t[3]=s=>o.sampleTypesField=s),options:o.sampleTypes,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-primary"},null,8,["modelValue","options"]),o.sampleTypesError?(n(),a("p",Ae,i(o.sampleTypesError),1)):b("",!0)])]),t[11]||(t[11]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):b("",!0)],64)}const Le=te(me,[["render",De],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/services/ResultOptions.vue"]]);export{Le as default};
