import{i as k}from"./string-B8Puoq6M.js";import{i as y}from"./value-CDn2jncy.js";import{b as N,t as b,a as d,c as w}from"./ticks-yQcwDFE8.js";import{i as x}from"./init-Gi6I4Gst.js";import{e as p,a as A,b as R,f as F}from"./defaultLocale-D2nGpDRe.js";function I(n){return Math.max(0,-p(Math.abs(n)))}function P(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p(t)/3)))*3-p(Math.abs(n)))}function S(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,p(t)-p(n))+1}function j(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function z(n){return function(){return n}}function $(n){return+n}var v=[0,1];function h(n){return n}function M(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:z(isNaN(t)?NaN:.5)}function q(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function B(n,t,e){var r=n[0],o=n[1],i=t[0],a=t[1];return o<r?(r=M(o,r),i=e(a,i)):(r=M(r,o),i=e(i,a)),function(f){return i(r(f))}}function C(n,t,e){var r=Math.min(n.length,t.length)-1,o=new Array(r),i=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=M(n[a],n[a+1]),i[a]=e(t[a],t[a+1]);return function(f){var l=N(n,f,1,r)-1;return i[l](o[l](f))}}function D(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function E(){var n=v,t=v,e=y,r,o,i,a=h,f,l,c;function m(){var u=Math.min(n.length,t.length);return a!==h&&(a=q(n[0],n[u-1])),f=u>2?C:B,l=c=null,s}function s(u){return u==null||isNaN(u=+u)?i:(l||(l=f(n.map(r),t,e)))(r(a(u)))}return s.invert=function(u){return a(o((c||(c=f(t,n.map(r),k)))(u)))},s.domain=function(u){return arguments.length?(n=Array.from(u,$),m()):n.slice()},s.range=function(u){return arguments.length?(t=Array.from(u),m()):t.slice()},s.rangeRound=function(u){return t=Array.from(u),e=j,m()},s.clamp=function(u){return arguments.length?(a=u?!0:h,m()):a!==h},s.interpolate=function(u){return arguments.length?(e=u,m()):e},s.unknown=function(u){return arguments.length?(i=u,s):i},function(u,g){return r=u,o=g,m()}}function G(){return E()(h,h)}function H(n,t,e,r){var o=b(n,t,e),i;switch(r=A(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(i=P(o,a))&&(r.precision=i),R(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=S(o,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=I(o))&&(r.precision=i-(r.type==="%")*2);break}}return F(r)}function J(n){var t=n.domain;return n.ticks=function(e){var r=t();return d(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var o=t();return H(o[0],o[o.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),o=0,i=r.length-1,a=r[o],f=r[i],l,c,m=10;for(f<a&&(c=a,a=f,f=c,c=o,o=i,i=c);m-- >0;){if(c=w(a,f,e),c===l)return r[o]=a,r[i]=f,t(r);if(c>0)a=Math.floor(a/c)*c,f=Math.ceil(f/c)*c;else if(c<0)a=Math.ceil(a*c)/c,f=Math.floor(f*c)/c;else break;l=c}return n},n}function K(){var n=G();return n.copy=function(){return D(n,K())},x.apply(n,arguments),J(n)}export{D as a,G as c,K as l};
