const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5OmCQ1r.js","assets/index-DNLAO2yS.css"])))=>i.map(i=>d[i]);
import{a0 as T,f as U,t as V,a7 as x,g as R,a5 as B,h as O,a1 as j,a6 as L,_ as P,r as S,c as i,o as a,a as C,A as e,C as K,E as q,N as g,P as J,J as _,K as F,L as u,F as v,a9 as W,a2 as M,D as Y}from"./index-C5OmCQ1r.js";import{B as z,D as G}from"./analyses.mutations-COGCX6rV.js";import{u as H}from"./analysis-CQxuKvI2.js";import{u as Q}from"./setup-BMS7aX7t.js";const X=T({__name:"InterimFields",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(h,{expose:t}){t();const w=j(()=>L(()=>import("./index-C5OmCQ1r.js").then(s=>s.de),__vite__mapDeps([0,1]))),r=H(),m=Q(),{withClientMutation:c}=U(),l=h,{analysis:f}=V(l);let o=x(!1),p=x(""),n=R({});const b=x(!0);B(()=>l.analysisUid,(s,d)=>{}),m.fetchInstruments();const y=O(()=>m.getInstruments);function I(){n.key=+n.key;const s={...n,analysisUid:f?.value?.uid};c(z,{payload:s},"createAnalysisInterim").then(d=>r.addAnalysisInterim(d))}function k(){const s={...n};delete s.uid,delete s.__typename,c(G,{uid:n.uid,payload:s},"updateAnalysisInterim").then(d=>r.updateAnalysisInterim(d))}function D(s,d={}){b.value=s,o.value=!0,p.value=(s?"CREATE":"EDIT")+" ANALYSIS INTERIM",s?Object.assign(n,{key:null,value:null}):Object.assign(n,{...d})}function E(){b.value===!0&&I(),b.value===!1&&k(),o.value=!1}const A={modal:w,analysisStore:r,setupStore:m,withClientMutation:c,props:l,analysis:f,get showModal(){return o},set showModal(s){o=s},get formTitle(){return p},set formTitle(s){p=s},get form(){return n},set form(s){n=s},formAction:b,instruments:y,addAnalysisInterim:I,editAnalysisInterim:k,FormManager:D,saveForm:E,instrumentName:s=>{const d=y?.value?.findIndex(N=>N.uid===s);return y?.value[d]?.name||"unknown"}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),Z={class:"overflow-x-auto mt-4"},$={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},ee={class:"min-w-full"},te={class:"bg-card"},oe={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},re={class:"text-sm text-foreground"},se={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ne={class:"text-sm text-foreground"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},le={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},ie=["onClick"],ue={class:"text-lg font-bold text-foreground"},me={action:"post",class:"p-6 space-y-6"},ce={class:"space-y-4"},fe={class:"grid grid-cols-3 gap-4"},pe={class:"space-y-2"},be=["value"],ge={class:"space-y-2"},ye={class:"space-y-2"},xe={class:"pt-4"};function _e(h,t,w,r,m,c){const l=S("fel-button"),f=S("fel-heading");return a(),i(_,null,[C(f,{title:"Interim Fields"},{default:g(()=>[C(l,{onClick:t[0]||(t[0]=o=>r.FormManager(!0))},{default:g(()=>[...t[6]||(t[6]=[J("Add Interim Field",-1)])]),_:1})]),_:1}),e("div",Z,[e("div",$,[e("table",ee,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Interim Key"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Value"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",te,[(a(!0),i(_,null,F(r.analysis?.interims,o=>(a(),i("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",oe,[e("div",re,u(o?.key),1)]),e("td",se,[e("div",ne,u(o?.value),1)]),e("td",de,[e("div",ae,u(r.instrumentName(o?.instrumentUid)),1)]),e("td",le,[e("button",{onClick:p=>r.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ie)])]))),128))])])])]),r.showModal?(a(),K(r.modal,{key:0,onClose:t[5]||(t[5]=o=>r.showModal=!1),contentWidth:"w-2/4"},{header:g(()=>[e("h3",ue,u(r.formTitle),1)]),body:g(()=>[e("form",me,[e("div",ce,[e("div",fe,[e("label",pe,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),v(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r.form.instrumentUid=o)},[t[8]||(t[8]=e("option",{value:""},"Select Instrument",-1)),(a(!0),i(_,null,F(r.instruments,o=>(a(),i("option",{key:o?.uid,value:o.uid},u(o?.name),9,be))),128))],512),[[W,r.form.instrumentUid]])]),e("label",ge,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Interim",-1)),v(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r.form.key=o),placeholder:"Interim Key ..."},null,512),[[M,r.form.key]])]),e("label",ye,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result",-1)),v(e("input",{type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r.form.value=o),placeholder:"Result Value ..."},null,512),[[M,r.form.value]])])])]),e("div",xe,[e("button",{type:"button",onClick:t[4]||(t[4]=Y(o=>r.saveForm(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):q("",!0)],64)}const Ae=P(X,[["render",_e],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/InterimFields.vue"]]);export{Ae as default};
