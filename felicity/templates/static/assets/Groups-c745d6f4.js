import{P as C,e as G,h as w,Z as p,f as T,o as d,c,b as t,F as g,D as _,E as m,a2 as r,x as M,K as k,A as f,V as D,a4 as I,L as O,W as P,z as R,a7 as L,J as V,X as B,Y as F,ab as l,aG as U,aH as $,_ as j}from"./index-03a7f0eb.js";import{u as H}from"./user-5c2e3308.js";import"./_queries-175415ec.js";const z={class:"container w-full my-4"},K={class:"overflow-x-auto mt-4"},Y={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},W={class:"min-w-full"},J={class:"bg-white"},Q={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},X={class:"flex items-center"},Z={class:"text-sm leading-5 text-gray-800"},q={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ee={class:"text-sm leading-5 text-sky-800"},te={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},se=["onClick"],oe={action:"post",class:"p-1"},le={class:"grid grid-cols-2 gap-x-4 mb-4"},ne={class:"block col-span-2 mb-2"},re={class:"block col-span-2 mb-2"},ae=["size"],ie=["value"],de={for:"toggle",class:"text-xs text-gray-700 mr-4"},ue={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},pe=C({__name:"Groups",setup(ce){const A=B(()=>F(()=>import("./index-03a7f0eb.js").then(o=>o.cN),["assets/index-03a7f0eb.js","assets/index-81d3252e.css"])),v=[l.ADMINISTRATION,l.DASHBOARD,l.CLIENTS,l.PATIENTS,l.PATIENTS_COMPACT,l.SAMPLES,l.QC_SAMPLES,l.WORKSHEETS,l.NOTICE_MANAGER,l.BIO_BANKING,l.INVENTORY,l.REFERRAL,l.SCHEMES,l.DOCUMENT];let i=H();const{withClientMutation:y}=G();i.fetchGroupsAndPermissions();const E=w(()=>i.getGroups);p("permissions");let a=p(!1),x=p("");const b=p(!0);let n=T({});function h(o,e={}){b.value=o,a.value=!0,x.value=(o?"CREATE":"EDIT")+" ANALYSES PROFILE",o?Object.assign(n,{name:"",pages:[]}):Object.assign(n,{...e})}function N(){const o={...n},e=o.pages;o.pages=e.join(","),b.value===!0&&y(U,{payload:o},"createGroup").then(s=>i.addGroup(s)),b.value===!1&&y($,{uid:n?.uid,payload:{name:o.name,pages:o.pages}},"updateGroup").then(s=>i.updateGroup(s)),a.value=!1}const S=(o,e)=>o?.reduce(function(s,u){return(s[u[e]]=s[u[e]]||[]).push(u),s},{});return w(()=>Array.from(Object.entries(S(i.getPermissions,"target")))),(o,e)=>(d(),c(g,null,[t("div",z,[e[6]||(e[6]=t("hr",null,null,-1)),t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[0]||(e[0]=s=>h(!0))},"Add Group"),e[7]||(e[7]=t("hr",null,null,-1))]),e[14]||(e[14]=t("hr",null,null,-1)),t("div",K,[t("div",Y,[t("table",W,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Group Name "),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Access Pages "),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),t("tbody",J,[(d(!0),c(g,null,_(E.value,s=>(d(),c("tr",{key:s.uid},[t("td",Q,[t("div",X,[t("div",Z,m(s.name),1)])]),t("td",q,[t("div",ee,m(s.pages),1)]),t("td",te,[t("button",{onClick:u=>h(!1,s),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit ",8,se)])]))),128))])])])]),r(a)?(d(),M(r(A),{key:0,onClose:e[5]||(e[5]=s=>L(a)?a.value=!1:a=!1)},{header:k(()=>[t("h3",null,m(r(x)),1)]),body:k(()=>[t("form",oe,[t("div",le,[t("label",ne,[e[9]||(e[9]=t("span",{class:"text-gray-700"},"Group Name",-1)),f(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=s=>r(n).name=s),placeholder:"Name ..."},null,512),[[D,r(n).name]])]),t("label",re,[e[10]||(e[10]=t("span",{class:"text-gray-700"},"Pages",-1)),f(t("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":e[2]||(e[2]=s=>r(n).pages=s),class:"form-input mt-1 block w-full",multiple:"",size:v.length},[(d(),c(g,null,_(v,s=>t("option",{key:s,value:s},m(s),9,ie)),64))],8,ae),[[I,r(n).pages]])]),t("label",de,[e[12]||(e[12]=O("Active ")),t("div",ue,[f(t("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":e[3]||(e[3]=s=>r(n).active=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[P,r(n).active]]),e[11]||(e[11]=t("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))])])]),e[13]||(e[13]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[4]||(e[4]=R(s=>N(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):V("",!0)],64))}}),fe=j(pe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{fe as default};
