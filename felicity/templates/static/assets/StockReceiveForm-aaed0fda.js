import{d as Y,bt as Z,K as ee,aN as te,aK as se,r as N,o as v,c as m,C as le,t as o,f as l,b as e,e as i,as as b,i as n,g as C,F as P,E as F,v as _,P as E,w as oe,j as ae,_ as ie,M as ne,cs as ce,k as ue}from"./index-e62f5c21.js";import re from"./vue-multiselect.esm-b4ea8090.js";import{c as B,a as y,d as w,f as L,u as de,b as c}from"./array-4296cccc.js";import{R as pe}from"./inventory.mutations-a0cda30e.js";const ve=["inert"],me={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},_e=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Reveice Type",-1),we=e("option",{value:"null"},null,-1),fe=e("option",{value:"purchase"},"Purchased",-1),ge=e("option",{value:"pushed"},"Pushed",-1),ye=e("option",{value:"transfer_in"},"Transfer In",-1),he=[we,fe,ge,ye],be={class:"text-orange-600 w-4/12"},ke={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},xe=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Stock Item",-1),Re={class:"w-full col-span-4"},Se={class:"text-orange-600 w-4/12"},Ue={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ve=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Supplier",-1),De=e("option",{value:"null"},null,-1),qe=["value"],Pe={class:"text-orange-600 w-4/12"},Fe={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ie=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Unit (Single)",-1),Te=e("option",{value:"null"},null,-1),Ne=["value"],Ce={class:"text-orange-600 w-4/12"},Ee={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Be=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Lot Number",-1),Le={class:"w-full col-span-4"},Ke={class:"text-orange-600 w-4/12"},Me={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ae=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Packages Received",-1),Qe={class:"w-full col-span-4"},Oe={class:"text-orange-600 w-4/12"},$e={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},je=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Package Factor",-1),Ge={class:"w-full col-span-4"},ze={class:"text-orange-600 w-4/12"},He={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Je=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Singles Received",-1),We={class:"w-full col-span-4"},Xe={class:"text-orange-600 w-4/12"},Ye={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},Ze=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Quantity Received",-1),et={class:"w-full col-span-4"},tt={class:"text-orange-600 w-4/12"},st={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},lt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Expiry Date",-1),ot={class:"w-full col-span-4"},at={class:"text-orange-600 w-4/12"},it={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},nt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received Date",-1),ct={class:"w-full col-span-4"},ut={class:"text-orange-600 w-4/12"},rt={class:"mt-2 grid grid-cols-6 whitespace-nowrap w-full"},dt=e("span",{class:"col-span-2 text-gray-700 w-4/12"},"Received By",-1),pt=e("option",{value:"null"},null,-1),vt=["value"],mt={class:"text-orange-600 w-4/12"},_t=e("hr",{class:"my-4"},null,-1),wt={type:"submit",class:"-mb-4 w-1/5 border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"},ft=Y({__name:"StockReceiveForm",emits:["close"],setup(gt,{emit:K}){const M=ae(()=>ie(()=>import("./FelLoadingMessage-b4229f94.js"),["assets/FelLoadingMessage-b4229f94.js","assets/index-e62f5c21.js","assets/index-332ec99e.css"])),A=K,Q=Z(),O=ee();te();const $=se(),{withClientMutation:j,withClientQuery:G}=ne(),I=N([]),f=N(!1),z=B({stockItemVariant:B().required("StockItem is required"),supplierUid:y().required(),unitUid:y().required(),lotNumber:y().required(),unitPrice:w().nullable().default(0),totalPrice:w().nullable().default(0),singlesReceived:w().required().default(0),packagesReceived:w().required().default(0),packageFactor:w().required().default(1),quantityReceived:w().default(0),receiptType:y().required().default("purchase"),receiptDate:L().required("Date received is required"),receiptByUid:y().required("Receiver is required"),expiryDate:L().required("Date expiring is required")}),{handleSubmit:H,errors:a}=de({validationSchema:z,initialValues:{singlesReceived:0,packagesReceived:0,packageFactor:1,quantityReceived:0}}),{value:h}=c("stockItemVariant"),{value:k}=c("supplierUid"),{value:x}=c("unitUid"),{value:R}=c("lotNumber"),{value:d}=c("totalPrice"),{value:u}=c("packagesReceived"),{value:g}=c("packageFactor"),{value:p}=c("quantityReceived"),{value:S}=c("receiptType"),{value:U}=c("receiptDate"),{value:V}=c("receiptByUid"),{value:D}=c("expiryDate"),T=H(r=>J(r));function J(r){f.value=!0;const s={...r,productUid:h?.value?.uid,unitPrice:0,totalPrice:0};delete s.stockItemVariant,j(pe,{payload:s},"createStockReceipt").then(t=>{console.log(t)}).finally(()=>{f.value=!1,A("close")})}const W=async r=>{r.length>3&&G(ce,{first:50,after:"",text:r,sortBy:["name"]},"stockProductAll").then(t=>{I.value=t?.items})},X=(r,s)=>`${r.stockItem?.name} - ${r.name}`,q=()=>{!d.value&&!u.value&&(p.value=0),!d.value&&u.value&&(p.value=u.value*g.value),d.value&&!u.value&&(p.value=d.value),u.value||(u.value=0),p.value=d.value+u.value*g.value};return(r,s)=>(v(),m("form",{onSubmit:s[15]||(s[15]=oe((...t)=>l(T)&&l(T)(...t),["prevent"])),class:"rounded-sm py-2",autocomplete:"off",inert:f.value},[le(o(l(a))+" ",1),e("label",me,[_e,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[0]||(s[0]=t=>n(S)?S.value=t:null)},[...he],512),[[b,l(S)]])]),e("div",be,o(l(a).receiptType),1),e("label",ke,[xe,e("div",Re,[C(l(re),{placeholder:"Select a Stock Item",modelValue:l(h),"onUpdate:modelValue":s[1]||(s[1]=t=>n(h)?h.value=t:null),options:I.value,searchable:!0,"track-by":"uid",customLabel:X,onSearchChange:W},null,8,["modelValue","options"]),e("div",Se,o(l(a).stockItemVariantUid),1)])]),e("label",Ue,[Ve,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=t=>n(k)?k.value=t:null)},[De,(v(!0),m(P,null,F(l(O).suppliers,t=>(v(),m("option",{key:t.uid,value:t.uid},o(t.name),9,qe))),128))],512),[[b,l(k)]])]),e("div",Pe,o(l(a).supplierUid),1),e("label",Fe,[Ie,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[3]||(s[3]=t=>n(x)?x.value=t:null)},[Te,(v(!0),m(P,null,F(l(Q).units,t=>(v(),m("option",{key:t.uid,value:t.uid},o(t.name),9,Ne))),128))],512),[[b,l(x)]])]),e("div",Ce,o(l(a).unitUid),1),e("label",Ee,[Be,e("div",Le,[i(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":s[4]||(s[4]=t=>n(R)?R.value=t:null),placeholder:"Lot Number..."},null,512),[[_,l(R)]]),e("div",Ke,o(l(a).lotNumber),1)])]),e("label",Me,[Ae,e("div",Qe,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[5]||(s[5]=t=>n(u)?u.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[6]||(s[6]=t=>t.target.select())},null,544),[[_,l(u)]]),e("div",Oe,o(l(a).packagesReceived),1)])]),e("label",$e,[je,e("div",Ge,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[7]||(s[7]=t=>n(g)?g.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[8]||(s[8]=t=>t.target.select())},null,544),[[_,l(g)]]),e("div",ze,o(l(a).packageFactor),1)])]),e("label",He,[Je,e("div",We,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[9]||(s[9]=t=>n(d)?d.value=t:null),placeholder:"Quantity Received...",onKeyup:q,onFocus:s[10]||(s[10]=t=>t.target.select())},null,544),[[_,l(d)]]),e("div",Xe,o(l(a).singlesReceived),1)])]),e("label",Ye,[Ze,e("div",et,[i(e("input",{class:"form-input mt-1 block w-full",type:"number","onUpdate:modelValue":s[11]||(s[11]=t=>n(p)?p.value=t:null),disabled:""},null,512),[[_,l(p)]]),e("div",tt,o(l(a).quantityReceived),1)])]),e("label",st,[lt,e("div",ot,[i(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[12]||(s[12]=t=>n(D)?D.value=t:null),placeholder:"Expiry Date"},null,512),[[_,l(D)]]),e("div",at,o(l(a).expiryDate),1)])]),e("label",it,[nt,e("div",ct,[i(e("input",{class:"form-input mt-1 w-full",type:"date","onUpdate:modelValue":s[13]||(s[13]=t=>n(U)?U.value=t:null),placeholder:"Expiry Date"},null,512),[[_,l(U)]]),e("div",ut,o(l(a).receiptDate),1)])]),e("label",rt,[dt,i(e("select",{class:"col-span-4 form-select ml-1 mt-1 w-full","onUpdate:modelValue":s[14]||(s[14]=t=>n(V)?V.value=t:null)},[pt,(v(!0),m(P,null,F(l($).users,t=>(v(),m("option",{key:t.uid,value:t.uid},o(t.firstName)+" "+o(t.lastName),9,vt))),128))],512),[[b,l(V)]])]),e("div",mt,o(l(a).receiptByUid),1),_t,i(e("button",wt," Save ",512),[[E,!f.value]]),i(C(l(M),{message:"Adding Inventory ..."},null,512),[[E,f.value]])],40,ve))}}),xt=ue(ft,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/inventory/StockReceiveForm.vue"]]);export{xt as default};
