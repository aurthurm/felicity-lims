const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5OmCQ1r.js","assets/index-DNLAO2yS.css"])))=>i.map(i=>d[i]);
import{a0 as O,f as V,t as R,a7 as h,g as j,a5 as B,h as U,a1 as L,a6 as P,_ as q,r as N,c as i,o as d,a as I,A as e,C as G,E as J,N as g,P as K,J as x,K as w,L as u,F as C,a9 as T,a2 as W,D as Y}from"./index-C5OmCQ1r.js";import{F as z,G as H}from"./analyses.mutations-COGCX6rV.js";import{u as Q}from"./analysis-CQxuKvI2.js";import{u as X}from"./setup-BMS7aX7t.js";const Z=O({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(F,{expose:t}){t();const A=L(()=>P(()=>import("./index-C5OmCQ1r.js").then(n=>n.de),__vite__mapDeps([0,1]))),r=Q(),l=X(),{withClientMutation:m}=V(),c=F,{analysis:f}=R(c);let o=h(!1),p=h(""),a=j({});const b=h(!0);B(()=>c.analysisUid,(n,s)=>{}),l.fetchInstruments();const y=U(()=>l.getInstruments);l.fetchMethods();const _=U(()=>l.getMethods);function k(){const n={...a,analysisUid:f?.value?.uid};m(z,{payload:n},"createAnalysisCorrectionFactor").then(s=>r.AddAnalysisCorrectionFactor(s))}function M(){const n={...a};delete n.uid,delete n.__typename,m(H,{uid:a.uid,payload:n},"updateAnalysisCorrectionFactor").then(s=>r.updateAnalysisCorrectionFactor(s))}function E(n,s={}){b.value=n,o.value=!0,p.value=(n?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",n?Object.assign(a,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(a,{...s})}function D(){b.value===!0&&k(),b.value===!1&&M(),o.value=!1}const S={modal:A,analysisStore:r,setupStore:l,withClientMutation:m,props:c,analysis:f,get showModal(){return o},set showModal(n){o=n},get formTitle(){return p},set formTitle(n){p=n},get form(){return a},set form(n){a=n},formAction:b,instruments:y,methods:_,addAnalysisCorrectionFactor:k,editAnalysisCorrectionFactor:M,FormManager:E,saveForm:D,instrumentName:n=>{const s=y?.value?.findIndex(v=>v.uid===n);return y?.value[s]?.name||"unknown"},methodName:n=>{const s=_?.value?.findIndex(v=>v.uid===n);return _?.value[s]?.name||"unknown"}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),$={class:"overflow-x-auto mt-4"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},te={class:"min-w-full"},oe={class:"bg-card"},re={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ne={class:"text-sm text-foreground"},se={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},de={class:"text-sm text-foreground"},ae={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ie={class:"text-sm text-foreground"},le={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},ue=["onClick"],ce={class:"text-lg font-bold text-foreground"},me={action:"post",class:"p-6 space-y-6"},fe={class:"space-y-4"},pe={class:"grid grid-cols-3 gap-4"},be={class:"space-y-2"},ge=["value"],xe={class:"space-y-2"},ye=["value"],_e={class:"space-y-2"},ve={class:"pt-4"};function he(F,t,A,r,l,m){const c=N("fel-button"),f=N("fel-heading");return d(),i(x,null,[I(f,{title:"Correction Factors"},{default:g(()=>[I(c,{onClick:t[0]||(t[0]=o=>r.FormManager(!0))},{default:g(()=>[...t[6]||(t[6]=[K("Add Correction Factor",-1)])]),_:1})]),_:1}),e("div",$,[e("div",ee,[e("table",te,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Factor"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",oe,[(d(!0),i(x,null,w(r.analysis?.correctionFactors,o=>(d(),i("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",re,[e("div",ne,u(r.instrumentName(o?.instrumentUid)),1)]),e("td",se,[e("div",de,u(r.methodName(o?.methodUid)),1)]),e("td",ae,[e("div",ie,u(o.factor),1)]),e("td",le,[e("button",{onClick:p=>r.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ue)])]))),128))])])])]),r.showModal?(d(),G(r.modal,{key:0,onClose:t[5]||(t[5]=o=>r.showModal=!1),contentWidth:"w-2/4"},{header:g(()=>[e("h3",ce,u(r.formTitle),1)]),body:g(()=>[e("form",me,[e("div",fe,[e("div",pe,[e("label",be,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),C(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r.form.instrumentUid=o)},[t[8]||(t[8]=e("option",{value:""},"Select Instrument",-1)),(d(!0),i(x,null,w(r.instruments,o=>(d(),i("option",{key:o?.uid,value:o.uid},u(o?.name),9,ge))),128))],512),[[T,r.form.instrumentUid]])]),e("label",xe,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),C(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r.form.methodUid=o)},[t[10]||(t[10]=e("option",{value:""},"Select Method",-1)),(d(!0),i(x,null,w(r.methods,o=>(d(),i("option",{key:o?.uid,value:o.uid},u(o?.name),9,ye))),128))],512),[[T,r.form.methodUid]])]),e("label",_e,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Factor",-1)),C(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r.form.factor=o),placeholder:"Factor ..."},null,512),[[W,r.form.factor]])])])]),e("div",ve,[e("button",{type:"button",onClick:t[4]||(t[4]=Y(o=>r.saveForm(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):J("",!0)],64)}const Se=q(Z,[["render",he],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/CorrectionFactor.vue"]]);export{Se as default};
