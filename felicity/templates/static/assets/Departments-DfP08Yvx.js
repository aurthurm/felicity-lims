import{Y as B,u as S,a0 as F,a7 as I,b4 as H,b5 as N,a3 as V,_ as A,r as s,c as T,o as D,z as m,A as w,C as E,a as o,K as a,M as p,F as C,H as P,I as M,B as L,a4 as R}from"./index-OdhKCqIc.js";import{c as q,a as U,u as j,F as z}from"./index.esm-BfHj8iGm.js";import{I as K}from"./Input-BEm5S0CJ.js";import{F as O,a as Y,b as G}from"./FormMessage-CgXFMXx9.js";import{F as J}from"./FormLabel-DxP9wnWS.js";import{u as Q}from"./setup-BcFG_bXr.js";import{P as W}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const X=B({name:"DepartmentsView",__name:"Departments",setup(k,{expose:t}){t();const d=Q(),{withClientMutation:e}=S();let c=F(!1),b=F("");const i=F(!0),l=F(null),g=q({name:U().required("Department name is required")}),{handleSubmit:f,resetForm:_,setValues:v}=j({validationSchema:g,initialValues:{name:""}});d.fetchDepartments({});const x=I(()=>d.getDepartments);function r(n,u){i.value=n,c.value=!0,b.value=(n?"CREATE":"EDIT")+" Department",n?(l.value=null,_({values:{name:""}})):(l.value=u?.uid??null,v({name:u?.name??""}))}const y=f(n=>{if(i.value===!0)e(H,{payload:{name:n.name}},"createDepartment").then(u=>d.addDepartment(u));else{if(!l.value)return;e(N,{uid:l.value,payload:{name:n.name}},"updateDepartment").then(u=>d.updateDepartment(u))}c.value=!1}),h={setupStore:d,withClientMutation:e,get showModal(){return c},set showModal(n){c=n},get formTitle(){return b},set formTitle(n){b=n},formAction:i,currentUid:l,formSchema:g,handleSubmit:f,resetForm:_,setValues:v,departments:x,FormManager:r,saveForm:y,get Button(){return V},get Input(){return K},get FormControl(){return G},get FormField(){return z},get FormItem(){return Y},get FormLabel(){return J},get FormMessage(){return O},PageHeading:W};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),Z={class:"space-y-6"},$={class:"rounded-md border bg-card"},ee={class:"relative w-full overflow-auto"},te=["onClick"],oe={class:"text-lg font-semibold text-foreground"};function ae(k,t,d,e,c,b){const i=s("TableHead"),l=s("TableRow"),g=s("TableHeader"),f=s("TableCell"),_=s("TableBody"),v=s("Table"),x=s("Modal");return D(),T(C,null,[m("div",Z,[o(e.PageHeading,{title:"Departments"},{default:a(()=>[o(e.Button,{onClick:t[0]||(t[0]=r=>e.FormManager(!0,null))},{default:a(()=>[...t[3]||(t[3]=[p("Add Department",-1)])]),_:1})]),_:1}),m("div",$,[m("div",ee,[o(v,{class:"w-full caption-bottom text-sm"},{default:a(()=>[o(g,{class:"[&_tr]:border-b"},{default:a(()=>[o(l,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[o(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...t[4]||(t[4]=[p("Name",-1)])]),_:1}),o(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"})]),_:1})]),_:1}),o(_,{class:"[&_tr:last-child]:border-0"},{default:a(()=>[(D(!0),T(C,null,P(e.departments,r=>(D(),w(l,{key:r?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[o(f,{class:"px-4 py-2 align-middle"},{default:a(()=>[p(M(r?.name),1)]),_:2},1024),o(f,{class:"px-4 py-2 align-middle text-right"},{default:a(()=>[m("button",{onClick:y=>e.FormManager(!1,r),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,te)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),e.showModal?(D(),w(x,{key:0,onClose:t[2]||(t[2]=r=>e.showModal=!1)},{header:a(()=>[m("h3",oe,M(e.formTitle),1)]),body:a(()=>[m("form",{class:"space-y-6",onSubmit:t[1]||(t[1]=L((...r)=>e.saveForm&&e.saveForm(...r),["prevent"]))},[o(e.FormField,{name:"name"},{default:a(({componentField:r})=>[o(e.FormItem,null,{default:a(()=>[o(e.FormLabel,null,{default:a(()=>[...t[5]||(t[5]=[p("Department Name",-1)])]),_:1}),o(e.FormControl,null,{default:a(()=>[o(e.Input,R(r,{placeholder:"Name ..."}),null,16)]),_:2},1024),o(e.FormMessage)]),_:2},1024)]),_:1}),t[7]||(t[7]=m("hr",{class:"border-border"},null,-1)),o(e.Button,{type:"submit",class:"w-full"},{default:a(()=>[...t[6]||(t[6]=[p("Save Form",-1)])]),_:1})],32)]),_:1})):E("",!0)],64)}const ce=A(X,[["render",ae],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/laboratory/Departments.vue"]]);export{ce as default};
