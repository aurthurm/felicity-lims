import{S as f,f as g,a0 as h,i as c,a as t,r as n,M as o,Z as a,$ as i}from"./index-9a11e11f.js";import{u as y,A as v}from"./inventory-841fbf67.js";import{a as x}from"./storage-3144c671.js";import{u as b}from"./setup-59dc1a93.js";import{u as k}from"./user-373e7a59.js";import"./_queries-4ad3f050.js";const S=a(()=>i(()=>import("./InvAdjustments-7124c18a.js"),["assets/InvAdjustments-7124c18a.js","assets/index-9a11e11f.js","assets/index-f2df9813.css","assets/inventory-841fbf67.js"])),w=a(()=>i(()=>import("./InvListing-3c0098d8.js"),["assets/InvListing-3c0098d8.js","assets/index-9a11e11f.js","assets/index-f2df9813.css","assets/inventory-841fbf67.js","assets/index-7eeb4507.js"])),_=a(()=>i(()=>import("./InvOrders-f79f1e5c.js"),["assets/InvOrders-f79f1e5c.js","assets/index-9a11e11f.js","assets/index-f2df9813.css","assets/inventory-841fbf67.js","assets/setup-59dc1a93.js","assets/_queries-4ad3f050.js","assets/constants-fe8e163b.js"])),V=f({name:"inventory-home",setup(){const{withClientMutation:r}=g(),e=y(),d=b(),l=x(),m=k();e.fetchItems({first:1e4,after:"",text:"",sortBy:["-uid"]}),m.fetchUsers({}),d.fetchSuppliers(),d.fetchDepartments({}),e.fetchCategories(),e.fetchHazards(),l.fetchStoreRooms(),e.fetchUnits();const u=h(!1);return{tabs:c(()=>[{id:"orders",label:"orders",component:t(_,null,null)},{id:"products",label:"products",component:t(w,null,null)},{id:"ledger",label:"ledger",component:t(S,null,null)}]),basket:c(()=>e.getBasket),viewBasket:u,inventoryStore:e,createOrder:()=>{const p=e.getBasket;r(v,{payload:{orderProducts:p.map(s=>({productUid:s.product.uid,stockLotUid:s.stockLotUid,quantity:s.quantity,remarks:""})),departmentUid:void 0}},"createStockOrder").then(s=>{e.addStockOrder(s?.stockOrder),e.clearBasket(),u.value=!1})}}},render(){return t("div",{class:"space-y-4"},[t(n("fel-heading"),{title:"Inventory Management"},null),t(n("fel-tabs"),{tabs:this.tabs,"initial-tab":"listing",class:"rounded-lg"},null),t(n("fel-drawer"),{modelValue:this.viewBasket,"onUpdate:modelValue":r=>this.viewBasket=r,title:"Order Basket",class:"w-96"},{default:()=>[t("div",{class:"space-y-4"},[t("div",{class:"flex justify-between items-center"},[t("h3",{class:"text-lg font-medium text-foreground"},[o("Products")]),t("button",{class:"px-3 py-1.5 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200",onClick:()=>this.createOrder()},[o("Submit Order")])]),t("div",{class:"overflow-hidden shadow ring-1 ring-border ring-opacity-5 rounded-lg"},[t("table",{class:"min-w-full divide-y divide-border"},[t("thead",{class:"bg-muted"},[t("tr",null,[t("th",{class:"px-3 py-3.5 text-left text-sm font-medium text-foreground"},[o("Product")]),t("th",{class:"px-3 py-3.5 text-right text-sm font-medium text-foreground"},[o("Quantity")]),t("th",{class:"px-3 py-3.5 text-right text-sm font-medium text-foreground"},[o("Actions")])])]),t("tbody",{class:"divide-y divide-border bg-background"},[this.basket.map(r=>t("tr",{key:r.product.uid},[t("td",{class:"whitespace-nowrap px-3 py-4 text-sm text-foreground"},[r.product.name]),t("td",{class:"whitespace-nowrap px-3 py-4 text-sm text-right text-foreground"},[r.quantity]),t("td",{class:"whitespace-nowrap px-3 py-4 text-sm text-right"},[t("button",{class:"text-destructive hover:text-destructive/80 transition-colors duration-200",onClick:()=>this.inventoryStore.removeFromBasket(r.product.uid)},[o("Remove")])])]))])])])])]})])}});export{V as InventoryHome,V as default};
