import{V as P,f as Z,a1 as x,h as q,i as w,r as b,o as n,c as l,O as e,a as C,M as g,N as M,L as i,F as p,H as v,C as V,a4 as h,a6 as r,J as d,ae as N,D as _,Z as G,b as K,z as Q,Y as $,a3 as W,_ as X}from"./index-0a787601.js";import{l as ee,m as te}from"./analyses.mutations-7648569c.js";import{u as se}from"./setup-189b3c8c.js";import{u as oe}from"./analysis-3bf6dc10.js";import"./_queries-a9525aa1.js";const ne={class:"space-y-6"},le={class:"grid grid-cols-12 gap-6"},re={class:"col-span-3"},ae={class:"rounded-lg border border-border bg-card"},ie={class:"overflow-y-auto max-h-[540px] p-2"},de={class:"space-y-1"},ue=["onClick"],ce={class:"flex items-center justify-between"},pe={class:"text-sm font-medium"},me={key:0,class:"text-xs text-muted-foreground"},fe={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},ge={key:0,class:"col-span-9"},ye={class:"space-y-6"},ve={class:"rounded-lg border border-border bg-card p-6"},xe={class:"flex items-center justify-between"},be={class:"space-y-1"},_e={class:"text-xl font-semibold text-foreground"},he={key:0,class:"text-sm text-muted-foreground"},ke={class:"flex items-center space-x-2"},Te={class:"border-b border-border"},Ae={class:"flex space-x-2"},we=["onClick"],Ce={class:"rounded-lg border border-border bg-card"},Se={class:"p-6"},Ee={key:0},Ue={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},De={class:"grid grid-cols-6 gap-2 w-full"},Me={class:"flex-grow p-1"},Ve={class:h(["font-medium text-gray-500 hover:text-gray-700",{"text-gray-700 font-medium":!1}])},Ne=["id","onUpdate:modelValue"],$e=["for"],je={class:"text-xl font-semibold text-foreground"},Le={class:"space-y-4"},ze={class:"space-y-2"},Be={class:"space-y-2"},Fe=["value"],Oe={class:"space-y-2"},He=P({__name:"AnalysesTemplates",setup(Re){const m=oe(),j=se(),{withClientMutation:S}=Z();let y=x("analyses-services");const L=["analyses-services"];let f=x(!1),E=x("");const k=x(!0);let o=q({});const z=w(()=>j.getDepartments);m.fetchAnalysesServices({}),m.fetchAnalysesTemplates();const T=w(()=>m.getAnalysesServices),B=w(()=>m.getAnalysesTemplates);function F(){const a={name:o.name,description:o.description,departmentUid:o.departmentUid};S(ee,{payload:a},"createAnalysisTemplate").then(t=>m.addAnalysisTemplate(t))}function U(){const a={name:o.name,description:o.description,departmentUid:o.departmentUid,active:o.active,services:o.analyses?.map(t=>t.uid)};S(te,{uid:o.uid,payload:a},"updateAnalysisTemplate").then(t=>m.updateAnalysesTemplate(t))}function O(a){Object.assign(o,{...a}),T.value?.forEach(t=>{t[1].forEach(u=>{u.checked=!1,a.analyses?.some(A=>A.uid===u.uid)&&(u.checked=!0)})})}function H(){const a=[];T.value?.forEach(t=>{t[1].forEach(u=>{u.checked&&a.push(u)})}),o.analyses=a,U()}function D(a,t={}){k.value=a,f.value=!0,E.value=(a?"CREATE":"EDIT")+" ANALYSES TEMPLATE",a?Object.assign(o,{}):Object.assign(o,{...t})}function R(){k.value===!0&&F(),k.value===!1&&U(),f.value=!1}return(a,t)=>{const u=b("fel-button"),A=b("fel-heading"),Y=b("fel-accordion"),I=b("fel-modal");return n(),l(p,null,[e("div",ne,[C(A,{title:"Analyses Templates"},{default:g(()=>[C(u,{onClick:t[0]||(t[0]=s=>D(!0))},{default:g(()=>t[7]||(t[7]=[M("Add Analyses Template")])),_:1})]),_:1}),e("div",le,[i(" Templates List "),e("section",re,[e("div",ae,[t[8]||(t[8]=e("div",{class:"p-4 border-b border-border"},[e("h3",{class:"text-sm font-medium text-muted-foreground"},"Templates")],-1)),e("div",ie,[e("ul",de,[(n(!0),l(p,null,v(B.value,s=>(n(),l("li",{key:s.uid,onClick:V(c=>O(s),["prevent","stop"]),class:h(["rounded-md p-2 cursor-pointer transition-colors duration-200",s?.uid===r(o)?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[e("div",ce,[e("span",pe,d(s?.name),1),s?.department?.name?(n(),l("span",me,d(s?.department?.name),1)):i("v-if",!0)]),s?.description?(n(),l("p",fe,d(s?.description),1)):i("v-if",!0)],10,ue))),128))])])])]),i(" Template Details "),r(o)?.uid!==void 0?(n(),l("section",ge,[e("div",ye,[i(" Header "),e("div",ve,[e("div",xe,[e("div",be,[e("h2",_e,d(r(o)?.name),1),r(o)?.description?(n(),l("p",he,d(r(o)?.description),1)):i("v-if",!0)]),e("div",ke,[e("button",{onClick:t[1]||(t[1]=s=>D(!1)),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},t[9]||(t[9]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]))])])]),i(" Tabs "),e("nav",Te,[e("div",Ae,[(n(),l(p,null,v(L,s=>e("button",{key:s,class:h(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r(y)===s?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:c=>N(y)?y.value=s:y=s},d(s),11,we)),64))])]),i(" Content "),e("div",Ce,[e("div",Se,[r(y)==="analyses-services"?(n(),l("div",Ee,[t[11]||(t[11]=e("h3",null,"Analyses",-1)),t[12]||(t[12]=e("hr",null,null,-1)),e("section",Ue,[e("div",De,[(n(!0),l(p,null,v(T.value,s=>(n(),l("div",{class:"col-span-2",key:s[0]},[C(Y,null,{title:g(()=>[M(d(s[0]),1)]),body:g(()=>[e("div",null,[e("ul",null,[(n(!0),l(p,null,v(s[1],c=>(n(),l("li",{key:c?.uid,class:h(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]])},[e("div",Me,[e("div",Ve,[_(e("input",{type:"checkbox",id:`toggle-${c?.uid}`,class:"form-control","onUpdate:modelValue":J=>c.checked=J},null,8,Ne),[[G,c.checked]]),e("label",{for:`toggle-${c?.uid}`,class:"text-gray-700 ml-4"},d(c?.name),9,$e)])]),t[10]||(t[10]=e("hr",null,null,-1))]))),128))])])]),_:2},1024)]))),128))]),e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:t[2]||(t[2]=s=>H())}," Update Template ")])])):i("v-if",!0)])])])])):(n(),l(p,{key:1},[i(" Empty State "),t[13]||(t[13]=K('<section class="col-span-9"><div class="rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"><div class="text-4xl text-muted-foreground">ðŸ“‹</div><h3 class="text-lg font-medium text-foreground">No Template Selected</h3><p class="text-sm text-muted-foreground">Select a template from the list to view its details</p></div></section>',1))],2112))])]),i(" Template Form Modal "),r(f)?(n(),Q(I,{key:0,onClose:t[6]||(t[6]=s=>N(f)?f.value=!1:f=!1)},{header:g(()=>[e("h3",je,d(r(E)),1)]),body:g(()=>[e("form",{onSubmit:V(R,["prevent"]),class:"p-6 space-y-6"},[e("div",Le,[e("label",ze,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Template Name",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(o).name=s),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter template name"},null,512),[[$,r(o).name]])]),e("label",Be,[t[16]||(t[16]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(o).departmentUid=s),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[15]||(t[15]=e("option",{value:""},"Select department",-1)),(n(!0),l(p,null,v(z.value,s=>(n(),l("option",{key:s.uid,value:s.uid},d(s.name),9,Fe))),128))],512),[[W,r(o).departmentUid]])]),e("label",Oe,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(o).description=s),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter template description"},null,512),[[$,r(o).description]])])]),t[18]||(t[18]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):i("v-if",!0)],64)}}}),qe=X(He,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesTemplates.vue"]]);export{qe as default};
