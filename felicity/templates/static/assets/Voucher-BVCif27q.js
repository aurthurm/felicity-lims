const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VoucherCodes-C9ixQLf-.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/billing.mutations-BKsnFCTJ.js","assets/billing-COaJ61t1.js","assets/billing.queries-CxKPIhZs.js","assets/index.esm-BfHj8iGm.js","assets/Input-BEm5S0CJ.js","assets/Spinner-Bl8RfjFA.js","assets/FormMessage-CgXFMXx9.js","assets/FormLabel-DxP9wnWS.js","assets/Label-CS46LzLb.js","assets/VoucherCodes-CAQ3oOox.css"])))=>i.map(i=>d[i]);
import{Y as A,u as E,aB as R,ah as T,a0 as z,a5 as H,a6 as K,aM as W,a3 as G,_ as J,r as P,aF as k,c as m,o as i,a as t,z as r,A as L,C as S,K as a,M as d,D as x,F as Q,H as X,I as l,N as Z,B as $,a4 as g,aK as I,aL as O}from"./index-OdhKCqIc.js";import{A as ee,d as te}from"./billing.mutations-BKsnFCTJ.js";import{u as oe}from"./billing-COaJ61t1.js";import{c as se,f as B,a as F,d as re,g as N,u as ae,F as ne}from"./index.esm-BfHj8iGm.js";import{f as Y}from"./index-CXV6PIcj.js";import{I as le}from"./Input-BEm5S0CJ.js";import{S as ie}from"./Spinner-Bl8RfjFA.js";import{F as de,a as ue,b as ce}from"./FormMessage-CgXFMXx9.js";import{F as me}from"./FormLabel-DxP9wnWS.js";import{P as fe}from"./PageHeading-Czi_4opS.js";import"./billing.queries-CxKPIhZs.js";import"./Label-CS46LzLb.js";const _e=A({name:"VoucherView",__name:"Voucher",setup(j,{expose:o}){o();const p=H(()=>K(()=>import("./VoucherCodes-C9ixQLf-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),{withClientMutation:e}=E();let u=oe();const{vouchers:y,fetchingVouchers:h}=R(u);T(()=>{u.fetchVouchers()});let c=z(!1);const f=se({uid:F().nullable(),name:F().required("Voucher Name is Required"),startDate:N().required("Start Date is Required"),endDate:N().required("End Date is Required"),usageLimit:re().required("Usage Limit is Required"),used:F().nullable(),oncePerCustomer:B().default(!0),oncePerOrder:B().default(!0)}),{handleSubmit:_,setFieldValue:s,values:V}=ae({validationSchema:f,initialValues:{oncePerCustomer:!0,oncePerOrder:!0}}),q=_(n=>{n.uid||D(n),n.uid&&w(n)});let C=n=>{s("uid",n.uid),s("name",n.name),s("startDate",Y(n.startDate,"DD/MM/YYYY")),s("endDate",Y(n.endDate,"DD/MM/YYYY")),s("usageLimit",n.usageLimit),s("used",n.used),s("oncePerCustomer",n.oncePerCustomer),s("oncePerOrder",n.oncePerOrder)},v=()=>{s("uid",void 0),s("name",void 0),s("startDate",void 0),s("endDate",void 0),s("usageLimit",void 0),s("used",void 0),s("oncePerCustomer",!0),s("oncePerOrder",!0)};const U=()=>{v(),c.value=!0},D=n=>{delete n.uid,e(ee,{payload:n},"createVoucher").then(b=>u.addVoucher(b)).finally(()=>c.value=!1)},w=n=>{delete n.uid,delete n.used,e(te,{uid:uid?.value,payload:n},"updateVoucher").then(b=>u.updateVoucher(b)).finally(()=>c.value=!1)},M={VoucherCodes:p,withClientMutation:e,get billingStore(){return u},set billingStore(n){u=n},vouchers:y,fetchingVouchers:h,get showModal(){return c},set showModal(n){c=n},voucherSchema:f,handleSubmit:_,setFieldValue:s,values:V,submitVoucherForm:q,get selectVoucher(){return C},set selectVoucher(n){C=n},get setVoucherToNull(){return v},set setVoucherToNull(n){v=n},newVoucher:U,addVoucher:D,updateVoucher:w,get Button(){return G},get Checkbox(){return W},get Input(){return le},get Spinner(){return ie},get FormControl(){return ce},get FormField(){return ne},get FormItem(){return ue},get FormLabel(){return me},get FormMessage(){return de},PageHeading:fe};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),ge={class:"space-y-6"},he={class:"rounded-lg border border-border bg-card p-6"},ve={class:"grid grid-cols-12 gap-6"},be={initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-3 overflow-y-auto overscroll-contain voucher-scroll"},xe={key:0,class:"rounded-lg border border-border bg-card p-4"},Fe={class:"inline-flex items-center gap-2"},pe={key:1,class:"space-y-2"},ye={class:"grow"},Ve={class:"flex justify-between items-center"},Ce={class:"font-medium text-foreground"},De={class:"text-sm text-muted-foreground"},we={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-9 space-y-6"},Me={class:"rounded-lg border border-border bg-card p-6"},Pe={class:"flex justify-between items-center mb-4"},ke={class:"text-lg font-semibold text-foreground"},Le={class:"grid grid-cols-3 gap-8"},Se={class:"space-y-4"},Ie={class:"flex justify-between items-center"},Oe={class:"text-sm text-foreground"},Be={class:"flex justify-between items-center"},Ne={class:"text-sm text-foreground"},Ye={class:"space-y-4"},je={class:"flex justify-between items-center"},qe={class:"text-sm text-foreground"},Ue={class:"flex justify-between items-center"},Ae={class:"text-sm text-foreground"},Ee={class:"space-y-4"},Re={class:"flex justify-between items-center"},Te={class:"text-sm text-foreground"},ze={class:"flex justify-between items-center"},He={class:"text-sm text-foreground"},Ke={class:"grid grid-cols-4 gap-4"},We={class:"grid grid-cols-4 gap-4"},Ge={class:"grid grid-cols-2 gap-4"},Je={class:"flex justify-end"};function Qe(j,o,p,e,u,y){const h=P("font-awesome-icon"),c=P("Modal"),f=k("motion"),_=k("motion-slide-top");return i(),m("div",ge,[t(e.PageHeading,{title:"Vouchers"},{default:a(()=>[t(e.Button,{onClick:e.newVoucher},{default:a(()=>[...o[3]||(o[3]=[d("Add Voucher",-1)])]),_:1})]),_:1}),r("div",he,[r("div",ve,[x((i(),m("section",be,[e.fetchingVouchers?(i(),m("div",xe,[r("span",Fe,[t(e.Spinner,{class:"size-4"}),o[4]||(o[4]=r("span",{class:"text-sm"},"Fetching vouchers ...",-1))])])):(i(),m("div",pe,[(i(!0),m(Q,null,X(e.vouchers,s=>(i(),L(e.Button,{key:s.uid,onClick:V=>e.selectVoucher(s),class:Z(["w-full flex items-center p-4 rounded-lg border transition-colors hover:bg-accent hover:text-accent-foreground",[s.uid===e.values.uid?"border-primary bg-primary/10":"border-border bg-card"]]),variant:"ghost",type:"button"},{default:a(()=>[r("div",ye,[r("div",Ve,[r("span",Ce,l(s.name),1),r("span",De,l(s.used)+" of "+l(s.usageLimit),1)])])]),_:2},1032,["onClick","class"]))),128))]))])),[[f]]),e.vouchers?.length>0&&e.values.uid?x((i(),m("section",we,[x((i(),m("div",Me,[r("div",Pe,[r("h4",ke,l(e.values.name?.toUpperCase()),1),t(e.Button,{variant:"outline",size:"icon",onClick:o[0]||(o[0]=s=>e.showModal=!0)},{default:a(()=>[t(h,{icon:"pen",class:"text-muted-foreground"})]),_:1})]),r("div",Le,[r("div",Se,[r("div",Ie,[o[5]||(o[5]=r("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date:",-1)),r("span",Oe,l(e.values.startDate),1)]),r("div",Be,[o[6]||(o[6]=r("span",{class:"text-sm font-medium text-muted-foreground"},"End Date:",-1)),r("span",Ne,l(e.values.endDate),1)])]),r("div",Ye,[r("div",je,[o[7]||(o[7]=r("span",{class:"text-sm font-medium text-muted-foreground"},"Usage Limit:",-1)),r("span",qe,l(e.values.usageLimit),1)]),r("div",Ue,[o[8]||(o[8]=r("span",{class:"text-sm font-medium text-muted-foreground"},"Used:",-1)),r("span",Ae,l(e.values.used),1)])]),r("div",Ee,[r("div",Re,[o[9]||(o[9]=r("span",{class:"text-sm font-medium text-muted-foreground"},"Once per customer:",-1)),r("span",Te,l(e.values.oncePerCustomer?"Yes":"No"),1)]),r("div",ze,[o[10]||(o[10]=r("span",{class:"text-sm font-medium text-muted-foreground"},"Once per order:",-1)),r("span",He,l(e.values.oncePerOrder?"Yes":"No"),1)])])])])),[[_]]),t(e.VoucherCodes,{voucherUid:e.values.uid},null,8,["voucherUid"])])),[[f]]):S("",!0)])]),e.showModal?(i(),L(c,{key:0,onClose:o[2]||(o[2]=s=>e.showModal=!1),contentWidth:"w-2/6"},{header:a(()=>[...o[11]||(o[11]=[r("h3",{class:"text-lg font-semibold text-foreground"},"Voucher Form",-1)])]),body:a(()=>[r("form",{class:"space-y-6",onSubmit:o[1]||(o[1]=$((...s)=>e.submitVoucherForm&&e.submitVoucherForm(...s),["prevent"]))},[r("div",Ke,[t(e.FormField,{name:"name"},{default:a(({componentField:s})=>[t(e.FormItem,{class:"col-span-2"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[12]||(o[12]=[d("Voucher Name",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,g(s,{placeholder:"Name ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"startDate"},{default:a(({componentField:s})=>[t(e.FormItem,{class:"col-span-1"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[13]||(o[13]=[d("Start Date",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,g(s,{type:"date"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"endDate"},{default:a(({componentField:s})=>[t(e.FormItem,{class:"col-span-1"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[14]||(o[14]=[d("End Date",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,g(s,{type:"date"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),r("div",We,[t(e.FormField,{name:"usageLimit"},{default:a(({componentField:s})=>[t(e.FormItem,{class:"col-span-2"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[15]||(o[15]=[d("Usage Limit",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,g(s,{type:"number",min:"1"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),r("div",Ge,[t(e.FormField,{name:"oncePerCustomer",type:"checkbox","checked-value":!0,"unchecked-value":!1},{default:a(({componentField:s})=>[t(e.FormItem,{class:"flex items-center space-x-2"},{default:a(()=>[t(e.FormControl,null,{default:a(()=>[t(e.Checkbox,I(O(s)),null,16)]),_:2},1024),t(e.FormLabel,null,{default:a(()=>[...o[16]||(o[16]=[d("Once Per Customer",-1)])]),_:1}),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"oncePerOrder",type:"checkbox","checked-value":!0,"unchecked-value":!1},{default:a(({componentField:s})=>[t(e.FormItem,{class:"flex items-center space-x-2"},{default:a(()=>[t(e.FormControl,null,{default:a(()=>[t(e.Checkbox,I(O(s)),null,16)]),_:2},1024),t(e.FormLabel,null,{default:a(()=>[...o[17]||(o[17]=[d("Once Per Order",-1)])]),_:1}),t(e.FormMessage)]),_:2},1024)]),_:1})]),r("div",Je,[t(e.Button,{type:"submit"},{default:a(()=>[...o[18]||(o[18]=[d("Save Voucher",-1)])]),_:1})])],32)]),_:1})):S("",!0)])}const dt=J(_e,[["render",Qe],["__scopeId","data-v-3f30ca74"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/billing/Voucher.vue"]]);export{dt as default};
