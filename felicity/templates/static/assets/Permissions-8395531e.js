import{S as P,f as w,i as f,o as r,c as o,N as s,K as p,F as i,E as u,H as m,a as A,a5 as U,Z as G,$ as S,ax as V,_ as B}from"./index-628f1f8f.js";import{u as D}from"./user-a3126a09.js";import"./_queries-ce4032f2.js";const C={class:"space-y-6"},E={class:"bg-background rounded-lg shadow-sm overflow-hidden"},F={class:"relative"},N={class:"w-full"},z={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},H={class:"w-full"},L={class:"divide-y divide-border"},O={class:"bg-muted/50"},T={class:"px-4 py-3 font-medium text-sm text-foreground"},j={class:"px-4 py-2 text-sm text-muted-foreground"},I=P({__name:"Permissions",setup(K){const _=G(()=>S(()=>import("./FelSwitch-7814092f.js"),["assets/FelSwitch-7814092f.js","assets/index-628f1f8f.js","assets/index-f2df9813.css"]));let a=D();const{withClientMutation:g}=w();a.fetchGroupsAndPermissions();const l=f(()=>a.getGroups);function b(d,t){return d?.permissions?.some(e=>e?.uid===t?.uid)??!1}const h=(d,t)=>d?.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{}),x=f(()=>Array.from(Object.entries(h(a.getPermissions,"target"))));function k(d,t){g(V,{groupUid:d?.uid,permissionUid:t?.uid},"updateGroupPermissions").then(e=>a.updateGroupsAndPermissions(e))}function y(d,t,e){e!==b(d,t)&&k(d,t)}return(d,t)=>(r(),o("div",C,[s("div",E,[s("div",F,[p(" Fixed Header "),s("table",N,[s("thead",null,[s("tr",null,[t[0]||(t[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),o(i,null,u(l.value,e=>(r(),o("th",{key:e.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},m(e.name),1))),128)),t[1]||(t[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),p(" Scrollable Body "),s("div",z,[s("table",H,[s("tbody",L,[(r(!0),o(i,null,u(x.value,e=>(r(),o(i,{key:e[0]},[s("tr",O,[s("td",T,m(e[0]),1),(r(!0),o(i,null,u(l.value,n=>(r(),o("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:n.uid},[p(" {{ group.name }} ")]))),128))]),(r(!0),o(i,null,u(e[1],n=>(r(),o("tr",{key:n.uid},[s("td",j,m(n.action),1),(r(!0),o(i,null,u(l.value,c=>(r(),o("td",{key:c.uid,class:"px-4 py-2"},[A(U(_),{"model-value":b(c,n),"onUpdate:modelValue":v=>y(c,n,v),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),$=B(I,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{$ as default};
