import{_ as S,A as I,t as N,w as T}from"./shipment-53265c2d.js";import{f as F,G as O,T as B,c as C,w as j,d as _,r as y,h as R,k as H,x as s,ag as c,B as k,u as d,i as w,_ as P}from"./_plugin-vue_export-helper-dacf3d65.js";import{i as G,j as K}from"./instrument.mutations-db9aed1a.js";import{v as m,a as L}from"./runtime-dom.esm-bundler-98433118.js";/* empty css                                                                 */const q={action:"post",class:"p-1"},z={class:"grid grid-cols-3 gap-x-4 mb-4"},J={class:"block col-span-2 mb-2"},Q=s("span",{class:"text-gray-700"},"Method Name",-1),W={class:"block col-span-1 mb-2"},X=s("span",{class:"text-gray-700"},"keyword",-1),Y={class:"grid grid-cols-2 gap-x-4 mb-4"},Z={class:"block col-span-2 mb-2"},$=s("span",{class:"text-gray-700"},"Analyses",-1),ee={class:"block col-span-2 mb-2"},se=s("span",{class:"text-gray-700"},"Instruments",-1),te={class:"block col-span-2 mb-2"},oe=s("span",{class:"text-gray-700"},"Description",-1),ae=s("hr",null,null,-1),le=F({__name:"MethodForm",props:{method:Object,methodUid:Number,analysis:Object,analysisUid:Number},emits:["close"],setup(g,{emit:p}){const h=g,f=O(()=>S(()=>import("./vue-multiselect.esm-51069c0e.js"),["assets/vue-multiselect.esm-51069c0e.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js"])),x=I(),u=N(),{withClientMutation:b}=T(),{method:i,analysis:r}=B(h),t=C({...i?.value});j(()=>h.analysisUid,(o,e)=>{});const v=_(()=>x.getAnalysesServicesSimple);let l=y([]);r?.value?.uid!==void 0?l.value.push(r.value):v.value?.forEach(o=>{o?.methods?.some(e=>e.uid==i?.value?.uid)&&l.value.push(o)}),u.fetchInstruments();const M=_(()=>u.getInstruments);let n=y([]);const V=()=>{const o=[];return i?.value?.instruments?.forEach(e=>{r?.value?.instruments?.some(U=>U?.uid===e?.uid)&&o.push(e)}),o};n.value=V(),i?.value?.uid!==void 0&&i?.value?.instruments?.forEach(o=>n.value.push(o));function A(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(G,{payload:o},"createMethod").then(e=>{p("close"),u.addMethod(e)})}function D(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};b(K,{uid:t?.uid,payload:o},"updateMethod").then(e=>{p("close"),u.updateMethod(e)})}function E(){i?.value?.uid||A(),i?.value?.uid&&D()}return(o,e)=>(R(),H("form",q,[s("div",z,[s("label",J,[Q,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=a=>t.name=a),placeholder:"Name ..."},null,512),[[m,t.name]])]),s("label",W,[X,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=a=>t.keyword=a),placeholder:"Keyword ..."},null,512),[[m,t.keyword]])])]),s("div",Y,[s("label",Z,[$,k(d(f),{modelValue:d(l),"onUpdate:modelValue":e[2]||(e[2]=a=>w(l)?l.value=a:l=a),options:d(v),multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:d(r)?.uid!=null},null,8,["modelValue","options","disabled"])]),s("label",ee,[se,k(d(f),{modelValue:d(n),"onUpdate:modelValue":e[3]||(e[3]=a=>w(n)?n.value=a:n=a),options:d(M),multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),s("label",te,[oe,c(s("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>t.description=a),placeholder:"Description ..."},null,512),[[m,t.description]])])]),ae,s("button",{type:"button",onClick:e[5]||(e[5]=L(a=>E(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")]))}}),ce=P(le,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/admin/instruments/MethodForm.vue"]]);export{ce as default};
