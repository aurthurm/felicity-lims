import{a0 as G,f as q,a7 as c,g as z,ad as J,ak as K,_ as Q,r as D,c as a,o as d,a as E,A as e,C as W,E as X,N as A,P as Y,J as g,K as y,L as u,D as Z,F as p,a2 as k,a3 as F}from"./index-Cdc6vSVw.js";import{g as H,a as R,X as $,Y as ee,Z as te}from"./microbiology.mutations-CQJcOUVA.js";const oe=G({__name:"AstPanel",setup(L,{expose:o}){o();const{withClientMutation:_,withClientQuery:s}=q(),w=c(!1),O=c(""),x=c(!0),v=c(""),h=c(""),t=c([]),i=c([]),f=c([]),m=c([]),C=c([]),n=z({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});J(()=>{T(),P(),M()});function T(){s(H,{},"abxLaboratoryAntibiotics").then(r=>{r&&(i.value=r,f.value=[...i.value])})}function P(){s(R,{text:v.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(r=>{m.value=m.value?.filter(l=>n.selectedOrganisms.includes(l.uid))||[],m.value=K(m.value,r?.items,"uid"),C.value=[...m.value]})}function M(){s($,{},"abxAstPanelAll").then(r=>{r&&(t.value=r,t.value.forEach(l=>l.organisms?.forEach(b=>m.value.push(b))))})}function N(r,l={}){x.value=r,w.value=!0,O.value=(r?"Create":"Edit")+" AST Panel",r?(n.uid="",n.name="",n.description="",n.selectedAntibiotics=[],n.selectedOrganisms=[]):(n.uid=l.uid,n.name=l.name,n.description=l.description,n.selectedAntibiotics=l.antibiotics?.map(b=>b.uid)||[],n.selectedOrganisms=l.organisms?.map(b=>b.uid)||[])}function j(){const r={name:n.name,description:n.description,antibiotics:n.selectedAntibiotics,organisms:n.selectedOrganisms};x.value?_(ee,{payload:r},"createAbxAstPanel").then(l=>{l&&t.value.unshift(l)}):_(te,{uid:n.uid,payload:r},"updateAbxAstPanel").then(l=>{if(l){const b=t.value.findIndex(S=>S.uid===l.uid);b>-1&&(t.value=[...t.value.map((S,U)=>U===b?l:S)])}}),w.value=!1}function B(){if(!h.value){f.value=[...i.value];return}f.value=i.value.filter(r=>r.name.toLowerCase().includes(h.value.toLowerCase()))}function I(){if(!v.value){C.value=[...m.value];return}P()}const V={withClientMutation:_,withClientQuery:s,showModal:w,formTitle:O,formAction:x,searchOrgText:v,searchAbxText:h,panels:t,antibiotics:i,filteredAntibiotics:f,organisms:m,filteredOrganisms:C,form:n,fetchAntibiotics:T,fetchOrganisms:P,fetchPanels:M,FormManager:N,saveForm:j,filterAntibiotics:B,filterOrganisms:I};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),se={class:"overflow-x-auto"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-background shadow-dashboard rounded-lg"},ne={class:"min-w-full divide-y divide-border"},re={class:"bg-background divide-y divide-border"},le={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},de={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ae={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ce={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ue={class:"px-3 py-3.5 whitespace-nowrap text-right text-sm"},fe=["onClick"],me={class:"text-xl font-semibold text-foreground"},be={class:"space-y-4"},ge={class:"grid grid-cols-1 gap-4"},pe={class:"block"},xe={class:"block"},ve={class:"flex gap-4"},he={class:"w-2/3 space-y-2"},ye={class:"block"},_e={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},we=["value"],Ae={class:"ml-2 text-sm text-foreground"},ke={class:"w-1/3"},Oe={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Ce={class:"text-sm text-foreground"},Pe=["onClick"],Se={class:"flex gap-4"},De={class:"w-2/3 space-y-2"},Te={class:"block"},Me={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},Ve=["value"],Ee={class:"ml-2 text-sm text-foreground"},Fe={class:"w-1/3"},Le={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Ne={class:"text-sm text-foreground"},je=["onClick"];function Be(L,o,_,s,w,O){const x=D("fel-button"),v=D("fel-heading"),h=D("fel-modal");return d(),a(g,null,[E(v,{title:"AST Panels"},{default:A(()=>[E(x,{onClick:o[0]||(o[0]=t=>s.FormManager(!0))},{default:A(()=>[...o[8]||(o[8]=[Y("Add Panel",-1)])]),_:1})]),_:1}),e("div",se,[e("div",ie,[e("table",ne,[o[9]||(o[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Organisms"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Antibiotics"),e("th",{class:"px-3 py-3.5"})])],-1)),e("tbody",re,[(d(!0),a(g,null,y(s.panels,t=>(d(),a("tr",{key:t?.uid},[e("td",le,u(t?.name),1),e("td",de,u(t?.description),1),e("td",ae,u(t?.organisms?.map(i=>i.name).join(", ")),1),e("td",ce,u(t?.antibiotics?.map(i=>i.name).join(", ")),1),e("td",ue,[e("button",{onClick:i=>s.FormManager(!1,t),class:"px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Edit ",8,fe)])]))),128))])])])]),s.showModal?(d(),W(h,{key:0,onClose:o[7]||(o[7]=t=>s.showModal=!1),contentWidth:"w-1/2"},{header:A(()=>[e("h3",me,u(s.formTitle),1)]),body:A(()=>[e("form",{onSubmit:Z(s.saveForm,["prevent"]),class:"space-y-6 p-4"},[e("div",be,[e("div",ge,[e("label",pe,[o[10]||(o[10]=e("span",{class:"text-sm font-medium text-foreground"},"Panel Name",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.form.name=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter panel name"},null,512),[[k,s.form.name]])]),e("label",xe,[o[11]||(o[11]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.form.description=t),rows:"2",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description"},null,512),[[k,s.form.description]])])]),e("div",ve,[e("div",he,[e("label",ye,[o[12]||(o[12]=e("span",{class:"text-sm font-medium text-foreground"},"Search Organisms",-1)),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>s.searchOrgText=t),onInput:s.filterOrganisms,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search organisms..."},null,544),[[k,s.searchOrgText]])]),e("div",_e,[(d(!0),a(g,null,y(s.filteredOrganisms,t=>(d(),a("div",{key:t.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":o[4]||(o[4]=i=>s.form.selectedOrganisms=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary/50"},null,8,we),[[F,s.form.selectedOrganisms]]),e("span",Ae,u(t.name),1)]))),128))])]),e("div",ke,[o[13]||(o[13]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Organisms",-1)),e("div",Oe,[(d(!0),a(g,null,y(s.form.selectedOrganisms,t=>(d(),a("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Ce,u(s.organisms?.find(i=>i.uid===t)?.name),1),e("button",{onClick:i=>s.form.selectedOrganisms=s.form.selectedOrganisms.filter(f=>f!==t),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Pe)]))),128))])])]),e("div",Se,[e("div",De,[e("label",Te,[o[14]||(o[14]=e("span",{class:"text-sm font-medium text-foreground"},"Search Antibiotics",-1)),p(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>s.searchAbxText=t),onInput:s.filterAntibiotics,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search antibiotics..."},null,544),[[k,s.searchAbxText]])]),e("div",Me,[(d(!0),a(g,null,y(s.filteredAntibiotics,t=>(d(),a("div",{key:t.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:t.uid,"onUpdate:modelValue":o[6]||(o[6]=i=>s.form.selectedAntibiotics=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary/50"},null,8,Ve),[[F,s.form.selectedAntibiotics]]),e("span",Ee,u(t.name),1)]))),128))])]),e("div",Fe,[o[15]||(o[15]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Antibiotics",-1)),e("div",Le,[(d(!0),a(g,null,y(s.form.selectedAntibiotics,t=>(d(),a("div",{key:t,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Ne,u(s.antibiotics.find(i=>i.uid==t)?.name),1),e("button",{onClick:i=>s.form.selectedAntibiotics=s.form.selectedAntibiotics.filter(f=>f!==t),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,je)]))),128))])])])]),o[16]||(o[16]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):X("",!0)],64)}const Ge=Q(oe,[["render",Be],["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{Ge as default};
