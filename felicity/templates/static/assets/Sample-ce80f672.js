import{P as oe,u as ne,a9 as re,Q as ie,f as le,ai as de,R as k,h as u,r as S,$ as ue,o as p,c,b as e,L as f,a as v,a2 as a,x as pe,K as R,J as C,A as i,a1 as me,E as o,C as l,a5 as y,F as j,D as ce,X as ve,Y as ye,_ as xe}from"./index-f86d8273.js";import{u as be}from"./samples-1df7961b.js";import"./analyses.mutations-0a79566e.js";import"./storage.mutations-c0e239e2.js";const fe={class:"flex justify-between items-center"},ge={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},he={key:0,class:"py-4 text-center"},we={key:1,class:"grid grid-cols-12 gap-3"},_e={class:"col-span-12 px-3 sm:px-0"},Se={class:"mb-2 flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Ce={key:1},ke={type:"button",class:"bg-sky-800 text-white px-2 py-1 rounded-sm leading-none"},Re={class:"ml-2"},je={class:"absolute mt-4 py-0 bg-gray-300 rounded-sm shadow-xl z-20"},Le={class:"grid grid-cols-3 gap-x-4 mt-2"},De={class:"col-span-1"},Pe={class:"flex justify-between"},$e={class:"text-gray-600 text-sm md:text-md"},Oe={class:"flex justify-between"},Be={class:"text-gray-600 text-sm md:text-md"},Ie={class:"col-span-1"},Ue={class:"flex justify-between"},qe={class:"text-gray-600 text-sm md:text-md"},Te={class:"flex justify-between"},Ve={class:"text-gray-600 text-sm md:text-md"},Ne={class:"flex justify-between"},Ae={class:"text-gray-600 text-sm md:text-md"},Ee={class:"flex justify-between"},Je={class:"text-gray-600 text-sm md:text-md"},ze={class:"col-span-1"},Fe={class:"flex justify-between"},We={class:"text-gray-600 text-sm md:text-md"},Ke={class:"flex justify-between"},Me={class:"text-gray-600 text-sm md:text-md"},Qe={class:"flex justify-between"},Xe={class:"text-gray-600 text-sm md:text-md"},Ye={class:"flex justify-between"},Ge={class:"text-gray-600 text-sm md:text-md"},He={class:"bg-blue-300 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},Ze={class:"flex"},et={class:"bg-orange-600 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},tt=oe({__name:"Sample",setup(st){const L=ve(()=>ye(()=>import("./FelLoadingMessage-e1e357b9.js"),["assets/FelLoadingMessage-e1e357b9.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),m=ne(),g=re(),h=ie();m.resetSample();const{cancelSamples:D,reInstateSamples:P,receiveSamples:$,invalidateSamples:O,publishSamples:B,verifySamples:I,recoverSamples:U}=be(),b=le({dropdownOpen:!1}),{sample:s,fetchingSample:q,repeatSample:w}=de(m);m.fetchSampleByUid(g.params.sampleUid),k(()=>s?.value?.status,(n,t)=>{if(n)if(n!=="invalidated"){m.resetRepeatSample();return}else m.fetchRepeatSampleByParentId(g.params.sampleUid)}),k(()=>g.params.sampleUid,(n,t)=>{m.fetchSampleByUid(+n)});function T(n,t){let d=[];return n?.forEach(x=>d.push(x.name)),t?.forEach(x=>d.push(x.name)),d.join(", ")}const V=u(()=>!!["expected"].includes(s?.value?.status?.toLowerCase())),N=async()=>$([s?.value?.uid]),A=u(()=>!!["received","expected"].includes(s?.value?.status?.toLowerCase())),E=async()=>D([s?.value?.uid]),J=u(()=>!!["cancelled"].includes(s?.value?.status?.toLowerCase())),z=async()=>P([s?.value?.uid]),F=u(()=>s?.value?.status?.toLowerCase()==="awaiting"),W=async()=>I([s?.value?.uid]),K=u(()=>s?.value?.status?.toLowerCase()==="published"),_=u(()=>["approved"].includes(s?.value?.status?.toLowerCase())?"Publish":["published"].includes(s?.value?.status?.toLowerCase())?"Re publish":"Pre publish"),M=u(()=>{if(["awaiting","approved","published"].includes(s?.value?.status?.toLowerCase()))return!0;const n=m.analysisResults;return!!(["received","paired"].includes(s?.value?.status?.toLowerCase()??"")&&n?.some(t=>["approved"].includes(t.status?.toLowerCase()??"")))}),Q=async()=>{const n=_.value.startsWith("Pre")?"pre-publish":_.value.startsWith("Re")?"re-publish":"publish";B([{uid:s?.value?.uid,action:n}])},X=async()=>O([s?.value?.uid]).then(n=>{let t=n?.filter(d=>d.uid!==s?.value?.uid);t.length>0&&m.setRepeatSample(t[0])}),Y=async()=>h.push({name:"print-barcodes",state:{sampleUids:JSON.stringify([s?.value?.uid])}}),G=u(()=>!!["received","expected"].includes(s?.value?.status?.toLowerCase())),H=async()=>{h.push({name:"reject-samples",state:{samples:JSON.stringify([s?.value])}})},Z=u(()=>!!["stored"].includes(s?.value?.status?.toLowerCase())),ee=async()=>U([s?.value?.uid]),te=async n=>{h.push({path:"/bio-banking",state:{sample:JSON.stringify(n)}})};return(n,t)=>{const d=S("font-awesome-icon"),x=S("router-link"),se=S("router-view"),ae=ue("motion-slide-right");return p(),c(j,null,[e("div",fe,[t[13]||(t[13]=e("h3",{class:"my-4 font-bold"},"Sample Detail",-1)),e("div",null,[e("button",{class:"p-2 mr-8 text-sm hover:border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none",onClick:Y},[t[11]||(t[11]=f(" Barcode ")),v(d,{icon:"barcode",class:"ml-2"})]),a(s)?.analysisRequest?.patient?.uid?(p(),pe(x,{key:0,to:{name:"patient-detail",params:{patientUid:a(s)?.analysisRequest?.patient?.uid}},class:"p-2 my-2 ml-4 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>t[12]||(t[12]=[f(" ... other samples ")])),_:1},8,["to"])):C("",!0)])]),t[27]||(t[27]=e("hr",null,null,-1)),i((p(),c("div",ge,[a(q)?(p(),c("div",he,[v(a(L),{message:"Fetching sample details ..."})])):(p(),c("div",we,[e("div",_e,[e("div",Se,[e("div",null,[a(s)?.priority??0<1?(p(),c("span",{key:0,class:me(["font-small",{"text-orange-600":a(s)?.priority??0<1}])},[v(d,{icon:"fa-star"})],2)):C("",!0),f(" "+o(a(s)?.sampleId)+" ",1),a(s)?.analysisRequest?.patient?.uid&&a(w)?.uid?(p(),c("span",Ce,[v(d,{icon:"angle-double-right",class:"mx-2"}),v(x,{to:{name:"sample-detail",params:{patientUid:a(s)?.analysisRequest?.patient?.uid,sampleUid:a(w)?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[f(o(a(w)?.sampleId),1)]),_:1},8,["to"])])):C("",!0)]),e("span",null,o(T(a(s)?.profiles,a(s)?.analyses)),1),e("div",null,[e("div",{onClick:t[0]||(t[0]=r=>b.dropdownOpen=!b.dropdownOpen),class:"hidden md:block md:flex md:items-center ml-2 mt-2"},[e("button",ke,o(a(s)?.status),1),e("div",Re,[v(d,{icon:"chevron-down",class:"text-gray-400"})])]),i(e("div",{onClick:t[1]||(t[1]=r=>b.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[l,b.dropdownOpen]]),i(e("div",je,[i(e("div",{onClick:t[2]||(t[2]=r=>N()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Receive ",512),[[l,V.value]]),i(e("div",{onClick:t[3]||(t[3]=r=>W()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Approve ",512),[[l,F.value]]),i(e("div",{onClick:t[4]||(t[4]=r=>H()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reject ",512),[[l,G.value]]),i(e("div",{onClick:t[5]||(t[5]=r=>E()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Cancel ",512),[[l,A.value]]),i(e("div",{onClick:t[6]||(t[6]=r=>z()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reinstate ",512),[[l,J.value]]),i(e("div",{onClick:t[7]||(t[7]=r=>Q()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"},o(_.value),513),[[l,M.value]]),i(e("div",{onClick:t[8]||(t[8]=r=>X()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Invalidate ",512),[[l,K.value]]),i(e("div",{onClick:t[9]||(t[9]=r=>ee()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Recover ",512),[[l,Z.value]])],512),[[l,b.dropdownOpen]])])]),t[25]||(t[25]=e("hr",null,null,-1)),e("div",Le,[e("div",De,[e("div",Pe,[t[14]||(t[14]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client Request ID:",-1)),e("span",$e,o(a(s)?.analysisRequest?.clientRequestId),1)]),e("div",Oe,[t[15]||(t[15]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client:",-1)),e("span",Be,o(a(s)?.analysisRequest?.client?.name),1)]),t[16]||(t[16]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800 text-sm font-semibold"},"Cliet Contact:"),e("span",{class:"text-gray-600 text-sm md:text-md"},"Sister in Charge")],-1))]),e("div",Ie,[e("div",Ue,[t[17]||(t[17]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Sample Type:",-1)),e("span",qe,o(a(s)?.sampleType?.name),1)]),e("div",Te,[t[18]||(t[18]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Sampled:",-1)),e("span",Ve,o(a(y)(a(s)?.dateCollected,!0)),1)]),e("div",Ne,[t[19]||(t[19]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Registered:",-1)),e("span",Ae,o(a(y)(a(s)?.createdAt,!0)),1)]),e("div",Ee,[t[20]||(t[20]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Received:",-1)),e("span",Je,o(a(y)(a(s)?.dateReceived,!0)),1)])]),e("div",ze,[e("div",Fe,[t[21]||(t[21]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Submitted:",-1)),e("span",We,o(a(y)(a(s)?.dateSubmitted,!0)),1)]),e("div",Ke,[t[22]||(t[22]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Verified:",-1)),e("span",Me,o(a(y)(a(s)?.dateVerified,!0)),1)]),e("div",Qe,[t[23]||(t[23]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Published:",-1)),e("span",Xe,o(a(y)(a(s)?.datePublished,!0)),1)]),e("div",Ye,[t[24]||(t[24]=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Printed:",-1)),e("span",Ge,o(a(y)(a(s)?.datePrinted,!0)),1)])])])])]))])),[[ae]]),i(e("div",He,[e("div",Ze,[t[26]||(t[26]=e("div",{class:"mr-4 font-semibold"},"Storage:",-1)),e("div",{class:"hover:underline hover:cursor-pointer",onClick:t[10]||(t[10]=r=>te(a(s)))},[e("span",null,o(a(s)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name)+" › ",1),e("span",null,o(a(s)?.storageContainer?.storageSection?.storageLocation?.name)+" › ",1),e("span",null,o(a(s)?.storageContainer?.storageSection?.name)+" › ",1),e("span",null,o(a(s)?.storageContainer?.name)+" › ",1),e("span",null,o(a(s)?.storageSlot),1)])])],512),[[l,a(s)?.status==="stored"]]),i(e("div",et,[e("ul",null,[(p(!0),c(j,null,ce(a(s)?.rejectionReasons,r=>(p(),c("li",{key:r.uid},o(r.reason),1))),128))])],512),[[l,a(s)?.status==="rejected"]]),v(se)],64)}}}),it=xe(tt,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/Sample.vue"]]);export{it as default};
