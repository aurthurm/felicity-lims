import{S as B,f as F,a7 as G,a0 as l,h as N,r as T,o as a,c as f,K as n,N as e,F as $,E as j,a3 as h,H as u,y as L,L as w,A as H,M as q,C as b,X as M,a as I,a5 as z,Y as K,_ as Q}from"./index-0c222abb.js";import{U as X}from"./_queries-98debe01.js";import{l as Y,m as J,n as O}from"./grind.queries-bf760337.js";import{r as P,m as R}from"./index-6c2b2db3.js";import W from"./vue-multiselect.esm-9327845c.js";const Z={class:"space-y-6"},ee={class:"space-y-6"},te=["onDblclick"],oe={class:"absolute left-0 top-0 transform -translate-x-1/2 bg-background p-1 border border-border rounded-full w-4 h-4 flex items-center justify-center transition-colors duration-200 group-hover:border-primary"},re={class:"mb-6"},se={class:"font-medium text-foreground group-hover:text-primary transition-colors duration-200"},ne={class:"text-sm text-muted-foreground mt-1"},ie={class:"text-lg font-semibold text-foreground"},le={class:"flex items-center space-x-2"},de={class:"flex justify-end space-x-3"},ae={type:"submit",class:"px-4 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"},ue=B({__name:"ErrandMilestone",props:{errandUid:{type:String,required:!0}},emits:["milestoneUpdated"],setup(k,{emit:_}){const c=k,{withClientMutation:g,withClientQuery:v}=F();G(()=>{m(),A()});const C=_,x=l([]);function m(s="cache-first"){v(Y,{errandUid:c.errandUid},"grindMilestonesByErrand",s).then(t=>{t&&(x.value=t)})}const i=l(!1),d=l(!1),p=l(""),r=N({});function U(){i.value=!0,p.value="Add Milestone",d.value=!0,P(r)}function E(s){i.value=!0,p.value="Edit Milestone",d.value=!1,R(r,s)}function D(){i.value=!1;const s={title:r.title,description:r.description,complete:r.complete,assigneeUid:r.assignee?.uid,errandUid:c.errandUid};d.value?g(J,{payload:{...s,errandUid:c.errandUid}},"createGrindMilestone").then(()=>m("network-only")):g(O,{uid:r.uid,payload:s},"updateGrindMilestone").then(()=>{m("network-only"),C("milestoneUpdated")})}function V({firstName:s,lastName:t}){return`${s} ${t}`}const y=l();function A(){v(X,{first:100},"userAll").then(s=>{y.value=s.items})}return(s,t)=>{const S=T("fel-modal");return a(),f("div",Z,[n(" Header "),e("div",{class:"flex justify-between items-center"},[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-foreground"},"Milestones",-1)),e("button",{onClick:U,class:"px-3 py-1.5 text-sm font-medium text-foreground bg-background border border-border rounded-md hover:border-primary hover:text-primary hover:bg-secondary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},t[6]||(t[6]=[e("span",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",null,"Add New")],-1)]))]),n(" Milestones List "),e("div",ee,[(a(!0),f($,null,j(x.value,o=>(a(),f("div",{key:o.uid,class:h(["pl-6 border-l-2 relative group cursor-pointer",{"border-success/20":o.complete,"border-destructive/20":!o.complete}]),onDblclick:ce=>E(o)},[n(" Status Indicator "),e("div",oe,[e("div",{class:h(["w-2 h-2 rounded-full transition-colors duration-200",{"bg-success":o.complete,"bg-destructive":!o.complete}])},null,2)]),n(" Milestone Content "),e("div",re,[e("h4",se,u(o.title),1),e("p",ne,u(o.description),1)])],42,te))),128))]),n(" Create/Edit Milestone Modal "),i.value?(a(),L(S,{key:0,onClose:t[5]||(t[5]=o=>i.value=!1),"content-width":"w-full max-w-2xl"},{header:w(()=>[e("h3",ie,u(p.value),1)]),body:w(()=>[e("form",{onSubmit:H(D,["prevent"]),class:"space-y-6 p-6"},[n(" Title "),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"title"},[q(" Title "),e("span",{class:"text-destructive"},"*")],-1)),b(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>r.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter milestone title"},null,512),[[M,r.title]])]),n(" Description "),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"description"}," Description ",-1)),b(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=o=>r.description=o),rows:"3",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter milestone description"},null,512),[[M,r.description]])]),n(" Assignee "),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Assignee ",-1)),I(z(W),{modelValue:r.assignee,"onUpdate:modelValue":t[2]||(t[2]=o=>r.assignee=o),options:y.value,"track-by":"uid",searchable:!0,"custom-label":V,placeholder:"Select assignee",class:"multiselect-primary"},null,8,["modelValue","options"])]),n(" Complete Status "),e("div",le,[b(e("input",{id:"complete","onUpdate:modelValue":t[3]||(t[3]=o=>r.complete=o),type:"checkbox",class:"w-4 h-4 text-primary border-border rounded focus:ring-primary focus:ring-offset-2"},null,512),[[K,r.complete]]),t[11]||(t[11]=e("label",{class:"text-sm font-medium text-foreground",for:"complete"}," Complete ",-1))]),n(" Submit button "),e("div",de,[e("button",{type:"button",onClick:t[4]||(t[4]=o=>i.value=!1),class:"px-4 py-2 text-sm font-medium text-foreground bg-background border border-border rounded-md shadow-sm hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"}," Cancel "),e("button",ae,u(d.value?"Create":"Update"),1)])],32)]),_:1})):n("v-if",!0)])}}});const ve=Q(ue,[["__scopeId","data-v-7f459d59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/_id/ErrandMilestone.vue"]]);export{ve as default};
