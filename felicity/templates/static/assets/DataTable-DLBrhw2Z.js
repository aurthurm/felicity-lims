import{Y as P,aR as M,a0 as x,av as Y,a9 as G,aa as J,ab as Q,ac as W,ad as X,ae as Z,af as $,aM as ee,a3 as te,_ as le,r as ae,c as d,o as r,C as b,z as i,a as o,A as u,y as q,K as a,F as C,H as y,M as f,I as w,D as E,E as V,N as U,ap as oe}from"./index-OdhKCqIc.js";import{T as ne,a as re,b as se}from"./TooltipTrigger-BWIYwmnQ.js";import{I as ie}from"./Input-BEm5S0CJ.js";import{S as de,a as ce,b as ue,c as fe,d as me}from"./SelectValue-Ds0cfAgl.js";import{S as ge}from"./Spinner-Bl8RfjFA.js";import"./PopperContent-BfyCnGUj.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";const z="__none__",be=P({__name:"DataTable",props:{columns:{type:Array,required:!0},data:{type:Array,required:!1},toggleColumns:{type:Boolean,required:!0},loading:{type:Boolean,required:!1},paginable:{type:Boolean,required:!1},pageMeta:{type:Object,required:!1},searchable:{type:Boolean,required:!1},filterable:{type:Boolean,required:!1},selectable:{type:Boolean,required:!1},filterMeta:{type:Object,required:!1},allChecked:{type:Boolean,required:!1}},emits:["onSort","onPaginate","onSearch","onSearchKeyUp","onSearchFocus","onCheck","onCheckAll","onFetch"],setup(k,{expose:t,emit:s}){t();const e=k;let _=M(e,"columns"),p=M(e,"data");const S=n=>{const g=_.value[n];_.value[n]={...g,hidden:!g.hidden}},l=x(e.filterMeta?.defaultFilter??""),c=x(""),m=()=>{h("onSearch",{sorting:v,filterStatus:l.value,filterText:c.value})},B=()=>{h("onSearchKeyUp",{sorting:v,filterStatus:l.value,filterText:c.value})},R=()=>{h("onSearchFocus",{})},j=n=>{l.value=n===z?"":n},T=x(e.pageMeta?.fetchCount??50),A=()=>{h("onPaginate",{fetchCount:T,sorting:v,filterStatus:l,filterText:c})},D=n=>{const g=Number(n);T.value=Number.isNaN(g)?T.value:g},O=x(!0),v=Y({}),I=n=>v?.name===n?.name,H=n=>{I(n)?Object.assign(v,{...n,sortBy:[1,"asc"].includes(v?.sortBy??"")?"desc":"asc"}):Object.assign(v,{...n,sortBy:n?.sortBy??"asc"}),h("onSort",{sorting:v,filterStatus:l.value,filterText:c.value})},h=s,N=n=>n===!0,F={props:e,get defaultColumns(){return _},set defaultColumns(n){_=n},get entries(){return p},set entries(n){p=n},toggleColumn:S,filterStatus:l,filterText:c,searchEntries:m,searchKeyUp:B,searchFocus:R,updateFilterStatus:j,fetchCount:T,paginate:A,updateFetchCount:D,openColumns:O,sorting:v,isSorter:I,setSorting:H,emit:h,SELECT_NONE:z,normalizeChecked:N,checkAll:n=>{h("onCheckAll",{checked:N(n)})},check:(n,g)=>{h("onCheck",{...n,checked:N(g)})},getValue:(n,g)=>g?.customRender!==void 0?g.customRender(n,g):g.value.split(".").reduce((K,L)=>K?.[L],n),toCapitalize:n=>n.charAt(0).toUpperCase()+n.slice(1),get Button(){return te},get Tooltip(){return se},get TooltipContent(){return re},get TooltipTrigger(){return ne},get Checkbox(){return ee},get Input(){return ie},get Select(){return me},get SelectContent(){return fe},get SelectItem(){return ue},get SelectTrigger(){return ce},get SelectValue(){return de},get Spinner(){return ge},get Table(){return $},get TableBody(){return Z},get TableCell(){return X},get TableEmpty(){return W},get TableHead(){return Q},get TableHeader(){return J},get TableRow(){return G}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),ve={class:"relative"},he={key:0,class:"absolute z-10 h-full w-full"},Se={class:"flex h-full w-full items-center justify-center gap-2"},_e={class:"my-2 flex flex-wrap items-center justify-between gap-4"},Ce={class:"flex flex-wrap items-center gap-2"},ye={key:0,class:"flex items-center gap-2"},ke={key:1,class:"w-64"},Te={class:"flex-1"},xe={key:0,class:"flex items-center justify-end"},we={class:"flex flex-wrap gap-2"},pe={class:"border border-border bg-card rounded-lg shadow-md"},Be={class:"relative w-full overflow-auto"},Ne=["onClick"],Ee={key:0},Ve={key:0},Ie={key:1},Fe={class:"flex flex-wrap justify-between items-center my-4 gap-4"},Me={key:0,class:"flex sm:flex-row flex-col items-center gap-2"},qe={class:"flex flex-row"},Ue={key:0,class:"block relative"};function ze(k,t,s,e,_,p){const S=ae("font-awesome-icon");return r(),d("div",ve,[s.loading?(r(),d("div",he,[i("div",Se,[o(e.Spinner,{class:"size-6"}),t[5]||(t[5]=i("span",null,"Loading...",-1))])])):b("",!0),i("div",{class:U({"opacity-50 blur-sm":s.loading})},[i("section",_e,[i("div",Ce,[s.filterable?(r(),d("div",ye,[q(k.$slots,"pre-filter"),o(e.Select,{"model-value":e.filterStatus||e.SELECT_NONE,"onUpdate:modelValue":e.updateFilterStatus},{default:a(()=>[o(e.SelectTrigger,{class:"w-[160px]"},{default:a(()=>[o(e.SelectValue,{placeholder:"Filter..."})]),_:1}),o(e.SelectContent,null,{default:a(()=>[(r(!0),d(C,null,y(s.filterMeta?.filters,l=>(r(),u(e.SelectItem,{key:l.value||e.SELECT_NONE,value:l.value||e.SELECT_NONE},{default:a(()=>[f(w(e.toCapitalize(l?.name)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])])):b("",!0),s.searchable?(r(),d("div",ke,[o(e.Input,{modelValue:e.filterText,"onUpdate:modelValue":t[0]||(t[0]=l=>e.filterText=l),placeholder:"Search...",onKeyup:t[1]||(t[1]=l=>e.searchKeyUp()),onFocus:t[2]||(t[2]=l=>e.searchFocus())},null,8,["modelValue"])])):b("",!0),s.searchable||s.filterable?(r(),u(e.Button,{key:2,variant:"secondary",onClick:t[3]||(t[3]=l=>e.searchEntries())},{default:a(()=>[...t[6]||(t[6]=[f(" Search ",-1)])]),_:1})):b("",!0)]),i("div",Te,[s.toggleColumns?(r(),d("div",xe,[E(i("div",we,[(r(!0),d(C,null,y(e.defaultColumns,(l,c)=>E((r(),u(e.Button,{key:c,size:"sm",variant:l.hidden?"outline":"secondary",onClick:m=>e.toggleColumn(c)},{default:a(()=>[i("span",null,w(l.name),1)]),_:2},1032,["variant","onClick"])),[[V,l.showInToggler??!0]])),128))],512),[[V,e.openColumns]]),o(e.Tooltip,null,{default:a(()=>[o(e.TooltipTrigger,{"as-child":""},{default:a(()=>[o(e.Button,{class:"ml-2",variant:"ghost",size:"icon",onClick:t[4]||(t[4]=l=>e.openColumns=!e.openColumns)},{default:a(()=>[o(S,{icon:"fa-ellipsis"})]),_:1})]),_:1}),o(e.TooltipContent,null,{default:a(()=>[...t[7]||(t[7]=[f("Manage table columns",-1)])]),_:1})]),_:1})])):b("",!0)])]),t[18]||(t[18]=i("hr",{class:"mb-4"},null,-1)),i("div",pe,[i("div",Be,[o(e.Table,{class:"w-full caption-bottom text-sm"},{default:a(()=>[o(e.TableHeader,{class:"[&_tr]:border-b"},{default:a(()=>[o(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[s.selectable?(r(),u(e.TableHead,{key:0,class:"h-12 px-4 align-middle font-medium text-muted-foreground"},{default:a(()=>[o(e.Checkbox,{checked:!!s.allChecked,"onUpdate:checked":e.checkAll,"aria-label":"Select all"},null,8,["checked"])]),_:1})):b("",!0),(r(!0),d(C,null,y(e.defaultColumns.filter(l=>!l.hidden),(l,c)=>(r(),u(e.TableHead,{key:c,class:"h-12 px-4 align-middle font-medium text-muted-foreground"},{default:a(()=>[i("div",{class:U(["flex items-center gap-1",l.sortable?"cursor-pointer":""]),onClick:m=>l.sortable&&e.setSorting(l)},[i("span",null,w(l.name),1),l.sortable?(r(),d("span",Ee,[e.isSorter(l)?e.sorting?.sortBy==="asc"?(r(),u(S,{key:1,icon:"fa-solid fa-arrow-up-wide-short"})):(r(),u(S,{key:2,icon:"fa-solid fa-arrow-down-wide-short"})):(r(),u(S,{key:0,icon:"fa-sort"}))])):b("",!0)],10,Ne)]),_:2},1024))),128))]),_:1})]),_:1}),o(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:a(()=>[(r(!0),d(C,null,y(e.entries||[],(l,c)=>(r(),u(e.TableRow,{key:c,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[s.selectable?(r(),u(e.TableCell,{key:0,class:"px-4 py-3 align-middle"},{default:a(()=>[o(e.Checkbox,{checked:!!l.checked,"onUpdate:checked":m=>e.check(l,m),"aria-label":"Select row"},null,8,["checked","onUpdate:checked"])]),_:2},1024)):b("",!0),(r(!0),d(C,null,y(e.defaultColumns.filter(m=>!m.hidden),(m,B)=>(r(),u(e.TableCell,{key:`${c}_${B}`,class:"px-4 py-3 align-middle text-sm"},{default:a(()=>[m.customRender&&m?(r(),d("span",Ve,[(r(),u(oe(e.getValue(l,m))))])):(r(),d("span",Ie,w(e.getValue(l,m)),1))]),_:2},1024))),128))]),_:2},1024))),128)),!s.loading&&(!e.entries||e.entries.length===0)?(r(),u(e.TableEmpty,{key:0,colspan:e.defaultColumns.filter(l=>!l.hidden).length+(s.selectable?1:0)},{default:a(()=>[...t[8]||(t[8]=[f(" No data available. ",-1)])]),_:1},8,["colspan"])):b("",!0)]),_:1})]),_:1})])]),i("section",Fe,[i("div",null,[q(k.$slots,"footer")]),s.paginable?(r(),d("div",Me,[i("div",null,[E(o(e.Button,{variant:"outline",onClick:e.paginate,disabled:s.loading},{default:a(()=>[...t[9]||(t[9]=[f(" Show More ",-1)])]),_:1},8,["disabled"]),[[V,s.pageMeta?.hasNextPage]])]),i("div",qe,[o(e.Select,{"model-value":String(e.fetchCount),disabled:s.loading||!s.pageMeta?.hasNextPage,"onUpdate:modelValue":e.updateFetchCount},{default:a(()=>[o(e.SelectTrigger,{class:"w-[120px]"},{default:a(()=>[o(e.SelectValue,{placeholder:"Rows"})]),_:1}),o(e.SelectContent,null,{default:a(()=>[o(e.SelectItem,{value:"25"},{default:a(()=>[...t[10]||(t[10]=[f("25",-1)])]),_:1}),o(e.SelectItem,{value:"50"},{default:a(()=>[...t[11]||(t[11]=[f("50",-1)])]),_:1}),o(e.SelectItem,{value:"100"},{default:a(()=>[...t[12]||(t[12]=[f("100",-1)])]),_:1}),o(e.SelectItem,{value:"250"},{default:a(()=>[...t[13]||(t[13]=[f("250",-1)])]),_:1}),o(e.SelectItem,{value:"500"},{default:a(()=>[...t[14]||(t[14]=[f("500",-1)])]),_:1}),o(e.SelectItem,{value:"1000"},{default:a(()=>[...t[15]||(t[15]=[f("1000",-1)])]),_:1}),o(e.SelectItem,{value:"5000"},{default:a(()=>[...t[16]||(t[16]=[f("5000",-1)])]),_:1}),o(e.SelectItem,{value:"10000"},{default:a(()=>[...t[17]||(t[17]=[f("10000",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","disabled"])]),s.pageMeta?.countNone?(r(),d("div",Ue,[o(e.Input,{placeholder:s.pageMeta?.countNone,disabled:""},null,8,["placeholder"])])):b("",!0)])):b("",!0)])],2)])}const We=le(be,[["render",ze],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/common/DataTable.vue"]]);export{We as default};
