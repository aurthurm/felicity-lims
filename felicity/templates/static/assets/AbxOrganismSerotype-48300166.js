import{P as H,e as L,Z as i,f as O,h as R,aa as X,o as P,c as z,b as s,a as C,K as g,a2 as l,x as G,E as K,z as j,A as u,V as d,a7 as q,J,F as Y,X as c,Y as b,af as w,_ as Z}from"./index-66877f9a.js";import{w as $,a as Q,x as W,y as ee}from"./microbiology.mutations-3f2e0736.js";const se={class:"w-full my-4"},te={class:"mb-6"},ae={class:"grid grid-cols-2 gap-4"},le={class:"block"},oe={class:"block"},ne={class:"block"},re={class:"block"},ie={class:"block"},ue={class:"block"},de={class:"block"},fe={class:"block"},pe={class:"block"},me=H({__name:"AbxOrganismSerotype",setup(ge){const _=c(()=>b(()=>import("./index-66877f9a.js").then(o=>o.cN),["assets/index-66877f9a.js","assets/index-78b87750.css"])),V=c(()=>b(()=>import("./FelDataTable-b2644bbd.js"),["assets/FelDataTable-b2644bbd.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),B=c(()=>b(()=>import("./vue-multiselect.esm-c75711a1.js"),["assets/vue-multiselect.esm-c75711a1.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),{withClientMutation:y,withClientQuery:h}=L();let f=i(!1),U=i(""),t=O({});const v=i(!0),x=i(!1),r=i([]),S=i([]);let n=O({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const A=i(0);let k=i({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const D=R(()=>r?.value?.length+" of "+A.value+" organisms"),E=i([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1}]);function m(o){h($,{text:o.text,pageSize:o.first,sortBy:o.sortBy},void 0).then(e=>{const a=e.abxOrganismSerotypeAll,p=a.items;o.filterAction?(r.value=[],r.value=p):r.value=w(r.value,p,"uid"),A.value=a?.totalCount,k.value=a?.pageInfo}).finally(()=>{x.value=!1})}function I(o,e){o?.length<3||h(Q,{pageSize:50,text:o,sortBy:["name"]},"abxOrganismAll").then(a=>{a&&(S.value=a?.items??[])})}X(()=>{m(n)});function M(o){n.first=100,n.after="",n.text=o.filterText,n.filterAction=!0,m(n)}function T(o){n.first=o.fetchCount,n.after=k?.value?.endCursor,n.text=o.filterText,n.filterAction=!1,m(n)}const N=()=>Object.assign(t,{});function F(){const o={organismUid:t?.organism?.uid,serotype:t?.serotype,serogroup:t?.serogroup,subspecies:t?.subspecies,oAntigens:t?.oAntigens,hPhase1:t?.hPhase1,hPhase2:t?.hPhase2,x997Check:t?.x997Check,fate:t?.fate};v.value===!0&&y(W,{payload:o},"createAbxOrganismSerotype").then(e=>{e&&(r.value=w(r.value,[e],"uid"))}),v.value===!1&&y(ee,{uid:t.uid,payload:o},"updateAbxOrganismSerotype").then(e=>{if(e){const a=r.value.findIndex(p=>p.uid==e.uid);r.value[a]=e}}),f.value=!1}return(o,e)=>(P(),z(Y,null,[s("div",se,[e[11]||(e[11]=s("hr",null,null,-1)),C(l(V),{columns:E.value,data:r.value,toggleColumns:!0,loading:x.value,paginable:!0,pageMeta:{fetchCount:l(n).first,hasNextPage:!0,countNone:D.value},searchable:!0,filterable:!1,onOnSearchKeyUp:M,onOnSearchFocus:N,onOnPaginate:T,selectable:!1},{footer:g(()=>e[10]||(e[10]=[])),_:1},8,["columns","data","loading","pageMeta"])]),l(f)?(P(),G(l(_),{key:0,onClose:e[9]||(e[9]=a=>q(f)?f.value=!1:f=!1),"content-width":"w-1/2"},{header:g(()=>[s("h3",null,K(l(U)),1)]),body:g(()=>[s("form",{onSubmit:j(F,["prevent"]),class:"p-4"},[s("div",te,[s("div",ae,[s("label",le,[e[12]||(e[12]=s("span",{class:"text-gray-700"},"Organism",-1)),C(l(B),{modelValue:l(t).organism,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).organism=a),options:S.value,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:I,label:"name"},null,8,["modelValue","options"])]),s("label",oe,[e[13]||(e[13]=s("span",{class:"text-gray-700"},"Serotype",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=a=>l(t).serotype=a),placeholder:"Serotype"},null,512),[[d,l(t).serotype]])]),s("label",ne,[e[14]||(e[14]=s("span",{class:"text-gray-700"},"Serogroup",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=a=>l(t).serogroup=a),placeholder:"Serogroup"},null,512),[[d,l(t).serogroup]])]),s("label",re,[e[15]||(e[15]=s("span",{class:"text-gray-700"},"Subspecies",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=a=>l(t).subspecies=a),placeholder:"Subspecies"},null,512),[[d,l(t).subspecies]])]),s("label",ie,[e[16]||(e[16]=s("span",{class:"text-gray-700"},"O Antigens",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>l(t).oAntigens=a),placeholder:"O Antigens"},null,512),[[d,l(t).oAntigens]])]),s("label",ue,[e[17]||(e[17]=s("span",{class:"text-gray-700"},"H Phase1",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=a=>l(t).hPhase1=a),placeholder:"H Phase1"},null,512),[[d,l(t).hPhase1]])]),s("label",de,[e[18]||(e[18]=s("span",{class:"text-gray-700"},"H Phase2",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[6]||(e[6]=a=>l(t).hPhase2=a),placeholder:"H Phase2"},null,512),[[d,l(t).hPhase2]])]),s("label",fe,[e[19]||(e[19]=s("span",{class:"text-gray-700"},"X997 Check",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=a=>l(t).x997Check=a),placeholder:"X997 Check"},null,512),[[d,l(t).x997Check]])]),s("label",pe,[e[20]||(e[20]=s("span",{class:"text-gray-700"},"Fate",-1)),u(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=a=>l(t).fate=a),placeholder:"fate"},null,512),[[d,l(t).fate]])])])]),e[21]||(e[21]=s("hr",{class:"my-6"},null,-1)),e[22]||(e[22]=s("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save OrganismSerotype ",-1))],32)]),_:1})):J("",!0)],64))}});const ye=Z(me,[["__scopeId","data-v-a814e9fb"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{ye as default};
