import{P as T,ai as w,Z as p,aa as I,R as L,o as y,c as v,a2 as f,a as k,J as A,b as a,E as h,F as N,X as S,Y as j,_ as B}from"./index-66877f9a.js";import{C as g}from"./index-2dde12b1.js";import{u as C}from"./dashboard-05a86e39.js";import"./value-c2034ca5.js";import"./string-6dabfbe0.js";const R={key:0,class:"text-start my-4 w-100"},E={class:"mt-4"},F={class:"flex justify-start items-center"},V={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},z={class:"mr-4 font-bold text-gray-600 text-2xl"},M={class:"flex justify-start items-center"},O={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},P={class:"mr-4 font-bold text-gray-600 text-2xl"},W=T({__name:"Laggard",setup($){const x=S(()=>j(()=>import("./FelLoadingMessage-da26a10d.js"),["assets/FelLoadingMessage-da26a10d.js","assets/index-66877f9a.js","assets/index-78b87750.css"])),i=C(),{dashboard:r}=w(i),d=p(0),c=p(0);I(()=>{i.getSampleLaggards()}),L(()=>r.value.laggards,(n,o)=>{const t=n?.filter(l=>l?.category==="delayed_and_incomplete")[0],e=n?.filter(l=>l?.category==="authorised_already_delayed")[0];d.value=t?.counts?.totalIncomplete??0;const s=[{item:"On-Time",count:t?.counts?.totalDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalDelayed/t?.counts?.totalIncomplete*100:0},{item:"Delayed",count:t?.counts?.totalNotDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalNotDelayed/t?.counts?.totalIncomplete*100:0}];m(s,"late-active-donut");const D=[{type:"<10",value:t?.counts?.lessThanTen},{type:"10 - 20",value:t?.counts?.tenToTwenty},{type:"20 - 30",value:t?.counts?.twentyToThirty},{type:"> 30",value:t?.counts?.graterThanThirty}];u(D,"late-active-since","days since created","number of samples"),c.value=e?.counts?.totalIncomplete??0;const b=[{item:"On-Time",count:e?.counts?.totalDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalDelayed/e?.counts?.totalIncomplete*100:0},{item:"Delayed",count:e?.counts?.totalNotDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalNotDelayed/e?.counts?.totalIncomplete*100:0}];m(b,"late-auth-donut");const _=[{type:"<10",value:e?.counts?.lessThanTen},{type:"10 - 20",value:e?.counts?.tenToTwenty},{type:"20 - 30",value:e?.counts?.twentyToThirty},{type:"> 30",value:e?.counts?.graterThanThirty}];u(_,"late-auth-since","days: created to authorised","number of samples")});const u=(n,o,t,e)=>{const s=new g({container:o,autoFit:!0,height:200,width:600});s.data(n),s.scale({value:{max:150,min:0,alias:e},type:{alias:t}}),s.axis("type",{title:{offset:60,style:{fontSize:12,fontWeight:300}},tickLine:null,line:null}),s.axis("value",{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),s.legend(!1),s.coordinate().transpose(),s.interval().position("type*value").size(26).label("value",{style:{fill:"#8d8d8d"},offset:10}),s.interaction("element-active"),s.render()},m=(n,o)=>{const t=new g({container:o,autoFit:!0,height:150,width:300});t.data(n),t.scale("percent",{formatter:e=>(e=e*100+"%",e)}),t.coordinate("theta",{radius:.75,innerRadius:.6}),t.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),t.annotation(),t.interval().adjust("stack").position("percent").color("item").label("percent",e=>({content:s=>`${s.item}: ${e*100}%`})).tooltip("item*percent",(e,s)=>(s=s*100+"%",{name:e,value:s})),t.interaction("element-active"),t.render()};return(n,o)=>(y(),v(N,null,[f(r).fetchingLaggards?(y(),v("div",R,[k(f(x),{message:"fetching laggard stats ..."})])):A("",!0),a("section",E,[o[4]||(o[4]=a("h1",{class:"text-xl text-gray-700 font-semibold"},"Delayed and incomplete",-1)),o[5]||(o[5]=a("hr",{class:"my-2"},null,-1)),a("div",F,[a("div",V,[a("div",z,h(d.value),1),o[0]||(o[0]=a("div",{class:"font-semibold text-gray-400 text-l"},"Already Delayed",-1))]),o[1]||(o[1]=a("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[a("div",{class:"me-8"},[a("div",{id:"late-active-donut"})]),a("div",null,[a("div",{id:"late-active-since"})])],-1))]),o[6]||(o[6]=a("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"Authosised already delayed",-1)),o[7]||(o[7]=a("hr",{class:"my-2"},null,-1)),a("div",M,[a("div",O,[a("div",P,h(c.value),1),o[2]||(o[2]=a("div",{class:"font-semibold text-gray-400 text-l"},"Released as Delayed",-1))]),o[3]||(o[3]=a("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[a("div",{class:"me-8"},[a("div",{id:"late-auth-donut"})]),a("div",null,[a("div",{id:"late-auth-since"})])],-1))])])],64))}}),G=B(W,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{G as default};
