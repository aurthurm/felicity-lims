import{P as V,e as T,Z as m,R as H,h as _,o as n,x,c as l,b as e,A as k,V as D,L as S,E as d,a as M,a2 as h,F as C,D as $,J as U,z as w,b3 as Q,_ as F,Q as L,b4 as N}from"./index-03a7f0eb.js";import{c as j,u as R}from"./DocumentEntry-25b333f0.js";import{a as Z}from"./document.mutations-3bf537a7.js";import{C as J}from"./plus-dadfddec.js";/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=j("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),K={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center"},W={class:"space-y-4"},Y={class:"relative"},ee={key:0,class:"absolute top-full left-0 z-10 mt-1 w-full rounded-md border bg-white shadow-md"},te={class:"max-h-[200px] overflow-auto p-1"},oe=["onClick"],se={key:1,class:"mr-2 w-4"},ne={class:"flex justify-end gap-2 mt-6"},ie=["disabled"],le=V({__name:"CreateDocumentDialog",props:{isOpen:{type:Boolean,required:!0},initialFolderId:{type:[String,null],required:!1}},emits:["update:isOpen"],setup(y,{emit:f}){const{withClientMutation:u}=T(),p=y,c=f,o=R(),r=m(""),s=m(""),b=m(""),g=m(!1),v=m("");H(()=>p.initialFolderId,i=>{i&&(s.value=i)},{immediate:!0});const E=_(()=>{if(!v.value)return o.folders;const i=v.value.toLowerCase();return o.folders.filter(t=>t.name.toLowerCase().includes(i))}),O=_(()=>{const i=o.folders.find(t=>t.uid===s.value);return i?i.name:"Select folder"}),A=_(()=>r.value.trim()!==""&&s.value!=="");function B(i){s.value=i,g.value=!1}function P(){A.value&&(u(Z,{payload:{name:r.value,folderUid:s.value,documentId:b.value}},"createDocument").then(i=>{o.addDocument(i)}),I(),q())}function q(){I(),c("update:isOpen",!1)}function I(){r.value="",g.value=!1,v.value=""}return(i,t)=>(n(),x(Q,{to:"body"},[i.isOpen?(n(),l("div",K,[e("div",{class:"bg-white rounded-lg shadow-lg p-6 max-w-sm w-full mx-4",onClick:t[4]||(t[4]=w(()=>{},["stop"]))},[t[8]||(t[8]=e("h3",{class:"text-lg font-medium mb-4"},"Create new document",-1)),e("div",W,[e("div",null,[t[5]||(t[5]=e("label",{for:"name",class:"block text-sm font-medium mb-1"},"Document Name",-1)),k(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),class:"flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document name"},null,512),[[D,r.value]])]),e("div",null,[t[6]||(t[6]=e("label",{for:"name",class:"block text-sm font-medium mb-1"},"Document ID",-1)),k(e("input",{id:"docu","onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),class:"flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document id"},null,512),[[D,b.value]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"folder",class:"block text-sm font-medium mb-1"},"Folder X",-1)),e("div",Y,[e("button",{id:"folder",type:"button",onClick:t[2]||(t[2]=a=>g.value=!g.value),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[S(d(O.value)+" ",1),M(h(J),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),g.value?(n(),l("div",ee,[e("div",te,[k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>v.value=a),class:"flex h-8 w-full rounded-sm border-0 bg-white px-3 py-1 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring mb-1",placeholder:"Search folders..."},null,512),[[D,v.value]]),(n(!0),l(C,null,$(E.value,a=>(n(),l("button",{key:a.uid,onClick:Me=>B(a.uid),class:"flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent text-left"},[a.uid===s.value?(n(),x(h(X),{key:0,class:"mr-2 h-4 w-4"})):(n(),l("span",se)),S(" "+d(a.name),1)],8,oe))),128))])])):U("",!0)])])]),e("div",ne,[e("button",{onClick:q,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-white hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Cancel "),e("button",{onClick:P,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",disabled:!A.value}," Create ",8,ie)])])])):U("",!0)]))}}),Ie=F(le,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/CreateDocumentDialog.vue"]]),re={class:"document-card animate-scale-in group"},ae={class:"relative mb-4 rounded-lg overflow-hidden bg-gray-50 aspect-[3/4] flex items-center justify-center"},de={key:0,class:"w-full h-full"},ue=["src","alt"],ce={class:"absolute inset-0 flex items-center justify-center gap-x-2 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},me={class:"h-12 w-12 rounded-full bg-white/90 flex items-center justify-center"},fe={class:"flex flex-col"},pe=["title"],be={class:"text-xs text-muted-foreground mt-1"},ge=V({__name:"DocumentCard",props:{document:{type:Object,required:!0}},setup(y){const f=y,u=L();function p(){u.push({name:"document-editor",params:{documentVersionUid:f.document?.latestVersion?.uid}})}function c(o){return N(new Date(o),"MMM d, yyyy")}return(o,r)=>(n(),l("div",re,[e("div",ae,[o.document?.latestVersion?.thumbnail?(n(),l("div",de,[e("img",{src:`data:image/png;base64,${o.document?.latestVersion?.thumbnail}`,alt:o.document.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,ue),r[0]||(r[0]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1))])):(n(),x(h(G),{key:1,class:"text-gray-400 w-12 h-12"})),e("div",ce,[e("button",{onClick:w(p,["stop"])},[e("div",me,[M(h(z),{class:"text-gray-900 w-5 h-5"})])])])]),e("div",fe,[e("h3",{class:"font-medium text-sm truncate",title:o.document.name},d(o.document.name),9,pe),e("p",be,d(c(o.document.updatedAt)),1)])]))}}),ve=F(ge,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentCard.vue"]]),he={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},ye={key:1,class:"overflow-x-auto rounded-xl shadow"},xe={class:"min-w-full bg-white border border-gray-200"},we=["onClick"],_e={class:"px-4 text-sm text-gray-500"},ke={class:"px-4 text-sm text-gray-500"},De={class:"px-4 text-sm"},Ce=["onClick"],$e={class:"h-8 w-8 rounded-full bg-white/90 flex items-center justify-center"},Ve=V({__name:"DocumentListing",props:{documents:{type:Array,required:!0}},setup(y){const f=m(!1);function u(o){return N(new Date(o),"MMM d, yyyy")}const p=L();function c(o){p.push({name:"document-editor",params:{documentVersionUid:o?.latestVersion?.uid}})}return(o,r)=>f.value?(n(),l("div",he,[(n(!0),l(C,null,$(o.documents,s=>(n(),x(ve,{key:s.id,document:s},null,8,["document"]))),128))])):(n(),l("div",ye,[e("table",xe,[r[0]||(r[0]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left text-sm font-semibold text-gray-600"},"Name"),e("th",{class:"py-3 px-4 text-left text-sm font-semibold text-gray-600"},"Created At"),e("th",{class:"py-3 px-4 text-left text-sm font-semibold text-gray-600"},"Updated At"),e("th",{class:"py-3 px-4 text-left text-sm font-semibold text-gray-600"},"Actions")])],-1)),e("tbody",null,[(n(!0),l(C,null,$(o.documents,s=>(n(),l("tr",{key:s.uid,class:"border-t border-gray-200 hover:bg-gray-50 transition"},[e("td",{class:"px-4 text-sm font-medium text-gray-800 font-semibold",onClick:w(b=>c(s),["stop"])},d(s.name),9,we),e("td",_e,d(u(s.createdAt)),1),e("td",ke,d(u(s.updatedAt)),1),e("td",De,[e("button",{onClick:w(b=>c(s),["stop"])},[e("div",$e,[M(h(z),{class:"text-gray-900 w-5 h-5"})])],8,Ce)])]))),128))])])]))}}),Se=F(Ve,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentListing.vue"]]);export{Ie as C,Se as D};
