import{e as p,d as y,a3 as _,P as x,aa as A,o as h,c as k,a as f,a2 as i,b as o,x as v,F as E,X as a,Y as u,_ as P}from"./index-d30fd8e2.js";import{a as C,b as M}from"./document.queries-c1143ace.js";import{b as w}from"./_isIterateeCall-a4fbb5d5.js";import{t as b}from"./toFinite-76798218.js";var I=Math.floor,O=Math.random;function R(e,t){return e+I(O()*(t-e+1))}var T=parseFloat,L=Math.min,S=Math.random;function V(e,t,s){if(s&&typeof s!="boolean"&&w(e,t,s)&&(t=s=void 0),s===void 0&&(typeof t=="boolean"?(s=t,t=void 0):typeof e=="boolean"&&(s=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=b(e),t===void 0?(t=e,e=0):t=b(t)),e>t){var n=e;e=t,t=n}if(s||e%1||t%1){var d=S();return L(e+d*(t-e+T("1e-"+((d+"").length-1))),t)}return R(e,t)}const{withClientQuery:g}=p(),B=y("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[].sort((e,t)=>t.updatedAt?.getTime()-e.updatedAt?.getTime()).slice(0,25)}),actions:{fetchDocuments(e,t=!1){g(C,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll").then(s=>{this.documents=s?.items,t&&(this.recentDocuments=this.documents.slice(0,25))})},addDocument(e){this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5)},updateDocument(e){const t={...e,updatedAt:new Date};this.documents=this.documents.map(s=>s.uid===e.uid?t:s),this.recentDocuments=[t,...this.recentDocuments.filter(s=>s.uid!==e.uid)].slice(0,5)},deleteDocument(e){this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e)},duplicateDocument(e){const t=this.documents.find(n=>n.uid===e);if(!t)return;const s={...t,uid:V(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date,updatedAt:new Date};this.documents.push(s),this.recentDocuments=[s,...this.recentDocuments].slice(0,5)},setCurrentFolder(e){this.currentFolder=e,this.fetchDocuments({folderUid:e})},getFolders(){g(M,{},"documentFolderAll").then(e=>{this.folders=e?.items})},addFolder(e){this.folders.push(e)},deleteFolder(e){this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e)},updateFolder(e){this.folders=this.folders.map(t=>t.uid===e.uid?e:t)},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t)}},getters:{getChildFolders:e=>t=>e.folders?.filter(s=>s.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(s=>s.folderUid===t)}});/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=({size:e,strokeWidth:t=2,absoluteStrokeWidth:s,color:n,iconNode:d,name:r,class:m,...c},{slots:D})=>_("svg",{...l,width:e||l.width,height:e||l.height,stroke:n||l.stroke,"stroke-width":s?Number(t)*24/Number(e):t,class:["lucide",`lucide-${$(r??"icon")}`],...c},[...d.map(F=>_(...F)),...D.default?[D.default()]:[]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=(e,t)=>(s,{slots:n})=>_(N,{...s,iconNode:t,name:e},n);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=U("FolderIcon",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),G={class:"flex h-screen overflow-hidden bg-background"},H={class:"fixed inset-y-0 left-0 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out -translate-x-full lg:relative lg:translate-x-0"},Z={class:"flex-1 overflow-hidden"},K={class:"lg:hidden p-4 flex items-center"},Q={class:"mr-4 border border-border rounded-md p-2"},X={class:"h-full overflow-auto p-6"},Y=x({__name:"DocumentEntry",setup(e){const t=a(()=>u(()=>import("./index-d30fd8e2.js").then(m=>m.cM),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),s=a(()=>u(()=>import("./FolderNavigation-51602821.js"),["assets/FolderNavigation-51602821.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/plus-181e899b.js","assets/document.mutations-060e3e00.js","assets/document.queries-c1143ace.js","assets/_isIterateeCall-a4fbb5d5.js","assets/toFinite-76798218.js"])),n=a(()=>u(()=>import("./RecentDocuments-34c79b56.js"),["assets/RecentDocuments-34c79b56.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/DocumentListing-d96f40d8.js","assets/document.mutations-060e3e00.js","assets/plus-181e899b.js","assets/document.queries-c1143ace.js","assets/_isIterateeCall-a4fbb5d5.js","assets/toFinite-76798218.js"])),d=a(()=>u(()=>import("./FolderDocuments-4a6476d6.js"),["assets/FolderDocuments-4a6476d6.js","assets/index-d30fd8e2.js","assets/index-81d3252e.css","assets/DocumentListing-d96f40d8.js","assets/document.mutations-060e3e00.js","assets/plus-181e899b.js","assets/document.queries-c1143ace.js","assets/_isIterateeCall-a4fbb5d5.js","assets/toFinite-76798218.js"])),r=B();return A(()=>{r.getFolders()}),(m,c)=>(h(),k(E,null,[f(i(t),{title:"Documents"}),o("div",G,[o("div",H,[f(i(s))]),o("div",Z,[o("div",K,[o("button",Q,[f(i(j),{class:"h-5 w-5"})]),c[0]||(c[0]=o("h1",{class:"text-xl font-medium"},"Document Manager",-1))]),o("div",X,[i(r).currentFolder?(h(),v(i(d),{key:1})):(h(),v(i(n),{key:0}))])])])],64))}}),q=P(Y,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/document/DocumentEntry.vue"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{te as D,j as F,U as c,B as u};
