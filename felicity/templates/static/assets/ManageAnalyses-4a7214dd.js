import{d as N,P as Y,as as R,X as I,D as V,N as v,r as x,n as $,o as l,c as i,b as e,e as m,F as p,p as b,t as c,f as A,at as j,w as k,q as F,G as C,H as G,j as O,_ as q,S as T,bY as H,bZ as K,O as X,k as Z}from"./index-73e47413.js";const z=e("hr",null,null,-1),J={action:"post",class:"mt-4"},Q={class:"flex justify-start items-center mr-4"},W=e("span",{class:"text-gray-700"},"Analyses Template (Auto)",-1),ee={class:"block mx-4"},te=e("option",null,null,-1),se=["value"],oe=e("hr",{class:"mt-4 mb-2"},null,-1),ne={class:"font-bold"},ae=e("hr",{class:"mb-4 mt-2"},null,-1),le={class:"col-span-2 overflow-y-scroll overscroll-contain max-h-[540px] bg-white"},re={class:"w-full"},ie={class:"min-w-full"},ce={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},de=["checked","onChange"],ue=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Analysis",-1),pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Keyword",-1),ye=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},"Description",-1),he={class:"bg-white"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},me=["checked","onChange"],be={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},fe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},ge={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-200"},we=e("hr",null,null,-1),ve=N({__name:"ManageAnalyses",emits:["changeTab"],setup(xe,{emit:S}){const B=O(()=>q(()=>import("./FelAccordion-bf10055d.js"),["assets/FelAccordion-bf10055d.js","assets/index-73e47413.js","assets/index-227a7d92.css"])),{withClientMutation:f}=X(),g=Y(),d=R(),y=I(),M=V(()=>d.getAnalysesServices);v(()=>{d.fetchAnalysesTemplates(),d.fetchAnalysesServices({})});const E=S,w=t=>{E("changeTab",t)},h=x(),D=async()=>{try{T.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(t=>{t.isConfirmed&&f(H,{uid:g.params.sampleUid,analysisTemplateUid:h.value},"samplesApplyTemplate").then(s=>w("analysis-results"))})}catch{}},a=x([]);v(()=>{a.value=[...y.analysisResults?.map(t=>t.analysisUid)]});const _=t=>{a.value.includes(t)?a.value=a.value.filter(s=>s!==t):a.value=[...a.value,t]},u=t=>a.value.includes(t),U=t=>t.every(s=>u(s.uid)),P=t=>{t.every(s=>u(s.uid))?t.forEach(s=>_(s.uid)):t.forEach(s=>{u(s.uid)||_(s.uid)})},L=async()=>{const t=y.analysisResults?.filter(n=>!a.value.includes(n.analysisUid)).map(n=>n.uid),s=a.value.filter(n=>!y.analysisResults?.map(o=>o.analysisUid).includes(n));try{T.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(n=>{n.isConfirmed&&f(K,{sampleUid:g.params.sampleUid,payload:{cancel:t,add:s}},"manageAnalyses").then(o=>w("analysis-results"))})}catch{}};return(t,s)=>{const n=$("motion-slide-right");return l(),i(p,null,[e("section",null,[z,m((l(),i("form",J,[e("div",Q,[W,e("label",ee,[m(e("select",{class:"form-select block w-full py-1","onUpdate:modelValue":s[0]||(s[0]=o=>h.value=o)},[te,(l(!0),i(p,null,b(A(d).analysesTemplates,o=>(l(),i("option",{key:o.uid,value:o.uid},c(o.name),9,se))),128))],512),[[j,h.value]])]),e("button",{type:"button",onClick:s[1]||(s[1]=k(o=>D(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ")])])),[[n]])]),oe,e("h3",ne,"Manually Modify Analyses: ("+c(a.value?.length)+")",1),ae,e("section",le,[e("div",re,[(l(!0),i(p,null,b(M.value,o=>(l(),F(A(B),{key:o[0]},{title:C(()=>[G(c(o[0]),1)]),body:C(()=>[e("table",ie,[e("thead",null,[e("tr",null,[e("th",ce,[e("input",{type:"checkbox",class:"",checked:U(o[1]),onChange:r=>P(o[1])},null,40,de)]),ue,pe,ye])]),e("tbody",he,[(l(!0),i(p,null,b(o[1],r=>m((l(),i("tr",{key:r?.uid},[e("td",_e,[e("input",{type:"checkbox",class:"border-red-500",checked:u(r?.uid),onChange:Ae=>_(r?.uid)},null,40,me)]),e("td",be,c(r?.name),1),e("td",fe,c(r?.keyword),1),e("td",ge,c(r?.description),1)])),[[n]])),128))])])]),_:2},1024))),128)),we,e("button",{type:"button",onClick:s[2]||(s[2]=k(o=>L(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Changes ")])])],64)}}}),Ce=Z(ve,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{Ce as default};
