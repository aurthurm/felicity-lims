const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelSwitch-A36CEUZM.js","assets/index-Daoe3XS9.js","assets/index-C7Rn7ES8.css"])))=>i.map(i=>d[i]);
import{a0 as v,f as w,h as x,a1 as S,a6 as A,aE as U,_ as G,c as t,o as r,A as s,J as l,K as p,L as f,a as D}from"./index-Daoe3XS9.js";import{u as V}from"./user-B30GGGOK.js";const B=v({__name:"Permissions",setup(y,{expose:a}){a();const g=S(()=>A(()=>import("./FelSwitch-A36CEUZM.js"),__vite__mapDeps([0,1,2])));let e=V();const{withClientMutation:b}=w();e.fetchGroupsAndPermissions();const h=x(()=>e.getGroups);function n(o,d){return o?.permissions?.some(u=>u?.uid===d?.uid)??!1}const i=(o,d)=>o?.reduce(function(u,_){return(u[_[d]]=u[_[d]]||[]).push(_),u},{}),c=x(()=>Array.from(Object.entries(i(e.getPermissions,"target"))));function m(o,d){b(U,{groupUid:o?.uid,permissionUid:d?.uid},"updateGroupPermissions").then(u=>e.updateGroupsAndPermissions(u))}function P(o,d,u){u!==n(o,d)&&m(o,d)}const k={FelSwitch:g,get userStore(){return e},set userStore(o){e=o},withClientMutation:b,groups:h,hasPermission:n,groupBy:i,permissions:c,updateGroupPerms:m,handlePermissionToggle:P};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),E={class:"space-y-6"},z={class:"bg-background rounded-lg shadow-sm overflow-hidden"},C={class:"relative"},F={class:"w-full fel-table"},L={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},O={class:"w-full fel-table"},T={class:"divide-y divide-border"},j={class:"bg-muted/50"},N={class:"px-4 py-3 font-medium text-sm text-foreground"},I={class:"px-4 py-2 text-sm text-muted-foreground"};function J(y,a,g,e,b,h){return r(),t("div",E,[s("div",z,[s("div",C,[s("table",F,[s("thead",null,[s("tr",null,[a[0]||(a[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),t(l,null,p(e.groups,n=>(r(),t("th",{key:n.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},f(n.name),1))),128)),a[1]||(a[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),s("div",L,[s("table",O,[s("tbody",T,[(r(!0),t(l,null,p(e.permissions,n=>(r(),t(l,{key:n[0]},[s("tr",j,[s("td",N,f(n[0]),1),(r(!0),t(l,null,p(e.groups,i=>(r(),t("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:i.uid}))),128))]),(r(!0),t(l,null,p(n[1],i=>(r(),t("tr",{key:i.uid},[s("td",I,f(i.action),1),(r(!0),t(l,null,p(e.groups,c=>(r(),t("td",{key:c.uid,class:"px-4 py-2"},[D(e.FelSwitch,{"model-value":e.hasPermission(c,i),"onUpdate:modelValue":m=>e.handlePermissionToggle(c,i,m),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])])}const R=G(B,[["render",J],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{R as default};
