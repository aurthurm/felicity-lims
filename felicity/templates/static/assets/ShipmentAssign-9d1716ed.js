import{P as $,u as q,h as k,f as z,Z as K,$ as w,o as a,c as i,b as e,A as l,F as u,D as h,E as r,a2 as m,a4 as O,a as b,K as S,L as C,z as A,C as U,W as f,X as W,Y as X,_ as Y}from"./index-03a7f0eb.js";import D from"./FelButton-3b88ebb7.js";import{u as Z}from"./shipment-f32c686b.js";import{u as G}from"./shipment-2117be2e.js";const H={class:"overflow-x-auto mt-4"},J={action:"post",class:"p-1"},Q={class:"flex justify-start mb-4"},ee={class:"flex justify-between items-center"},te=["value"],se={class:"ml-6 mt-2"},oe={class:"overflow-x-auto mt-4"},ae={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ie={key:0,class:"py-4 text-center"},re={key:1,class:"min-w-full"},ne={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},le={class:"bg-white"},de=["onUpdate:modelValue","onChange"],ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},pe={class:"text-sm leading-5 text-sky-800 font-semibold"},ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},me={class:"text-sm leading-5 text-sky-800 font-semibold"},ge={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ye={class:"text-sm leading-5 text-sky-800 font-semibold"},he={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"text-sm leading-5 text-sky-800"},fe=["onUpdate:modelValue","disabled"],xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},_e={class:"text-sm leading-5 text-sky-800"},ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ke={class:"text-sm leading-5 text-sky-800"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se={class:"text-sm leading-5 text-sky-800"},Ce={class:"my-4"},Ae=$({__name:"ShipmentAssign",setup(Ue){const V=W(()=>X(()=>import("./FelLoadingMessage-343c7df3.js"),["assets/FelLoadingMessage-343c7df3.js","assets/index-03a7f0eb.js","assets/index-81d3252e.css"])),d=Z(),x=q(),{manageSamples:T}=G();d.fetchReferralLaboratories();const R=k(()=>d.getShipment);x.fetchSampleTypes();const g=z({sampleTypeUid:void 0,analysisUid:void 0}),c=K(!1),_=k(()=>{const s=[];return d.getSamples?.forEach(p=>{s?.some(y=>y.uid===p.uid)||s.push(p)}),s}),F=()=>{v(),d.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,...g})},E=()=>{const s=B();T(R?.value?.uid,s,"assign")};function v(){return d.samples?.filter(s=>s.checked)}function B(){return v().map(s=>({sampleUid:s.uid,shipedSampleUid:void 0,analyses:s.analysisResults?.filter(t=>t.checked)?.map(t=>t.uid)}))?.filter(s=>s?.analyses?.length>0)}function I(s){N()?c.value=!0:c.value=!1}function L(s){s.checked=!0}function M(s){s.checked=!1}async function j(){await _?.value?.forEach(s=>c.value?L(s):M(s))}function N(){return _?.value?.every(s=>s.checked===!0)}return(s,t)=>{const p=w("motion-slide-left"),y=w("motion-slide-right");return a(),i(u,null,[e("div",H,[l((a(),i("form",J,[e("div",Q,[e("label",ee,[t[3]||(t[3]=e("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Sample Type",-1)),l(e("select",{name:"analyses_uids","onUpdate:modelValue":t[0]||(t[0]=o=>g.sampleTypeUid=o),class:"form-input mt-1 block w-full py-1"},[(a(!0),i(u,null,h(m(x).sampleTypes,o=>(a(),i("option",{key:o.uid,value:o.uid},r(o.name),9,te))),128))],512),[[O,g.sampleTypeUid]])]),e("div",se,[l(b(D,{onClick:t[1]||(t[1]=A(o=>F(),["prevent"])),color:"sky-800",class:"p-1"},{default:S(()=>t[4]||(t[4]=[C("Apply Filters")])),_:1},512),[[U,!0]])])])])),[[p]])]),e("div",oe,[e("div",ae,[m(d).fetchingSamples?(a(),i("div",ie,[b(m(V),{message:"Fetching samples ..."})])):(a(),i("table",re,[e("thead",null,[e("tr",null,[e("th",ne,[l(e("input",{type:"checkbox",onChange:j,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o)},null,544),[[f,c.value]])]),t[5]||(t[5]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1)),t[6]||(t[6]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1)),t[7]||(t[7]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample Type ",-1)),t[8]||(t[8]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Sample ID ",-1)),t[9]||(t[9]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1)),t[10]||(t[10]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1)),t[11]||(t[11]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1)),t[12]||(t[12]=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1))])]),l((a(),i("tbody",le,[(a(!0),i(u,null,h(m(d).samples,o=>(a(),i("tr",{key:o?.uid},[e("td",null,[l(e("input",{type:"checkbox","onUpdate:modelValue":n=>o.checked=n,onChange:n=>I()},null,40,de),[[f,o.checked]])]),t[13]||(t[13]=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1)),e("td",ce,[e("div",pe,r(o?.sampleId),1)]),e("td",ue,[e("div",me,r(o?.sampleType?.name),1)]),e("td",ge,[e("div",ye,r(o?.analysisRequest?.clientRequestId),1)]),e("td",he,[e("div",be,[e("ul",null,[(a(!0),i(u,null,h(o?.analysisResults,n=>(a(),i("li",{class:"flex justify-start items-center",key:n.uid},[l(e("input",{type:"checkbox","onUpdate:modelValue":P=>n.checked=P,class:"mr-2",disabled:!o.checked},null,8,fe),[[f,n.checked]]),e("span",null,r(n?.analysis?.name),1),e("span",null,r(n?.status),1)]))),128))])])]),e("td",xe,[e("div",_e,r(o?.createdAt),1)]),e("td",ve,[e("div",ke,r(o?.dateReceived),1)]),e("td",we,[e("div",Se,r(o?.status),1)])]))),128))])),[[y]])]))])]),e("section",Ce,[l(b(D,{onClick:A(E,["prevent"]),color:"orange-600"},{default:S(()=>t[14]||(t[14]=[C("Assign Samples")])),_:1},512),[[U,!0]])])],64)}}}),Fe=Y(Ae,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{Fe as default};
