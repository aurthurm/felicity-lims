const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-CZOh13og.js","assets/index-Cdc6vSVw.js","assets/index-B3SP4dh7.css","assets/Billing-DmmxPYZP.js","assets/billing.mutations-SMzMhRn_.js","assets/billing-BSZUQUJ0.js","assets/billing.queries-DriKblyU.js"])))=>i.map(i=>d[i]);
import{a0 as de,u as le,f as ae,a7 as b,g as z,h as k,a1 as R,a6 as K,_ as ue,r as C,c as d,o as r,A as e,C as Q,E as f,a as w,N as g,P as G,J as y,K as v,Q as J,D as j,L as a,F as m,a3 as W,a2 as P,a9 as Y}from"./index-Cdc6vSVw.js";import{Q as ce,T as pe,U as fe,W as me}from"./analyses.mutations-DiZ_xJnn.js";import{u as ge}from"./setup-CYxvLUvq.js";import{u as ye}from"./analysis-C80mPHS9.js";const xe=de({__name:"AnalysesProfiles",setup(q,{expose:o}){o();const N=R(()=>K(()=>import("./vue-multiselect.esm-CZOh13og.js"),__vite__mapDeps([0,1,2]))),s=R(()=>K(()=>import("./Billing-DmmxPYZP.js"),__vite__mapDeps([3,1,2,4,5,6]))),c=ye(),E=le(),M=ge(),{withClientMutation:x}=ae();let S=b("analyses-services");const A=["analyses-services","mappings","billing"];let t=b(!1),u=b("");const _=b(!0);let i=z({});const H=k(()=>E.getSampleTypes),X=k(()=>M.getDepartments);c.fetchAnalysesProfilesAndServices();const F=k(()=>c.getAnalysesServices),Z=k(()=>c.getAnalysesProfiles);function O(){const n={name:i.name,keyword:i.keyword,description:i.description,departmentUid:i.departmentUid,sampleTypes:i.sampleTypes?.map(l=>l.uid),active:i.active};x(ce,{payload:n},"createProfile").then(l=>c.addAnalysisProfile(l))}function V(){const n={name:i.name,keyword:i.keyword,description:i.description,departmentUid:i.departmentUid,active:i.active,services:i.analyses?.map(l=>l.uid),sampleTypes:i.sampleTypes?.map(l=>l.uid)};x(pe,{uid:i.uid,payload:n},"updateProfile").then(l=>c.updateAnalysesProfile(l))}function $(n){Object.assign(i,{...n}),F.value?.forEach(l=>{l[1].forEach(h=>{h.checked=!1,h.profiles?.some(ie=>ie.uid===i.uid)&&(h.checked=!0)})}),c.fetchProfileMappings(n?.uid)}function ee(){const n=[];F.value?.forEach(l=>{l[1].forEach(h=>{h.checked&&n.push(h)})}),i.analyses=n,V()}function oe(n,l={}){_.value=n,t.value=!0,u.value=(n?"CREATE":"EDIT")+" ANALYSES PROFILE",n?Object.assign(i,{}):Object.assign(i,{...l})}function te(){_.value===!0&&O(),_.value===!1&&V(),t.value=!1}c.fetchCodingStandards();const se=k(()=>c.profileMapings?.filter(n=>n.profileUid===i?.uid));let T=b(!1),D=b("");const U=b(!0),p=z({uid:void 0,profileUid:void 0,codingStandardUid:void 0,name:"",code:"",description:""});function B(){const n={profileUid:i?.uid,codingStandardUid:p.codingStandardUid,name:p.name,code:p.code,description:p.description};x(fe,{payload:n},"createProfileMapping").then(l=>c.addProfileMapping(l))}function L(){const n={profileUid:i?.uid,codingStandardUid:p.codingStandardUid,name:p.name,code:p.code,description:p.description};x(me,{uid:p.uid,payload:n},"updateProfileMapping").then(l=>c.updateProfileMapping(l))}function ne(n,l={}){U.value=n,T.value=!0,D.value=(n?"CREATE":"EDIT")+" CONCEPT MAPPING",n?Object.assign(p,{}):Object.assign(p,{...l})}function re(){U.value===!0&&B(),U.value===!1&&L(),T.value=!1}const I={VueMultiselect:N,Billing:s,analysisStore:c,sampleStore:E,setupStore:M,withClientMutation:x,get currentTab(){return S},set currentTab(n){S=n},tabs:A,get showModal(){return t},set showModal(n){t=n},get formTitle(){return u},set formTitle(n){u=n},formAction:_,get analysisProfile(){return i},set analysisProfile(n){i=n},sampleTypes:H,departments:X,analysesServices:F,analysesProfiles:Z,addAnalysisProfile:O,editAnalysisProfile:V,selectProfile:$,updateProfile:ee,FormManager:oe,saveForm:te,mappings:se,get showMappingModal(){return T},set showMappingModal(n){T=n},get mappingFormTitle(){return D},set mappingFormTitle(n){D=n},mappingFormAction:U,mappingForm:p,addMapping:B,updateMapping:L,MappingFormManager:ne,saveMappingForm:re};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),be={class:"space-y-6"},ve={class:"grid grid-cols-12 gap-6"},_e={class:"col-span-3"},he={class:"rounded-lg border border-border bg-card"},Pe={class:"overflow-y-auto max-h-[540px] p-2"},ke={class:"space-y-1"},we=["onClick"],Me={class:"flex items-center justify-between"},Se={class:"text-sm font-medium"},Ae={key:0,class:"text-xs text-muted-foreground"},Te={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},Ue={key:0,class:"col-span-9"},Ce={class:"space-y-6"},Ee={class:"rounded-lg border border-border bg-card p-6"},Fe={class:"flex items-center justify-between"},Ve={class:"space-y-1"},De={class:"flex items-center space-x-2"},je={class:"text-xl font-semibold text-foreground"},Ne={key:0,class:"px-2 py-0.5 text-xs font-medium bg-accent text-accent-foreground rounded"},Oe={key:0,class:"text-sm text-muted-foreground"},Be={class:"flex items-center space-x-2"},Le={class:"border-b border-border"},Ie={class:"flex space-x-2"},ze=["onClick"],Re={class:"rounded-lg border border-border bg-card"},Ke={class:"p-6"},Qe={key:0,class:"space-y-6"},Ge={class:"grid grid-cols-3 gap-6"},Je={class:"text-sm font-medium"},We={class:"space-y-2 pt-2"},Ye={class:"flex items-center h-5"},qe=["id","onUpdate:modelValue"],He=["for"],Xe={class:"flex justify-end pt-4"},Ze={key:1,class:"space-y-6"},$e={class:"flex justify-between items-center"},eo={class:"overflow-hidden rounded-lg border border-border"},oo={class:"w-full"},to={class:"px-6 py-4 whitespace-nowrap border-b border-border"},so={class:"font-medium text-foreground"},no={key:0,class:"text-sm text-muted-foreground"},ro={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},io={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},lo={class:"px-6 py-4 whitespace-nowrap text-right border-b border-border"},ao=["onClick"],uo={key:2,class:"space-y-6"},co={key:1,class:"col-span-9"},po={class:"text-xl font-semibold text-foreground"},fo={class:"space-y-4"},mo={class:"space-y-2"},go={class:"space-y-2"},yo={class:"space-y-2"},xo=["value"],bo={class:"space-y-2"},vo={class:"space-y-2"},_o={class:"flex items-center space-x-2"},ho={class:"text-xl font-semibold text-foreground"},Po={class:"space-y-4"},ko={class:"space-y-2"},wo=["value"],Mo={class:"space-y-2"},So={class:"space-y-2"},Ao={class:"space-y-2"};function To(q,o,N,s,c,E){const M=C("fel-button"),x=C("fel-heading"),S=C("fel-accordion"),A=C("fel-modal");return r(),d(y,null,[e("div",be,[w(x,{title:"Analyses Profiles"},{default:g(()=>[w(M,{onClick:o[0]||(o[0]=t=>s.FormManager(!0))},{default:g(()=>[...o[16]||(o[16]=[G("Add Analyses Profile",-1)])]),_:1})]),_:1}),e("div",ve,[e("section",_e,[e("div",he,[o[17]||(o[17]=e("div",{class:"p-4 border-b border-border"},[e("h3",{class:"text-sm font-medium text-muted-foreground"},"Profiles")],-1)),e("div",Pe,[e("ul",ke,[(r(!0),d(y,null,v(s.analysesProfiles,t=>(r(),d("li",{key:t.uid,onClick:j(u=>s.selectProfile(t),["prevent","stop"]),class:J(["rounded-md p-2 cursor-pointer transition-colors duration-200",t?.uid===s.analysisProfile?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[e("div",Me,[e("span",Se,a(t?.name),1),t?.keyword?(r(),d("span",Ae,a(t?.keyword),1)):f("",!0)]),t?.description?(r(),d("p",Te,a(t?.description),1)):f("",!0)],10,we))),128))])])])]),s.analysisProfile?.uid!==void 0?(r(),d("section",Ue,[e("div",Ce,[e("div",Ee,[e("div",Fe,[e("div",Ve,[e("div",De,[e("h2",je,a(s.analysisProfile?.name),1),s.analysisProfile?.keyword?(r(),d("span",Ne,a(s.analysisProfile?.keyword),1)):f("",!0)]),s.analysisProfile?.description?(r(),d("p",Oe,a(s.analysisProfile?.description),1)):f("",!0)]),e("div",Be,[e("button",{onClick:o[1]||(o[1]=t=>s.FormManager(!1,s.analysisProfile)),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},[...o[18]||(o[18]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])])])])]),e("nav",Le,[e("div",Ie,[(r(),d(y,null,v(s.tabs,t=>e("button",{key:t,class:J(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",s.currentTab===t?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:u=>s.currentTab=t},a(t),11,ze)),64))])]),e("div",Re,[e("div",Ke,[s.currentTab==="analyses-services"?(r(),d("div",Qe,[e("div",Ge,[(r(!0),d(y,null,v(s.analysesServices,t=>(r(),d("div",{key:t[0],class:"space-y-4"},[w(S,null,{title:g(()=>[e("span",Je,a(t[0]),1)]),body:g(()=>[e("ul",We,[(r(!0),d(y,null,v(t[1],u=>(r(),d("li",{key:u?.uid,class:"flex items-start space-x-2"},[e("div",Ye,[m(e("input",{type:"checkbox",id:`toggle-${u?.uid}`,"onUpdate:modelValue":_=>u.checked=_,class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,qe),[[W,u.checked]])]),e("label",{for:`toggle-${u?.uid}`,class:"text-sm text-foreground"},a(u?.name),9,He)]))),128))])]),_:2},1024)]))),128))]),e("div",Xe,[e("button",{onClick:o[2]||(o[2]=t=>s.updateProfile()),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Profile ")])])):f("",!0),s.currentTab==="mappings"?(r(),d("div",Ze,[e("div",$e,[o[20]||(o[20]=e("h3",{class:"text-lg font-medium text-foreground"},"Concept Mappings",-1)),e("button",{onClick:o[3]||(o[3]=t=>s.MappingFormManager(!0)),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"},[...o[19]||(o[19]=[e("span",{class:"mr-2"},"+",-1),G(" Add Mapping ",-1)])])]),e("div",eo,[e("table",oo,[o[21]||(o[21]=e("thead",null,[e("tr",{class:"border-b border-border bg-muted/50"},[e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Name"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Code"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Standard"),e("th",{class:"px-6 py-3 text-right text-sm font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",null,[(r(!0),d(y,null,v(s.mappings,t=>(r(),d("tr",{key:t.uid,class:"hover:bg-accent/50 transition-colors duration-200"},[e("td",to,[e("div",so,a(t?.name),1),t?.description?(r(),d("div",no,a(t?.description),1)):f("",!0)]),e("td",ro,a(t?.code),1),e("td",io,a(t?.codingStandard?.name),1),e("td",lo,[e("button",{onClick:u=>s.MappingFormManager(!1,t),class:"inline-flex items-center px-3 py-1.5 border border-input bg-background text-foreground text-sm font-medium transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ao)])]))),128))])])])])):f("",!0),s.currentTab==="billing"?(r(),d("div",uo,[w(s.Billing,{target:"profile",targetUid:s.analysisProfile?.uid},null,8,["targetUid"])])):f("",!0)])])])])):(r(),d("section",co,[...o[22]||(o[22]=[e("div",{class:"rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"},[e("div",{class:"text-4xl text-muted-foreground"},"ðŸ“‹"),e("h3",{class:"text-lg font-medium text-foreground"},"No Profile Selected"),e("p",{class:"text-sm text-muted-foreground"},"Select a profile from the list to view its details")],-1)])]))])]),s.showModal?(r(),Q(A,{key:0,onClose:o[10]||(o[10]=t=>s.showModal=!1)},{header:g(()=>[e("h3",po,a(s.formTitle),1)]),body:g(()=>[e("form",{onSubmit:j(s.saveForm,["prevent"]),class:"p-6 space-y-6"},[e("div",fo,[e("label",mo,[o[23]||(o[23]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Profile Name",-1)),m(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>s.analysisProfile.name=t),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter profile name"},null,512),[[P,s.analysisProfile.name]])]),e("label",go,[o[24]||(o[24]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Keyword",-1)),m(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>s.analysisProfile.keyword=t),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter keyword"},null,512),[[P,s.analysisProfile.keyword]])]),e("label",yo,[o[26]||(o[26]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),m(e("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>s.analysisProfile.departmentUid=t),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[o[25]||(o[25]=e("option",{value:""},"Select department",-1)),(r(!0),d(y,null,v(s.departments,t=>(r(),d("option",{key:t.uid,value:t.uid},a(t.name),9,xo))),128))],512),[[Y,s.analysisProfile.departmentUid]])]),e("label",bo,[o[27]||(o[27]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),w(s.VueMultiselect,{modelValue:s.analysisProfile.sampleTypes,"onUpdate:modelValue":o[7]||(o[7]=t=>s.analysisProfile.sampleTypes=t),options:s.sampleTypes,multiple:!0,"track-by":"uid",label:"name",placeholder:"Select sample types",class:"multiselect-primary"},null,8,["modelValue","options"])]),e("label",vo,[o[28]||(o[28]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":o[8]||(o[8]=t=>s.analysisProfile.description=t),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter profile description"},null,512),[[P,s.analysisProfile.description]])]),e("div",_o,[m(e("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":o[9]||(o[9]=t=>s.analysisProfile.active=t),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[W,s.analysisProfile.active]]),o[29]||(o[29]=e("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Active",-1))])]),o[30]||(o[30]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):f("",!0),s.showMappingModal?(r(),Q(A,{key:1,onClose:o[15]||(o[15]=t=>s.showMappingModal=!1)},{header:g(()=>[e("h3",ho,a(s.mappingFormTitle),1)]),body:g(()=>[e("form",{onSubmit:j(s.saveMappingForm,["prevent"]),class:"p-6 space-y-6"},[e("div",Po,[e("label",ko,[o[32]||(o[32]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Coding Standard",-1)),m(e("select",{"onUpdate:modelValue":o[11]||(o[11]=t=>s.mappingForm.codingStandardUid=t),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[o[31]||(o[31]=e("option",{value:""},"Select standard",-1)),(r(!0),d(y,null,v(s.analysisStore.codingStandards,t=>(r(),d("option",{key:t.uid,value:t.uid},a(t.name),9,wo))),128))],512),[[Y,s.mappingForm.codingStandardUid]])]),e("label",Mo,[o[33]||(o[33]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Name",-1)),m(e("input",{"onUpdate:modelValue":o[12]||(o[12]=t=>s.mappingForm.name=t),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping name"},null,512),[[P,s.mappingForm.name]])]),e("label",So,[o[34]||(o[34]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Code",-1)),m(e("input",{"onUpdate:modelValue":o[13]||(o[13]=t=>s.mappingForm.code=t),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping code"},null,512),[[P,s.mappingForm.code]])]),e("label",Ao,[o[35]||(o[35]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":o[14]||(o[14]=t=>s.mappingForm.description=t),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter mapping description"},null,512),[[P,s.mappingForm.description]])])]),o[36]||(o[36]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):f("",!0)],64)}const Vo=ue(xe,[["render",To],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesProfiles.vue"]]);export{Vo as default};
