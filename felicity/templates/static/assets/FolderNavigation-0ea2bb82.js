import{P as $,Z as y,h as k,r as T,o as n,c as u,b as t,z as v,x as p,az as I,a2 as a,a1 as _,E as j,a as b,A as N,J as D,F as E,D as M,_ as V,e as B,V as H,L as P,b3 as S}from"./index-03a7f0eb.js";import{c as h,u as O,F as U}from"./DocumentEntry-25b333f0.js";import{C as q,P as z}from"./plus-dadfddec.js";import{A as R}from"./document.mutations-3bf537a7.js";import"./document.queries-6d1ef990.js";import"./_isIterateeCall-6b47236c.js";import"./toFinite-27d2562d.js";/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=h("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=h("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=h("FolderOpenIcon",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=h("FolderPlusIcon",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=h("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),W={key:1,class:"w-4"},X={class:"mr-2 text-muted-foreground"},Y={class:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200"},ee={class:"relative"},te={key:0,class:"absolute right-0 mt-1 w-48 rounded-md border bg-white p-1 text-popover-foreground shadow-md z-10"},oe={key:0,class:"mt-1 ml-1 pl-1 border-l border-border"},le=$({__name:"FolderItem",props:{folder:{type:Object,required:!0},level:{type:Number,default:0}},emits:["add-subfolder"],setup(f,{emit:A}){const l=f,r=O(),i=y(!1),s=k(()=>r.getChildFolders(l.folder.uid)),g=k(()=>r.currentFolder===l.folder.uid),m=k(()=>!!l.folder.expanded);function F(){r.setCurrentFolder(l.folder.uid)}function w(){r.toggleFolderExpanded(l.folder.uid)}function C(){const e=s.value.length>0,o=r.documents.some(c=>c.folderUid===l.folder.uid);e||o?window.confirm("Delete this folder and all its contents?")&&r.deleteFolder(l.folder.uid):r.deleteFolder(l.folder.uid),i.value=!1}const d={mounted(e,o){e._clickOutside=c=>{e===c.target||e.contains(c.target)||o.value(c)},document.addEventListener("click",e._clickOutside)},unmounted(e){document.removeEventListener("click",e._clickOutside)}};return(e,o)=>{const c=T("FolderItem",!0);return n(),u("div",null,[t("div",{class:_(["flex justify-start items-center p-2 rounded-md cursor-pointer group transition-colors duration-200",f.level>0&&"ml-2"]),onClick:F},[t("div",{class:"flex items-center mr-2",onClick:v(w,["stop"])},[s.value.length>0?(n(),p(I(s.value.length>0?m.value?a(q):a(Z):"div"),{key:0,class:"w-4 h-4 text-muted-foreground"})):(n(),u("div",W))]),t("div",X,[(n(),p(I(m.value?a(G):a(U)),{class:_(["w-[18px] h-[18px]",g.value&&"text-sky-600"])},null,8,["class"]))]),t("div",{class:_(["flex-1 truncate",g.value&&"text-sky-600"])},j(f.folder.name),3),t("div",Y,[t("button",{onClick:o[0]||(o[0]=v(x=>e.$emit("add-subfolder",f.folder.uid),["stop"])),class:"h-7 w-7 flex items-center justify-center rounded-full hover:bg-secondary transition-colors"},[b(a(z),{class:"text-muted-foreground w-4 h-4"})]),t("div",ee,[t("button",{onClick:o[1]||(o[1]=v(x=>i.value=!i.value,["stop"])),class:"h-7 w-7 flex items-center justify-center rounded-full hover:bg-secondary transition-colors"},[b(a(J),{class:"text-muted-foreground w-4 h-4"})]),i.value?N((n(),u("div",te,[t("button",{onClick:v(C,["stop"]),class:"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground text-destructive w-full text-left"},[b(a(Q),{class:"mr-2 w-4 h-4"}),o[3]||(o[3]=t("span",null,"Delete Folder",-1))])])),[[d,()=>i.value=!1]]):D("",!0)])])],2),m.value&&s.value.length>0?(n(),u("div",oe,[(n(!0),u(E,null,M(s.value,x=>(n(),p(c,{key:x.uid,folder:x,level:f.level+1,onAddSubfolder:o[2]||(o[2]=L=>e.$emit("add-subfolder",L))},null,8,["folder","level"]))),128))])):D("",!0)])}}}),se=V(le,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/FolderItem.vue"]]),ne={class:"h-full overflow-hidden flex flex-col"},re={class:"pr-4 py-3 flex items-center justify-between"},ie={class:"flex-1 overflow-auto"},de={class:"pr-2 py-1"},ae={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center"},ue={class:"text-lg font-medium mb-4"},ce={class:"mb-4"},fe={class:"flex justify-end gap-2"},me=$({__name:"FolderNavigation",setup(f){const{withClientMutation:A}=B(),l=O(),r=y(!1),i=y(""),s=y(null),g=k(()=>l.getChildFolders(null));function m(d){s.value=d,r.value=!0}function F(){r.value=!1,i.value=""}function w(){if(i.value.trim()){if(A(R,{payload:{name:i.value,parentUid:s.value}},"createDocumentFolder").then(d=>l.addFolder(d)),s.value){const d=l.folders.find(e=>e.uid===s.value);d&&!d.expanded&&l.toggleFolderExpanded(s.value)}i.value="",r.value=!1}}function C(d){return l.folders.find(e=>e.uid===d)}return(d,e)=>(n(),u("div",ne,[t("div",re,[e[3]||(e[3]=t("h2",{class:"font-semibold text-sm"},"Folders",-1)),t("button",{onClick:e[0]||(e[0]=o=>m(null)),class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none hover:bg-accent hover:text-accent-foreground h-8 w-8"},[b(a(z),{class:"w-4 h-4"})])]),t("div",ie,[t("div",de,[(n(!0),u(E,null,M(g.value,o=>(n(),p(se,{key:o.uid,folder:o,onAddSubfolder:m},null,8,["folder"]))),128))])]),(n(),p(S,{to:"body"},[r.value?(n(),u("div",ae,[t("div",{class:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-4",onClick:e[2]||(e[2]=v(()=>{},["stop"]))},[t("h3",ue,j(s.value?`Add subfolder to ${C(s.value)?.name}`:"Add new folder"),1),t("div",ce,[e[4]||(e[4]=t("label",{for:"folderName",class:"block text-sm font-medium mb-1"},"Folder Name",-1)),N(t("input",{id:"folderName","onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),class:"flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",placeholder:"Enter folder name"},null,512),[[H,i.value]])]),t("div",fe,[t("button",{onClick:F,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-white hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Cancel "),t("button",{onClick:w,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[b(a(K),{class:"w-4 h-4 mr-2"}),e[5]||(e[5]=P(" Add Folder "))])])])])):D("",!0)]))]))}}),ke=V(me,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/FolderNavigation.vue"]]);export{ke as default};
