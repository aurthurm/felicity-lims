import{W as G,f as N,i as h,a2 as c,h as k,r as T,o as u,c as f,O as e,F as b,H as _,J as m,a7 as a,z as M,M as A,C as O,D as E,Z as D,a4 as I,af as R,L as P,aa as o,av as j,aw as B,_ as L}from"./index-93739211.js";import{u as F}from"./user-3b0a83d1.js";import"./_queries-2ba61825.js";const U={class:"space-y-6"},V={class:"flex items-center justify-between"},H={class:"border border-border bg-card rounded-lg shadow-sm"},$={class:"relative w-full overflow-auto"},z={class:"w-full caption-bottom text-sm"},K={class:"[&_tr:last-child]:border-0"},W={class:"px-4 py-2 align-middle"},Y={class:"px-4 py-2 align-middle text-primary"},J={class:"px-4 py-2 align-middle text-right"},Q=["onClick"],Z={class:"text-lg font-semibold text-foreground"},q={class:"space-y-4"},X={class:"space-y-2"},ee={class:"space-y-2"},se=["size"],te=["value"],oe=G({__name:"Groups",setup(ie){const g=[o.ADMINISTRATION,o.DASHBOARD,o.CLIENTS,o.PATIENTS,o.PATIENTS_COMPACT,o.SAMPLES,o.QC_SAMPLES,o.WORKSHEETS,o.NOTICE_MANAGER,o.BIO_BANKING,o.INVENTORY,o.REFERRAL,o.SCHEMES,o.DOCUMENT];let d=F();const{withClientMutation:v}=N();d.fetchGroupsAndPermissions();const S=h(()=>d.getGroups);c("permissions");let l=c(!1),x=c("");const p=c(!0);let r=k({});function y(i,s={}){p.value=i,l.value=!0,x.value=(i?"CREATE":"EDIT")+" ANALYSES PROFILE",i?Object.assign(r,{name:"",pages:[]}):Object.assign(r,{...s})}function w(){const i={...r},s=i.pages;i.pages=s.join(","),p.value===!0&&v(j,{payload:i},"createGroup").then(n=>d.addGroup(n)),p.value===!1&&v(B,{uid:r?.uid,payload:{name:i.name,pages:i.pages}},"updateGroup").then(n=>d.updateGroup(n)),l.value=!1}const C=(i,s)=>i?.reduce(function(n,t){return(n[t[s]]=n[t[s]]||[]).push(t),n},{});return h(()=>Array.from(Object.entries(C(d.getPermissions,"target")))),(i,s)=>{const n=T("fel-modal");return u(),f(b,null,[e("div",U,[e("div",V,[s[4]||(s[4]=e("h2",{class:"text-2xl font-semibold text-foreground"},"Groups",-1)),e("button",{onClick:s[0]||(s[0]=t=>y(!0)),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Add Group ")]),e("div",H,[e("div",$,[e("table",z,[s[5]||(s[5]=e("thead",{class:"[&_tr]:border-b"},[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Group Name"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Access Pages"),e("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",K,[(u(!0),f(b,null,_(S.value,t=>(u(),f("tr",{key:t.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",W,m(t.name),1),e("td",Y,m(t.pages),1),e("td",J,[e("button",{onClick:ne=>y(!1,t),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,Q)])]))),128))])])])])]),a(l)?(u(),M(n,{key:0,onClose:s[3]||(s[3]=t=>R(l)?l.value=!1:l=!1)},{header:A(()=>[e("h3",Z,m(a(x)),1)]),body:A(()=>[e("form",{onSubmit:O(w,["prevent"]),class:"space-y-4"},[e("div",q,[e("div",X,[s[6]||(s[6]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Group Name ",-1)),E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a(r).name=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter group name..."},null,512),[[D,a(r).name]])]),e("div",ee,[s[7]||(s[7]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Pages ",-1)),E(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>a(r).pages=t),multiple:"",size:g.length,class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(u(),f(b,null,_(g,t=>e("option",{key:t,value:t,class:"py-1"},m(t),9,te)),64))],8,se),[[I,a(r).pages]])])]),s[8]||(s[8]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ")],-1))],32)]),_:1})):P("",!0)],64)}}}),de=L(oe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{de as default};
