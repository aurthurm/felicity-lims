import{S as G,f as X,a0 as l,h as Y,a7 as q,ae as z,r as D,o as r,c as a,a as T,L as A,M as H,N as e,F as f,E as x,H as u,K as p,y as K,A as Q,C as b,X as k,Y as B,_ as W}from"./index-56caabce.js";import{g as Z,a as J,X as R,Y as ee,Z as te}from"./microbiology.mutations-46e71ed8.js";const se={class:"overflow-x-auto"},oe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-background shadow-dashboard rounded-lg"},ie={class:"min-w-full divide-y divide-border"},ne={class:"bg-background divide-y divide-border"},re={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ae={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},de={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},le={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ue={class:"px-3 py-3.5 whitespace-nowrap text-right text-sm"},ce=["onClick"],me={class:"text-xl font-semibold text-foreground"},fe={class:"space-y-4"},pe={class:"grid grid-cols-1 gap-4"},be={class:"block"},ve={class:"block"},ge={class:"flex gap-4"},xe={class:"w-2/3 space-y-2"},ye={class:"block"},he={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},_e=["value"],we={class:"ml-2 text-sm text-foreground"},Ae={class:"w-1/3"},ke={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Oe={class:"text-sm text-foreground"},Ce=["onClick"],Se={class:"flex gap-4"},Pe={class:"w-2/3 space-y-2"},De={class:"block"},Le={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},Ve=["value"],Ee={class:"ml-2 text-sm text-foreground"},Me={class:"w-1/3"},Ne={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Te={class:"text-sm text-foreground"},Be=["onClick"],Fe=G({__name:"AstPanel",setup($e){const{withClientMutation:L,withClientQuery:O}=X(),y=l(!1),V=l(""),E=l(!0),h=l(""),_=l(""),m=l([]),v=l([]),w=l([]),c=l([]),C=l([]),o=Y({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});q(()=>{F(),M(),$()});function F(){O(Z,{},"abxLaboratoryAntibiotics").then(i=>{i&&(v.value=i,w.value=[...v.value])})}function M(){O(J,{text:h.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(i=>{c.value=c.value?.filter(t=>o.selectedOrganisms.includes(t.uid))||[],c.value=z(c.value,i?.items,"uid"),C.value=[...c.value]})}function $(){O(R,{},"abxAstPanelAll").then(i=>{i&&(m.value=i,m.value.forEach(t=>t.organisms?.forEach(d=>c.value.push(d))))})}function N(i,t={}){E.value=i,y.value=!0,V.value=(i?"Create":"Edit")+" AST Panel",i?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=t.uid,o.name=t.name,o.description=t.description,o.selectedAntibiotics=t.antibiotics?.map(d=>d.uid)||[],o.selectedOrganisms=t.organisms?.map(d=>d.uid)||[])}function j(){const i={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};E.value?L(ee,{payload:i},"createAbxAstPanel").then(t=>{t&&m.value.unshift(t)}):L(te,{uid:o.uid,payload:i},"updateAbxAstPanel").then(t=>{if(t){const d=m.value.findIndex(g=>g.uid===t.uid);d>-1&&(m.value=[...m.value.map((g,S)=>S===d?t:g)])}}),y.value=!1}function I(){if(!_.value){w.value=[...v.value];return}w.value=v.value.filter(i=>i.name.toLowerCase().includes(_.value.toLowerCase()))}function U(){if(!h.value){C.value=[...c.value];return}M()}return(i,t)=>{const d=D("fel-button"),g=D("fel-heading"),S=D("fel-modal");return r(),a(f,null,[T(g,{title:"AST Panels"},{default:A(()=>[T(d,{onClick:t[0]||(t[0]=s=>N(!0))},{default:A(()=>t[8]||(t[8]=[H("Add Panel")])),_:1})]),_:1}),e("div",se,[e("div",oe,[e("table",ie,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Organisms"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Antibiotics"),e("th",{class:"px-3 py-3.5"})])],-1)),e("tbody",ne,[(r(!0),a(f,null,x(m.value,s=>(r(),a("tr",{key:s?.uid},[e("td",re,u(s?.name),1),e("td",ae,u(s?.description),1),e("td",de,u(s?.organisms?.map(n=>n.name).join(", ")),1),e("td",le,u(s?.antibiotics?.map(n=>n.name).join(", ")),1),e("td",ue,[e("button",{onClick:n=>N(!1,s),class:"px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Edit ",8,ce)])]))),128))])])])]),p(" Panel Form Modal "),y.value?(r(),K(S,{key:0,onClose:t[7]||(t[7]=s=>y.value=!1),contentWidth:"w-1/2"},{header:A(()=>[e("h3",me,u(V.value),1)]),body:A(()=>[e("form",{onSubmit:Q(j,["prevent"]),class:"space-y-6 p-4"},[e("div",fe,[e("div",pe,[e("label",be,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-foreground"},"Panel Name",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter panel name"},null,512),[[k,o.name]])]),e("label",ve,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),rows:"2",class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter description"},null,512),[[k,o.description]])])]),p(" Organisms Selection with Selected List "),e("div",ge,[e("div",xe,[e("label",ye,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-foreground"},"Search Organisms",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),onInput:U,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search organisms..."},null,544),[[k,h.value]])]),e("div",he,[(r(!0),a(f,null,x(C.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[4]||(t[4]=n=>o.selectedOrganisms=n),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,_e),[[B,o.selectedOrganisms]]),e("span",we,u(s.name),1)]))),128))])]),p(" Selected Organisms List "),e("div",Ae,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Organisms",-1)),e("div",ke,[(r(!0),a(f,null,x(o.selectedOrganisms,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Oe,u(c.value?.find(n=>n.uid===s)?.name),1),e("button",{onClick:n=>o.selectedOrganisms=o.selectedOrganisms.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Ce)]))),128))])])]),p(" Antibiotics Selection with Selected List "),e("div",Se,[e("div",Pe,[e("label",De,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-foreground"},"Search Antibiotics",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),onInput:I,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search antibiotics..."},null,544),[[k,_.value]])]),e("div",Le,[(r(!0),a(f,null,x(w.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[6]||(t[6]=n=>o.selectedAntibiotics=n),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,Ve),[[B,o.selectedAntibiotics]]),e("span",Ee,u(s.name),1)]))),128))])]),p(" Selected Antibiotics List "),e("div",Me,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Antibiotics",-1)),e("div",Ne,[(r(!0),a(f,null,x(o.selectedAntibiotics,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Te,u(v.value.find(n=>n.uid==s)?.name),1),e("button",{onClick:n=>o.selectedAntibiotics=o.selectedAntibiotics.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Be)]))),128))])])])]),t[16]||(t[16]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):p("v-if",!0)],64)}}});const Ue=W(Fe,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{Ue as default};
