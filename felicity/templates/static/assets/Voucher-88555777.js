import{W as ee,f as te,ak as se,a9 as oe,a2 as ne,r as f,am as M,o as l,c as u,a as p,M as w,N as ie,O as e,D as a,a7 as s,F as re,H as de,a5 as b,J as d,af as c,L as N,z as le,Z as C,$ as S,C as ae,a0 as ue,a1 as ce,_ as me}from"./index-93739211.js";import{u as fe,e as pe,f as be}from"./billing-7eb454fc.js";import{c as ge,a as P,g as Y,e as xe,d as q,u as ve,f as m}from"./array-2f9882bb.js";import{f as F}from"./index-0f6f1926.js";const _e={class:"space-y-6"},ye={class:"rounded-lg border border-border bg-card p-6"},he={class:"grid grid-cols-12 gap-6"},Ve={initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-3 overflow-y-auto overscroll-contain voucher-scroll"},De={key:0,class:"rounded-lg border border-border bg-card p-4"},ke={key:1,class:"space-y-2"},we=["onClick"],Ce={class:"flex-grow"},Pe={class:"flex justify-between items-center"},Le={class:"font-medium text-foreground"},Oe={class:"text-sm text-muted-foreground"},Ue={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-9 space-y-6"},je={class:"rounded-lg border border-border bg-card p-6"},Me={class:"flex justify-between items-center mb-4"},Ne={class:"text-lg font-semibold text-foreground"},Se={class:"grid grid-cols-3 gap-8"},Ye={class:"space-y-4"},qe={class:"flex justify-between items-center"},Fe={class:"text-sm text-foreground"},$e={class:"flex justify-between items-center"},Ee={class:"text-sm text-foreground"},Re={class:"space-y-4"},Ae={class:"flex justify-between items-center"},Be={class:"text-sm text-foreground"},Te={class:"flex justify-between items-center"},ze={class:"text-sm text-foreground"},Ie={class:"space-y-4"},We={class:"flex justify-between items-center"},He={class:"text-sm text-foreground"},Je={class:"flex justify-between items-center"},Ze={class:"text-sm text-foreground"},Ge={class:"space-y-6"},Ke={class:"grid grid-cols-4 gap-4"},Qe={class:"block col-span-2 space-y-2"},Xe={class:"block col-span-1 space-y-2"},et={class:"block col-span-1 space-y-2"},tt={class:"grid grid-cols-4 gap-4"},st={class:"block col-span-2 space-y-2"},ot={class:"grid grid-cols-2 gap-4"},nt={class:"flex items-center space-x-2"},it={class:"flex items-center space-x-2"},rt={class:"flex justify-end"},dt=ee({__name:"Voucher",setup(lt){const $=ue(()=>ce(()=>import("./VoucherCodes-d2043084.js"),["assets/VoucherCodes-d2043084.js","assets/index-93739211.js","assets/index-0f090789.css","assets/billing-7eb454fc.js","assets/array-2f9882bb.js","assets/VoucherCodes-bd5edd75.css"])),{withClientMutation:L}=te();let g=fe();const{vouchers:O,fetchingVouchers:E}=se(g);oe(()=>{g.fetchVouchers()});let r=ne(!1);const R=ge({uid:P().nullable(),name:P().required("Voucher Name is Required"),startDate:Y().required("Start Date is Required"),endDate:Y().required("End Date is Required"),usageLimit:xe().required("Usage Limit is Required"),used:P().nullable(),oncePerCustomer:q().default(!0),oncePerOrder:q().default(!0)}),{handleSubmit:A,errors:x,setFieldValue:i}=ve({validationSchema:R,initialValues:{oncePerCustomer:!0,oncePerOrder:!0}}),{value:v}=m("uid"),{value:_}=m("name"),{value:y}=m("startDate"),{value:h}=m("endDate"),{value:V}=m("usageLimit"),{value:B}=m("used"),{value:D}=m("oncePerCustomer"),{value:k}=m("oncePerOrder"),U=A(n=>{n.uid||W(n),n.uid&&H(n)});let T=n=>{i("uid",n.uid),i("name",n.name),i("startDate",F(n.startDate,"DD/MM/YYYY")),i("endDate",F(n.endDate,"DD/MM/YYYY")),i("usageLimit",n.usageLimit),i("used",n.used),i("oncePerCustomer",n.oncePerCustomer),i("oncePerOrder",n.oncePerOrder)},z=()=>{i("uid",void 0),i("name",void 0),i("startDate",void 0),i("endDate",void 0),i("usageLimit",void 0),i("oncePerCustomer",!0),i("oncePerOrder",!0)};const I=()=>{z(),r.value=!0},W=n=>{delete n.uid,L(pe,{payload:n},"createVoucher").then(t=>g.addVoucher(t)).finally(()=>r.value=!1)},H=n=>{delete n.uid,delete n.used,L(be,{uid:v?.value,payload:n},"updateVoucher").then(t=>g.updateVoucher(t)).finally(()=>r.value=!1)};return(n,t)=>{const J=f("fel-button"),Z=f("fel-heading"),G=f("fel-loader"),K=f("font-awesome-icon"),Q=f("fel-modal"),j=M("motion"),X=M("motion-slide-top");return l(),u("div",_e,[p(Z,{title:"Vouchers"},{default:w(()=>[p(J,{onClick:I},{default:w(()=>t[9]||(t[9]=[ie("Add Voucher")])),_:1})]),_:1}),e("div",ye,[e("div",he,[a((l(),u("section",Ve,[s(E)?(l(),u("div",De,[p(G,{message:"Fetching vouchers ..."})])):(l(),u("div",ke,[(l(!0),u(re,null,de(s(O),o=>(l(),u("button",{key:o.uid,onClick:at=>s(T)(o),class:b(["w-full flex items-center p-4 rounded-lg border transition-colors hover:bg-accent hover:text-accent-foreground",[o.uid===s(v)?"border-primary bg-primary/10":"border-border bg-card"]])},[e("div",Ce,[e("div",Pe,[e("span",Le,d(o.name),1),e("span",Oe,d(o.used)+" of "+d(o.usageLimit),1)])])],10,we))),128))]))])),[[j]]),s(O)?.length>0&&s(v)?a((l(),u("section",Ue,[a((l(),u("div",je,[e("div",Me,[e("h4",Ne,d(s(_)?.toUpperCase()),1),e("button",{onClick:t[0]||(t[0]=o=>c(r)?r.value=!0:r=!0),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 w-9"},[p(K,{icon:"pen",class:"text-muted-foreground"})])]),e("div",Se,[e("div",Ye,[e("div",qe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date:",-1)),e("span",Fe,d(s(y)),1)]),e("div",$e,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"End Date:",-1)),e("span",Ee,d(s(h)),1)])]),e("div",Re,[e("div",Ae,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Usage Limit:",-1)),e("span",Be,d(s(V)),1)]),e("div",Te,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Used:",-1)),e("span",ze,d(s(B)),1)])]),e("div",Ie,[e("div",We,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per customer:",-1)),e("span",He,d(s(D)?"Yes":"No"),1)]),e("div",Je,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per order:",-1)),e("span",Ze,d(s(k)?"Yes":"No"),1)])])])])),[[X]]),p(s($),{voucherUid:s(v)},null,8,["voucherUid"])])),[[j]]):N("",!0)])]),s(r)?(l(),le(Q,{key:0,onClose:t[8]||(t[8]=o=>c(r)?r.value=!1:r=!1),contentWidth:"w-2/6"},{header:w(()=>t[16]||(t[16]=[e("h3",{class:"text-lg font-semibold text-foreground"},"Voucher Form",-1)])),body:w(()=>[e("form",Ge,[e("div",Ke,[e("label",Qe,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-foreground"},"Voucher Name",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).name}]),type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>c(_)?_.value=o:null),placeholder:"Name ..."},null,2),[[C,s(_)]])]),e("label",Xe,[t[18]||(t[18]=e("span",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).startDate}]),type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>c(y)?y.value=o:null)},null,2),[[C,s(y)]])]),e("label",et,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-foreground"},"End Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).endDate}]),type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>c(h)?h.value=o:null)},null,2),[[C,s(h)]])])]),e("div",tt,[e("label",st,[t[20]||(t[20]=e("span",{class:"text-sm font-medium text-foreground"},"Usage Limit",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).usageLimit}]),type:"number",min:"1","onUpdate:modelValue":t[4]||(t[4]=o=>c(V)?V.value=o:null)},null,2),[[C,s(V)]])])]),e("div",ot,[e("label",nt,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>c(D)?D.value=o:null),checked:""},null,512),[[S,s(D)]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Customer",-1))]),e("label",it,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>c(k)?k.value=o:null),checked:""},null,512),[[S,s(k)]]),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Order",-1))])]),e("div",rt,[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:t[7]||(t[7]=ae((...o)=>s(U)&&s(U)(...o),["prevent"]))}," Save Voucher ")])])]),_:1})):N("",!0)])}}});const pt=me(dt,[["__scopeId","data-v-3f30ca74"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/billing/Voucher.vue"]]);export{pt as default};
