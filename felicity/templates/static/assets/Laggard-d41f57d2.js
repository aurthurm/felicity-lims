import{d as T,s as w,r as p,q as I,P as L,o as h,c as y,f as _,g as k,y as A,b as a,t as v,F as N,j as S,_ as j,k as B}from"./index-06e172a4.js";import{C as f}from"./index-11e24116.js";import{u as C}from"./dashboard-7e877969.js";const F={key:0,class:"text-start my-4 w-100"},R={class:"mt-4"},V=a("h1",{class:"text-xl text-gray-700 font-semibold"},"Delayed and incomplete",-1),z=a("hr",{class:"my-2"},null,-1),E={class:"flex justify-start items-center"},M={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},O={class:"mr-4 font-bold text-gray-600 text-2xl"},P=a("div",{class:"font-semibold text-gray-400 text-l"},"Already Delayed",-1),W=a("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[a("div",{class:"me-8"},[a("div",{id:"late-active-donut"})]),a("div",null,[a("div",{id:"late-active-since"})])],-1),$=a("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"Authosised already delayed",-1),q=a("hr",{class:"my-2"},null,-1),G={class:"flex justify-start items-center"},H={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},J={class:"mr-4 font-bold text-gray-600 text-2xl"},K=a("div",{class:"font-semibold text-gray-400 text-l"},"Released as Delayed",-1),Q=a("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[a("div",{class:"me-8"},[a("div",{id:"late-auth-donut"})]),a("div",null,[a("div",{id:"late-auth-since"})])],-1),U=T({__name:"Laggard",setup(X){const g=S(()=>j(()=>import("./FelLoadingMessage-f3bf91ab.js"),["assets/FelLoadingMessage-f3bf91ab.js","assets/index-06e172a4.js","assets/index-3e01f4af.css"])),i=C(),{dashboard:c}=w(i),d=p(0),r=p(0);I(()=>{i.getSampleLaggards()}),L(()=>c.value.laggards,(s,n)=>{const t=s?.filter(l=>l?.category==="delayed_and_incomplete")[0],e=s?.filter(l=>l?.category==="authorised_already_delayed")[0];d.value=t?.counts?.totalIncomplete??0;const o=[{item:"On-Time",count:t?.counts?.totalDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalDelayed/t?.counts?.totalIncomplete*100:0},{item:"Delayed",count:t?.counts?.totalNotDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalNotDelayed/t?.counts?.totalIncomplete*100:0}];m(o,"late-active-donut");const x=[{type:"<10",value:t?.counts?.lessThanTen},{type:"10 - 20",value:t?.counts?.tenToTwenty},{type:"20 - 30",value:t?.counts?.twentyToThirty},{type:"> 30",value:t?.counts?.graterThanThirty}];u(x,"late-active-since","days since created","number of samples"),r.value=e?.counts?.totalIncomplete??0;const D=[{item:"On-Time",count:e?.counts?.totalDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalDelayed/e?.counts?.totalIncomplete*100:0},{item:"Delayed",count:e?.counts?.totalNotDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalNotDelayed/e?.counts?.totalIncomplete*100:0}];m(D,"late-auth-donut");const b=[{type:"<10",value:e?.counts?.lessThanTen},{type:"10 - 20",value:e?.counts?.tenToTwenty},{type:"20 - 30",value:e?.counts?.twentyToThirty},{type:"> 30",value:e?.counts?.graterThanThirty}];u(b,"late-auth-since","days: created to authorised","number of samples")});const u=(s,n,t,e)=>{const o=new f({container:n,autoFit:!0,height:200,width:600});o.data(s),o.scale({value:{max:150,min:0,alias:e},type:{alias:t}}),o.axis("type",{title:{offset:60,style:{fontSize:12,fontWeight:300}},tickLine:null,line:null}),o.axis("value",{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),o.legend(!1),o.coordinate().transpose(),o.interval().position("type*value").size(26).label("value",{style:{fill:"#8d8d8d"},offset:10}),o.interaction("element-active"),o.render()},m=(s,n)=>{const t=new f({container:n,autoFit:!0,height:150,width:300});t.data(s),t.scale("percent",{formatter:e=>(e=e*100+"%",e)}),t.coordinate("theta",{radius:.75,innerRadius:.6}),t.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),t.annotation(),t.interval().adjust("stack").position("percent").color("item").label("percent",e=>({content:o=>`${o.item}: ${e*100}%`})).tooltip("item*percent",(e,o)=>(o=o*100+"%",{name:e,value:o})),t.interaction("element-active"),t.render()};return(s,n)=>(h(),y(N,null,[_(c).fetchingLaggards?(h(),y("div",F,[k(_(g),{message:"fetching laggard stats ..."})])):A("v-if",!0),a("section",R,[V,z,a("div",E,[a("div",M,[a("div",O,v(d.value),1),P]),W]),$,q,a("div",G,[a("div",H,[a("div",J,v(r.value),1),K]),Q])])],64))}}),et=B(U,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{et as default};
