import{a0 as A,f as F,a7 as _,g as V,h as Q,_ as j,r as h,c as u,o as a,A as e,C as U,E as L,a as k,N as p,P as B,J as y,K as q,L as c,F as C,a2 as M,a9 as O,D as P}from"./index-C5OmCQ1r.js";import{q as z,r as H}from"./analyses.mutations-COGCX6rV.js";import{u as I}from"./analysis-CQxuKvI2.js";const J=A({__name:"QCTemplates",setup(E,{expose:t}){t();const d=I(),{withClientMutation:s}=F();let m=_(!1),f=_(""),n=V({});const i=_(!0);d.fetchQCLevels(),d.fetchQCTemplates();const g=Q(()=>d.getQCTemplates),o=Q(()=>d.getQCLevels);function x(){const r={name:n.name,description:n.description,levels:v(n.qcLevels),departments:n.departments};s(z,{payload:r},"createQcTemplate").then(l=>d.addQcTemplate(l))}function T(){const r={name:n.name,description:n.description,levels:v(n.qcLevels),departments:n.departments};s(H,{uid:n.uid,payload:r},"updateQcTemplate").then(l=>d.updateQcTemplate(l))}function v(r){if(r?.length<=0)return[];let l=[];return r?.forEach(b=>l.push(b.uid)),l}function D(r,l={}){i.value=r,m.value=!0,f.value=(r?"CREATE":"EDIT")+" QC Template",r?Object.assign(n,{}):Object.assign(n,{...l})}function N(r){if(r?.length<=0)return"";let l=[];return r?.forEach(b=>l.push(b.level)),l.join(", ")}function S(){i.value===!0&&x(),i.value===!1&&T(),m.value=!1}const w={analysisStore:d,withClientMutation:s,get showModal(){return m},set showModal(r){m=r},get formTitle(){return f},set formTitle(r){f=r},get form(){return n},set form(r){n=r},formAction:i,qcTemplates:g,qcLevels:o,addQCTemplate:x,editQCTemplate:T,levelsUids:v,FormManager:D,levelsNames:N,saveForm:S};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),K={class:"rounded-md border bg-card p-6 shadow-sm"},R={class:"overflow-x-auto"},G={class:"w-full"},W={class:"px-6 py-4 whitespace-nowrap border-b border-border"},X={class:"font-medium text-foreground"},Y={key:0,class:"text-sm text-muted-foreground"},Z={class:"px-6 py-4 whitespace-nowrap border-b border-border"},$={class:"text-sm text-foreground"},ee={class:"px-6 py-4 whitespace-nowrap border-b border-border"},te={class:"text-sm text-foreground"},oe={class:"px-6 py-4 whitespace-nowrap text-right border-b border-border"},se=["onClick"],re={class:"text-xl font-semibold text-foreground"},ne={action:"post",class:"p-6 space-y-6"},le={class:"space-y-4"},de={class:"space-y-2"},ae={class:"space-y-2"},ie={class:"space-y-2"},ue=["value"],ce={class:"pt-4"};function me(E,t,d,s,m,f){const n=h("fel-button"),i=h("fel-heading"),g=h("fel-modal");return a(),u(y,null,[e("div",null,[k(i,{title:"QC Templates"},{default:p(()=>[k(n,{onClick:t[0]||(t[0]=o=>s.FormManager(!0))},{default:p(()=>[...t[6]||(t[6]=[B("Add QC Template",-1)])]),_:1})]),_:1}),e("div",K,[e("div",R,[e("table",G,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"border-b border-border bg-muted/50"},[e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"QC Template Name"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Quality Control level(s)"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Department(s)"),e("th",{class:"px-6 py-3 text-right text-sm font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",null,[(a(!0),u(y,null,q(s.qcTemplates,o=>(a(),u("tr",{key:o?.uid,class:"hover:bg-accent/50 transition-colors duration-200"},[e("td",W,[e("div",X,c(o?.name),1),o?.description?(a(),u("div",Y,c(o?.description),1)):L("",!0)]),e("td",Z,[e("div",$,c(s.levelsNames(o?.qcLevels??[])),1)]),e("td",ee,[e("div",te,c(o?.category),1)]),e("td",oe,[e("button",{onClick:x=>s.FormManager(!1,o),class:"inline-flex items-center px-3 py-1.5 border border-border bg-background text-foreground text-sm font-medium transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,se)])]))),128))])])])])]),s.showModal?(a(),U(g,{key:0,onClose:t[5]||(t[5]=o=>s.showModal=!1)},{header:p(()=>[e("h3",re,c(s.formTitle),1)]),body:p(()=>[e("form",ne,[e("div",le,[e("div",de,[t[8]||(t[8]=e("label",{for:"name",class:"text-sm font-medium text-muted-foreground"},"QC Template Name",-1)),C(e("input",{id:"name",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground","onUpdate:modelValue":t[1]||(t[1]=o=>s.form.name=o),placeholder:"Enter template name"},null,512),[[M,s.form.name]])]),e("div",ae,[t[9]||(t[9]=e("label",{for:"description",class:"text-sm font-medium text-muted-foreground"},"Description",-1)),C(e("textarea",{id:"description",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none","onUpdate:modelValue":t[2]||(t[2]=o=>s.form.description=o),placeholder:"Enter template description",rows:"3"},null,512),[[M,s.form.description]])]),e("div",ie,[t[11]||(t[11]=e("label",{for:"controlLevels",class:"text-sm font-medium text-muted-foreground"},"Quality Control Sample Levels",-1)),C(e("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":t[3]||(t[3]=o=>s.form.qcLevels=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",multiple:""},[t[10]||(t[10]=e("option",{disabled:"",value:""},"Select QC Levels",-1)),(a(!0),u(y,null,q(s.qcLevels,o=>(a(),u("option",{key:o.uid,value:o,class:"py-1"},c(o.level),9,ue))),128))],512),[[O,s.form.qcLevels]]),t[12]||(t[12]=e("p",{class:"text-xs text-muted-foreground mt-1"},"Hold Ctrl/Cmd to select multiple levels",-1))])]),e("div",ce,[e("button",{type:"button",onClick:t[4]||(t[4]=P(o=>s.saveForm(),["prevent"])),class:"w-full inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"}," Save Changes ")])])]),_:1})):L("",!0)],64)}const xe=j(J,[["render",me],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/QCTemplates.vue"]]);export{xe as default};
