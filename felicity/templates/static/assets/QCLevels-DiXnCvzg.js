import{a0 as D,f as T,a7 as f,h as V,_ as q,r as p,c as v,o as u,A as e,C as N,E as L,a as Q,N as b,P as B,J as w,K as U,L as _,D as j,F as I,a2 as P}from"./index-v7Q387fb.js";import{c as J,a as K,u as O,b as R}from"./index.esm-D-THTBXR.js";import{W,X}from"./analyses.mutations-DwO9qbHD.js";import{u as z}from"./analysis-xHaHOXP2.js";const G=D({__name:"QCLevels",setup(k,{expose:t}){t();const r=z(),{withClientMutation:o}=T();let d=f(!1),c=f("");const a=f(!0),i=f(null),m=J({level:K().trim().required("QC level is required")}),{handleSubmit:s,resetForm:g,setValues:h}=O({validationSchema:m,initialValues:{level:""}}),{value:M,errorMessage:E}=R("level");r.fetchQCLevels();const F=V(()=>r.getQCLevels);function x(l){o(W,l,"createQcLevel").then(n=>r.addQcLevel(n))}function y(l){i.value&&o(X,{uid:i.value,...l},"updateQcLevel").then(n=>r.updateQcLevel(n))}function S(l,n={}){a.value=l,d.value=!0,c.value=(l?"CREATE":"EDIT")+" QC Level",l?(i.value=null,g({values:{level:""}})):(i.value=n.uid??null,h({level:n.level??""}))}const A=s(l=>{const n={level:l.level};a.value===!0&&x(n),a.value===!1&&y(n),d.value=!1}),C={analysisStore:r,withClientMutation:o,get showModal(){return d},set showModal(l){d=l},get formTitle(){return c},set formTitle(l){c=l},formAction:a,currentUid:i,qcLevelSchema:m,handleSubmit:s,resetForm:g,setValues:h,level:M,levelError:E,qcLevels:F,addQCLevel:x,editQCLevel:y,FormManager:S,saveForm:A};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),H={class:"rounded-md border bg-card p-6 shadow-sm"},Y={class:"w-full"},Z={class:"w-full caption-bottom text-sm"},$={class:"p-4 align-middle"},ee={class:"text-sm font-medium leading-none"},te={class:"p-4 align-middle text-right"},oe=["onClick"],le={class:"text-lg font-semibold leading-none tracking-tight"},se={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"};function ie(k,t,r,o,d,c){const a=p("fel-button"),i=p("fel-heading"),m=p("fel-modal");return u(),v(w,null,[e("div",null,[Q(i,{title:"QC Levels"},{default:b(()=>[Q(a,{onClick:t[0]||(t[0]=s=>o.FormManager(!0))},{default:b(()=>[...t[4]||(t[4]=[B("Add QC Level",-1)])]),_:1})]),_:1}),e("div",H,[e("div",Y,[e("table",Z,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Level"),e("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",null,[(u(!0),v(w,null,U(o.qcLevels,s=>(u(),v("tr",{key:s?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",$,[e("span",ee,_(s?.level),1)]),e("td",te,[e("button",{onClick:g=>o.FormManager(!1,s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,oe)])]))),128))])])])])]),o.showModal?(u(),N(m,{key:0,onClose:t[3]||(t[3]=s=>o.showModal=!1)},{header:b(()=>[e("h3",le,_(o.formTitle),1)]),body:b(()=>[e("form",{onSubmit:t[2]||(t[2]=j((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"space-y-4 p-4"},[e("div",se,[t[6]||(t[6]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," QC Level ",-1)),I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.level=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter QC level name..."},null,512),[[P,o.level]]),o.levelError?(u(),v("p",ne,_(o.levelError),1)):L("",!0)]),t[7]||(t[7]=e("button",{type:"submit",class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ",-1))],32)]),_:1})):L("",!0)],64)}const ce=q(G,[["render",ie],["__scopeId","data-v-89951d03"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/QCLevels.vue"]]);export{ce as default};
