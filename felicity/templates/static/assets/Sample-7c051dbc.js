import{S as oe,u as ne,a6 as re,V as ae,h as ie,ai as le,W as R,i as d,r as y,ak as ue,o as p,c as m,N as e,M as C,a as f,a5 as o,y as de,L as k,K as b,C as i,H as n,D as l,F as pe,E as ce,_ as me}from"./index-628f1f8f.js";import{u as fe}from"./samples-dd7e39d7.js";import{p as v}from"./index-1c874f2e.js";import"./analyses.mutations-ee5b99ac.js";import"./storage.mutations-7403cc4e.js";const ve={class:"space-y-6"},xe={class:"flex justify-between items-center"},ge={class:"flex items-center space-x-4"},ye={class:"flex items-center"},be={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},_e={key:0,class:"py-4 text-center"},he={key:1,class:"space-y-6"},we={class:"space-y-4"},Se={class:"flex items-center justify-between"},Ce={class:"flex items-center space-x-2"},Re={key:0,class:"text-destructive"},ke={class:"text-lg font-semibold text-foreground"},je={key:1,class:"flex items-center space-x-2"},De={class:"text-muted-foreground"},Le={class:"relative"},$e={type:"button",class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"},Be={class:"absolute right-0 mt-2 py-2 bg-background rounded-lg shadow-lg border border-border z-20 min-w-[200px]"},Oe={class:"grid grid-cols-3 gap-6"},Pe={class:"space-y-4"},Ue={class:"flex justify-between"},qe={class:"text-sm text-muted-foreground"},Ie={class:"flex justify-between"},Ne={class:"text-sm text-muted-foreground"},Ve={class:"space-y-4"},Te={class:"flex justify-between"},Ee={class:"text-sm text-muted-foreground"},Ae={class:"flex justify-between"},Fe={class:"text-sm text-muted-foreground"},Je={class:"flex justify-between"},We={class:"text-sm text-muted-foreground"},ze={class:"flex justify-between"},He={class:"text-sm text-muted-foreground"},Ke={class:"space-y-4"},Me={class:"flex justify-between"},Ge={class:"text-sm text-muted-foreground"},Qe={class:"flex justify-between"},Xe={class:"text-sm text-muted-foreground"},Ye={class:"flex justify-between"},Ze={class:"text-sm text-muted-foreground"},et={class:"flex justify-between"},tt={class:"text-sm text-muted-foreground"},st={class:"bg-muted rounded-lg shadow-sm p-6"},ot={class:"flex items-center space-x-4"},nt={class:"flex items-center space-x-2"},rt={class:"bg-destructive/10 text-destructive rounded-lg shadow-sm p-6"},at={class:"space-y-2"},it=oe({__name:"Sample",setup(lt){const c=ne(),_=re(),h=ae();c.resetSample();const{cancelSamples:j,reInstateSamples:D,receiveSamples:L,invalidateSamples:$,publishSamples:B,verifySamples:O,recoverSamples:P}=fe(),g=ie({dropdownOpen:!1}),{sample:s,fetchingSample:U,repeatSample:w}=le(c);c.fetchSampleByUid(_.params.sampleUid),R(()=>s?.value?.status,(r,t)=>{if(r)if(r!=="invalidated"){c.resetRepeatSample();return}else c.fetchRepeatSampleByParentId(_.params.sampleUid)}),R(()=>_.params.sampleUid,(r,t)=>{c.fetchSampleByUid(+r)});function q(r,t){let u=[];return r?.forEach(x=>u.push(x.name)),t?.forEach(x=>u.push(x.name)),u.join(", ")}const I=d(()=>!!["expected"].includes(s?.value?.status?.toLowerCase())),N=async()=>L([s?.value?.uid]),V=d(()=>!!["received","expected"].includes(s?.value?.status?.toLowerCase())),T=async()=>j([s?.value?.uid]),E=d(()=>!!["cancelled"].includes(s?.value?.status?.toLowerCase())),A=async()=>D([s?.value?.uid]),F=d(()=>s?.value?.status?.toLowerCase()==="awaiting"),J=async()=>O([s?.value?.uid]),W=d(()=>s?.value?.status?.toLowerCase()==="published"),S=d(()=>["approved"].includes(s?.value?.status?.toLowerCase())?"Publish":["published"].includes(s?.value?.status?.toLowerCase())?"Re publish":"Pre publish"),z=d(()=>{if(["awaiting","approved","published"].includes(s?.value?.status?.toLowerCase()))return!0;const r=c.analysisResults;return!!(["received","paired"].includes(s?.value?.status?.toLowerCase()??"")&&r?.some(t=>["approved"].includes(t.status?.toLowerCase()??"")))}),H=async()=>{const r=S.value.startsWith("Pre")?"pre-publish":S.value.startsWith("Re")?"re-publish":"publish";B([{uid:s?.value?.uid,action:r}])},K=async()=>$([s?.value?.uid]).then(r=>{let t=r?.filter(u=>u.uid!==s?.value?.uid);t.length>0&&c.setRepeatSample(t[0])}),M=async()=>h.push({name:"print-barcodes",state:{sampleUids:JSON.stringify([s?.value?.uid])}}),G=d(()=>!!["received","expected"].includes(s?.value?.status?.toLowerCase())),Q=async()=>{h.push({name:"reject-samples",state:{samples:JSON.stringify([s?.value])}})},X=d(()=>!!["stored"].includes(s?.value?.status?.toLowerCase())),Y=async()=>P([s?.value?.uid]),Z=async r=>{h.push({path:"/bio-banking",state:{sample:JSON.stringify(r)}})};return(r,t)=>{const u=y("font-awesome-icon"),x=y("router-link"),ee=y("fel-loader"),te=y("router-view"),se=ue("motion-slide-right");return p(),m("div",ve,[e("div",xe,[t[13]||(t[13]=e("h3",{class:"text-xl font-semibold text-foreground"},"Sample Detail",-1)),e("div",ge,[e("button",{class:"px-4 py-2 bg-background border border-border text-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50",onClick:M},[e("span",ye,[t[11]||(t[11]=C(" Barcode ")),f(u,{icon:"barcode",class:"ml-2"})])]),o(s)?.analysisRequest?.patient?.uid?(p(),de(x,{key:0,to:{name:"patient-detail",params:{patientUid:o(s)?.analysisRequest?.patient?.uid}},class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"},{default:k(()=>t[12]||(t[12]=[C(" ... other samples ")])),_:1},8,["to"])):b("v-if",!0)])]),i((p(),m("div",be,[o(U)?(p(),m("div",_e,[f(ee,{message:"Fetching sample details ..."})])):(p(),m("div",he,[b(" Summary Column "),e("div",we,[e("div",Se,[e("div",Ce,[o(s)?.priority??0<1?(p(),m("span",Re,[f(u,{icon:"fa-star"})])):b("v-if",!0),e("span",ke,n(o(s)?.sampleId),1),o(s)?.analysisRequest?.patient?.uid&&o(w)?.uid?(p(),m("span",je,[f(u,{icon:"angle-double-right"}),f(x,{to:{name:"sample-detail",params:{patientUid:o(s)?.analysisRequest?.patient?.uid,sampleUid:o(w)?.uid}},class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"},{default:k(()=>[C(n(o(w)?.sampleId),1)]),_:1},8,["to"])])):b("v-if",!0)]),e("span",De,n(q(o(s)?.profiles,o(s)?.analyses)),1),e("div",Le,[e("div",{onClick:t[0]||(t[0]=a=>g.dropdownOpen=!g.dropdownOpen),class:"flex items-center space-x-2 cursor-pointer"},[e("button",$e,n(o(s)?.status),1),f(u,{icon:"chevron-down",class:"text-muted-foreground"})]),i(e("div",{onClick:t[1]||(t[1]=a=>g.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[l,g.dropdownOpen]]),i(e("div",Be,[i(e("button",{onClick:t[2]||(t[2]=a=>N()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-primary hover:text-primary-foreground transition-colors duration-200"}," Receive ",512),[[l,I.value]]),i(e("button",{onClick:t[3]||(t[3]=a=>J()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-primary hover:text-primary-foreground transition-colors duration-200"}," Approve ",512),[[l,F.value]]),i(e("button",{onClick:t[4]||(t[4]=a=>Q()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-destructive hover:text-destructive-foreground transition-colors duration-200"}," Reject ",512),[[l,G.value]]),i(e("button",{onClick:t[5]||(t[5]=a=>T()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-destructive hover:text-destructive-foreground transition-colors duration-200"}," Cancel ",512),[[l,V.value]]),i(e("button",{onClick:t[6]||(t[6]=a=>A()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-destructive hover:text-destructive-foreground transition-colors duration-200"}," Reinstate ",512),[[l,E.value]]),i(e("button",{onClick:t[7]||(t[7]=a=>H()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-primary hover:text-primary-foreground transition-colors duration-200"},n(S.value),513),[[l,z.value]]),i(e("button",{onClick:t[8]||(t[8]=a=>K()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-primary hover:text-primary-foreground transition-colors duration-200"}," Invalidate ",512),[[l,W.value]]),i(e("button",{onClick:t[9]||(t[9]=a=>Y()),class:"w-full px-4 py-2 text-left text-foreground hover:bg-primary hover:text-primary-foreground transition-colors duration-200"}," Recover ",512),[[l,X.value]])],512),[[l,g.dropdownOpen]])])]),e("div",Oe,[e("div",Pe,[e("div",Ue,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-foreground"},"Client Request ID",-1)),e("span",qe,n(o(s)?.analysisRequest?.clientRequestId),1)]),e("div",Ie,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-foreground"},"Client",-1)),e("span",Ne,n(o(s)?.analysisRequest?.client?.name),1)]),t[16]||(t[16]=e("div",{class:"flex justify-between"},[e("span",{class:"text-sm font-medium text-foreground"},"Client Contact"),e("span",{class:"text-sm text-muted-foreground"},"Sister in Charge")],-1))]),e("div",Ve,[e("div",Te,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-foreground"},"Sample Type",-1)),e("span",Ee,n(o(s)?.sampleType?.name),1)]),e("div",Ae,[t[18]||(t[18]=e("span",{class:"text-sm font-medium text-foreground"},"Date Sampled",-1)),e("span",Fe,n(o(v)(o(s)?.dateCollected,!0)),1)]),e("div",Je,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-foreground"},"Date Registered",-1)),e("span",We,n(o(v)(o(s)?.createdAt,!0)),1)]),e("div",ze,[t[20]||(t[20]=e("span",{class:"text-sm font-medium text-foreground"},"Date Received",-1)),e("span",He,n(o(v)(o(s)?.dateReceived,!0)),1)])]),e("div",Ke,[e("div",Me,[t[21]||(t[21]=e("span",{class:"text-sm font-medium text-foreground"},"Date Submitted",-1)),e("span",Ge,n(o(v)(o(s)?.dateSubmitted,!0)),1)]),e("div",Qe,[t[22]||(t[22]=e("span",{class:"text-sm font-medium text-foreground"},"Date Verified",-1)),e("span",Xe,n(o(v)(o(s)?.dateVerified,!0)),1)]),e("div",Ye,[t[23]||(t[23]=e("span",{class:"text-sm font-medium text-foreground"},"Date Published",-1)),e("span",Ze,n(o(v)(o(s)?.datePublished,!0)),1)]),e("div",et,[t[24]||(t[24]=e("span",{class:"text-sm font-medium text-foreground"},"Date Printed",-1)),e("span",tt,n(o(v)(o(s)?.datePrinted,!0)),1)])])])])]))])),[[se]]),i(e("div",st,[e("div",ot,[t[29]||(t[29]=e("span",{class:"font-medium text-foreground"},"Storage:",-1)),e("button",{class:"text-primary hover:text-primary/80 transition-colors",onClick:t[10]||(t[10]=a=>Z(o(s)))},[e("span",nt,[e("span",null,n(o(s)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name),1),t[25]||(t[25]=e("span",null,"›",-1)),e("span",null,n(o(s)?.storageContainer?.storageSection?.storageLocation?.name),1),t[26]||(t[26]=e("span",null,"›",-1)),e("span",null,n(o(s)?.storageContainer?.storageSection?.name),1),t[27]||(t[27]=e("span",null,"›",-1)),e("span",null,n(o(s)?.storageContainer?.name),1),t[28]||(t[28]=e("span",null,"›",-1)),e("span",null,n(o(s)?.storageSlot),1)])])])],512),[[l,o(s)?.status==="stored"]]),i(e("div",rt,[e("ul",at,[(p(!0),m(pe,null,ce(o(s)?.rejectionReasons,a=>(p(),m("li",{key:a.uid},n(a.reason),1))),128))])],512),[[l,o(s)?.status==="rejected"]]),f(te)])}}}),ft=me(it,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/Sample.vue"]]);export{ft as default};
