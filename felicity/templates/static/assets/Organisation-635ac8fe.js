import{W as A,i as _,h as L,Y as F,f as T,a2 as x,o as f,z as j,M as I,c as b,O as s,D as r,a7 as t,Z as a,C as V,E as w,L as v,$ as h,F as $,H as q,aC as U,J as G,a4 as R,a0 as H,a1 as Q,aG as J,aH as W,al as Y,k as Z,_ as K}from"./index-5d85e9da.js";import{u as X}from"./user-838cdd03.js";import{u as ee}from"./setup-d31371ee.js";import"./_queries-0bd36c18.js";const se={key:0,class:"space-y-6"},oe={class:"space-y-6"},te={class:"grid grid-cols-2 gap-6"},ie={class:"block col-span-1 space-y-2"},le=["disabled"],ne={class:"block col-span-1 space-y-2"},re=["disabled"],de={class:"block col-span-1 space-y-2"},ae=["disabled"],ue={class:"block col-span-1 space-y-2"},fe=["disabled"],be={class:"block col-span-1 space-y-2"},pe=["disabled"],me={class:"block col-span-1 space-y-2"},ge=["disabled"],ce={class:"block col-span-1 space-y-2"},xe=["disabled"],ve={class:"block col-span-1 space-y-2"},ye=["disabled"],ke={class:"block col-span-1 space-y-2"},we=["disabled"],he={key:1,class:"space-y-6"},Ue={class:"space-y-6"},Oe={class:"space-y-3"},Pe={class:"block"},Se=["disabled"],_e={key:0,class:"space-y-3"},Le={class:"flex items-center justify-center p-4 border border-border rounded-md bg-muted"},Ve=["src"],ze={key:1,class:"text-sm text-muted-foreground"},Ce={key:2,class:"space-y-6"},Be={class:"space-y-6"},De={class:"grid grid-cols-2 gap-6"},Ee={class:"block col-span-1 space-y-2"},Ne=["disabled"],Me={class:"block col-span-1 space-y-2"},Ae=["disabled"],Fe={class:"grid grid-cols-2 gap-6"},Te={class:"block col-span-1 space-y-2"},je={class:"flex items-center space-x-2"},Ie=["disabled"],$e={class:"block col-span-1 space-y-2"},qe={class:"flex items-center space-x-2"},Ge=["disabled"],Re={class:"block col-span-1 space-y-2"},He={class:"flex items-center space-x-2"},Qe=["disabled"],Je={class:"block col-span-1 space-y-2"},We=["value"],Ye={class:"block col-span-1 space-y-2"},Ze=["disabled"],Ke={class:"block col-span-1 space-y-2"},Xe=["disabled"],es={class:"block col-span-1 space-y-2"},ss=["disabled"],os=A({__name:"Organisation",setup(ts){const z=H(()=>Q(()=>import("./FelTabsAside-98a829a1.js"),["assets/FelTabsAside-98a829a1.js","assets/index-5d85e9da.js","assets/index-8a6751fe.css"])),{toastSuccess:u}=Z(),O=X(),y=ee();y.fetchOrganization();const p=_(()=>y.getOrganization),l=L({...p.value}),n=L({...p.value?.settings});F(()=>p.value?.uid,(d,e)=>{Object.assign(l,p.value),Object.assign(n,p.value?.settings)});const{withClientMutation:P}=T();let i=x(!1);const C=()=>{i.value=!0;const d={...l};delete d.uid,delete d.__typename,delete d.settings,P(J,{uid:l.uid,payload:d},"updateOrganization").then(e=>{y.updateOrganization(e),i.value=!1,u("Organization information updated")})},B=()=>{i.value=!0;const d={...n};delete d.uid,delete d.__typename,P(W,{uid:n.uid,payload:d},"updateOrganizationSetting").then(e=>{y.updateOrganizationSetting(e),i.value=!1,u("Organization settings updated")})};O.fetchUsers({}),_(()=>O.getUsers);const m=x("general-info"),D=[{id:"general-info",label:"Information",icon:"fas fa-chart-bar"},{id:"other-settings",label:"Other",icon:"fas fa-user-clock"},{id:"logo-upload",label:"Logo",icon:"fas fa-image"}],g=x(null),k=x(null);let c=x(!1);const E=d=>{const e=d.target;if(e.files&&e.files[0]){const o=e.files[0];if(!o.type.match(/image\/png/)){u("Error: Only PNG files are allowed");return}if(o.size>5*1024*1024){u("Error: File size exceeds 5MB limit");return}g.value=o;const S=new FileReader;S.onload=M=>{k.value=M.target?.result},S.readAsDataURL(o)}},N=async()=>{if(!g.value){u("Error: No file selected");return}c.value=!0;try{const d=new FormData;d.append("file",g.value);const e=await Y.post("setup/logo",d,{headers:{"Content-Type":"multipart/form-data"}});e.data.success?(u("Logo uploaded successfully"),g.value=null,k.value=null):u(`Error: ${e.data.message}`)}catch(d){u(`Error uploading logo: ${d instanceof Error?d.message:"Unknown error"}`)}finally{c.value=!1}};return(d,e)=>(f(),j(t(z),{title:"Settings",items:D,modelValue:m.value,"onUpdate:modelValue":e[20]||(e[20]=o=>m.value=o)},{default:I(()=>[m.value==="general-info"?(f(),b("section",se,[e[31]||(e[31]=s("h2",{class:"text-2xl font-semibold text-foreground"},"Organization Information",-1)),e[32]||(e[32]=s("hr",{class:"border-border"},null,-1)),s("form",oe,[s("div",te,[s("label",ie,[e[21]||(e[21]=s("span",{class:"text-sm font-medium text-foreground"},"Organization Name",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o),placeholder:"Name ...",disabled:t(i)},null,8,le),[[a,l.name]])]),s("label",ne,[e[22]||(e[22]=s("span",{class:"text-sm font-medium text-foreground"},"Tag Line",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=o=>l.tagLine=o),placeholder:"Tag Line ...",disabled:t(i)},null,8,re),[[a,l.tagLine]])]),s("label",de,[e[23]||(e[23]=s("span",{class:"text-sm font-medium text-foreground"},"Organization Email",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=o=>l.email=o),placeholder:"Name ...",disabled:t(i)},null,8,ae),[[a,l.email]])]),s("label",ue,[e[24]||(e[24]=s("span",{class:"text-sm font-medium text-foreground"},"CC Emails",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=o=>l.emailCc=o),placeholder:"Name ...",disabled:t(i)},null,8,fe),[[a,l.emailCc]])]),s("label",be,[e[25]||(e[25]=s("span",{class:"text-sm font-medium text-foreground"},"Lab Mobile Phone",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=o=>l.mobilePhone=o),placeholder:"Name ...",disabled:t(i)},null,8,pe),[[a,l.mobilePhone]])]),s("label",me,[e[26]||(e[26]=s("span",{class:"text-sm font-medium text-foreground"},"Lab Business Phone",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=o=>l.businessPhone=o),placeholder:"Name ...",disabled:t(i)},null,8,ge),[[a,l.businessPhone]])]),s("label",ce,[e[27]||(e[27]=s("span",{class:"text-sm font-medium text-foreground"},"Address",-1)),r(s("textarea",{class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=o=>l.address=o),placeholder:"Address ...",disabled:t(i)},null,8,xe),[[a,l.address]])]),s("label",ve,[e[28]||(e[28]=s("span",{class:"text-sm font-medium text-foreground"},"Banking Details",-1)),r(s("textarea",{class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=o=>l.banking=o),placeholder:"Banking ...",disabled:t(i)},null,8,ye),[[a,l.banking]])]),s("label",ke,[e[29]||(e[29]=s("span",{class:"text-sm font-medium text-foreground"},"Quality Statement",-1)),r(s("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=o=>l.qualityStatement=o),placeholder:"Quality Statement ...",disabled:t(i)},null,8,we),[[a,l.qualityStatement]])])]),e[30]||(e[30]=s("hr",{class:"border-border"},null,-1)),r(s("button",{type:"button",onClick:e[9]||(e[9]=V(o=>C(),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Update ",512),[[w,!t(i)]])])])):v("",!0),m.value==="logo-upload"?(f(),b("section",he,[e[37]||(e[37]=s("h2",{class:"text-2xl font-semibold text-foreground"},"Organization Logo",-1)),e[38]||(e[38]=s("hr",{class:"border-border"},null,-1)),s("div",Ue,[s("div",Oe,[s("label",Pe,[e[33]||(e[33]=s("span",{class:"text-sm font-medium text-foreground mb-2 block"},"Upload Logo (PNG only, max 5MB)",-1)),s("input",{type:"file",accept:".png,image/png",onChange:E,disabled:t(c),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,40,Se)])]),k.value?(f(),b("div",_e,[e[34]||(e[34]=s("p",{class:"text-sm font-medium text-foreground"},"Preview:",-1)),s("div",Le,[s("img",{src:k.value,alt:"Logo preview",class:"max-h-40 max-w-xs"},null,8,Ve)])])):v("",!0),e[35]||(e[35]=s("div",{class:"space-y-2 text-sm text-muted-foreground"},[s("p",null,[s("strong",null,"Requirements:")]),s("ul",{class:"list-disc list-inside space-y-1"},[s("li",null,"File format: PNG only"),s("li",null,"Maximum size: 5MB"),s("li",null,"File will be saved as logo.png in assets/custom/")])],-1)),e[36]||(e[36]=s("hr",{class:"border-border"},null,-1)),r(s("button",{type:"button",onClick:N,class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Upload Logo ",512),[[w,!t(c)&&g.value]]),t(c)?(f(),b("div",ze," Uploading... ")):v("",!0)])])):v("",!0),m.value==="other-settings"?(f(),b("section",Ce,[e[52]||(e[52]=s("h2",{class:"text-2xl font-semibold text-foreground"},"Other Settings",-1)),e[53]||(e[53]=s("hr",{class:"border-border"},null,-1)),s("form",Be,[s("div",De,[s("label",Ee,[e[39]||(e[39]=s("span",{class:"text-sm font-medium text-foreground"},"Password Lifetime (days)",-1)),r(s("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[10]||(e[10]=o=>n.passwordLifetime=o),placeholder:"Name ...",disabled:t(i)},null,8,Ne),[[a,n.passwordLifetime]])]),s("label",Me,[e[40]||(e[40]=s("span",{class:"text-sm font-medium text-foreground"},"Inactivity Auto Logout (minutes)",-1)),r(s("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=o=>n.inactivityLogOut=o),placeholder:"Name ...",disabled:t(i)},null,8,Ae),[[a,n.inactivityLogOut]])]),e[41]||(e[41]=s("span",{class:"block col-span-1"},null,-1))]),e[50]||(e[50]=s("hr",{class:"border-border"},null,-1)),s("div",Fe,[s("label",Te,[s("div",je,[r(s("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[12]||(e[12]=o=>n.allowBilling=o),disabled:t(i)},null,8,Ie),[[h,n.allowBilling]]),e[42]||(e[42]=s("span",{class:"text-sm font-medium text-foreground"},"Enable Sample Billing",-1))])]),s("label",$e,[s("div",qe,[r(s("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[13]||(e[13]=o=>n.allowAutoBilling=o),disabled:t(i)},null,8,Ge),[[h,n.allowAutoBilling]]),e[43]||(e[43]=s("span",{class:"text-sm font-medium text-foreground"},"Allow automatic billing on sample registration",-1))])]),s("label",Re,[s("div",He,[r(s("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[14]||(e[14]=o=>n.processBilledOnly=o),disabled:t(i)},null,8,Qe),[[h,n.processBilledOnly]]),e[44]||(e[44]=s("span",{class:"text-sm font-medium text-foreground"},"Only process billed analysis requests",-1))])]),s("div",Je,[e[46]||(e[46]=s("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Minimum Allowed Payment status ",-1)),r(s("select",{"onUpdate:modelValue":e[15]||(e[15]=o=>n.minPaymentStatus=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[45]||(e[45]=s("option",{value:""},"Select Payment Status",-1)),(f(!0),b($,null,q([t(U).Unpaid,t(U).Partial,t(U).Paid],o=>(f(),b("option",{key:o,value:o},G(o),9,We))),128))],512),[[R,n.minPaymentStatus]])]),s("label",Ye,[e[47]||(e[47]=s("span",{class:"text-sm font-medium text-foreground"},"Minimum Partial Percentage",-1)),r(s("input",{type:"number",min:"0.0",max:"1.0",step:"0.1",default:"0.5",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[16]||(e[16]=o=>n.minPartialPerentage=o),disabled:t(i)},null,8,Ze),[[a,n.minPartialPerentage]])]),s("label",Ke,[e[48]||(e[48]=s("span",{class:"text-sm font-medium text-foreground"},"Currency",-1)),r(s("input",{type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[17]||(e[17]=o=>n.currency=o),disabled:t(i)},null,8,Xe),[[a,n.currency]])]),s("label",es,[e[49]||(e[49]=s("span",{class:"text-sm font-medium text-foreground"},"Payment Terms (Days)",-1)),r(s("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[18]||(e[18]=o=>n.paymentTermsDays=o),disabled:t(i)},null,8,ss),[[a,n.paymentTermsDays]])])]),e[51]||(e[51]=s("hr",{class:"border-border"},null,-1)),r(s("button",{type:"button",onClick:e[19]||(e[19]=V(o=>B(),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Update ",512),[[w,!t(i)]])])])):v("",!0)]),_:1},8,["modelValue"]))}}),ds=K(os,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/laboratory/Organisation.vue"]]);export{ds as default};
