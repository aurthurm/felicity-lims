import{W,f as Y,a2 as b,h as Z,i as w,r as v,o as n,c as l,O as e,a as C,M as m,N as M,F as f,H as y,C as V,a5 as h,a7 as r,J as d,L as x,af as $,D as _,$ as q,z as G,Z as N,a4 as K,_ as Q}from"./index-93739211.js";import{l as X,m as ee}from"./analyses.mutations-e3a0ff1f.js";import{u as te}from"./setup-e711c708.js";import{u as se}from"./analysis-689a99f8.js";import"./_queries-2ba61825.js";const oe={class:"space-y-6"},ne={class:"grid grid-cols-12 gap-6"},le={class:"col-span-3"},re={class:"rounded-lg border border-border bg-card"},ae={class:"overflow-y-auto max-h-[540px] p-2"},de={class:"space-y-1"},ie=["onClick"],ue={class:"flex items-center justify-between"},ce={class:"text-sm font-medium"},pe={key:0,class:"text-xs text-muted-foreground"},me={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},fe={key:0,class:"col-span-9"},ge={class:"space-y-6"},ye={class:"rounded-lg border border-border bg-card p-6"},xe={class:"flex items-center justify-between"},be={class:"space-y-1"},ve={class:"text-xl font-semibold text-foreground"},_e={key:0,class:"text-sm text-muted-foreground"},he={class:"flex items-center space-x-2"},ke={class:"border-b border-border"},Te={class:"flex space-x-2"},Ae=["onClick"],we={class:"rounded-lg border border-border bg-card"},Ce={class:"p-6"},Se={key:0},Ee={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Ue={class:"grid grid-cols-6 gap-2 w-full"},De={class:"flex-grow p-1"},Me={class:h(["font-medium text-gray-500 hover:text-gray-700",{"text-gray-700 font-medium":!1}])},Ve=["id","onUpdate:modelValue"],$e=["for"],Ne={key:1,class:"col-span-9"},je={class:"text-xl font-semibold text-foreground"},ze={class:"space-y-4"},Be={class:"space-y-2"},Le={class:"space-y-2"},Fe=["value"],Oe={class:"space-y-2"},Re=W({__name:"AnalysesTemplates",setup(He){const c=se(),j=te(),{withClientMutation:S}=Y();let g=b("analyses-services");const z=["analyses-services"];let p=b(!1),E=b("");const k=b(!0);let o=Z({});const B=w(()=>j.getDepartments);c.fetchAnalysesServices({}),c.fetchAnalysesTemplates();const T=w(()=>c.getAnalysesServices),L=w(()=>c.getAnalysesTemplates);function F(){const a={name:o.name,description:o.description,departmentUid:o.departmentUid};S(X,{payload:a},"createAnalysisTemplate").then(t=>c.addAnalysisTemplate(t))}function U(){const a={name:o.name,description:o.description,departmentUid:o.departmentUid,active:o.active,services:o.analyses?.map(t=>t.uid)};S(ee,{uid:o.uid,payload:a},"updateAnalysisTemplate").then(t=>c.updateAnalysesTemplate(t))}function O(a){Object.assign(o,{...a}),T.value?.forEach(t=>{t[1].forEach(i=>{i.checked=!1,a.analyses?.some(A=>A.uid===i.uid)&&(i.checked=!0)})})}function R(){const a=[];T.value?.forEach(t=>{t[1].forEach(i=>{i.checked&&a.push(i)})}),o.analyses=a,U()}function D(a,t={}){k.value=a,p.value=!0,E.value=(a?"CREATE":"EDIT")+" ANALYSES TEMPLATE",a?Object.assign(o,{}):Object.assign(o,{...t})}function H(){k.value===!0&&F(),k.value===!1&&U(),p.value=!1}return(a,t)=>{const i=v("fel-button"),A=v("fel-heading"),I=v("fel-accordion"),J=v("fel-modal");return n(),l(f,null,[e("div",oe,[C(A,{title:"Analyses Templates"},{default:m(()=>[C(i,{onClick:t[0]||(t[0]=s=>D(!0))},{default:m(()=>t[7]||(t[7]=[M("Add Analyses Template")])),_:1})]),_:1}),e("div",ne,[e("section",le,[e("div",re,[t[8]||(t[8]=e("div",{class:"p-4 border-b border-border"},[e("h3",{class:"text-sm font-medium text-muted-foreground"},"Templates")],-1)),e("div",ae,[e("ul",de,[(n(!0),l(f,null,y(L.value,s=>(n(),l("li",{key:s.uid,onClick:V(u=>O(s),["prevent","stop"]),class:h(["rounded-md p-2 cursor-pointer transition-colors duration-200",s?.uid===r(o)?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[e("div",ue,[e("span",ce,d(s?.name),1),s?.department?.name?(n(),l("span",pe,d(s?.department?.name),1)):x("",!0)]),s?.description?(n(),l("p",me,d(s?.description),1)):x("",!0)],10,ie))),128))])])])]),r(o)?.uid!==void 0?(n(),l("section",fe,[e("div",ge,[e("div",ye,[e("div",xe,[e("div",be,[e("h2",ve,d(r(o)?.name),1),r(o)?.description?(n(),l("p",_e,d(r(o)?.description),1)):x("",!0)]),e("div",he,[e("button",{onClick:t[1]||(t[1]=s=>D(!1)),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},t[9]||(t[9]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]))])])]),e("nav",ke,[e("div",Te,[(n(),l(f,null,y(z,s=>e("button",{key:s,class:h(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r(g)===s?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:u=>$(g)?g.value=s:g=s},d(s),11,Ae)),64))])]),e("div",we,[e("div",Ce,[r(g)==="analyses-services"?(n(),l("div",Se,[t[11]||(t[11]=e("h3",null,"Analyses",-1)),t[12]||(t[12]=e("hr",null,null,-1)),e("section",Ee,[e("div",Ue,[(n(!0),l(f,null,y(T.value,s=>(n(),l("div",{class:"col-span-2",key:s[0]},[C(I,null,{title:m(()=>[M(d(s[0]),1)]),body:m(()=>[e("div",null,[e("ul",null,[(n(!0),l(f,null,y(s[1],u=>(n(),l("li",{key:u?.uid,class:h(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]])},[e("div",De,[e("div",Me,[_(e("input",{type:"checkbox",id:`toggle-${u?.uid}`,class:"form-control","onUpdate:modelValue":P=>u.checked=P},null,8,Ve),[[q,u.checked]]),e("label",{for:`toggle-${u?.uid}`,class:"text-gray-700 ml-4"},d(u?.name),9,$e)])]),t[10]||(t[10]=e("hr",null,null,-1))]))),128))])])]),_:2},1024)]))),128))]),e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:t[2]||(t[2]=s=>R())}," Update Template ")])])):x("",!0)])])])])):(n(),l("section",Ne,t[13]||(t[13]=[e("div",{class:"rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"},[e("div",{class:"text-4xl text-muted-foreground"},"ðŸ“‹"),e("h3",{class:"text-lg font-medium text-foreground"},"No Template Selected"),e("p",{class:"text-sm text-muted-foreground"},"Select a template from the list to view its details")],-1)])))])]),r(p)?(n(),G(J,{key:0,onClose:t[6]||(t[6]=s=>$(p)?p.value=!1:p=!1)},{header:m(()=>[e("h3",je,d(r(E)),1)]),body:m(()=>[e("form",{onSubmit:V(H,["prevent"]),class:"p-6 space-y-6"},[e("div",ze,[e("label",Be,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Template Name",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(o).name=s),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter template name"},null,512),[[N,r(o).name]])]),e("label",Le,[t[16]||(t[16]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(o).departmentUid=s),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[15]||(t[15]=e("option",{value:""},"Select department",-1)),(n(!0),l(f,null,y(B.value,s=>(n(),l("option",{key:s.uid,value:s.uid},d(s.name),9,Fe))),128))],512),[[K,r(o).departmentUid]])]),e("label",Oe,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(o).description=s),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter template description"},null,512),[[N,r(o).description]])])]),t[18]||(t[18]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):x("",!0)],64)}}}),Ze=Q(Re,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesTemplates.vue"]]);export{Ze as default};
