import{S as ee,f as te,ah as se,a7 as oe,a0 as ne,r as f,aj as M,o as l,c as u,a as p,L as k,M as ie,N as e,C as a,a5 as s,F as re,E as de,a3 as b,H as d,ac as c,K as N,y as le,X as C,Y as S,A as ae,Z as ue,$ as ce,_ as me}from"./index-8d0a01b3.js";import{u as fe,e as pe,f as be}from"./billing-35f84a68.js";import{c as ge,a as P,f as Y,b as xe,g as q,u as ve,e as m}from"./array-0034f731.js";import{f as E}from"./index-883d9a5f.js";const _e={class:"space-y-6"},ye={class:"rounded-lg border border-border bg-card p-6"},he={class:"grid grid-cols-12 gap-6"},Ve={initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-3 overflow-y-auto overscroll-contain voucher-scroll"},we={key:0,class:"rounded-lg border border-border bg-card p-4"},De={key:1,class:"space-y-2"},ke=["onClick"],Ce={class:"flex-grow"},Pe={class:"flex justify-between items-center"},Ue={class:"font-medium text-foreground"},Le={class:"text-sm text-muted-foreground"},Oe={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-9 space-y-6"},je={class:"rounded-lg border border-border bg-card p-6"},Me={class:"flex justify-between items-center mb-4"},Ne={class:"text-lg font-semibold text-foreground"},Se={class:"grid grid-cols-3 gap-8"},Ye={class:"space-y-4"},qe={class:"flex justify-between items-center"},Ee={class:"text-sm text-foreground"},Fe={class:"flex justify-between items-center"},$e={class:"text-sm text-foreground"},Re={class:"space-y-4"},Ae={class:"flex justify-between items-center"},Be={class:"text-sm text-foreground"},Te={class:"flex justify-between items-center"},Ie={class:"text-sm text-foreground"},ze={class:"space-y-4"},He={class:"flex justify-between items-center"},Ke={class:"text-sm text-foreground"},We={class:"flex justify-between items-center"},Xe={class:"text-sm text-foreground"},Ze={class:"space-y-6"},Ge={class:"grid grid-cols-4 gap-4"},Je={class:"block col-span-2 space-y-2"},Qe={class:"block col-span-1 space-y-2"},et={class:"block col-span-1 space-y-2"},tt={class:"grid grid-cols-4 gap-4"},st={class:"block col-span-2 space-y-2"},ot={class:"grid grid-cols-2 gap-4"},nt={class:"flex items-center space-x-2"},it={class:"flex items-center space-x-2"},rt={class:"flex justify-end"},dt=ee({__name:"Voucher",setup(lt){const F=ue(()=>ce(()=>import("./VoucherCodes-a5379c5c.js"),["assets/VoucherCodes-a5379c5c.js","assets/index-8d0a01b3.js","assets/index-a402b5a2.css","assets/billing-35f84a68.js","assets/array-0034f731.js","assets/VoucherCodes-bd5edd75.css"])),{withClientMutation:U}=te();let g=fe();const{vouchers:L,fetchingVouchers:$}=se(g);oe(()=>{g.fetchVouchers()});let r=ne(!1);const R=ge({uid:P().nullable(),name:P().required("Voucher Name is Required"),startDate:Y().required("Start Date is Required"),endDate:Y().required("End Date is Required"),usageLimit:xe().required("Usage Limit is Required"),used:P().nullable(),oncePerCustomer:q().default(!0),oncePerOrder:q().default(!0)}),{handleSubmit:A,errors:x,setFieldValue:i}=ve({validationSchema:R,initialValues:{oncePerCustomer:!0,oncePerOrder:!0}}),{value:v}=m("uid"),{value:_}=m("name"),{value:y}=m("startDate"),{value:h}=m("endDate"),{value:V}=m("usageLimit"),{value:B}=m("used"),{value:w}=m("oncePerCustomer"),{value:D}=m("oncePerOrder"),O=A(n=>{n.uid||H(n),n.uid&&K(n)});let T=n=>{i("uid",n.uid),i("name",n.name),i("startDate",E(n.startDate,"DD/MM/YYYY")),i("endDate",E(n.endDate,"DD/MM/YYYY")),i("usageLimit",n.usageLimit),i("used",n.used),i("oncePerCustomer",n.oncePerCustomer),i("oncePerOrder",n.oncePerOrder)},I=()=>{i("uid",void 0),i("name",void 0),i("startDate",void 0),i("endDate",void 0),i("usageLimit",void 0),i("oncePerCustomer",!0),i("oncePerOrder",!0)};const z=()=>{I(),r.value=!0},H=n=>{delete n.uid,U(pe,{payload:n},"createVoucher").then(t=>g.addVoucher(t)).finally(()=>r.value=!1)},K=n=>{delete n.uid,delete n.used,U(be,{uid:v?.value,payload:n},"updateVoucher").then(t=>g.updateVoucher(t)).finally(()=>r.value=!1)};return(n,t)=>{const W=f("fel-button"),X=f("fel-heading"),Z=f("fel-loader"),G=f("font-awesome-icon"),J=f("fel-modal"),j=M("motion"),Q=M("motion-slide-top");return l(),u("div",_e,[p(X,{title:"Vouchers"},{default:k(()=>[p(W,{onClick:z},{default:k(()=>t[9]||(t[9]=[ie("Add Voucher")])),_:1})]),_:1}),e("div",ye,[e("div",he,[a((l(),u("section",Ve,[s($)?(l(),u("div",we,[p(Z,{message:"Fetching vouchers ..."})])):(l(),u("div",De,[(l(!0),u(re,null,de(s(L),o=>(l(),u("button",{key:o.uid,onClick:at=>s(T)(o),class:b(["w-full flex items-center p-4 rounded-lg border transition-colors hover:bg-accent hover:text-accent-foreground",[o.uid===s(v)?"border-primary bg-primary/10":"border-border bg-card"]])},[e("div",Ce,[e("div",Pe,[e("span",Ue,d(o.name),1),e("span",Le,d(o.used)+" of "+d(o.usageLimit),1)])])],10,ke))),128))]))])),[[j]]),s(L)?.length>0&&s(v)?a((l(),u("section",Oe,[a((l(),u("div",je,[e("div",Me,[e("h4",Ne,d(s(_)?.toUpperCase()),1),e("button",{onClick:t[0]||(t[0]=o=>c(r)?r.value=!0:r=!0),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 w-9"},[p(G,{icon:"pen",class:"text-muted-foreground"})])]),e("div",Se,[e("div",Ye,[e("div",qe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date:",-1)),e("span",Ee,d(s(y)),1)]),e("div",Fe,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"End Date:",-1)),e("span",$e,d(s(h)),1)])]),e("div",Re,[e("div",Ae,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Usage Limit:",-1)),e("span",Be,d(s(V)),1)]),e("div",Te,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Used:",-1)),e("span",Ie,d(s(B)),1)])]),e("div",ze,[e("div",He,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per customer:",-1)),e("span",Ke,d(s(w)?"Yes":"No"),1)]),e("div",We,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per order:",-1)),e("span",Xe,d(s(D)?"Yes":"No"),1)])])])])),[[Q]]),p(s(F),{voucherUid:s(v)},null,8,["voucherUid"])])),[[j]]):N("",!0)])]),s(r)?(l(),le(J,{key:0,onClose:t[8]||(t[8]=o=>c(r)?r.value=!1:r=!1),contentWidth:"w-2/6"},{header:k(()=>t[16]||(t[16]=[e("h3",{class:"text-lg font-semibold text-foreground"},"Voucher Form",-1)])),body:k(()=>[e("form",Ze,[e("div",Ge,[e("label",Je,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-foreground"},"Voucher Name",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).name}]),type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>c(_)?_.value=o:null),placeholder:"Name ..."},null,2),[[C,s(_)]])]),e("label",Qe,[t[18]||(t[18]=e("span",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).startDate}]),type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>c(y)?y.value=o:null)},null,2),[[C,s(y)]])]),e("label",et,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-foreground"},"End Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).endDate}]),type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>c(h)?h.value=o:null)},null,2),[[C,s(h)]])])]),e("div",tt,[e("label",st,[t[20]||(t[20]=e("span",{class:"text-sm font-medium text-foreground"},"Usage Limit",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(x).usageLimit}]),type:"number",min:"1","onUpdate:modelValue":t[4]||(t[4]=o=>c(V)?V.value=o:null)},null,2),[[C,s(V)]])])]),e("div",ot,[e("label",nt,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>c(w)?w.value=o:null),checked:""},null,512),[[S,s(w)]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Customer",-1))]),e("label",it,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>c(D)?D.value=o:null),checked:""},null,512),[[S,s(D)]]),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Order",-1))])]),e("div",rt,[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:t[7]||(t[7]=ae((...o)=>s(O)&&s(O)(...o),["prevent"]))}," Save Voucher ")])])]),_:1})):N("",!0)])}}});const pt=me(dt,[["__scopeId","data-v-3f30ca74"],["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/billing/Voucher.vue"]]);export{pt as default};
