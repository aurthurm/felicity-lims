const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelTabsAside-BQwEtT0H.js","assets/index-CNAOKjig.js","assets/index-vawJu9QC.css"])))=>i.map(i=>d[i]);
import{a0 as E,h as P,g as _,a5 as A,f as M,a7 as b,i as j,a1 as I,a6 as q,aL as R,aM as G,ar as J,aJ as Q,_ as H,C as K,o as a,N as W,c as d,E as m,A as o,F as n,a2 as l,D as L,H as S,a3 as O,J as X,K as Y,L as Z,a9 as $}from"./index-CNAOKjig.js";import{u as ee}from"./user-BpCZXlao.js";import{u as oe}from"./setup-Cw0fY--X.js";const se=E({__name:"Organisation",setup(V,{expose:e}){e();const h=I(()=>q(()=>import("./FelTabsAside-BQwEtT0H.js"),__vite__mapDeps([0,1,2]))),{toastSuccess:s}=j(),c=ee(),u=oe();u.fetchOrganization();const i=P(()=>u.getOrganization),p=_({...i.value}),x=_({...i.value?.settings});A(()=>i.value?.uid,(t,r)=>{Object.assign(p,i.value),Object.assign(x,i.value?.settings)});const{withClientMutation:k}=M();let f=b(!1);const F=()=>{f.value=!0;const t={...p};delete t.uid,delete t.__typename,delete t.settings,k(R,{uid:p.uid,payload:t},"updateOrganization").then(r=>{u.updateOrganization(r),f.value=!1,s("Organization information updated")})},B=()=>{f.value=!0;const t={...x};delete t.uid,delete t.__typename,k(G,{uid:x.uid,payload:t},"updateOrganizationSetting").then(r=>{u.updateOrganizationSetting(r),f.value=!1,s("Organization settings updated")})};c.fetchUsers({});const C=P(()=>c.getUsers),T=b("general-info"),N=[{id:"general-info",label:"Information",icon:"fas fa-chart-bar"},{id:"other-settings",label:"Other",icon:"fas fa-user-clock"},{id:"logo-upload",label:"Logo",icon:"fas fa-image"}],g=b(null),w=b(null);let y=b(!1);const z={FelAsideTabs:h,toastSuccess:s,userStore:c,setupStore:u,laboratory:i,formOrganization:p,formSettings:x,withClientMutation:k,get processing(){return f},set processing(t){f=t},saveOrganizationForm:F,saveSettingForm:B,users:C,currentTab:T,items:N,logoFile:g,logoPreview:w,get logoUploading(){return y},set logoUploading(t){y=t},handleLogoFileSelect:t=>{const r=t.target;if(r.files&&r.files[0]){const v=r.files[0];if(!v.type.match(/image\/png/)){s("Error: Only PNG files are allowed");return}if(v.size>5*1024*1024){s("Error: File size exceeds 5MB limit");return}g.value=v;const U=new FileReader;U.onload=D=>{w.value=D.target?.result},U.readAsDataURL(v)}},uploadLogo:async()=>{if(!g.value){s("Error: No file selected");return}y.value=!0;try{const t=new FormData;t.append("file",g.value);const r=await J.post("setup/logo",t,{headers:{"Content-Type":"multipart/form-data"}});r.data.success?(s("Logo uploaded successfully"),g.value=null,w.value=null):s(`Error: ${r.data.message}`)}catch(t){s(`Error uploading logo: ${t instanceof Error?t.message:"Unknown error"}`)}finally{y.value=!1}},get PaymentStatus(){return Q}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),ie={key:0,class:"space-y-6"},te={class:"space-y-6"},ne={class:"grid grid-cols-2 gap-6"},le={class:"block col-span-1 space-y-2"},re=["disabled"],ae={class:"block col-span-1 space-y-2"},de=["disabled"],ue={class:"block col-span-1 space-y-2"},fe=["disabled"],ge={class:"block col-span-1 space-y-2"},be=["disabled"],me={class:"block col-span-1 space-y-2"},ce=["disabled"],pe={class:"block col-span-1 space-y-2"},xe=["disabled"],ye={class:"block col-span-1 space-y-2"},ve=["disabled"],ke={class:"block col-span-1 space-y-2"},we=["disabled"],Se={class:"block col-span-1 space-y-2"},Oe=["disabled"],he={key:1,class:"space-y-6"},ze={class:"space-y-6"},Ue={class:"space-y-3"},Pe={class:"block"},_e=["disabled"],Le={key:0,class:"space-y-3"},Ve={class:"flex items-center justify-center p-4 border border-border rounded-md bg-muted"},Fe=["src"],Be={key:1,class:"text-sm text-muted-foreground"},Ce={key:2,class:"space-y-6"},Te={class:"space-y-6"},Ne={class:"grid grid-cols-2 gap-6"},De={class:"block col-span-1 space-y-2"},Ee=["disabled"],Ae={class:"block col-span-1 space-y-2"},Me=["disabled"],je={class:"grid grid-cols-2 gap-6"},Ie={class:"block col-span-1 space-y-2"},qe={class:"flex items-center space-x-2"},Re=["disabled"],Ge={class:"block col-span-1 space-y-2"},Je={class:"flex items-center space-x-2"},Qe=["disabled"],He={class:"block col-span-1 space-y-2"},Ke={class:"flex items-center space-x-2"},We=["disabled"],Xe={class:"block col-span-1 space-y-2"},Ye=["value"],Ze={class:"block col-span-1 space-y-2"},$e=["disabled"],eo={class:"block col-span-1 space-y-2"},oo=["disabled"],so={class:"block col-span-1 space-y-2"},io=["disabled"];function to(V,e,h,s,c,u){return a(),K(s.FelAsideTabs,{title:"Settings",items:s.items,modelValue:s.currentTab,"onUpdate:modelValue":e[20]||(e[20]=i=>s.currentTab=i)},{default:W(()=>[s.currentTab==="general-info"?(a(),d("section",ie,[e[31]||(e[31]=o("h2",{class:"text-2xl font-semibold text-foreground"},"Organization Information",-1)),e[32]||(e[32]=o("hr",{class:"border-border"},null,-1)),o("form",te,[o("div",ne,[o("label",le,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Organization Name",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[0]||(e[0]=i=>s.formOrganization.name=i),placeholder:"Name ...",disabled:s.processing},null,8,re),[[l,s.formOrganization.name]])]),o("label",ae,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Tag Line",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=i=>s.formOrganization.tagLine=i),placeholder:"Tag Line ...",disabled:s.processing},null,8,de),[[l,s.formOrganization.tagLine]])]),o("label",ue,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Organization Email",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=i=>s.formOrganization.email=i),placeholder:"Name ...",disabled:s.processing},null,8,fe),[[l,s.formOrganization.email]])]),o("label",ge,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-foreground"},"CC Emails",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=i=>s.formOrganization.emailCc=i),placeholder:"Name ...",disabled:s.processing},null,8,be),[[l,s.formOrganization.emailCc]])]),o("label",me,[e[25]||(e[25]=o("span",{class:"text-sm font-medium text-foreground"},"Lab Mobile Phone",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=i=>s.formOrganization.mobilePhone=i),placeholder:"Name ...",disabled:s.processing},null,8,ce),[[l,s.formOrganization.mobilePhone]])]),o("label",pe,[e[26]||(e[26]=o("span",{class:"text-sm font-medium text-foreground"},"Lab Business Phone",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=i=>s.formOrganization.businessPhone=i),placeholder:"Name ...",disabled:s.processing},null,8,xe),[[l,s.formOrganization.businessPhone]])]),o("label",ye,[e[27]||(e[27]=o("span",{class:"text-sm font-medium text-foreground"},"Address",-1)),n(o("textarea",{class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=i=>s.formOrganization.address=i),placeholder:"Address ...",disabled:s.processing},null,8,ve),[[l,s.formOrganization.address]])]),o("label",ke,[e[28]||(e[28]=o("span",{class:"text-sm font-medium text-foreground"},"Banking Details",-1)),n(o("textarea",{class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=i=>s.formOrganization.banking=i),placeholder:"Banking ...",disabled:s.processing},null,8,we),[[l,s.formOrganization.banking]])]),o("label",Se,[e[29]||(e[29]=o("span",{class:"text-sm font-medium text-foreground"},"Quality Statement",-1)),n(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=i=>s.formOrganization.qualityStatement=i),placeholder:"Quality Statement ...",disabled:s.processing},null,8,Oe),[[l,s.formOrganization.qualityStatement]])])]),e[30]||(e[30]=o("hr",{class:"border-border"},null,-1)),n(o("button",{type:"button",onClick:e[9]||(e[9]=L(i=>s.saveOrganizationForm(),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Update ",512),[[S,!s.processing]])])])):m("",!0),s.currentTab==="logo-upload"?(a(),d("section",he,[e[37]||(e[37]=o("h2",{class:"text-2xl font-semibold text-foreground"},"Organization Logo",-1)),e[38]||(e[38]=o("hr",{class:"border-border"},null,-1)),o("div",ze,[o("div",Ue,[o("label",Pe,[e[33]||(e[33]=o("span",{class:"text-sm font-medium text-foreground mb-2 block"},"Upload Logo (PNG only, max 5MB)",-1)),o("input",{type:"file",accept:".png,image/png",onChange:s.handleLogoFileSelect,disabled:s.logoUploading,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,40,_e)])]),s.logoPreview?(a(),d("div",Le,[e[34]||(e[34]=o("p",{class:"text-sm font-medium text-foreground"},"Preview:",-1)),o("div",Ve,[o("img",{src:s.logoPreview,alt:"Logo preview",class:"max-h-40 max-w-xs"},null,8,Fe)])])):m("",!0),e[35]||(e[35]=o("div",{class:"space-y-2 text-sm text-muted-foreground"},[o("p",null,[o("strong",null,"Requirements:")]),o("ul",{class:"list-disc list-inside space-y-1"},[o("li",null,"File format: PNG only"),o("li",null,"Maximum size: 5MB"),o("li",null,"File will be saved as logo.png in assets/custom/")])],-1)),e[36]||(e[36]=o("hr",{class:"border-border"},null,-1)),n(o("button",{type:"button",onClick:s.uploadLogo,class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Upload Logo ",512),[[S,!s.logoUploading&&s.logoFile]]),s.logoUploading?(a(),d("div",Be," Uploading... ")):m("",!0)])])):m("",!0),s.currentTab==="other-settings"?(a(),d("section",Ce,[e[52]||(e[52]=o("h2",{class:"text-2xl font-semibold text-foreground"},"Other Settings",-1)),e[53]||(e[53]=o("hr",{class:"border-border"},null,-1)),o("form",Te,[o("div",Ne,[o("label",De,[e[39]||(e[39]=o("span",{class:"text-sm font-medium text-foreground"},"Password Lifetime (days)",-1)),n(o("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[10]||(e[10]=i=>s.formSettings.passwordLifetime=i),placeholder:"Name ...",disabled:s.processing},null,8,Ee),[[l,s.formSettings.passwordLifetime]])]),o("label",Ae,[e[40]||(e[40]=o("span",{class:"text-sm font-medium text-foreground"},"Inactivity Auto Logout (minutes)",-1)),n(o("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=i=>s.formSettings.inactivityLogOut=i),placeholder:"Name ...",disabled:s.processing},null,8,Me),[[l,s.formSettings.inactivityLogOut]])]),e[41]||(e[41]=o("span",{class:"block col-span-1"},null,-1))]),e[50]||(e[50]=o("hr",{class:"border-border"},null,-1)),o("div",je,[o("label",Ie,[o("div",qe,[n(o("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[12]||(e[12]=i=>s.formSettings.allowBilling=i),disabled:s.processing},null,8,Re),[[O,s.formSettings.allowBilling]]),e[42]||(e[42]=o("span",{class:"text-sm font-medium text-foreground"},"Enable Sample Billing",-1))])]),o("label",Ge,[o("div",Je,[n(o("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[13]||(e[13]=i=>s.formSettings.allowAutoBilling=i),disabled:s.processing},null,8,Qe),[[O,s.formSettings.allowAutoBilling]]),e[43]||(e[43]=o("span",{class:"text-sm font-medium text-foreground"},"Allow automatic billing on sample registration",-1))])]),o("label",He,[o("div",Ke,[n(o("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-ring","onUpdate:modelValue":e[14]||(e[14]=i=>s.formSettings.processBilledOnly=i),disabled:s.processing},null,8,We),[[O,s.formSettings.processBilledOnly]]),e[44]||(e[44]=o("span",{class:"text-sm font-medium text-foreground"},"Only process billed analysis requests",-1))])]),o("div",Xe,[e[46]||(e[46]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Minimum Allowed Payment status ",-1)),n(o("select",{"onUpdate:modelValue":e[15]||(e[15]=i=>s.formSettings.minPaymentStatus=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[45]||(e[45]=o("option",{value:""},"Select Payment Status",-1)),(a(!0),d(X,null,Y([s.PaymentStatus.Unpaid,s.PaymentStatus.Partial,s.PaymentStatus.Paid],i=>(a(),d("option",{key:i,value:i},Z(i),9,Ye))),128))],512),[[$,s.formSettings.minPaymentStatus]])]),o("label",Ze,[e[47]||(e[47]=o("span",{class:"text-sm font-medium text-foreground"},"Minimum Partial Percentage",-1)),n(o("input",{type:"number",min:"0.0",max:"1.0",step:"0.1",default:"0.5",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[16]||(e[16]=i=>s.formSettings.minPartialPerentage=i),disabled:s.processing},null,8,$e),[[l,s.formSettings.minPartialPerentage]])]),o("label",eo,[e[48]||(e[48]=o("span",{class:"text-sm font-medium text-foreground"},"Currency",-1)),n(o("input",{type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[17]||(e[17]=i=>s.formSettings.currency=i),disabled:s.processing},null,8,oo),[[l,s.formSettings.currency]])]),o("label",so,[e[49]||(e[49]=o("span",{class:"text-sm font-medium text-foreground"},"Payment Terms (Days)",-1)),n(o("input",{type:"number",min:"0",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[18]||(e[18]=i=>s.formSettings.paymentTermsDays=i),disabled:s.processing},null,8,io),[[l,s.formSettings.paymentTermsDays]])])]),e[51]||(e[51]=o("hr",{class:"border-border"},null,-1)),n(o("button",{type:"button",onClick:e[19]||(e[19]=L(i=>s.saveSettingForm(),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Update ",512),[[S,!s.processing]])])])):m("",!0)]),_:1},8,["modelValue"])}const fo=H(se,[["render",to],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/laboratory/Organisation.vue"]]);export{fo as default};
