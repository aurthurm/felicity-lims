import{P as C,ai as B,Z as f,a3 as l,aj as r,f as N,h as I,o as k,c as w,a as u,a2 as s,K as m,b as n,A,L as R,C as L,F as D,X as p,Y as h,_ as E}from"./index-e1b11e1a.js";import{u as M}from"./patient-e65f02c8.js";import{h as S,a as V,o as F}from"./constants-ba5dc390.js";const H=C({__name:"PatientListing",setup(O){const g=p(()=>h(()=>import("./FelDataTable-3747b614.js"),["assets/FelDataTable-3747b614.js","assets/index-e1b11e1a.js","assets/index-78b87750.css"])),v=p(()=>h(()=>import("./index-e1b11e1a.js").then(e=>e.cM),["assets/index-e1b11e1a.js","assets/index-78b87750.css"]));let i=M();const{patients:c,fetchingPatients:P,patientPageInfo:o}=B(i),b=f([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Patient Id",value:"patientId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,a){return l(r,{to:{name:"patient-detail",params:{patientUid:e?.uid}},innerHTML:e?.patientId})}},{name:"Full Name",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,a){return l(r,{to:{name:"patient-detail",params:{patientUid:e?.uid}},innerHTML:T(e)})}},{name:"Age",value:"age",sortable:!1,sortBy:"asc",hidden:!1},{name:"Gender",value:"gender",sortable:!1,sortBy:"asc",hidden:!1},{name:"Client Patient ID",value:"clientPatientId",sortable:!1,sortBy:"asc",hidden:!1},{name:"Province",value:"client.district.province.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"District",value:"client.district.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Client",value:"client.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"",value:"",sortable:!1,sortBy:"asc",showInToggler:!1,hidden:!1,customRender:function(e,a){return l(r,{to:{name:"samples-add",params:{patientUid:e?.uid}},class:"px-2 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",innerHTML:"+ Analysis Request"})}}]);let t=N({first:50,before:"",text:"",sortBy:["-uid"],filterAction:!1});i.fetchPatients(t);let d=f("");function y(e){t.first=100,t.before=o?.value?.endCursor??"",t.text=e.filterText,t.filterAction=!0,d.value=e.filterText,i.fetchPatients(t)}const _=I(()=>c?.value?.length+" of "+i.getPatientCount+" patients");function x(e){t.first=e.fetchCount,t.before=o?.value?.endCursor??"",t.text=e.filterText,t.filterAction=!1,i.fetchPatients(t)}let T=e=>e.firstName+" "+e.lastName;return(e,a)=>(k(),w(D,null,[u(s(v),{title:"Patients"}),u(s(g),{columns:b.value,data:s(c),toggleColumns:!0,loading:s(P),paginable:!0,pageMeta:{fetchCount:s(t).first,hasNextPage:s(o)?.hasNextPage,countNone:_.value},searchable:!0,filterable:!1,onOnSearch:y,onOnPaginate:x,selectable:!1},{footer:m(()=>[n("div",null,[a[1]||(a[1]=n("div",{class:"flex content-start items-center"},[n("span",{class:"text-sky-800"},[n("i",{class:"fas fa-info-circle"})]),n("p",{class:"ml-2 italic text-orange-600"}," Click register when you dont find your patient during search* ")],-1)),a[2]||(a[2]=n("hr",{class:"my-2"},null,-1)),A(u(s(r),{to:{name:"patients-register",query:{cpid:s(d)}},class:"px-4 p-1 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:m(()=>a[0]||(a[0]=[R(" Register New Patiet ")])),_:1},8,["to"]),[[L,S(V.CREATE,F.PATIENT)]])])]),_:1},8,["columns","data","loading","pageMeta"])],64))}}),G=E(H,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/patient/PatientListing.vue"]]);export{G as default};
