const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataTable-DLBrhw2Z.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/TooltipTrigger-BWIYwmnQ.js","assets/PopperContent-BfyCnGUj.js","assets/Input-BEm5S0CJ.js","assets/SelectValue-Ds0cfAgl.js","assets/useNonce-B4v0IDPb.js","assets/chevron-down-Dqf-ptA3.js","assets/useFocusGuards-Bjb6OG0k.js","assets/Spinner-Bl8RfjFA.js","assets/vue-multiselect.esm-Cvm3ZCjW.js"])))=>i.map(i=>d[i]);
import{Y as K,u as J,a0 as d,av as X,a7 as Z,ah as p,aq as O,a5 as S,a6 as D,a3 as j,_ as $,r as ee,c as ae,o as U,a,z as c,A as le,C as ne,K as l,B as oe,M as i,a4 as s,I as te,F as re}from"./index-OdhKCqIc.js";import{c as I,a as g,d as ie,u as me,F as de}from"./index.esm-BfHj8iGm.js";import{i as se,P as ue,Q as fe,R as ce,T as ge}from"./microbiology.mutations-cVAbKt4K.js";import{I as be}from"./Input-BEm5S0CJ.js";import{T as Fe}from"./Textarea-T3VcJTEo.js";import{F as xe,a as he,b as ve}from"./FormMessage-CgXFMXx9.js";import{F as _e}from"./FormLabel-DxP9wnWS.js";import{P as Ce}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const Me=K({__name:"AbxQCRange",setup(G,{expose:n}){n();const T=S(()=>D(()=>import("./DataTable-DLBrhw2Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),e=S(()=>D(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([11,1,2]))),{withClientMutation:v,withClientQuery:x}=J();let F=d(!1),t=d("");const b=d(!0),h=d(null),w=I({guideline:I().required("Guideline is required"),year:ie().typeError("Year is required").required("Year is required"),strain:g().trim().required("Strain is required"),referenceTable:g().trim().required("Reference table is required"),whonetOrgCode:g().trim().required("Whonet org code is required"),antibiotic:g().trim().required("Antibiotic is required"),abxTest:g().trim().required("Abx test is required"),whonetAbxCode:g().trim().required("Whonet abx code is required"),method:g().trim().required("Method is required"),medium:I().nullable(),minimum:g().trim().nullable(),maximum:g().trim().nullable(),comments:g().trim().nullable()}),{handleSubmit:R,resetForm:A,setValues:q}=me({validationSchema:w,initialValues:{guideline:null,year:"",strain:"",referenceTable:"",whonetOrgCode:"",antibiotic:"",abxTest:"",whonetAbxCode:"",method:"",medium:null,minimum:"",maximum:"",comments:""}}),B=d(!1),u=d([]),Q=d([]),P=d([]);let m=X({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const y=d(0);let _=d({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const N=Z(()=>u?.value?.length+" of "+y.value+" qcRanges"),E=d([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function C(o){x(ge,{text:o.text,pageSize:o.first,sortBy:o.sortBy},void 0).then(r=>{const f=r.abxQcRangeAll,M=f.items;o.filterAction?(u.value=[],u.value=M):u.value=O(u.value,M,"uid"),y.value=f?.totalCount,_.value=f?.pageInfo}).finally(()=>{B.value=!1})}p(()=>{x(se,{},"abxGuidelinesAll").then(o=>{o&&(Q.value=o)}),C(m),x(ue,{},"abxMediumAll").then(o=>{o&&(P.value=o)})});function W(o){m.first=100,m.after="",m.text=o.filterText,m.filterAction=!0,C(m)}function k(o){m.first=o.fetchCount,m.after=_?.value?.endCursor,m.text=o.filterText,m.filterAction=!1,C(m)}const Y=()=>A();function V(o,r={}){b.value=o,F.value=!0,t.value=(o?"Create":"Edit")+" QcRange",o?(h.value=null,A()):(h.value=r.uid??null,q({guideline:r.guideline??null,year:r.year??"",strain:r.strain??"",referenceTable:r.referenceTable??"",whonetOrgCode:r.whonetOrgCode??"",antibiotic:r.antibiotic??"",abxTest:r.abxTest??"",whonetAbxCode:r.whonetAbxCode??"",method:r.method??"",medium:r.medium??null,minimum:r.minimum??"",maximum:r.maximum??"",comments:r.comments??""}))}const z=R(o=>{const r={guidelineUid:o.guideline?.uid,year:Number(o.year),strain:o.strain,referenceTable:o.referenceTable,whonetOrgCode:o.whonetOrgCode,antibiotic:o.antibiotic,abxTest:o.abxTest,whonetAbxCode:o.whonetAbxCode,method:o.method,mediumUid:o.medium?.uid??null,minimum:o.minimum??null,maximum:o.maximum??null};b.value===!0&&v(fe,{payload:r},"createAbxQcRange").then(f=>{f&&(u.value=O(u.value,[f],"uid"))}),b.value===!1&&h.value&&v(ce,{uid:h.value,payload:r},"updateAbxQcRange").then(f=>{if(f){const M=u.value.findIndex(H=>H.uid==f.uid);u.value[M]=f}}),F.value=!1}),L={DataTable:T,VueMultiselect:e,withClientMutation:v,withClientQuery:x,get showModal(){return F},set showModal(o){F=o},get formTitle(){return t},set formTitle(o){t=o},formAction:b,currentUid:h,qcRangeSchema:w,handleSubmit:R,resetForm:A,setValues:q,fetchingQcRanges:B,qcRanges:u,abxGuidelines:Q,abxMediums:P,get abxParams(){return m},set abxParams(o){m=o},qcRangesCount:y,get qcRangesPageInfo(){return _},set qcRangesPageInfo(o){_=o},countNone:N,tableColumns:E,fetchQcRanges:C,searchQcRanges:W,showMoreQcRanges:k,resetQcRange:Y,FormManager:V,saveForm:z,get Button(){return j},get Input(){return be},get Textarea(){return Fe},get FormControl(){return ve},get FormField(){return de},get FormItem(){return he},get FormLabel(){return _e},get FormMessage(){return xe},PageHeading:Ce};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Ae={class:"rounded-lg shadow-sm bg-card p-6"},ye={class:"text-xl font-semibold text-foreground"},Ie={class:"space-y-4"},Te={class:"grid grid-cols-2 gap-4"},we={class:"space-y-4"},Re={class:"grid grid-cols-3 gap-4"},qe={class:"space-y-4"};function Be(G,n,T,e,v,x){const F=ee("Modal");return U(),ae(re,null,[a(e.PageHeading,{title:"Quality Control range"}),c("div",Ae,[a(e.DataTable,{columns:e.tableColumns,data:e.qcRanges,toggleColumns:!0,loading:e.fetchingQcRanges,paginable:!0,pageMeta:{fetchCount:e.abxParams.first,hasNextPage:!0,countNone:e.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:e.searchQcRanges,onOnSearchFocus:e.resetQcRange,onOnPaginate:e.showMoreQcRanges,selectable:!1},{footer:l(()=>[...n[2]||(n[2]=[])]),_:1},8,["columns","data","loading","pageMeta"])]),e.showModal?(U(),le(F,{key:0,onClose:n[1]||(n[1]=t=>e.showModal=!1),"content-width":"w-1/2"},{header:l(()=>[c("h3",ye,te(e.formTitle),1)]),body:l(()=>[c("form",{onSubmit:n[0]||(n[0]=oe((...t)=>e.saveForm&&e.saveForm(...t),["prevent"])),class:"space-y-6 p-4"},[c("div",Ie,[n[5]||(n[5]=c("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),c("div",Te,[a(e.FormField,{name:"guideline"},{default:l(({value:t,handleChange:b})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[3]||(n[3]=[i("Guidelines",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.VueMultiselect,{"model-value":t,"onUpdate:modelValue":b,options:e.abxGuidelines,searchable:!0,label:"name",class:"mt-1"},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"year"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[4]||(n[4]=[i("Year",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{type:"number",placeholder:"Enter year"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1})])]),c("div",we,[c("div",Re,[a(e.FormField,{name:"strain"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[6]||(n[6]=[i("Strain",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Strain"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"referenceTable"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[7]||(n[7]=[i("Reference Table",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Reference Table"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"whonetOrgCode"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[8]||(n[8]=[i("Whonet Org Code",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Whonet Org Code"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"antibiotic"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[9]||(n[9]=[i("Antibiotic",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Antibiotic"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"abxTest"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[10]||(n[10]=[i("Abx Test",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Abx Test"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"whonetAbxCode"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[11]||(n[11]=[i("Whonet Abx Code",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Whonet Abx Code"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"method"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[12]||(n[12]=[i("Method",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Method"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"medium"},{default:l(({value:t,handleChange:b})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[13]||(n[13]=[i("Medium",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.VueMultiselect,{"model-value":t,"onUpdate:modelValue":b,options:e.abxMediums,searchable:!0,label:"name",class:"mt-1"},null,8,["model-value","onUpdate:modelValue","options"])]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"minimum"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[14]||(n[14]=[i("Minimum",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Minimum"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1}),a(e.FormField,{name:"maximum"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[15]||(n[15]=[i("Maximum",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Input,s(t,{placeholder:"Maximum"}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1})])]),c("div",qe,[a(e.FormField,{name:"comments"},{default:l(({componentField:t})=>[a(e.FormItem,null,{default:l(()=>[a(e.FormLabel,null,{default:l(()=>[...n[16]||(n[16]=[i("Comments",-1)])]),_:1}),a(e.FormControl,null,{default:l(()=>[a(e.Textarea,s(t,{rows:"3",placeholder:"Additional comments..."}),null,16)]),_:2},1024),a(e.FormMessage)]),_:2},1024)]),_:1})]),n[18]||(n[18]=c("hr",{class:"border-border"},null,-1)),a(e.Button,{type:"submit",class:"w-full"},{default:l(()=>[...n[17]||(n[17]=[i("Save QcRange",-1)])]),_:1})],32)]),_:1})):ne("",!0)],64)}const Ee=$(Me,[["render",Be],["__scopeId","data-v-2041ea59"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{Ee as default};
