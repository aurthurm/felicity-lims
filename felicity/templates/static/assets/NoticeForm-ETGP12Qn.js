import{Y as H,a0 as c,ah as L,u as M,aw as E,a3 as S,_ as V,r as k,c as A,o as x,z as s,a as t,K as a,M as u,a4 as T,A as Y,C as U,B as P}from"./index-OdhKCqIc.js";import{A as q,a as R,b as j,B as O,c as Q,E as z,H as G,I as K,d as W,e as J,L as X,P as Z,S as $,T as ee,f as te,U as oe,g as ie,C as ae}from"./index-BQ5jAWaE.js";import{A as re,E as ne}from"./Notices-Dt0FTrRY.js";import{u as le}from"./notice-B8DN-4O0.js";import{c as se,e as w,g as de,a as D,d as me,u as ce,F as ue}from"./index.esm-BfHj8iGm.js";import{f as B}from"./index-CXV6PIcj.js";import{I as pe}from"./Input-BEm5S0CJ.js";import{F as ge,a as fe,b as _e}from"./FormMessage-CgXFMXx9.js";import{F as he}from"./FormLabel-DxP9wnWS.js";import"./setup-BcFG_bXr.js";import"./Spinner-Bl8RfjFA.js";import"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const Fe=H({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(f,{expose:i,emit:_}){i();const e=c(!1),p=c(null),h=c(ae);L(()=>{p.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[q,R,j,O,Q,z,G,K,W,J,X,Z,$,ee,te,oe,ie],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},e.value=!0});const m=f,d=_,{withClientMutation:r}=M(),n=le(),{notice:l}=E(m),C=c(new Date),F=se({uid:me(),title:D().required("Notice is required"),body:D().required("Notice body message is required"),expiry:de().required("Expiry is required").typeError("Invalid Date format"),groups:w(),departments:w()}),{handleSubmit:b}=ce({validationSchema:F,initialValues:{uid:l?.value?.uid,title:l?.value?.title,body:l?.value?.body,expiry:l?.value?.expiry,groups:l?.value?.groups,departments:l?.value?.departments}}),I=b(o=>{o.uid||v(o),o.uid&&y(o)});function v(o){r(re,{payload:{title:o.title,body:o.body,expiry:B(o.expiry,"YYYY-MM-DD HH:mm"),groups:o.groups||[],departments:o.departments||[]}},"createNotice").then(g=>{n.addNotice(g),d("close")})}function y(o){r(ne,{uid:o.uid,payload:{title:o.title,body:o.body,expiry:B(o.expiry,"YYYY-MM-DD HH:mm"),groups:o.groups||[],departments:o.departments||[]}},"updateNotice").then(g=>{n.updateNotice(g),d("close")})}const N={isLayoutReady:e,config:p,editor:h,props:m,emit:d,withClientMutation:r,noticeStore:n,notice:l,minDateTime:C,noticeSchema:F,handleSubmit:b,submitNoticeForm:I,addNotice:v,updateNotice:y,get Button(){return S},get Input(){return pe},get FormControl(){return _e},get FormField(){return ue},get FormItem(){return fe},get FormLabel(){return he},get FormMessage(){return ge}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),be={class:"space-y-4"},ve={class:"main-container min-w-full prose prose-slate"},ye={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},Ne={class:"editor-container__editor"},ke={ref:"editorElement"};function xe(f,i,_,e,p,h){const m=k("ckeditor"),d=k("VueDatePicker");return x(),A("form",{class:"space-y-4 p-4",onSubmit:i[0]||(i[0]=P((...r)=>e.submitNoticeForm&&e.submitNoticeForm(...r),["prevent"]))},[s("div",be,[t(e.FormField,{name:"title"},{default:a(({componentField:r})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...i[1]||(i[1]=[u("Title",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,T(r,{placeholder:"Notice title..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"body"},{default:a(({value:r,handleChange:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...i[2]||(i[2]=[u("Body",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[s("div",ve,[s("div",ye,[s("div",Ne,[s("div",ke,[e.isLayoutReady?(x(),Y(m,{key:0,"model-value":r,"onUpdate:modelValue":n,editor:e.editor,config:e.config,"tag-name":"textarea"},null,8,["model-value","onUpdate:modelValue","editor","config"])):U("",!0)],512)])],512)])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"expiry"},{default:a(({value:r,handleChange:n})=>[t(e.FormItem,null,{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...i[3]||(i[3]=[u("Expiration",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(d,{class:"w-full","model-value":r,"onUpdate:modelValue":n,"min-date":e.minDateTime,placeholder:"Select Expiry Date"},null,8,["model-value","onUpdate:modelValue","min-date"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),i[5]||(i[5]=s("div",{class:"border-t border-border my-4"},null,-1)),t(e.Button,{type:"submit",class:"w-full"},{default:a(()=>[...i[4]||(i[4]=[u(" Save Notice ",-1)])]),_:1})],32)}const Ye=V(Fe,[["render",xe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{Ye as default};
