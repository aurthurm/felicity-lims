import{P as oe,M as le,u as ne,e as ae,Z as C,h as y,f as D,r as ie,o as a,c as i,b as e,F as u,D as p,a1 as f,a2 as o,z as w,E as m,a as re,J as v,a7 as $,x as de,K as L,A as _,V as T,a4 as k,W as ce,X as me,aT as ue,aU as pe,Y as _e,aV as he,aW as ve,_ as ye}from"./index-fa13e788.js";import{u as fe}from"./analysis-235f825e.js";import{u as ge}from"./setup-8d8c5945.js";import"./_queries-fa6c96fd.js";const n=S=>(ue("data-v-548ca798"),S=S(),pe(),S),be={class:"mt-4"},xe={class:"flex items-center"},ke=n(()=>e("h1",{class:"h1 my-4 font-bold text-dark-700"},"WorkSheet Templates",-1)),we=n(()=>e("hr",null,null,-1)),Te={class:"grid grid-cols-12 gap-4 mt-2"},Se={class:"col-span-3"},Ue={class:"overflow-y-scroll overscroll-contain scroll-section"},Ce=["onClick"],We=["onClick"],Ve={key:0,class:"col-span-9 overflow-y-scroll overscroll-contain scroll-section"},Ae={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Ee={class:"grid grid-cols-12 gap-3"},Re={class:"col-span-12 px-3 sm:px-0"},Oe={class:"flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},je=n(()=>e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),Ie=[je],Me=n(()=>e("hr",null,null,-1)),qe={class:"grid grid-cols-2 mt-2"},De={class:"col-span-1"},$e={class:"flex"},Le=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Instrument:",-1)),Ne={class:"text-gray-600 text-sm md:text-md"},Pe={class:"flex"},Qe=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Analyses Service:",-1)),Be={class:"text-gray-600 text-sm md:text-md ml-1"},Fe={class:"col-span-1"},ze={class:"flex"},Ke=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Number of Samples:",-1)),Ge={class:"text-gray-600 text-sm md:text-md"},He={class:"flex"},Je=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Number of Reserved:",-1)),Xe={class:"text-gray-600 text-sm md:text-md"},Ye=n(()=>e("hr",{class:"my-4"},null,-1)),Ze={class:"grid grid-cols-2 mt-2"},es={class:"col-span-1"},ss={class:"flex w-full"},ts=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"WorkSheet type",-1)),os={class:"text-gray-600 text-sm md:text-md"},ls={key:0,class:"flex w-full"},ns=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Direction:",-1)),as={class:"text-gray-600 text-sm md:text-md"},is={key:0,class:"col-span-1"},rs={class:"flex w-full"},ds=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Rows:",-1)),cs={class:"text-gray-600 text-sm md:text-md"},ms={class:"flex w-full"},us=n(()=>e("span",{class:"text-gray-800 text-sm font-medium w-1/2"},"Columns:",-1)),ps={class:"text-gray-600 text-sm md:text-md"},_s={class:"bg-white shadow-md mt-2"},hs={class:"-mb-px flex justify-start"},vs=["onClick"],ys={class:"mt-4"},fs={key:0},gs=n(()=>e("h3",{class:"my-4"},"WorkSheet Layout Preview",-1)),bs=n(()=>e("hr",{class:"my-2"},null,-1)),xs={key:0},ks={class:"grid grid-cols-6 gap-x-2 w-1/2"},ws={class:"col-span-1 my-1"},Ts={key:1},Ss={action:"post",class:"p-1"},Us={class:"grid grid-cols-3 gap-x-4 mb-4"},Cs={class:"block col-span-2 mb-2"},Ws=n(()=>e("span",{class:"text-gray-700"},"Template Name",-1)),Vs={class:"block col-span-1 mb-2"},As=n(()=>e("span",{class:"text-gray-700"},"Number of Samples",-1)),Es=n(()=>e("span",{class:"text-orange-600 ml-2 italic"},"(less reserved)",-1)),Rs={class:"grid grid-cols-4 gap-x-4 mb-4"},Os={class:"block col-span-1 mb-2"},js=n(()=>e("span",{class:"text-gray-700"},"Template Type",-1)),Is=n(()=>e("option",{value:"flat"},"Single Column / Flat",-1)),Ms=n(()=>e("option",{value:"grid"},"GRID",-1)),qs=[Is,Ms],Ds={key:0,class:"col-span-3"},$s={class:"grid grid-cols-3 gap-x-4"},Ls={class:"block col-span-1 mb-2"},Ns=n(()=>e("span",{class:"text-gray-700"},"Cols",-1)),Ps={class:"block col-span-1 mb-2"},Qs=n(()=>e("span",{class:"text-gray-700"},"Rows",-1)),Bs={for:"toggle",class:"text-gray-700 mt-8 ml-4"},Fs={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},zs=n(()=>e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1)),Ks=n(()=>e("span",{class:"text-gray-700 text-base"},"Row Wise",-1)),Gs={class:"grid grid-cols-3 gap-x-4 mb-4"},Hs={class:"block col-span-1 mb-2"},Js=n(()=>e("span",{class:"text-gray-700"},"Instrument",-1)),Xs=n(()=>e("option",null,null,-1)),Ys=["value"],Zs={class:"block col-span-1 mb-2"},et=n(()=>e("span",{class:"text-gray-700"},"SampleType",-1)),st=n(()=>e("option",null,null,-1)),tt=["value"],ot={class:"block col-span-1 mb-2"},lt=n(()=>e("span",{class:"text-gray-700"},"Anslysis Service",-1)),nt=n(()=>e("option",null,null,-1)),at=["value"],it={id:"samples"},rt=n(()=>e("hr",null,null,-1)),dt={class:"flex justify-between items-center py-2"},ct=n(()=>e("h5",null,"Reserved Positions",-1)),mt={class:"block col-span-1 mb-2"},ut=n(()=>e("span",{class:"text-gray-700"},"QC Template",-1)),pt={class:"flex items-center"},_t=n(()=>e("option",null,null,-1)),ht=["value"],vt=n(()=>e("hr",{class:"mb-4"},null,-1)),yt={class:"flex items-center justify-between"},ft={class:""},gt={class:"grid grid-cols-6 gap-x-4"},bt={class:"block col-span-2 mb-2"},xt=n(()=>e("span",{class:"text-gray-700"},"Position",-1)),kt=["onUpdate:modelValue"],wt={class:"block col-span-2 mb-2"},Tt=n(()=>e("span",{class:"text-gray-700"},"Blank/Control",-1)),St=["onUpdate:modelValue"],Ut=["value"],Ct={class:""},Wt=["onClick"],Vt=n(()=>e("hr",null,null,-1)),At=n(()=>e("hr",null,null,-1)),Et=oe({__name:"WorkSheetsAdmin",setup(S){const N=me(()=>_e(()=>import("./index-fa13e788.js").then(r=>r.cN),["assets/index-fa13e788.js","assets/index-ccc6a521.css"])),U=le(),g=fe(),R=ne(),O=ge(),{withClientMutation:j}=ae();let b=C("preview");const P=["preview"];y(()=>"tab-"+b.value);let x=C(!1),W=C(null),s=D({}),I=C(""),Q=D({first:void 0,after:"",text:"",sortBy:["name"]});g.fetchAnalysesServices(Q),R.fetchSampleTypes(),O.fetchInstruments(),g.fetchQCTemplates(),g.fetchQCLevels(),U.fetchWorkSheetTemplates();const M=y(()=>g.getQCTemplates),B=y(()=>U.getWorkSheetTemplates);function F(){const r={name:s.name,sampleTypeUid:s.sampleTypeUid,instrumentUid:s.instrumentUid,description:s.description,qcTemplateUid:s.qcTemplateUid,reserved:s.reserved,numberOfSamples:+s.numberOfSamples,worksheetType:s.worksheetType,cols:s.cols,rows:s.rows,rowWise:s.rowWise,analysisUid:s.analysisUid};j(he,{payload:r},"createWorksheetTemplate").then(l=>U.addWorksheetTemplate(l))}function z(){const r={name:s.name,sampleTypeUid:s.sampleTypeUid,instrumentUid:s.instrumentUid,description:s.description,qcTemplateUid:s.qcTemplateUid,reserved:s.reserved,numberOfSamples:s.numberOfSamples,worksheetType:s.worksheetType,cols:s.cols,rows:s.rows,rowWise:s.rowWise,analysisUid:s.analysisUid};j(ve,{uid:s.uid,payload:r},"updateWorksheetTemplate").then(l=>U.updateWorksheetTemplate(l))}function K(r){let l=[];return Array.from({length:r?.numberOfSamples+r?.reserved?.length},(t,d)=>d+1).forEach(t=>{let d={position:t,row:1,col:1,name:"sample",sampleUid:void 0};r?.reserved?.some(c=>c.position===t)&&(d.name="control"),r?.reserved?.forEach(c=>{c[1]?.position===t&&(d.name=c[1]?.name)}),l.push(d)}),l}function V(){s.worksheetType=="grid"&&(s.rows=Math.ceil((s?.numberOfSamples+(s.reserved?.length|0))/s?.cols))}function q(r){Object.assign(s,r);const l=K(r);s.preview=l}function G(){s.reserved?.push({}),V()}function H(r){s.reserved?.splice(r,1)}function J(){if(s.reserved=[],!s.qcTemplateUid)return;M.value?.find(l=>l.uid===s.qcTemplateUid)?.qcLevels.forEach((l,h)=>{s.reserved?.push({position:h+1,levelUid:l.uid})}),V()}function X(r){r.target.value=="flat"&&(s.cols=void 0,s.rows=void 0)}function A(r,l={}){if(W.value=r,I.value=(r?"CREATE":"EDIT")+" WOKKSHEET TEMPLATE",x.value=!0,r){let h={};h.instrument={},h.sampleType={},h.analysis={},Object.assign(s,{...h})}else q(l)}function Y(){W.value&&F(),W.value||z(),x.value=!1}const Z=y(()=>O.getInstruments),ee=y(()=>g.getAnalysesServicesSimple?.filter(h=>h?.category?.name!=="Quality Control")),se=y(()=>g.getQCLevels),te=y(()=>R.getSampleTypes);return(r,l)=>{const h=ie("font-awesome-icon");return a(),i(u,null,[e("div",be,[e("div",xe,[ke,e("button",{class:"p-2 my-2 ml-8 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100",onClick:l[0]||(l[0]=t=>A(!0))}," Add Template ")]),we,e("div",Te,[e("section",Se,[e("div",Ue,[(a(!0),i(u,null,p(B.value,t=>(a(),i("div",{key:t.uid,class:f(o(s)?.uid===t.uid?"w-full flex justify-between p-2 mb-1 rounded-sm shadow border border-sky-800 bg-emerald-200":"bg-white w-full flex justify-between p-2 mb-1 rounded-sm shadow border")},[e("a",{onClick:w(d=>q(t),["prevent","stop"]),class:"font-semibold text-gray-700"},[e("span",null,m(t.name),1)],8,Ce),e("a",{onClick:d=>A(!1,t),class:"px-2 cursor"},[re(h,{icon:"pen"})],8,We)],2))),128))])]),o(s).uid?(a(),i("section",Ve,[e("div",Ae,[e("div",Ee,[e("div",Re,[e("div",Oe,[e("span",null,m(o(s).name),1),e("div",null,[e("button",{onClick:l[1]||(l[1]=t=>A(!1,o(s))),class:"ml-4 inline-flex items-center justify-center w-8 h-8 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"},[...Ie])])]),Me,e("div",qe,[e("div",De,[e("div",$e,[Le,e("span",Ne,m(o(s).instrument?.name),1)]),e("div",Pe,[Qe,e("span",Be,m(o(s)?.analysis?.name),1)])]),e("div",Fe,[e("div",ze,[Ke,e("span",Ge,m(o(s).numberOfSamples),1)]),e("div",He,[Je,e("span",Xe,m(o(s).reserved?.length),1)])])]),Ye,e("div",Ze,[e("div",es,[e("div",ss,[ts,e("span",os,m(o(s).worksheetType),1)]),o(s).worksheetType=="grid"?(a(),i("div",ls,[ns,e("span",as,m(o(s).rowWise?"row-wise":"column-wise"),1)])):v("",!0)]),o(s).worksheetType=="grid"?(a(),i("div",is,[e("div",rs,[ds,e("span",cs,m(o(s).rows),1)]),e("div",ms,[us,e("span",ps,m(o(s).cols),1)])])):v("",!0)])])])]),e("nav",_s,[e("div",hs,[(a(),i(u,null,p(P,t=>e("a",{key:t,class:f(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":o(b)===t}]),onClick:d=>$(b)?b.value=t:b=t},m(t),11,vs)),64))])]),e("section",ys,[o(b)==="preview"?(a(),i("div",fs,[gs,bs,o(s).worksheetType=="flat"?(a(),i("div",xs,[(a(!0),i(u,null,p(o(s)?.preview||[],(t,d)=>(a(),i("div",ks,[e("span",ws,m(t.position)+":",1),e("span",{class:f(["col-span-5 my-1 p-1 text-white rounded-xl flex justify-center",{"bg-emerald-600":t.name!=="sample"},{"bg-sky-800":t.name==="sample"}])},m(t.name),3)]))),256))])):v("",!0),o(s).worksheetType=="grid"?(a(),i("div",Ts,[o(s).rowWise?(a(!0),i(u,{key:0},p(o(s).rows,(t,d)=>(a(),i("div",{class:f(["grid grid-cols-"+o(s).cols,"gap-2"]),key:d+"x"},[(a(!0),i(u,null,p(o(s).cols,(c,E)=>(a(),i("div",{key:E,class:"col-span-1 w-full"},[e("span",{class:f(["my-1 p-1 text-white rounded-xl flex justify-center",{"bg-emerald-600":o(s)?.preview[d*o(s).cols+c-1]?.name!=="sample"},{"bg-sky-800":o(s)?.preview[d*o(s).cols+c-1]?.name==="sample"}])},"("+m(d*o(s).cols+c)+") "+m(o(s)?.preview[d*o(s).cols+c-1]?.name),3)]))),128))],2))),128)):(a(),i("div",{key:1,class:f(["grid grid-cols-"+o(s).cols,"gap-2"])},[(a(!0),i(u,null,p(o(s).cols,(t,d)=>(a(),i("div",{class:"col-span-1",key:d+"y"},[(a(!0),i(u,null,p(o(s).rows,(c,E)=>(a(),i("div",{key:E},[e("span",{class:f(["my-1 p-1 text-white rounded-xl flex justify-center",{"bg-emerald-600":o(s)?.preview[d*o(s).rows+c-1]?.name!=="sample"},{"bg-sky-800":o(s)?.preview[d*o(s).rows+c-1]?.name==="sample"}])},"("+m(d*o(s).rows+c)+") "+m(o(s)?.preview[d*o(s).rows+c-1]?.name),3)]))),128))]))),128))],2))])):v("",!0)])):v("",!0)])])):v("",!0)])]),o(x)?(a(),de(o(N),{key:0,onClose:l[17]||(l[17]=t=>$(x)?x.value=!1:x=!1)},{header:L(()=>[e("h3",null,m(o(I)),1)]),body:L(()=>[e("form",Ss,[e("div",Us,[e("label",Cs,[Ws,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":l[2]||(l[2]=t=>o(s).name=t),placeholder:"Name ..."},null,512),[[T,o(s).name]])]),e("label",Vs,[As,Es,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":l[3]||(l[3]=t=>o(s).numberOfSamples=t),placeholder:"Count ...",type:"number"},null,512),[[T,o(s).numberOfSamples]])])]),e("div",Rs,[e("label",Os,[js,_(e("select",{class:"form-select block w-full mt-1",onChange:l[4]||(l[4]=t=>X(t)),"onUpdate:modelValue":l[5]||(l[5]=t=>o(s).worksheetType=t)},[...qs],544),[[k,o(s).worksheetType]])]),o(s).worksheetType==="grid"?(a(),i("span",Ds,[e("div",$s,[e("label",Ls,[Ns,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":l[6]||(l[6]=t=>o(s).cols=t),onKeyup:l[7]||(l[7]=t=>V()),type:"number"},null,544),[[T,o(s).cols]])]),e("label",Ps,[Qs,_(e("input",{class:"form-input mt-1 block w-full bg-gray-100","onUpdate:modelValue":l[8]||(l[8]=t=>o(s).rows=t),type:"number",disabled:""},null,512),[[T,o(s).rows]])]),e("label",Bs,[e("div",Fs,[_(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":l[9]||(l[9]=t=>o(s).rowWise=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[ce,o(s).rowWise]]),zs]),Ks])])])):v("",!0)]),e("div",Gs,[e("label",Hs,[Js,_(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":l[10]||(l[10]=t=>o(s).instrumentUid=t)},[Xs,(a(!0),i(u,null,p(Z.value,t=>(a(),i("option",{key:t.uid,value:t.uid},m(t.name),9,Ys))),128))],512),[[k,o(s).instrumentUid]])]),e("label",Zs,[et,_(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":l[11]||(l[11]=t=>o(s).sampleTypeUid=t)},[st,(a(!0),i(u,null,p(te.value,t=>(a(),i("option",{key:t.uid,value:t.uid},m(t.name),9,tt))),128))],512),[[k,o(s).sampleTypeUid]])]),e("label",ot,[lt,_(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":l[12]||(l[12]=t=>o(s).analysisUid=t)},[nt,(a(!0),i(u,null,p(ee.value,t=>(a(),i("option",{key:t.uid,value:t.uid},m(t.name),9,at))),128))],512),[[k,o(s).analysisUid]])])]),e("section",it,[rt,e("div",dt,[ct,e("label",mt,[ut,e("div",pt,[_(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":l[13]||(l[13]=t=>o(s).qcTemplateUid=t)},[_t,(a(!0),i(u,null,p(M.value,t=>(a(),i("option",{key:t.uid,value:t.uid},m(t.name),9,ht))),128))],512),[[k,o(s).qcTemplateUid]]),e("button",{onClick:l[14]||(l[14]=w(t=>J(),["prevent"])),class:"px-2 py-1 ml-2 h-auto border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Apply ")])]),e("button",{onClick:l[15]||(l[15]=w(t=>G(),["prevent"])),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Reserve Slot ")]),vt,(a(!0),i(u,null,p(o(s).reserved,(t,d)=>(a(),i("div",{key:d},[e("div",yt,[e("div",ft,[e("div",gt,[e("label",bt,[xt,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":c=>t.position=c,type:"number"},null,8,kt),[[T,t.position]])]),e("label",wt,[Tt,_(e("select",{"onUpdate:modelValue":c=>t.levelUid=c,class:"form-input mt-1 block w-full"},[(a(!0),i(u,null,p(se.value,c=>(a(),i("option",{key:c.uid,value:c.uid},m(c.level),9,Ut))),128))],8,St),[[k,t.levelUid]])])])]),e("div",Ct,[e("button",{onClick:w(c=>H(d),["prevent"]),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Remove ",8,Wt)])]),Vt]))),128))]),At,e("button",{type:"button",onClick:l[16]||(l[16]=w(t=>Y(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):v("",!0)],64)}}});const Mt=ye(Et,[["__scopeId","data-v-548ca798"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/worksheets/WorkSheetsAdmin.vue"]]);export{Mt as default};
