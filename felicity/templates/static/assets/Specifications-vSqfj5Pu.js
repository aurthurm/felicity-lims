import{Y as D,u as z,aw as q,a0 as S,an as G,a7 as K,bb as Y,a9 as J,aa as Q,ab as X,ad as Z,ae as j,af as $,a3 as ee,_ as le,c as y,o as g,a as l,z as d,A as C,C as te,K as t,M as o,F as R,H as E,I as m,B as ae,a4 as s,aK as ne,aL as re}from"./index-OdhKCqIc.js";import{c as oe,d as x,a as b,u as de,F as ie}from"./index.esm-BfHj8iGm.js";import{M as me,N as se}from"./analyses.mutations-DUxQZn1r.js";import{u as ue}from"./setup-BcFG_bXr.js";import{u as fe}from"./analysis-PB9AMevg.js";import{I as ge}from"./Input-BEm5S0CJ.js";import{F as xe,a as be,b as Fe}from"./FormMessage-CgXFMXx9.js";import{F as _e}from"./FormLabel-DxP9wnWS.js";import{S as Me,a as we,b as ce,c as Te,d as pe}from"./SelectValue-Ds0cfAgl.js";import{P as Se}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const B="__none__",ve=D({name:"SpecificationsView",__name:"Specifications",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:""}},setup(I,{expose:a}){a();const _=fe(),e=ue(),{withClientMutation:M}=z(),w=I,{analysis:n}=q(w);let u=S(!1),v=S("");const c=S(!0),F=S(null),h=oe({minReport:b().trim().nullable(),minWarn:x().nullable(),min:x().nullable(),max:x().nullable(),maxWarn:x().nullable(),maxReport:b().trim().nullable(),warnValues:b().trim().nullable(),warnReport:b().trim().nullable(),methodUid:b().trim().nullable(),gender:b().trim().nullable(),ageMin:x().nullable(),ageMax:x().nullable()}),{handleSubmit:V,resetForm:A,setValues:W,setFieldValue:N}=de({validationSchema:h,initialValues:{minReport:"",minWarn:"",min:"",max:"",maxWarn:"",maxReport:"",warnValues:"",warnReport:"",methodUid:"",gender:"all",ageMin:"",ageMax:""}});G(()=>w.analysisUid,(r,i)=>{}),e.fetchMethods();const T=K(()=>e.getMethods);function k(r){N("methodUid",r===B?"":r)}const f=r=>{if(r===""||r===null||r===void 0)return null;const i=Number(r);return Number.isNaN(i)?null:i};function H(r){M(me,{payload:r},"createAnalysisSpecification").then(i=>_.addAnalysisSpecification(i))}function L(r){F.value&&M(se,{uid:F.value,payload:r},"updateAnalysisSpecification").then(i=>_.updateAnalysisSpecification(i))}function P(r,i={}){c.value=r,u.value=!0,v.value=(r?"CREATE":"EDIT")+" ANALYSIS SPECIFICATION",r?(F.value=null,A({values:{minReport:"",minWarn:"",min:"",max:"",maxWarn:"",maxReport:"",warnValues:"",warnReport:"",methodUid:"",gender:"all",ageMin:"",ageMax:""}})):(F.value=i.uid??null,W({minReport:i.minReport??"",minWarn:i.minWarn??"",min:i.min??"",max:i.max??"",maxWarn:i.maxWarn??"",maxReport:i.maxReport??"",warnValues:i.warnValues??"",warnReport:i.warnReport??"",methodUid:i.methodUid??"",gender:i.gender??"all",ageMin:i.ageMin??"",ageMax:i.ageMax??""}))}const O=V(r=>{const i=n?.value?.uid;if(!i)return;const p={analysisUid:i,minReport:r.minReport??null,minWarn:f(r.minWarn),min:f(r.min),max:f(r.max),maxWarn:f(r.maxWarn),maxReport:r.maxReport??null,warnValues:r.warnValues??null,warnReport:r.warnReport??null,gender:r.gender??null,ageMin:f(r.ageMin),ageMax:f(r.ageMax),methodUid:r.methodUid?r.methodUid:null};c.value===!0&&H(p),c.value===!1&&L(p),u.value=!1}),U={SELECT_NONE:B,analysisStore:_,setupStore:e,withClientMutation:M,props:w,analysis:n,get showModal(){return u},set showModal(r){u=r},get formTitle(){return v},set formTitle(r){v=r},formAction:c,currentUid:F,specificationSchema:h,handleSubmit:V,resetForm:A,setValues:W,setFieldValue:N,methods:T,onMethodChange:k,toNumberOrNull:f,addAnalysisSpecification:H,editAnalysisSpecification:L,FormManager:P,saveForm:O,methodName:r=>{if(!r||!T.value)return"";const i=T.value.findIndex(p=>p.uid===r);return T.value[i]?.name||""},get Button(){return ee},get Input(){return ge},get FormControl(){return Fe},get FormField(){return ie},get FormItem(){return be},get FormLabel(){return _e},get FormMessage(){return xe},get Select(){return pe},get SelectContent(){return Te},get SelectItem(){return ce},get SelectTrigger(){return we},get SelectValue(){return Me},get Table(){return $},get TableBody(){return j},get TableCell(){return Z},get TableHead(){return X},get TableHeader(){return Q},get TableRow(){return J},Modal:Y,PageHeading:Se};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),ye={class:"mt-4 border border-border bg-card rounded-lg shadow-md"},Ce={class:"relative w-full overflow-auto"},Re={class:"text-sm text-destructive"},Ie={class:"text-sm text-warning"},he={class:"text-sm text-foreground"},Ve={class:"text-sm text-foreground"},Ae={class:"text-sm text-warning"},We={class:"text-sm text-destructive"},Ne={class:"text-sm text-foreground"},He={class:"text-sm text-foreground"},Le={class:"text-sm text-foreground"},Ue={class:"text-sm text-foreground"},Ee={class:"text-sm text-foreground"},Be={class:"text-sm text-foreground"},ke={class:"text-lg font-bold text-foreground"},Pe={class:"space-y-4"},Oe={class:"grid grid-cols-6 gap-4"},De={class:"space-y-4"},ze={class:"grid grid-cols-2 gap-4"},qe={class:"space-y-4"},Ge={class:"grid grid-cols-4 gap-4"},Ke={class:"pt-4"};function Ye(I,a,_,e,M,w){return g(),y(R,null,[l(e.PageHeading,{title:"Specifications"},{default:t(()=>[l(e.Button,{onClick:a[0]||(a[0]=n=>e.FormManager(!0))},{default:t(()=>[...a[3]||(a[3]=[o("Add Specification",-1)])]),_:1})]),_:1}),d("div",ye,[d("div",Ce,[l(e.Table,{class:"w-full caption-bottom text-sm"},{default:t(()=>[l(e.TableHeader,{class:"[&_tr]:border-b"},{default:t(()=>[l(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:t(()=>[l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-destructive"},{default:t(()=>[...a[4]||(a[4]=[o("Min Report",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-warning"},{default:t(()=>[...a[5]||(a[5]=[o("Min Warn",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[6]||(a[6]=[o("Min",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[7]||(a[7]=[o("Max",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-warning"},{default:t(()=>[...a[8]||(a[8]=[o("Max Warn",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-destructive"},{default:t(()=>[...a[9]||(a[9]=[o("Max Report",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[10]||(a[10]=[o("Warn Texts",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[11]||(a[11]=[o("Text Report",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[12]||(a[12]=[o("Method",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[13]||(a[13]=[o("Gender",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[14]||(a[14]=[o("Age Min",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[15]||(a[15]=[o("Age Max",-1)])]),_:1}),l(e.TableHead,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:t(()=>[...a[16]||(a[16]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:t(()=>[(g(!0),y(R,null,E(e.analysis?.specifications,n=>(g(),C(e.TableRow,{key:n?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:t(()=>[l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Re,m(n.minReport),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ie,m(n.minWarn),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",he,m(n.min),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ve,m(n.max),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ae,m(n.maxWarn),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",We,m(n.maxReport),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ne,m(n.warnValues),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",He,m(n.warnReport),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Le,m(e.methodName(n?.methodUid)||""),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ue,m(n.gender),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Ee,m(n.ageMin),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm"},{default:t(()=>[d("div",Be,m(n.ageMax),1)]),_:2},1024),l(e.TableCell,{class:"px-4 py-3 align-middle text-right"},{default:t(()=>[l(e.Button,{variant:"outline",size:"sm",onClick:u=>e.FormManager(!1,n)},{default:t(()=>[...a[17]||(a[17]=[o("Edit",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),e.showModal?(g(),C(e.Modal,{key:0,onClose:a[2]||(a[2]=n=>e.showModal=!1),contentWidth:"w-3/4"},{header:t(()=>[d("h3",ke,m(e.formTitle),1)]),body:t(()=>[d("form",{onSubmit:a[1]||(a[1]=ae((...n)=>e.saveForm&&e.saveForm(...n),["prevent"])),class:"p-6 space-y-6"},[d("div",Pe,[a[24]||(a[24]=d("h4",{class:"text-lg font-semibold text-foreground"},"Numerical Results",-1)),a[25]||(a[25]=d("hr",{class:"border-border"},null,-1)),d("div",Oe,[l(e.FormField,{name:"minReport"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,{class:"text-destructive"},{default:t(()=>[...a[18]||(a[18]=[o("Min Report",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"minWarn"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,{class:"text-warning"},{default:t(()=>[...a[19]||(a[19]=[o("Min Warn",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"min"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[20]||(a[20]=[o("Min",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"max"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[21]||(a[21]=[o("Max",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"maxWarn"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,{class:"text-warning"},{default:t(()=>[...a[22]||(a[22]=[o("Max Warn",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"maxReport"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,{class:"text-destructive"},{default:t(()=>[...a[23]||(a[23]=[o("Max Report",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1})])]),d("div",De,[a[28]||(a[28]=d("h4",{class:"text-lg font-semibold text-foreground"},"Textual Results",-1)),a[29]||(a[29]=d("hr",{class:"border-border"},null,-1)),d("div",ze,[l(e.FormField,{name:"warnValues"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[26]||(a[26]=[o("Textual Results (comma separated)",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"warnReport"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[27]||(a[27]=[o("Report Message",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1})])]),d("div",qe,[a[38]||(a[38]=d("h4",{class:"text-lg font-semibold text-foreground"},"Conditions if Any",-1)),a[39]||(a[39]=d("hr",{class:"border-border"},null,-1)),d("div",Ge,[l(e.FormField,{name:"methodUid"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[30]||(a[30]=[o("Method",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Select,{"model-value":n.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onMethodChange},{default:t(()=>[l(e.SelectTrigger,null,{default:t(()=>[l(e.SelectValue,{placeholder:"Select Method"})]),_:1}),l(e.SelectContent,null,{default:t(()=>[l(e.SelectItem,{value:e.SELECT_NONE},{default:t(()=>[...a[31]||(a[31]=[o("Select Method",-1)])]),_:1}),(g(!0),y(R,null,E(e.methods,u=>(g(),C(e.SelectItem,{key:u?.uid,value:u.uid},{default:t(()=>[o(m(u?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"gender"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[32]||(a[32]=[o("Gender",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Select,ne(re(n)),{default:t(()=>[l(e.SelectTrigger,null,{default:t(()=>[l(e.SelectValue,{placeholder:"All"})]),_:1}),l(e.SelectContent,null,{default:t(()=>[l(e.SelectItem,{value:"all"},{default:t(()=>[...a[33]||(a[33]=[o("All",-1)])]),_:1}),l(e.SelectItem,{value:"male"},{default:t(()=>[...a[34]||(a[34]=[o("Male",-1)])]),_:1}),l(e.SelectItem,{value:"female"},{default:t(()=>[...a[35]||(a[35]=[o("Female",-1)])]),_:1})]),_:1})]),_:1},16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"ageMin"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[36]||(a[36]=[o("Age Min",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1}),l(e.FormField,{name:"ageMax"},{default:t(({componentField:n})=>[l(e.FormItem,null,{default:t(()=>[l(e.FormLabel,null,{default:t(()=>[...a[37]||(a[37]=[o("Age Max",-1)])]),_:1}),l(e.FormControl,null,{default:t(()=>[l(e.Input,s(n,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),l(e.FormMessage)]),_:2},1024)]),_:1})])]),d("div",Ke,[l(e.Button,{type:"submit",class:"w-full"},{default:t(()=>[...a[40]||(a[40]=[o("Save Form",-1)])]),_:1})])],32)]),_:1})):te("",!0)],64)}const sl=le(ve,[["render",Ye],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/services/Specifications.vue"]]);export{sl as default};
