const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelDataTable-B98pg9sE.js","assets/index-Cdc6vSVw.js","assets/index-B3SP4dh7.css","assets/vue-multiselect.esm-CZOh13og.js"])))=>i.map(i=>d[i]);
import{a0 as Z,f as $,a7 as n,g as P,h as c,ad as ee,a1 as I,a6 as S,ak as N,_ as oe,r as T,c as se,o as F,A as l,C as ae,E as le,a as u,N as p,P as te,D as ne,F as C,a2 as _,a3 as re,L as ie,J as de}from"./index-Cdc6vSVw.js";import{o as me,p as ue,q as fe,r as ce,s as be,t as ge,a as pe,u as ye,v as xe}from"./microbiology.mutations-CQJcOUVA.js";const ve=Z({__name:"AbxOrganism",setup(E,{expose:e}){e();const G=I(()=>S(()=>import("./FelDataTable-B98pg9sE.js"),__vite__mapDeps([0,1,2]))),s=I(()=>S(()=>import("./vue-multiselect.esm-CZOh13og.js"),__vite__mapDeps([3,1,2]))),{withClientMutation:y,withClientQuery:m}=$();let f=n(!1),b=n(""),a=P({});const t=n(!0),U=n(!1),i=n([]),D=n([]),O=n([]),K=c(()=>O.value.filter(o=>o.kingdomUid===a.kingdom?.uid)),k=n([]),j=c(()=>k.value.filter(o=>o.phylumUid===a.phylum?.uid)),A=n([]),L=c(()=>A.value.filter(o=>o.classUid===a.class?.uid)),w=n([]),q=c(()=>w.value.filter(o=>o.orderUid===a.order?.uid)),B=n([]),R=c(()=>B.value.filter(o=>o.familyUid===a.family?.uid));let r=P({first:50,after:"",text:"",sortBy:["name"],filterAction:!1});const V=n(0);let x=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const W=c(()=>i?.value?.length+" of "+V.value+" organisms"),z=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Name",value:"name",sortable:!1,sortBy:"asc",hidden:!1},{name:"whonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"replacedBy",value:"replacedBy",sortable:!1,sortBy:"asc",hidden:!0},{name:"taxonomicStatus",value:"taxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"common",value:"common",sortable:!1,sortBy:"asc",hidden:!0},{name:"organismType",value:"organismType",sortable:!1,sortBy:"asc",hidden:!1},{name:"anaerobe",value:"anaerobe",sortable:!1,sortBy:"asc",hidden:!1},{name:"morphology",value:"morphology",sortable:!1,sortBy:"asc",hidden:!0},{name:"subkingdomCode",value:"subkingdomCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"familyCode",value:"familyCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusGroup",value:"genusGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusCode",value:"genusCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"speciesGroup",value:"speciesGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"serovarGroup",value:"serovarGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"msfGrpClin",value:"msfGrpClin",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctCode",value:"sctCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctText",value:"sctText",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonId",value:"gbifTaxonId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifDatasetId",value:"gbifDatasetId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonomicStatus",value:"gbifTaxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"kingdom",value:"kingdom.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"phylum",value:"phylum.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"class",value:"class_.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"order",value:"order.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"family",value:"family.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"genus",value:"genus.name",sortable:!1,sortBy:"asc",hidden:!1}]);function v(o){m(pe,{text:o.text,pageSize:o.first,sortBy:o.sortBy},void 0).then(d=>{const g=d.abxOrganismAll,h=g.items;o.filterAction?(i.value=[],i.value=h):i.value=N(i.value,h,"uid"),V.value=g?.totalCount,x.value=g?.pageInfo}).finally(()=>{U.value=!1})}ee(()=>{v(r),m(me,{},"abxOrderAll").then(o=>{o&&(A.value=o)}),m(ue,{},"abxFamilyAll").then(o=>{o&&(w.value=o)}),m(fe,{},"abxKingdomAll").then(o=>{o&&(D.value=o)}),m(ce,{},"abxPhylumAll").then(o=>{o&&(O.value=o)}),m(be,{},"abxGenusAll").then(o=>{o&&(B.value=o)}),m(ge,{},"abxClassAll").then(o=>{o&&(k.value=o)})});function J(o){r.first=100,r.after="",r.text=o.filterText,r.filterAction=!0,v(r)}function Q(o){r.first=o.fetchCount,r.after=x?.value?.endCursor,r.text=o.filterText,r.filterAction=!1,v(r)}const H=()=>Object.assign(a,{});function X(o,d={}){t.value=o,f.value=!0,b.value=(o?"Create":"Edit")+" Organism",o?Object.assign(a,{}):Object.assign(a,{...d})}function Y(){const o={name:a?.name,whonetOrgCode:a?.whonetOrgCode,replacedBy:a?.replacedBy,taxonomicStatus:a?.taxonomicStatus,common:a?.common,organismType:a?.organismType,anaerobe:a?.anaerobe,morphology:a?.morphology,subkingdomCode:a?.subkingdomCode,familyCode:a?.familyCode,genusGroup:a?.genusGroup,genusCode:a?.genusCode,speciesGroup:a?.speciesGroup,serovarGroup:a?.serovarGroup,msfGrpClin:a?.msfGrpClin,sctCode:a?.sctCode,sctText:a?.sctText,gbifTaxonId:a?.gbifTaxonId,gbifDatasetId:a?.gbifDatasetId,gbifTaxonomicStatus:a?.gbifTaxonomicStatus,kingdomUid:a?.kingdom?.uid,phylumUid:a?.phylum?.uid,classUid:a?.class?.uid,orderUid:a?.order?.uid,familyUid:a?.family?.uid,genusUid:a?.genus?.uid,comments:a?.comments};t.value===!0&&y(ye,{payload:o},"createAbxOrganism").then(d=>{d&&(i.value=N(i.value,[d],"uid"))}),t.value===!1&&y(xe,{uid:a.uid,payload:o},"updateAbxOrganism").then(d=>{if(d){const g=i.value.findIndex(h=>h.uid==d.uid);i.value[g]=d}}),f.value=!1}const M={DataTable:G,VueMultiselect:s,withClientMutation:y,withClientQuery:m,get showModal(){return f},set showModal(o){f=o},get formTitle(){return b},set formTitle(o){b=o},get form(){return a},set form(o){a=o},formAction:t,fetchingOrganisms:U,abxOrganisms:i,abxKingdoms:D,abxPhylums:O,phylums:K,abxClasss:k,classes:j,abxOrders:A,orders:L,abxFamilys:w,familys:q,abxGenuss:B,genuses:R,get abxParams(){return r},set abxParams(o){r=o},organismCount:V,get organismPageInfo(){return x},set organismPageInfo(o){x=o},countNone:W,tableColumns:z,fetchOrganisms:v,searchOrganisms:J,showMoreOrganisms:Q,resetOrganism:H,FormManager:X,saveForm:Y};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),he={class:"space-y-6"},Ce={class:"bg-card p-6 shadow-sm rounded-lg"},Oe={class:"text-xl font-semibold text-foreground"},ke={class:"grid grid-cols-2 gap-4"},Ae={class:"block"},we={class:"block"},Be={class:"grid grid-cols-2 gap-4"},Ve={class:"block"},Te={class:"block"},_e={class:"grid grid-cols-2 gap-4"},Ge={class:"block"},Ue={class:"block"},De={class:"grid grid-cols-2 gap-4"},Me={class:"block"},Pe={class:"block"},Ie={class:"grid grid-cols-2 gap-4"},Se={class:"block"},Ne={class:"block"};function Fe(E,e,G,s,y,m){const f=T("fel-button"),b=T("fel-heading"),a=T("fel-modal");return F(),se(de,null,[l("div",he,[u(b,{title:"Organisms"},{default:p(()=>[u(f,{onClick:e[0]||(e[0]=t=>s.FormManager(!0))},{default:p(()=>[...e[12]||(e[12]=[te("Add Organism",-1)])]),_:1})]),_:1}),l("div",Ce,[u(s.DataTable,{columns:s.tableColumns,data:s.abxOrganisms,toggleColumns:!0,loading:s.fetchingOrganisms,paginable:!0,pageMeta:{fetchCount:s.abxParams.first,hasNextPage:!0,countNone:s.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:s.searchOrganisms,onOnSearchFocus:s.resetOrganism,onOnPaginate:s.showMoreOrganisms,selectable:!1},{footer:p(()=>[...e[13]||(e[13]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),s.showModal?(F(),ae(a,{key:0,onClose:e[11]||(e[11]=t=>s.showModal=!1),"content-width":"w-1/2"},{header:p(()=>[l("h3",Oe,ie(s.formTitle),1)]),body:p(()=>[l("form",{onSubmit:ne(s.saveForm,["prevent"]),class:"space-y-6 p-4"},[l("div",ke,[l("label",Ae,[e[14]||(e[14]=l("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),C(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=t=>s.form.name=t),placeholder:"Name ..."},null,512),[[_,s.form.name]])]),l("label",we,[e[15]||(e[15]=l("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),C(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=t=>s.form.whonetOrgCode=t),placeholder:"Whonet Org Code ..."},null,512),[[_,s.form.whonetOrgCode]])])]),l("div",Be,[l("label",Ve,[e[16]||(e[16]=l("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),u(s.VueMultiselect,{modelValue:s.form.kingdom,"onUpdate:modelValue":e[3]||(e[3]=t=>s.form.kingdom=t),options:s.abxKingdoms,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",Te,[e[17]||(e[17]=l("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),u(s.VueMultiselect,{modelValue:s.form.phylum,"onUpdate:modelValue":e[4]||(e[4]=t=>s.form.phylum=t),options:s.phylums,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",_e,[l("label",Ge,[e[18]||(e[18]=l("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),u(s.VueMultiselect,{modelValue:s.form.class,"onUpdate:modelValue":e[5]||(e[5]=t=>s.form.class=t),options:s.classes,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",Ue,[e[19]||(e[19]=l("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),u(s.VueMultiselect,{modelValue:s.form.order,"onUpdate:modelValue":e[6]||(e[6]=t=>s.form.order=t),options:s.orders,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",De,[l("label",Me,[e[20]||(e[20]=l("span",{class:"text-sm font-medium text-foreground"},"Family",-1)),u(s.VueMultiselect,{modelValue:s.form.family,"onUpdate:modelValue":e[7]||(e[7]=t=>s.form.family=t),options:s.familys,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",Pe,[e[21]||(e[21]=l("span",{class:"text-sm font-medium text-foreground"},"Genus",-1)),u(s.VueMultiselect,{modelValue:s.form.genus,"onUpdate:modelValue":e[8]||(e[8]=t=>s.form.genus=t),options:s.genuses,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",Ie,[l("label",Se,[e[22]||(e[22]=l("span",{class:"text-sm font-medium text-foreground"},"Organism Type",-1)),C(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[9]||(e[9]=t=>s.form.organismType=t),placeholder:"Organism Type ..."},null,512),[[_,s.form.organismType]])]),l("label",Ne,[e[23]||(e[23]=l("span",{class:"text-sm font-medium text-foreground"},"Anaerobe",-1)),C(l("input",{type:"checkbox",class:"mt-1 h-4 w-4 rounded border-border text-primary focus:ring-primary","onUpdate:modelValue":e[10]||(e[10]=t=>s.form.anaerobe=t)},null,512),[[re,s.form.anaerobe]])])]),e[24]||(e[24]=l("hr",{class:"border-border"},null,-1)),e[25]||(e[25]=l("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Organism ",-1))],32)]),_:1})):le("",!0)],64)}const je=oe(ve,[["render",Fe],["__scopeId","data-v-4d09f0a0"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganism.vue"]]);export{je as default};
