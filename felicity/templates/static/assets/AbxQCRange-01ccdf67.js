import{V as F,f as W,a1 as u,h as T,i as q,a8 as L,r as V,o as _,c as Y,a as g,M as p,L as f,O as o,a6 as t,z as j,J as z,C as $,D as r,Y as i,ae as J,F as K,$ as B,a0 as Q,af as U,_ as H}from"./index-0a787601.js";import{j as X,P as Z,Q as ee,R as oe,T as se}from"./microbiology.mutations-bd4fbfe1.js";const te={class:"rounded-lg shadow-sm bg-card p-6"},ae={class:"text-xl font-semibold text-foreground"},le={class:"space-y-4"},ne={class:"grid grid-cols-2 gap-4"},re={class:"block"},ie={class:"block"},de={class:"space-y-4"},ue={class:"grid grid-cols-3 gap-4"},me={class:"block"},fe={class:"block"},ce={class:"block"},be={class:"block"},pe={class:"block"},ge={class:"block"},xe={class:"block"},ye={class:"block"},ve={class:"block"},he={class:"block"},we={class:"space-y-4"},Ae={class:"block"},Ce=F({__name:"AbxQCRange",setup(ke){const O=B(()=>Q(()=>import("./FelDataTable-ff278bf5.js"),["assets/FelDataTable-ff278bf5.js","assets/index-0a787601.js","assets/index-8412b2a5.css"])),v=B(()=>Q(()=>import("./vue-multiselect.esm-230f9e8e.js"),["assets/vue-multiselect.esm-230f9e8e.js","assets/index-0a787601.js","assets/index-8412b2a5.css"])),{withClientMutation:h,withClientQuery:x}=W();let b=u(!1),D=u(""),s=T({});const w=u(!0),A=u(!1),d=u([]),C=u([]),k=u([]);let n=T({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const R=u(0);let M=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const I=q(()=>d?.value?.length+" of "+R.value+" qcRanges"),P=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function y(l){x(ee,{text:l.text,pageSize:l.first,sortBy:l.sortBy},void 0).then(e=>{const m=e.abxQcRangeAll,c=m.items;l.filterAction?(d.value=[],d.value=c):d.value=U(d.value,c,"uid"),R.value=m?.totalCount,M.value=m?.pageInfo}).finally(()=>{A.value=!1})}L(()=>{x(X,{},"abxGuidelinesAll").then(l=>{l&&(C.value=l)}),y(n),x(Z,{},"abxMediumAll").then(l=>{l&&(k.value=l)})});function S(l){n.first=100,n.after="",n.text=l.filterText,n.filterAction=!0,y(n)}function G(l){n.first=l.fetchCount,n.after=M?.value?.endCursor,n.text=l.filterText,n.filterAction=!1,y(n)}const E=()=>Object.assign(s,{});function N(){const l={guidelineUid:s.guideline?.uid,year:s.year,strain:s.strain,referenceTable:s.referenceTable,whonetOrgCode:s.whonetOrgCode,antibiotic:s.antibiotic,abxTest:s.abxTest,whonetAbxCode:s.whonetAbxCode,method:s.method,medium:s.medium,minimum:s.minimum,maximum:s.maximum};w.value===!0&&h(oe,{payload:l},"createAbxQcRange").then(e=>{e&&(d.value=U(d.value,[e],"uid"))}),w.value===!1&&h(se,{uid:s.uid,payload:l},"updateAbxQcRange").then(e=>{if(e){const m=d.value.findIndex(c=>c.uid==e.uid);d.value[m]=e}}),b.value=!1}return(l,e)=>{const m=V("fel-heading"),c=V("fel-modal");return _(),Y(K,null,[g(m,{title:"Quality Control range"},{default:p(()=>[f(' <fel-button @click="FormManager(true)">Add Medium</fel-button> ')]),_:1}),o("div",te,[g(t(O),{columns:P.value,data:d.value,toggleColumns:!0,loading:A.value,paginable:!0,pageMeta:{fetchCount:t(n).first,hasNextPage:!0,countNone:I.value},searchable:!0,filterable:!1,onOnSearchKeyUp:S,onOnSearchFocus:E,onOnPaginate:G,selectable:!1},{footer:p(()=>e[14]||(e[14]=[])),_:1},8,["columns","data","loading","pageMeta"])]),f(" QcRange Form Modal "),t(b)?(_(),j(c,{key:0,onClose:e[13]||(e[13]=a=>J(b)?b.value=!1:b=!1),"content-width":"w-1/2"},{header:p(()=>[o("h3",ae,z(t(D)),1)]),body:p(()=>[o("form",{onSubmit:$(N,["prevent"]),class:"space-y-6 p-4"},[f(" Basic Information "),o("div",le,[e[17]||(e[17]=o("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),o("div",ne,[o("label",re,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),g(t(v),{modelValue:t(s).guidelines,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).guidelines=a),options:C.value,searchable:!0,label:"name",class:"mt-1"},{default:p(()=>[f(' track-by="uid" ')]),_:1},8,["modelValue","options"])]),o("label",ie,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),r(o("input",{type:"number",class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[1]||(e[1]=a=>t(s).year=a),placeholder:"Enter year"},null,512),[[i,t(s).year]])])])]),f(" Coding Systems "),o("div",de,[o("div",ue,[o("label",me,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"Strain",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[2]||(e[2]=a=>t(s).strain=a),placeholder:"Strain"},null,512),[[i,t(s).strain]])]),o("label",fe,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"Reference Table",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[3]||(e[3]=a=>t(s).referenceTable=a),placeholder:"Reference Table"},null,512),[[i,t(s).referenceTable]])]),o("label",ce,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[4]||(e[4]=a=>t(s).whonetOrgCode=a),placeholder:"Whonet Org Code"},null,512),[[i,t(s).whonetOrgCode]])]),o("label",be,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Antibiotic",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[5]||(e[5]=a=>t(s).antibiotic=a),placeholder:"Antibiotic"},null,512),[[i,t(s).antibiotic]])]),o("label",pe,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Abx Test",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[6]||(e[6]=a=>t(s).abxTest=a),placeholder:"Abx Test"},null,512),[[i,t(s).abxTest]])]),o("label",ge,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Abx Code",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[7]||(e[7]=a=>t(s).whonetAbxCode=a),placeholder:"Whonet Abx Code"},null,512),[[i,t(s).whonetAbxCode]])]),o("label",xe,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-foreground"},"Method",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[8]||(e[8]=a=>t(s).method=a),placeholder:"Method"},null,512),[[i,t(s).method]])]),o("label",ye,[e[25]||(e[25]=o("span",{class:"text-sm font-medium text-foreground"},"Medium",-1)),g(t(v),{modelValue:t(s).medium,"onUpdate:modelValue":e[9]||(e[9]=a=>t(s).medium=a),options:k.value,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",ve,[e[26]||(e[26]=o("span",{class:"text-sm font-medium text-foreground"},"Minimum",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[10]||(e[10]=a=>t(s).minimum=a),placeholder:"Minimum"},null,512),[[i,t(s).minimum]])]),o("label",he,[e[27]||(e[27]=o("span",{class:"text-sm font-medium text-foreground"},"Maximum",-1)),r(o("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[11]||(e[11]=a=>t(s).maximum=a),placeholder:"Maximum"},null,512),[[i,t(s).maximum]])])])]),f(" Additional Information "),o("div",we,[o("label",Ae,[e[28]||(e[28]=o("span",{class:"text-sm font-medium text-foreground"},"Comments",-1)),r(o("textarea",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[12]||(e[12]=a=>t(s).comments=a),rows:"3",placeholder:"Additional comments..."},null,512),[[i,t(s).comments]])])]),e[29]||(e[29]=o("hr",{class:"border-border"},null,-1)),e[30]||(e[30]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save QcRange ",-1))],32)]),_:1})):f("v-if",!0)],64)}}});const Te=H(Ce,[["__scopeId","data-v-2041ea59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{Te as default};
