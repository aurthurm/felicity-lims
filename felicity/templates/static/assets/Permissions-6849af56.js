import{W as v,f as P,i as b,o as r,c as o,O as s,F as d,H as u,J as p,a as w,a7 as A,a0 as U,a1 as G,ax as D,_ as V}from"./index-93739211.js";import{u as B}from"./user-3b0a83d1.js";import"./_queries-2ba61825.js";const S={class:"space-y-6"},z={class:"bg-background rounded-lg shadow-sm overflow-hidden"},C={class:"relative"},E={class:"w-full"},F={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},O={class:"w-full"},L={class:"divide-y divide-border"},N={class:"bg-muted/50"},T={class:"px-4 py-3 font-medium text-sm text-foreground"},j={class:"px-4 py-2 text-sm text-muted-foreground"},H=v({__name:"Permissions",setup(I){const f=U(()=>G(()=>import("./FelSwitch-67ca16d5.js"),["assets/FelSwitch-67ca16d5.js","assets/index-93739211.js","assets/index-0f090789.css"]));let a=B();const{withClientMutation:_}=P();a.fetchGroupsAndPermissions();const l=b(()=>a.getGroups);function m(i,t){return i?.permissions?.some(e=>e?.uid===t?.uid)??!1}const g=(i,t)=>i?.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{}),h=b(()=>Array.from(Object.entries(g(a.getPermissions,"target"))));function k(i,t){_(D,{groupUid:i?.uid,permissionUid:t?.uid},"updateGroupPermissions").then(e=>a.updateGroupsAndPermissions(e))}function x(i,t,e){e!==m(i,t)&&k(i,t)}return(i,t)=>(r(),o("div",S,[s("div",z,[s("div",C,[s("table",E,[s("thead",null,[s("tr",null,[t[0]||(t[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),o(d,null,u(l.value,e=>(r(),o("th",{key:e.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},p(e.name),1))),128)),t[1]||(t[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),s("div",F,[s("table",O,[s("tbody",L,[(r(!0),o(d,null,u(h.value,e=>(r(),o(d,{key:e[0]},[s("tr",N,[s("td",T,p(e[0]),1),(r(!0),o(d,null,u(l.value,n=>(r(),o("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:n.uid}))),128))]),(r(!0),o(d,null,u(e[1],n=>(r(),o("tr",{key:n.uid},[s("td",j,p(n.action),1),(r(!0),o(d,null,u(l.value,c=>(r(),o("td",{key:c.uid,class:"px-4 py-2"},[w(A(f),{"model-value":m(c,n),"onUpdate:modelValue":y=>x(c,n,y),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),W=V(H,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{W as default};
