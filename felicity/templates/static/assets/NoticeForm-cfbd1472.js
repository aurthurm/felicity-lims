import{P as C,Z as n,aa as L,e as U,t as q,ak as y,r as x,o as k,c as P,b as t,A as I,V as $,a2 as i,a7 as u,E as m,x as R,J as z,a as Q,z as j,_ as G}from"./index-fa13e788.js";import{C as J,A as O,a as W,b as Z,B as K,c as X,E as ee,H as te,I as oe,d as ie,e as se,L as ae,P as ne,S as le,T as re,f as de,U as ce,g as ue}from"./index-7d84edd6.js";import{A as me,E as pe}from"./Notices-e823c663.js";import{u as ge}from"./notice-8d0545bb.js";import{c as he,d as _e,a as w,f as be,e as N,u as fe,b as p}from"./array-5698c257.js";import"./_baseForOwn-f09f6708.js";import"./merge-9af0dc11.js";import"./_isIterateeCall-63f093c4.js";import"./isArray-513c67aa.js";import"./mapValues-17240bfb.js";import"./isString-5d6832c3.js";import"./clone-304ea981.js";import"./_baseSet-8f475b6b.js";import"./setup-8d8c5945.js";import"./_queries-fa6c96fd.js";const ve={class:"grid grid-cols-2 gap-x-4 mb-4"},ye={class:"block col-span-2 mb-2"},xe=t("span",{class:"text-gray-700"},"Title",-1),ke={class:"text-orange-600 w-4/12"},we={class:"block col-span-2 mb-2"},Ne=t("span",{class:"text-gray-700"},"Body",-1),De={class:"main-container min-w-full prose prose-slate"},Ve={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},Ee={class:"editor-container__editor"},He={ref:"editorElement"},Se={class:"text-orange-600 w-4/12"},Be={class:"block col-span-2 mb-2"},Ae=t("span",{class:"text-gray-700"},"Expiration",-1),Fe={class:"text-orange-600 w-4/12"},Me=t("hr",null,null,-1),Te=t("button",{type:"submit",class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ",-1),Ye=C({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(D,{emit:V}){const g=n(!1),h=n(null),E=n(J);L(()=>{h.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[O,W,Z,K,X,ee,te,oe,ie,se,ae,ne,le,re,de,ce,ue],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},g.value=!0});const H=D,_=V,{withClientMutation:b}=U(),f=ge(),{notice:a}=q(H),S=n(new Date),B=he({uid:_e(),title:w().required("Notice is required"),body:w().required("Notice body message is required"),expiry:be().required("Expiry is required").typeError("Invalid Date format"),groups:N(),departments:N()}),{handleSubmit:A,errors:l}=fe({validationSchema:B,initialValues:{uid:a?.value?.uid,title:a?.value?.title,body:a?.value?.body,expiry:a?.value?.expiry,groups:a?.value?.groups,departments:a?.value?.departments}}),{value:r}=p("title"),{value:d}=p("body"),{value:c}=p("expiry"),v=A(e=>{e.uid||F(e),e.uid&&M(e)});function F(e){b(me,{payload:{title:e.title,body:e.body,expiry:y(e.expiry,"YYYY-MM-DD HH:mm"),groups:e.groups||[],departments:e.departments||[]}},"createNotice").then(o=>{f.addNotice(o),_("close")})}function M(e){b(pe,{uid:e.uid,payload:{title:e.title,body:e.body,expiry:y(e.expiry,"YYYY-MM-DD HH:mm"),groups:e.groups||[],departments:e.departments||[]}},"updateNotice").then(o=>{f.updateNotice(o),_("close")})}return(e,o)=>{const T=x("ckeditor"),Y=x("VueDatePicker");return k(),P("form",{action:"post",class:"p-1",onSubmit:o[3]||(o[3]=j((...s)=>i(v)&&i(v)(...s),["prevent"]))},[t("div",ve,[t("label",ye,[xe,I(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[0]||(o[0]=s=>u(r)?r.value=s:null),placeholder:"Name ..."},null,512),[[$,i(r)]]),t("div",ke,m(i(l).title),1)]),t("label",we,[Ne,t("div",De,[t("div",Ve,[t("div",Ee,[t("div",He,[g.value?(k(),R(T,{key:0,modelValue:i(d),"onUpdate:modelValue":o[1]||(o[1]=s=>u(d)?d.value=s:null),editor:E.value,config:h.value,"tag-name":"textarea"},null,8,["modelValue","editor","config"])):z("",!0)],512)])],512)]),t("div",Se,m(i(l).body),1)]),t("label",Be,[Ae,Q(Y,{class:"z-60",modelValue:i(c),"onUpdate:modelValue":o[2]||(o[2]=s=>u(c)?c.value=s:null),"min-date":S.value,placeholder:"Select Expiry Date"},null,8,["modelValue","min-date"]),t("div",Fe,m(i(l).expiry),1)])]),Me,Te],32)}}}),Ze=G(Ye,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{Ze as default};
