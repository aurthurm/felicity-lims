const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataTable-DLBrhw2Z.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/TooltipTrigger-BWIYwmnQ.js","assets/PopperContent-BfyCnGUj.js","assets/Input-BEm5S0CJ.js","assets/SelectValue-Ds0cfAgl.js","assets/useNonce-B4v0IDPb.js","assets/chevron-down-Dqf-ptA3.js","assets/useFocusGuards-Bjb6OG0k.js","assets/Spinner-Bl8RfjFA.js","assets/vue-multiselect.esm-Cvm3ZCjW.js"])))=>i.map(i=>d[i]);
import{Y as ye,u as ve,a0 as n,a7 as f,av as xe,ah as he,aq as H,a5 as R,a6 as W,a3 as Ce,_ as ke,r as Q,c as Y,o as _,z as l,A as Oe,C as J,a as u,K as y,M as Te,B as Be,D,al as S,I as X,F as we}from"./index-OdhKCqIc.js";import{c as Ae,a as Ge,u as _e,b as m}from"./index.esm-BfHj8iGm.js";import{o as De,p as Se,q as Ue,r as Ie,s as Me,t as Pe,u as Fe,v as Ne,a as Ve}from"./microbiology.mutations-cVAbKt4K.js";import{P as Ee}from"./PageHeading-Czi_4opS.js";const Ke=ye({__name:"AbxOrganism",setup(Z,{expose:s}){s();const U=R(()=>W(()=>import("./DataTable-DLBrhw2Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),a=R(()=>W(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([11,1,2]))),{withClientMutation:v,withClientQuery:c}=ve();let g=n(!1),b=n("");const t=n(!0),p=n(null),I=Ae({name:Ge().trim().required("Name is required")}),{handleSubmit:M,resetForm:k,setValues:P,errors:j}=_e({validationSchema:I,initialValues:{name:"",whonetOrgCode:"",replacedBy:"",taxonomicStatus:"",common:"",organismType:"",anaerobe:!1,morphology:"",subkingdomCode:"",familyCode:"",genusGroup:"",genusCode:"",speciesGroup:"",serovarGroup:"",msfGrpClin:"",sctCode:"",sctText:"",gbifTaxonId:"",gbifDatasetId:"",gbifTaxonomicStatus:"",kingdom:null,phylum:null,class:null,order:null,family:null,genus:null,comments:""}}),{value:$}=m("name"),{value:ee}=m("whonetOrgCode"),{value:F}=m("kingdom"),{value:N}=m("phylum"),{value:V}=m("class"),{value:E}=m("order"),{value:K}=m("family"),{value:se}=m("genus"),{value:ae}=m("organismType"),{value:oe}=m("anaerobe"),q=n(!1),i=n([]),L=n([]),O=n([]),le=f(()=>O.value.filter(e=>e.kingdomUid===F.value?.uid)),T=n([]),te=f(()=>T.value.filter(e=>e.phylumUid===N.value?.uid)),B=n([]),ne=f(()=>B.value.filter(e=>e.classUid===V.value?.uid)),w=n([]),re=f(()=>w.value.filter(e=>e.orderUid===E.value?.uid)),A=n([]),ie=f(()=>A.value.filter(e=>e.familyUid===K.value?.uid));let r=xe({first:50,after:"",text:"",sortBy:["name"],filterAction:!1});const G=n(0);let x=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const de=f(()=>i?.value?.length+" of "+G.value+" organisms"),ue=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Name",value:"name",sortable:!1,sortBy:"asc",hidden:!1},{name:"whonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"replacedBy",value:"replacedBy",sortable:!1,sortBy:"asc",hidden:!0},{name:"taxonomicStatus",value:"taxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"common",value:"common",sortable:!1,sortBy:"asc",hidden:!0},{name:"organismType",value:"organismType",sortable:!1,sortBy:"asc",hidden:!1},{name:"anaerobe",value:"anaerobe",sortable:!1,sortBy:"asc",hidden:!1},{name:"morphology",value:"morphology",sortable:!1,sortBy:"asc",hidden:!0},{name:"subkingdomCode",value:"subkingdomCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"familyCode",value:"familyCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusGroup",value:"genusGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusCode",value:"genusCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"speciesGroup",value:"speciesGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"serovarGroup",value:"serovarGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"msfGrpClin",value:"msfGrpClin",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctCode",value:"sctCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctText",value:"sctText",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonId",value:"gbifTaxonId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifDatasetId",value:"gbifDatasetId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonomicStatus",value:"gbifTaxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"kingdom",value:"kingdom.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"phylum",value:"phylum.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"class",value:"class_.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"order",value:"order.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"family",value:"family.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"genus",value:"genus.name",sortable:!1,sortBy:"asc",hidden:!1}]);function h(e){c(Ve,{text:e.text,pageSize:e.first,sortBy:e.sortBy},void 0).then(o=>{const d=o.abxOrganismAll,C=d.items;e.filterAction?(i.value=[],i.value=C):i.value=H(i.value,C,"uid"),G.value=d?.totalCount,x.value=d?.pageInfo}).finally(()=>{q.value=!1})}he(()=>{h(r),c(De,{},"abxOrderAll").then(e=>{e&&(B.value=e)}),c(Se,{},"abxFamilyAll").then(e=>{e&&(w.value=e)}),c(Ue,{},"abxKingdomAll").then(e=>{e&&(L.value=e)}),c(Ie,{},"abxPhylumAll").then(e=>{e&&(O.value=e)}),c(Me,{},"abxGenusAll").then(e=>{e&&(A.value=e)}),c(Pe,{},"abxClassAll").then(e=>{e&&(T.value=e)})});function me(e){r.first=100,r.after="",r.text=e.filterText,r.filterAction=!0,h(r)}function ce(e){r.first=e.fetchCount,r.after=x?.value?.endCursor,r.text=e.filterText,r.filterAction=!1,h(r)}const ge=()=>k();function fe(e,o={}){t.value=e,g.value=!0,b.value=(e?"Create":"Edit")+" Organism",e?(p.value=null,k()):(p.value=o.uid??null,P({name:o.name??"",whonetOrgCode:o.whonetOrgCode??"",replacedBy:o.replacedBy??"",taxonomicStatus:o.taxonomicStatus??"",common:o.common??"",organismType:o.organismType??"",anaerobe:o.anaerobe??!1,morphology:o.morphology??"",subkingdomCode:o.subkingdomCode??"",familyCode:o.familyCode??"",genusGroup:o.genusGroup??"",genusCode:o.genusCode??"",speciesGroup:o.speciesGroup??"",serovarGroup:o.serovarGroup??"",msfGrpClin:o.msfGrpClin??"",sctCode:o.sctCode??"",sctText:o.sctText??"",gbifTaxonId:o.gbifTaxonId??"",gbifDatasetId:o.gbifDatasetId??"",gbifTaxonomicStatus:o.gbifTaxonomicStatus??"",kingdom:o.kingdom??null,phylum:o.phylum??null,class:o.class??o.class_??null,order:o.order??null,family:o.family??null,genus:o.genus??null,comments:o.comments??""}))}const be=M(e=>{const o={name:e.name,whonetOrgCode:e.whonetOrgCode,replacedBy:e.replacedBy,taxonomicStatus:e.taxonomicStatus,common:e.common,organismType:e.organismType,anaerobe:e.anaerobe,morphology:e.morphology,subkingdomCode:e.subkingdomCode,familyCode:e.familyCode,genusGroup:e.genusGroup,genusCode:e.genusCode,speciesGroup:e.speciesGroup,serovarGroup:e.serovarGroup,msfGrpClin:e.msfGrpClin,sctCode:e.sctCode,sctText:e.sctText,gbifTaxonId:e.gbifTaxonId,gbifDatasetId:e.gbifDatasetId,gbifTaxonomicStatus:e.gbifTaxonomicStatus,kingdomUid:e.kingdom?.uid,phylumUid:e.phylum?.uid,classUid:e.class?.uid,orderUid:e.order?.uid,familyUid:e.family?.uid,genusUid:e.genus?.uid,comments:e.comments};t.value===!0&&v(Fe,{payload:o},"createAbxOrganism").then(d=>{d&&(i.value=H(i.value,[d],"uid"))}),t.value===!1&&p.value&&v(Ne,{uid:p.value,payload:o},"updateAbxOrganism").then(d=>{if(d){const C=i.value.findIndex(pe=>pe.uid==d.uid);i.value[C]=d}}),g.value=!1}),z={DataTable:U,VueMultiselect:a,withClientMutation:v,withClientQuery:c,get showModal(){return g},set showModal(e){g=e},get formTitle(){return b},set formTitle(e){b=e},formAction:t,currentUid:p,organismSchema:I,handleSubmit:M,resetForm:k,setValues:P,errors:j,name:$,whonetOrgCode:ee,kingdom:F,phylum:N,classValue:V,order:E,family:K,genus:se,organismType:ae,anaerobe:oe,fetchingOrganisms:q,abxOrganisms:i,abxKingdoms:L,abxPhylums:O,phylums:le,abxClasss:T,classes:te,abxOrders:B,orders:ne,abxFamilys:w,familys:re,abxGenuss:A,genuses:ie,get abxParams(){return r},set abxParams(e){r=e},organismCount:G,get organismPageInfo(){return x},set organismPageInfo(e){x=e},countNone:de,tableColumns:ue,fetchOrganisms:h,searchOrganisms:me,showMoreOrganisms:ce,resetOrganism:ge,FormManager:fe,saveForm:be,get Button(){return Ce},PageHeading:Ee};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),qe={class:"space-y-6"},Le={class:"bg-card p-6 shadow-sm rounded-lg"},ze={class:"text-xl font-semibold text-foreground"},He={class:"grid grid-cols-2 gap-4"},Re={class:"block"},We={key:0,class:"text-sm text-destructive"},Qe={class:"block"},Ye={class:"grid grid-cols-2 gap-4"},Je={class:"block"},Xe={class:"block"},Ze={class:"grid grid-cols-2 gap-4"},je={class:"block"},$e={class:"block"},es={class:"grid grid-cols-2 gap-4"},ss={class:"block"},as={class:"block"},os={class:"grid grid-cols-2 gap-4"},ls={class:"block"},ts={class:"block"};function ns(Z,s,U,a,v,c){const g=Q("Checkbox"),b=Q("Modal");return _(),Y(we,null,[l("div",qe,[u(a.PageHeading,{title:"Organisms"},{default:y(()=>[u(a.Button,{onClick:s[0]||(s[0]=t=>a.FormManager(!0))},{default:y(()=>[...s[13]||(s[13]=[Te("Add Organism",-1)])]),_:1})]),_:1}),l("div",Le,[u(a.DataTable,{columns:a.tableColumns,data:a.abxOrganisms,toggleColumns:!0,loading:a.fetchingOrganisms,paginable:!0,pageMeta:{fetchCount:a.abxParams.first,hasNextPage:!0,countNone:a.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:a.searchOrganisms,onOnSearchFocus:a.resetOrganism,onOnPaginate:a.showMoreOrganisms,selectable:!1},{footer:y(()=>[...s[14]||(s[14]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),a.showModal?(_(),Oe(b,{key:0,onClose:s[12]||(s[12]=t=>a.showModal=!1),"content-width":"w-1/2"},{header:y(()=>[l("h3",ze,X(a.formTitle),1)]),body:y(()=>[l("form",{onSubmit:s[11]||(s[11]=Be((...t)=>a.saveForm&&a.saveForm(...t),["prevent"])),class:"space-y-6 p-4"},[l("div",He,[l("label",Re,[s[15]||(s[15]=l("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),D(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[1]||(s[1]=t=>a.name=t),placeholder:"Name ..."},null,512),[[S,a.name]]),a.errors.name?(_(),Y("p",We,X(a.errors.name),1)):J("",!0)]),l("label",Qe,[s[16]||(s[16]=l("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),D(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[2]||(s[2]=t=>a.whonetOrgCode=t),placeholder:"Whonet Org Code ..."},null,512),[[S,a.whonetOrgCode]])])]),l("div",Ye,[l("label",Je,[s[17]||(s[17]=l("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),u(a.VueMultiselect,{modelValue:a.kingdom,"onUpdate:modelValue":s[3]||(s[3]=t=>a.kingdom=t),options:a.abxKingdoms,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",Xe,[s[18]||(s[18]=l("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),u(a.VueMultiselect,{modelValue:a.phylum,"onUpdate:modelValue":s[4]||(s[4]=t=>a.phylum=t),options:a.phylums,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",Ze,[l("label",je,[s[19]||(s[19]=l("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),u(a.VueMultiselect,{modelValue:a.classValue,"onUpdate:modelValue":s[5]||(s[5]=t=>a.classValue=t),options:a.classes,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",$e,[s[20]||(s[20]=l("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),u(a.VueMultiselect,{modelValue:a.order,"onUpdate:modelValue":s[6]||(s[6]=t=>a.order=t),options:a.orders,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",es,[l("label",ss,[s[21]||(s[21]=l("span",{class:"text-sm font-medium text-foreground"},"Family",-1)),u(a.VueMultiselect,{modelValue:a.family,"onUpdate:modelValue":s[7]||(s[7]=t=>a.family=t),options:a.familys,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),l("label",as,[s[22]||(s[22]=l("span",{class:"text-sm font-medium text-foreground"},"Genus",-1)),u(a.VueMultiselect,{modelValue:a.genus,"onUpdate:modelValue":s[8]||(s[8]=t=>a.genus=t),options:a.genuses,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),l("div",os,[l("label",ls,[s[23]||(s[23]=l("span",{class:"text-sm font-medium text-foreground"},"Organism Type",-1)),D(l("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[9]||(s[9]=t=>a.organismType=t),placeholder:"Organism Type ..."},null,512),[[S,a.organismType]])]),l("label",ts,[s[24]||(s[24]=l("span",{class:"text-sm font-medium text-foreground"},"Anaerobe",-1)),u(g,{checked:a.anaerobe,"onUpdate:checked":s[10]||(s[10]=t=>a.anaerobe=t)},null,8,["checked"])])]),s[25]||(s[25]=l("hr",{class:"border-border"},null,-1)),s[26]||(s[26]=l("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Organism ",-1))],32)]),_:1})):J("",!0)],64)}const ms=ke(Ke,[["render",ns],["__scopeId","data-v-4d09f0a0"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganism.vue"]]);export{ms as default};
