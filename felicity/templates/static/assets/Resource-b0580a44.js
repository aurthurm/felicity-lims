import{P as N,ai as B,f as A,Z as $,aa as j,R as x,r as I,o as l,c,b as s,A as v,C as b,a2 as o,F as h,D as w,x as _,K as g,L as P,E as p,a1 as U,a7 as k,a as z,J as R,a0 as H,V as C,z as O,X as S,Y as T,az as F,_ as W}from"./index-e1b11e1a.js";import{C as J}from"./index-5fc65132.js";import{u as K}from"./dashboard-37aad74f.js";import"./value-c2034ca5.js";import"./string-6dabfbe0.js";const X={class:"flex justify-between"},Y={class:"flex justify-end align-items-center mt-4 mb-8"},Z=["onClick"],q={key:0,class:"text-start my-4 w-100"},G={key:0},Q={key:1,class:"flex justify-start"},tt={class:"mr-4 font-bold text-gray-600 text-xl"},et={class:"font-semibold text-gray-400 text-l"},st={action:"post",class:"p-1"},ot={class:"grid grid-cols-2 gap-x-4 mb-4"},rt={class:"block col-span-2 mb-2"},at={class:"block col-span-2 mb-2"},it=N({__name:"Resource",setup(nt){const V=S(()=>T(()=>import("./index-e1b11e1a.js").then(i=>i.cN),["assets/index-e1b11e1a.js","assets/index-78b87750.css"])),D=S(()=>T(()=>import("./FelLoadingMessage-16252ca6.js"),["assets/FelLoadingMessage-16252ca6.js","assets/index-e1b11e1a.js","assets/index-78b87750.css"])),u=K(),{dashboard:r}=B(u),m=A({range:{from:"",to:""}});let d=$(!1);const E=()=>{u.setFilterRange(F(m.range.from),F(m.range.to)),d.value=!1};j(async()=>{y(),u.setShowFilters(!0),u.getResourceStats()}),x(()=>r.value.filterRange.from,(i,t)=>{y(),u.getResourceStats()}),x(()=>r.value.resourceStats?.samples,(i,t)=>{r.value.resourceStats?.samples?.forEach(n=>{let e=[],f=0;n.counts?.forEach(a=>f+=a.count),n.counts?.forEach(a=>{e.push({item:a.group,count:a.count,percent:a.count/f})}),L(e,n.group,n.group)})});const M=i=>{let t=0;return r.value.resourceStats?.instruments?.forEach(e=>t+=e.count),(i/t*100).toFixed(2)+" %"},L=(i,t,n)=>{const e=new J({container:t,autoFit:!0,height:250,width:500,localRefresh:!1});e.coordinate("theta",{radius:.75,innerRadius:.5}),e.data(i),e.scale("percent",{formatter:a=>(a=(a*100).toFixed(2)+"%",a)}),e.tooltip({showTitle:!1,showMarkers:!1}),e.legend(!1),e.interval().position("percent").color("item").label("percent",{layout:[{type:"pie-spider"},{type:"hide-overlap"}],offset:8,labelHeight:38,content:a=>`${a.item} (${a.count})`,labelLine:{style:{lineWidth:.5}}}).adjust("stack"),e.createView().annotation().text({position:["50%","50%"],content:n,style:{fill:"#262626",textAlign:"center"}}),e.interaction("element-active"),e.render()},y=()=>{document.getElementById("user-matrix").innerHTML="";const i=`
      <div>
        <div id="registration"></div>
      </div>
      <div>
        <div id="submission"></div>
      </div>
      <div>
        <div id="verification"></div>
      </div>
      <div>
        <div id="publication"></div>
      </div>
    `;document.getElementById("user-matrix").innerHTML=i};return(i,t)=>{const n=I("VTooltip");return l(),c(h,null,[s("section",X,[v(s("div",Y,[(l(!0),c(h,null,w(o(r).filters,(e,f)=>v((l(),_(n,{key:f,placements:["right-start"]},{popper:g(()=>[P(p(o(u).filterToolTip(e)),1)]),default:g(()=>[s("button",{onClick:a=>o(u).setCurrentFilter(e),type:"button",class:U(["px-2 py-1 mr-2 border-gray-800 border text-gray-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",{"bg-sky-800 text-white":o(r).currentFilter===e}])},p(e),11,Z)]),_:2},1024)),[[b,e!==o(r).filters[o(r).filters.length]]])),128)),s("button",{onClick:t[0]||(t[0]=e=>k(d)?d.value=!0:d=!0),class:"ml-4 mr-1 px-2 py-1 border-gray-500 border text-gray-500 rounded-sm transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},p(o(r).filterRange.from)+" - "+p(o(r).filterRange.to),1)],512),[[b,o(r).showFilters]])]),o(r).fetchingResourceStats?(l(),c("div",q,[z(o(D),{message:"fetching resource stats ..."})])):R("",!0),s("section",null,[t[5]||(t[5]=s("h1",{class:"text-xl text-gray-700 font-semibold"},"Instrument Matrix / Load",-1)),t[6]||(t[6]=s("hr",{class:"my-2"},null,-1)),o(r).resourceStats?.instruments?.length===0?(l(),c("div",G,"NO DATA")):(l(),c("div",Q,[(l(!0),c(h,null,w(o(r).resourceStats?.instruments,e=>(l(),c("div",{key:e.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[s("span",tt,p(M(e?.count)),1),s("span",et,p(e.group),1)]))),128))])),t[7]||(t[7]=H('<h1 class="mt-8 text-xl text-gray-700 font-semibold">User Matrix / Load</h1><hr class="my-2"><div class="flex flex-wrap justify-start" id="user-matrix"><div><div id="registration"></div></div><div><div id="submission"></div></div><div><div id="verification"></div></div><div><div id="publication"></div></div></div>',3))]),o(d)?(l(),_(o(V),{key:1,onClose:t[4]||(t[4]=e=>k(d)?d.value=!1:d=!1),contentWidth:"w-1/4"},{header:g(()=>t[8]||(t[8]=[s("h3",null,"Custom Filter Date Range",-1)])),body:g(()=>[s("form",st,[s("div",ot,[s("label",rt,[t[9]||(t[9]=s("span",{class:"text-gray-700"},"Date From",-1)),v(s("input",{type:"datetime-local",class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=e=>m.range.from=e),placeholder:"Name ..."},null,512),[[C,m.range.from]])]),s("label",at,[t[10]||(t[10]=s("span",{class:"text-gray-700"},"Date To",-1)),v(s("input",{type:"datetime-local",class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=e=>m.range.to=e),placeholder:"Name ..."},null,512),[[C,m.range.to]])])]),t[11]||(t[11]=s("hr",null,null,-1)),s("button",{type:"button",onClick:t[3]||(t[3]=O(e=>E(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):R("",!0)],64)}}}),pt=W(it,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/dashboard/Resource.vue"]]);export{pt as default};
