const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css"])))=>i.map(i=>d[i]);
import{Y as R,u as G,a0 as x,ah as K,a5 as L,a6 as z,a3 as J,_ as Q,r as n,c as E,o as u,z as r,A as M,C as T,a as o,K as a,M as c,F as H,H as Y,I as v,B as W,D as X,al as Z}from"./index-OdhKCqIc.js";import{c as N,a as j,u as $,b as S}from"./index.esm-BfHj8iGm.js";import{o as ee,t as te,J as ae,K as oe}from"./microbiology.mutations-cVAbKt4K.js";import{E as se,a as re,b as le,c as ne,d as de}from"./EmptyTitle-aCQRDpx3.js";import{P as ie}from"./PageHeading-Czi_4opS.js";const me=R({__name:"AbxOrder",setup(P,{expose:e}){e();const k=L(()=>z(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),{withClientMutation:t,withClientQuery:y}=G();let g=x(!1),d=x("");const i=x(!0),m=x(null),f=N({name:j().trim().required("Name is required"),class_:N().required("Class is required")}),{handleSubmit:w,resetForm:C,setValues:h,errors:A}=$({validationSchema:f,initialValues:{name:"",class_:null}}),{value:l}=S("name"),{value:F}=S("class_"),D=x([]),b=x([]);K(()=>{y(ee,{},"abxOrderAll").then(s=>{s&&(b.value=s)}),y(te,{},"abxClassAll").then(s=>{s&&(D.value=s)})});function U(s,p={}){i.value=s,g.value=!0,d.value=(s?"Create":"Edit")+" Order",s?(m.value=null,C()):(m.value=p.uid??null,h({name:p.name??"",class_:p.class_??null}))}const q=w(s=>{const p={name:s.name,classUid:s.class_?.uid};i.value===!0&&t(ae,{payload:p},"createAbxOrder").then(_=>{_&&b.value.unshift(_)}),i.value===!1&&m.value&&t(oe,{uid:m.value,payload:p},"updateAbxOrder").then(_=>{if(_){const B=b.value.findIndex(O=>O.uid==_.uid);B>-1&&(b.value=[...b.value.map((O,I)=>I===B?_:O)])}}),g.value=!1}),V={VueMultiselect:k,withClientMutation:t,withClientQuery:y,get showModal(){return g},set showModal(s){g=s},get formTitle(){return d},set formTitle(s){d=s},formAction:i,currentUid:m,orderSchema:f,handleSubmit:w,resetForm:C,setValues:h,errors:A,name:l,classField:F,abxClasses:D,abxOrders:b,FormManager:U,saveForm:q,get Button(){return J},get Empty(){return de},get EmptyContent(){return ne},get EmptyDescription(){return le},get EmptyHeader(){return re},get EmptyTitle(){return se},PageHeading:ie};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),ue={class:"space-y-6"},ce={class:"border border-border bg-card rounded-lg shadow-md"},fe={class:"relative w-full overflow-auto"},be=["onClick"],pe={class:"text-xl font-semibold text-foreground"},_e={class:"grid grid-cols-2 gap-4"},xe={class:"block"},ge={key:0,class:"text-sm text-destructive"},ve={class:"block"},ye={key:0,class:"text-sm text-destructive"};function we(P,e,k,t,y,g){const d=n("TableHead"),i=n("TableRow"),m=n("TableHeader"),f=n("TableCell"),w=n("TableEmpty"),C=n("TableBody"),h=n("Table"),A=n("Modal");return u(),E(H,null,[r("div",ue,[o(t.PageHeading,{title:"Orders"},{default:a(()=>[o(t.Button,{onClick:e[0]||(e[0]=l=>t.FormManager(!0))},{default:a(()=>[...e[5]||(e[5]=[c("Add Order",-1)])]),_:1})]),_:1}),r("div",ce,[r("div",fe,[o(h,{class:"w-full caption-bottom text-sm"},{default:a(()=>[o(m,{class:"[&_tr]:border-b"},{default:a(()=>[o(i,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[o(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...e[6]||(e[6]=[c("Name",-1)])]),_:1}),o(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...e[7]||(e[7]=[c("Class",-1)])]),_:1}),o(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:a(()=>[...e[8]||(e[8]=[r("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),o(C,{class:"[&_tr:last-child]:border-0"},{default:a(()=>[(u(!0),E(H,null,Y(t.abxOrders,l=>(u(),M(i,{key:l?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[o(f,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:a(()=>[c(v(l?.name),1)]),_:2},1024),o(f,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:a(()=>[c(v(l?.class_?.name),1)]),_:2},1024),o(f,{class:"px-4 py-3 align-middle text-right"},{default:a(()=>[r("button",{onClick:F=>t.FormManager(!1,l),class:"text-primary hover:text-primary/80"}," Edit ",8,be)]),_:2},1024)]),_:2},1024))),128)),!t.abxOrders||t.abxOrders.length===0?(u(),M(w,{key:0,colspan:3},{default:a(()=>[o(t.Empty,{class:"border-0 bg-transparent p-0"},{default:a(()=>[o(t.EmptyContent,null,{default:a(()=>[o(t.EmptyHeader,null,{default:a(()=>[o(t.EmptyTitle,null,{default:a(()=>[...e[9]||(e[9]=[c("No orders found",-1)])]),_:1}),o(t.EmptyDescription,null,{default:a(()=>[...e[10]||(e[10]=[c("Add an order to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})])])]),t.showModal?(u(),M(A,{key:0,onClose:e[4]||(e[4]=l=>t.showModal=!1),"content-width":"w-1/2"},{header:a(()=>[r("h3",pe,v(t.formTitle),1)]),body:a(()=>[r("form",{onSubmit:e[3]||(e[3]=W((...l)=>t.saveForm&&t.saveForm(...l),["prevent"])),class:"space-y-6 p-4"},[r("div",_e,[r("label",xe,[e[11]||(e[11]=r("span",{class:"text-sm font-medium text-foreground"},"Order Name",-1)),X(r("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=l=>t.name=l),placeholder:"Name ..."},null,512),[[Z,t.name]]),t.errors.name?(u(),E("p",ge,v(t.errors.name),1)):T("",!0)]),r("label",ve,[e[12]||(e[12]=r("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),o(t.VueMultiselect,{modelValue:t.classField,"onUpdate:modelValue":e[2]||(e[2]=l=>t.classField=l),options:t.abxClasses,multiple:!1,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),t.errors.class_?(u(),E("p",ye,v(t.errors.class_),1)):T("",!0)])]),e[13]||(e[13]=r("hr",{class:"border-border"},null,-1)),e[14]||(e[14]=r("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Order ",-1))],32)]),_:1})):T("",!0)],64)}const Oe=Q(me,[["render",we],["__scopeId","data-v-49ba0efd"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrder.vue"]]);export{Oe as default};
