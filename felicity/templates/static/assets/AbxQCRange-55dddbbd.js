import{P as W,e as q,Z as c,f as M,h as F,aa as L,o as B,c as Y,b as e,a as _,K as g,a2 as l,x as j,E as z,A as d,V as u,z as K,a7 as $,J,F as X,X as x,Y as v,af as U,aT as Z,aU as H,_ as ee}from"./index-fa13e788.js";import{j as te,P as ae,Q as se,R as le,T as oe}from"./microbiology.mutations-652bcc63.js";const n=f=>(Z("data-v-2041ea59"),f=f(),H(),f),ne={class:"w-full my-4"},ie=n(()=>e("hr",null,null,-1)),de={action:"post",class:"p-4"},ue={class:"mb-6"},re=n(()=>e("h4",{class:"text-lg font-semibold mb-4"},"Basic Information",-1)),ce={class:"grid grid-cols-2 gap-4"},me={class:"block"},fe=n(()=>e("span",{class:"text-gray-700"},"Guidelines",-1)),be={class:"block"},pe=n(()=>e("span",{class:"text-gray-700"},"Year",-1)),he={class:"mb-6"},_e={class:"grid grid-cols-3 gap-4"},ge={class:"block"},xe=n(()=>e("span",{class:"text-gray-700"},"Strain",-1)),ve={class:"block"},ye=n(()=>e("span",{class:"text-gray-700"},"Reference Table",-1)),Ae={class:"block"},we=n(()=>e("span",{class:"text-gray-700"},"Whonet Org Code",-1)),Ce={class:"block"},ke=n(()=>e("span",{class:"text-gray-700"},"Antibiotic",-1)),Re={class:"block"},Te=n(()=>e("span",{class:"text-gray-700"},"Abx Test",-1)),Ve={class:"block"},Me=n(()=>e("span",{class:"text-gray-700"},"Whonet Abx Code",-1)),Be={class:"block"},Ue=n(()=>e("span",{class:"text-gray-700"},"Method",-1)),Qe={class:"block"},Oe=n(()=>e("span",{class:"text-gray-700"},"Medium",-1)),De={class:"block"},Ie=n(()=>e("span",{class:"text-gray-700"},"Minimum",-1)),Pe={class:"block"},Se=n(()=>e("span",{class:"text-gray-700"},"Maximum",-1)),Ee={class:"mb-6"},Ge={class:"block"},Ne=n(()=>e("span",{class:"text-gray-700"},"Comments",-1)),We=n(()=>e("hr",{class:"my-6"},null,-1)),qe=W({__name:"AbxQCRange",setup(f){const Q=x(()=>v(()=>import("./index-fa13e788.js").then(o=>o.cN),["assets/index-fa13e788.js","assets/index-ccc6a521.css"])),O=x(()=>v(()=>import("./FelDataTable-76696623.js"),["assets/FelDataTable-76696623.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"])),y=x(()=>v(()=>import("./vue-multiselect.esm-d8a2873c.js"),["assets/vue-multiselect.esm-d8a2873c.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"])),{withClientMutation:A,withClientQuery:p}=q();let m=c(!1),D=c(""),t=M({});const w=c(!0),C=c(!1),r=c([]),k=c([]),R=c([]);let i=M({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const T=c(0);let V=c({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const I=F(()=>r?.value?.length+" of "+T.value+" qcRanges"),P=c([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function h(o){p(se,{text:o.text,pageSize:o.first,sortBy:o.sortBy},void 0).then(a=>{const s=a.abxQcRangeAll,b=s.items;o.filterAction?(r.value=[],r.value=b):r.value=U(r.value,b,"uid"),T.value=s?.totalCount,V.value=s?.pageInfo}).finally(()=>{C.value=!1})}L(()=>{p(te,{},"abxGuidelinesAll").then(o=>{o&&(k.value=o)}),h(i),p(ae,{},"abxMediumAll").then(o=>{o&&(R.value=o)})});function S(o){i.first=100,i.after="",i.text=o.filterText,i.filterAction=!0,h(i)}function E(o){i.first=o.fetchCount,i.after=V?.value?.endCursor,i.text=o.filterText,i.filterAction=!1,h(i)}const G=()=>Object.assign(t,{});function N(){const o={guidelineUid:t.guideline?.uid,year:t.year,strain:t.strain,referenceTable:t.referenceTable,whonetOrgCode:t.whonetOrgCode,antibiotic:t.antibiotic,abxTest:t.abxTest,whonetAbxCode:t.whonetAbxCode,method:t.method,medium:t.medium,minimum:t.minimum,maximum:t.maximum};w.value===!0&&A(le,{payload:o},"createAbxQcRange").then(a=>{a&&(r.value=U(r.value,[a],"uid"))}),w.value===!1&&A(oe,{uid:t.uid,payload:o},"updateAbxQcRange").then(a=>{if(a){const s=r.value.findIndex(b=>b.uid==a.uid);r.value[s]=a}}),m.value=!1}return(o,a)=>(B(),Y(X,null,[e("div",ne,[ie,_(l(O),{columns:P.value,data:r.value,toggleColumns:!0,loading:C.value,paginable:!0,pageMeta:{fetchCount:l(i).first,hasNextPage:!0,countNone:I.value},searchable:!0,filterable:!1,onOnSearchKeyUp:S,onOnSearchFocus:G,onOnPaginate:E,selectable:!1},{footer:g(()=>[]),_:1},8,["columns","data","loading","pageMeta"])]),l(m)?(B(),j(l(Q),{key:0,onClose:a[14]||(a[14]=s=>$(m)?m.value=!1:m=!1),"content-width":"w-1/2"},{header:g(()=>[e("h3",null,z(l(D)),1)]),body:g(()=>[e("form",de,[e("div",ue,[re,e("div",ce,[e("label",me,[fe,_(l(y),{modelValue:l(t).guidelines,"onUpdate:modelValue":a[0]||(a[0]=s=>l(t).guidelines=s),options:k.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),e("label",be,[pe,d(e("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":a[1]||(a[1]=s=>l(t).year=s),placeholder:"Enter year"},null,512),[[u,l(t).year]])])])]),e("div",he,[e("div",_e,[e("label",ge,[xe,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[2]||(a[2]=s=>l(t).strain=s),placeholder:"Strain"},null,512),[[u,l(t).strain]])]),e("label",ve,[ye,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[3]||(a[3]=s=>l(t).referenceTable=s),placeholder:"Reference Table"},null,512),[[u,l(t).referenceTable]])]),e("label",Ae,[we,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[4]||(a[4]=s=>l(t).whonetOrgCode=s),placeholder:"Whonet Org Code"},null,512),[[u,l(t).whonetOrgCode]])]),e("label",Ce,[ke,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[5]||(a[5]=s=>l(t).antibiotic=s),placeholder:"Antibiotic"},null,512),[[u,l(t).antibiotic]])]),e("label",Re,[Te,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[6]||(a[6]=s=>l(t).abxTest=s),placeholder:"Abx Test"},null,512),[[u,l(t).abxTest]])]),e("label",Ve,[Me,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[7]||(a[7]=s=>l(t).whonetAbxCode=s),placeholder:"Whonet Abx Code"},null,512),[[u,l(t).whonetAbxCode]])]),e("label",Be,[Ue,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[8]||(a[8]=s=>l(t).method=s),placeholder:"Method"},null,512),[[u,l(t).method]])]),e("label",Qe,[Oe,_(l(y),{modelValue:l(t).medium,"onUpdate:modelValue":a[9]||(a[9]=s=>l(t).medium=s),options:R.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),e("label",De,[Ie,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[10]||(a[10]=s=>l(t).minimum=s),placeholder:"Minimum"},null,512),[[u,l(t).minimum]])]),e("label",Pe,[Se,d(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":a[11]||(a[11]=s=>l(t).maximum=s),placeholder:"Maximum"},null,512),[[u,l(t).maximum]])])])]),e("div",Ee,[e("label",Ge,[Ne,d(e("textarea",{class:"form-textarea mt-1 block w-full","onUpdate:modelValue":a[12]||(a[12]=s=>l(t).comments=s),rows:"3",placeholder:"Additional comments..."},null,512),[[u,l(t).comments]])])]),We,e("button",{type:"button",onClick:a[13]||(a[13]=K(s=>N(),["prevent"])),class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save QcRange ")])]),_:1})):J("",!0)],64))}});const Ye=ee(qe,[["__scopeId","data-v-2041ea59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{Ye as default};
