import{Y as w,$ as k,av as C,ah as D,a7 as V,_ as E,r as I,c as l,o as d,z as e,F as v,H as x,C as b,I as i,D as y,aG as N,al as q,a as T,E as A}from"./index-OdhKCqIc.js";import{u as P}from"./samples-BGCTZScT.js";import{u as U}from"./analysis-PB9AMevg.js";import"./analyses.mutations-DUxQZn1r.js";const B=w({__name:"RejectSamples",setup(j,{expose:s}){s();const p=k(),n=U(),{rejectSamples:m}=P(),f=p.options.history.state,u=C({rejections:[]}),t=JSON.parse(window.history.state.samples);let c=[];for(let o of t)o.reasons=[],o.other=void 0,c.push(o);u.rejections=c,D(()=>n.fetchRejectionReasons());const a=(o,r)=>{let _=[];return o?.forEach(g=>_.push(g.name)),r?.forEach(g=>_.push(g.name)),_.join(", ")},S=o=>{u.rejections?.forEach(r=>{r.reasons=o.reasons,r.other=o.other})},R=V(()=>n.getRejectionReasons),h={router:p,analysisStore:n,rejectSamples:m,routerState:f,state:u,ss:t,get coll(){return c},set coll(o){c=o},profileAnalysesText:a,cascadeCopy:S,rejectionReasons:R,rejectSamples_:async()=>{const o=[];u.rejections?.forEach(r=>{o.push({uid:r?.uid,reasons:r?.reasons,other:r?.other})}),await m(o).then(r=>{o.length==1&&f.back?.toString().includes("patient")?p.push({path:f.back.toString()}):p.push({name:"samples-listing"})})}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),M={class:"space-y-6"},O={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},F={key:0,class:"border-t border-border"},z={class:"text-lg font-semibold text-foreground"},G={class:"grid grid-cols-12 gap-6"},H={class:"col-span-6 grid grid-cols-2 gap-6"},J={class:"space-y-4"},L={class:"flex items-center justify-between"},Y={class:"text-muted-foreground"},$={class:"flex items-center justify-between"},K={class:"text-muted-foreground"},Q={class:"flex items-center justify-between"},W={class:"text-muted-foreground"},X={class:"space-y-4"},Z={class:"flex items-center justify-between"},ee={class:"text-muted-foreground"},se={class:"flex items-center justify-between"},te={class:"text-muted-foreground"},oe={class:"col-span-5"},ne={class:"grid grid-cols-2 gap-6"},ae={class:"space-y-2"},re={class:"space-y-2"},ie=["onUpdate:modelValue"],ce=["value"],le={class:"space-y-2"},de={class:"space-y-2"},ue=["onUpdate:modelValue"],pe={class:"col-span-1 flex items-center justify-center"},fe=["onClick"],me={class:"flex justify-end"};function _e(j,s,p,n,m,f){const u=I("font-awesome-icon");return d(),l("div",M,[s[9]||(s[9]=e("h4",{class:"text-xl font-semibold text-foreground"},"Sample Rejection",-1)),e("div",O,[(d(!0),l(v,null,x(n.state.rejections,(t,c)=>(d(),l("div",{key:c,class:"space-y-6"},[c>0?(d(),l("div",F)):b("",!0),e("h2",z,i(t?.sampleId)+" â†’ "+i(t?.status),1),e("div",G,[e("div",H,[e("div",J,[e("div",L,[s[1]||(s[1]=e("span",{class:"font-medium text-foreground"},"Sample Type",-1)),e("span",Y,i(t?.sampleType?.name),1)]),e("div",$,[s[2]||(s[2]=e("span",{class:"font-medium text-foreground"},"Client Sample ID",-1)),e("span",K,i(t?.analysisRequest?.clientRequestId),1)]),e("div",Q,[s[3]||(s[3]=e("span",{class:"font-medium text-foreground"},"Analyses",-1)),e("span",W,i(n.profileAnalysesText(t?.profiles,t?.analyses)),1)])]),e("div",X,[e("div",Z,[s[4]||(s[4]=e("span",{class:"font-medium text-foreground"},"Patient",-1)),e("span",ee,i(t?.analysisRequest?.patient?.firstName)+" "+i(t?.analysisRequest?.patient?.lastName),1)]),e("div",se,[s[5]||(s[5]=e("span",{class:"font-medium text-foreground"},"Client Patient ID",-1)),e("span",te,i(t?.analysisRequest?.patient?.clientPatientId),1)])])]),e("div",oe,[e("div",ne,[e("div",ae,[e("label",re,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-foreground"},"Rejection Reasons",-1)),y(e("select",{name:"reasons",multiple:"","onUpdate:modelValue":a=>t.reasons=a,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[s[6]||(s[6]=e("option",{value:""},null,-1)),(d(!0),l(v,null,x(n.rejectionReasons,a=>(d(),l("option",{key:a.uid,value:a.uid},i(a.reason),9,ce))),128))],8,ie),[[N,t.reasons]])])]),e("div",le,[e("label",de,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-foreground"},"Other",-1)),y(e("input",{type:"text","onUpdate:modelValue":a=>t.other=a,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,ue),[[q,t.other]])])])])]),e("div",pe,[y(e("button",{onClick:a=>n.cascadeCopy(t),class:"text-primary hover:text-primary/80 transition-colors"},[T(u,{icon:"level-down-alt"})],8,fe),[[A,c===0]])])])]))),128))]),e("div",me,[n.state.rejections?.length>0?(d(),l("button",{key:0,onClick:s[0]||(s[0]=t=>n.rejectSamples_()),class:"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destructive/50"}," Reject Samples ")):b("",!0)])])}const be=E(B,[["render",_e],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{be as default};
