import{P as S,az as L,f as R,aa as V,o as i,c as n,a as y,K as p,L as g,b as e,a2 as r,F as _,D as x,E as a,A as l,C as v,a4 as u,V as f,z as A,X as E,Y as P,aA as T,_ as U}from"./index-f86d8273.js";import{u as B}from"./analysis-f80e6c89.js";const M={class:"bg-white p-2"},Y={class:"overflow-x-auto my-4"},N={key:0,class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-sm rounded-br-sm"},$={class:"min-w-full"},j={class:"bg-white"},q={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},z={class:"text-sm leading-5 text-sky-800"},G={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},I={class:"text-sm leading-5 text-sky-800"},O={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},K={class:"text-sm leading-5 text-sky-800"},X={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},H={class:"text-sm leading-5 text-sky-800"},J={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Q={class:"text-sm leading-5 text-sky-800"},W={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Z={class:"text-sm leading-5 text-sky-800"},ee={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},te=["onClick"],se=["onClick"],oe={key:1,class:"py-4 pl-4 bg-white"},ae={class:"my-4"},le={action:"post",class:"p-1"},ie={class:"grid grid-cols-3 gap-x-4 mb-4"},ne={class:"block col-span-1 mb-2"},re={class:"block col-span-1 mb-2"},de=["value"],pe={class:"block col-span-1 mb-2"},ue={class:"grid grid-cols-3 gap-x-4 mb-4"},ce={class:"block col-span-1 mb-2"},be={class:"block col-span-1 mb-2"},me={class:"block col-span-1 mb-2"},ye=S({__name:"LineListing",setup(ge){const c=E(()=>P(()=>import("./FelAccordion-39c4d836.js"),["assets/FelAccordion-39c4d836.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),b=B(),{reports:m,fetchReports:w,generateReport:h,deleteReport:k}=L(),o=R({listingForm:{report_type:"",analyses_uids:[],sample_states:[],date_column:"",period_start:"",period_end:""}});V(async()=>{b.fetchAnalysesServices({first:void 0,after:"",text:"",sortBy:["name"]}),await w()});const D=()=>h({...o.listingForm}),F=d=>{const t=document.createElement("a");t.download=d.report_type+"-"+d.crated_at,t.href=T+"/"+d.location,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return(d,t)=>(i(),n("div",M,[y(r(c),null,{title:p(()=>t[7]||(t[7]=[g("Downloaded Line Listing Reports")])),body:p(()=>[e("div",Y,[r(m)?.length>0?(i(),n("div",N,[e("table",$,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},[e("input",{type:"checkbox"})]),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Report Type "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Generated By "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Generated "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Period Start "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Period End "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),e("tbody",j,[(i(!0),n(_,null,x(r(m),s=>(i(),n("tr",{key:s.uid},[t[8]||(t[8]=e("td",null,[e("input",{type:"checkbox"})],-1)),e("td",q,[e("div",z,a(s.report_type),1)]),e("td",G,[e("div",I,a(s?.created_by?.first_name)+" "+a(s?.created_by?.last_name),1)]),e("td",O,[e("div",K,a(s?.created_at),1)]),e("td",X,[e("div",H,a(s?.period_start),1)]),e("td",J,[e("div",Q,a(s?.period_end),1)]),e("td",W,[e("div",Z,a(s?.status),1)]),e("td",ee,[l(e("button",{onClick:C=>F(s),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Download ",8,te),[[v,s.status=="READY"]]),l(e("button",{onClick:C=>r(k)(s),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Delete ",8,se),[[v,s.status=="READY"]])])]))),128))])])])):(i(),n("div",oe,t[10]||(t[10]=[e("p",{class:"text-orange-600"},"There are no downloaded reports yet",-1),e("hr",null,null,-1),e("p",{class:"italic"}," Once a download request has been done. Your reports will be appear here ",-1)])))])]),_:1}),y(r(c),null,{title:p(()=>t[11]||(t[11]=[g("Listing Report Request")])),body:p(()=>[e("div",ae,[e("form",le,[e("div",ie,[e("label",ne,[t[13]||(t[13]=e("span",{class:"text-gray-700"},"Report Type",-1)),l(e("select",{name:"report_type","onUpdate:modelValue":t[0]||(t[0]=s=>o.listingForm.report_type=s),class:"form-input mt-1 block w-full"},t[12]||(t[12]=[e("option",{value:"line_listing",selected:""},"line listing",-1)]),512),[[u,o.listingForm.report_type]])]),e("label",re,[t[14]||(t[14]=e("span",{class:"text-gray-700"},"Analyses",-1)),l(e("select",{name:"analyses_uids","onUpdate:modelValue":t[1]||(t[1]=s=>o.listingForm.analyses_uids=s),class:"form-input mt-1 block w-full",multiple:""},[(i(!0),n(_,null,x(r(b).analysesServices,s=>(i(),n("option",{key:s.uid,value:s.uid},a(s.name),9,de))),128))],512),[[u,o.listingForm.analyses_uids]])]),e("label",pe,[t[16]||(t[16]=e("span",{class:"text-gray-700"},"States",-1)),l(e("select",{name:"sample_states","onUpdate:modelValue":t[2]||(t[2]=s=>o.listingForm.sample_states=s),class:"form-input mt-1 block w-full",multiple:""},t[15]||(t[15]=[e("option",{value:""},null,-1),e("option",{value:"published"},"published",-1),e("option",{value:"verified"},"verified",-1),e("option",{value:"to_be_verified"},"to_be_verified",-1),e("option",{value:"received"},"received",-1),e("option",{value:"cancelled"},"cancelled",-1),e("option",{value:"rejected"},"rejected",-1),e("option",{value:"invalidated"},"invalidated",-1),e("option",{value:"due"},"due",-1)]),512),[[u,o.listingForm.sample_states]])])]),e("div",ue,[e("label",ce,[t[18]||(t[18]=e("span",{class:"text-gray-700"},"Period Date Criteria",-1)),l(e("select",{name:"date_column","onUpdate:modelValue":t[3]||(t[3]=s=>o.listingForm.date_column=s),class:"form-input mt-1 block w-full"},t[17]||(t[17]=[e("option",{value:"created_at"},"Created Date",-1),e("option",{value:"date_published"},"Published Date",-1),e("option",{value:"date_submitted"},"Submission Date",-1),e("option",{value:"date_verified"},"Verified Date",-1),e("option",{value:"date_cancelled"},"Cacellation Date",-1),e("option",{value:"date_invalidated"},"Invalidation Date",-1)]),512),[[u,o.listingForm.date_column]])]),e("label",be,[t[19]||(t[19]=e("span",{class:"text-gray-700"},"Period Start",-1)),l(e("input",{name:"period_start",type:"datetime-local",class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=s=>o.listingForm.period_start=s),placeholder:"From ..."},null,512),[[f,o.listingForm.period_start]])]),e("label",me,[t[20]||(t[20]=e("span",{class:"text-gray-700"},"Period End",-1)),l(e("input",{name:"period_end",type:"datetime-local",class:"form-input mt-1 block w-full","onUpdate:modelValue":t[5]||(t[5]=s=>o.listingForm.period_end=s),placeholder:"To ..."},null,512),[[f,o.listingForm.period_end]])])]),t[21]||(t[21]=e("hr",null,null,-1)),e("button",{type:"button",onClick:t[6]||(t[6]=A(s=>D(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])])]),_:1})]))}}),ve=U(ye,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/dashboard/LineListing.vue"]]);export{ve as default};
