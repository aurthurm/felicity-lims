import{Y as h,Z as R,aB as S,a0 as v,av as P,a7 as T,aN as V,a3 as B,_ as F,c as r,o as n,z as o,a,B as k,K as p,M as c,D as m,al as u,N as d,I as C}from"./index-OdhKCqIc.js";import D from"./Logo-D1IIpwnj.js";import{S as j}from"./Spinner-Bl8RfjFA.js";const I=h({__name:"PasswordReset",emits:["forgot"],setup(_,{expose:e,emit:b}){e();const s=b,l=R(),{auth:f}=S(l),{alert:t}=V(),g=v(""),y=v(""),i=P({password:"",passwordc:""}),w=T(()=>!(!i.password||!i.passwordc||i.password!==i.passwordc)),x={emit:s,authStore:l,auth:f,alert:t,email:g,token:y,resetForm:i,formIsValid:w,submitForm:()=>{f.value.receivedToken?l.validatePasswordResetToken(y.value):l.resetPasswordRequest(g.value)},changePassword:()=>{if(!w.value){t({title:"Form Errors",description:"Please correct form errors.",confirmText:"OK",variant:"default"});return}l.resetPassword(i.password,i.passwordc)},Logo:D,get Button(){return B},get Spinner(){return j}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),E={class:"flex min-h-screen items-center justify-center bg-white p-6"},N={class:"w-full max-w-md"},z={class:"relative -top-20 flex items-center justify-center"},L={class:"space-y-6 rounded-xl border border-border bg-background/95 p-8 shadow-2xl backdrop-blur-sm"},M={key:0},U={class:"my-3"},q={class:"space-y-1"},K=["disabled"],O={class:"my-3 flex justify-end"},A=["disabled"],H={key:1,class:"flex justify-center"},Y={class:"inline-flex items-center gap-2"},Z={key:1,class:"space-y-5"},G={class:"my-3"},J={class:"space-y-1"},Q=["disabled"],W=["disabled"],X={key:1,class:"flex justify-center"},$={class:"inline-flex items-center gap-2"},ee={class:"mb-4 text-center"},se={class:"text-foreground"},oe={class:"rounded bg-secondary px-2 py-1"},te={class:"space-y-4"},re={class:"space-y-1"},ne=["disabled"],ie={class:"space-y-1"},ae=["disabled"],de=["disabled"],le={key:1,class:"flex justify-center"},ce={class:"inline-flex items-center gap-2"};function me(_,e,b,s,l,f){return n(),r("div",E,[o("div",N,[o("div",z,[a(s.Logo,{styling:"h-36 w-36",variant:"dark"})]),o("div",L,[e[19]||(e[19]=o("div",{class:"flex flex-col items-center space-y-2"},[o("h2",{class:"mt-4 text-2xl font-bold text-foreground"},"Felicity LIMS"),o("p",{class:"text-sm text-muted-foreground"},"Password Recovery")],-1)),s.auth.resetData?.canReset?(n(),r("form",{key:1,class:"space-y-5",onSubmit:k(s.changePassword,["prevent"])},[o("div",ee,[o("p",se,[e[14]||(e[14]=c(" Hello ",-1)),o("span",oe,"@"+C(s.auth?.resetData?.username),1)]),e[15]||(e[15]=o("p",{class:"mt-1 text-sm text-foreground"},"Please enter your new password below",-1))]),o("div",te,[o("div",re,[e[16]||(e[16]=o("label",{class:"text-sm font-medium text-foreground",for:"password"},"New Password",-1)),m(o("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=t=>s.resetForm.password=t),class:d(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",s.formIsValid?"border-border":"border-red-300"]),disabled:s.auth.processing,placeholder:"Enter new password",type:"password"},null,10,ne),[[u,s.resetForm.password]])]),o("div",ie,[e[17]||(e[17]=o("label",{class:"text-sm font-medium text-foreground",for:"passwordc"},"Confirm Password",-1)),m(o("input",{id:"passwordc","onUpdate:modelValue":e[6]||(e[6]=t=>s.resetForm.passwordc=t),class:d(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",s.formIsValid?"border-border":"border-red-300"]),disabled:s.auth.processing,placeholder:"Confirm new password",type:"password"},null,10,ae),[[u,s.resetForm.passwordc]])])]),s.auth.processing?(n(),r("div",le,[o("span",ce,[a(s.Spinner,{class:"size-4"}),e[18]||(e[18]=o("span",{class:"text-sm"},"Resetting password...",-1))])])):(n(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium transition-colors duration-200",s.formIsValid?"bg-primary text-primary-foreground hover:bg-primary/90":"cursor-not-allowed bg-muted text-muted-foreground"]),disabled:!s.formIsValid,type:"submit"}," Reset Password ",10,de))],32)):(n(),r("form",{key:0,class:"space-y-5",onSubmit:k(s.submitForm,["prevent"])},[s.auth.receivedToken?(n(),r("div",Z,[o("div",G,[a(s.Button,{type:"button",variant:"link",class:"h-auto p-0 min-h-0",onClick:e[3]||(e[3]=t=>s.authStore.setReceivedResetToken(!1))},{default:p(()=>[...e[11]||(e[11]=[o("span",{class:"mr-1"},"←",-1),c(" Token not received ",-1)])]),_:1})]),o("div",J,[e[12]||(e[12]=o("label",{class:"text-sm font-medium text-foreground",for:"token"},"Reset Token",-1)),m(o("input",{id:"token","onUpdate:modelValue":e[4]||(e[4]=t=>s.token=t),class:d(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",(s.token,"border-border")]),disabled:s.auth.processing,placeholder:"Enter your reset token",type:"text"},null,10,Q),[[u,s.token]])]),s.auth.processing?(n(),r("div",X,[o("span",$,[a(s.Spinner,{class:"size-4"}),e[13]||(e[13]=o("span",{class:"text-sm"},"Validating password reset token...",-1))])])):(n(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium transition-colors duration-200",s.token?"bg-primary text-primary-foreground hover:bg-primary/90":"cursor-not-allowed bg-muted text-muted-foreground"]),disabled:!s.token,type:"submit"}," Submit Token ",10,W))])):(n(),r("div",M,[o("div",U,[a(s.Button,{type:"button",variant:"link",class:"h-auto p-0 min-h-0",onClick:e[0]||(e[0]=t=>s.emit("forgot"))},{default:p(()=>[...e[7]||(e[7]=[o("span",{class:"mr-1"},"←",-1),c(" Back to Login ",-1)])]),_:1})]),o("div",q,[e[8]||(e[8]=o("label",{class:"text-sm font-medium text-foreground",for:"email"},"Email",-1)),m(o("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>s.email=t),class:d(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",(s.email,"border-border")]),disabled:s.auth.processing,placeholder:"Enter your email",type:"email"},null,10,K),[[u,s.email]])]),o("div",O,[a(s.Button,{type:"button",variant:"link",class:"h-auto p-0 min-h-0",onClick:e[2]||(e[2]=t=>s.authStore.setReceivedResetToken(!0))},{default:p(()=>[...e[9]||(e[9]=[c(" Received a Token? ",-1)])]),_:1})]),s.auth.processing?(n(),r("div",H,[o("span",Y,[a(s.Spinner,{class:"size-4"}),e[10]||(e[10]=o("span",{class:"text-sm"},"Requesting...",-1))])])):(n(),r("button",{key:0,class:d(["w-full rounded-lg px-4 py-2 font-medium transition-colors duration-200",s.email?"bg-primary text-primary-foreground hover:bg-primary/90":"cursor-not-allowed bg-muted text-muted-foreground"]),disabled:!s.email,type:"submit"}," Request Password Reset ",10,A))]))],32))]),e[20]||(e[20]=o("div",{class:"mt-6 text-center"},[o("p",{class:"text-sm text-muted-foreground"}," Secure Password Recovery System ")],-1))])])}const ye=F(I,[["render",me],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/auth/PasswordReset.vue"]]);export{ye as default};
