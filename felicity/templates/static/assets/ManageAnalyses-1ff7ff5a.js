import{V as $,f as Y,a7 as j,u as F,i as L,a8 as A,a1 as w,al as O,o as l,c as i,O as t,D as f,C as g,F as x,H as h,J as d,a6 as C,a3 as P,z,M as k,N as H,$ as I,a0 as J,ag as T,_ as K}from"./index-0a787601.js";import{u as q}from"./analysis-3bf6dc10.js";import{x as G,y as Q}from"./analyses.mutations-7648569c.js";const W={class:"space-y-6"},X={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},Z={class:"flex items-center space-x-4"},ee=["value"],te={class:"space-y-4"},se={class:"flex items-center justify-between"},oe={class:"text-lg font-semibold text-foreground"},ne={class:"max-h-[540px] overflow-y-auto rounded-md border border-border"},ae={class:"w-full"},le={class:"overflow-x-auto"},re={class:"w-full"},ie={class:"border-b border-border bg-muted/50"},de={class:"px-4 py-2 text-left"},ue=["checked","onChange"],ce={class:"px-4 py-2"},pe=["checked","onChange"],me={class:"px-4 py-2 text-sm text-foreground"},ye={class:"px-4 py-2 text-sm text-muted-foreground"},fe={class:"px-4 py-2 text-sm text-muted-foreground"},ge={class:"flex justify-end pt-4"},xe=$({__name:"ManageAnalyses",emits:["changeTab"],setup(he,{emit:S}){const B=I(()=>J(()=>import("./index-0a787601.js").then(s=>s.cM),["assets/index-0a787601.js","assets/index-8412b2a5.css"])),{withClientMutation:b}=Y(),v=j(),u=q(),p=F(),M=L(()=>u.getAnalysesServices);A(()=>{u.fetchAnalysesTemplates(),u.fetchAnalysesServices({})});const D=S,_=s=>{D("changeTab",s)},m=w(),U=async()=>{try{T.fire({title:"Are you sure?",text:"You want to apply this template to add analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(s=>{s.isConfirmed&&b(G,{uid:v.params.sampleUid,analysisTemplateUid:m.value},"samplesApplyTemplate").then(e=>_("analysis-results"))})}catch{}},a=w([]);A(()=>{a.value=[...p.analysisResults?.map(s=>s.analysisUid)]});const y=s=>{a.value.includes(s)?a.value=a.value.filter(e=>e!==s):a.value=[...a.value,s]},c=s=>a.value.includes(s),E=s=>s.every(e=>c(e.uid)),N=s=>{s.every(e=>c(e.uid))?s.forEach(e=>y(e.uid)):s.forEach(e=>{c(e.uid)||y(e.uid)})},R=async()=>{const s=p.analysisResults?.filter(n=>!a.value.includes(n.analysisUid)).map(n=>n.uid),e=a.value.filter(n=>!p.analysisResults?.map(o=>o.analysisUid).includes(n));try{T.fire({title:"Are you sure?",text:"You want to apply these changes to the analyses?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(n=>{n.isConfirmed&&b(Q,{sampleUid:v.params.sampleUid,payload:{cancel:s,add:e}},"manageAnalyses").then(o=>_("analysis-results"))})}catch{}};return(s,e)=>{const n=O("motion-slide-right");return l(),i("div",W,[t("section",X,[f((l(),i("form",{onSubmit:e[2]||(e[2]=g(()=>{},["prevent"])),class:"space-y-4"},[t("div",Z,[e[5]||(e[5]=t("span",{class:"text-sm font-medium text-foreground"},"Analyses Template (Auto)",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),class:"w-64 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[e[4]||(e[4]=t("option",null,null,-1)),(l(!0),i(x,null,h(C(u).analysesTemplates,o=>(l(),i("option",{key:o.uid,value:o.uid},d(o.name),9,ee))),128))],512),[[P,m.value]]),t("button",{type:"button",onClick:e[1]||(e[1]=g(o=>U(),["prevent"])),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Template ")])],32)),[[n]]),e[10]||(e[10]=t("div",{class:"border-t border-border"},null,-1)),t("div",te,[t("div",se,[t("h3",oe," Manually Modify Analyses: ("+d(a.value?.length)+") ",1)]),e[9]||(e[9]=t("div",{class:"border-t border-border"},null,-1)),t("div",ne,[t("div",ae,[(l(!0),i(x,null,h(M.value,(o,V)=>(l(),z(C(B),{key:V},{title:k(()=>[H(d(o[0]),1)]),body:k(()=>[t("div",le,[t("table",re,[t("thead",null,[t("tr",ie,[t("th",de,[t("input",{type:"checkbox",checked:E(o[1]),onChange:r=>N(o[1]),class:"rounded border-input"},null,40,ue)]),e[6]||(e[6]=t("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Analysis",-1)),e[7]||(e[7]=t("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Keyword",-1)),e[8]||(e[8]=t("th",{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},"Description",-1))])]),t("tbody",null,[(l(!0),i(x,null,h(o[1],r=>f((l(),i("tr",{key:r?.uid,class:"border-b border-border hover:bg-muted/50 transition-colors duration-200"},[t("td",ce,[t("input",{type:"checkbox",checked:c(r?.uid),onChange:be=>y(r?.uid),class:"rounded border-input"},null,40,pe)]),t("td",me,d(r?.name),1),t("td",ye,d(r?.keyword),1),t("td",fe,d(r?.description),1)])),[[n]])),128))])])])]),_:2},1024))),128))])]),t("div",ge,[t("button",{type:"button",onClick:e[3]||(e[3]=g(o=>R(),["prevent"])),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Changes ")])])])])}}}),we=K(xe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{we as default};
