import{a0 as w,a4 as k,g as C,ad as D,h as V,_ as E,r as N,c as d,o as l,A as e,J as v,K as x,E as b,L as i,F as h,a9 as q,a2 as A,a as I,D as T,H as M}from"./index-CNAOKjig.js";import{u as P}from"./samples-DqZBjYU6.js";import{u as U}from"./analysis-CIDyy6YR.js";import"./analyses.mutations-BhfuTbLn.js";import"./storage.mutations-CFO7fcBK.js";const B=w({__name:"RejectSamples",setup(j,{expose:s}){s();const p=k(),n=U(),{rejectSamples:m}=P(),f=p.options.history.state,u=C({rejections:[]}),t=JSON.parse(window.history.state.samples);let c=[];for(let o of t)o.reasons=[],o.other=void 0,c.push(o);u.rejections=c,D(()=>n.fetchRejectionReasons());const r=(o,a)=>{let _=[];return o?.forEach(g=>_.push(g.name)),a?.forEach(g=>_.push(g.name)),_.join(", ")},S=o=>{u.rejections?.forEach(a=>{a.reasons=o.reasons,a.other=o.other})},R=V(()=>n.getRejectionReasons),y={router:p,analysisStore:n,rejectSamples:m,routerState:f,state:u,ss:t,get coll(){return c},set coll(o){c=o},profileAnalysesText:r,cascadeCopy:S,rejectionReasons:R,rejectSamples_:async()=>{const o=[];u.rejections?.forEach(a=>{o.push({uid:a?.uid,reasons:a?.reasons,other:a?.other})}),await m(o).then(a=>{o.length==1&&f.back?.toString().includes("patient")?p.push({path:f.back.toString()}):p.push({name:"samples-listing"})})}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),O={class:"space-y-6"},F={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},J={key:0,class:"border-t border-border"},L={class:"text-lg font-semibold text-foreground"},H={class:"grid grid-cols-12 gap-6"},K={class:"col-span-6 grid grid-cols-2 gap-6"},z={class:"space-y-4"},G={class:"flex items-center justify-between"},Q={class:"text-muted-foreground"},W={class:"flex items-center justify-between"},X={class:"text-muted-foreground"},Y={class:"flex items-center justify-between"},Z={class:"text-muted-foreground"},$={class:"space-y-4"},ee={class:"flex items-center justify-between"},se={class:"text-muted-foreground"},te={class:"flex items-center justify-between"},oe={class:"text-muted-foreground"},ne={class:"col-span-5"},re={class:"grid grid-cols-2 gap-6"},ae={class:"space-y-2"},ie={class:"space-y-2"},ce=["onUpdate:modelValue"],de=["value"],le={class:"space-y-2"},ue={class:"space-y-2"},pe=["onUpdate:modelValue"],fe={class:"col-span-1 flex items-center justify-center"},me=["onClick"],_e={class:"flex justify-end"};function ge(j,s,p,n,m,f){const u=N("font-awesome-icon");return l(),d("div",O,[s[9]||(s[9]=e("h4",{class:"text-xl font-semibold text-foreground"},"Sample Rejection",-1)),e("div",F,[(l(!0),d(v,null,x(n.state.rejections,(t,c)=>(l(),d("div",{key:c,class:"space-y-6"},[c>0?(l(),d("div",J)):b("",!0),e("h2",L,i(t?.sampleId)+" â†’ "+i(t?.status),1),e("div",H,[e("div",K,[e("div",z,[e("div",G,[s[1]||(s[1]=e("span",{class:"font-medium text-foreground"},"Sample Type",-1)),e("span",Q,i(t?.sampleType?.name),1)]),e("div",W,[s[2]||(s[2]=e("span",{class:"font-medium text-foreground"},"Client Sample ID",-1)),e("span",X,i(t?.analysisRequest?.clientRequestId),1)]),e("div",Y,[s[3]||(s[3]=e("span",{class:"font-medium text-foreground"},"Analyses",-1)),e("span",Z,i(n.profileAnalysesText(t?.profiles,t?.analyses)),1)])]),e("div",$,[e("div",ee,[s[4]||(s[4]=e("span",{class:"font-medium text-foreground"},"Patient",-1)),e("span",se,i(t?.analysisRequest?.patient?.firstName)+" "+i(t?.analysisRequest?.patient?.lastName),1)]),e("div",te,[s[5]||(s[5]=e("span",{class:"font-medium text-foreground"},"Client Patient ID",-1)),e("span",oe,i(t?.analysisRequest?.patient?.clientPatientId),1)])])]),e("div",ne,[e("div",re,[e("div",ae,[e("label",ie,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-foreground"},"Rejection Reasons",-1)),h(e("select",{name:"reasons",multiple:"","onUpdate:modelValue":r=>t.reasons=r,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[s[6]||(s[6]=e("option",{value:""},null,-1)),(l(!0),d(v,null,x(n.rejectionReasons,r=>(l(),d("option",{key:r.uid,value:r.uid},i(r.reason),9,de))),128))],8,ce),[[q,t.reasons]])])]),e("div",le,[e("label",ue,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-foreground"},"Other",-1)),h(e("input",{type:"text","onUpdate:modelValue":r=>t.other=r,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,pe),[[A,t.other]])])])])]),e("div",fe,[h(e("button",{onClick:r=>n.cascadeCopy(t),class:"text-primary hover:text-primary/80 transition-colors"},[I(u,{icon:"level-down-alt"})],8,me),[[M,c===0]])])])]))),128))]),e("div",_e,[n.state.rejections?.length>0?(l(),d("button",{key:0,onClick:s[0]||(s[0]=T(t=>n.rejectSamples_(),["prevent"])),class:"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destructive/50"}," Reject Samples ")):b("",!0)])])}const Se=E(B,[["render",ge],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{Se as default};
