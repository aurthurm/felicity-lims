import{V as ee,f as te,aj as se,a8 as oe,a1 as ne,r as f,al as N,o as l,c as u,a as p,M as k,N as ie,O as e,D as a,a6 as s,F as re,H as de,a4 as b,J as d,ae as c,L as P,z as le,Y as C,Z as Y,C as ae,$ as ue,a0 as ce,_ as me}from"./index-74595aff.js";import{u as fe,e as pe,f as be}from"./billing-c8e17d5c.js";import{c as ge,a as L,f as S,b as ve,g as F,u as xe,e as m}from"./array-b292c9a7.js";import{f as q}from"./index-52e9caa2.js";const _e={class:"space-y-6"},ye={class:"rounded-lg border border-border bg-card p-6"},he={class:"grid grid-cols-12 gap-6"},Ve={initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-3 overflow-y-auto overscroll-contain voucher-scroll"},De={key:0,class:"rounded-lg border border-border bg-card p-4"},we={key:1,class:"space-y-2"},ke=["onClick"],Ce={class:"flex-grow"},Pe={class:"flex justify-between items-center"},Le={class:"font-medium text-foreground"},Oe={class:"text-sm text-muted-foreground"},Ue={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400,class:"col-span-9 space-y-6"},je={class:"rounded-lg border border-border bg-card p-6"},Me={class:"flex justify-between items-center mb-4"},Ne={class:"text-lg font-semibold text-foreground"},Ye={class:"grid grid-cols-3 gap-8"},Se={class:"space-y-4"},Fe={class:"flex justify-between items-center"},qe={class:"text-sm text-foreground"},$e={class:"flex justify-between items-center"},Ee={class:"text-sm text-foreground"},Re={class:"space-y-4"},Ae={class:"flex justify-between items-center"},Be={class:"text-sm text-foreground"},Te={class:"flex justify-between items-center"},ze={class:"text-sm text-foreground"},Ie={class:"space-y-4"},He={class:"flex justify-between items-center"},Je={class:"text-sm text-foreground"},We={class:"flex justify-between items-center"},Ze={class:"text-sm text-foreground"},Ge={class:"space-y-6"},Ke={class:"grid grid-cols-4 gap-4"},Qe={class:"block col-span-2 space-y-2"},Xe={class:"block col-span-1 space-y-2"},et={class:"block col-span-1 space-y-2"},tt={class:"grid grid-cols-4 gap-4"},st={class:"block col-span-2 space-y-2"},ot={class:"grid grid-cols-2 gap-4"},nt={class:"flex items-center space-x-2"},it={class:"flex items-center space-x-2"},rt={class:"flex justify-end"},dt=ee({__name:"Voucher",setup(lt){const $=ue(()=>ce(()=>import("./VoucherCodes-f94d1124.js"),["assets/VoucherCodes-f94d1124.js","assets/index-74595aff.js","assets/index-8412b2a5.css","assets/billing-c8e17d5c.js","assets/array-b292c9a7.js","assets/VoucherCodes-bd5edd75.css"])),{withClientMutation:O}=te();let g=fe();const{vouchers:U,fetchingVouchers:E}=se(g);oe(()=>{g.fetchVouchers()});let r=ne(!1);const R=ge({uid:L().nullable(),name:L().required("Voucher Name is Required"),startDate:S().required("Start Date is Required"),endDate:S().required("End Date is Required"),usageLimit:ve().required("Usage Limit is Required"),used:L().nullable(),oncePerCustomer:F().default(!0),oncePerOrder:F().default(!0)}),{handleSubmit:A,errors:v,setFieldValue:i}=xe({validationSchema:R,initialValues:{oncePerCustomer:!0,oncePerOrder:!0}}),{value:x}=m("uid"),{value:_}=m("name"),{value:y}=m("startDate"),{value:h}=m("endDate"),{value:V}=m("usageLimit"),{value:B}=m("used"),{value:D}=m("oncePerCustomer"),{value:w}=m("oncePerOrder"),j=A(n=>{n.uid||H(n),n.uid&&J(n)});let T=n=>{i("uid",n.uid),i("name",n.name),i("startDate",q(n.startDate,"DD/MM/YYYY")),i("endDate",q(n.endDate,"DD/MM/YYYY")),i("usageLimit",n.usageLimit),i("used",n.used),i("oncePerCustomer",n.oncePerCustomer),i("oncePerOrder",n.oncePerOrder)},z=()=>{i("uid",void 0),i("name",void 0),i("startDate",void 0),i("endDate",void 0),i("usageLimit",void 0),i("oncePerCustomer",!0),i("oncePerOrder",!0)};const I=()=>{z(),r.value=!0},H=n=>{delete n.uid,O(pe,{payload:n},"createVoucher").then(t=>g.addVoucher(t)).finally(()=>r.value=!1)},J=n=>{delete n.uid,delete n.used,O(be,{uid:x?.value,payload:n},"updateVoucher").then(t=>g.updateVoucher(t)).finally(()=>r.value=!1)};return(n,t)=>{const W=f("fel-button"),Z=f("fel-heading"),G=f("fel-loader"),K=f("font-awesome-icon"),Q=f("fel-modal"),M=N("motion"),X=N("motion-slide-top");return l(),u("div",_e,[p(Z,{title:"Vouchers"},{default:k(()=>[p(W,{onClick:I},{default:k(()=>t[9]||(t[9]=[ie("Add Voucher")])),_:1})]),_:1}),e("div",ye,[e("div",he,[a((l(),u("section",Ve,[s(E)?(l(),u("div",De,[p(G,{message:"Fetching vouchers ..."})])):(l(),u("div",we,[(l(!0),u(re,null,de(s(U),o=>(l(),u("button",{key:o.uid,onClick:at=>s(T)(o),class:b(["w-full flex items-center p-4 rounded-lg border transition-colors hover:bg-accent hover:text-accent-foreground",[o.uid===s(x)?"border-primary bg-primary/10":"border-border bg-card"]])},[e("div",Ce,[e("div",Pe,[e("span",Le,d(o.name),1),e("span",Oe,d(o.used)+" of "+d(o.usageLimit),1)])])],10,ke))),128))]))])),[[M]]),s(U)?.length>0&&s(x)?a((l(),u("section",Ue,[a((l(),u("div",je,[e("div",Me,[e("h4",Ne,d(s(_)?.toUpperCase()),1),e("button",{onClick:t[0]||(t[0]=o=>c(r)?r.value=!0:r=!0),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 w-9"},[p(K,{icon:"pen",class:"text-muted-foreground"})])]),e("div",Ye,[e("div",Se,[e("div",Fe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date:",-1)),e("span",qe,d(s(y)),1)]),e("div",$e,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"End Date:",-1)),e("span",Ee,d(s(h)),1)])]),e("div",Re,[e("div",Ae,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Usage Limit:",-1)),e("span",Be,d(s(V)),1)]),e("div",Te,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Used:",-1)),e("span",ze,d(s(B)),1)])]),e("div",Ie,[e("div",He,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per customer:",-1)),e("span",Je,d(s(D)?"Yes":"No"),1)]),e("div",We,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Once per order:",-1)),e("span",Ze,d(s(w)?"Yes":"No"),1)])])])])),[[X]]),p(s($),{voucherUid:s(x)},null,8,["voucherUid"])])),[[M]]):P("v-if",!0)])]),P(" Voucher Form Modal "),s(r)?(l(),le(Q,{key:0,onClose:t[8]||(t[8]=o=>c(r)?r.value=!1:r=!1),contentWidth:"w-2/6"},{header:k(()=>t[16]||(t[16]=[e("h3",{class:"text-lg font-semibold text-foreground"},"Voucher Form",-1)])),body:k(()=>[e("form",Ge,[e("div",Ke,[e("label",Qe,[t[17]||(t[17]=e("span",{class:"text-sm font-medium text-foreground"},"Voucher Name",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(v).name}]),type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>c(_)?_.value=o:null),placeholder:"Name ..."},null,2),[[C,s(_)]])]),e("label",Xe,[t[18]||(t[18]=e("span",{class:"text-sm font-medium text-foreground"},"Start Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(v).startDate}]),type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>c(y)?y.value=o:null)},null,2),[[C,s(y)]])]),e("label",et,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-foreground"},"End Date",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(v).endDate}]),type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>c(h)?h.value=o:null)},null,2),[[C,s(h)]])])]),e("div",tt,[e("label",st,[t[20]||(t[20]=e("span",{class:"text-sm font-medium text-foreground"},"Usage Limit",-1)),a(e("input",{class:b(["form-input w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive animate-pulse":s(v).usageLimit}]),type:"number",min:"1","onUpdate:modelValue":t[4]||(t[4]=o=>c(V)?V.value=o:null)},null,2),[[C,s(V)]])])]),e("div",ot,[e("label",nt,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>c(D)?D.value=o:null),checked:""},null,512),[[Y,s(D)]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Customer",-1))]),e("label",it,[a(e("input",{class:"form-checkbox h-4 w-4 rounded border-input text-primary focus:ring-primary",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>c(w)?w.value=o:null),checked:""},null,512),[[Y,s(w)]]),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-foreground"},"Once Per Order",-1))])]),e("div",rt,[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:t[7]||(t[7]=ae((...o)=>s(j)&&s(j)(...o),["prevent"]))}," Save Voucher ")])])]),_:1})):P("v-if",!0)])}}});const pt=me(dt,[["__scopeId","data-v-3f30ca74"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/billing/Voucher.vue"]]);export{pt as default};
