import{S as B,f as F,a7 as G,a0 as i,h as N,r as S,o as d,c as p,N as e,F as $,E as j,a3 as y,H as a,y as T,L as w,A as L,M as q,C as f,X as h,a as H,a5 as z,Y as I,K,_ as Q}from"./index-8d0a01b3.js";import{U as X}from"./_queries-5236cda4.js";import{l as Y,m as J,n as O}from"./grind.queries-30b538cc.js";import{r as P,m as R}from"./index-d7a95616.js";import W from"./vue-multiselect.esm-46eec9fe.js";const Z={class:"space-y-6"},ee={class:"space-y-6"},te=["onDblclick"],oe={class:"absolute left-0 top-0 transform -translate-x-1/2 bg-background p-1 border border-border rounded-full w-4 h-4 flex items-center justify-center transition-colors duration-200 group-hover:border-primary"},re={class:"mb-6"},se={class:"font-medium text-foreground group-hover:text-primary transition-colors duration-200"},ne={class:"text-sm text-muted-foreground mt-1"},ie={class:"text-lg font-semibold text-foreground"},le={class:"flex items-center space-x-2"},de={class:"flex justify-end space-x-3"},ae={type:"submit",class:"px-4 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"},ue=B({__name:"ErrandMilestone",props:{errandUid:{type:String,required:!0}},emits:["milestoneUpdated"],setup(k,{emit:_}){const u=k,{withClientMutation:b,withClientQuery:g}=F();G(()=>{c(),V()});const M=_,v=i([]);function c(s="cache-first"){g(Y,{errandUid:u.errandUid},"grindMilestonesByErrand",s).then(t=>{t&&(v.value=t)})}const n=i(!1),l=i(!1),m=i(""),r=N({});function U(){n.value=!0,m.value="Add Milestone",l.value=!0,P(r)}function C(s){n.value=!0,m.value="Edit Milestone",l.value=!1,R(r,s)}function E(){n.value=!1;const s={title:r.title,description:r.description,complete:r.complete,assigneeUid:r.assignee?.uid,errandUid:u.errandUid};l.value?b(J,{payload:{...s,errandUid:u.errandUid}},"createGrindMilestone").then(()=>c("network-only")):b(O,{uid:r.uid,payload:s},"updateGrindMilestone").then(()=>{c("network-only"),M("milestoneUpdated")})}function D({firstName:s,lastName:t}){return`${s} ${t}`}const x=i();function V(){g(X,{first:100},"userAll").then(s=>{x.value=s.items})}return(s,t)=>{const A=S("fel-modal");return d(),p("div",Z,[e("div",{class:"flex justify-between items-center"},[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-foreground"},"Milestones",-1)),e("button",{onClick:U,class:"px-3 py-1.5 text-sm font-medium text-foreground bg-background border border-border rounded-md hover:border-primary hover:text-primary hover:bg-secondary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},t[6]||(t[6]=[e("span",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",null,"Add New")],-1)]))]),e("div",ee,[(d(!0),p($,null,j(v.value,o=>(d(),p("div",{key:o.uid,class:y(["pl-6 border-l-2 relative group cursor-pointer",{"border-success/20":o.complete,"border-destructive/20":!o.complete}]),onDblclick:ce=>C(o)},[e("div",oe,[e("div",{class:y(["w-2 h-2 rounded-full transition-colors duration-200",{"bg-success":o.complete,"bg-destructive":!o.complete}])},null,2)]),e("div",re,[e("h4",se,a(o.title),1),e("p",ne,a(o.description),1)])],42,te))),128))]),n.value?(d(),T(A,{key:0,onClose:t[5]||(t[5]=o=>n.value=!1),"content-width":"w-full max-w-2xl"},{header:w(()=>[e("h3",ie,a(m.value),1)]),body:w(()=>[e("form",{onSubmit:L(E,["prevent"]),class:"space-y-6 p-6"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"title"},[q(" Title "),e("span",{class:"text-destructive"},"*")],-1)),f(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>r.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter milestone title"},null,512),[[h,r.title]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"description"}," Description ",-1)),f(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=o=>r.description=o),rows:"3",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter milestone description"},null,512),[[h,r.description]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Assignee ",-1)),H(z(W),{modelValue:r.assignee,"onUpdate:modelValue":t[2]||(t[2]=o=>r.assignee=o),options:x.value,"track-by":"uid",searchable:!0,"custom-label":D,placeholder:"Select assignee",class:"multiselect-primary"},null,8,["modelValue","options"])]),e("div",le,[f(e("input",{id:"complete","onUpdate:modelValue":t[3]||(t[3]=o=>r.complete=o),type:"checkbox",class:"w-4 h-4 text-primary border-border rounded focus:ring-primary focus:ring-offset-2"},null,512),[[I,r.complete]]),t[11]||(t[11]=e("label",{class:"text-sm font-medium text-foreground",for:"complete"}," Complete ",-1))]),e("div",de,[e("button",{type:"button",onClick:t[4]||(t[4]=o=>n.value=!1),class:"px-4 py-2 text-sm font-medium text-foreground bg-background border border-border rounded-md shadow-sm hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"}," Cancel "),e("button",ae,a(l.value?"Create":"Update"),1)])],32)]),_:1})):K("",!0)])}}});const ve=Q(ue,[["__scopeId","data-v-7f459d59"],["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/grind/_id/ErrandMilestone.vue"]]);export{ve as default};
