import{S as I,f as G,a0 as l,h as X,a7 as Y,ad as q,r as S,o as r,c as a,a as N,L as w,M as z,N as e,F as f,E as g,H as u,y as H,A as K,C as p,X as A,Y as T,K as Q,_ as W}from"./index-54016222.js";import{g as Z,a as J,X as R,Y as ee,Z as te}from"./microbiology.mutations-f226ce1a.js";const se={class:"overflow-x-auto"},oe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-background shadow-dashboard rounded-lg"},ne={class:"min-w-full divide-y divide-border"},ie={class:"bg-background divide-y divide-border"},re={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ae={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},de={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},le={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ue={class:"px-3 py-3.5 whitespace-nowrap text-right text-sm"},ce=["onClick"],me={class:"text-xl font-semibold text-foreground"},fe={class:"space-y-4"},pe={class:"grid grid-cols-1 gap-4"},be={class:"block"},ve={class:"block"},ge={class:"flex gap-4"},xe={class:"w-2/3 space-y-2"},ye={class:"block"},_e={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},he=["value"],we={class:"ml-2 text-sm text-foreground"},Ae={class:"w-1/3"},ke={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Ce={class:"text-sm text-foreground"},Oe=["onClick"],Pe={class:"flex gap-4"},Se={class:"w-2/3 space-y-2"},De={class:"block"},Ve={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},Ee=["value"],Me={class:"ml-2 text-sm text-foreground"},Le={class:"w-1/3"},Ne={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Te={class:"text-sm text-foreground"},Be=["onClick"],Ue=I({__name:"AstPanel",setup($e){const{withClientMutation:D,withClientQuery:k}=G(),x=l(!1),V=l(""),E=l(!0),y=l(""),_=l(""),m=l([]),b=l([]),h=l([]),c=l([]),C=l([]),o=X({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});Y(()=>{B(),M(),U()});function B(){k(Z,{},"abxLaboratoryAntibiotics").then(n=>{n&&(b.value=n,h.value=[...b.value])})}function M(){k(J,{text:y.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(n=>{c.value=c.value?.filter(t=>o.selectedOrganisms.includes(t.uid))||[],c.value=q(c.value,n?.items,"uid"),C.value=[...c.value]})}function U(){k(R,{},"abxAstPanelAll").then(n=>{n&&(m.value=n,m.value.forEach(t=>t.organisms?.forEach(d=>c.value.push(d))))})}function L(n,t={}){E.value=n,x.value=!0,V.value=(n?"Create":"Edit")+" AST Panel",n?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=t.uid,o.name=t.name,o.description=t.description,o.selectedAntibiotics=t.antibiotics?.map(d=>d.uid)||[],o.selectedOrganisms=t.organisms?.map(d=>d.uid)||[])}function $(){const n={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};E.value?D(ee,{payload:n},"createAbxAstPanel").then(t=>{t&&m.value.unshift(t)}):D(te,{uid:o.uid,payload:n},"updateAbxAstPanel").then(t=>{if(t){const d=m.value.findIndex(v=>v.uid===t.uid);d>-1&&(m.value=[...m.value.map((v,O)=>O===d?t:v)])}}),x.value=!1}function j(){if(!_.value){h.value=[...b.value];return}h.value=b.value.filter(n=>n.name.toLowerCase().includes(_.value.toLowerCase()))}function F(){if(!y.value){C.value=[...c.value];return}M()}return(n,t)=>{const d=S("fel-button"),v=S("fel-heading"),O=S("fel-modal");return r(),a(f,null,[N(v,{title:"AST Panels"},{default:w(()=>[N(d,{onClick:t[0]||(t[0]=s=>L(!0))},{default:w(()=>t[8]||(t[8]=[z("Add Panel")])),_:1})]),_:1}),e("div",se,[e("div",oe,[e("table",ne,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Organisms"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Antibiotics"),e("th",{class:"px-3 py-3.5"})])],-1)),e("tbody",ie,[(r(!0),a(f,null,g(m.value,s=>(r(),a("tr",{key:s?.uid},[e("td",re,u(s?.name),1),e("td",ae,u(s?.description),1),e("td",de,u(s?.organisms?.map(i=>i.name).join(", ")),1),e("td",le,u(s?.antibiotics?.map(i=>i.name).join(", ")),1),e("td",ue,[e("button",{onClick:i=>L(!1,s),class:"px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Edit ",8,ce)])]))),128))])])])]),x.value?(r(),H(O,{key:0,onClose:t[7]||(t[7]=s=>x.value=!1),contentWidth:"w-1/2"},{header:w(()=>[e("h3",me,u(V.value),1)]),body:w(()=>[e("form",{onSubmit:K($,["prevent"]),class:"space-y-6 p-4"},[e("div",fe,[e("div",pe,[e("label",be,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-foreground"},"Panel Name",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter panel name"},null,512),[[A,o.name]])]),e("label",ve,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),rows:"2",class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter description"},null,512),[[A,o.description]])])]),e("div",ge,[e("div",xe,[e("label",ye,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-foreground"},"Search Organisms",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),onInput:F,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search organisms..."},null,544),[[A,y.value]])]),e("div",_e,[(r(!0),a(f,null,g(C.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[4]||(t[4]=i=>o.selectedOrganisms=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,he),[[T,o.selectedOrganisms]]),e("span",we,u(s.name),1)]))),128))])]),e("div",Ae,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Organisms",-1)),e("div",ke,[(r(!0),a(f,null,g(o.selectedOrganisms,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Ce,u(c.value?.find(i=>i.uid===s)?.name),1),e("button",{onClick:i=>o.selectedOrganisms=o.selectedOrganisms.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Oe)]))),128))])])]),e("div",Pe,[e("div",Se,[e("label",De,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-foreground"},"Search Antibiotics",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),onInput:j,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search antibiotics..."},null,544),[[A,_.value]])]),e("div",Ve,[(r(!0),a(f,null,g(h.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[6]||(t[6]=i=>o.selectedAntibiotics=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,Ee),[[T,o.selectedAntibiotics]]),e("span",Me,u(s.name),1)]))),128))])]),e("div",Le,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Antibiotics",-1)),e("div",Ne,[(r(!0),a(f,null,g(o.selectedAntibiotics,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Te,u(b.value.find(i=>i.uid==s)?.name),1),e("button",{onClick:i=>o.selectedAntibiotics=o.selectedAntibiotics.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Be)]))),128))])])])]),t[16]||(t[16]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):Q("",!0)],64)}}});const Ie=W(Ue,[["__scopeId","data-v-195d3b3a"],["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{Ie as default};
