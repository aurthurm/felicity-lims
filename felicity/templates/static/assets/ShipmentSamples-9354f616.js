import{S as Z,a6 as G,a0 as g,i as U,h as Q,r as D,ak as R,o as r,c as d,C as i,D as a,N as t,F as V,E as A,H as c,a5 as l,a2 as W,X as ee,a as I,L as M,M as E,A as b,K as B,ad as te,Y as $,a3 as se,y as oe,Z as ie,$ as ne,_ as le}from"./index-0c222abb.js";import{u as re}from"./shipment-1c7b7507.js";import{u as ae}from"./shipment-0f0d4258.js";const de={class:"space-y-6"},ue={class:"space-y-4"},ce={action:"post",class:"space-y-4"},me={class:"flex flex-wrap gap-4 items-end"},fe={class:"flex-1 min-w-[200px]"},pe={class:"block space-y-1.5"},ve=["value"],ge={class:"flex-1 min-w-[200px]"},be={class:"block space-y-1.5"},xe={class:"text-sm text-muted-foreground"},he={class:"rounded-md border border-border"},_e={class:"overflow-x-auto"},ye={class:"w-full"},ke={class:"border-b border-border bg-muted/50"},Se={class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},Ce={class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},we={class:"divide-y divide-border"},Ue={class:"p-4 align-middle"},De=["onUpdate:modelValue"],Re={class:"p-4 align-middle"},Ve={class:"p-4 align-middle"},Ae={class:"text-sm font-medium"},Ie={key:1},Me={class:"p-4 align-middle"},Ee={class:"text-sm"},Be={class:"p-4 align-middle"},$e={class:"text-sm"},qe={class:"p-4 align-middle"},Ne={class:"text-sm"},Le={class:"p-4 align-middle"},Pe={class:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary"},Te={class:"flex gap-2"},je=Z({__name:"ShipmentSamples",setup(Fe){const q=ie(()=>ne(()=>import("./index-0c222abb.js").then(o=>o.cJ),["assets/index-0c222abb.js","assets/index-8412b2a5.css"])),m=ae(),_=G();let u=g(!1),n=U(()=>m.getShipment);const y=()=>{m.fetchShipmentByUid(_.params.shipmentUid)},f=Q({laboratoryUid:void 0,comment:void 0,courier:void 0}),p=g(!1),N=()=>{p.value=!0,m.updateShipment({uid:_.params.shipmentUid,payload:f}).then(()=>{p.value=!1,y()})};function L(){return n.value?.samples?.every(o=>o.checked===!0)}function k(){let o=[];return n.value?.shippedSamples?.forEach(e=>{e?.checked&&o.push(e.sample)}),o}function P(){L()?u.value=!0:u.value=!1,v()}function T(o){if(j(o)||n.value?.state!=="preperation"){S(o);return}o.checked=!0,v()}function j(o){return["retracted","approved"].includes(o.status)}function S(o){o.checked=!1,v()}function F(){n?.value?.samples?.forEach(o=>u.value?T(o):S(o)),v()}function z(){return k().map(o=>({sampleUid:o.uid,shipedSampleUid:void 0,analyses:[]}))}let x=g(!1),h=g(!1);function v(){x.value=!1,h.value=!1;const o=k();o.length!==0&&(o.every(e=>["referred","paired"].includes(e.status??""))&&(x.value=!0),o.every(e=>e.status==="referred")&&(h.value=!0))}const H=U(()=>!["cancelled","dispatched"].includes(n.value?.state??"")),{manageSamples:J}=re(),C=o=>{const e=z();J(n?.value?.uid,e,o)};return(o,e)=>{const K=D("font-awesome-icon"),O=D("router-link"),X=R("motion-slide-left"),Y=R("motion-slide-right");return r(),d("div",de,[i((r(),d("div",ue,[i(t("form",ce,[t("div",me,[t("div",fe,[t("label",pe,[e[9]||(e[9]=t("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Reference Laboratory",-1)),i(t("select",{name:"laboratory_uid","onUpdate:modelValue":e[0]||(e[0]=s=>f.laboratoryUid=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(r(!0),d(V,null,A(l(m).laboratories,s=>(r(),d("option",{key:s.uid,value:s.uid},c(s.name),9,ve))),128))],512),[[W,f.laboratoryUid]])])]),t("div",ge,[t("label",be,[e[10]||(e[10]=t("span",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Courier",-1)),i(t("input",{type:"text",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=s=>f.courier=s)},null,512),[[ee,f.courier]])])]),t("div",null,[I(l(q),{onClick:e[2]||(e[2]=b(s=>N(),["prevent"])),color:"sky-800",class:"h-10 px-4"},{default:M(()=>e[11]||(e[11]=[E(" Apply ")])),_:1})])])],512),[[a,!p.value&&!l(m).shipment?.incoming]]),i(t("p",xe,"Updating...",512),[[a,p.value]]),t("div",null,[t("button",{onClick:e[3]||(e[3]=b(s=>y(),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background border border-input hover:bg-accent hover:text-accent-foreground h-9 px-4"}," Refresh ")])])),[[a,H.value],[X]]),B(" Sample Table View "),t("div",he,[t("div",_e,[t("table",ye,[t("thead",null,[t("tr",ke,[i(t("th",Se,[i(t("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-primary",onChange:e[4]||(e[4]=s=>F()),"onUpdate:modelValue":e[5]||(e[5]=s=>te(u)?u.value=s:u=s)},null,544),[[$,l(u)]])],512),[[a,l(n)?.state==="preperation"]]),e[12]||(e[12]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},null,-1)),e[13]||(e[13]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Sample ID",-1)),i(t("th",Ce," External SID ",512),[[a,l(n)?.incoming]]),e[14]||(e[14]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Client Request Id",-1)),e[15]||(e[15]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Date Collected",-1)),e[16]||(e[16]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Analysis",-1)),e[17]||(e[17]=t("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Status",-1))])]),t("tbody",we,[(r(!0),d(V,null,A(l(n)?.shippedSamples,s=>i((r(),d("tr",{key:s.sampleUid,class:"hover:bg-muted/50"},[i(t("td",Ue,[i(t("input",{type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus:ring-primary","onUpdate:modelValue":w=>s.checked=w,onChange:e[6]||(e[6]=w=>P())},null,40,De),[[$,s.checked]])],512),[[a,l(n)?.state==="preperation"]]),t("td",Re,[s.sample?.priority??0>0?(r(),d("span",{key:0,class:se(["text-sm",{"text-destructive":s.sample?.priority??0>1}])},[I(K,{icon:"fa-star"})],2)):B("v-if",!0)]),t("td",Ve,[t("div",Ae,[s.sample?.analysisRequest?.patient?.uid?(r(),oe(O,{key:0,to:{name:"sample-detail",params:{patientUid:s.sample?.analysisRequest?.patient?.uid,sampleUid:s.sample?.uid}},class:"text-primary hover:underline"},{default:M(()=>[E(c(s.sample?.sampleId),1)]),_:2},1032,["to"])):(r(),d("div",Ie,c(s.sample?.sampleId),1))])]),i(t("td",Me,[t("div",Ee,c(s.extSampleId),1)],512),[[a,l(n)?.incoming]]),t("td",Be,[t("div",$e,c(s.sample?.analysisRequest?.clientRequestId),1)]),t("td",qe,[t("div",Ne,c(s.sample?.dateCollected),1)]),e[18]||(e[18]=t("td",{class:"p-4 align-middle"},[t("div",{class:"text-sm"},"tests")],-1)),t("td",Le,[t("span",Pe,c(s.sample?.status||"unknown"),1)])])),[[Y]])),128))])])])]),t("section",Te,[i(t("button",{onClick:e[7]||(e[7]=b(s=>C("recover"),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background border border-input hover:bg-accent hover:text-accent-foreground h-9 px-4"}," Remove ",512),[[a,l(x)]]),i(t("button",{onClick:e[8]||(e[8]=b(s=>C("recall"),["prevent"])),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background border border-input hover:bg-accent hover:text-accent-foreground h-9 px-4"}," Pair ",512),[[a,l(h)]])])])}}}),Ke=le(je,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentSamples.vue"]]);export{Ke as default};
