import{a0 as C,a7 as l,ad as M,f as Y,t as U,_ as q,r as w,c,o as n,A as i,F as P,E as m,a2 as I,L as f,C as R,a as j,D as O}from"./index-Daoe3XS9.js";import{A as Q,a as G,b as W,B as z,c as J,E as K,H as X,I as Z,d as $,e as ee,L as te,P as oe,S as ie,T as re,f as se,U as ae,g as ne,C as de}from"./index-BQ5jAWaE.js";import{A as le,E as ce}from"./Notices-6DoBCznj.js";import{u as me}from"./notice-BKU3uEme.js";import{c as ue,e as E,g as pe,a as H,d as ge,u as fe,b}from"./index.esm-BT7_X8h2.js";import{f as S}from"./index-Cgdayxkn.js";import"./setup-B4brziEy.js";const be=C({__name:"NoticeForm",props:{notice:Object},emits:["close"],setup(y,{expose:t,emit:h}){t();const e=l(!1),u=l(null),v=l(de);M(()=>{u.value={toolbar:{items:["undo","redo","|","heading","|","bold","italic","underline","|","link","insertTable","blockQuote","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[Q,G,W,z,J,K,X,Z,$,ee,te,oe,ie,re,se,ae,ne],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},placeholder:"Begin typing..."},e.value=!0});const d=y,a=h,{withClientMutation:r}=Y(),p=me(),{notice:s}=U(d),V=l(new Date),x=ue({uid:ge(),title:H().required("Notice is required"),body:H().required("Notice body message is required"),expiry:pe().required("Expiry is required").typeError("Invalid Date format"),groups:E(),departments:E()}),{handleSubmit:_,errors:B}=fe({validationSchema:x,initialValues:{uid:s?.value?.uid,title:s?.value?.title,body:s?.value?.body,expiry:s?.value?.expiry,groups:s?.value?.groups,departments:s?.value?.departments}}),{value:F}=b("title"),{value:A}=b("body"),{value:L}=b("expiry"),T=_(o=>{o.uid||k(o),o.uid&&N(o)});function k(o){r(le,{payload:{title:o.title,body:o.body,expiry:S(o.expiry,"YYYY-MM-DD HH:mm"),groups:o.groups||[],departments:o.departments||[]}},"createNotice").then(g=>{p.addNotice(g),a("close")})}function N(o){r(ce,{uid:o.uid,payload:{title:o.title,body:o.body,expiry:S(o.expiry,"YYYY-MM-DD HH:mm"),groups:o.groups||[],departments:o.departments||[]}},"updateNotice").then(g=>{p.updateNotice(g),a("close")})}const D={isLayoutReady:e,config:u,editor:v,props:d,emit:a,withClientMutation:r,noticeStore:p,notice:s,minDateTime:V,noticeSchema:x,handleSubmit:_,errors:B,title:F,body:A,expiry:L,submitNoticeForm:T,addNotice:k,updateNotice:N};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),ye={class:"space-y-4"},he={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},xe={class:"space-y-2"},_e={class:"main-container min-w-full prose prose-slate"},ke={class:"editor-container editor-container_balloon-editor",ref:"editorContainerElement"},Ne={class:"editor-container__editor"},De={ref:"editorElement"},we={key:0,class:"text-sm text-destructive"},Ee={class:"space-y-2"},He={key:0,class:"text-sm text-destructive"};function Se(y,t,h,e,u,v){const d=w("ckeditor"),a=w("VueDatePicker");return n(),c("form",{action:"post",class:"space-y-4 p-4",onSubmit:t[3]||(t[3]=O((...r)=>e.submitNoticeForm&&e.submitNoticeForm(...r),["prevent"]))},[i("div",ye,[i("div",he,[t[4]||(t[4]=i("label",{class:"block text-sm font-medium text-foreground"},"Title",-1)),P(i("input",{class:"w-full px-3 py-2 text-foreground bg-background border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors duration-200","onUpdate:modelValue":t[0]||(t[0]=r=>e.title=r),placeholder:"Notice title..."},null,512),[[I,e.title]]),e.errors.title?(n(),c("div",ve,f(e.errors.title),1)):m("",!0)]),i("div",xe,[t[5]||(t[5]=i("label",{class:"block text-sm font-medium text-foreground"},"Body",-1)),i("div",_e,[i("div",ke,[i("div",Ne,[i("div",De,[e.isLayoutReady?(n(),R(d,{key:0,modelValue:e.body,"onUpdate:modelValue":t[1]||(t[1]=r=>e.body=r),editor:e.editor,config:e.config,"tag-name":"textarea"},null,8,["modelValue","editor","config"])):m("",!0)],512)])],512)]),e.errors.body?(n(),c("div",we,f(e.errors.body),1)):m("",!0)]),i("div",Ee,[t[6]||(t[6]=i("label",{class:"block text-sm font-medium text-foreground"},"Expiration",-1)),j(a,{class:"w-full",modelValue:e.expiry,"onUpdate:modelValue":t[2]||(t[2]=r=>e.expiry=r),"min-date":e.minDateTime,placeholder:"Select Expiry Date"},null,8,["modelValue","min-date"]),e.errors.expiry?(n(),c("div",He,f(e.errors.expiry),1)):m("",!0)])]),t[7]||(t[7]=i("div",{class:"border-t border-border my-4"},null,-1)),t[8]||(t[8]=i("button",{type:"submit",class:"w-full px-4 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"}," Save Notice ",-1))],32)}const Me=q(be,[["render",Se],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/notice/NoticeForm.vue"]]);export{Me as default};
