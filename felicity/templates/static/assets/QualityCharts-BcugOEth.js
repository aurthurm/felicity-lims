const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-Cvm3ZCjW.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/ChartLJ-5eQAuEZQ.js","assets/index-Bq8gZhK2.js","assets/value-Cwgbb3dI.js","assets/string-CE8GzbCR.js"])))=>i.map(i=>d[i]);
import{Y as B,u as Q,ah as j,a7 as V,a0 as y,an as k,a5 as S,a6 as w,aH as M,_ as q,r as F,c as _,o as p,z as C,A as N,a as r,K as c,M as P,F as O,H as R}from"./index-OdhKCqIc.js";import{u as U}from"./analysis-PB9AMevg.js";import{E as z,a as I,b as J,c as Y,d as G}from"./EmptyTitle-aCQRDpx3.js";import{P as K}from"./PageHeading-Czi_4opS.js";const W=B({__name:"QualityCharts",setup(L,{expose:s}){s();const E=S(()=>w(()=>import("./vue-multiselect.esm-Cvm3ZCjW.js"),__vite__mapDeps([0,1,2]))),t=S(()=>w(()=>import("./ChartLJ-5eQAuEZQ.js"),__vite__mapDeps([3,1,2,4,5,6]))),u=U(),{withClientQuery:m}=Q();j(()=>{u.fetchAnalysesServices({})});const f=V(()=>u.getAnalysesServicesSimple),a=y([]),h=new Date;let o=y({month:h.getMonth(),year:h.getFullYear()}),d=y(null);const v=y(!1),g=async e=>{if(!o.value)return;const n={analyses:[e.uid],month:o.value.month+1,year:o.value.year};await m(M,n,"qcChartData").then(l=>{a.value=l??[]}).finally(()=>v.value=!1)},D=async e=>{if(!d.value)return;const n={analyses:[d.value?.uid],month:e.month+1,year:e.year};await m(M,n,"qcChartData").then(l=>{a.value=l??[]}).finally(()=>v.value=!1)},T=V(()=>a.value?x(A(a.value)):[]);function A(e){return e.reduce((n,l)=>{const i=l.sample.qcLevel.level;return n[i]||(n[i]={results:[],dates:[]}),n[i].results.push(parseFloat(l.result)),n[i].dates.push(l.dateVerified),n},{})}function x(e){return Object.entries(e).map(([n,l])=>({name:n,data:l.results.map((i,H)=>({date:l.dates[H],value:i}))}))}k(d,async e=>{e&&await g(e)}),k(o,async e=>{e&&await D(e)});const b={VueMultiselect:E,ChartLJ:t,analysisStore:u,withClientQuery:m,analysesServices:f,rawData:a,today:h,get selectedMonth(){return o},set selectedMonth(e){o=e},get selectedAnalyses(){return d},set selectedAnalyses(e){d=e},isLoading:v,handleAnalysisChange:g,handlePeriodChange:D,groupedChartData:T,groupQCDataByLevel:A,convertToChartSeries:x,get Empty(){return G},get EmptyContent(){return Y},get EmptyDescription(){return J},get EmptyHeader(){return I},get EmptyTitle(){return z},PageHeading:K};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),X={class:"min-h-[500px]"},Z={class:"flex justify-between"},$={class:"flex justify-start items-center gap-x-2"};function ee(L,s,E,t,u,m){const f=F("VueDatePicker");return p(),_("div",X,[C("div",Z,[r(t.PageHeading,{title:"Analyses Service Control Charts"}),C("div",$,[r(f,{class:"z-60 disabled:bg-muted",modelValue:t.selectedMonth,"onUpdate:modelValue":s[0]||(s[0]=a=>t.selectedMonth=a),"max-date":t.today,"month-picker":""},null,8,["modelValue","max-date"]),r(t.VueMultiselect,{class:"max-w-[300px]",modelValue:t.selectedAnalyses,"onUpdate:modelValue":s[1]||(s[1]=a=>t.selectedAnalyses=a),options:t.analysesServices,multiple:!1,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])])]),s[4]||(s[4]=C("hr",{class:"my-4"},null,-1)),t.groupedChartData?.length==0?(p(),N(t.Empty,{key:0,class:"py-6"},{default:c(()=>[r(t.EmptyContent,null,{default:c(()=>[r(t.EmptyHeader,null,{default:c(()=>[r(t.EmptyTitle,null,{default:c(()=>[...s[2]||(s[2]=[P("No data for this period",-1)])]),_:1}),r(t.EmptyDescription,null,{default:c(()=>[...s[3]||(s[3]=[P("The selected analysis has no data for the selected period.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):(p(!0),_(O,{key:1},R(t.groupedChartData,a=>(p(),_("div",{class:"mb-4",key:a.name},[r(t.ChartLJ,{title:a.name,series:a.data},null,8,["title","series"])]))),128))])}const le=q(W,[["render",ee],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/qcontrol/QualityCharts.vue"]]);export{le as default};
