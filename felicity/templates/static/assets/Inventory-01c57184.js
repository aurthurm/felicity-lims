import{d as f,I as k,r as l,p as u,g as t,B as o,m as x,F as p,e as m,x as w,v as _,j as n,_ as a}from"./index-fc86f1fc.js";import{u as S,A as T}from"./inventory-8d839f74.js";import{a as O}from"./storage-c684b9f3.js";import{u as I}from"./setup-c594dd58.js";import{u as C}from"./user-203c70d8.js";import"./_queries-be63b368.js";const B=n(()=>a(()=>import("./FelDrawer-daf7d341.js"),["assets/FelDrawer-daf7d341.js","assets/index-fc86f1fc.js","assets/index-246842b1.css"])),A=n(()=>a(()=>import("./index-fc86f1fc.js").then(e=>e.br),["assets/index-fc86f1fc.js","assets/index-246842b1.css"])),D=n(()=>a(()=>import("./InvAdjustments-7a9d7d1c.js"),["assets/InvAdjustments-7a9d7d1c.js","assets/index-fc86f1fc.js","assets/index-246842b1.css","assets/inventory-8d839f74.js"])),E=n(()=>a(()=>import("./InvListing-10f52bd1.js"),["assets/InvListing-10f52bd1.js","assets/index-fc86f1fc.js","assets/index-246842b1.css","assets/inventory-8d839f74.js"])),L=n(()=>a(()=>import("./InvOrders-6118f15a.js"),["assets/InvOrders-6118f15a.js","assets/index-fc86f1fc.js","assets/index-246842b1.css","assets/inventory-8d839f74.js","assets/setup-c594dd58.js","assets/_queries-be63b368.js","assets/constants-3670b8e1.js"])),j=f({name:"inventory-home",setup(){const{withClientMutation:e}=k(),r=S(),i=I(),b=O(),h=C();r.fetchItems({first:1e4,after:"",text:"",sortBy:["-uid"]}),h.fetchUsers({}),i.fetchSuppliers(),i.fetchDepartments({}),r.fetchCategories(),r.fetchHazards(),b.fetchStoreRooms(),r.fetchUnits();const d=l("orders"),y=l(["orders","products","ledger"]),g=u(()=>"tab-"+d.value),c=l(!1);return{currentTab:d,inventoryTabs:y,currentTabComponent:g,basket:u(()=>r.getBasket),viewBasket:c,inventoryStore:r,createOrder:()=>{const v=r.getBasket;e(T,{payload:{orderProducts:v.map(s=>({productUid:s.product.uid,stockLotUid:s.stockLotUid,quantity:s.quantity,remarks:""})),departmentUid:void 0}},"createStockOrder").then(s=>{r.addStockOrder(s?.stockOrder),r.clearBasket(),c.value=!1})}}},render(){return t(p,null,[t(A,{title:"Inventory Management"},null),t("section",{class:"col-span-12 mt-2"},[t("nav",{class:"flex justify-between bg-white shadow-md mt-2"},[t("div",{class:"-mb-px flex justify-start"},[this.inventoryTabs?.map(e=>t("a",{key:e,class:["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":this.currentTab===e}],onClick:()=>this.currentTab=e},[e]))]),this.basket.length>0&&t("button",{type:"button",class:"flex items-center mr-4",onClick:()=>this.viewBasket=!0},[t("span",{class:"mr-2"},[o("View")]),o(" "),t(x("font-awesome-icon"),{icon:"cart-shopping"},null)])]),t("div",null,[this.currentTab==="orders"&&t(L,null,null),this.currentTab==="products"&&t(E,null,null),this.currentTab==="ledger"&&t(D,null,null)]),t(B,{show:this.viewBasket,onClose:()=>this.viewBasket=!1},{header:()=>"Your Order Basket",body:()=>t(p,null,[t("div",{class:"overflow-x-auto mt-2 mb-4"},[t("div",{class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},[t("table",{class:"min-w-full"},[t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},[o("Product Name")]),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},[o("Lot Number")]),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},[o("Quantity")]),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null)])]),t("tbody",{class:"bg-white"},[this.basket.map(e=>m(t("tr",{key:e.product.uid},[t("td",null,[t("p",null,[e.product.name])]),t("td",null,[t("p",null,[e.stockLot?.lotNumber])]),t("td",{class:"px-1 py-1 whitespace-no-wrap"},[t("label",{class:"block"},[m(t("input",{class:"form-input",type:"number","onUpdate:modelValue":r=>e.quantity=r,placeholder:e.quantity},null),[[_,e.quantity]])])]),t("td",{class:"px-1 whitespace-no-wrap"},[t("button",{type:"button",class:"bg-sky-800 text-white rounded-sm leading-none px-2 py-1",onClick:()=>this.inventoryStore.removeFromBasket(e.product.uid)},[o("Remove")])])]),[[w("motion-slide-right")]]))])])])]),t("hr",null,null),t("button",{type:"button",class:"mt-4 bg-sky-800 text-white rounded-sm leading-none px-2 py-1",onClick:()=>this.createOrder()},[o("Create Order")])]),footer:()=>[]})])])}});export{j as InventoryHome,j as default};
