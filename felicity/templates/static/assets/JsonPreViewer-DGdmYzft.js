import{Y as D,a0 as _,an as J,a3 as K,_ as U,c as M,o as x,z as p,I as k,A as T,C as q,K as V,M as H,N as S}from"./index-OdhKCqIc.js";const Y=D({__name:"JsonPreViewer",props:{data:{type:null,required:!0},wrapper:{type:String,required:!1,default:""},copyable:{type:Boolean,required:!1,default:!0},expandable:{type:Boolean,required:!1,default:!0},theme:{type:String,required:!1,default:"light"},title:{type:String,required:!1,default:"JSON Preview"}},setup(j,{expose:f}){f();const l=j,r=_(null),h=_(!1),m=_(!1),L=`json-preview-${Math.random().toString(36).slice(2,11)}`;function P(){h.value=!h.value}async function z(){try{await navigator.clipboard.writeText(JSON.stringify(l.data,null,2)),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch{}}function v(a,e){const t=l.theme==="dark"?"dark":"light";new B({container:e,data:JSON.stringify(a),theme:t,expand:h.value})}J(()=>l.data,a=>{r.value&&(r.value.innerHTML="",a&&Object.keys(a).length>0&&v(a,r.value))},{immediate:!0}),J(()=>h.value,a=>{r.value&&l.data&&(r.value.innerHTML="",v(l.data,r.value))});const b=Object.prototype.toString;function A(a){return typeof a=="number"}function E(a){return typeof a=="boolean"}function N(a){return typeof a>"u"}function w(a){return b.call(a)==="[object Array]"}function C(a){return b.call(a)==="[object Object]"}function O(a){return b.call(a)==="[object Null]"}class B{options;constructor(e){const t={theme:"light",container:null,data:"{}",expand:!1};if(this.options=Object.assign(t,e),!e.container)throw new Error("Container: dom element is required");this.render()}renderRight(e,t,n){A(n)?t.setAttribute("class",e+"rightNumber"):E(n)?t.setAttribute("class",e+"rightBoolean"):n==="null"?t.setAttribute("class",e+"rightNull"):t.setAttribute("class",e+"rightString"),t.innerText=n}renderChildren(e,t,n,s,d,i){const o=this.createElement("span"),c=this.options.expand?"rotate90":"",u=this.options.expand?"add-height":"";o.setAttribute("class",e+"folder "+c),o.onclick=y=>{const R=y.target.parentNode?.nextSibling;this.toggleItem(R,y.target)};const g=C(n)?Object.keys(n).length:n.length;i.innerHTML=C(n)?t+"&nbsp;&nbsp{"+g+"}":t+"&nbsp;&nbsp["+g+"]",i.prepend(o),s.setAttribute("class",e+"rightObj "+u),this.parse(n,s,d+0,e)}parse(e,t,n,s){this.forEach(e,(d,i)=>{const{left:o,right:c}=this.createItem(n,s,t,i,typeof d!="object");typeof d!="object"?this.renderRight(s,c,d):this.renderChildren(s,i,d,c,n,o)})}createItem(e,t,n,s,d){const i=this.createElement("div"),o=this.createElement("div"),c=this.createElement("div"),u=this.createElement("div");return i.style.marginLeft=e*2+"px",o.innerHTML=`${s}<span class="jv-${t}-symbol">&nbsp;:&nbsp;</span>`,d?(i.appendChild(u),u.appendChild(o),u.appendChild(c),n.appendChild(i),i.setAttribute("class",t+"current"),u.setAttribute("class","jv-wrap"),o.setAttribute("class",t+"left")):(i.appendChild(o),i.appendChild(c),n.appendChild(i),i.setAttribute("class",t+"current"),o.setAttribute("class",t+"left jv-folder"),o.onclick=g=>{const y=g.target.nextSibling;this.toggleItem(y,g.target.querySelector("span"))}),{left:o,right:c,current:i}}render(){const e=this.options.data,t="jv-"+this.options.theme+"-",n=0,s=this.options.container;let d="object",i;s.setAttribute("class",t+"con");try{i=JSON.parse(e)}catch{throw new Error("It is not a json format")}w(i)&&(d="array");const{left:o,right:c}=this.createItem(n,t,s,d,!1);this.renderChildren(t,d,i,c,n,o)}toggleItem(e,t){e.classList.toggle("add-height"),t.classList.toggle("rotate90")}createElement(e){return document.createElement(e)}forEach(e,t){if(!(N(e)||O(e)))if(typeof e=="object"&&w(e))for(let n=0,s=e.length;n<s;n++)t.call(null,e[n],n.toString(),e);else for(const n in e)e.hasOwnProperty(n)&&t.call(null,e[n],n,e)}}const I={props:l,jsonContainer:r,expanded:h,copied:m,containerId:L,toggleExpand:P,copyToClipboard:z,renderJson:v,toString:b,isNumber:A,isBoolean:E,isUndefined:N,isArray:w,isObject:C,isNull:O,JsonViewer:B,get Button(){return K}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),F={class:"mb-2 flex items-center justify-between"},G={class:"text-sm font-medium text-card-foreground"},Q={class:"flex items-center space-x-2"},W=["aria-label"];function X(j,f,l,r,h,m){return x(),M("div",{class:S(["w-full rounded-lg border border-border bg-card p-4",l.wrapper])},[p("div",F,[p("h3",G,k(l.title),1),p("div",Q,[l.copyable?(x(),T(r.Button,{key:0,size:"sm",variant:"ghost",onClick:r.copyToClipboard,"aria-label":r.copied?"Copied to clipboard":"Copy to clipboard"},{default:V(()=>[f[0]||(f[0]=p("svg",{class:"mr-1 h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)),H(" "+k(r.copied?"Copied":"Copy"),1)]),_:1},8,["aria-label"])):q("",!0),l.expandable?(x(),T(r.Button,{key:1,size:"sm",variant:"ghost",onClick:r.toggleExpand,"aria-expanded":r.expanded,"aria-controls":r.containerId},{default:V(()=>[(x(),M("svg",{class:S(["mr-1 h-3 w-3 transition-transform duration-200",{"rotate-180":r.expanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[...f[1]||(f[1]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),H(" "+k(r.expanded?"Collapse":"Expand"),1)]),_:1},8,["aria-expanded"])):q("",!0)])]),p("div",{ref:"jsonContainer",id:r.containerId,class:S(["overflow-auto rounded-md bg-muted p-4 font-mono text-sm",{"max-h-96":!r.expanded}]),role:"region","aria-label":`JSON preview of ${l.title}`,tabindex:"0"},null,10,W)],2)}const $=U(Y,[["render",X],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/common/JsonPreViewer.vue"]]);export{$ as default};
