import{P as $,u as q,h as k,f as z,Z as K,$ as w,o as a,c as i,b as e,A as l,F as h,D as g,E as n,a2 as u,a4 as O,a as y,K as S,L as C,z as A,C as U,W as b,X as W,Y as X,_ as Y}from"./index-fa13e788.js";import D from"./FelButton-1d1ff19a.js";import{u as Z}from"./shipment-8941e0a0.js";import{u as G}from"./shipment-e93d6fc4.js";const H={class:"overflow-x-auto mt-4"},J={action:"post",class:"p-1"},Q={class:"flex justify-start mb-4"},ee={class:"flex justify-between items-center"},te=e("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Sample Type",-1),se=["value"],oe={class:"ml-6 mt-2"},ae={class:"overflow-x-auto mt-4"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},ne={key:0,class:"py-4 text-center"},re={key:1,class:"min-w-full"},le={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},de=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1),ce=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1),pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample Type ",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Sample ID ",-1),ue=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1),_e=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1),me=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1),ge=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1),ye={class:"bg-white"},be=["onUpdate:modelValue","onChange"],fe=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ve={class:"text-sm leading-5 text-sky-800 font-semibold"},ke={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},we={class:"text-sm leading-5 text-sky-800 font-semibold"},Se={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ce={class:"text-sm leading-5 text-sky-800 font-semibold"},Ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ue={class:"text-sm leading-5 text-sky-800"},De=["onUpdate:modelValue","disabled"],Ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Te={class:"text-sm leading-5 text-sky-800"},Re={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Fe={class:"text-sm leading-5 text-sky-800"},Ee={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Be={class:"text-sm leading-5 text-sky-800"},Ie={class:"my-4"},Le=$({__name:"ShipmentAssign",setup(Me){const V=W(()=>X(()=>import("./FelLoadingMessage-c4848162.js"),["assets/FelLoadingMessage-c4848162.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"])),d=Z(),f=q(),{manageSamples:T}=G();d.fetchReferralLaboratories();const R=k(()=>d.getShipment);f.fetchSampleTypes();const _=z({sampleTypeUid:void 0,analysisUid:void 0}),c=K(!1),x=k(()=>{const t=[];return d.getSamples?.forEach(p=>{t?.some(m=>m.uid===p.uid)||t.push(p)}),t}),F=()=>{v(),d.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,..._})},E=()=>{const t=B();T(R?.value?.uid,t,"assign")};function v(){return d.samples?.filter(t=>t.checked)}function B(){return v().map(t=>({sampleUid:t.uid,shipedSampleUid:void 0,analyses:t.analysisResults?.filter(o=>o.checked)?.map(o=>o.uid)}))?.filter(t=>t?.analyses?.length>0)}function I(t){N()?c.value=!0:c.value=!1}function L(t){t.checked=!0}function M(t){t.checked=!1}async function j(){await x?.value?.forEach(t=>c.value?L(t):M(t))}function N(){return x?.value?.every(t=>t.checked===!0)}return(t,o)=>{const p=w("motion-slide-left"),m=w("motion-slide-right");return a(),i(h,null,[e("div",H,[l((a(),i("form",J,[e("div",Q,[e("label",ee,[te,l(e("select",{name:"analyses_uids","onUpdate:modelValue":o[0]||(o[0]=s=>_.sampleTypeUid=s),class:"form-input mt-1 block w-full py-1"},[(a(!0),i(h,null,g(u(f).sampleTypes,s=>(a(),i("option",{key:s.uid,value:s.uid},n(s.name),9,se))),128))],512),[[O,_.sampleTypeUid]])]),e("div",oe,[l(y(D,{onClick:o[1]||(o[1]=A(s=>F(),["prevent"])),color:"sky-800",class:"p-1"},{default:S(()=>[C("Apply Filters")]),_:1},512),[[U,!0]])])])])),[[p]])]),e("div",ae,[e("div",ie,[u(d).fetchingSamples?(a(),i("div",ne,[y(u(V),{message:"Fetching samples ..."})])):(a(),i("table",re,[e("thead",null,[e("tr",null,[e("th",le,[l(e("input",{type:"checkbox",onChange:j,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s)},null,544),[[b,c.value]])]),de,ce,pe,he,ue,_e,me,ge])]),l((a(),i("tbody",ye,[(a(!0),i(h,null,g(u(d).samples,s=>(a(),i("tr",{key:s?.uid},[e("td",null,[l(e("input",{type:"checkbox","onUpdate:modelValue":r=>s.checked=r,onChange:r=>I()},null,40,be),[[b,s.checked]])]),fe,e("td",xe,[e("div",ve,n(s?.sampleId),1)]),e("td",ke,[e("div",we,n(s?.sampleType?.name),1)]),e("td",Se,[e("div",Ce,n(s?.analysisRequest?.clientRequestId),1)]),e("td",Ae,[e("div",Ue,[e("ul",null,[(a(!0),i(h,null,g(s?.analysisResults,r=>(a(),i("li",{class:"flex justify-start items-center",key:r.uid},[l(e("input",{type:"checkbox","onUpdate:modelValue":P=>r.checked=P,class:"mr-2",disabled:!s.checked},null,8,De),[[b,r.checked]]),e("span",null,n(r?.analysis?.name),1),e("span",null,n(r?.status),1)]))),128))])])]),e("td",Ve,[e("div",Te,n(s?.createdAt),1)]),e("td",Re,[e("div",Fe,n(s?.dateReceived),1)]),e("td",Ee,[e("div",Be,n(s?.status),1)])]))),128))])),[[m]])]))])]),e("section",Ie,[l(y(D,{onClick:A(E,["prevent"]),color:"orange-600"},{default:S(()=>[C("Assign Samples")]),_:1},512),[[U,!0]])])],64)}}}),qe=Y(Le,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{qe as default};
