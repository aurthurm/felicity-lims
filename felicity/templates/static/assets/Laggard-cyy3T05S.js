import{a0 as I,ap as A,a7 as y,ad as L,a5 as w,_ as S,r as F,c as f,o as h,E as k,A as t,a as B,L as g}from"./index-Daoe3XS9.js";import{C as x}from"./index-CtZXlKlF.js";import{u as N}from"./dashboard--zvjQWHL.js";import"./index-BkD7Hj8s.js";import"./ticks-yQcwDFE8.js";import"./arc-B8IjlRao.js";import"./rgb-Co1IAoj1.js";import"./math-CyDA0WRY.js";import"./index-DaJBD5B5.js";import"./defaultLocale-D2nGpDRe.js";import"./Tableau10-1LCcg9PS.js";import"./range-OtVwhkKS.js";const j=I({__name:"Laggard",setup(_,{expose:o}){o();const i=N(),{dashboard:s}=A(i),c=y(0),u=y(0);L(()=>{i.getSampleLaggards()}),w(()=>s.value.laggards,(n,d)=>{const a=n?.filter(p=>p?.category==="delayed_and_incomplete")[0],e=n?.filter(p=>p?.category==="authorised_already_delayed")[0];c.value=a?.counts?.totalIncomplete??0;const r=[{item:"On-Time",count:a?.counts?.totalDelayed,percent:a?.counts?.totalIncomplete>0?a?.counts?.totalDelayed/a?.counts?.totalIncomplete*100:0},{item:"Delayed",count:a?.counts?.totalNotDelayed,percent:a?.counts?.totalIncomplete>0?a?.counts?.totalNotDelayed/a?.counts?.totalIncomplete*100:0}];m(r,"late-active-donut");const b=[{type:"<10",value:a?.counts?.lessThanTen},{type:"10 - 20",value:a?.counts?.tenToTwenty},{type:"20 - 30",value:a?.counts?.twentyToThirty},{type:"> 30",value:a?.counts?.graterThanThirty}];l(b,"late-active-since","days since created","number of samples"),u.value=e?.counts?.totalIncomplete??0;const D=[{item:"On-Time",count:e?.counts?.totalDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalDelayed/e?.counts?.totalIncomplete*100:0},{item:"Delayed",count:e?.counts?.totalNotDelayed,percent:e?.counts?.totalIncomplete>0?e?.counts?.totalNotDelayed/e?.counts?.totalIncomplete*100:0}];m(D,"late-auth-donut");const T=[{type:"<10",value:e?.counts?.lessThanTen},{type:"10 - 20",value:e?.counts?.tenToTwenty},{type:"20 - 30",value:e?.counts?.twentyToThirty},{type:"> 30",value:e?.counts?.graterThanThirty}];l(T,"late-auth-since","days: created to authorised","number of samples")});const l=(n,d,a,e)=>{const r=new x({container:d,autoFit:!0,height:200,width:600});r.options({type:"interval",data:n,coordinate:{transform:[{type:"transpose"}]},encode:{x:"type",y:"value",size:26},scale:{value:{domain:[0,150]}},axis:{x:{title:a,titleFontSize:12,titleFontWeight:300,titleSpacing:60,line:!1,tickLine:!1},y:{title:e,titleFontSize:12,titleFontWeight:300,titleSpacing:30,label:!1}},legend:!1,labels:[{text:"value",position:"right",dx:10,style:{fill:"hsl(var(--muted-foreground))"}}],interaction:{elementHighlight:!0}}),r.render()},m=(n,d)=>{const a=new x({container:d,autoFit:!0,height:150,width:300});a.options({type:"interval",data:n,coordinate:{type:"theta",innerRadius:.6,outerRadius:.75},encode:{y:"percent",color:"item"},transform:[{type:"stackY"}],scale:{color:{type:"ordinal"}},legend:!1,tooltip:{title:!1,items:[e=>({name:e.item,value:`${(e.percent*100).toFixed(2)}%`})]},labels:[{text:e=>`${e.item}: ${(e.percent*100).toFixed(2)}%`}],interaction:{elementHighlight:!0}}),a.render()},v={dashBoardStore:i,dashboard:s,totalIncompleteDAI:c,totalIncompleteAAD:u,plotLateSince:l,plotLateDonut:m,resetLateActive:()=>{const n=document.getElementById("late-active");n&&(n.innerHTML=`
      <div class="mx-8">
        <div id="late-active-donut"></div>
      </div>
      <div>
        <div id="late-active-since"></div>
      </div>
    `)},resetLateAuth:()=>{const n=document.getElementById("late-auth");n&&(n.innerHTML=`
      <div class="mx-8">
        <div id="late-auth-donut"></div>
      </div>
      <div>
        <div id="late-auth-since"></div>
      </div>
    `)}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),C={class:"mt-4"},E={key:0,class:"text-start my-4"},H={class:"flex justify-start items-center"},$={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},z={class:"font-bold text-foreground text-2xl"},M={class:"mt-8"},O={class:"flex justify-start items-center"},R={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},V={class:"font-bold text-foreground text-2xl"};function W(_,o,i,s,c,u){const l=F("fel-loader");return h(),f("div",C,[s.dashboard.fetchingLaggards?(h(),f("div",E,[B(l,{message:"Fetching laggard stats..."})])):k("",!0),t("section",null,[o[2]||(o[2]=t("h1",{class:"text-xl text-foreground font-semibold"},"Delayed and incomplete",-1)),o[3]||(o[3]=t("hr",{class:"my-2"},null,-1)),t("div",H,[t("div",$,[t("div",z,g(s.totalIncompleteDAI),1),o[0]||(o[0]=t("div",{class:"font-semibold text-muted-foreground"},"Already Delayed",-1))]),o[1]||(o[1]=t("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[t("div",{class:"me-8"},[t("div",{id:"late-active-donut"})]),t("div",null,[t("div",{id:"late-active-since"})])],-1))])]),t("section",M,[o[6]||(o[6]=t("h1",{class:"text-xl text-foreground font-semibold"},"Authorised already delayed",-1)),o[7]||(o[7]=t("hr",{class:"my-2"},null,-1)),t("div",O,[t("div",R,[t("div",V,g(s.totalIncompleteAAD),1),o[4]||(o[4]=t("div",{class:"font-semibold text-muted-foreground"},"Authorised Already Delayed",-1))]),o[5]||(o[5]=t("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[t("div",{class:"me-8"},[t("div",{id:"late-auth-donut"})]),t("div",null,[t("div",{id:"late-auth-since"})])],-1))])])])}const nt=S(j,[["render",W],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{nt as default};
