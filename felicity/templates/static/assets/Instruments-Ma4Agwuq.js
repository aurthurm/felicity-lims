import{Y,u as O,a0 as T,a7 as C,a3 as G,_ as J,r as c,c as S,o as s,z as y,A as F,C as H,a as t,K as r,M as o,F as I,H as E,I as p,B as Q,a4 as B,aK as V,aL as h}from"./index-OdhKCqIc.js";import{c as W,d as X}from"./instrument.mutations-BxEMyJNC.js";import{u as Z}from"./setup-BcFG_bXr.js";import{c as j,a as b,u as $,F as ee}from"./index.esm-BfHj8iGm.js";import{I as te}from"./Input-BEm5S0CJ.js";import{T as re}from"./Textarea-T3VcJTEo.js";import{F as ne,a as le,b as ae}from"./FormMessage-CgXFMXx9.js";import{F as oe}from"./FormLabel-DxP9wnWS.js";import{S as de,a as ue,b as me,c as ie,d as se}from"./SelectValue-Ds0cfAgl.js";import{E as fe,a as ce,b as pe,c as ge,d as _e}from"./EmptyTitle-aCQRDpx3.js";import{P as ye}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const Fe=Y({name:"InstrumentsView",__name:"Instruments",setup(P,{expose:n}){n();const u=Z(),{withClientMutation:e}=O();let M=T("view");const A=["view","configs"];let f=T(!1),g=T("");const _=T(!0),m=T(null),w=j({name:b().required("Name is required"),keyword:b().required("Keyword is required"),description:b().nullable(),instrumentTypeUid:b().nullable(),manufacturerUid:b().nullable(),supplierUid:b().nullable()}),{handleSubmit:x,resetForm:U,setValues:v}=$({validationSchema:w,initialValues:{name:"",keyword:"",description:"",instrumentTypeUid:null,manufacturerUid:null,supplierUid:null}});u.fetchInstrumentTypes();const a=C(()=>u.getInstrumentTypes);u.fetchInstruments();const d=C(()=>u.getInstruments);u.fetchManufacturers();const R=C(()=>u.getManufacturers);u.fetchSuppliers();const q=C(()=>u.getSuppliers);function L(l){const i={name:l.name,keyword:l.keyword,description:l.description,instrumentTypeUid:l.instrumentTypeUid,manufacturerUid:l.manufacturerUid,supplierUid:l.supplierUid};e(W,{payload:i},"createInstrument").then(k=>u.addInstrument(k))}function N(l){if(!m.value)return;const i={name:l.name,keyword:l.keyword,description:l.description,instrumentTypeUid:l.instrumentTypeUid,manufacturerUid:l.manufacturerUid,supplierUid:l.supplierUid};e(X,{uid:m.value,payload:i},"updateInstrument").then(k=>u.updateInstrument(k))}function K(l,i={}){_.value=l,f.value=!0,g.value=(l?"CREATE":"EDIT")+" ANALYSES INSTRUMENT",l?(m.value=null,U({values:{name:"",keyword:"",description:"",instrumentTypeUid:null,manufacturerUid:null,supplierUid:null}})):(m.value=i.uid??null,v({name:i.name??"",keyword:i.keyword??"",description:i.description??"",instrumentTypeUid:i.instrumentTypeUid??null,manufacturerUid:i.manufacturerUid??null,supplierUid:i.supplierUid??null}))}const z=x(l=>{_.value===!0&&L(l),_.value===!1&&N(l),f.value=!1}),D={setupStore:u,withClientMutation:e,get currentTab(){return M},set currentTab(l){M=l},tabs:A,get showModal(){return f},set showModal(l){f=l},get formTitle(){return g},set formTitle(l){g=l},formAction:_,currentUid:m,formSchema:w,handleSubmit:x,resetForm:U,setValues:v,instrumentTypes:a,instruments:d,manufacturers:R,suppliers:q,addInstrument:L,editInstrument:N,FormManager:K,saveForm:z,get Button(){return G},get Input(){return te},get Textarea(){return re},get FormControl(){return ae},get FormField(){return ee},get FormItem(){return le},get FormLabel(){return oe},get FormMessage(){return ne},get Select(){return se},get SelectContent(){return ie},get SelectItem(){return me},get SelectTrigger(){return ue},get SelectValue(){return de},get Empty(){return _e},get EmptyContent(){return ge},get EmptyDescription(){return pe},get EmptyHeader(){return ce},get EmptyTitle(){return fe},PageHeading:ye};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),be={class:"space-y-6"},Te={class:"border border-border bg-card rounded-lg shadow-md"},Se={class:"relative w-full overflow-auto"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"flex justify-end pt-2"};function xe(P,n,u,e,M,A){const f=c("TableHead"),g=c("TableRow"),_=c("TableHeader"),m=c("TableCell"),w=c("TableEmpty"),x=c("TableBody"),U=c("Table"),v=c("Modal");return s(),S(I,null,[y("div",be,[t(e.PageHeading,{title:"Instruments"},{default:r(()=>[t(e.Button,{onClick:n[0]||(n[0]=a=>e.FormManager(!0))},{default:r(()=>[...n[3]||(n[3]=[o(" Add Instrument",-1)])]),_:1})]),_:1}),y("div",Te,[y("div",Se,[t(U,{class:"w-full caption-bottom text-sm"},{default:r(()=>[t(_,{class:"[&_tr]:border-b"},{default:r(()=>[t(g,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[t(f,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...n[4]||(n[4]=[o("Name",-1)])]),_:1}),t(f,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...n[5]||(n[5]=[o("Type",-1)])]),_:1}),t(f,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...n[6]||(n[6]=[o("Manufacturer",-1)])]),_:1}),t(f,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...n[7]||(n[7]=[o("Supplier",-1)])]),_:1}),t(f,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:r(()=>[...n[8]||(n[8]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(x,{class:"[&_tr:last-child]:border-0"},{default:r(()=>[(s(!0),S(I,null,E(e.instruments,a=>(s(),F(g,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[t(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:r(()=>[o(p(a?.name),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:r(()=>[o(p(a?.instrumentType?.name),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:r(()=>[o(p(a?.manufacturer?.name),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:r(()=>[o(p(a?.supplier?.name),1)]),_:2},1024),t(m,{class:"px-4 py-3 align-middle text-right"},{default:r(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:d=>e.FormManager(!1,a)},{default:r(()=>[...n[9]||(n[9]=[o(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e.instruments||e.instruments.length===0?(s(),F(w,{key:0,colspan:5},{default:r(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:r(()=>[t(e.EmptyContent,null,{default:r(()=>[t(e.EmptyHeader,null,{default:r(()=>[t(e.EmptyTitle,null,{default:r(()=>[...n[10]||(n[10]=[o("No instruments found",-1)])]),_:1}),t(e.EmptyDescription,null,{default:r(()=>[...n[11]||(n[11]=[o("Add an instrument to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):H("",!0)]),_:1})]),_:1})])])]),e.showModal?(s(),F(v,{key:0,onClose:n[2]||(n[2]=a=>e.showModal=!1),title:e.formTitle},{body:r(()=>[y("form",{onSubmit:n[1]||(n[1]=Q((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-6"},[y("div",Ie,[t(e.FormField,{name:"name"},{default:r(({componentField:a})=>[t(e.FormItem,{class:"md:col-span-2"},{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[12]||(n[12]=[o("Instrument Name",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,B(a,{placeholder:"Enter instrument name"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"keyword"},{default:r(({componentField:a})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[13]||(n[13]=[o("Keyword",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,B(a,{placeholder:"Enter keyword"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"instrumentTypeUid"},{default:r(({componentField:a})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[14]||(n[14]=[o("Instrument Type",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Select,V(h(a)),{default:r(()=>[t(e.SelectTrigger,null,{default:r(()=>[t(e.SelectValue,{placeholder:"Select instrument type"})]),_:1}),t(e.SelectContent,null,{default:r(()=>[(s(!0),S(I,null,E(e.instrumentTypes,d=>(s(),F(e.SelectItem,{key:d?.uid,value:d.uid},{default:r(()=>[o(p(d?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"manufacturerUid"},{default:r(({componentField:a})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[15]||(n[15]=[o("Manufacturer",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Select,V(h(a)),{default:r(()=>[t(e.SelectTrigger,null,{default:r(()=>[t(e.SelectValue,{placeholder:"Select manufacturer"})]),_:1}),t(e.SelectContent,null,{default:r(()=>[(s(!0),S(I,null,E(e.manufacturers,d=>(s(),F(e.SelectItem,{key:d?.uid,value:d.uid},{default:r(()=>[o(p(d?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"supplierUid"},{default:r(({componentField:a})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[16]||(n[16]=[o("Supplier",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Select,V(h(a)),{default:r(()=>[t(e.SelectTrigger,null,{default:r(()=>[t(e.SelectValue,{placeholder:"Select supplier"})]),_:1}),t(e.SelectContent,null,{default:r(()=>[(s(!0),S(I,null,E(e.suppliers,d=>(s(),F(e.SelectItem,{key:d?.uid,value:d.uid},{default:r(()=>[o(p(d?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:r(({componentField:a})=>[t(e.FormItem,{class:"md:col-span-2"},{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...n[17]||(n[17]=[o("Description",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Textarea,B(a,{placeholder:"Enter description"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),y("div",we,[t(e.Button,{type:"submit"},{default:r(()=>[o(p(e.formAction?"Create":"Update")+" Instrument ",1)]),_:1})])],32)]),_:1},8,["title"])):H("",!0)],64)}const qe=J(Fe,[["render",xe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/Instruments.vue"]]);export{qe as default};
