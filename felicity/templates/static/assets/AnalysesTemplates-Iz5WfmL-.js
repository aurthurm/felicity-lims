import{a0 as J,f as K,a7 as h,g as Q,h as M,_ as R,r as T,c as r,o as a,A as e,C as Y,E as x,a as E,N as f,P as V,J as g,K as _,Q as w,D as j,L as d,F as k,a3 as q,a2 as N,a9 as G}from"./index-C5OmCQ1r.js";import{m as H,n as W}from"./analyses.mutations-COGCX6rV.js";import{u as X}from"./setup-BMS7aX7t.js";import{u as Z}from"./analysis-CQxuKvI2.js";const $=J({__name:"AnalysesTemplates",setup(F,{expose:s}){s();const c=Z(),o=X(),{withClientMutation:v}=K();let A=h("analyses-services");const S=["analyses-services"];let u=h(!1),y=h("");const m=h(!0);let t=Q({});const i=M(()=>o.getDepartments);c.fetchAnalysesServices({}),c.fetchAnalysesTemplates();const b=M(()=>c.getAnalysesServices),B=M(()=>c.getAnalysesTemplates);function U(){const n={name:t.name,description:t.description,departmentUid:t.departmentUid};v(H,{payload:n},"createAnalysisTemplate").then(l=>c.addAnalysisTemplate(l))}function C(){const n={name:t.name,description:t.description,departmentUid:t.departmentUid,active:t.active,services:t.analyses?.map(l=>l.uid)};v(W,{uid:t.uid,payload:n},"updateAnalysisTemplate").then(l=>c.updateAnalysesTemplate(l))}function L(n){Object.assign(t,{...n}),b.value?.forEach(l=>{l[1].forEach(p=>{p.checked=!1,n.analyses?.some(I=>I.uid===p.uid)&&(p.checked=!0)})})}function z(){const n=[];b.value?.forEach(l=>{l[1].forEach(p=>{p.checked&&n.push(p)})}),t.analyses=n,C()}function O(n,l={}){m.value=n,u.value=!0,y.value=(n?"CREATE":"EDIT")+" ANALYSES TEMPLATE",n?Object.assign(t,{}):Object.assign(t,{...l})}function P(){m.value===!0&&U(),m.value===!1&&C(),u.value=!1}const D={analysisStore:c,setupStore:o,withClientMutation:v,get currentTab(){return A},set currentTab(n){A=n},tabs:S,get showModal(){return u},set showModal(n){u=n},get formTitle(){return y},set formTitle(n){y=n},formAction:m,get analysisTemplate(){return t},set analysisTemplate(n){t=n},departments:i,analysesServices:b,analysesTemplates:B,addAnalysisTemplate:U,editAnalysisTemplate:C,select:L,updateTemplate:z,FormManager:O,saveForm:P};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),ee={class:"space-y-6"},te={class:"grid grid-cols-12 gap-6"},se={class:"col-span-3"},oe={class:"rounded-lg border border-border bg-card"},ne={class:"overflow-y-auto max-h-[540px] p-2"},ae={class:"space-y-1"},re=["onClick"],le={class:"flex items-center justify-between"},ie={class:"text-sm font-medium"},de={key:0,class:"text-xs text-muted-foreground"},ce={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},ue={key:0,class:"col-span-9"},me={class:"space-y-6"},pe={class:"rounded-lg border border-border bg-card p-6"},fe={class:"flex items-center justify-between"},ge={class:"space-y-1"},ye={class:"text-xl font-semibold text-foreground"},be={key:0,class:"text-sm text-muted-foreground"},xe={class:"flex items-center space-x-2"},_e={class:"border-b border-border"},ve={class:"flex space-x-2"},he=["onClick"],Te={class:"rounded-lg border border-border bg-card"},ke={class:"p-6"},we={key:0},Ae={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Se={class:"grid grid-cols-6 gap-2 w-full"},Ce={class:"grow p-1"},Me={class:w(["font-medium text-gray-500 hover:text-gray-700",{"text-gray-700 font-medium":!1}])},Ee=["id","onUpdate:modelValue"],Ue=["for"],De={key:1,class:"col-span-9"},Ve={class:"text-xl font-semibold text-foreground"},je={class:"space-y-4"},Ne={class:"space-y-2"},Fe={class:"space-y-2"},Be=["value"],Le={class:"space-y-2"};function ze(F,s,c,o,v,A){const S=T("fel-button"),u=T("fel-heading"),y=T("fel-accordion"),m=T("fel-modal");return a(),r(g,null,[e("div",ee,[E(u,{title:"Analyses Templates"},{default:f(()=>[E(S,{onClick:s[0]||(s[0]=t=>o.FormManager(!0))},{default:f(()=>[...s[7]||(s[7]=[V("Add Analyses Template",-1)])]),_:1})]),_:1}),e("div",te,[e("section",se,[e("div",oe,[s[8]||(s[8]=e("div",{class:"p-4 border-b border-border"},[e("h3",{class:"text-sm font-medium text-muted-foreground"},"Templates")],-1)),e("div",ne,[e("ul",ae,[(a(!0),r(g,null,_(o.analysesTemplates,t=>(a(),r("li",{key:t.uid,onClick:j(i=>o.select(t),["prevent","stop"]),class:w(["rounded-md p-2 cursor-pointer transition-colors duration-200",t?.uid===o.analysisTemplate?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[e("div",le,[e("span",ie,d(t?.name),1),t?.department?.name?(a(),r("span",de,d(t?.department?.name),1)):x("",!0)]),t?.description?(a(),r("p",ce,d(t?.description),1)):x("",!0)],10,re))),128))])])])]),o.analysisTemplate?.uid!==void 0?(a(),r("section",ue,[e("div",me,[e("div",pe,[e("div",fe,[e("div",ge,[e("h2",ye,d(o.analysisTemplate?.name),1),o.analysisTemplate?.description?(a(),r("p",be,d(o.analysisTemplate?.description),1)):x("",!0)]),e("div",xe,[e("button",{onClick:s[1]||(s[1]=t=>o.FormManager(!1)),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},[...s[9]||(s[9]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])])])])]),e("nav",_e,[e("div",ve,[(a(),r(g,null,_(o.tabs,t=>e("button",{key:t,class:w(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",o.currentTab===t?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:i=>o.currentTab=t},d(t),11,he)),64))])]),e("div",Te,[e("div",ke,[o.currentTab==="analyses-services"?(a(),r("div",we,[s[11]||(s[11]=e("h3",null,"Analyses",-1)),s[12]||(s[12]=e("hr",null,null,-1)),e("section",Ae,[e("div",Se,[(a(!0),r(g,null,_(o.analysesServices,t=>(a(),r("div",{class:"col-span-2",key:t[0]},[E(y,null,{title:f(()=>[V(d(t[0]),1)]),body:f(()=>[e("div",null,[e("ul",null,[(a(!0),r(g,null,_(t[1],i=>(a(),r("li",{key:i?.uid,class:w(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]])},[e("div",Ce,[e("div",Me,[k(e("input",{type:"checkbox",id:`toggle-${i?.uid}`,class:"form-control","onUpdate:modelValue":b=>i.checked=b},null,8,Ee),[[q,i.checked]]),e("label",{for:`toggle-${i?.uid}`,class:"text-gray-700 ml-4"},d(i?.name),9,Ue)])]),s[10]||(s[10]=e("hr",null,null,-1))]))),128))])])]),_:2},1024)]))),128))]),e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:s[2]||(s[2]=t=>o.updateTemplate())}," Update Template ")])])):x("",!0)])])])])):(a(),r("section",De,[...s[13]||(s[13]=[e("div",{class:"rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"},[e("div",{class:"text-4xl text-muted-foreground"},"ðŸ“‹"),e("h3",{class:"text-lg font-medium text-foreground"},"No Template Selected"),e("p",{class:"text-sm text-muted-foreground"},"Select a template from the list to view its details")],-1)])]))])]),o.showModal?(a(),Y(m,{key:0,onClose:s[6]||(s[6]=t=>o.showModal=!1)},{header:f(()=>[e("h3",Ve,d(o.formTitle),1)]),body:f(()=>[e("form",{onSubmit:j(o.saveForm,["prevent"]),class:"p-6 space-y-6"},[e("div",je,[e("label",Ne,[s[14]||(s[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Template Name",-1)),k(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.analysisTemplate.name=t),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter template name"},null,512),[[N,o.analysisTemplate.name]])]),e("label",Fe,[s[16]||(s[16]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),k(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.analysisTemplate.departmentUid=t),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[s[15]||(s[15]=e("option",{value:""},"Select department",-1)),(a(!0),r(g,null,_(o.departments,t=>(a(),r("option",{key:t.uid,value:t.uid},d(t.name),9,Be))),128))],512),[[G,o.analysisTemplate.departmentUid]])]),e("label",Le,[s[17]||(s[17]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.analysisTemplate.description=t),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter template description"},null,512),[[N,o.analysisTemplate.description]])])]),s[18]||(s[18]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):x("",!0)],64)}const Ke=R($,[["render",ze],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesTemplates.vue"]]);export{Ke as default};
