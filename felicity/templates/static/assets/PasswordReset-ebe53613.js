import{W as R,a6 as C,ak as P,a2 as w,h as T,i as S,r as V,o as r,c as n,O as s,b as j,a7 as t,C as x,N as v,D as m,Z as f,a5 as i,a as g,J as D,_ as N}from"./index-93739211.js";const B={class:"flex min-h-screen items-center justify-center bg-gradient-to-br from-primary to-accent p-6"},E={class:"w-full max-w-md"},M={class:"space-y-6 rounded-xl bg-background/95 p-8 shadow-2xl backdrop-blur-sm"},U={key:0},q={class:"mb-6"},F={class:"space-y-1"},$=["disabled"],I={class:"flex justify-end"},L=["disabled"],Z={key:1,class:"flex justify-center"},z={key:1,class:"space-y-5"},A={class:"mb-6"},H={class:"space-y-1"},J=["disabled"],O=["disabled"],W={key:1,class:"flex justify-center"},G={class:"mb-4 text-center"},K={class:"text-foreground"},Q={class:"rounded bg-secondary px-2 py-1"},X={class:"space-y-4"},Y={class:"space-y-1"},ee=["disabled"],se={class:"space-y-1"},te=["disabled"],oe=["disabled"],re={key:1,class:"flex justify-center"},ne=R({__name:"PasswordReset",emits:["forgot"],setup(de,{emit:y}){const k=y,l=C(),{auth:o}=P(l),c=w(""),u=w(""),d=T({password:"",passwordc:""}),p=S(()=>!(!d.password||!d.passwordc||d.password!==d.passwordc)),_=()=>{o.value.receivedToken?l.validatePasswordResetToken(u.value):l.resetPasswordRequest(c.value)},h=()=>{if(!p.value){alert("Please correct form errors");return}l.resetPassword(d.password,d.passwordc)};return(ae,e)=>{const b=V("fel-loader");return r(),n("div",B,[s("div",E,[s("div",M,[e[15]||(e[15]=j('<div class="flex flex-col items-center space-y-2"><div class="relative flex h-16 w-16 items-center justify-center"><div class="absolute flex h-12 w-12 items-center justify-center rounded-xl bg-accent transform rotate-45"><svg class="h-8 w-8 -rotate-45 transform text-primary-foreground" viewBox="0 0 512 512" fill="none"><path d="M364.61 390.213C304.625 450.196 207.37 450.196 147.386 390.213C117.394 360.22 102.398 320.911 102.398 281.6C102.398 242.291 117.394 202.981 147.386 172.989C147.386 230.4 153.6 281.6 230.4 307.2C230.4 256 256 102.4 294.4 76.7999C320 128 334.618 142.997 364.608 172.989C394.601 202.981 409.597 242.291 409.597 281.6C409.597 320.911 394.601 360.22 364.61 390.213Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><h2 class="text-2xl font-bold text-foreground">Felicity LIMS</h2><p class="text-sm text-muted-foreground">Password Recovery</p></div>',1)),t(o).resetData?.canReset?(r(),n("form",{key:1,class:"space-y-5",onSubmit:x(h,["prevent"])},[s("div",G,[s("p",K,[e[11]||(e[11]=v(" Hello ")),s("span",Q,"@"+D(t(o)?.resetData?.username),1)]),e[12]||(e[12]=s("p",{class:"mt-1 text-sm text-foreground"},"Please enter your new password below",-1))]),s("div",X,[s("div",Y,[e[13]||(e[13]=s("label",{class:"text-sm font-medium text-foreground",for:"password"},"New Password",-1)),m(s("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=a=>d.password=a),class:i(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",p.value?"border-border":"border-red-300"]),disabled:t(o).processing,placeholder:"Enter new password",type:"password"},null,10,ee),[[f,d.password]])]),s("div",se,[e[14]||(e[14]=s("label",{class:"text-sm font-medium text-foreground",for:"passwordc"},"Confirm Password",-1)),m(s("input",{id:"passwordc","onUpdate:modelValue":e[6]||(e[6]=a=>d.passwordc=a),class:i(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",p.value?"border-border":"border-red-300"]),disabled:t(o).processing,placeholder:"Confirm new password",type:"password"},null,10,te),[[f,d.passwordc]])])]),t(o).processing?(r(),n("div",re,[g(b,{message:"Resetting password..."})])):(r(),n("button",{key:0,class:i(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",p.value?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!p.value,type:"submit"}," Reset Password ",10,oe))],32)):(r(),n("form",{key:0,class:"space-y-5",onSubmit:x(_,["prevent"])},[t(o).receivedToken?(r(),n("div",z,[s("div",A,[s("button",{type:"button",class:"inline-flex items-center text-sm text-accent transition-colors duration-200 hover:text-indigo-800",onClick:e[3]||(e[3]=a=>t(l).setReceivedResetToken(!1))},e[9]||(e[9]=[s("span",{class:"mr-1"},"←",-1),v(" Token not received ")]))]),s("div",H,[e[10]||(e[10]=s("label",{class:"text-sm font-medium text-foreground",for:"token"},"Reset Token",-1)),m(s("input",{id:"token","onUpdate:modelValue":e[4]||(e[4]=a=>u.value=a),class:i(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",(u.value,"border-border")]),disabled:t(o).processing,placeholder:"Enter your reset token",type:"text"},null,10,J),[[f,u.value]])]),t(o).processing?(r(),n("div",W,[g(b,{message:"Validating password reset token..."})])):(r(),n("button",{key:0,class:i(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",u.value?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!u.value,type:"submit"}," Submit Token ",10,O))])):(r(),n("div",U,[s("div",q,[s("button",{type:"button",class:"inline-flex items-center text-sm text-accent transition-colors duration-200 hover:text-indigo-800",onClick:e[0]||(e[0]=a=>k("forgot"))},e[7]||(e[7]=[s("span",{class:"mr-1"},"←",-1),v(" Back to Login ")]))]),s("div",F,[e[8]||(e[8]=s("label",{class:"text-sm font-medium text-foreground",for:"email"},"Email",-1)),m(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),class:i(["w-full rounded-lg border px-4 py-2 outline-none transition-colors duration-200","focus:border-accent focus:ring-2 focus:ring-indigo-200",(c.value,"border-border")]),disabled:t(o).processing,placeholder:"Enter your email",type:"email"},null,10,$),[[f,c.value]])]),s("div",I,[s("button",{type:"button",class:"text-sm text-accent transition-colors duration-200 hover:text-indigo-800",onClick:e[2]||(e[2]=a=>t(l).setReceivedResetToken(!0))}," Received a Token? ")]),t(o).processing?(r(),n("div",Z,[g(b,{message:"Requesting..."})])):(r(),n("button",{key:0,class:i(["w-full rounded-lg px-4 py-2 font-medium text-primary-foreground transition-colors duration-200",c.value?"bg-accent hover:bg-accent":"cursor-not-allowed bg-muted"]),disabled:!c.value,type:"submit"}," Request Password Reset ",10,L))]))],32))]),e[16]||(e[16]=s("div",{class:"mt-6 text-center"},[s("p",{class:"text-sm text-primary-foreground/80"}," Secure Password Recovery System ")],-1))])])}}}),le=N(ne,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/auth/PasswordReset.vue"]]);export{le as default};
