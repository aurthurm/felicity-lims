import{S as $,f as B,t as L,a0 as x,h as j,W as H,i as k,r as U,o as d,c as i,a as S,L as p,M as q,N as t,F as f,E as y,H as l,a5 as n,y as P,C as v,a2 as M,X as W,A as G,ac as K,K as X,Z as Y,$ as Z,_ as z}from"./index-8d0a01b3.js";import{G as J,H as Q}from"./analyses.mutations-56a25983.js";import{u as ee}from"./analysis-250c489a.js";import{u as te}from"./setup-8486ed9e.js";import"./_queries-5236cda4.js";const oe={class:"overflow-x-auto mt-4"},re={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},se={class:"min-w-full"},ne={class:"bg-card"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ie={class:"text-sm text-foreground"},ae={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},le={class:"text-sm text-foreground"},ue={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ce={class:"text-sm text-foreground"},pe={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},fe=["onClick"],me={class:"text-lg font-bold text-foreground"},be={action:"post",class:"p-6 space-y-6"},ge={class:"space-y-4"},xe={class:"grid grid-cols-3 gap-4"},ye={class:"space-y-2"},ve=["value"],_e={class:"space-y-2"},he=["value"],Ce={class:"space-y-2"},we={class:"pt-4"},Fe=$({__name:"CorrectionFactor",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(I){const E=Y(()=>Z(()=>import("./index-8d0a01b3.js").then(r=>r.cH),["assets/index-8d0a01b3.js","assets/index-a402b5a2.css"])),_=ee(),c=te(),{withClientMutation:h}=B(),C=I,{analysis:w}=L(C);let a=x(!1),F=x(""),s=j({});const m=x(!0);H(()=>C.analysisUid,(r,e)=>{}),c.fetchInstruments();const b=k(()=>c.getInstruments);c.fetchMethods();const g=k(()=>c.getMethods);function N(){const r={...s,analysisUid:w?.value?.uid};h(J,{payload:r},"createAnalysisCorrectionFactor").then(e=>_.AddAnalysisCorrectionFactor(e))}function D(){const r={...s};delete r.uid,delete r.__typename,h(Q,{uid:s.uid,payload:r},"updateAnalysisCorrectionFactor").then(e=>_.updateAnalysisCorrectionFactor(e))}function A(r,e={}){m.value=r,a.value=!0,F.value=(r?"CREATE":"EDIT")+" ANALYSIS CORRECTION FACTOR",r?Object.assign(s,{factor:null,instrumentUid:null,methodUid:null}):Object.assign(s,{...e})}function T(){m.value===!0&&N(),m.value===!1&&D(),a.value=!1}const V=r=>{const e=b?.value?.findIndex(u=>u.uid===r);return b?.value[e]?.name||"unknown"},O=r=>{const e=g?.value?.findIndex(u=>u.uid===r);return g?.value[e]?.name||"unknown"};return(r,e)=>{const u=U("fel-button"),R=U("fel-heading");return d(),i(f,null,[S(R,{title:"Correction Factors"},{default:p(()=>[S(u,{onClick:e[0]||(e[0]=o=>A(!0))},{default:p(()=>e[6]||(e[6]=[q("Add Correction Factor")])),_:1})]),_:1}),t("div",oe,[t("div",re,[t("table",se,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Factor"),t("th",{class:"px-4 py-2 border-b border-border"})])],-1)),t("tbody",ne,[(d(!0),i(f,null,y(n(w)?.correctionFactors,o=>(d(),i("tr",{key:o?.uid,class:"hover:bg-accent/50"},[t("td",de,[t("div",ie,l(V(o?.instrumentUid)),1)]),t("td",ae,[t("div",le,l(O(o?.methodUid)),1)]),t("td",ue,[t("div",ce,l(o.factor),1)]),t("td",pe,[t("button",{onClick:Ae=>A(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,fe)])]))),128))])])])]),n(a)?(d(),P(n(E),{key:0,onClose:e[5]||(e[5]=o=>K(a)?a.value=!1:a=!1),contentWidth:"w-2/4"},{header:p(()=>[t("h3",me,l(n(F)),1)]),body:p(()=>[t("form",be,[t("div",ge,[t("div",xe,[t("label",ye,[e[9]||(e[9]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),v(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[1]||(e[1]=o=>n(s).instrumentUid=o)},[e[8]||(e[8]=t("option",{value:""},"Select Instrument",-1)),(d(!0),i(f,null,y(b.value,o=>(d(),i("option",{key:o?.uid,value:o.uid},l(o?.name),9,ve))),128))],512),[[M,n(s).instrumentUid]])]),t("label",_e,[e[11]||(e[11]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),v(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=o=>n(s).methodUid=o)},[e[10]||(e[10]=t("option",{value:""},"Select Method",-1)),(d(!0),i(f,null,y(g.value,o=>(d(),i("option",{key:o?.uid,value:o.uid},l(o?.name),9,he))),128))],512),[[M,n(s).methodUid]])]),t("label",Ce,[e[12]||(e[12]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Factor",-1)),v(t("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[3]||(e[3]=o=>n(s).factor=o),placeholder:"Factor ..."},null,512),[[W,n(s).factor]])])])]),t("div",we,[t("button",{type:"button",onClick:e[4]||(e[4]=G(o=>T(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):X("",!0)],64)}}}),Ee=z(Fe,[["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/CorrectionFactor.vue"]]);export{Ee as default};
