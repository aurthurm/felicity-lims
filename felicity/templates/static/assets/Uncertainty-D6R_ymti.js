import{Y as z,u as J,aw as K,a0 as F,an as W,a7 as q,bb as G,a9 as Q,aa as X,ab as Z,ad as j,ae as $,af as ee,a3 as te,_ as le,c as _,o as m,a as t,z as s,A as v,C as ae,K as l,M as o,F as S,H as M,I as u,B as ne,a4 as w}from"./index-OdhKCqIc.js";import{c as re,d as I,a as O,u as oe,F as de}from"./index.esm-BfHj8iGm.js";import{H as ie,J as me}from"./analyses.mutations-DUxQZn1r.js";import{u as ue}from"./setup-BcFG_bXr.js";import{u as se}from"./analysis-PB9AMevg.js";import{I as fe}from"./Input-BEm5S0CJ.js";import{F as ge,a as ce,b as be}from"./FormMessage-CgXFMXx9.js";import{F as ye}from"./FormLabel-DxP9wnWS.js";import{S as xe,a as Fe,b as _e,c as ve,d as Se}from"./SelectValue-Ds0cfAgl.js";import{P as Te}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const N="__none__",Ue=z({name:"UncertaintyView",__name:"Uncertainty",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:""}},setup(E,{expose:a}){a();const c=se(),e=ue(),{withClientMutation:b}=J(),y=E,{analysis:r}=K(y);let i=F(!1),T=F("");const x=F(!0),g=F(null),V=re({instrumentUid:O().trim().required("Instrument is required"),methodUid:O().trim().required("Method is required"),min:I().typeError("Min must be a number").required("Min is required"),max:I().typeError("Max must be a number").required("Max is required"),value:I().typeError("Variance must be a number").required("Variance is required")}),{handleSubmit:p,resetForm:A,setValues:H,setFieldValue:U}=oe({validationSchema:V,initialValues:{instrumentUid:"",methodUid:"",min:"",max:"",value:""}});W(()=>y.analysisUid,(n,d)=>{}),e.fetchInstruments();const C=q(()=>e.getInstruments);e.fetchMethods();const h=q(()=>e.getMethods);function R(n){U("instrumentUid",n===N?"":n)}function D(n){U("methodUid",n===N?"":n)}function L(n){b(ie,{payload:n},"createAnalysisUncertainty").then(d=>c.addAnalysisUncertainty(d))}function k(n){g.value&&b(me,{uid:g.value,payload:n},"updateAnalysisUncertainty").then(d=>c.updateAnalysisUncertainty(d))}function P(n,d={}){x.value=n,i.value=!0,T.value=(n?"CREATE":"EDIT")+" ANALYSIS UNCERTAINTY",n?(g.value=null,A({values:{instrumentUid:"",methodUid:"",min:"",max:"",value:""}})):(g.value=d.uid??null,H({instrumentUid:d.instrumentUid??"",methodUid:d.methodUid??"",min:d.min??"",max:d.max??"",value:d.value??""}))}const Y=p(n=>{const d=r?.value?.uid;if(!d)return;const f={instrumentUid:n.instrumentUid,methodUid:n.methodUid,min:Number(n.min),max:Number(n.max),value:Number(n.value),analysisUid:d};x.value===!0&&L(f),x.value===!1&&k(f),i.value=!1}),B={SELECT_NONE:N,analysisStore:c,setupStore:e,withClientMutation:b,props:y,analysis:r,get showModal(){return i},set showModal(n){i=n},get formTitle(){return T},set formTitle(n){T=n},formAction:x,currentUid:g,uncertaintySchema:V,handleSubmit:p,resetForm:A,setValues:H,setFieldValue:U,instruments:C,methods:h,onInstrumentChange:R,onMethodChange:D,addAnalysisUncertainty:L,editAnalysisUncertainty:k,FormManager:P,saveForm:Y,instrumentName:n=>{const d=C?.value?.findIndex(f=>f.uid===n);return C?.value[d]?.name||"unknown"},methodName:n=>{const d=h?.value?.findIndex(f=>f.uid===n);return h?.value[d]?.name||"unknown"},get Button(){return te},get Input(){return fe},get FormControl(){return be},get FormField(){return de},get FormItem(){return ce},get FormLabel(){return ye},get FormMessage(){return ge},get Select(){return Se},get SelectContent(){return ve},get SelectItem(){return _e},get SelectTrigger(){return Fe},get SelectValue(){return xe},get Table(){return ee},get TableBody(){return $},get TableCell(){return j},get TableHead(){return Z},get TableHeader(){return X},get TableRow(){return Q},Modal:G,PageHeading:Te};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),Ce={class:"mt-4 border border-border bg-card rounded-lg shadow-md"},he={class:"relative w-full overflow-auto"},Me={class:"text-lg font-bold text-foreground"},we={class:"space-y-4"},Ie={class:"grid grid-cols-5 gap-4"},Ne={class:"pt-4"};function Ee(E,a,c,e,b,y){return m(),_(S,null,[t(e.PageHeading,{title:"Uncertainty"},{default:l(()=>[t(e.Button,{onClick:a[0]||(a[0]=r=>e.FormManager(!0))},{default:l(()=>[...a[3]||(a[3]=[o("Add Uncertainty",-1)])]),_:1})]),_:1}),s("div",Ce,[s("div",he,[t(e.Table,{class:"w-full caption-bottom text-sm"},{default:l(()=>[t(e.TableHeader,{class:"[&_tr]:border-b"},{default:l(()=>[t(e.TableRow,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[4]||(a[4]=[o("Instrument",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[5]||(a[5]=[o("Method",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[6]||(a[6]=[o("Min",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[7]||(a[7]=[o("Max",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[8]||(a[8]=[o("Variance (+/-)",-1)])]),_:1}),t(e.TableHead,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:l(()=>[...a[9]||(a[9]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e.TableBody,{class:"[&_tr:last-child]:border-0"},{default:l(()=>[(m(!0),_(S,null,M(e.analysis?.uncertainties,r=>(m(),v(e.TableRow,{key:r?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[o(u(e.instrumentName(r?.instrumentUid)),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[o(u(e.methodName(r?.methodUid)),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[o(u(r.min),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[o(u(r.max),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:l(()=>[o(u(r.value),1)]),_:2},1024),t(e.TableCell,{class:"px-4 py-3 align-middle text-right"},{default:l(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:i=>e.FormManager(!1,r)},{default:l(()=>[...a[10]||(a[10]=[o("Edit",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),e.showModal?(m(),v(e.Modal,{key:0,onClose:a[2]||(a[2]=r=>e.showModal=!1),contentWidth:"w-2/4"},{header:l(()=>[s("h3",Me,u(e.formTitle),1)]),body:l(()=>[s("form",{onSubmit:a[1]||(a[1]=ne((...r)=>e.saveForm&&e.saveForm(...r),["prevent"])),class:"p-6 space-y-6"},[s("div",we,[s("div",Ie,[t(e.FormField,{name:"instrumentUid"},{default:l(({componentField:r})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[11]||(a[11]=[o("Instrument",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,{"model-value":r.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onInstrumentChange},{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select Instrument"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:e.SELECT_NONE},{default:l(()=>[...a[12]||(a[12]=[o("Select Instrument",-1)])]),_:1}),(m(!0),_(S,null,M(e.instruments,i=>(m(),v(e.SelectItem,{key:i?.uid,value:i.uid},{default:l(()=>[o(u(i?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"methodUid"},{default:l(({componentField:r})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[13]||(a[13]=[o("Method",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,{"model-value":r.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onMethodChange},{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select Method"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:e.SELECT_NONE},{default:l(()=>[...a[14]||(a[14]=[o("Select Method",-1)])]),_:1}),(m(!0),_(S,null,M(e.methods,i=>(m(),v(e.SelectItem,{key:i?.uid,value:i.uid},{default:l(()=>[o(u(i?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"min"},{default:l(({componentField:r})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[15]||(a[15]=[o("Min",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,w(r,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"max"},{default:l(({componentField:r})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[16]||(a[16]=[o("Max",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,w(r,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"value"},{default:l(({componentField:r})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...a[17]||(a[17]=[o("Variance +/-",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,w(r,{type:"number",placeholder:"Value ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})])]),s("div",Ne,[t(e.Button,{type:"submit",class:"w-full"},{default:l(()=>[...a[18]||(a[18]=[o("Save Form",-1)])]),_:1})])],32)]),_:1})):ae("",!0)],64)}const Ge=le(Ue,[["render",Ee],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/services/Uncertainty.vue"]]);export{Ge as default};
