import{S as N,f as k,i as h,a0 as c,h as T,r as M,o as u,c as f,N as e,F as b,E as _,H as m,K as A,a5 as a,y as I,L as E,A as O,C as S,X as D,a2 as R,ad as P,a8 as o,av as j,aw as B,_ as L}from"./index-0c222abb.js";import{u as F}from"./user-3537f37b.js";import"./_queries-98debe01.js";const U={class:"space-y-6"},V={class:"flex items-center justify-between"},H={class:"border border-border bg-card rounded-lg shadow-sm"},$={class:"relative w-full overflow-auto"},K={class:"w-full caption-bottom text-sm"},z={class:"[&_tr:last-child]:border-0"},Y={class:"px-4 py-2 align-middle"},Q={class:"px-4 py-2 align-middle text-primary"},W={class:"px-4 py-2 align-middle text-right"},X=["onClick"],q={class:"text-lg font-semibold text-foreground"},J={class:"space-y-4"},Z={class:"space-y-2"},ee={class:"space-y-2"},se=["size"],te=["value"],oe=N({__name:"Groups",setup(ie){const g=[o.ADMINISTRATION,o.DASHBOARD,o.CLIENTS,o.PATIENTS,o.PATIENTS_COMPACT,o.SAMPLES,o.QC_SAMPLES,o.WORKSHEETS,o.NOTICE_MANAGER,o.BIO_BANKING,o.INVENTORY,o.REFERRAL,o.SCHEMES,o.DOCUMENT];let d=F();const{withClientMutation:v}=k();d.fetchGroupsAndPermissions();const w=h(()=>d.getGroups);c("permissions");let l=c(!1),x=c("");const p=c(!0);let r=T({});function y(i,s={}){p.value=i,l.value=!0,x.value=(i?"CREATE":"EDIT")+" ANALYSES PROFILE",i?Object.assign(r,{name:"",pages:[]}):Object.assign(r,{...s})}function C(){const i={...r},s=i.pages;i.pages=s.join(","),p.value===!0&&v(j,{payload:i},"createGroup").then(n=>d.addGroup(n)),p.value===!1&&v(B,{uid:r?.uid,payload:{name:i.name,pages:i.pages}},"updateGroup").then(n=>d.updateGroup(n)),l.value=!1}const G=(i,s)=>i?.reduce(function(n,t){return(n[t[s]]=n[t[s]]||[]).push(t),n},{});return h(()=>Array.from(Object.entries(G(d.getPermissions,"target")))),(i,s)=>{const n=M("fel-modal");return u(),f(b,null,[e("div",U,[e("div",V,[s[4]||(s[4]=e("h2",{class:"text-2xl font-semibold text-foreground"},"Groups",-1)),e("button",{onClick:s[0]||(s[0]=t=>y(!0)),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Add Group ")]),e("div",H,[e("div",$,[e("table",K,[s[5]||(s[5]=e("thead",{class:"[&_tr]:border-b"},[e("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Group Name"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Access Pages"),e("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",z,[(u(!0),f(b,null,_(w.value,t=>(u(),f("tr",{key:t.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[e("td",Y,m(t.name),1),e("td",Q,m(t.pages),1),e("td",W,[e("button",{onClick:ne=>y(!1,t),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,X)])]))),128))])])])])]),A(" Group Form Modal "),a(l)?(u(),I(n,{key:0,onClose:s[3]||(s[3]=t=>P(l)?l.value=!1:l=!1)},{header:E(()=>[e("h3",q,m(a(x)),1)]),body:E(()=>[e("form",{onSubmit:O(C,["prevent"]),class:"space-y-4"},[e("div",J,[e("div",Z,[s[6]||(s[6]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Group Name ",-1)),S(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a(r).name=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter group name..."},null,512),[[D,a(r).name]])]),e("div",ee,[s[7]||(s[7]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Pages ",-1)),S(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>a(r).pages=t),multiple:"",size:g.length,class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(u(),f(b,null,_(g,t=>e("option",{key:t,value:t,class:"py-1"},m(t),9,te)),64))],8,se),[[R,a(r).pages]])])]),s[8]||(s[8]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ")],-1))],32)]),_:1})):A("v-if",!0)],64)}}}),de=L(oe,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{de as default};
