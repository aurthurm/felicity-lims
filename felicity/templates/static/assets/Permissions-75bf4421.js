import{V as P,f as w,i as f,o as r,c as o,O as s,L as p,F as i,H as u,J as m,a as A,a6 as U,$ as V,a0 as G,ay as B,_ as D}from"./index-0a787601.js";import{u as S}from"./user-c4b7fe1c.js";import"./_queries-a9525aa1.js";const C={class:"space-y-6"},F={class:"bg-background rounded-lg shadow-sm overflow-hidden"},z={class:"relative"},E={class:"w-full"},L={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},N={class:"w-full"},O={class:"divide-y divide-border"},H={class:"bg-muted/50"},T={class:"px-4 py-3 font-medium text-sm text-foreground"},j={class:"px-4 py-2 text-sm text-muted-foreground"},I=P({__name:"Permissions",setup(J){const _=V(()=>G(()=>import("./FelSwitch-b515abdc.js"),["assets/FelSwitch-b515abdc.js","assets/index-0a787601.js","assets/index-8412b2a5.css"]));let a=S();const{withClientMutation:g}=w();a.fetchGroupsAndPermissions();const l=f(()=>a.getGroups);function b(d,t){return d?.permissions?.some(e=>e?.uid===t?.uid)??!1}const h=(d,t)=>d?.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{}),k=f(()=>Array.from(Object.entries(h(a.getPermissions,"target"))));function x(d,t){g(B,{groupUid:d?.uid,permissionUid:t?.uid},"updateGroupPermissions").then(e=>a.updateGroupsAndPermissions(e))}function y(d,t,e){e!==b(d,t)&&x(d,t)}return(d,t)=>(r(),o("div",C,[s("div",F,[s("div",z,[p(" Fixed Header "),s("table",E,[s("thead",null,[s("tr",null,[t[0]||(t[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),o(i,null,u(l.value,e=>(r(),o("th",{key:e.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},m(e.name),1))),128)),t[1]||(t[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),p(" Scrollable Body "),s("div",L,[s("table",N,[s("tbody",O,[(r(!0),o(i,null,u(k.value,e=>(r(),o(i,{key:e[0]},[s("tr",H,[s("td",T,m(e[0]),1),(r(!0),o(i,null,u(l.value,n=>(r(),o("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:n.uid},[p(" {{ group.name }} ")]))),128))]),(r(!0),o(i,null,u(e[1],n=>(r(),o("tr",{key:n.uid},[s("td",j,m(n.action),1),(r(!0),o(i,null,u(l.value,c=>(r(),o("td",{key:c.uid,class:"px-4 py-2"},[A(U(_),{"model-value":b(c,n),"onUpdate:modelValue":v=>y(c,n,v),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),q=D(I,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{q as default};
