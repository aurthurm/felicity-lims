import{V as S,a7 as k,W as C,h as V,a8 as D,i as E,r as N,o as a,c as r,O as e,F as g,H as h,L as v,J as n,D as p,a3 as q,Y as I,E as M,a as T,C as U,_ as A}from"./index-0a787601.js";import{u as B}from"./samples-faadc2af.js";import{u as O}from"./analysis-3bf6dc10.js";import"./analyses.mutations-7648569c.js";import"./storage.mutations-965c9ff8.js";const P={class:"space-y-6"},F={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},J={key:0,class:"border-t border-border"},L={class:"text-lg font-semibold text-foreground"},$={class:"grid grid-cols-12 gap-6"},H={class:"col-span-6 grid grid-cols-2 gap-6"},W={class:"space-y-4"},Y={class:"flex items-center justify-between"},z={class:"text-muted-foreground"},G={class:"flex items-center justify-between"},K={class:"text-muted-foreground"},Q={class:"flex items-center justify-between"},X={class:"text-muted-foreground"},Z={class:"space-y-4"},ee={class:"flex items-center justify-between"},se={class:"text-muted-foreground"},te={class:"flex items-center justify-between"},oe={class:"text-muted-foreground"},ne={class:"col-span-5"},ie={class:"grid grid-cols-2 gap-6"},ae={class:"space-y-2"},re={class:"space-y-2"},ce=["onUpdate:modelValue"],de=["value"],le={class:"space-y-2"},ue={class:"space-y-2"},pe=["onUpdate:modelValue"],fe={class:"col-span-1 flex items-center justify-center"},me=["onClick"],_e={class:"flex justify-end"},ge=S({__name:"RejectSamples",setup(he){k();const l=C(),f=O(),{rejectSamples:y}=B(),m=l.options.history.state,c=V({rejections:[]}),x=JSON.parse(window.history.state.samples);let _=[];for(let o of x)o.reasons=[],o.other=void 0,_.push(o);c.rejections=_,D(()=>f.fetchRejectionReasons());const b=(o,s)=>{let d=[];return o?.forEach(t=>d.push(t.name)),s?.forEach(t=>d.push(t.name)),d.join(", ")},j=o=>{c.rejections?.forEach(s=>{s.reasons=o.reasons,s.other=o.other})},R=E(()=>f.getRejectionReasons),w=async()=>{const o=[];c.rejections?.forEach(s=>{o.push({uid:s?.uid,reasons:s?.reasons,other:s?.other})}),await y(o).then(s=>{o.length==1&&m.back?.toString().includes("patient")?l.push({path:m.back.toString()}):l.push({name:"samples-listing"})})};return(o,s)=>{const d=N("font-awesome-icon");return a(),r("div",P,[s[9]||(s[9]=e("h4",{class:"text-xl font-semibold text-foreground"},"Sample Rejection",-1)),e("div",F,[(a(!0),r(g,null,h(c.rejections,(t,u)=>(a(),r("div",{key:u,class:"space-y-6"},[u>0?(a(),r("div",J)):v("v-if",!0),e("h2",L,n(t?.sampleId)+" â†’ "+n(t?.status),1),e("div",$,[e("div",H,[e("div",W,[e("div",Y,[s[1]||(s[1]=e("span",{class:"font-medium text-foreground"},"Sample Type",-1)),e("span",z,n(t?.sampleType?.name),1)]),e("div",G,[s[2]||(s[2]=e("span",{class:"font-medium text-foreground"},"Client Sample ID",-1)),e("span",K,n(t?.analysisRequest?.clientRequestId),1)]),e("div",Q,[s[3]||(s[3]=e("span",{class:"font-medium text-foreground"},"Analyses",-1)),e("span",X,n(b(t?.profiles,t?.analyses)),1)])]),e("div",Z,[e("div",ee,[s[4]||(s[4]=e("span",{class:"font-medium text-foreground"},"Patient",-1)),e("span",se,n(t?.analysisRequest?.patient?.firstName)+" "+n(t?.analysisRequest?.patient?.lastName),1)]),e("div",te,[s[5]||(s[5]=e("span",{class:"font-medium text-foreground"},"Client Patient ID",-1)),e("span",oe,n(t?.analysisRequest?.patient?.clientPatientId),1)])])]),e("div",ne,[e("div",ie,[e("div",ae,[e("label",re,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-foreground"},"Rejection Reasons",-1)),p(e("select",{name:"reasons",multiple:"","onUpdate:modelValue":i=>t.reasons=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[s[6]||(s[6]=e("option",{value:""},null,-1)),(a(!0),r(g,null,h(R.value,i=>(a(),r("option",{key:i.uid,value:i.uid},n(i.reason),9,de))),128))],8,ce),[[q,t.reasons]])])]),e("div",le,[e("label",ue,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-foreground"},"Other",-1)),p(e("input",{type:"text","onUpdate:modelValue":i=>t.other=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,pe),[[I,t.other]])])])])]),e("div",fe,[p(e("button",{onClick:i=>j(t),class:"text-primary hover:text-primary/80 transition-colors"},[T(d,{icon:"level-down-alt"})],8,me),[[M,u===0]])])])]))),128))]),e("div",_e,[c.rejections?.length>0?(a(),r("button",{key:0,onClick:s[0]||(s[0]=U(t=>w(),["prevent"])),class:"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destructive/50"}," Reject Samples ")):v("v-if",!0)])])}}}),Re=A(ge,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{Re as default};
