const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelDataTable-BgRrYa9n.js","assets/index-Daoe3XS9.js","assets/index-C7Rn7ES8.css","assets/vue-multiselect.esm-C31Sh9AO.js"])))=>i.map(i=>d[i]);
import{a0 as ye,f as ve,a7 as n,h as b,ad as xe,aj as z,a1 as J,a6 as Q,_ as he,r as D,c as H,o as S,A as o,C as Ce,E as X,a as c,N as y,P as ke,D as Oe,F as k,a2 as U,L as Y,a3 as Te,J as we}from"./index-Daoe3XS9.js";import{c as Ae,a as Be,u as Ge,b as u}from"./index.esm-BT7_X8h2.js";import{o as _e,p as De,q as Se,r as Ue,s as Ie,t as Me,u as Pe,v as Fe,a as Ne}from"./microbiology.mutations-t5_lptzK.js";const Ve=ye({__name:"AbxOrganism",setup(Z,{expose:s}){s();const I=J(()=>Q(()=>import("./FelDataTable-BgRrYa9n.js"),__vite__mapDeps([0,1,2]))),a=J(()=>Q(()=>import("./vue-multiselect.esm-C31Sh9AO.js"),__vite__mapDeps([3,1,2]))),{withClientMutation:v,withClientQuery:m}=ve();let f=n(!1),p=n("");const g=n(!0),t=n(null),M=Ae({name:Be().trim().required("Name is required")}),{handleSubmit:P,resetForm:O,setValues:F,errors:j}=Ge({validationSchema:M,initialValues:{name:"",whonetOrgCode:"",replacedBy:"",taxonomicStatus:"",common:"",organismType:"",anaerobe:!1,morphology:"",subkingdomCode:"",familyCode:"",genusGroup:"",genusCode:"",speciesGroup:"",serovarGroup:"",msfGrpClin:"",sctCode:"",sctText:"",gbifTaxonId:"",gbifDatasetId:"",gbifTaxonomicStatus:"",kingdom:null,phylum:null,class:null,order:null,family:null,genus:null,comments:""}}),{value:$}=u("name"),{value:ee}=u("whonetOrgCode"),{value:N}=u("kingdom"),{value:V}=u("phylum"),{value:E}=u("class"),{value:K}=u("order"),{value:q}=u("family"),{value:se}=u("genus"),{value:ae}=u("organismType"),{value:oe}=u("anaerobe"),L=n(!1),i=n([]),R=n([]),T=n([]),le=b(()=>T.value.filter(e=>e.kingdomUid===N.value?.uid)),w=n([]),te=b(()=>w.value.filter(e=>e.phylumUid===V.value?.uid)),A=n([]),ne=b(()=>A.value.filter(e=>e.classUid===E.value?.uid)),B=n([]),re=b(()=>B.value.filter(e=>e.orderUid===K.value?.uid)),G=n([]),ie=b(()=>G.value.filter(e=>e.familyUid===q.value?.uid));let r=reactive({first:50,after:"",text:"",sortBy:["name"],filterAction:!1});const _=n(0);let x=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const de=b(()=>i?.value?.length+" of "+_.value+" organisms"),ue=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Name",value:"name",sortable:!1,sortBy:"asc",hidden:!1},{name:"whonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"replacedBy",value:"replacedBy",sortable:!1,sortBy:"asc",hidden:!0},{name:"taxonomicStatus",value:"taxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"common",value:"common",sortable:!1,sortBy:"asc",hidden:!0},{name:"organismType",value:"organismType",sortable:!1,sortBy:"asc",hidden:!1},{name:"anaerobe",value:"anaerobe",sortable:!1,sortBy:"asc",hidden:!1},{name:"morphology",value:"morphology",sortable:!1,sortBy:"asc",hidden:!0},{name:"subkingdomCode",value:"subkingdomCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"familyCode",value:"familyCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusGroup",value:"genusGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusCode",value:"genusCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"speciesGroup",value:"speciesGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"serovarGroup",value:"serovarGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"msfGrpClin",value:"msfGrpClin",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctCode",value:"sctCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctText",value:"sctText",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonId",value:"gbifTaxonId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifDatasetId",value:"gbifDatasetId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonomicStatus",value:"gbifTaxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"kingdom",value:"kingdom.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"phylum",value:"phylum.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"class",value:"class_.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"order",value:"order.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"family",value:"family.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"genus",value:"genus.name",sortable:!1,sortBy:"asc",hidden:!1}]);function h(e){m(Ne,{text:e.text,pageSize:e.first,sortBy:e.sortBy},void 0).then(l=>{const d=l.abxOrganismAll,C=d.items;e.filterAction?(i.value=[],i.value=C):i.value=z(i.value,C,"uid"),_.value=d?.totalCount,x.value=d?.pageInfo}).finally(()=>{L.value=!1})}xe(()=>{h(r),m(_e,{},"abxOrderAll").then(e=>{e&&(A.value=e)}),m(De,{},"abxFamilyAll").then(e=>{e&&(B.value=e)}),m(Se,{},"abxKingdomAll").then(e=>{e&&(R.value=e)}),m(Ue,{},"abxPhylumAll").then(e=>{e&&(T.value=e)}),m(Ie,{},"abxGenusAll").then(e=>{e&&(G.value=e)}),m(Me,{},"abxClassAll").then(e=>{e&&(w.value=e)})});function me(e){r.first=100,r.after="",r.text=e.filterText,r.filterAction=!0,h(r)}function ce(e){r.first=e.fetchCount,r.after=x?.value?.endCursor,r.text=e.filterText,r.filterAction=!1,h(r)}const fe=()=>O();function ge(e,l={}){g.value=e,f.value=!0,p.value=(e?"Create":"Edit")+" Organism",e?(t.value=null,O()):(t.value=l.uid??null,F({name:l.name??"",whonetOrgCode:l.whonetOrgCode??"",replacedBy:l.replacedBy??"",taxonomicStatus:l.taxonomicStatus??"",common:l.common??"",organismType:l.organismType??"",anaerobe:l.anaerobe??!1,morphology:l.morphology??"",subkingdomCode:l.subkingdomCode??"",familyCode:l.familyCode??"",genusGroup:l.genusGroup??"",genusCode:l.genusCode??"",speciesGroup:l.speciesGroup??"",serovarGroup:l.serovarGroup??"",msfGrpClin:l.msfGrpClin??"",sctCode:l.sctCode??"",sctText:l.sctText??"",gbifTaxonId:l.gbifTaxonId??"",gbifDatasetId:l.gbifDatasetId??"",gbifTaxonomicStatus:l.gbifTaxonomicStatus??"",kingdom:l.kingdom??null,phylum:l.phylum??null,class:l.class??l.class_??null,order:l.order??null,family:l.family??null,genus:l.genus??null,comments:l.comments??""}))}const be=P(e=>{const l={name:e.name,whonetOrgCode:e.whonetOrgCode,replacedBy:e.replacedBy,taxonomicStatus:e.taxonomicStatus,common:e.common,organismType:e.organismType,anaerobe:e.anaerobe,morphology:e.morphology,subkingdomCode:e.subkingdomCode,familyCode:e.familyCode,genusGroup:e.genusGroup,genusCode:e.genusCode,speciesGroup:e.speciesGroup,serovarGroup:e.serovarGroup,msfGrpClin:e.msfGrpClin,sctCode:e.sctCode,sctText:e.sctText,gbifTaxonId:e.gbifTaxonId,gbifDatasetId:e.gbifDatasetId,gbifTaxonomicStatus:e.gbifTaxonomicStatus,kingdomUid:e.kingdom?.uid,phylumUid:e.phylum?.uid,classUid:e.class?.uid,orderUid:e.order?.uid,familyUid:e.family?.uid,genusUid:e.genus?.uid,comments:e.comments};g.value===!0&&v(Pe,{payload:l},"createAbxOrganism").then(d=>{d&&(i.value=z(i.value,[d],"uid"))}),g.value===!1&&t.value&&v(Fe,{uid:t.value,payload:l},"updateAbxOrganism").then(d=>{if(d){const C=i.value.findIndex(pe=>pe.uid==d.uid);i.value[C]=d}}),f.value=!1}),W={DataTable:I,VueMultiselect:a,withClientMutation:v,withClientQuery:m,get showModal(){return f},set showModal(e){f=e},get formTitle(){return p},set formTitle(e){p=e},formAction:g,currentUid:t,organismSchema:M,handleSubmit:P,resetForm:O,setValues:F,errors:j,name:$,whonetOrgCode:ee,kingdom:N,phylum:V,classValue:E,order:K,family:q,genus:se,organismType:ae,anaerobe:oe,fetchingOrganisms:L,abxOrganisms:i,abxKingdoms:R,abxPhylums:T,phylums:le,abxClasss:w,classes:te,abxOrders:A,orders:ne,abxFamilys:B,familys:re,abxGenuss:G,genuses:ie,get abxParams(){return r},set abxParams(e){r=e},organismCount:_,get organismPageInfo(){return x},set organismPageInfo(e){x=e},countNone:de,tableColumns:ue,fetchOrganisms:h,searchOrganisms:me,showMoreOrganisms:ce,resetOrganism:fe,FormManager:ge,saveForm:be};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),Ee={class:"space-y-6"},Ke={class:"bg-card p-6 shadow-sm rounded-lg"},qe={class:"text-xl font-semibold text-foreground"},Le={class:"grid grid-cols-2 gap-4"},Re={class:"block"},We={key:0,class:"text-sm text-destructive"},ze={class:"block"},Je={class:"grid grid-cols-2 gap-4"},Qe={class:"block"},He={class:"block"},Xe={class:"grid grid-cols-2 gap-4"},Ye={class:"block"},Ze={class:"block"},je={class:"grid grid-cols-2 gap-4"},$e={class:"block"},es={class:"block"},ss={class:"grid grid-cols-2 gap-4"},as={class:"block"},os={class:"block"};function ls(Z,s,I,a,v,m){const f=D("fel-button"),p=D("fel-heading"),g=D("fel-modal");return S(),H(we,null,[o("div",Ee,[c(p,{title:"Organisms"},{default:y(()=>[c(f,{onClick:s[0]||(s[0]=t=>a.FormManager(!0))},{default:y(()=>[...s[13]||(s[13]=[ke("Add Organism",-1)])]),_:1})]),_:1}),o("div",Ke,[c(a.DataTable,{columns:a.tableColumns,data:a.abxOrganisms,toggleColumns:!0,loading:a.fetchingOrganisms,paginable:!0,pageMeta:{fetchCount:a.abxParams.first,hasNextPage:!0,countNone:a.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:a.searchOrganisms,onOnSearchFocus:a.resetOrganism,onOnPaginate:a.showMoreOrganisms,selectable:!1},{footer:y(()=>[...s[14]||(s[14]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),a.showModal?(S(),Ce(g,{key:0,onClose:s[12]||(s[12]=t=>a.showModal=!1),"content-width":"w-1/2"},{header:y(()=>[o("h3",qe,Y(a.formTitle),1)]),body:y(()=>[o("form",{onSubmit:s[11]||(s[11]=Oe((...t)=>a.saveForm&&a.saveForm(...t),["prevent"])),class:"space-y-6 p-4"},[o("div",Le,[o("label",Re,[s[15]||(s[15]=o("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[1]||(s[1]=t=>a.name=t),placeholder:"Name ..."},null,512),[[U,a.name]]),a.errors.name?(S(),H("p",We,Y(a.errors.name),1)):X("",!0)]),o("label",ze,[s[16]||(s[16]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[2]||(s[2]=t=>a.whonetOrgCode=t),placeholder:"Whonet Org Code ..."},null,512),[[U,a.whonetOrgCode]])])]),o("div",Je,[o("label",Qe,[s[17]||(s[17]=o("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),c(a.VueMultiselect,{modelValue:a.kingdom,"onUpdate:modelValue":s[3]||(s[3]=t=>a.kingdom=t),options:a.abxKingdoms,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",He,[s[18]||(s[18]=o("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),c(a.VueMultiselect,{modelValue:a.phylum,"onUpdate:modelValue":s[4]||(s[4]=t=>a.phylum=t),options:a.phylums,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",Xe,[o("label",Ye,[s[19]||(s[19]=o("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),c(a.VueMultiselect,{modelValue:a.classValue,"onUpdate:modelValue":s[5]||(s[5]=t=>a.classValue=t),options:a.classes,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",Ze,[s[20]||(s[20]=o("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),c(a.VueMultiselect,{modelValue:a.order,"onUpdate:modelValue":s[6]||(s[6]=t=>a.order=t),options:a.orders,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",je,[o("label",$e,[s[21]||(s[21]=o("span",{class:"text-sm font-medium text-foreground"},"Family",-1)),c(a.VueMultiselect,{modelValue:a.family,"onUpdate:modelValue":s[7]||(s[7]=t=>a.family=t),options:a.familys,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",es,[s[22]||(s[22]=o("span",{class:"text-sm font-medium text-foreground"},"Genus",-1)),c(a.VueMultiselect,{modelValue:a.genus,"onUpdate:modelValue":s[8]||(s[8]=t=>a.genus=t),options:a.genuses,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",ss,[o("label",as,[s[23]||(s[23]=o("span",{class:"text-sm font-medium text-foreground"},"Organism Type",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":s[9]||(s[9]=t=>a.organismType=t),placeholder:"Organism Type ..."},null,512),[[U,a.organismType]])]),o("label",os,[s[24]||(s[24]=o("span",{class:"text-sm font-medium text-foreground"},"Anaerobe",-1)),k(o("input",{type:"checkbox",class:"mt-1 h-4 w-4 rounded border-border text-primary focus:ring-primary","onUpdate:modelValue":s[10]||(s[10]=t=>a.anaerobe=t)},null,512),[[Te,a.anaerobe]])])]),s[25]||(s[25]=o("hr",{class:"border-border"},null,-1)),s[26]||(s[26]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Organism ",-1))],32)]),_:1})):X("",!0)],64)}const is=he(Ve,[["render",ls],["__scopeId","data-v-4d09f0a0"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganism.vue"]]);export{is as default};
