import{Y as L,u as P,a0 as g,ah as h,a3 as V,_ as q,r as m,c as I,o as x,a as t,z as c,A,C as D,K as o,M as n,F as z,H as R,I as w,B as K,aK as H,aL as N,a4 as U}from"./index-OdhKCqIc.js";import{c as O,a as G,u as Q,F as Y}from"./index.esm-BfHj8iGm.js";import{i as J,m as W,n as X}from"./microbiology.mutations-cVAbKt4K.js";import{E as Z,a as j,b as $,c as ee,d as te}from"./EmptyTitle-aCQRDpx3.js";import{I as oe}from"./Input-BEm5S0CJ.js";import{T as le}from"./Textarea-T3VcJTEo.js";import{F as ae,a as ne,b as re}from"./FormMessage-CgXFMXx9.js";import{F as ie}from"./FormLabel-DxP9wnWS.js";import{P as de}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const se=L({__name:"AbxGuideline",setup(B,{expose:l}){l();const{withClientMutation:_,withClientQuery:e}=P();let b=g(!1),v=g("");const i=g(!0),d=g(null),F=O({name:G().trim().required("Name is required"),code:G().trim().required("Code is required"),description:G().trim().nullable()}),{handleSubmit:u,resetForm:y,setValues:C}=Q({validationSchema:F,initialValues:{name:"",code:"",description:""}}),s=g([]);h(()=>{e(J,{},"abxGuidelinesAll").then(r=>{r&&(s.value=r)})});function E(r,f={}){i.value=r,b.value=!0,v.value=(r?"Create":"Edit")+" Abx Guideline",r?(d.value=null,y({values:{name:"",code:"",description:""}})):(d.value=f.uid??null,C({name:f.name??"",code:f.code??"",description:f.description??""}))}const a=u(r=>{const f={name:r.name,code:r.code,description:r.description??null};i.value===!0&&_(W,{payload:f},"createAbxGuideline").then(p=>{p&&s.value.unshift(p)}),i.value===!1&&d.value&&_(X,{uid:d.value,payload:f},"updateAbxGuideline").then(p=>{if(p){const k=s.value.findIndex(M=>M.uid==p.uid);k>-1&&(s.value=[...s.value.map((M,S)=>S===k?p:M)])}}),b.value=!1}),T={withClientMutation:_,withClientQuery:e,get showModal(){return b},set showModal(r){b=r},get formTitle(){return v},set formTitle(r){v=r},formAction:i,currentUid:d,guidelineSchema:F,handleSubmit:u,resetForm:y,setValues:C,abxGuidelines:s,FormManager:E,saveForm:a,get Empty(){return te},get EmptyContent(){return ee},get EmptyDescription(){return $},get EmptyHeader(){return j},get EmptyTitle(){return Z},get Button(){return V},get Input(){return oe},get Textarea(){return le},get FormControl(){return re},get FormField(){return Y},get FormItem(){return ne},get FormLabel(){return ie},get FormMessage(){return ae},PageHeading:de};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),me={class:"space-y-6"},ue={class:"border border-border bg-card rounded-lg shadow-md"},fe={class:"relative w-full overflow-auto"},pe={class:"text-lg font-semibold text-foreground"},ce={class:"flex justify-end space-x-2"};function be(B,l,_,e,b,v){const i=m("TableHead"),d=m("TableRow"),F=m("TableHeader"),u=m("TableCell"),y=m("TableEmpty"),C=m("TableBody"),s=m("Table"),E=m("Modal");return x(),I("div",me,[t(e.PageHeading,{title:"Antibiotic Guidelines"},{default:o(()=>[t(e.Button,{onClick:l[0]||(l[0]=a=>e.FormManager(!0))},{default:o(()=>[...l[4]||(l[4]=[n("Add Guideline",-1)])]),_:1})]),_:1}),c("div",ue,[c("div",fe,[t(s,{class:"w-full caption-bottom text-sm"},{default:o(()=>[t(F,{class:"[&_tr]:border-b"},{default:o(()=>[t(d,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...l[5]||(l[5]=[n("Name",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...l[6]||(l[6]=[n("Description",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...l[7]||(l[7]=[n("Code",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...l[8]||(l[8]=[c("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),t(C,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(x(!0),I(z,null,R(e.abxGuidelines,a=>(x(),A(d,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(u,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[n(w(a?.name),1)]),_:2},1024),t(u,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[n(w(a?.description),1)]),_:2},1024),t(u,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[n(w(a?.code),1)]),_:2},1024),t(u,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:T=>e.FormManager(!1,a),class:"mr-2"},{default:o(()=>[...l[9]||(l[9]=[n(" Edit ",-1)])]),_:1},8,["onClick"]),t(e.Button,{variant:"destructive",size:"sm",onClick:T=>B.deleteGuideline(a)},{default:o(()=>[...l[10]||(l[10]=[n(" Delete ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e.abxGuidelines||e.abxGuidelines.length===0?(x(),A(y,{key:0,colspan:4},{default:o(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[t(e.EmptyContent,null,{default:o(()=>[t(e.EmptyHeader,null,{default:o(()=>[t(e.EmptyTitle,null,{default:o(()=>[...l[11]||(l[11]=[n("No guidelines found",-1)])]),_:1}),t(e.EmptyDescription,null,{default:o(()=>[...l[12]||(l[12]=[n("Add a guideline to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})]),_:1})])]),e.showModal?(x(),A(E,{key:0,onClose:l[3]||(l[3]=a=>e.showModal=!1)},{header:o(()=>[c("h3",pe,w(e.formTitle),1)]),body:o(()=>[c("form",{onSubmit:l[2]||(l[2]=K((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-4"},[t(e.FormField,{name:"name"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...l[13]||(l[13]=[n("Name",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Input,H(N(a)),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...l[14]||(l[14]=[n("Description",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Textarea,U(a,{rows:"3"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"code"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...l[15]||(l[15]=[n("Code",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Input,H(N(a)),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),c("div",ce,[t(e.Button,{type:"button",variant:"outline",onClick:l[1]||(l[1]=a=>e.showModal=!1)},{default:o(()=>[...l[16]||(l[16]=[n(" Cancel ",-1)])]),_:1}),t(e.Button,{type:"submit"},{default:o(()=>[...l[17]||(l[17]=[n("Save",-1)])]),_:1})])],32)]),_:1})):D("",!0)])}const Me=q(se,[["render",be],["__scopeId","data-v-cb02f4a4"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/antibiotics/AbxGuideline.vue"]]);export{Me as default};
