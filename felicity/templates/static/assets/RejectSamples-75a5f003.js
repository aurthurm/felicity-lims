import{P as S,a9 as j,Q as k,f as C,aa as V,h as D,r as E,o as a,c as i,b as s,F as u,D as _,E as n,A as p,a4 as N,V as q,C as I,a as A,z as M,J as P,_ as T}from"./index-66877f9a.js";import{u as U}from"./samples-91510e6f.js";import{u as B}from"./analysis-793745a0.js";import"./analyses.mutations-7e87125c.js";import"./storage.mutations-2fc58560.js";const F={class:"text-gray-800 font-bold"},J={class:"grid grid-cols-12 gap-1 mt-2"},O={class:"col-span-6 grid grid-cols-2 gap-1"},$={class:"col-span-1"},z={class:"flex w-full"},L={class:"flex w-full"},Q={class:"flex w-full"},G={class:"col-span-1"},H={class:"flex w-full"},K={class:"flex w-full"},W={class:"col-span-5"},X={class:"grid grid-cols-2 gap-2"},Y={class:"col-span-1"},Z={class:"flex flex-col whitespace-nowrap w-full"},ss=["onUpdate:modelValue"],es=["value"],ts={class:"col-span-1"},os={class:"flex flex-col whitespace-nowrap w-full"},ns=["onUpdate:modelValue"],ls={class:"col-span-1 pt-4 pl-4"},as=["onClick"],is=S({__name:"RejectSamples",setup(rs){j();const c=k(),f=B(),{rejectSamples:y}=U(),m=c.options.history.state,r=C({rejections:[]}),w=JSON.parse(window.history.state.samples);let h=[];for(let o of w)o.reasons=[],o.other=void 0,h.push(o);r.rejections=h,V(()=>f.fetchRejectionReasons());const g=(o,e)=>{let d=[];return o?.forEach(t=>d.push(t.name)),e?.forEach(t=>d.push(t.name)),d.join(", ")},x=o=>{r.rejections?.forEach(e=>{e.reasons=o.reasons,e.other=o.other})},b=D(()=>f.getRejectionReasons),R=async()=>{const o=[];r.rejections?.forEach(e=>{o.push({uid:e?.uid,reasons:e?.reasons,other:e?.other})}),await y(o).then(e=>{o.length==1&&m.back?.toString().includes("patient")?c.push({path:m.back.toString()}):c.push({name:"samples-listing"})})};return(o,e)=>{const d=E("font-awesome-icon");return a(),i(u,null,[e[12]||(e[12]=s("h4",null,"Sample Rejection",-1)),(a(!0),i(u,null,_(r.rejections,(t,v)=>(a(),i("div",{key:v},[e[11]||(e[11]=s("hr",{class:"my-4"},null,-1)),s("h2",F,n(t?.sampleId)+" â†’ "+n(t?.status),1),s("div",J,[s("div",O,[s("div",$,[s("div",z,[e[1]||(e[1]=s("span",{class:"text-gray-700 font-semibold w-4/12"},"Sample Type",-1)),s("span",null,n(t?.sampleType?.name),1)]),s("div",L,[e[2]||(e[2]=s("span",{class:"text-gray-700 font-semibold w-4/12"},"Client Sample ID",-1)),s("span",null,n(t?.analysisRequest?.clientRequestId),1)]),s("div",Q,[e[3]||(e[3]=s("span",{class:"text-gray-700 font-semibold w-4/12"},"Anayses",-1)),s("span",null,n(g(t?.profiles,t?.analyses)),1)])]),s("div",G,[s("div",H,[e[4]||(e[4]=s("span",{class:"text-gray-700 font-semibold w-4/12"},"Patient",-1)),s("span",null,n(t?.analysisRequest?.patient?.firstName)+" "+n(t?.analysisRequest?.patient?.lastName),1)]),s("div",K,[e[5]||(e[5]=s("span",{class:"text-gray-700 font-semibold w-4/12"},"Client Patient ID",-1)),s("span",null,n(t?.analysisRequest?.patient?.clientPatientId),1)])])]),s("div",W,[s("div",X,[s("div",Y,[s("label",Z,[e[7]||(e[7]=s("span",{class:"text-gray-800 font-bold"},"Rejection Reasons",-1)),e[8]||(e[8]=s("hr",null,null,-1)),p(s("select",{name:"reasons",rows:"3",class:"form-input mt-1",multiple:"","onUpdate:modelValue":l=>t.reasons=l},[e[6]||(e[6]=s("option",{value:""},null,-1)),(a(!0),i(u,null,_(b.value,l=>(a(),i("option",{key:l.uid,value:l.uid},n(l.reason),9,es))),128))],8,ss),[[N,t.reasons]])])]),s("div",ts,[s("label",os,[e[9]||(e[9]=s("span",{class:"text-gray-700 font-bold"},"Other",-1)),e[10]||(e[10]=s("hr",null,null,-1)),p(s("input",{type:"text",class:"form-input mt-1 block w-full","onUpdate:modelValue":l=>t.other=l},null,8,ns),[[q,t.other]])])])])]),s("div",ls,[p(s("button",{class:"ml-4 mt-4",onClick:l=>x(t)},[A(d,{icon:"level-down-alt"})],8,as),[[I,v===0]])])])]))),128)),r.rejections?.length>0?(a(),i("button",{key:0,onClick:e[0]||(e[0]=M(t=>R(),["prevent"])),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600 rounded-sm transition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Reject Samples ")):P("",!0)],64)}}}),ms=T(is,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{ms as default};
