const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css"])))=>i.map(i=>d[i]);
import{a0 as O,f as J,a7 as p,ad as K,a1 as Q,a6 as R,_ as z,r as h,c as m,o as d,a as N,A as e,C as H,E as g,N as x,P as W,J as X,K as Y,L as l,D as Z,F as w,a2 as k}from"./index-DApeomWQ.js";import{c as $,a as A,u as ee,b as C}from"./index.esm-Cx9agkcQ.js";import{i as te,m as oe,n as ie}from"./microbiology.mutations-DdKq3C1T.js";const se=O({__name:"AbxGuideline",setup(E,{expose:t}){t();const G=Q(()=>R(()=>import("./index-DApeomWQ.js").then(s=>s.cl),__vite__mapDeps([0,1]))),{withClientMutation:o,withClientQuery:y}=J();let f=p(!1),b=p("");const a=p(!0),n=p(null),i=$({name:A().trim().required("Name is required"),code:A().trim().required("Code is required"),description:A().trim().nullable()}),{handleSubmit:v,resetForm:M,setValues:D}=ee({validationSchema:i,initialValues:{name:"",code:"",description:""}}),{value:S,errorMessage:T}=C("name"),{value:q,errorMessage:U}=C("code"),{value:B,errorMessage:P}=C("description"),c=p([]);K(()=>{y(te,{},"abxGuidelinesAll").then(s=>{s&&(c.value=s)})});function j(s,r={}){a.value=s,f.value=!0,b.value=(s?"Create":"Edit")+" Abx Guideline",s?(n.value=null,M({values:{name:"",code:"",description:""}})):(n.value=r.uid??null,D({name:r.name??"",code:r.code??"",description:r.description??""}))}const I=v(s=>{const r={name:s.name,code:s.code,description:s.description??null};a.value===!0&&o(oe,{payload:r},"createAbxGuideline").then(u=>{u&&c.value.unshift(u)}),a.value===!1&&n.value&&o(ie,{uid:n.value,payload:r},"updateAbxGuideline").then(u=>{if(u){const V=c.value.findIndex(_=>_.uid==u.uid);V>-1&&(c.value=[...c.value.map((_,L)=>L===V?u:_)])}}),f.value=!1}),F={modal:G,withClientMutation:o,withClientQuery:y,get showModal(){return f},set showModal(s){f=s},get formTitle(){return b},set formTitle(s){b=s},formAction:a,currentUid:n,guidelineSchema:i,handleSubmit:v,resetForm:M,setValues:D,name:S,nameError:T,code:q,codeError:U,description:B,descriptionError:P,abxGuidelines:c,FormManager:j,saveForm:I};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),ne={class:"space-y-6"},re={class:"shadow-sm rounded-lg bg-card p-6"},de={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-border fel-table"},ae={class:"divide-y divide-border bg-background"},ce={class:"whitespace-nowrap text-sm text-foreground"},ue={class:"whitespace-nowrap text-sm text-foreground"},me={class:"whitespace-nowrap text-sm text-foreground"},fe={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},be=["onClick"],pe=["onClick"],ve={class:"text-lg font-semibold text-foreground"},ge={class:"space-y-2"},xe={key:0,class:"text-sm text-destructive"},ye={class:"space-y-2"},_e={key:0,class:"text-sm text-destructive"},he={class:"space-y-2"},we={key:0,class:"text-sm text-destructive"},ke={class:"flex justify-end space-x-2"};function Ae(E,t,G,o,y,f){const b=h("fel-button"),a=h("fel-heading"),n=h("fel-modal");return d(),m("div",ne,[N(a,{title:"Antibiotic Guidelines"},{default:x(()=>[N(b,{onClick:t[0]||(t[0]=i=>o.FormManager(!0))},{default:x(()=>[...t[7]||(t[7]=[W("Add Guideline",-1)])]),_:1})]),_:1}),e("div",re,[e("div",de,[e("table",le,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"text-left text-sm font-semibold text-foreground"},"Code"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ae,[(d(!0),m(X,null,Y(o.abxGuidelines,i=>(d(),m("tr",{key:i?.uid,class:"hover:bg-muted/50"},[e("td",ce,l(i?.name),1),e("td",ue,l(i?.description),1),e("td",me,l(i?.code),1),e("td",fe,[e("button",{onClick:v=>o.FormManager(!1,i),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2 mr-2"}," Edit ",8,be),e("button",{onClick:v=>E.deleteGuideline(i),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-destructive bg-background text-destructive hover:bg-destructive hover:text-destructive-foreground h-9 px-4 py-2"}," Delete ",8,pe)])]))),128))])])])]),o.showModal?(d(),H(n,{key:0,onClose:t[6]||(t[6]=i=>o.showModal=!1)},{header:x(()=>[e("h3",ve,l(o.formTitle),1)]),body:x(()=>[e("form",{onSubmit:t[5]||(t[5]=Z((...i)=>o.saveForm&&o.saveForm(...i),["prevent"])),class:"space-y-4"},[e("div",ge,[t[9]||(t[9]=e("label",{for:"name",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Name",-1)),w(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=i=>o.name=i),type:"text",class:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:""},null,512),[[k,o.name]]),o.nameError?(d(),m("p",xe,l(o.nameError),1)):g("",!0)]),e("div",ye,[t[10]||(t[10]=e("label",{for:"description",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Description",-1)),w(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=i=>o.description=i),class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",rows:"3"},null,512),[[k,o.description]]),o.descriptionError?(d(),m("p",_e,l(o.descriptionError),1)):g("",!0)]),e("div",he,[t[11]||(t[11]=e("label",{for:"code",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Code",-1)),w(e("input",{id:"code","onUpdate:modelValue":t[3]||(t[3]=i=>o.code=i),type:"text",class:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:""},null,512),[[k,o.code]]),o.codeError?(d(),m("p",we,l(o.codeError),1)):g("",!0)]),e("div",ke,[e("button",{type:"button",onClick:t[4]||(t[4]=i=>o.showModal=!1),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Cancel "),t[12]||(t[12]=e("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2"}," Save ",-1))])],32)]),_:1})):g("",!0)])}const Me=z(se,[["render",Ae],["__scopeId","data-v-cb02f4a4"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/antibiotics/AbxGuideline.vue"]]);export{Me as default};
