import{f as A,r as h,h as r,k as p,y as c,x as e,ag as u,F as T,ak as P,D as m,al as O,u as s,B as R,j as g,A as D,i as $,_ as F,d as U,s as q}from"./_plugin-vue_export-helper-3f67fb71.js";import{B as I,j as z,q as G}from"./billing-356772f3.js";import H from"./SampleListing-319da996.js";import J from"./LoadingMessage-83976fce.js";import{a as K}from"./index-3189f120.js";import Q from"./SimpleModal-1f91868a.js";import{D as W,a as X,b as Y}from"./clients.mutations-f140edee.js";import{h as C,o as y,a as x}from"./constants-df420cc9.js";import{b as w,v as k,a as Z}from"./runtime-dom.esm-bundler-6e07ef74.js";import ee from"./AuditLog-4ad6be59.js";import"./samples-6869bb19.js";const te={class:"overflow-x-auto"},oe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},se={class:"min-w-full"},ae=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Full Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Phone "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),le={class:"bg-white"},ne={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ie={class:"flex items-center"},re={class:"text-sm leading-5 text-gray-800"},de={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ce={class:"text-sm leading-5 text-sky-800"},ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},me={class:"text-sm leading-5 text-sky-800"},pe={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},be=["onClick"],he=["onClick"],fe={key:0,class:"py-4 text-center"},_e={action:"post",class:"p-1"},ge={class:"grid grid-cols-2 gap-x-4 mb-4"},ve={class:"block col-span-1 mb-2"},Ce=e("span",{class:"text-gray-700"},"Full Name",-1),ye={class:"block col-span-1 mb-2"},xe=e("span",{class:"text-gray-700"},"Email",-1),we={class:"block col-span-1 mb-2"},ke=e("span",{class:"text-gray-700"},"Mobile Phone",-1),Te=e("hr",null,null,-1),Ne=A({__name:"ContactTable",props:{clientUid:String},setup(L){let d=I(),l=K();const{withClientMutation:b}=G(),{clientContacts:f,fetchingClientContacts:N}=z(d);let v=h(""),n=h(!1),_=h(!1),a=h({});d.fetchClientContacts(l.query.clientUid);function M(){b(X,{payload:{clientUid:l.query.clientUid,firstName:a.value.firstName,mobilePhone:a.value.mobilePhone,email:a.value.email}},"createClientContact").then(i=>d.addClientContact(i))}function S(){b(Y,{uid:a.value.uid,payload:{clientUid:l.query.clientUid,firstName:a.value.firstName,mobilePhone:a.value.mobilePhone,email:a.value.email}},"updateClientContact").then(i=>d.updateClientContact(i))}function E(i,t={}){_.value=i,v.value=(i?"CREATE":"EDIT")+" CONTACT",n.value=!0,i?Object.assign(a,{}):Object.assign(a.value,{...t})}function V(){_.value===!0&&M(),_.value||S(),n.value=!1}function j(i){b(W,{uid:i},"deleteClientContact").then(t=>d.deleteClientContact(t?.uid))}return(i,t)=>(r(),p(T,null,[c(" Contacts Table View "),e("div",te,[u(e("button",{onClick:t[0]||(t[0]=o=>E(!0)),class:"px-1 py-0 mb-4 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Contact ",512),[[w,C(x.CREATE,y.CLIENT)]]),e("div",oe,[e("table",se,[ae,e("tbody",le,[(r(!0),p(T,null,P(s(f),o=>(r(),p("tr",{key:o.uid},[e("td",ne,[e("div",ie,[e("div",null,[e("div",re,m(o.firstName)+" "+m(o.lastName),1)])])]),e("td",de,[e("div",ce,m(o.email),1)]),e("td",ue,[e("div",me,m(o.mobilePhone),1)]),e("td",pe,[u(e("button",{onClick:B=>E(!1,o),class:"px-2 py-1 mr-2 border-gray-500 border text-orange-500rounded-smtransition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"}," Edit ",8,be),[[w,C(x.UPDATE,y.CLIENT)]]),O(),u(e("button",{onClick:B=>j(o?.uid),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500rounded-smtransition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Deactivate ",8,he),[[w,C(x.UPDATE,y.CLIENT)]])])]))),128))])]),s(N)?(r(),p("div",fe,[R(J,{message:"Fetching client contacts ..."})])):c("v-if",!0)])]),c(" Contact Edit Form Modal "),s(n)?(r(),g(Q,{key:0,onClose:t[5]||(t[5]=o=>$(n)?n.value=!1:n=!1)},{header:D(()=>[e("h3",null,m(s(v)),1)]),body:D(()=>[e("form",_e,[e("div",ge,[e("label",ve,[Ce,u(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=o=>s(a).firstName=o),placeholder:"Full Name ..."},null,512),[[k,s(a).firstName]])]),e("label",ye,[xe,u(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":t[2]||(t[2]=o=>s(a).email=o),placeholder:"Email ..."},null,512),[[k,s(a).email]])]),e("label",we,[ke,u(e("input",{class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=o=>s(a).mobilePhone=o),placeholder:"Mobile Phone ..."},null,512),[[k,s(a).mobilePhone]])])]),Te,e("button",{type:"button",onClick:t[4]||(t[4]=Z(o=>V(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):c("v-if",!0)],64))}}),Ee=F(Ne,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/client/_id/ContactTable.vue"]]),De={class:"col-span-12"},Ue={class:"bg-white shadow-md mt-2"},Ae={class:"-mb-px flex justify-start"},Pe=["onClick"],$e={class:"pt-4"},Fe=A({__name:"ClientDetail",setup(L){const d=I();let l=h("samples");const b=["samples","contacts","logs"];U(()=>"tab-"+l.value);let f=U(()=>d.getClient);return(N,v)=>(r(),p("section",De,[e("nav",Ue,[e("div",Ae,[(r(),p(T,null,P(b,n=>e("a",{key:n,class:q(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":s(l)===n}]),onClick:_=>$(l)?l.value=n:l=n},m(n),11,Pe)),64))])]),e("div",$e,[s(l)==="samples"?(r(),g(H,{key:0})):c("v-if",!0),s(l)==="contacts"?(r(),g(Ee,{key:1,clientUid:s(f)?.uid},null,8,["clientUid"])):c("v-if",!0),s(l)==="logs"?(r(),g(ee,{key:2,targetType:"client",targetId:s(f)?.uid},null,8,["targetId"])):c("v-if",!0)])]))}}),Ge=F(Fe,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/client/_id/ClientDetail.vue"]]);export{Ge as default};
