import{S as V,a7 as S,i as h,a0 as x,h as D,f as L,r as M,o as l,c as m,N as e,F as b,E as g,H as n,a3 as p,a5 as r,y as F,L as $,A as G,C as a,X as f,a2 as T,ad as j,K as O,at as P,au as R,_ as I}from"./index-0c222abb.js";import{u as z}from"./user-3537f37b.js";import"./_queries-98debe01.js";const H={class:"space-y-6"},K={class:"flex justify-between items-center"},X={class:"bg-card rounded-lg shadow-sm"},q={class:"min-w-full divide-y divide-border"},J={class:"bg-background divide-y divide-border"},Q={class:"px-6 py-4 whitespace-nowrap text-sm"},W={class:"px-6 py-4 whitespace-nowrap text-sm"},Y={class:"px-6 py-4 whitespace-nowrap text-sm"},Z={class:"px-6 py-4 whitespace-nowrap text-sm"},ee={class:"px-6 py-4 whitespace-nowrap text-sm"},se={class:"px-6 py-4 whitespace-nowrap text-sm"},te={class:"px-6 py-4 whitespace-nowrap text-sm"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},re=["onClick"],ie={class:"grid grid-cols-2 gap-6"},ne={class:"space-y-2"},de={class:"space-y-2"},le={class:"space-y-2"},ae={class:"space-y-2"},ue=["disabled"],ce={class:"space-y-2"},me={class:"space-y-2"},pe={class:"col-span-2 space-y-2"},fe=["value"],be={class:"flex items-center space-x-4"},xe={class:"flex items-center space-x-2"},ge=["aria-checked"],ye={class:"flex items-center space-x-4"},ve={class:"flex items-center space-x-2"},we=["aria-checked"],ke={class:"flex justify-end pt-6"},he={type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},Ue=V({__name:"UsersListing",setup(_e){const u=z();S(()=>{u.fetchUsers({}),u.fetchGroupsAndPermissions()});let U=h(()=>u.getUsers);const _=h(()=>u.getGroups);let c=x(!1),N=x(""),o=D({});const y=x(!0),{withClientMutation:v}=L();function A(){v(P,o,"createUser").then(d=>u.addUser(d))}function C(){v(R,o,"updateUser").then(d=>u.updateUser(d))}function w(d,s={}){if(y.value=d,c.value=!0,N.value=(d?"CREATE":"EDIT")+" USER",d){let i=new Object;i.firstName=void 0,i.lastName=void 0,i.email=void 0,i.isActive=!0,i.groupUid=void 0,i.userName=void 0,i.isBlocked=!1,Object.assign(o,{...i})}else s.userUid=s?.uid,s.groupUid=s?.groups[0]?.uid,Object.assign(o,{...s})}function E(){y.value?A():C(),c.value=!1}const B=["First Name","Last Name","Email","Active","Group","Username","Blocked","Actions"];return(d,s)=>{const i=M("fel-modal");return l(),m(b,null,[e("div",H,[e("div",K,[s[12]||(s[12]=e("h1",{class:"text-2xl font-semibold"},"Users",-1)),e("button",{onClick:s[0]||(s[0]=t=>w(!0)),class:"inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"Add new user"}," Add User ")]),e("div",X,[e("table",q,[e("thead",null,[e("tr",null,[(l(),m(b,null,g(B,t=>e("th",{key:t,class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground tracking-wider"},n(t),1)),64))])]),e("tbody",J,[(l(!0),m(b,null,g(r(U),t=>(l(),m("tr",{key:t.uid,class:"hover:bg-muted/50"},[e("td",Q,n(t.firstName),1),e("td",W,n(t.lastName),1),e("td",Y,n(t.email),1),e("td",Z,[e("span",{class:p(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.isActive?"bg-success/20 text-success":"bg-destructive/20 text-destructive"])},n(t.isActive?"Active":"Inactive"),3)]),e("td",ee,n(t.groups?.map(k=>k?.name).join(", ")),1),e("td",se,n(t.userName),1),e("td",te,[e("span",{class:p(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.isBlocked?"bg-destructive/20 text-destructive":"bg-success/20 text-success"])},n(t.isBlocked?"Blocked":"Active"),3)]),e("td",oe,[e("button",{onClick:k=>w(!1,t),class:"text-primary hover:text-primary/80 focus:outline-none focus:underline","aria-label":"Edit user"}," Edit ",8,re)])]))),128))])])])]),r(c)?(l(),F(i,{key:0,onClose:s[11]||(s[11]=t=>j(c)?c.value=!1:c=!1),title:r(o).uid?"Edit User":"Add User"},{body:$(()=>[e("form",{onSubmit:s[10]||(s[10]=G(t=>E(),["prevent"])),class:"space-y-6"},[e("div",ie,[e("div",ne,[s[13]||(s[13]=e("label",{for:"firstName",class:"block text-sm font-medium text-foreground"}," First Name ",-1)),a(e("input",{id:"firstName","onUpdate:modelValue":s[1]||(s[1]=t=>r(o).firstName=t),type:"text",class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Enter first name"},null,512),[[f,r(o).firstName]])]),e("div",de,[s[14]||(s[14]=e("label",{for:"lastName",class:"block text-sm font-medium text-foreground"}," Last Name ",-1)),a(e("input",{id:"lastName","onUpdate:modelValue":s[2]||(s[2]=t=>r(o).lastName=t),type:"text",class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Enter last name"},null,512),[[f,r(o).lastName]])]),e("div",le,[s[15]||(s[15]=e("label",{for:"email",class:"block text-sm font-medium text-foreground"}," Email ",-1)),a(e("input",{id:"email","onUpdate:modelValue":s[3]||(s[3]=t=>r(o).email=t),type:"email",class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Enter email address"},null,512),[[f,r(o).email]])]),e("div",ae,[s[16]||(s[16]=e("label",{for:"userName",class:"block text-sm font-medium text-foreground"}," Username ",-1)),a(e("input",{id:"userName","onUpdate:modelValue":s[4]||(s[4]=t=>r(o).userName=t),type:"text",disabled:r(o).uid!=null,class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary disabled:bg-muted disabled:cursor-not-allowed",placeholder:"Enter username"},null,8,ue),[[f,r(o).userName]])]),e("div",ce,[s[17]||(s[17]=e("label",{for:"password",class:"block text-sm font-medium text-foreground"}," Password ",-1)),a(e("input",{id:"password","onUpdate:modelValue":s[5]||(s[5]=t=>r(o).password=t),type:"password",class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Enter password"},null,512),[[f,r(o).password]])]),e("div",me,[s[18]||(s[18]=e("label",{for:"passwordc",class:"block text-sm font-medium text-foreground"}," Confirm Password ",-1)),a(e("input",{id:"passwordc","onUpdate:modelValue":s[6]||(s[6]=t=>r(o).passwordc=t),type:"password",class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Confirm password"},null,512),[[f,r(o).passwordc]])]),e("div",pe,[s[20]||(s[20]=e("label",{for:"groupUid",class:"block text-sm font-medium text-foreground"}," Group ",-1)),a(e("select",{id:"groupUid","onUpdate:modelValue":s[7]||(s[7]=t=>r(o).groupUid=t),class:"mt-1 block w-full rounded-md border-border bg-background px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"},[s[19]||(s[19]=e("option",{value:""},"Select a group",-1)),(l(!0),m(b,null,g(_.value,t=>(l(),m("option",{key:t.uid,value:t.uid},n(t?.name),9,fe))),128))],512),[[T,r(o).groupUid]])]),e("div",be,[e("label",xe,[s[21]||(s[21]=e("span",{class:"text-sm font-medium text-foreground"},"Blocked",-1)),e("button",{type:"button",role:"switch","aria-checked":r(o).isBlocked,onClick:s[8]||(s[8]=t=>r(o).isBlocked=!r(o).isBlocked),class:p(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",[r(o).isBlocked?"bg-destructive":"bg-success"]])},[e("span",{"aria-hidden":"true",class:p(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-background shadow ring-0 transition duration-200 ease-in-out",[r(o).isBlocked?"translate-x-5":"translate-x-0"]])},null,2)],10,ge)])]),e("div",ye,[e("label",ve,[s[22]||(s[22]=e("span",{class:"text-sm font-medium text-foreground"},"Active",-1)),e("button",{type:"button",role:"switch","aria-checked":r(o).isActive,onClick:s[9]||(s[9]=t=>r(o).isActive=!r(o).isActive),class:p(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",[r(o).isActive?"bg-success":"bg-destructive"]])},[e("span",{"aria-hidden":"true",class:p(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-background shadow ring-0 transition duration-200 ease-in-out",[r(o).isActive?"translate-x-5":"translate-x-0"]])},null,2)],10,we)])])]),e("div",ke,[e("button",he,n(r(o).uid?"Update":"Create")+" User ",1)])],32)]),_:1},8,["title"])):O("v-if",!0)],64)}}}),Ee=I(Ue,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/UsersListing.vue"]]);export{Ee as default};
