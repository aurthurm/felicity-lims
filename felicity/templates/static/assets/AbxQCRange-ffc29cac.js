import{P as G,e as N,Z as d,f as V,h as W,aa as q,o as M,c as F,b as t,a as p,K as g,a2 as s,x as L,E as Y,A as i,V as u,z as j,a7 as z,J as K,F as $,X as x,Y as v,af as B,_ as J}from"./index-f86d8273.js";import{j as X,P as Z,Q as H,R as ee,T as te}from"./microbiology.mutations-639b8f1d.js";const le={class:"w-full my-4"},ae={action:"post",class:"p-4"},se={class:"mb-6"},oe={class:"grid grid-cols-2 gap-4"},ne={class:"block"},ie={class:"block"},ue={class:"mb-6"},re={class:"grid grid-cols-3 gap-4"},de={class:"block"},me={class:"block"},fe={class:"block"},be={class:"block"},ce={class:"block"},pe={class:"block"},ge={class:"block"},xe={class:"block"},ve={class:"block"},ye={class:"block"},he={class:"mb-6"},Ae={class:"block"},Ce=G({__name:"AbxQCRange",setup(we){const _=x(()=>v(()=>import("./index-f86d8273.js").then(o=>o.cN),["assets/index-f86d8273.js","assets/index-ba19faea.css"])),Q=x(()=>v(()=>import("./FelDataTable-81fd0c3c.js"),["assets/FelDataTable-81fd0c3c.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),y=x(()=>v(()=>import("./vue-multiselect.esm-1db37a44.js"),["assets/vue-multiselect.esm-1db37a44.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),{withClientMutation:h,withClientQuery:b}=N();let m=d(!1),U=d(""),l=V({});const A=d(!0),C=d(!1),r=d([]),w=d([]),k=d([]);let n=V({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const R=d(0);let T=d({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const O=W(()=>r?.value?.length+" of "+R.value+" qcRanges"),D=d([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function c(o){b(H,{text:o.text,pageSize:o.first,sortBy:o.sortBy},void 0).then(e=>{const a=e.abxQcRangeAll,f=a.items;o.filterAction?(r.value=[],r.value=f):r.value=B(r.value,f,"uid"),R.value=a?.totalCount,T.value=a?.pageInfo}).finally(()=>{C.value=!1})}q(()=>{b(X,{},"abxGuidelinesAll").then(o=>{o&&(w.value=o)}),c(n),b(Z,{},"abxMediumAll").then(o=>{o&&(k.value=o)})});function P(o){n.first=100,n.after="",n.text=o.filterText,n.filterAction=!0,c(n)}function E(o){n.first=o.fetchCount,n.after=T?.value?.endCursor,n.text=o.filterText,n.filterAction=!1,c(n)}const I=()=>Object.assign(l,{});function S(){const o={guidelineUid:l.guideline?.uid,year:l.year,strain:l.strain,referenceTable:l.referenceTable,whonetOrgCode:l.whonetOrgCode,antibiotic:l.antibiotic,abxTest:l.abxTest,whonetAbxCode:l.whonetAbxCode,method:l.method,medium:l.medium,minimum:l.minimum,maximum:l.maximum};A.value===!0&&h(ee,{payload:o},"createAbxQcRange").then(e=>{e&&(r.value=B(r.value,[e],"uid"))}),A.value===!1&&h(te,{uid:l.uid,payload:o},"updateAbxQcRange").then(e=>{if(e){const a=r.value.findIndex(f=>f.uid==e.uid);r.value[a]=e}}),m.value=!1}return(o,e)=>(M(),F($,null,[t("div",le,[e[16]||(e[16]=t("hr",null,null,-1)),p(s(Q),{columns:D.value,data:r.value,toggleColumns:!0,loading:C.value,paginable:!0,pageMeta:{fetchCount:s(n).first,hasNextPage:!0,countNone:O.value},searchable:!0,filterable:!1,onOnSearchKeyUp:P,onOnSearchFocus:I,onOnPaginate:E,selectable:!1},{footer:g(()=>e[15]||(e[15]=[])),_:1},8,["columns","data","loading","pageMeta"])]),s(m)?(M(),L(s(_),{key:0,onClose:e[14]||(e[14]=a=>z(m)?m.value=!1:m=!1),"content-width":"w-1/2"},{header:g(()=>[t("h3",null,Y(s(U)),1)]),body:g(()=>[t("form",ae,[t("div",se,[e[19]||(e[19]=t("h4",{class:"text-lg font-semibold mb-4"},"Basic Information",-1)),t("div",oe,[t("label",ne,[e[17]||(e[17]=t("span",{class:"text-gray-700"},"Guidelines",-1)),p(s(y),{modelValue:s(l).guidelines,"onUpdate:modelValue":e[0]||(e[0]=a=>s(l).guidelines=a),options:w.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",ie,[e[18]||(e[18]=t("span",{class:"text-gray-700"},"Year",-1)),i(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=a=>s(l).year=a),placeholder:"Enter year"},null,512),[[u,s(l).year]])])])]),t("div",ue,[t("div",re,[t("label",de,[e[20]||(e[20]=t("span",{class:"text-gray-700"},"Strain",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=a=>s(l).strain=a),placeholder:"Strain"},null,512),[[u,s(l).strain]])]),t("label",me,[e[21]||(e[21]=t("span",{class:"text-gray-700"},"Reference Table",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=a=>s(l).referenceTable=a),placeholder:"Reference Table"},null,512),[[u,s(l).referenceTable]])]),t("label",fe,[e[22]||(e[22]=t("span",{class:"text-gray-700"},"Whonet Org Code",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>s(l).whonetOrgCode=a),placeholder:"Whonet Org Code"},null,512),[[u,s(l).whonetOrgCode]])]),t("label",be,[e[23]||(e[23]=t("span",{class:"text-gray-700"},"Antibiotic",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=a=>s(l).antibiotic=a),placeholder:"Antibiotic"},null,512),[[u,s(l).antibiotic]])]),t("label",ce,[e[24]||(e[24]=t("span",{class:"text-gray-700"},"Abx Test",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[6]||(e[6]=a=>s(l).abxTest=a),placeholder:"Abx Test"},null,512),[[u,s(l).abxTest]])]),t("label",pe,[e[25]||(e[25]=t("span",{class:"text-gray-700"},"Whonet Abx Code",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=a=>s(l).whonetAbxCode=a),placeholder:"Whonet Abx Code"},null,512),[[u,s(l).whonetAbxCode]])]),t("label",ge,[e[26]||(e[26]=t("span",{class:"text-gray-700"},"Method",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=a=>s(l).method=a),placeholder:"Method"},null,512),[[u,s(l).method]])]),t("label",xe,[e[27]||(e[27]=t("span",{class:"text-gray-700"},"Medium",-1)),p(s(y),{modelValue:s(l).medium,"onUpdate:modelValue":e[9]||(e[9]=a=>s(l).medium=a),options:k.value,searchable:!0,label:"name"},null,8,["modelValue","options"])]),t("label",ve,[e[28]||(e[28]=t("span",{class:"text-gray-700"},"Minimum",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[10]||(e[10]=a=>s(l).minimum=a),placeholder:"Minimum"},null,512),[[u,s(l).minimum]])]),t("label",ye,[e[29]||(e[29]=t("span",{class:"text-gray-700"},"Maximum",-1)),i(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[11]||(e[11]=a=>s(l).maximum=a),placeholder:"Maximum"},null,512),[[u,s(l).maximum]])])])]),t("div",he,[t("label",Ae,[e[30]||(e[30]=t("span",{class:"text-gray-700"},"Comments",-1)),i(t("textarea",{class:"form-textarea mt-1 block w-full","onUpdate:modelValue":e[12]||(e[12]=a=>s(l).comments=a),rows:"3",placeholder:"Additional comments..."},null,512),[[u,s(l).comments]])])]),e[31]||(e[31]=t("hr",{class:"my-6"},null,-1)),t("button",{type:"button",onClick:e[13]||(e[13]=j(a=>S(),["prevent"])),class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save QcRange ")])]),_:1})):K("",!0)],64))}});const Te=J(Ce,[["__scopeId","data-v-2041ea59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{Te as default};
