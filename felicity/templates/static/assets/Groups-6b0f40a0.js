import{d as F,aL as z,D as T,r as f,C as H,o as a,c as r,b as e,F as u,p as h,w as A,y as x,f as i,t as d,x as v,i as S,g as K,G as b,H as N,e as y,au as O,q as Q,v as Y,at as q,j as R,_ as D,Q as c,bu as W,bv as J,bw as X,O as Z,k as ee}from"./index-03fd00e9.js";const se={class:""},te={class:"container w-full my-4"},oe=e("hr",null,null,-1),le=e("hr",null,null,-1),ne=e("hr",null,null,-1),ie={class:"grid grid-cols-12 gap-4 mt-2"},ae={class:"col-span-3 overflow-y-scroll overscroll-contain max-h-[540px]"},re=["onClick"],ce={class:"cursor-pointer"},de={class:"flex-grow p-1"},ue={class:"font-medium text-gray-800 hover:text-gray-600 flex justify-between"},_e=e("span",{class:"text-sm text-gray-500"},null,-1),pe={key:0,class:"col-span-9"},he={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},me={class:"grid grid-cols-12 gap-3"},ge={class:"col-span-12 px-3 sm:px-0"},ve={class:"flex justify-between"},fe={class:"sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},be=e("hr",null,null,-1),ye={div:"",class:"flex justify-start mt-2"},xe=e("h3",{class:"mr-2 text-gray-600 font-semibold"},"Pages: ",-1),ke=e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),we=[ke],Ae={class:"bg-white shadow-md mt-2"},Ce={class:"-mb-px flex justify-start"},Ee=["onClick"],Pe={class:"mt-2 p-2 bg-white"},Ge={key:0},Te={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Se={class:"grid grid-cols-4 gap-2 w-full"},Ne=["onClick"],Oe={class:"flex-grow p-1"},Re={class:x(["font-medium text-gray-500 hover:text-gray-700 flex justify-start",{"text-gray-700 font-medium":!1}])},De=["onClick"],Me={class:"inline-block w-10 mr-2 align-middle transition duration-200 ease-in"},Ie=["onUpdate:modelValue"],Le=e("hr",null,null,-1),Ue={key:1},Ve=e("h3",null,"Error",-1),je=e("hr",null,null,-1),Be={action:"post",class:"p-1"},$e={class:"grid grid-cols-2 gap-x-4 mb-4"},Fe={class:"block col-span-2 mb-2"},ze=e("span",{class:"text-gray-700"},"Group Name",-1),He={class:"block col-span-2 mb-2"},Ke=e("span",{class:"text-gray-700"},"Pages",-1),Qe=["size"],Ye=["value"],qe={for:"toggle",class:"text-xs text-gray-700 mr-4"},We={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Je=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),Xe=e("hr",null,null,-1),Ze=F({__name:"Groups",setup(es){const M=R(()=>D(()=>import("./FelModal-78db0624.js"),["assets/FelModal-78db0624.js","assets/index-03fd00e9.js","assets/index-91994633.css","assets/FelModal-a7d23795.css"])),I=R(()=>D(()=>import("./FelAccordion-1b8d18df.js"),["assets/FelAccordion-1b8d18df.js","assets/index-03fd00e9.js","assets/index-91994633.css"])),C=[c.ADMINISTRATION,c.DASHBOARD,c.CLIENTS,c.PATIENTS,c.PATIENTS_COMPACT,c.SAMPLES,c.QC_SAMPLES,c.WORKSHEETS,c.NOTICE_MANAGER,c.BIO_BANKING,c.INVENTORY,c.REFERRAL];let _=z();const{withClientMutation:k}=Z();_.fetchGroupsAndPermissions();const L=T(()=>_.getGroups);let m=f("permissions");const U=["permissions"];let p=f(!1),E=f("");const w=f(!0);let o=H({});function V(l){const t=l.pages;Object.assign(o,{...l,pages:t?.split(",")||[]}),G.value?.forEach(s=>{s[1].forEach(n=>{n.checked=!1,o.permissions?.some(g=>g?.uid==n?.uid||!1)&&(n.checked=!0)})})}function P(l,t={}){w.value=l,p.value=!0,E.value=(l?"CREATE":"EDIT")+" ANALYSES PROFILE",l?Object.assign(o,{name:"",pages:[]}):Object.assign(o,{...t})}function j(){const l={...o},t=l.pages;l.pages=t.join(","),w.value===!0&&k(W,{payload:l},"createGroup").then(s=>_.addGroup(s)),w.value===!1&&k(J,{uid:o?.uid,payload:{name:l.name,pages:l.pages}},"updateGroup").then(s=>_.updateGroup(s)),p.value=!1}const B=(l,t)=>l?.reduce(function(s,n){return(s[n[t]]=s[n[t]]||[]).push(n),s},{}),G=T(()=>Array.from(Object.entries(B(_.getPermissions,"target"))));function $(l,t){k(X,{groupUid:l?.uid,permissionUid:t?.uid},"updateGroupPermissions").then(s=>_.updateGroupsAndPermissions(s))}return(l,t)=>(a(),r(u,null,[e("div",se,[e("div",te,[oe,e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:t[0]||(t[0]=s=>P(!0))},"Add Group"),le]),ne,e("div",ie,[e("section",ae,[e("ul",null,[(a(!0),r(u,null,h(L.value,s=>(a(),r("li",{key:s?.uid,onClick:A(n=>V(s),["prevent","stop"]),class:x(["bg-white shadow w-full p-1 mb-1 rounded-sm",{"border border-sky-800 bg-emerald-200":s?.uid===i(o)?.uid}])},[e("a",ce,[e("div",de,[e("div",ue,[e("span",null,d(s?.name),1),_e])])])],10,re))),128))])]),i(o)?.uid!==void 0?(a(),r("section",pe,[e("div",he,[e("div",me,[e("div",ge,[e("div",ve,[e("section",null,[e("h2",fe,d(i(o)?.name),1),be,e("div",ye,[xe,(a(!0),r(u,null,h(i(o)?.pages,s=>(a(),r("span",{key:s,class:"mr-2"},d(s?.toLowerCase()),1))),128))])]),e("div",null,[e("button",{onClick:t[1]||(t[1]=s=>P(!1)),class:"ml-4 inline-flex items-center justify-center w-8 h-8 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"},[...we])])])])])]),v(" Sample and Case Data "),e("nav",Ae,[e("div",Ce,[(a(),r(u,null,h(U,s=>e("a",{key:s,class:x(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":i(m)===s}]),onClick:n=>S(m)?m.value=s:m=s},d(s),11,Ee)),64))])]),e("section",Pe,[i(m)==="permissions"?(a(),r("div",Ge,[e("section",Te,[e("div",Se,[(a(!0),r(u,null,h(G.value,s=>(a(),r("div",{class:"col-span-1",key:s[0]},[K(i(I),null,{title:b(()=>[N(d(s[0]),1)]),body:b(()=>[e("div",null,[e("ul",null,[(a(!0),r(u,null,h(s[1],n=>(a(),r("li",{key:n?.uid,class:x(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]]),onClick:A(g=>n.checked=!n?.checked,["prevent"])},[e("div",Oe,[e("div",Re,[e("label",{for:"toggle",class:"text-xs text-gray-700 mr-2",onClick:g=>$(i(o),n)},[e("div",Me,[y(e("input",{type:"checkbox","onUpdate:modelValue":g=>n.checked=g,class:""},null,8,Ie),[[O,n.checked]])]),e("span",null,d(n?.action),1)],8,De)])]),Le],8,Ne))),128))])])]),_:2},1024)]))),128))])])])):(a(),r("div",Ue,[v(" fiancials "),Ve,je]))])])):v("v-if",!0)])]),v(" AnaltsisProfile Form Modal "),i(p)?(a(),Q(i(M),{key:0,onClose:t[6]||(t[6]=s=>S(p)?p.value=!1:p=!1)},{header:b(()=>[e("h3",null,d(i(E)),1)]),body:b(()=>[e("form",Be,[e("div",$e,[e("label",Fe,[ze,y(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=s=>i(o).name=s),placeholder:"Name ..."},null,512),[[Y,i(o).name]])]),e("label",He,[Ke,y(e("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":t[3]||(t[3]=s=>i(o).pages=s),class:"form-input mt-1 block w-full",multiple:"",size:C.length},[(a(),r(u,null,h(C,s=>e("option",{key:s,value:s},d(s),9,Ye)),64))],8,Qe),[[q,i(o).pages]])]),e("label",qe,[N("Active "),e("div",We,[y(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":t[4]||(t[4]=s=>i(o).active=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[O,i(o).active]]),Je])])]),Xe,e("button",{type:"button",onClick:t[5]||(t[5]=A(s=>j(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):v("v-if",!0)],64))}}),ts=ee(Ze,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{ts as default};
