import{d as te,I as se,r as p,n as P,p as T,q as oe,m as ne,o as l,c as d,b as e,y as n,e as v,v as x,f as o,ax as ie,t as u,F as M,C as $,g as N,A,B as k,av as V,aK as G,aL as F,aM as H,z as ae,w as re,i as z,j as O,D as le,E as de,_ as R,k as ce}from"./index-fc86f1fc.js";import{G as ue,A as me,E as fe}from"./grind.queries-5040943e.js";import{U as he}from"./_queries-be63b368.js";const r=b=>(le("data-v-3bab7638"),b=b(),de(),b),ge={class:"px-4 py-8"},pe={class:"flex justify-between items-center mb-6"},_e=r(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Schemes",-1)),ve={class:"flex space-x-4"},xe={class:"relative"},be=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),ye=[be],we=r(()=>e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),k(" Add Scheme ")],-1)),ke=[we],Ce={class:"mb-4 text-sm text-gray-600"},De={key:0},Se={key:1},Me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Ne={class:"p-6"},Ae={class:"flex justify-between items-start mb-3"},Ve=["onClick"],je=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),Be=[je],Ee={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Le={class:"flex items-center text-xs text-gray-500 mb-4"},Ue={class:"flex items-center mr-4"},Ye=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Ie={key:0,class:"mb-4"},Pe=r(()=>e("p",{class:"text-xs text-gray-500 mb-1"},"Assignee:",-1)),Te={class:"flex items-center"},$e={class:"text-sm"},Ge={key:1},Fe=r(()=>e("p",{class:"text-xs text-gray-500 mb-1"},"Members:",-1)),He={class:"flex -space-x-2 overflow-hidden"},ze=["title"],Oe=["title"],Re={class:"mt-4 pt-3 border-t border-gray-100 text-xs text-gray-500 flex justify-between"},Ke={key:0},qe={key:0,class:"mt-8 flex justify-center"},Qe=["disabled"],Je={key:0},We={key:1},Xe={key:1,class:"flex flex-col items-center justify-center py-12"},Ze=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),et=r(()=>e("h3",{class:"text-lg font-medium text-gray-600 mb-2"},"No schemes found",-1)),tt=r(()=>e("p",{class:"text-gray-500 mb-4"},"Get started by creating your first scheme",-1)),st=r(()=>e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),k(" Create Scheme ")],-1)),ot=[st],nt={class:"text-lg font-semibold"},it={class:"mb-4"},at=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"title"},[k(" Scheme Title "),e("span",{class:"text-red-500"},"*")],-1)),rt={class:"mb-4"},lt=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"description"}," Description ",-1)),dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ct=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"startDate"}," Start Date ",-1)),ut=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"endDate"}," End Date ",-1)),mt={class:"mb-4"},ft=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Assignee ",-1)),ht={class:"mb-6"},gt=r(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Members ",-1)),pt={class:"flex justify-end"},_t={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-sky-600 border border-transparent rounded-md shadow-sm hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500"},vt=te({__name:"SchemeListing",setup(b){const K=O(()=>R(()=>import("./index-fc86f1fc.js").then(a=>a.bs),["assets/index-fc86f1fc.js","assets/index-246842b1.css"])),j=O(()=>R(()=>import("./vue-multiselect.esm-2e9cf21d.js"),["assets/vue-multiselect.esm-2e9cf21d.js","assets/index-fc86f1fc.js","assets/index-246842b1.css"])),{withClientMutation:B,withClientQuery:E}=se();let f=p(!1),C=p(""),i=P({});const y=p(!0),_=p(!1),g=p([]),D=p([]);let c=P({first:12,after:"",text:"",sortBy:["created_at"],filterAction:!1});const L=p(0);let w=p({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const q=T(()=>g.value.length+" of "+L.value+" schemes"),U=T(()=>_.value);function S(a){_.value=!0,E(ue,{first:a.first,after:a.after,text:a.text,sortBy:a.sortBy},"grindSchemeAll").then(s=>{s&&(g.value=s?.items,L.value=s?.totalCount||0,w.value=s?.pageInfo,console.log(g.value))}).finally(()=>{_.value=!1})}oe(()=>{S(c),Q()});function Q(){E(he,{first:100,after:"",text:"",sortBy:["first_name"]},"userAll").then(a=>{a&&(D.value=a?.items)})}function Y(a){c.first=12,c.after="",c.text=a,c.filterAction=!0,S(c)}function J(){!w.value.hasNextPage||_.value||(c.first=6,c.after=w.value.endCursor,c.filterAction=!1,S(c))}function W(){Object.assign(i,{title:"",description:"",startDate:"",endDate:"",assignee:null,members:[]})}function I(){y.value=!0,f.value=!0,C.value="Create New Scheme",W()}function X(a){console.log(a),y.value=!1,f.value=!0,C.value="Edit Scheme",Object.assign(i,{...a})}function Z(){const a=i.members?.map(h=>h.uid)||[],s={title:i.title,description:i.description,startDate:i.startDate,endDate:i.endDate,assignee:i.assignee?.uid,members:a};y.value===!0?B(me,{payload:s},"createGrindScheme").then(h=>{h&&g.value.unshift(h)}):B(fe,{uid:i.uid,payload:s},"updateGrindScheme").then(h=>{if(h){const t=g.value.findIndex(m=>m.uid===h.uid);t!==-1&&(g.value[t]=h)}}),f.value=!1}return(a,s)=>{const h=ne("router-link");return l(),d(M,null,[e("div",ge,[e("div",pe,[_e,e("div",ve,[n(" Search input "),e("div",xe,[v(e("input",{type:"text",placeholder:"Search schemes...",class:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500","onUpdate:modelValue":s[0]||(s[0]=t=>o(c).text=t),onKeyup:s[1]||(s[1]=ie(t=>Y(o(c).text),["enter"]))},null,544),[[x,o(c).text]]),e("button",{onClick:s[2]||(s[2]=t=>Y(o(c).text)),class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-sky-700"},[...ye])]),n(" Add button "),e("button",{onClick:I,class:"px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500"},[...ke])])]),n(" Status and count information "),e("div",Ce,[U.value?(l(),d("span",De,"Loading schemes...")):(l(),d("span",Se,u(q.value),1))]),n(" Cards grid layout "),e("div",Me,[n(" Scheme card "),(l(!0),d(M,null,$(g.value,t=>(l(),d("div",{key:t.uid,class:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow"},[e("div",Ne,[e("div",Ae,[N(h,{to:{name:"scheme-detail",params:{schemeUid:t?.uid}},class:"text-lg font-semibold text-gray-800 truncate"},{default:A(()=>[k(u(t.title),1)]),_:2},1032,["to"]),e("button",{onClick:m=>X(t),class:"text-gray-500 hover:text-sky-600 transition-colors"},[...Be],8,Ve)]),n(" Description "),e("p",Ee,u(t.description||"No description provided"),1),n(" Date information "),e("div",Le,[e("div",Ue,[Ye,e("span",null,u(o(V)(t.startDate,"D MMMM YYYY"))+" - "+u(o(V)(t.endDate,"D MMMM YYYY")),1)])]),n(" Assignee "),t.assignee?(l(),d("div",Ie,[Pe,e("div",Te,[e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium mr-2",style:G({backgroundColor:o(F)(t.assignee.firstName+t.assignee.lastName)})},u(o(H)(t.assignee.firstName,t.assignee.lastName)),5),e("span",$e,u(t.assignee.firstName)+" "+u(t.assignee.lastName),1)])])):n("v-if",!0),n(" Members "),t.members&&t.members.length>0?(l(),d("div",Ge,[Fe,e("div",He,[(l(!0),d(M,null,$(t.members.slice(0,5),(m,ee)=>(l(),d("div",{key:ee,class:"w-8 h-8 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-medium",style:G({backgroundColor:o(F)(m.firstName+m.lastName)}),title:`${m.firstName} ${m.lastName}`},u(o(H)(m.firstName,m.lastName)),13,ze))),128)),n(" Show count for additional members "),t.members.length>5?(l(),d("div",{key:0,class:"w-8 h-8 rounded-full border-2 border-white flex items-center justify-center bg-gray-300 text-gray-800 text-xs font-medium",title:t.members.slice(5).map(m=>`${m.firstName} ${m.lastName}`).join(", ")}," +"+u(t.members.length-5),9,Oe)):n("v-if",!0)])])):n("v-if",!0),n(" Created info "),e("div",Re,[e("span",null,"Created "+u(o(V)(t.createdAt,"D MMMM YYYY")),1),t.createdBy?(l(),d("span",Ke,"by "+u(t.createdBy.firstName),1)):n("v-if",!0)])])]))),128))]),n(" Load more button "),o(w).hasNextPage?(l(),d("div",qe,[e("button",{onClick:J,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:_.value},[_.value?(l(),d("span",Je,"Loading...")):(l(),d("span",We,"Load More"))],8,Qe)])):n("v-if",!0),n(" Empty state "),g.value.length===0&&!U.value?(l(),d("div",Xe,[Ze,et,tt,e("button",{onClick:I,class:"px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500"},[...ot])])):n("v-if",!0)]),n(" Create/Edit Scheme Modal "),o(f)?(l(),ae(o(K),{key:0,onClose:s[10]||(s[10]=t=>z(f)?f.value=!1:f=!1),"content-width":"w-full max-w-2xl"},{header:A(()=>[e("h3",nt,u(o(C)),1)]),body:A(()=>[e("form",{onSubmit:re(Z,["prevent"]),class:"p-6"},[n(" Scheme Title "),e("div",it,[at,v(e("input",{id:"title","onUpdate:modelValue":s[3]||(s[3]=t=>o(i).title=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter scheme title"},null,512),[[x,o(i).title]])]),n(" Description "),e("div",rt,[lt,v(e("textarea",{id:"description","onUpdate:modelValue":s[4]||(s[4]=t=>o(i).description=t),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter scheme description"},null,512),[[x,o(i).description]])]),n(" Date Range "),e("div",dt,[e("div",null,[ct,v(e("input",{id:"startDate","onUpdate:modelValue":s[5]||(s[5]=t=>o(i).startDate=t),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[x,o(i).startDate]])]),e("div",null,[ut,v(e("input",{id:"endDate","onUpdate:modelValue":s[6]||(s[6]=t=>o(i).endDate=t),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[x,o(i).endDate]])])]),n(" Assignee "),e("div",mt,[ft,N(o(j),{modelValue:o(i).assignee,"onUpdate:modelValue":s[7]||(s[7]=t=>o(i).assignee=t),options:D.value,label:"firstName",searchable:!0,"track-by":"uid",placeholder:"Select an assignee"},null,8,["modelValue","options"])]),n(" Members "),e("div",ht,[gt,N(o(j),{modelValue:o(i).members,"onUpdate:modelValue":s[8]||(s[8]=t=>o(i).members=t),options:D.value,label:"firstName",searchable:!0,"track-by":"uid",multiple:!0,placeholder:"Select members"},null,8,["modelValue","options"])]),n(" Submit button "),e("div",pt,[e("button",{type:"button",onClick:s[9]||(s[9]=t=>z(f)?f.value=!1:f=!1),class:"mr-3 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Cancel "),e("button",_t,u(y.value?"Create":"Update"),1)])],32)]),_:1})):n("v-if",!0)],64)}}});const wt=ce(vt,[["__scopeId","data-v-3bab7638"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/SchemeListing.vue"]]);export{wt as default};
