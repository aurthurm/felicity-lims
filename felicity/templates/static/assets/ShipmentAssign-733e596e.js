import{_ as P,ap as $,y as G}from"./shipment-53265c2d.js";import{f as O,G as z,d as k,c as H,r as J,aj as w,h as o,k as n,x as e,ag as l,F as h,ak as y,D as i,u as m,y as K,B as g,A as S,al as C,_ as Q}from"./_plugin-vue_export-helper-dacf3d65.js";import A from"./Button-ea0a63f5.js";import{u as W}from"./shipment-fb4d3a89.js";import{d as X,a as U,b as V,e as b}from"./runtime-dom.esm-bundler-98433118.js";const Y={class:"overflow-x-auto mt-4"},Z={action:"post",class:"p-1"},ee={class:"flex justify-start mb-4"},te={class:"flex justify-between items-center"},se=e("span",{class:"text-gray-700 mr-2 whitespace-nowrap"},"Sample Type",-1),ae=["value"],oe={class:"ml-6 mt-2"},ne={class:"overflow-x-auto mt-4"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},re={key:0,class:"py-4 text-center"},le={key:1,class:"min-w-full"},de={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},ce=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1),pe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1),he=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample Type ",-1),me=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Client Sample ID ",-1),ue=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1),_e=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1),ye=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1),ge=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1),be={class:"bg-white"},fe=["onUpdate:modelValue","onChange"],xe=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),ve={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ke={class:"text-sm leading-5 text-sky-800 font-semibold"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se={class:"text-sm leading-5 text-sky-800 font-semibold"},Ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ae={class:"text-sm leading-5 text-sky-800 font-semibold"},Ue={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ve={class:"text-sm leading-5 text-sky-800"},De=["onUpdate:modelValue","disabled"],Te={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Fe={class:"text-sm leading-5 text-sky-800"},Re={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Be={class:"text-sm leading-5 text-sky-800"},je={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ee={class:"text-sm leading-5 text-sky-800"},Ie={class:"my-4"},Me=O({__name:"ShipmentAssign",setup(Le){const D=z(()=>P(()=>import("./LoadingMessage-097e117a.js"),["assets/LoadingMessage-097e117a.js","assets/_plugin-vue_export-helper-dacf3d65.js"])),d=$(),f=G(),{manageSamples:T}=W();d.fetchReferralLaboratories();const F=k(()=>d.getShipment);f.fetchSampleTypes();const u=H({sampleTypeUid:void 0,analysisUid:void 0}),c=J(!1),x=k(()=>{const t=[];return d.getSamples?.forEach(p=>{t?.some(_=>_.uid===p.uid)||t.push(p)}),t}),R=()=>{v(),d.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,...u})},B=()=>{const t=j();T(F?.value?.uid,t,"assign")};function v(){return d.samples?.filter(t=>t.checked)}function j(){return v().map(t=>({sampleUid:t.uid,shipedSampleUid:void 0,analyses:t.analysisResults?.filter(a=>a.checked)?.map(a=>a.uid)}))?.filter(t=>t?.analyses?.length>0)}function E(t){N()?c.value=!0:c.value=!1}function I(t){t.checked=!0}function M(t){t.checked=!1}async function L(){await x?.value?.forEach(t=>c.value?I(t):M(t))}function N(){return x?.value?.every(t=>t.checked===!0)}return(t,a)=>{const p=w("motion-slide-left"),_=w("motion-slide-right");return o(),n(h,null,[e("div",Y,[l((o(),n("form",Z,[e("div",ee,[e("label",te,[se,l(e("select",{name:"analyses_uids","onUpdate:modelValue":a[0]||(a[0]=s=>u.sampleTypeUid=s),class:"form-input mt-1 block w-full py-1"},[(o(!0),n(h,null,y(m(f).sampleTypes,s=>(o(),n("option",{key:s.uid,value:s.uid},i(s.name),9,ae))),128))],512),[[X,u.sampleTypeUid]])]),K(` <label class="flex justify-between items-center ml-6">\r
          <span class="text-gray-700 mr-2">Analyses</span>\r
          <select\r
            name="analyses_uids"\r
            v-model="filterForm.analysisUid"\r
            class="form-input mt-1 block w-full py-1"\r
          >\r
            <option\r
              v-for="service in analysisStore.analysesServices"\r
              :key="service.uid"\r
              :value="service.uid"\r
            >\r
              {{ service.name }}\r
            </option>\r
          </select>\r
        </label> `),e("div",oe,[l(g(A,{onClick:a[1]||(a[1]=U(s=>R(),["prevent"])),color:"sky-800",class:"p-1"},{default:S(()=>[C("Apply Filters")]),_:1},512),[[V,!0]])])])])),[[p]])]),e("div",ne,[e("div",ie,[m(d).fetchingSamples?(o(),n("div",re,[g(m(D),{message:"Fetching samples ..."})])):(o(),n("table",le,[e("thead",null,[e("tr",null,[e("th",de,[l(e("input",{type:"checkbox",onChange:L,"onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s)},null,544),[[b,c.value]])]),ce,pe,he,me,ue,_e,ye,ge])]),l((o(),n("tbody",be,[(o(!0),n(h,null,y(m(d).samples,s=>(o(),n("tr",{key:s?.uid},[e("td",null,[l(e("input",{type:"checkbox","onUpdate:modelValue":r=>s.checked=r,onChange:r=>E()},null,40,fe),[[b,s.checked]])]),xe,e("td",ve,[e("div",ke,i(s?.sampleId),1)]),e("td",we,[e("div",Se,i(s?.sampleType?.name),1)]),e("td",Ce,[e("div",Ae,i(s?.analysisRequest?.clientRequestId),1)]),e("td",Ue,[e("div",Ve,[e("ul",null,[(o(!0),n(h,null,y(s?.analysisResults,r=>(o(),n("li",{class:"flex justify-start items-center",key:r.uid},[l(e("input",{type:"checkbox","onUpdate:modelValue":q=>r.checked=q,class:"mr-2",disabled:!s.checked},null,8,De),[[b,r.checked]]),e("span",null,i(r?.analysis?.name),1),e("span",null,i(r?.status),1)]))),128))])])]),e("td",Te,[e("div",Fe,i(s?.createdAt),1)]),e("td",Re,[e("div",Be,i(s?.dateReceived),1)]),e("td",je,[e("div",Ee,i(s?.status),1)])]))),128))])),[[_]])]))])]),e("section",Ie,[l(g(A,{onClick:U(B,["prevent"]),color:"orange-600"},{default:S(()=>[C("Assign Samples")]),_:1},8,["onClick"]),[[V,!0]])])],64)}}}),Oe=Q(Me,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{Oe as default};
