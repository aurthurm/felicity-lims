const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FolderNavigation-BABV7sjl.js","assets/index-DApeomWQ.js","assets/index-CfJ_N7IC.css","assets/plus-DY1_hCIX.js","assets/document.mutations-DThhra-H.js","assets/document.queries-DVkcCLRM.js","assets/_isIterateeCall-DwAjvjKZ.js","assets/toFinite-CHOvEuVY.js","assets/RecentDocuments-DDi7Wx52.js","assets/DocumentListing-DjLlEzHd.js","assets/FolderDocuments-C8M7HtjR.js"])))=>i.map(i=>d[i]);
import{d as A,f as w,a8 as D,a0 as x,aq as C,a7 as S,ad as k,a1 as m,a6 as f,_ as O,r as E,c as P,o as h,a as _,A as d,Q as I,C as v,J as B}from"./index-DApeomWQ.js";import{a as M,b as R}from"./document.queries-DVkcCLRM.js";import{a as T}from"./_isIterateeCall-DwAjvjKZ.js";import{t as g}from"./toFinite-CHOvEuVY.js";var j=Math.floor,L=Math.random;function U(e,t){return e+j(L()*(t-e+1))}var V=parseFloat,N=Math.min,$=Math.random;function Z(e,t,n){if(n&&typeof n!="boolean"&&T(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=g(e),t===void 0?(t=e,e=0):t=g(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var s=$();return N(e+s*(t-e+V("1e-"+((s+"").length-1))),t)}return U(e,t)}const{withClientQuery:p}=w(),z=A("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[]}),actions:{async fetchDocuments(e,t=!1){try{const n=await p(R,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll");n&&typeof n=="object"&&"items"in n&&(this.documents=n.items,t&&(this.recentDocuments=this.documents.sort((o,s)=>{const r=o.updatedAt?new Date(o.updatedAt).getTime():0;return(s.updatedAt?new Date(s.updatedAt).getTime():0)-r}).slice(0,25)))}catch{}},addDocument(e){e?.uid&&(this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5))},updateDocument(e){if(!e?.uid)return;const t={...e,updatedAt:new Date().toISOString()};this.documents=this.documents.map(n=>n.uid===e.uid?t:n),this.recentDocuments=[t,...this.recentDocuments.filter(n=>n.uid!==e.uid)].slice(0,5)},deleteDocument(e){e&&(this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e))},duplicateDocument(e){if(!e)return;const t=this.documents.find(o=>o.uid===e);if(!t)return;const n={...t,uid:Z(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(n),this.recentDocuments=[n,...this.recentDocuments].slice(0,5)},async setCurrentFolder(e){this.currentFolder=e,await this.fetchDocuments({folderUid:e})},async getFolders(){try{const e=await p(M,{},"documentFolderAll");e&&typeof e=="object"&&"items"in e&&(this.folders=e.items)}catch{}},addFolder(e){e?.uid&&this.folders.push(e)},deleteFolder(e){e&&(this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e))},updateFolder(e){e?.uid&&(this.folders=this.folders.map(t=>t.uid===e.uid?e:t))},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){e&&(this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t))}},getters:{getChildFolders:e=>t=>e.folders.filter(n=>n.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(n=>n.folderUid===t)}});const b=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase()),Q=e=>{const t=G(e);return t.charAt(0).toUpperCase()+t.slice(1)},q=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim(),y=e=>e==="";var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const H=({name:e,iconNode:t,absoluteStrokeWidth:n,"absolute-stroke-width":o,strokeWidth:s,"stroke-width":r,size:i=u.width,color:a=u.stroke,...l},{slots:c})=>D("svg",{...u,...l,width:i,height:i,stroke:a,"stroke-width":y(n)||y(o)||n===!0||o===!0?Number(s||r||u["stroke-width"])*24/Number(i):s||r||u["stroke-width"],class:q("lucide",l.class,...e?[`lucide-${b(Q(e))}-icon`,`lucide-${b(e)}`]:["lucide-icon"])},[...t.map(F=>D(...F)),...c.default?[c.default()]:[]]);const J=(e,t)=>(n,{slots:o,attrs:s})=>D(H,{...s,...n,iconNode:t,name:e},o);const X=J("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Y=x({__name:"DocumentEntry",setup(e,{expose:t}){t();const n=m(()=>f(()=>import("./FolderNavigation-BABV7sjl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),o=m(()=>f(()=>import("./RecentDocuments-DDi7Wx52.js"),__vite__mapDeps([8,1,2,9,4,3,5,6,7]))),s=m(()=>f(()=>import("./FolderDocuments-C8M7HtjR.js"),__vite__mapDeps([10,1,2,9,4,3,5,6,7]))),r=z(),{currentFolder:i}=C(r),a=S(!1),l=()=>{a.value=!a.value};k(async()=>{try{await r.getFolders()}catch{}});const c={FolderNavigation:n,RecentDocuments:o,FolderDocuments:s,documentStore:r,currentFolder:i,isSidebarOpen:a,toggleSidebar:l,get Folder(){return X}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),K={class:"flex overflow-hidden"},W={class:"flex-1 overflow-hidden"},ee={class:"lg:hidden p-4 flex items-center border-b border-border"},te={class:"h-full overflow-auto p-6"};function ne(e,t,n,o,s,r){const i=E("fel-heading");return h(),P(B,null,[_(i,{title:"Documents"}),d("div",K,[d("div",{class:I(["fixed inset-y-0 left-0 z-10 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",{"-translate-x-full":!o.isSidebarOpen}])},[_(o.FolderNavigation)],2),d("div",W,[d("div",ee,[d("button",{class:"mr-4 p-2 rounded-md border border-border hover:bg-accent",onClick:o.toggleSidebar},[_(o.Folder,{class:"h-5 w-5"})]),t[0]||(t[0]=d("h1",{class:"text-xl font-semibold text-foreground"},"Document Manager",-1))]),d("div",te,[o.currentFolder?(h(),v(o.FolderDocuments,{key:1})):(h(),v(o.RecentDocuments,{key:0}))])])])],64)}const oe=O(Y,[["render",ne],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/document/DocumentEntry.vue"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ae as D,X as F,J as c,z as u};
