import{P as re,u as de,e as ue,Z as y,f as j,h,o as i,c as r,b as t,F as m,D as f,z as V,a1 as S,a2 as l,E as d,a7 as T,a as D,K as x,L,A as c,W as I,J as k,x as R,V as w,a4 as B,X as A,Y as P,_ as pe}from"./index-e1b11e1a.js";import{l as ce,m as me,n as ge,o as ye}from"./analyses.mutations-53bc24e5.js";import{u as fe}from"./setup-84875ac0.js";import{u as be}from"./analysis-0aa9b5f6.js";import"./_queries-2b677941.js";const ve={class:""},xe={class:"container w-full my-4"},ke={class:"grid grid-cols-12 gap-4 mt-2"},we={class:"col-span-3 overflow-y-scroll overscroll-contain max-h-[540px]"},he=["onClick"],_e={class:"cursor-pointer"},Ae={class:"flex-grow p-1"},Pe={class:"font-medium text-gray-500 hover:text-gray-700 flex justify-between"},Se={key:0,class:"col-span-9"},Ue={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Ce={class:"grid grid-cols-12 gap-3"},Me={class:"col-span-12 px-3 sm:px-0"},Ee={class:"flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Ve={class:"bg-white shadow-md mt-2"},Te={class:"-mb-px flex justify-start"},De=["onClick"],$e={class:"mt-2 p-2 bg-white"},Fe={key:0},Ne={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Oe={class:"grid grid-cols-6 gap-2 w-full"},je={class:"flex-grow p-1"},Le={class:S(["font-medium text-gray-500 hover:text-gray-700",{"text-gray-700 font-medium":!1}])},Ie=["id","onUpdate:modelValue"],Re=["for"],Be={key:1},ze={class:"flex justify-between items-center mb-2"},Ke={class:"overflow-x-auto mt-4"},Ye={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Ge={class:"min-w-full"},Je={class:"bg-white"},We={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Xe={class:"flex items-center"},Ze={class:"text-sm leading-5 text-gray-800"},qe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},He={class:"text-sm leading-5 text-sky-800"},Qe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},et={class:"text-sm leading-5 text-sky-800"},tt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},st={class:"text-sm leading-5 text-sky-800"},ot={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},lt=["onClick"],nt={key:2},it={action:"post",class:"p-1"},at={class:"grid grid-cols-2 gap-x-4 mb-4"},rt={class:"block col-span-2 mb-2"},dt={class:"block col-span-2 mb-2"},ut={class:"block col-span-2 mb-2"},pt={class:"block col-span-2 mb-2"},ct={class:"block col-span-1 mb-2"},mt=["value"],gt={for:"toggle",class:"text-xs text-gray-700 mr-4"},yt={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},ft={action:"post",class:"p-1"},bt={class:"grid grid-cols-2 gap-x-4 mb-4"},vt={class:"block col-span-2 mb-2"},xt=["value"],kt={class:"block col-span-2 mb-2"},wt={class:"block col-span-2 mb-2"},ht={class:"block col-span-2 mb-2"},_t=re({__name:"AnalysesProfiles",setup(At){const z=A(()=>P(()=>import("./vue-multiselect.esm-0b4dedd5.js"),["assets/vue-multiselect.esm-0b4dedd5.js","assets/index-e1b11e1a.js","assets/index-78b87750.css"])),$=A(()=>P(()=>import("./index-e1b11e1a.js").then(n=>n.cN),["assets/index-e1b11e1a.js","assets/index-78b87750.css"])),K=A(()=>P(()=>import("./FelAccordion-c4131a17.js"),["assets/FelAccordion-c4131a17.js","assets/index-e1b11e1a.js","assets/index-78b87750.css"])),Y=A(()=>P(()=>import("./Billing-16c7ec95.js"),["assets/Billing-16c7ec95.js","assets/index-e1b11e1a.js","assets/index-78b87750.css","assets/billing-cf27b0ac.js"])),u=be(),G=de(),J=fe(),{withClientMutation:_}=ue();let g=y("analyses-services");const W=["analyses-services","mappings","billing"];let b=y(!1),U=y("");const C=y(!0);let o=j({});const X=h(()=>G.getSampleTypes),Z=h(()=>J.getDepartments);u.fetchAnalysesProfilesAndServices();const M=h(()=>u.getAnalysesServices),q=h(()=>u.getAnalysesProfiles);function H(){const n={name:o.name,keyword:o.keyword,description:o.description,departmentUid:o.departmentUid,sampleTypes:o.sampleTypes?.map(e=>e.uid),active:o.active};_(ce,{payload:n},"createProfile").then(e=>u.addAnalysisProfile(e))}function F(){const n={name:o.name,keyword:o.keyword,description:o.description,departmentUid:o.departmentUid,active:o.active,services:o.analyses?.map(e=>e.uid),sampleTypes:o.sampleTypes?.map(e=>e.uid)};_(me,{uid:o.uid,payload:n},"updateProfile").then(e=>u.updateAnalysesProfile(e))}function Q(n){Object.assign(o,{...n}),M.value?.forEach(e=>{e[1].forEach(s=>{s.checked=!1,s.profiles?.some(p=>p.uid===o.uid)&&(s.checked=!0)})}),u.fetchProfileMappings(n?.uid)}function ee(){const n=[];M.value?.forEach(e=>{e[1].forEach(s=>{s.checked&&n.push(s)})}),o.analyses=n,F()}function N(n,e={}){C.value=n,b.value=!0,U.value=(n?"CREATE":"EDIT")+" ANALYSES PROFILE",n?Object.assign(o,{}):Object.assign(o,{...e})}function te(){C.value===!0&&H(),C.value===!1&&F(),b.value=!1}u.fetchCodingStandards();const se=h(()=>u.profileMapings?.filter(n=>n.profileUid===o?.uid));let v=y(!1),oe=y("");const E=y(!0),a=j({uid:void 0,profileUid:void 0,codingStandardUid:void 0,name:"",code:"",description:""});function le(){const n={profileUid:o?.uid,codingStandardUid:a.codingStandardUid,name:a.name,code:a.code,description:a.description};_(ge,{payload:n},"createProfileMapping").then(e=>u.addProfileMapping(e))}function ne(){const n={profileUid:o?.uid,codingStandardUid:a.codingStandardUid,name:a.name,code:a.code,description:a.description};_(ye,{uid:a.uid,payload:n},"updateProfileMapping").then(e=>u.updateProfileMapping(e))}function O(n,e={}){E.value=n,v.value=!0,oe.value=(n?"CREATE":"EDIT")+" CONCEPT MAPPING",n?Object.assign(a,{}):Object.assign(a,{...e})}function ie(){E.value===!0&&le(),E.value===!1&&ne(),v.value=!1}return(n,e)=>(i(),r(m,null,[t("div",ve,[t("div",xe,[e[18]||(e[18]=t("hr",null,null,-1)),t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[0]||(e[0]=s=>N(!0))}," Add Analyses Profile "),e[19]||(e[19]=t("hr",null,null,-1))]),e[28]||(e[28]=t("hr",null,null,-1)),t("div",ke,[t("section",we,[t("ul",null,[(i(!0),r(m,null,f(q.value,s=>(i(),r("li",{key:s.uid,onClick:V(p=>Q(s),["prevent","stop"]),class:S(["bg-white w-full p-1 mb-1 rounded",{"border-gray-100 bg-emerald-200":s?.uid===l(o)?.uid}])},[t("a",_e,[t("div",Ae,[t("div",Pe,[t("span",null,d(s?.name),1),e[20]||(e[20]=t("span",{class:"text-sm text-gray-500"},null,-1))])])])],10,he))),128))])]),l(o)?.uid!==void 0?(i(),r("section",Se,[t("div",Ue,[t("div",Ce,[t("div",Me,[t("div",Ee,[t("span",null,d(l(o)?.name),1),t("div",null,[t("button",{onClick:e[1]||(e[1]=s=>N(!1)),class:"ml-4 inline-flex items-center justify-center w-8 h-8 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"},e[21]||(e[21]=[t("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[t("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]))])])])])]),t("nav",Ve,[t("div",Te,[(i(),r(m,null,f(W,s=>t("a",{key:s,class:S(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":l(g)===s}]),onClick:p=>T(g)?g.value=s:g=s},d(s),11,De)),64))])]),t("section",$e,[l(g)==="analyses-services"?(i(),r("div",Fe,[e[23]||(e[23]=t("h3",null,"Analyses",-1)),e[24]||(e[24]=t("hr",null,null,-1)),t("section",Ne,[t("div",Oe,[(i(!0),r(m,null,f(M.value,s=>(i(),r("div",{class:"col-span-2",key:s[0]},[D(l(K),null,{title:x(()=>[L(d(s[0]),1)]),body:x(()=>[t("div",null,[t("ul",null,[(i(!0),r(m,null,f(s[1],p=>(i(),r("li",{key:p?.uid,class:S(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]])},[t("div",je,[t("div",Le,[c(t("input",{type:"checkbox",id:`toggle-${p?.uid}`,class:"form-control","onUpdate:modelValue":ae=>p.checked=ae},null,8,Ie),[[I,p.checked]]),t("label",{for:`toggle-${p?.uid}`,class:"text-gray-700 ml-4"},d(p?.name),9,Re)])]),e[22]||(e[22]=t("hr",null,null,-1))]))),128))])])]),_:2},1024)]))),128))]),t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[2]||(e[2]=s=>ee())}," Update Analtsis Profile ")])])):k("",!0),l(g)=="mappings"?(i(),r("div",Be,[t("div",ze,[e[25]||(e[25]=t("h3",null,"Concept Mappings",-1)),t("button",{onClick:e[3]||(e[3]=s=>O(!0)),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Add Mapping")]),e[27]||(e[27]=t("hr",null,null,-1)),t("div",Ke,[t("div",Ye,[t("table",Ge,[e[26]||(e[26]=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Coding Standard"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Name"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Code"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Description"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),t("tbody",Je,[(i(!0),r(m,null,f(se.value,s=>(i(),r("tr",{key:s},[t("td",We,[t("div",Xe,[t("div",Ze,d(s.codingStandard?.name),1)])]),t("td",qe,[t("div",He,d(s.name),1)]),t("td",Qe,[t("div",et,d(s.code),1)]),t("td",tt,[t("div",st,d(s.description),1)]),t("td",ot,[t("button",{onClick:p=>O(!1,s),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,lt)])]))),128))])])])])])):k("",!0),l(g)=="billing"?(i(),r("div",nt,[D(l(Y),{target:"profile",targetUid:l(o).uid},null,8,["targetUid"])])):k("",!0)])])):k("",!0)])]),l(b)?(i(),R(l($),{key:0,onClose:e[11]||(e[11]=s=>T(b)?b.value=!1:b=!1)},{header:x(()=>[t("h3",null,d(l(U)),1)]),body:x(()=>[t("form",it,[t("div",at,[t("label",rt,[e[29]||(e[29]=t("span",{class:"text-gray-700"},"Analysis Profile Name",-1)),c(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=s=>l(o).name=s),placeholder:"Name ..."},null,512),[[w,l(o).name]])]),t("label",dt,[e[30]||(e[30]=t("span",{class:"text-gray-700"},"keyword",-1)),c(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=s=>l(o).keyword=s),placeholder:"Keyword ..."},null,512),[[w,l(o).keyword]])]),t("label",ut,[e[31]||(e[31]=t("span",{class:"text-gray-700"},"Sample Types",-1)),D(l(z),{modelValue:l(o).sampleTypes,"onUpdate:modelValue":e[6]||(e[6]=s=>l(o).sampleTypes=s),options:X.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),t("label",pt,[e[32]||(e[32]=t("span",{class:"text-gray-700"},"Description",-1)),c(t("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=s=>l(o).description=s),placeholder:"Description ..."},null,512),[[w,l(o).description]])]),t("label",ct,[e[34]||(e[34]=t("span",{class:"text-gray-700"},"Department",-1)),c(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[8]||(e[8]=s=>l(o).departmentUid=s)},[e[33]||(e[33]=t("option",null,null,-1)),(i(!0),r(m,null,f(Z.value,s=>(i(),r("option",{key:s.uid,value:s?.uid},d(s.name),9,mt))),128))],512),[[B,l(o).departmentUid]])]),t("label",gt,[e[36]||(e[36]=L("Active ")),t("div",yt,[c(t("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":e[9]||(e[9]=s=>l(o).active=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[I,l(o).active]]),e[35]||(e[35]=t("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))])])]),e[37]||(e[37]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[10]||(e[10]=V(s=>te(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):k("",!0),l(v)?(i(),R(l($),{key:1,onClose:e[17]||(e[17]=s=>T(v)?v.value=!1:v=!1)},{header:x(()=>[t("h3",null,d(l(U)),1)]),body:x(()=>[t("form",ft,[t("div",bt,[t("label",vt,[e[39]||(e[39]=t("span",{class:"text-gray-700"},"Coding Standard",-1)),c(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[12]||(e[12]=s=>a.codingStandardUid=s)},[e[38]||(e[38]=t("option",null,null,-1)),(i(!0),r(m,null,f(l(u).codingStandards,s=>(i(),r("option",{key:s.uid,value:s?.uid},d(s.name),9,xt))),128))],512),[[B,a.codingStandardUid]])]),t("label",kt,[e[40]||(e[40]=t("span",{class:"text-gray-700"},"Standard Name",-1)),c(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[13]||(e[13]=s=>a.name=s),placeholder:"Keyword ..."},null,512),[[w,a.name]])]),t("label",wt,[e[41]||(e[41]=t("span",{class:"text-gray-700"},"Standard Code",-1)),c(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[14]||(e[14]=s=>a.code=s),placeholder:"Keyword ..."},null,512),[[w,a.code]])]),t("label",ht,[e[42]||(e[42]=t("span",{class:"text-gray-700"},"Standard Description",-1)),c(t("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[15]||(e[15]=s=>a.description=s),placeholder:"Description ..."},null,512),[[w,a.description]])])]),e[43]||(e[43]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[16]||(e[16]=V(s=>ie(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):k("",!0)],64))}}),Et=pe(_t,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesProfiles.vue"]]);export{Et as default};
