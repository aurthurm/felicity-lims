import{P as I,e as N,Z as r,f as $,aa as F,af as U,o as a,c as l,b as e,F as m,D as f,E as d,x as G,K as S,z,A as b,V as _,W as E,a2 as W,J as X,X as Y,Y as Z,_ as q}from"./index-d30fd8e2.js";import{g as J,a as K,X as Q,Y as R,Z as H}from"./microbiology.mutations-54cff9c3.js";const ee={class:"w-full my-4"},te={class:"flex justify-between items-center mb-4"},se={class:"overflow-x-auto mt-4"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},oe={class:"min-w-full"},ne={class:"bg-white"},ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},le={class:"text-sm leading-5 text-gray-800"},re={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},de={class:"text-sm leading-5 text-sky-800"},ce={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ue={class:"text-sm leading-5 text-sky-800"},me={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"text-sm leading-5 text-sky-800"},pe={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},ve=["onClick"],fe={class:"space-y-4"},xe={class:"grid grid-cols-1 gap-4"},ge={class:"block"},ye={class:"block"},he={class:"flex gap-4"},_e={class:"w-2/3 space-y-2"},we={class:"block"},Ae={class:"border p-2 h-64 overflow-y-auto"},ke=["value"],Oe={class:"ml-2"},Pe={class:"w-1/3"},Ce={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},De={class:"text-sm"},Se=["onClick"],Ee={class:"flex gap-4"},Ve={class:"w-2/3 space-y-2"},Le={class:"block"},Me={class:"border p-2 h-64 overflow-y-auto"},Te=["value"],je={class:"ml-2"},Be={class:"w-1/3"},Ie={class:"border p-2 h-72 overflow-y-auto bg-gray-50"},Ne={class:"text-sm"},$e=["onClick"],Fe=I({__name:"AstPanel",setup(Ue){const V=Y(()=>Z(()=>import("./index-d30fd8e2.js").then(o=>o.cN),["assets/index-d30fd8e2.js","assets/index-81d3252e.css"])),{withClientMutation:k,withClientQuery:w}=N(),x=r(!1),O=r(""),P=r(!0),g=r(""),y=r(""),u=r([]),p=r([]),h=r([]),c=r([]),A=r([]),i=$({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});F(()=>{L(),C(),M()});function L(){w(J,{},"abxLaboratoryAntibiotics").then(o=>{o&&(p.value=o,h.value=[...p.value])})}function C(){w(K,{text:g.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(o=>{c.value=c.value?.filter(t=>i.selectedOrganisms.includes(t.uid))||[],c.value=U(c.value,o?.items,"uid"),A.value=[...c.value]})}function M(){w(Q,{},"abxAstPanelAll").then(o=>{o&&(u.value=o,u.value.forEach(t=>t.organisms?.forEach(s=>c.value.push(s))))})}function D(o,t={}){P.value=o,x.value=!0,O.value=(o?"Create":"Edit")+" AST Panel",o?(i.uid="",i.name="",i.description="",i.selectedAntibiotics=[],i.selectedOrganisms=[]):(i.uid=t.uid,i.name=t.name,i.description=t.description,i.selectedAntibiotics=t.antibiotics?.map(s=>s.uid)||[],i.selectedOrganisms=t.organisms?.map(s=>s.uid)||[])}function T(){const o={name:i.name,description:i.description,antibiotics:i.selectedAntibiotics,organisms:i.selectedOrganisms};P.value?k(R,{payload:o},"createAbxAstPanel").then(t=>{t&&u.value.unshift(t)}):k(H,{uid:i.uid,payload:o},"updateAbxAstPanel").then(t=>{if(t){const s=u.value.findIndex(n=>n.uid===t.uid);s>-1&&(u.value=[...u.value.map((n,v)=>v===s?t:n)])}}),x.value=!1}function j(){if(!y.value){h.value=[...p.value];return}h.value=p.value.filter(o=>o.name.toLowerCase().includes(y.value.toLowerCase()))}function B(){if(!g.value){A.value=[...c.value];return}C()}return(o,t)=>(a(),l(m,null,[e("div",ee,[e("div",te,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold"},"AST Panels",-1)),e("button",{onClick:t[0]||(t[0]=s=>D(!0)),class:"px-4 py-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add Panel ")]),t[10]||(t[10]=e("hr",null,null,-1)),e("div",se,[e("div",ie,[e("table",oe,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Name"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Description"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Organisms"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Antibiotics"),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),e("tbody",ne,[(a(!0),l(m,null,f(u.value,s=>(a(),l("tr",{key:s?.uid},[e("td",ae,[e("div",le,d(s?.name),1)]),e("td",re,[e("div",de,d(s?.description),1)]),e("td",ce,[e("div",ue,d(s?.organisms?.map(n=>n.name).join(", ")),1)]),e("td",me,[e("div",be,d(s?.antibiotics?.map(n=>n.name).join(", ")),1)]),e("td",pe,[e("button",{onClick:n=>D(!1,s),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Edit ",8,ve)])]))),128))])])])])]),x.value?(a(),G(W(V),{key:0,onClose:t[7]||(t[7]=s=>x.value=!1),contentWidth:"w-1/2"},{header:S(()=>[e("h3",null,d(O.value),1)]),body:S(()=>[e("form",{onSubmit:z(T,["prevent"]),class:"p-4"},[e("div",fe,[e("div",xe,[e("label",ge,[t[11]||(t[11]=e("span",{class:"text-gray-700"},"Panel Name",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.name=s),class:"form-input mt-1 block w-full",placeholder:"Enter panel name"},null,512),[[_,i.name]])]),e("label",ye,[t[12]||(t[12]=e("span",{class:"text-gray-700"},"Description",-1)),b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.description=s),rows:"2",class:"form-input mt-1 block w-full",placeholder:"Enter description"},null,512),[[_,i.description]])])]),e("div",he,[e("div",_e,[e("label",we,[t[13]||(t[13]=e("span",{class:"text-gray-700"},"Search Organisms",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),onInput:B,class:"form-input mt-1 block w-full",placeholder:"Search organisms..."},null,544),[[_,g.value]])]),e("div",Ae,[(a(!0),l(m,null,f(A.value,s=>(a(),l("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[4]||(t[4]=n=>i.selectedOrganisms=n),class:"form-checkbox"},null,8,ke),[[E,i.selectedOrganisms]]),e("span",Oe,d(s.name),1)]))),128))])]),e("div",Pe,[t[14]||(t[14]=e("div",{class:"text-gray-700 mb-1"},"Selected Organisms",-1)),e("div",Ce,[(a(!0),l(m,null,f(i.selectedOrganisms,s=>(a(),l("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",De,d(c.value?.find(n=>n.uid===s)?.name),1),e("button",{onClick:n=>i.selectedOrganisms=i.selectedOrganisms.filter(v=>v!==s),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,Se)]))),128))])])]),e("div",Ee,[e("div",Ve,[e("label",Le,[t[15]||(t[15]=e("span",{class:"text-gray-700"},"Search Antibiotics",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>y.value=s),onInput:j,class:"form-input mt-1 block w-full",placeholder:"Search antibiotics..."},null,544),[[_,y.value]])]),e("div",Me,[(a(!0),l(m,null,f(h.value,s=>(a(),l("div",{key:s.uid,class:"flex items-center py-1"},[b(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[6]||(t[6]=n=>i.selectedAntibiotics=n),class:"form-checkbox"},null,8,Te),[[E,i.selectedAntibiotics]]),e("span",je,d(s.name),1)]))),128))])]),e("div",Be,[t[16]||(t[16]=e("div",{class:"text-gray-700 mb-1"},"Selected Antibiotics",-1)),e("div",Ie,[(a(!0),l(m,null,f(i.selectedAntibiotics,s=>(a(),l("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-white rounded shadow-sm"},[e("span",Ne,d(p.value.find(n=>n.uid==s)?.name),1),e("button",{onClick:n=>i.selectedAntibiotics=i.selectedAntibiotics.filter(v=>v!==s),class:"text-red-500 hover:text-red-700 text-sm"}," × ",8,$e)]))),128))])])])]),t[17]||(t[17]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):X("",!0)],64))}});const We=q(Fe,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{We as default};
