import{Y as V,u as P,a0 as b,ah as q,a3 as I,_ as U,r as i,c as k,o as u,z as r,A as K,C as A,a as n,K as o,M as p,F,H as z,I as C,B as R,D as G,al as L}from"./index-OdhKCqIc.js";import{c as O,a as Q,u as Y,b as j}from"./index.esm-BfHj8iGm.js";import{q as J,z as W,B as X}from"./microbiology.mutations-cVAbKt4K.js";import{E as Z,a as $,b as ee,c as te,d as oe}from"./EmptyTitle-aCQRDpx3.js";import{P as ae}from"./PageHeading-Czi_4opS.js";const ne=V({__name:"AbxKingdom",setup(H,{expose:e}){e();const{withClientMutation:_,withClientQuery:t}=P();let f=b(!1),x=b("");const d=b(!0),l=b(null),v=O({name:Q().trim().required("Name is required")}),{handleSubmit:c,resetForm:y,setValues:w,errors:h}=Y({validationSchema:v,initialValues:{name:""}}),{value:T}=j("name"),a=b([]);q(()=>{t(J,{},"abxKingdomAll").then(s=>{s&&(a.value=s)})});function M(s,g={}){d.value=s,f.value=!0,x.value=(s?"Create":"Edit")+" kingdom",s?(l.value=null,y()):(l.value=g.uid??null,w({name:g.name??""}))}const N=c(s=>{const g={name:s.name};d.value===!0&&_(W,{payload:g},"createAbxKingdom").then(m=>{m&&a.value.unshift(m)}),d.value===!1&&l.value&&_(X,{uid:l.value,payload:g},"updateAbxKingdom").then(m=>{if(m){const D=a.value.findIndex(E=>E.uid==m.uid);D>-1&&(a.value=[...a.value.map((E,S)=>S===D?m:E)])}}),f.value=!1}),B={withClientMutation:_,withClientQuery:t,get showModal(){return f},set showModal(s){f=s},get formTitle(){return x},set formTitle(s){x=s},formAction:d,currentUid:l,kingdomSchema:v,handleSubmit:c,resetForm:y,setValues:w,errors:h,name:T,abxKingdoms:a,FormManager:M,saveForm:N,get Button(){return I},get Empty(){return oe},get EmptyContent(){return te},get EmptyDescription(){return ee},get EmptyHeader(){return $},get EmptyTitle(){return Z},PageHeading:ae};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),re={class:"space-y-6"},se={class:"border border-border bg-card rounded-lg shadow-md"},le={class:"relative w-full overflow-auto"},ie=["onClick"],de={class:"text-xl font-semibold text-foreground"},me={class:"grid grid-cols-2 gap-4"},ue={class:"block"},fe={key:0,class:"text-sm text-destructive"};function ce(H,e,_,t,f,x){const d=i("TableHead"),l=i("TableRow"),v=i("TableHeader"),c=i("TableCell"),y=i("TableEmpty"),w=i("TableBody"),h=i("Table"),T=i("Modal");return u(),k(F,null,[r("div",re,[n(t.PageHeading,{title:"Kingdoms"},{default:o(()=>[n(t.Button,{onClick:e[0]||(e[0]=a=>t.FormManager(!0))},{default:o(()=>[...e[4]||(e[4]=[p("Add Kingdom",-1)])]),_:1})]),_:1}),r("div",se,[r("div",le,[n(h,{class:"w-full caption-bottom text-sm"},{default:o(()=>[n(v,{class:"[&_tr]:border-b"},{default:o(()=>[n(l,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[n(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[5]||(e[5]=[p("Name",-1)])]),_:1}),n(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[6]||(e[6]=[r("span",{class:"sr-only"},"Actions",-1)])]),_:1})]),_:1})]),_:1}),n(w,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(u(!0),k(F,null,z(t.abxKingdoms,a=>(u(),K(l,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[n(c,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[p(C(a?.name),1)]),_:2},1024),n(c,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[r("button",{onClick:M=>t.FormManager(!1,a),class:"text-primary hover:text-primary/80"}," Edit ",8,ie)]),_:2},1024)]),_:2},1024))),128)),!t.abxKingdoms||t.abxKingdoms.length===0?(u(),K(y,{key:0,colspan:2},{default:o(()=>[n(t.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[n(t.EmptyContent,null,{default:o(()=>[n(t.EmptyHeader,null,{default:o(()=>[n(t.EmptyTitle,null,{default:o(()=>[...e[7]||(e[7]=[p("No kingdoms found",-1)])]),_:1}),n(t.EmptyDescription,null,{default:o(()=>[...e[8]||(e[8]=[p("Add a kingdom to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})])])]),t.showModal?(u(),K(T,{key:0,onClose:e[3]||(e[3]=a=>t.showModal=!1),"content-width":"w-1/2"},{header:o(()=>[r("h3",de,C(t.formTitle),1)]),body:o(()=>[r("form",{onSubmit:e[2]||(e[2]=R((...a)=>t.saveForm&&t.saveForm(...a),["prevent"])),class:"space-y-6 p-4"},[r("div",me,[r("label",ue,[e[9]||(e[9]=r("span",{class:"text-sm font-medium text-foreground"},"Kingdom Name",-1)),G(r("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=a=>t.name=a),placeholder:"Name ..."},null,512),[[L,t.name]]),t.errors.name?(u(),k("p",fe,C(t.errors.name),1)):A("",!0)])]),e[10]||(e[10]=r("hr",{class:"border-border"},null,-1)),e[11]||(e[11]=r("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Kingdom ",-1))],32)]),_:1})):A("",!0)],64)}const ve=U(ne,[["render",ce],["__scopeId","data-v-f35e5a63"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxKingdom.vue"]]);export{ve as default};
