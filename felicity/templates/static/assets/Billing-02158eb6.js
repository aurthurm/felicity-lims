import{V as _,f as S,t as E,X as p,h as D,a1 as P,o as l,c as a,O as t,D as u,Y as f,C as A,a3 as v,F as y,H as b,J as x,E as B,a6 as C,Z as $,_ as M}from"./index-74595aff.js";import{u as j,E as q,a as z,b as F,c as I}from"./billing-c8e17d5c.js";const H={class:"grid grid-cols-12 gap-8 p-6"},J={class:"col-span-6"},L={class:"space-y-6"},N={class:"rounded-lg border border-border bg-card p-6"},O={class:"space-y-6"},R={class:"space-y-4"},X={class:"space-y-2"},Y={class:"relative"},Z={class:"col-span-6"},G={class:"space-y-6"},K={class:"rounded-lg border border-border bg-card p-6"},Q={class:"space-y-6"},W={class:"grid grid-cols-2 gap-4"},ee={class:"space-y-2"},te=["value"],oe={class:"space-y-2"},se=["value"],ne={class:"grid grid-cols-2 gap-4"},ie={class:"space-y-2"},re={class:"space-y-2"},ue={class:"space-y-2"},le=["value"],ae={class:"grid grid-cols-2 gap-4"},de={class:"space-y-2"},ce={class:"space-y-2"},pe={class:"relative"},fe={class:"flex items-center space-x-2"},ge=_({__name:"Billing",props:{target:{type:String,required:!0},targetUid:{type:String,required:!0}},setup(w){const n=j(),{withClientMutation:g}=S(),U=w,{target:r,targetUid:d}=E(U),m=()=>{n.clear(),r?.value==="profile"&&(n.fetchProfilePrice(d.value),n.fetchProfileDiscount(d.value)),r?.value==="analysis"&&(n.fetchAnalysisPrice(d.value),n.fetchAnalysisDiscount(d.value)),n.fetchVouchers()};m(),p(()=>r.value,(i,e)=>m()),p(()=>d.value,(i,e)=>m());const c=D({amount:0});p(()=>n.fetchingPrice,(i,e)=>{i||(r?.value==="profile"&&(c.amount=n.profilePrice?.amount??0),r?.value==="analysis"&&(c.amount=n.analysisPrice?.amount??0))});const k=()=>{const i={...c};let e=r.value=="profile"?n.profilePrice:n.analysisPrice;r?.value==="profile"?g(q,{uid:e.uid,payload:i},"updateProfilePrice").then():g(z,{uid:e.uid,payload:i},"updateAnalysisPrice").then()},s=D({discountType:"",valueType:"",startDate:"",endDate:"",voucherUid:"",valuePercent:0,valueAmount:0,isActive:!0});p(()=>n.fetchingDiscount,(i,e)=>{if(!i){let o={};r?.value==="profile"&&(o={...n.profileDiscount}),r?.value==="analysis"&&(o={...n.analyisDiscount}),s.discountType=o.discountType,s.valueType=o.valueType,s.startDate=o.startDate,s.endDate=o.endDate,s.voucherUid=o.voucherUid,s.valuePercent=o.valuePercent,s.valueAmount=o.valueAmount,s.isActive=o.isActive}});const T=P(["sale","voucher"]),V=P(["percentage","amount"]),h=()=>{const i={...s};let e=r.value=="profile"?n.profileDiscount:n.analyisDiscount;r.value=="profile"?g(F,{uid:e.uid,payload:i},"updateProfileDiscount").then():g(I,{uid:e.uid,payload:i},"updateAnalysisDiscount").then()};return p(()=>s.discountType,(i,e)=>{i!=="voucher"&&(s.voucherUid=void 0)}),(i,e)=>(l(),a("div",H,[t("section",J,[t("div",L,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between"},[t("h3",{class:"text-lg font-semibold text-foreground"},"Pricing Information")],-1)),t("div",N,[t("form",O,[t("div",R,[t("label",X,[e[12]||(e[12]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Amount ($)",-1)),t("div",Y,[e[11]||(e[11]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"},"$",-1)),u(t("input",{class:"w-full pl-8 px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground","onUpdate:modelValue":e[0]||(e[0]=o=>c.amount=o),type:"number",min:"0.0",step:"0.1",placeholder:"0.00"},null,512),[[f,c.amount]])])])]),t("button",{type:"button",onClick:e[1]||(e[1]=A(o=>k(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Pricing ")])])])]),t("section",Z,[t("div",G,[e[26]||(e[26]=t("div",{class:"flex items-center justify-between"},[t("h3",{class:"text-lg font-semibold text-foreground"},"Discounts Information")],-1)),t("div",K,[t("form",Q,[t("div",W,[t("label",ee,[e[15]||(e[15]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Discount Type",-1)),u(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=o=>s.discountType=o)},[e[14]||(e[14]=t("option",{value:""},"Select type",-1)),(l(!0),a(y,null,b(T.value,o=>(l(),a("option",{key:o,value:o,class:"capitalize"},x(o),9,te))),128))],512),[[v,s.discountType]])]),t("label",oe,[e[17]||(e[17]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Value Type",-1)),u(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[3]||(e[3]=o=>s.valueType=o)},[e[16]||(e[16]=t("option",{value:""},"Select type",-1)),(l(!0),a(y,null,b(V.value,o=>(l(),a("option",{key:o,value:o,class:"capitalize"},x(o),9,se))),128))],512),[[v,s.valueType]])])]),t("div",ne,[t("label",ie,[e[18]||(e[18]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date",-1)),u(t("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[4]||(e[4]=o=>s.startDate=o),type:"date"},null,512),[[f,s.startDate]])]),t("label",re,[e[19]||(e[19]=t("span",{class:"text-sm font-medium text-muted-foreground"},"End Date",-1)),u(t("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[5]||(e[5]=o=>s.endDate=o),type:"date"},null,512),[[f,s.endDate]])])]),u(t("div",ue,[t("label",null,[e[21]||(e[21]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Voucher",-1)),u(t("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring mt-2","onUpdate:modelValue":e[6]||(e[6]=o=>s.voucherUid=o)},[e[20]||(e[20]=t("option",{value:""},"Select voucher",-1)),(l(!0),a(y,null,b(C(n).vouchers,o=>(l(),a("option",{key:o.uid,value:o.uid},x(o.code),9,le))),128))],512),[[v,s.voucherUid]])])],512),[[B,s.discountType==="voucher"]]),t("div",ae,[t("label",de,[e[22]||(e[22]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Value Percentage (%)",-1)),u(t("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[7]||(e[7]=o=>s.valuePercent=o),type:"number",min:"0",max:"100",step:"0.1",placeholder:"0.00"},null,512),[[f,s.valuePercent]])]),t("label",ce,[e[24]||(e[24]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Value Amount ($)",-1)),t("div",pe,[e[23]||(e[23]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"},"$",-1)),u(t("input",{class:"w-full pl-8 px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[8]||(e[8]=o=>s.valueAmount=o),type:"number",min:"0",step:"0.1",placeholder:"0.00"},null,512),[[f,s.valueAmount]])])])]),t("div",fe,[u(t("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":e[9]||(e[9]=o=>s.isActive=o),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[$,s.isActive]]),e[25]||(e[25]=t("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Active",-1))]),t("button",{type:"button",onClick:e[10]||(e[10]=A(o=>h(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Discount ")])])])])]))}}),ye=M(ge,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/Billing.vue"]]);export{ye as default};
