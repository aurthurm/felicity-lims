import{W as A,f as B,X as E,a9 as F,i as w,a2 as m,h as O,r as g,o as l,c as u,O as t,a as L,M as f,N as P,F as p,H as k,J as d,a7 as n,z as $,D as v,Z as M,a4 as j,C as T,ai as z,L as R,aF as H,aD as I,_ as J}from"./index-5d85e9da.js";import{u as Q}from"./user-838cdd03.js";import{u as W}from"./setup-d31371ee.js";import"./_queries-0bd36c18.js";const X={class:"space-y-6"},Z={class:"rounded-md border bg-card"},q={class:"relative w-full overflow-auto"},G={class:"w-full caption-bottom text-sm"},K={class:"[&_tr:last-child]:border-0"},Y={class:"px-4 py-2 align-middle"},ee={class:"px-4 py-2 align-middle"},te={class:"px-4 py-2 align-middle"},oe={class:"px-4 py-2 align-middle text-right"},se=["onClick"],ie={class:"text-lg font-semibold text-foreground"},ne={class:"space-y-6"},re={class:"space-y-2"},ae={class:"space-y-2"},le=["value"],de={class:"space-y-2"},ue=A({__name:"LaboratoryListing",setup(fe){const{withClientQuery:ce,withClientMutation:y}=B();E();const c=Q(),r=W();F(()=>{r.fetchOrganization(),c.fetchUsers({}),r.fetchLaboratories()});const C=w(()=>c.getUsers),N=w(()=>r.getLaboratories),U=i=>{if(i.labManagerUid){const e=c.getUsers?.filter(b=>b.uid==i.labManagerUid);if(e?.length>0)return`${e[0]?.firstName} ${e[0]?.lastName}`}return"No Manager Assigned"};let a=m(!1),x=m(""),s=O({});const h=m(!0);function _(i,e){h.value=i,a.value=!0,x.value=(i?"CREATE":"EDIT")+" Laboratory",i?Object.assign(s,{...new Object}):Object.assign(s,{...e})}function D(){if(h.value===!0)delete s.uid,y(H,{payload:{...s,organizationUid:r.getOrganization?.uid}},"createLaboratory").then(i=>r.addLaboratory(i));else{const i=s.uid;delete s.settings,delete s.__typename,delete s.uid,y(I,{uid:i,payload:s},"updateLaboratory").then(e=>r.updateLaboratory(e,!0))}a.value=!1}return(i,e)=>{const b=g("fel-button"),S=g("fel-heading"),V=g("fel-modal");return l(),u(p,null,[t("div",X,[L(S,{title:"Laboratories",description:"Manage your laboratories and their details."},{default:f(()=>[L(b,{onClick:e[0]||(e[0]=o=>_(!0,null))},{default:f(()=>e[6]||(e[6]=[P("Add Laboratory")])),_:1})]),_:1}),t("div",Z,[t("div",q,[t("table",G,[e[7]||(e[7]=t("thead",{class:"[&_tr]:border-b"},[t("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Name"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Manager"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Contact Phone"),t("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"})])],-1)),t("tbody",K,[(l(!0),u(p,null,k(N.value,o=>(l(),u("tr",{key:o?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[t("td",Y,d(o?.name),1),t("td",ee,d(U(o)),1),t("td",te,d(o?.businessPhone),1),t("td",oe,[t("button",{onClick:be=>_(!1,o),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,se)])]))),128))])])])])]),n(a)?(l(),$(V,{key:0,onClose:e[5]||(e[5]=o=>z(a)?a.value=!1:a=!1)},{header:f(()=>[t("h3",ie,d(n(x)),1)]),body:f(()=>[t("form",ne,[t("div",re,[e[8]||(e[8]=t("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Laboratory Name ",-1)),v(t("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=o=>n(s).name=o),placeholder:"Name ..."},null,512),[[M,n(s).name]])]),t("div",ae,[e[10]||(e[10]=t("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Lab Manager ",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n(s).labManagerUid=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[e[9]||(e[9]=t("option",{value:""},"Select Manager",-1)),(l(!0),u(p,null,k(C.value,o=>(l(),u("option",{key:o?.uid,value:o.uid},d(o?.firstName)+" "+d(o?.lastName),9,le))),128))],512),[[j,n(s).labManagerUid]])]),t("div",de,[e[11]||(e[11]=t("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Business Phone ",-1)),v(t("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=o=>n(s).businessPhone=o),placeholder:"Business Phone ..."},null,512),[[M,n(s).businessPhone]])]),e[12]||(e[12]=t("hr",{class:"border-border"},null,-1)),t("button",{type:"button",onClick:e[4]||(e[4]=T(o=>D(),["prevent"])),class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Form ")])]),_:1})):R("",!0)],64)}}}),ye=J(ue,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/laboratory/LaboratoryListing.vue"]]);export{ye as default};
