import{W as U,f as G,a2 as l,h as z,a9 as W,ag as Z,r as D,o as r,c as a,a as N,M as w,N as q,O as e,F as f,H as g,J as u,z as H,C as J,D as p,Z as A,$ as T,L as Q,_ as X}from"./index-93739211.js";import{g as Y,a as K,X as R,Y as ee,Z as te}from"./microbiology.mutations-8d828444.js";const se={class:"overflow-x-auto"},oe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-background shadow-dashboard rounded-lg"},ne={class:"min-w-full divide-y divide-border"},ie={class:"bg-background divide-y divide-border"},re={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ae={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},de={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},le={class:"px-3 py-3.5 whitespace-nowrap text-sm text-foreground"},ue={class:"px-3 py-3.5 whitespace-nowrap text-right text-sm"},ce=["onClick"],me={class:"text-xl font-semibold text-foreground"},fe={class:"space-y-4"},pe={class:"grid grid-cols-1 gap-4"},be={class:"block"},ve={class:"block"},ge={class:"flex gap-4"},xe={class:"w-2/3 space-y-2"},ye={class:"block"},he={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},_e=["value"],we={class:"ml-2 text-sm text-foreground"},Ae={class:"w-1/3"},ke={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Oe={class:"text-sm text-foreground"},Ce=["onClick"],Pe={class:"flex gap-4"},De={class:"w-2/3 space-y-2"},Se={class:"block"},Ve={class:"border border-border rounded-md p-2 h-64 overflow-y-auto"},Ee=["value"],Me={class:"ml-2 text-sm text-foreground"},Le={class:"w-1/3"},Ne={class:"border border-border rounded-md p-2 h-72 overflow-y-auto bg-background"},Te={class:"text-sm text-foreground"},$e=["onClick"],Be=U({__name:"AstPanel",setup(je){const{withClientMutation:S,withClientQuery:k}=G(),x=l(!1),V=l(""),E=l(!0),y=l(""),h=l(""),m=l([]),b=l([]),_=l([]),c=l([]),O=l([]),o=z({uid:"",name:"",description:"",selectedAntibiotics:[],selectedOrganisms:[]});W(()=>{$(),M(),B()});function $(){k(Y,{},"abxLaboratoryAntibiotics").then(n=>{n&&(b.value=n,_.value=[...b.value])})}function M(){k(K,{text:y.value,pageSize:25,sortBy:["name"]},"abxOrganismAll").then(n=>{c.value=c.value?.filter(t=>o.selectedOrganisms.includes(t.uid))||[],c.value=Z(c.value,n?.items,"uid"),O.value=[...c.value]})}function B(){k(R,{},"abxAstPanelAll").then(n=>{n&&(m.value=n,m.value.forEach(t=>t.organisms?.forEach(d=>c.value.push(d))))})}function L(n,t={}){E.value=n,x.value=!0,V.value=(n?"Create":"Edit")+" AST Panel",n?(o.uid="",o.name="",o.description="",o.selectedAntibiotics=[],o.selectedOrganisms=[]):(o.uid=t.uid,o.name=t.name,o.description=t.description,o.selectedAntibiotics=t.antibiotics?.map(d=>d.uid)||[],o.selectedOrganisms=t.organisms?.map(d=>d.uid)||[])}function j(){const n={name:o.name,description:o.description,antibiotics:o.selectedAntibiotics,organisms:o.selectedOrganisms};E.value?S(ee,{payload:n},"createAbxAstPanel").then(t=>{t&&m.value.unshift(t)}):S(te,{uid:o.uid,payload:n},"updateAbxAstPanel").then(t=>{if(t){const d=m.value.findIndex(v=>v.uid===t.uid);d>-1&&(m.value=[...m.value.map((v,C)=>C===d?t:v)])}}),x.value=!1}function F(){if(!h.value){_.value=[...b.value];return}_.value=b.value.filter(n=>n.name.toLowerCase().includes(h.value.toLowerCase()))}function I(){if(!y.value){O.value=[...c.value];return}M()}return(n,t)=>{const d=D("fel-button"),v=D("fel-heading"),C=D("fel-modal");return r(),a(f,null,[N(v,{title:"AST Panels"},{default:w(()=>[N(d,{onClick:t[0]||(t[0]=s=>L(!0))},{default:w(()=>t[8]||(t[8]=[q("Add Panel")])),_:1})]),_:1}),e("div",se,[e("div",oe,[e("table",ne,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Organisms"),e("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Antibiotics"),e("th",{class:"px-3 py-3.5"})])],-1)),e("tbody",ie,[(r(!0),a(f,null,g(m.value,s=>(r(),a("tr",{key:s?.uid},[e("td",re,u(s?.name),1),e("td",ae,u(s?.description),1),e("td",de,u(s?.organisms?.map(i=>i.name).join(", ")),1),e("td",le,u(s?.antibiotics?.map(i=>i.name).join(", ")),1),e("td",ue,[e("button",{onClick:i=>L(!1,s),class:"px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Edit ",8,ce)])]))),128))])])])]),x.value?(r(),H(C,{key:0,onClose:t[7]||(t[7]=s=>x.value=!1),contentWidth:"w-1/2"},{header:w(()=>[e("h3",me,u(V.value),1)]),body:w(()=>[e("form",{onSubmit:J(j,["prevent"]),class:"space-y-6 p-4"},[e("div",fe,[e("div",pe,[e("label",be,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-foreground"},"Panel Name",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter panel name"},null,512),[[A,o.name]])]),e("label",ve,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),rows:"2",class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Enter description"},null,512),[[A,o.description]])])]),e("div",ge,[e("div",xe,[e("label",ye,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-foreground"},"Search Organisms",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),onInput:I,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search organisms..."},null,544),[[A,y.value]])]),e("div",he,[(r(!0),a(f,null,g(O.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[4]||(t[4]=i=>o.selectedOrganisms=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,_e),[[T,o.selectedOrganisms]]),e("span",we,u(s.name),1)]))),128))])]),e("div",Ae,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Organisms",-1)),e("div",ke,[(r(!0),a(f,null,g(o.selectedOrganisms,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Oe,u(c.value?.find(i=>i.uid===s)?.name),1),e("button",{onClick:i=>o.selectedOrganisms=o.selectedOrganisms.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,Ce)]))),128))])])]),e("div",Pe,[e("div",De,[e("label",Se,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-foreground"},"Search Antibiotics",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>h.value=s),onInput:F,class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50",placeholder:"Search antibiotics..."},null,544),[[A,h.value]])]),e("div",Ve,[(r(!0),a(f,null,g(_.value,s=>(r(),a("div",{key:s.uid,class:"flex items-center py-1"},[p(e("input",{type:"checkbox",value:s.uid,"onUpdate:modelValue":t[6]||(t[6]=i=>o.selectedAntibiotics=i),class:"rounded border-border text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50"},null,8,Ee),[[T,o.selectedAntibiotics]]),e("span",Me,u(s.name),1)]))),128))])]),e("div",Le,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-foreground mb-1"},"Selected Antibiotics",-1)),e("div",Ne,[(r(!0),a(f,null,g(o.selectedAntibiotics,s=>(r(),a("div",{key:s,class:"flex items-center justify-between py-1 px-2 mb-1 bg-background rounded-md shadow-sm"},[e("span",Te,u(b.value.find(i=>i.uid==s)?.name),1),e("button",{onClick:i=>o.selectedAntibiotics=o.selectedAntibiotics.filter(P=>P!==s),class:"text-destructive hover:text-destructive/80 text-sm"}," × ",8,$e)]))),128))])])])]),t[16]||(t[16]=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Panel ")],-1))],32)]),_:1})):Q("",!0)],64)}}});const Ue=X(Be,[["__scopeId","data-v-195d3b3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/astpanel/AstPanel.vue"]]);export{Ue as default};
