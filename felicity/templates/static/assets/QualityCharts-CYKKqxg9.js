const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-BoOjdWpS.js","assets/index-CNAOKjig.js","assets/index-vawJu9QC.css","assets/ChartLJ-u0efMREo.js","assets/index-BjN3hr04.js","assets/index-BkD7Hj8s.js","assets/ticks-yQcwDFE8.js","assets/arc-B8IjlRao.js","assets/rgb-Co1IAoj1.js","assets/math-CyDA0WRY.js","assets/index-DaJBD5B5.js","assets/defaultLocale-D2nGpDRe.js","assets/Tableau10-1LCcg9PS.js","assets/range-OtVwhkKS.js"])))=>i.map(i=>d[i]);
import{a0 as j,f as q,ad as B,h as S,a7 as m,a5 as g,a1 as k,a6 as w,av as M,_ as O,r as L,c as h,o as y,A as p,a as f,J as P,P as R,K as F}from"./index-CNAOKjig.js";import{u as J}from"./analysis-CIDyy6YR.js";const N=j({__name:"QualityCharts",setup(E,{expose:l}){l();const C=k(()=>w(()=>import("./vue-multiselect.esm-BoOjdWpS.js"),__vite__mapDeps([0,1,2]))),t=k(()=>w(()=>import("./ChartLJ-u0efMREo.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13]))),u=J(),{withClientQuery:d}=q();B(()=>{u.fetchAnalysesServices({})});const _=S(()=>u.getAnalysesServicesSimple),r=m([]),a=new Date;let o=m({month:a.getMonth(),year:a.getFullYear()}),c=m(null);const v=m(!1),A=async e=>{if(!o.value)return;const s={analyses:[e.uid],month:o.value.month+1,year:o.value.year};await d(M,s,"qcChartData").then(n=>{r.value=n??[]}).finally(()=>v.value=!1)},D=async e=>{if(!c.value)return;const s={analyses:[c.value?.uid],month:e.month+1,year:e.year};await d(M,s,"qcChartData").then(n=>{r.value=n??[]}).finally(()=>v.value=!1)},Q=S(()=>r.value?V(x(r.value)):[]);function x(e){return e.reduce((s,n)=>{const i=n.sample.qcLevel.level;return s[i]||(s[i]={results:[],dates:[]}),s[i].results.push(parseFloat(n.result)),s[i].dates.push(n.dateVerified),s},{})}function V(e){return Object.entries(e).map(([s,n])=>({name:s,data:n.results.map((i,T)=>({date:n.dates[T],value:i}))}))}g(c,async e=>{e&&await A(e)}),g(o,async e=>{e&&await D(e)});const b={VueMultiselect:C,ChartLJ:t,analysisStore:u,withClientQuery:d,analysesServices:_,rawData:r,today:a,get selectedMonth(){return o},set selectedMonth(e){o=e},get selectedAnalyses(){return c},set selectedAnalyses(e){c=e},isLoading:v,handleAnalysisChange:A,handlePeriodChange:D,groupedChartData:Q,groupQCDataByLevel:x,convertToChartSeries:V};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),U={class:"min-h-[500px]"},I={class:"flex justify-between"},z={class:"flex justify-start items-center gap-x-2"};function G(E,l,C,t,u,d){const _=L("fel-heading"),r=L("VueDatePicker");return y(),h("div",U,[p("div",I,[f(_,{title:"Analyses Service Control Charts"}),p("div",z,[f(r,{class:"z-60 disabled:bg-muted",modelValue:t.selectedMonth,"onUpdate:modelValue":l[0]||(l[0]=a=>t.selectedMonth=a),"max-date":t.today,"month-picker":""},null,8,["modelValue","max-date"]),f(t.VueMultiselect,{class:"max-w-[300px]",modelValue:t.selectedAnalyses,"onUpdate:modelValue":l[1]||(l[1]=a=>t.selectedAnalyses=a),options:t.analysesServices,multiple:!1,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])])]),l[2]||(l[2]=p("hr",{class:"my-4"},null,-1)),t.groupedChartData?.length==0?(y(),h(P,{key:0},[R(" The selected analysis has no data for the selected period. ")],64)):(y(!0),h(P,{key:1},F(t.groupedChartData,a=>(y(),h("div",{class:"mb-4",key:a.name},[f(t.ChartLJ,{title:a.name,series:a.data},null,8,["title","series"])]))),128))])}const H=O(N,[["render",G],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/qcontrol/QualityCharts.vue"]]);export{H as default};
