import{P as v,e as P,h as _,o,c as i,b as s,F as a,D as l,E as u,a as k,a2 as A,X as U,Y as D,aH as G,_ as V}from"./index-fa13e788.js";import{u as B}from"./user-c399b7d7.js";import"./_queries-fa6c96fd.js";const E={class:"overflow-x-auto mt-4"},S={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},z={class:"relative"},C={class:"min-w-full"},F=s("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Permissions ",-1),L=s("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300"},null,-1),N={class:"flex-1 overflow-y-auto max-h-[700px]"},O={class:"min-w-full"},T={class:"bg-white"},j={class:"bg-slate-100"},H={class:"py-1 font-bold px-1 text-gray-600"},I={class:"py-1 font-sm italic text-gray-500 px-1"},M=v({__name:"Permissions",setup(R){const h=U(()=>D(()=>import("./FelSwitch-db1eabf1.js"),["assets/FelSwitch-db1eabf1.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"]));let d=B();const{withClientMutation:f}=P();d.fetchGroupsAndPermissions();const c=_(()=>d.getGroups);function p(r,n){return r?.permissions?.some(e=>e?.uid===n?.uid)??!1}const b=(r,n)=>r?.reduce(function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e},{}),y=_(()=>Array.from(Object.entries(b(d.getPermissions,"target"))));function g(r,n){f(G,{groupUid:r?.uid,permissionUid:n?.uid},"updateGroupPermissions").then(e=>d.updateGroupsAndPermissions(e))}function x(r,n,e){e!==p(r,n)&&g(r,n)}return(r,n)=>(o(),i("div",E,[s("div",S,[s("div",z,[s("table",C,[s("thead",null,[s("tr",null,[F,(o(!0),i(a,null,l(c.value,e=>(o(),i("th",{key:e.uid,class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},u(e.name),1))),128)),L])])]),s("div",N,[s("table",O,[s("tbody",T,[(o(!0),i(a,null,l(y.value,e=>(o(),i(a,{key:e[0]},[s("tr",j,[s("td",H,u(e[0]),1),(o(!0),i(a,null,l(c.value,t=>(o(),i("td",{class:"py-1 font-medium px-1 text-slate-100",key:t.uid},u(t.name),1))),128))]),(o(!0),i(a,null,l(e[1],t=>(o(),i("tr",{key:t.uid,class:"border-b border-slate-200"},[s("td",I,u(t.action),1),(o(!0),i(a,null,l(c.value,m=>(o(),i("td",{key:m.uid,class:"px-1"},[k(A(h),{"model-value":p(m,t),"onUpdate:modelValue":w=>x(m,t,w),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),J=V(M,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{J as default};
