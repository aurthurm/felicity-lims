import{d as R,I as X,r as u,n as P,p as q,at as z,q as G,o as B,c as $,b as s,g as V,z as b,f as o,y as K,t as J,w as W,e as c,v as d,i as Y,B as Z,F as Q,j as y,_,a6 as D,D as ee,E as se,k as te}from"./index-ad4ed84b.js";import{m as ae,j as oe,n as le,o as ne}from"./microbiology.mutations-40ac8c55.js";const n=f=>(ee("data-v-a814e9fb"),f=f(),se(),f),re={class:"w-full my-4"},ie=n(()=>s("hr",null,null,-1)),ue=n(()=>s("hr",null,null,-1)),ce={class:"mb-6"},de={class:"grid grid-cols-2 gap-4"},pe={class:"block"},fe=n(()=>s("span",{class:"text-gray-700"},"Organism",-1)),me={class:"block"},ge=n(()=>s("span",{class:"text-gray-700"},"Serotype",-1)),he={class:"block"},be=n(()=>s("span",{class:"text-gray-700"},"Serogroup",-1)),ye={class:"block"},_e=n(()=>s("span",{class:"text-gray-700"},"Subspecies",-1)),ve={class:"block"},xe=n(()=>s("span",{class:"text-gray-700"},"O Antigens",-1)),Se={class:"block"},ke=n(()=>s("span",{class:"text-gray-700"},"H Phase1",-1)),Oe={class:"block"},Ae=n(()=>s("span",{class:"text-gray-700"},"H Phase2",-1)),Ce={class:"block"},we=n(()=>s("span",{class:"text-gray-700"},"X997 Check",-1)),Pe={class:"block"},Be=n(()=>s("span",{class:"text-gray-700"},"Fate",-1)),Ve=n(()=>s("hr",{class:"my-6"},null,-1)),De=n(()=>s("button",{type:"submit",class:"w-full bg-sky-800 text-white rounded-md px-4 py-2 transition-colors duration-300 ease-in-out hover:bg-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-500"}," Save OrganismSerotype ",-1)),Ue=R({__name:"AbxOrganismSerotype",setup(f){const U=y(()=>_(()=>import("./FelModal-fa927fb9.js"),["assets/FelModal-fa927fb9.js","assets/index-ad4ed84b.js","assets/index-3e01f4af.css","assets/FelModal-780aeea9.css"])),I=y(()=>_(()=>import("./FelDataTable-a0186d70.js"),["assets/FelDataTable-a0186d70.js","assets/index-ad4ed84b.js","assets/index-3e01f4af.css"])),E=y(()=>_(()=>import("./vue-multiselect.esm-d864d16c.js"),["assets/vue-multiselect.esm-d864d16c.js","assets/index-ad4ed84b.js","assets/index-3e01f4af.css"])),{withClientMutation:v,withClientQuery:x}=X();let p=u(!1),S=u(""),t=P({});const g=u(!0),k=u(!1),i=u([]),O=u([]);let r=P({first:50,after:"",text:"",sortBy:["organism___name"],filterAction:!1});const A=u(0);let C=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const M=q(()=>i?.value?.length+" of "+A.value+" organisms"),T=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Organism",value:"organism.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serotype",value:"serotype",sortable:!1,sortBy:"asc",hidden:!1},{name:"Serogroup",value:"serogroup",sortable:!1,sortBy:"asc",hidden:!1},{name:"Subspecies",value:"subspecies",sortable:!1,sortBy:"asc",hidden:!1},{name:"O Antigens",value:"oAntigens",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase1",value:"hPhase1",sortable:!1,sortBy:"asc",hidden:!1},{name:"H Phase2",value:"hPhase2",sortable:!1,sortBy:"asc",hidden:!1},{name:"X997 Check",value:"x997Check",sortable:!1,sortBy:"asc",hidden:!1},{name:"Fate",value:"fate",sortable:!1,sortBy:"asc",hidden:!1},{name:"",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(l,e){return z("button",{type:"button",class:"bg-sky-800 text-white py-1 px-2 rounded-sm leading-none",innerHTML:"Edit",onClick:()=>w(!1,l)},[])}}]);function h(l){x(ae,{text:l.text,pageSize:l.first,sortBy:l.sortBy},void 0).then(e=>{const a=e.abxOrganismSerotypeAll,m=a.items;l.filterAction?(i.value=[],i.value=m):i.value=D(i.value,m,"uid"),A.value=a?.totalCount,C.value=a?.pageInfo}).finally(()=>{k.value=!1})}function F(l,e){l?.length<3||(x(oe,{first:50,after:"",text:l,sortBy:["name"],filterAction:!0},"abxOrganismAll").then(a=>{a&&(O.value=a?.items??[])}),console.log(l,e))}G(()=>{h(r)});function H(l){r.first=100,r.after="",r.text=l.filterText,r.filterAction=!0,h(r)}function N(l){r.first=l.fetchCount,r.after=C?.value?.endCursor,r.text=l.filterText,r.filterAction=!1,h(r)}const j=()=>Object.assign(t,{});function w(l,e={}){g.value=l,p.value=!0,S.value=(l?"Create":"Edit")+" OrganismSerotype",l?Object.assign(t,{}):Object.assign(t,{...e})}function L(){const l={organismUid:t?.organism?.uid,serotype:t?.serotype,serogroup:t?.serogroup,subspecies:t?.subspecies,oAntigens:t?.oAntigens,hPhase1:t?.hPhase1,hPhase2:t?.hPhase2,x997Check:t?.x997Check,fate:t?.fate};g.value===!0&&v(le,{payload:l},"createAbxOrganismSerotype").then(e=>{e&&(i.value=D(i.value,[e],"uid"))}),g.value===!1&&v(ne,{uid:t.uid,payload:l},"updateAbxOrganismSerotype").then(e=>{if(e){const a=i.value.findIndex(m=>m.uid==e.uid);i.value[a]=e}}),p.value=!1}return(l,e)=>(B(),$(Q,null,[s("div",re,[ie,s("button",{onClick:e[0]||(e[0]=a=>w(!0)),class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add OrganismSerotype "),ue,V(o(I),{columns:T.value,data:i.value,toggleColumns:!0,loading:k.value,paginable:!0,pageMeta:{fetchCount:o(r).first,hasNextPage:!0,countNone:M.value},searchable:!0,filterable:!1,onOnSearchKeyUp:H,onOnSearchFocus:j,onOnPaginate:N,selectable:!1},{footer:b(()=>[]),_:1},8,["columns","data","loading","pageMeta"])]),o(p)?(B(),K(o(U),{key:0,onClose:e[10]||(e[10]=a=>Y(p)?p.value=!1:p=!1),"content-width":"w-1/2"},{header:b(()=>[s("h3",null,J(o(S)),1)]),body:b(()=>[s("form",{onSubmit:W(L,["prevent"]),class:"p-4"},[s("div",ce,[s("div",de,[s("label",pe,[fe,V(o(E),{modelValue:o(t).organism,"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).organism=a),options:O.value,searchable:!0,"close-on-select":!0,"clear-on-select":!1,onSearchChange:F,label:"name"},null,8,["modelValue","options"])]),s("label",me,[ge,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=a=>o(t).serotype=a),placeholder:"Serotype"},null,512),[[d,o(t).serotype]])]),s("label",he,[be,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[3]||(e[3]=a=>o(t).serogroup=a),placeholder:"Serogroup"},null,512),[[d,o(t).serogroup]])]),s("label",ye,[_e,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>o(t).subspecies=a),placeholder:"Subspecies"},null,512),[[d,o(t).subspecies]])]),s("label",ve,[xe,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[5]||(e[5]=a=>o(t).oAntigens=a),placeholder:"O Antigens"},null,512),[[d,o(t).oAntigens]])]),s("label",Se,[ke,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[6]||(e[6]=a=>o(t).hPhase1=a),placeholder:"H Phase1"},null,512),[[d,o(t).hPhase1]])]),s("label",Oe,[Ae,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[7]||(e[7]=a=>o(t).hPhase2=a),placeholder:"H Phase2"},null,512),[[d,o(t).hPhase2]])]),s("label",Ce,[we,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[8]||(e[8]=a=>o(t).x997Check=a),placeholder:"X997 Check"},null,512),[[d,o(t).x997Check]])]),s("label",Pe,[Be,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[9]||(e[9]=a=>o(t).fate=a),placeholder:"fate"},null,512),[[d,o(t).fate]])])])]),Ve,De],32)]),_:1})):Z("",!0)],64))}});const Me=te(Ue,[["__scopeId","data-v-a814e9fb"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/organism/AbxOrganismSerotype.vue"]]);export{Me as default};
