import{a0 as K,f as z,a7 as g,h as M,_ as H,r as _,c as i,o as a,a as D,A as e,C as Q,E as b,N as y,P as W,J as h,K as F,L as l,D as X,F as C,a2 as N,a9 as Z}from"./index-v7Q387fb.js";import{c as j,f as $,a as w,u as ee,b as v}from"./index.esm-D-THTBXR.js";import{o as te,p as re}from"./analyses.mutations-DwO9qbHD.js";import{u as oe}from"./setup-sVxge2CR.js";import{u as se}from"./analysis-xHaHOXP2.js";const ne=K({__name:"AnalysesCategories",setup(T,{expose:t}){t();const u=se(),r=oe(),{withClientMutation:f}=z();let m=g(!1),p=g("");const c=g(!0),d=g(null),o=j({name:w().trim().required("Category name is required"),description:w().trim().nullable(),departmentUid:w().trim().nullable(),active:$().default(!0)}),{handleSubmit:x,resetForm:A,setValues:k}=ee({validationSchema:o,initialValues:{name:"",description:"",departmentUid:"",active:!0}}),{value:V,errorMessage:B}=v("name"),{value:L,errorMessage:q}=v("description"),{value:O,errorMessage:P}=v("departmentUid"),{value:R}=v("active"),Y=M(()=>r.getDepartments);u.fetchAnalysesCategories();const G=M(()=>u.getAnalysesCategories);function E(s){f(te,{payload:s},"createAnalysisCategory").then(n=>u.addAnalysisCategory(n))}function S(s){d.value&&f(re,{uid:d.value,payload:s},"updateAnalysisCategory").then(n=>u.updateAnalysisCategory(n))}function I(s,n){c.value=s,m.value=!0,p.value=(s?"CREATE":"EDIT")+" ANALYSES CATEGORY",s?(d.value=null,A({values:{name:"",description:"",departmentUid:"",active:!0}})):(d.value=n?.uid??null,k({name:n?.name??"",description:n?.description??"",departmentUid:n?.departmentUid??"",active:n?.active??!0}))}const J=x(s=>{const n={name:s.name,description:s.description??null,departmentUid:s.departmentUid?s.departmentUid:null,active:s.active};c.value===!0&&E(n),c.value===!1&&S(n),m.value=!1}),U={analysisStore:u,setupStore:r,withClientMutation:f,get showModal(){return m},set showModal(s){m=s},get formTitle(){return p},set formTitle(s){p=s},formAction:c,currentUid:d,categorySchema:o,handleSubmit:x,resetForm:A,setValues:k,name:V,nameError:B,description:L,descriptionError:q,departmentUid:O,departmentError:P,active:R,departments:Y,analysesCategories:G,addAnalysesCategory:E,editAnalysesCategory:S,FormManager:I,saveForm:J};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),ae={class:"overflow-x-auto mt-4"},ie={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},de={class:"min-w-full"},le={class:"bg-card"},ue={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ce={class:"text-sm text-foreground"},me={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},pe={class:"text-sm text-foreground"},fe={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},ge=["onClick"],be={class:"text-lg font-bold text-foreground"},ye={class:"space-y-4"},ve={class:"grid grid-cols-2 gap-4"},xe={class:"col-span-2 space-y-2"},_e={key:0,class:"text-sm text-destructive"},he={class:"col-span-1 space-y-2"},Ce=["value"],we={key:0,class:"text-sm text-destructive"},Ae={class:"col-span-2 space-y-2"},ke={key:0,class:"text-sm text-destructive"};function Ee(T,t,u,r,f,m){const p=_("fel-button"),c=_("fel-heading"),d=_("fel-modal");return a(),i(h,null,[D(c,{title:"Analyses Categories"},{default:y(()=>[D(p,{onClick:t[0]||(t[0]=o=>r.FormManager(!0,null))},{default:y(()=>[...t[6]||(t[6]=[W("Add Analyses Category",-1)])]),_:1})]),_:1}),e("div",ae,[e("div",ie,[e("table",de,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Category Name"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Department"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",le,[(a(!0),i(h,null,F(r.analysesCategories,o=>(a(),i("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",ue,[e("div",ce,l(o?.name),1)]),e("td",me,[e("div",pe,l(o?.department?.name),1)]),e("td",fe,[e("button",{onClick:x=>r.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ge)])]))),128))])])])]),r.showModal?(a(),Q(d,{key:0,onClose:t[5]||(t[5]=o=>r.showModal=!1)},{header:y(()=>[e("h3",be,l(r.formTitle),1)]),body:y(()=>[e("form",{onSubmit:t[4]||(t[4]=X((...o)=>r.saveForm&&r.saveForm(...o),["prevent"])),class:"p-6 space-y-6"},[e("div",ye,[e("div",ve,[e("label",xe,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Category Name",-1)),C(e("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r.name=o),placeholder:"Name ..."},null,512),[[N,r.name]]),r.nameError?(a(),i("p",_e,l(r.nameError),1)):b("",!0)]),e("label",he,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),C(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r.departmentUid=o)},[t[9]||(t[9]=e("option",{value:""},"Select Department",-1)),(a(!0),i(h,null,F(r.departments,o=>(a(),i("option",{key:o.uid,value:o?.uid},l(o.name),9,Ce))),128))],512),[[Z,r.departmentUid]]),r.departmentError?(a(),i("p",we,l(r.departmentError),1)):b("",!0)]),e("label",Ae,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),C(e("textarea",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r.description=o),placeholder:"Description ...",rows:"3"},null,512),[[N,r.description]]),r.descriptionError?(a(),i("p",ke,l(r.descriptionError),1)):b("",!0)])])]),t[12]||(t[12]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):b("",!0)],64)}const Ne=H(ne,[["render",Ee],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesCategories.vue"]]);export{Ne as default};
