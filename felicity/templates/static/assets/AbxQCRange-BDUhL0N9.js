const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5OmCQ1r.js","assets/index-DNLAO2yS.css","assets/FelDataTable-B0U15Sho.js","assets/vue-multiselect.esm-Bo98CR0X.js"])))=>i.map(i=>d[i]);
import{a0 as W,f as L,a7 as u,g as B,h as j,ad as Y,a1 as A,a6 as C,ak as O,_ as z,r as P,c as J,o as U,a as y,A as o,C as K,E as H,N as k,D as X,F as r,a2 as a,L as Z,J as $}from"./index-C5OmCQ1r.js";import{i as ee,P as oe,Q as te,R as le,T as ne}from"./microbiology.mutations-CSRJRj-c.js";const se=W({__name:"AbxQCRange",setup(D,{expose:e}){e();const R=A(()=>C(()=>import("./index-C5OmCQ1r.js").then(l=>l.de),__vite__mapDeps([0,1]))),t=A(()=>C(()=>import("./FelDataTable-B0U15Sho.js"),__vite__mapDeps([2,0,1]))),M=A(()=>C(()=>import("./vue-multiselect.esm-Bo98CR0X.js"),__vite__mapDeps([3,0,1]))),{withClientMutation:g,withClientQuery:m}=L();let b=u(!1),n=u(""),s=B({});const x=u(!0),T=u(!1),d=u([]),V=u([]),_=u([]);let i=B({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const w=u(0);let p=u({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const I=j(()=>d?.value?.length+" of "+w.value+" qcRanges"),S=u([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function v(l){m(te,{text:l.text,pageSize:l.first,sortBy:l.sortBy},void 0).then(f=>{const c=f.abxQcRangeAll,h=c.items;l.filterAction?(d.value=[],d.value=h):d.value=O(d.value,h,"uid"),w.value=c?.totalCount,p.value=c?.pageInfo}).finally(()=>{T.value=!1})}Y(()=>{m(ee,{},"abxGuidelinesAll").then(l=>{l&&(V.value=l)}),v(i),m(oe,{},"abxMediumAll").then(l=>{l&&(_.value=l)})});function E(l){i.first=100,i.after="",i.text=l.filterText,i.filterAction=!0,v(i)}function G(l){i.first=l.fetchCount,i.after=p?.value?.endCursor,i.text=l.filterText,i.filterAction=!1,v(i)}const N=()=>Object.assign(s,{});function q(l,f={}){x.value=l,b.value=!0,n.value=(l?"Create":"Edit")+" QcRange",l?Object.assign(s,{}):Object.assign(s,{...f})}function F(){const l={guidelineUid:s.guideline?.uid,year:s.year,strain:s.strain,referenceTable:s.referenceTable,whonetOrgCode:s.whonetOrgCode,antibiotic:s.antibiotic,abxTest:s.abxTest,whonetAbxCode:s.whonetAbxCode,method:s.method,medium:s.medium,minimum:s.minimum,maximum:s.maximum};x.value===!0&&g(le,{payload:l},"createAbxQcRange").then(f=>{f&&(d.value=O(d.value,[f],"uid"))}),x.value===!1&&g(ne,{uid:s.uid,payload:l},"updateAbxQcRange").then(f=>{if(f){const c=d.value.findIndex(h=>h.uid==f.uid);d.value[c]=f}}),b.value=!1}const Q={modal:R,DataTable:t,VueMultiselect:M,withClientMutation:g,withClientQuery:m,get showModal(){return b},set showModal(l){b=l},get formTitle(){return n},set formTitle(l){n=l},get form(){return s},set form(l){s=l},formAction:x,fetchingQcRanges:T,qcRanges:d,abxGuidelines:V,abxMediums:_,get abxParams(){return i},set abxParams(l){i=l},qcRangesCount:w,get qcRangesPageInfo(){return p},set qcRangesPageInfo(l){p=l},countNone:I,tableColumns:S,fetchQcRanges:v,searchQcRanges:E,showMoreQcRanges:G,resetQcRange:N,FormManager:q,saveForm:F};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),ie={class:"rounded-lg shadow-sm bg-card p-6"},re={class:"text-xl font-semibold text-foreground"},ae={class:"space-y-4"},de={class:"grid grid-cols-2 gap-4"},fe={class:"block"},ue={class:"block"},me={class:"space-y-4"},be={class:"grid grid-cols-3 gap-4"},ce={class:"block"},ge={class:"block"},xe={class:"block"},pe={class:"block"},ve={class:"block"},he={class:"block"},ye={class:"block"},we={class:"block"},Ae={class:"block"},Ce={class:"block"},ke={class:"space-y-4"},Re={class:"block"};function Me(D,e,R,t,M,g){const m=P("fel-heading"),b=P("fel-modal");return U(),J($,null,[y(m,{title:"Quality Control range"}),o("div",ie,[y(t.DataTable,{columns:t.tableColumns,data:t.qcRanges,toggleColumns:!0,loading:t.fetchingQcRanges,paginable:!0,pageMeta:{fetchCount:t.abxParams.first,hasNextPage:!0,countNone:t.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:t.searchQcRanges,onOnSearchFocus:t.resetQcRange,onOnPaginate:t.showMoreQcRanges,selectable:!1},{footer:k(()=>[...e[14]||(e[14]=[])]),_:1},8,["columns","data","loading","pageMeta"])]),t.showModal?(U(),K(b,{key:0,onClose:e[13]||(e[13]=n=>t.showModal=!1),"content-width":"w-1/2"},{header:k(()=>[o("h3",re,Z(t.formTitle),1)]),body:k(()=>[o("form",{onSubmit:X(t.saveForm,["prevent"]),class:"space-y-6 p-4"},[o("div",ae,[e[17]||(e[17]=o("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),o("div",de,[o("label",fe,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),y(t.VueMultiselect,{modelValue:t.form.guidelines,"onUpdate:modelValue":e[0]||(e[0]=n=>t.form.guidelines=n),options:t.abxGuidelines,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",ue,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),r(o("input",{type:"number",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=n=>t.form.year=n),placeholder:"Enter year"},null,512),[[a,t.form.year]])])])]),o("div",me,[o("div",be,[o("label",ce,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-foreground"},"Strain",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=n=>t.form.strain=n),placeholder:"Strain"},null,512),[[a,t.form.strain]])]),o("label",ge,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"Reference Table",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=n=>t.form.referenceTable=n),placeholder:"Reference Table"},null,512),[[a,t.form.referenceTable]])]),o("label",xe,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=n=>t.form.whonetOrgCode=n),placeholder:"Whonet Org Code"},null,512),[[a,t.form.whonetOrgCode]])]),o("label",pe,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Antibiotic",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=n=>t.form.antibiotic=n),placeholder:"Antibiotic"},null,512),[[a,t.form.antibiotic]])]),o("label",ve,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Abx Test",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=n=>t.form.abxTest=n),placeholder:"Abx Test"},null,512),[[a,t.form.abxTest]])]),o("label",he,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Abx Code",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=n=>t.form.whonetAbxCode=n),placeholder:"Whonet Abx Code"},null,512),[[a,t.form.whonetAbxCode]])]),o("label",ye,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-foreground"},"Method",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=n=>t.form.method=n),placeholder:"Method"},null,512),[[a,t.form.method]])]),o("label",we,[e[25]||(e[25]=o("span",{class:"text-sm font-medium text-foreground"},"Medium",-1)),y(t.VueMultiselect,{modelValue:t.form.medium,"onUpdate:modelValue":e[9]||(e[9]=n=>t.form.medium=n),options:t.abxMediums,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",Ae,[e[26]||(e[26]=o("span",{class:"text-sm font-medium text-foreground"},"Minimum",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[10]||(e[10]=n=>t.form.minimum=n),placeholder:"Minimum"},null,512),[[a,t.form.minimum]])]),o("label",Ce,[e[27]||(e[27]=o("span",{class:"text-sm font-medium text-foreground"},"Maximum",-1)),r(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=n=>t.form.maximum=n),placeholder:"Maximum"},null,512),[[a,t.form.maximum]])])])]),o("div",ke,[o("label",Re,[e[28]||(e[28]=o("span",{class:"text-sm font-medium text-foreground"},"Comments",-1)),r(o("textarea",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[12]||(e[12]=n=>t.form.comments=n),rows:"3",placeholder:"Additional comments..."},null,512),[[a,t.form.comments]])])]),e[29]||(e[29]=o("hr",{class:"border-border"},null,-1)),e[30]||(e[30]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save QcRange ",-1))],32)]),_:1})):H("",!0)],64)}const _e=z(se,[["render",Me],["__scopeId","data-v-2041ea59"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{_e as default};
