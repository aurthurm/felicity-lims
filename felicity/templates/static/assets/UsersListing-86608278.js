import{W as E,a2 as v,Y as D,o as i,c as a,a5 as m,O as t,J as d,F as k,H as _,L as q,aU as I,_ as S,a9 as T,i as $,h as M,f as F,r as P,a7 as r,z as L,M as z,C as R,D as x,Z as h,a as G,a4 as O,af as j,b2 as H,b3 as K}from"./index-93739211.js";import{u as J}from"./user-3b0a83d1.js";import"./_queries-2ba61825.js";const W={class:"relative"},Y=["title"],Z={key:0,class:"text-foreground"},Q={key:1,class:"text-muted-foreground"},X={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},ee={key:0,class:"flex items-center space-x-1 bg-background/95 backdrop-blur-sm px-2 py-1 rounded-md shadow-sm border border-border"},te={class:"flex space-x-1"},se={class:"text-xs text-muted-foreground ml-1"},oe={key:1,class:"text-muted-foreground bg-background/80 backdrop-blur-sm p-1 rounded transition-colors duration-200 group-hover:text-primary"},re={key:1,class:"relative"},le=["id","value","type","placeholder","disabled"],ie=E({__name:"FelProtectedInput",props:{modelValue:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},requiredClicks:{type:Number,required:!1,default:3},type:{type:String,required:!1,default:"text"},id:{type:String,required:!1,default:""},class:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(B,{emit:f}){const b=B,w=f,u=v(!0),g=v(b.modelValue),s=v(),n=v(0),c=v();D(()=>b.modelValue,e=>{g.value=e});const U=e=>{if(!(b.disabled||!u.value)){if(e.preventDefault(),e.stopPropagation(),n.value++,c.value&&clearTimeout(c.value),n.value>=b.requiredClicks){N();return}c.value=setTimeout(()=>{n.value=0},1500)}},N=async()=>{u.value=!1,n.value=0,c.value&&clearTimeout(c.value),await I(),s.value?.focus(),s.value?.select()},y=()=>{u.value=!0,n.value=0,c.value&&clearTimeout(c.value)},C=e=>{const l=e.target;g.value=l.value,w("update:modelValue",l.value)},A=e=>{e.key==="Enter"?(y(),s.value?.blur()):e.key==="Escape"&&(g.value=b.modelValue,w("update:modelValue",b.modelValue),y(),s.value?.blur())},p=()=>{setTimeout(()=>{y()},200)};return(e,l)=>(i(),a("div",W,[u.value?(i(),a("div",{key:0,onClick:U,class:m(["relative cursor-pointer transition-all duration-200 group select-none",e.disabled?"cursor-not-allowed opacity-50":"hover:ring-2 hover:ring-primary/20 hover:bg-primary/5",n.value>0&&!e.disabled&&"ring-2 ring-primary/30 bg-primary/10"]),title:e.disabled?"Input is disabled":`Click ${e.requiredClicks} times quickly to unlock for editing (${n.value}/${e.requiredClicks})`},[t("div",{class:m(["w-full px-3 py-2 bg-background border border-border rounded-md text-sm transition-colors duration-200",e.disabled?"bg-muted text-muted-foreground cursor-not-allowed":n.value>0?"border-primary bg-primary/5 text-foreground":"text-foreground group-hover:border-primary/50"])},[g.value?(i(),a("span",Z,d(g.value),1)):(i(),a("span",Q,d(e.placeholder),1))],2),e.disabled?q("",!0):(i(),a("div",X,[n.value>0?(i(),a("div",ee,[t("div",te,[(i(!0),a(k,null,_(e.requiredClicks,o=>(i(),a("div",{key:o,class:m(["w-1.5 h-1.5 rounded-full transition-all duration-200",o<=n.value?"bg-primary":"bg-muted"])},null,2))),128))]),t("span",se,d(e.requiredClicks-n.value)+" more ",1)])):(i(),a("div",oe,l[0]||(l[0]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)])))]))],10,Y)):(i(),a("div",re,[t("input",{ref_key:"inputRef",ref:s,id:e.id,value:g.value,type:e.type,placeholder:e.placeholder,disabled:e.disabled,onInput:C,onKeydown:A,onBlur:p,class:"w-full px-3 py-2 bg-background border-2 border-primary text-foreground rounded-md text-sm placeholder:text-muted-foreground transition-colors duration-200 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,40,le),l[1]||(l[1]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[t("div",{class:"text-primary bg-background/90 backdrop-blur-sm p-1 rounded"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2 2v6a2 2 0 002 2z"})])])],-1))]))]))}}),ae=S(ie,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/ui/form/FelProtectedInput.vue"]]),ne={class:"space-y-6"},de={class:"flex justify-between items-center"},ue={class:"bg-card rounded-lg shadow-sm"},ce={class:"min-w-full divide-y divide-border"},pe={class:"bg-background divide-y divide-border"},me={class:"px-6 py-4 whitespace-nowrap text-sm"},fe={class:"px-6 py-4 whitespace-nowrap text-sm"},be={class:"px-6 py-4 whitespace-nowrap text-sm"},ge={class:"px-6 py-4 whitespace-nowrap text-sm"},ve={class:"px-6 py-4 whitespace-nowrap text-sm"},ye={class:"px-6 py-4 whitespace-nowrap text-sm"},xe={class:"px-6 py-4 whitespace-nowrap text-sm"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ke=["onClick"],we={class:"grid grid-cols-2 gap-6"},_e={class:"space-y-2"},Ue={class:"space-y-2"},Ne={class:"space-y-2"},Ce={class:"space-y-2"},Ae={class:"space-y-2"},Be={class:"space-y-2"},Ve={class:"col-span-2 space-y-2"},$e=["value"],Ee={class:"flex items-center space-x-4"},qe={class:"flex items-center space-x-2"},Se=["aria-checked"],De={class:"flex items-center space-x-4"},Ie={class:"flex items-center space-x-2"},Te=["aria-checked"],Me={class:"flex justify-end pt-6"},Fe={type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200"},Pe=E({__name:"UsersListing",setup(B){const f=J();T(()=>{f.fetchUsers({}),f.fetchGroupsAndPermissions()});let b=$(()=>f.getUsers);const w=$(()=>f.getGroups);let u=v(!1),g=v(""),s=M({userUid:"",firstName:"",lastName:"",email:"",groupUid:"",userName:"",password:"",passwordc:"",isActive:!0,isBlocked:!1});const n=v(!0),{withClientMutation:c}=F();function U(){c(H,s,"createUser").then(p=>f.addUser(p))}function N(){c(K,s,"updateUser").then(p=>f.updateUser(p))}function y(p,e={}){if(n.value=p,u.value=!0,g.value=(p?"CREATE":"EDIT")+" USER",p){let l=new Object;l.firstName="",l.lastName="",l.email="",l.isActive=!0,l.userName="",l.isBlocked=!1,Object.assign(s,{...l,groupUid:"",userUid:""})}else s.userUid=e?.uid||"",s.groupUid=e?.groups&&e.groups[0]?e.groups[0].uid:"",s.isActive=e.isActive??!0,s.isBlocked=e.isBlocked??!1,s.userName=e.userName??"",Object.assign(s,{...e})}function C(){n.value?U():N(),u.value=!1}const A=["First Name","Last Name","Email","Active","Group","Username","Blocked","Actions"];return(p,e)=>{const l=P("fel-modal");return i(),a(k,null,[t("div",ne,[t("div",de,[e[12]||(e[12]=t("h1",{class:"text-2xl font-semibold"},"Users",-1)),t("button",{onClick:e[0]||(e[0]=o=>y(!0)),class:"inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary","aria-label":"Add new user"}," Add User ")]),t("div",ue,[t("table",ce,[t("thead",null,[t("tr",null,[(i(),a(k,null,_(A,o=>t("th",{key:o,class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground tracking-wider"},d(o),1)),64))])]),t("tbody",pe,[(i(!0),a(k,null,_(r(b),o=>(i(),a("tr",{key:o.uid,class:"hover:bg-muted/50"},[t("td",me,d(o.firstName),1),t("td",fe,d(o.lastName),1),t("td",be,d(o.email),1),t("td",ge,[t("span",{class:m(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.isActive?"bg-success/20 text-success":"bg-destructive/20 text-destructive"])},d(o.isActive?"Active":"Inactive"),3)]),t("td",ve,d(o.groups?.map(V=>V?.name).join(", ")),1),t("td",ye,d(o.userName),1),t("td",xe,[t("span",{class:m(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.isBlocked?"bg-destructive/20 text-destructive":"bg-success/20 text-success"])},d(o.isBlocked?"Blocked":"Active"),3)]),t("td",he,[t("button",{onClick:V=>y(!1,o),class:"text-primary hover:text-primary/80 focus:outline-none focus:underline","aria-label":"Edit user"}," Edit ",8,ke)])]))),128))])])])]),r(u)?(i(),L(l,{key:0,onClose:e[11]||(e[11]=o=>j(u)?u.value=!1:u=!1),title:r(s).userUid?"Edit User":"Add User"},{body:z(()=>[t("form",{onSubmit:e[10]||(e[10]=R(o=>C(),["prevent"])),class:"space-y-6"},[t("div",we,[t("div",_e,[e[13]||(e[13]=t("label",{for:"firstName",class:"block text-sm font-medium text-gray-700"}," First Name ",-1)),x(t("input",{id:"firstName","onUpdate:modelValue":e[1]||(e[1]=o=>r(s).firstName=o),type:"text",class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400",placeholder:"Enter first name"},null,512),[[h,r(s).firstName]])]),t("div",Ue,[e[14]||(e[14]=t("label",{for:"lastName",class:"block text-sm font-medium text-gray-700"}," Last Name ",-1)),x(t("input",{id:"lastName","onUpdate:modelValue":e[2]||(e[2]=o=>r(s).lastName=o),type:"text",class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400",placeholder:"Enter last name"},null,512),[[h,r(s).lastName]])]),t("div",Ne,[e[15]||(e[15]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email ",-1)),x(t("input",{id:"email","onUpdate:modelValue":e[3]||(e[3]=o=>r(s).email=o),type:"email",class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400",placeholder:"Enter email address"},null,512),[[h,r(s).email]])]),t("div",Ce,[e[16]||(e[16]=t("label",{for:"userName",class:"block text-sm font-medium text-gray-700"}," Username ",-1)),G(ae,{id:"userName",modelValue:r(s).userName,"onUpdate:modelValue":e[4]||(e[4]=o=>r(s).userName=o),type:"text","required-clicks":5,placeholder:"Enter username"},null,8,["modelValue"])]),t("div",Ae,[e[17]||(e[17]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),x(t("input",{id:"password","onUpdate:modelValue":e[5]||(e[5]=o=>r(s).password=o),type:"password",class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400",placeholder:"Enter password"},null,512),[[h,r(s).password]])]),t("div",Be,[e[18]||(e[18]=t("label",{for:"passwordc",class:"block text-sm font-medium text-gray-700"}," Confirm Password ",-1)),x(t("input",{id:"passwordc","onUpdate:modelValue":e[6]||(e[6]=o=>r(s).passwordc=o),type:"password",class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400",placeholder:"Confirm password"},null,512),[[h,r(s).passwordc]])]),t("div",Ve,[e[20]||(e[20]=t("label",{for:"groupUid",class:"block text-sm font-medium text-gray-700"}," Group ",-1)),x(t("select",{id:"groupUid","onUpdate:modelValue":e[7]||(e[7]=o=>r(s).groupUid=o),class:"mt-1 block w-full rounded-md border-2 border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 transition-colors duration-200 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 hover:border-gray-400"},[e[19]||(e[19]=t("option",{value:"",class:"text-gray-400"},"Select a group",-1)),(i(!0),a(k,null,_(w.value,o=>(i(),a("option",{key:o.uid,value:o.uid,class:"text-gray-900"},d(o?.name),9,$e))),128))],512),[[O,r(s).groupUid]])]),t("div",Ee,[t("label",qe,[e[21]||(e[21]=t("span",{class:"text-sm font-medium text-gray-700"},"Blocked",-1)),t("button",{type:"button",role:"switch","aria-checked":r(s).isBlocked,onClick:e[8]||(e[8]=o=>r(s).isBlocked=!r(s).isBlocked),class:m(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm",[r(s).isBlocked?"bg-red-500":"bg-green-500"]])},[t("span",{"aria-hidden":"true",class:m(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",[r(s).isBlocked?"translate-x-5":"translate-x-0"]])},null,2)],10,Se)])]),t("div",De,[t("label",Ie,[e[22]||(e[22]=t("span",{class:"text-sm font-medium text-gray-700"},"Active",-1)),t("button",{type:"button",role:"switch","aria-checked":r(s).isActive,onClick:e[9]||(e[9]=o=>r(s).isActive=!r(s).isActive),class:m(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm",[r(s).isActive?"bg-green-500":"bg-red-500"]])},[t("span",{"aria-hidden":"true",class:m(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",[r(s).isActive?"translate-x-5":"translate-x-0"]])},null,2)],10,Te)])])]),t("div",Me,[t("button",Fe,d(r(s).userUid?"Update":"Create")+" User ",1)])],32)]),_:1},8,["title"])):q("",!0)],64)}}});const Ge=S(Pe,[["__scopeId","data-v-0b494f3a"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/UsersListing.vue"]]);export{Ge as default};
