import{a0 as B,f as E,t as C,a5 as p,g as U,a7 as _,_ as M,c,o as f,A as o,F as d,a2 as g,D as T,a9 as b,J as x,K as D,L as P,H as j,a3 as q}from"./index-CNAOKjig.js";import{E as z,a as F,b as I,c as L}from"./billing.mutations-JPIKLOH7.js";import{u as H}from"./billing-B57sUqfU.js";import"./billing.queries-DCoxOTaV.js";const J=B({__name:"Billing",props:{target:{type:String,required:!0},targetUid:{type:String,required:!0}},setup(A,{expose:e}){e();const s=H(),{withClientMutation:n}=E(),y=A,{target:i,targetUid:t}=C(y),m=()=>{s.clear(),i?.value==="profile"&&(s.fetchProfilePrice(t.value),s.fetchProfileDiscount(t.value)),i?.value==="analysis"&&(s.fetchAnalysisPrice(t.value),s.fetchAnalysisDiscount(t.value)),s.fetchVouchers()};m(),p(()=>i.value,(r,l)=>m()),p(()=>t.value,(r,l)=>m());const v=U({amount:0});p(()=>s.fetchingPrice,(r,l)=>{r||(i?.value==="profile"&&(v.amount=s.profilePrice?.amount??0),i?.value==="analysis"&&(v.amount=s.analysisPrice?.amount??0))});const k=()=>{const r={...v};let l=i.value=="profile"?s.profilePrice:s.analysisPrice;i?.value==="profile"?n(z,{uid:l.uid,payload:r},"updateProfilePrice").then():n(F,{uid:l.uid,payload:r},"updateAnalysisPrice").then()},u=U({discountType:"",valueType:"",startDate:"",endDate:"",voucherUid:"",valuePercent:0,valueAmount:0,isActive:!0});p(()=>s.fetchingDiscount,(r,l)=>{if(!r){let a={};i?.value==="profile"&&(a={...s.profileDiscount}),i?.value==="analysis"&&(a={...s.analyisDiscount}),u.discountType=a.discountType,u.valueType=a.valueType,u.startDate=a.startDate,u.endDate=a.endDate,u.voucherUid=a.voucherUid,u.valuePercent=a.valuePercent,u.valueAmount=a.valueAmount,u.isActive=a.isActive}});const V=_(["sale","voucher"]),h=_(["percentage","amount"]),S=()=>{const r={...u};let l=i.value=="profile"?s.profileDiscount:s.analyisDiscount;i.value=="profile"?n(I,{uid:l.uid,payload:r},"updateProfileDiscount").then():n(L,{uid:l.uid,payload:r},"updateAnalysisDiscount").then()};p(()=>u.discountType,(r,l)=>{r!=="voucher"&&(u.voucherUid=void 0)});const w={billingStore:s,withClientMutation:n,props:y,target:i,targetUid:t,getProfileAndPrices:m,formPricing:v,updatePricing:k,formDiscount:u,discountTypes:V,valueTypes:h,updateDiscounting:S};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),K={class:"grid grid-cols-12 gap-8 p-6"},N={class:"col-span-6"},O={class:"space-y-6"},R={class:"rounded-lg border border-border bg-card p-6"},G={class:"space-y-6"},Q={class:"space-y-4"},W={class:"space-y-2"},X={class:"relative"},Y={class:"col-span-6"},Z={class:"space-y-6"},$={class:"rounded-lg border border-border bg-card p-6"},ee={class:"space-y-6"},oe={class:"grid grid-cols-2 gap-4"},te={class:"space-y-2"},ne=["value"],se={class:"space-y-2"},ie=["value"],re={class:"grid grid-cols-2 gap-4"},ue={class:"space-y-2"},le={class:"space-y-2"},ae={class:"space-y-2"},de=["value"],ce={class:"grid grid-cols-2 gap-4"},fe={class:"space-y-2"},pe={class:"space-y-2"},ge={class:"relative"},me={class:"flex items-center space-x-2"};function ve(A,e,s,n,y,i){return f(),c("div",K,[o("section",N,[o("div",O,[e[13]||(e[13]=o("div",{class:"flex items-center justify-between"},[o("h3",{class:"text-lg font-semibold text-foreground"},"Pricing Information")],-1)),o("div",R,[o("form",G,[o("div",Q,[o("label",W,[e[12]||(e[12]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Amount ($)",-1)),o("div",X,[e[11]||(e[11]=o("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"},"$",-1)),d(o("input",{class:"w-full pl-8 px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground","onUpdate:modelValue":e[0]||(e[0]=t=>n.formPricing.amount=t),type:"number",min:"0.0",step:"0.1",placeholder:"0.00"},null,512),[[g,n.formPricing.amount]])])])]),o("button",{type:"button",onClick:e[1]||(e[1]=T(t=>n.updatePricing(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Pricing ")])])])]),o("section",Y,[o("div",Z,[e[26]||(e[26]=o("div",{class:"flex items-center justify-between"},[o("h3",{class:"text-lg font-semibold text-foreground"},"Discounts Information")],-1)),o("div",$,[o("form",ee,[o("div",oe,[o("label",te,[e[15]||(e[15]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Discount Type",-1)),d(o("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=t=>n.formDiscount.discountType=t)},[e[14]||(e[14]=o("option",{value:""},"Select type",-1)),(f(!0),c(x,null,D(n.discountTypes,t=>(f(),c("option",{key:t,value:t,class:"capitalize"},P(t),9,ne))),128))],512),[[b,n.formDiscount.discountType]])]),o("label",se,[e[17]||(e[17]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Value Type",-1)),d(o("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[3]||(e[3]=t=>n.formDiscount.valueType=t)},[e[16]||(e[16]=o("option",{value:""},"Select type",-1)),(f(!0),c(x,null,D(n.valueTypes,t=>(f(),c("option",{key:t,value:t,class:"capitalize"},P(t),9,ie))),128))],512),[[b,n.formDiscount.valueType]])])]),o("div",re,[o("label",ue,[e[18]||(e[18]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Start Date",-1)),d(o("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[4]||(e[4]=t=>n.formDiscount.startDate=t),type:"date"},null,512),[[g,n.formDiscount.startDate]])]),o("label",le,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-muted-foreground"},"End Date",-1)),d(o("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[5]||(e[5]=t=>n.formDiscount.endDate=t),type:"date"},null,512),[[g,n.formDiscount.endDate]])])]),d(o("div",ae,[o("label",null,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Voucher",-1)),d(o("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring mt-2","onUpdate:modelValue":e[6]||(e[6]=t=>n.formDiscount.voucherUid=t)},[e[20]||(e[20]=o("option",{value:""},"Select voucher",-1)),(f(!0),c(x,null,D(n.billingStore.vouchers,t=>(f(),c("option",{key:t.uid,value:t.uid},P(t.code),9,de))),128))],512),[[b,n.formDiscount.voucherUid]])])],512),[[j,n.formDiscount.discountType==="voucher"]]),o("div",ce,[o("label",fe,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Value Percentage (%)",-1)),d(o("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[7]||(e[7]=t=>n.formDiscount.valuePercent=t),type:"number",min:"0",max:"100",step:"0.1",placeholder:"0.00"},null,512),[[g,n.formDiscount.valuePercent]])]),o("label",pe,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-muted-foreground"},"Value Amount ($)",-1)),o("div",ge,[e[23]||(e[23]=o("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"},"$",-1)),d(o("input",{class:"w-full pl-8 px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[8]||(e[8]=t=>n.formDiscount.valueAmount=t),type:"number",min:"0",step:"0.1",placeholder:"0.00"},null,512),[[g,n.formDiscount.valueAmount]])])])]),o("div",me,[d(o("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":e[9]||(e[9]=t=>n.formDiscount.isActive=t),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[q,n.formDiscount.isActive]]),e[25]||(e[25]=o("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Active",-1))]),o("button",{type:"button",onClick:e[10]||(e[10]=T(t=>n.updateDiscounting(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Discount ")])])])])])}const Pe=M(J,[["render",ve],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/Billing.vue"]]);export{Pe as default};
