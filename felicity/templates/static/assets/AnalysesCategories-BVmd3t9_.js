import{Y as N,u as H,a0 as S,a7 as B,a3 as P,_ as R,r as c,c as T,o as _,a as t,z as i,A,C as z,K as a,M as s,F as w,H as U,I as x,B as Y,a4 as k,aK as q,aL as K}from"./index-OdhKCqIc.js";import{c as O,f as G,a as M,u as J,F as Q}from"./index.esm-BfHj8iGm.js";import{o as W,p as X}from"./analyses.mutations-DUxQZn1r.js";import{u as Z}from"./setup-BcFG_bXr.js";import{u as j}from"./analysis-PB9AMevg.js";import{I as $}from"./Input-BEm5S0CJ.js";import{T as ee}from"./Textarea-T3VcJTEo.js";import{F as te,a as ae,b as oe}from"./FormMessage-CgXFMXx9.js";import{F as re}from"./FormLabel-DxP9wnWS.js";import{S as le,a as ne,b as se,c as ie,d as de}from"./SelectValue-Ds0cfAgl.js";import{P as me}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const ue=N({__name:"AnalysesCategories",setup(V,{expose:o}){o();const f=j(),e=Z(),{withClientMutation:v}=H();let y=S(!1),d=S("");const m=S(!0),u=S(null),g=O({name:M().trim().required("Category name is required"),description:M().trim().nullable(),departmentUid:M().trim().nullable(),active:G().default(!0)}),{handleSubmit:F,resetForm:b,setValues:C}=J({validationSchema:g,initialValues:{name:"",description:"",departmentUid:"",active:!0}}),l=B(()=>e.getDepartments);f.fetchAnalysesCategories();const p=B(()=>f.getAnalysesCategories);function I(r){v(W,{payload:r},"createAnalysisCategory").then(n=>f.addAnalysisCategory(n))}function h(r){u.value&&v(X,{uid:u.value,payload:r},"updateAnalysisCategory").then(n=>f.updateAnalysisCategory(n))}function E(r,n){m.value=r,y.value=!0,d.value=(r?"CREATE":"EDIT")+" ANALYSES CATEGORY",r?(u.value=null,b({values:{name:"",description:"",departmentUid:"",active:!0}})):(u.value=n?.uid??null,C({name:n?.name??"",description:n?.description??"",departmentUid:n?.departmentUid??"",active:n?.active??!0}))}const L=F(r=>{const n={name:r.name,description:r.description??null,departmentUid:r.departmentUid?r.departmentUid:null,active:r.active};m.value===!0&&I(n),m.value===!1&&h(n),y.value=!1}),D={analysisStore:f,setupStore:e,withClientMutation:v,get showModal(){return y},set showModal(r){y=r},get formTitle(){return d},set formTitle(r){d=r},formAction:m,currentUid:u,categorySchema:g,handleSubmit:F,resetForm:b,setValues:C,departments:l,analysesCategories:p,addAnalysesCategory:I,editAnalysesCategory:h,FormManager:E,saveForm:L,get Button(){return P},get Input(){return $},get Textarea(){return ee},get FormControl(){return oe},get FormField(){return Q},get FormItem(){return ae},get FormLabel(){return re},get FormMessage(){return te},get Select(){return de},get SelectContent(){return ie},get SelectItem(){return se},get SelectTrigger(){return ne},get SelectValue(){return le},PageHeading:me};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),ce={class:"mt-4 border border-border bg-card rounded-lg shadow-md"},fe={class:"relative w-full overflow-auto"},ge={class:"text-sm text-foreground"},pe={class:"text-sm text-foreground"},_e={class:"text-lg font-bold text-foreground"},ye={class:"space-y-4"},ve={class:"grid grid-cols-2 gap-4"},Fe={class:"pt-4"};function be(V,o,f,e,v,y){const d=c("TableHead"),m=c("TableRow"),u=c("TableHeader"),g=c("TableCell"),F=c("TableBody"),b=c("Table"),C=c("Modal");return _(),T(w,null,[t(e.PageHeading,{title:"Analyses Categories"},{default:a(()=>[t(e.Button,{onClick:o[0]||(o[0]=l=>e.FormManager(!0,null))},{default:a(()=>[...o[3]||(o[3]=[s("Add Analyses Category",-1)])]),_:1})]),_:1}),i("div",ce,[i("div",fe,[t(b,{class:"w-full caption-bottom text-sm"},{default:a(()=>[t(u,{class:"[&_tr]:border-b"},{default:a(()=>[t(m,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...o[4]||(o[4]=[s("Category Name",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:a(()=>[...o[5]||(o[5]=[s("Department",-1)])]),_:1}),t(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:a(()=>[...o[6]||(o[6]=[s("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(F,{class:"[&_tr:last-child]:border-0"},{default:a(()=>[(_(!0),T(w,null,U(e.analysesCategories,l=>(_(),A(m,{key:l?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:a(()=>[t(g,{class:"px-4 py-3 align-middle text-sm"},{default:a(()=>[i("div",ge,x(l?.name),1)]),_:2},1024),t(g,{class:"px-4 py-3 align-middle text-sm"},{default:a(()=>[i("div",pe,x(l?.department?.name),1)]),_:2},1024),t(g,{class:"px-4 py-3 align-middle text-right"},{default:a(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:p=>e.FormManager(!1,l)},{default:a(()=>[...o[7]||(o[7]=[s(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),e.showModal?(_(),A(C,{key:0,onClose:o[2]||(o[2]=l=>e.showModal=!1)},{header:a(()=>[i("h3",_e,x(e.formTitle),1)]),body:a(()=>[i("form",{onSubmit:o[1]||(o[1]=Y((...l)=>e.saveForm&&e.saveForm(...l),["prevent"])),class:"p-6 space-y-6"},[i("div",ye,[i("div",ve,[t(e.FormField,{name:"name"},{default:a(({componentField:l})=>[t(e.FormItem,{class:"col-span-2"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[8]||(o[8]=[s("Category Name",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Input,k(l,{placeholder:"Name ..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"departmentUid"},{default:a(({componentField:l})=>[t(e.FormItem,{class:"col-span-1"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[9]||(o[9]=[s("Department",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Select,q(K(l)),{default:a(()=>[t(e.SelectTrigger,null,{default:a(()=>[t(e.SelectValue,{placeholder:"Select Department"})]),_:1}),t(e.SelectContent,null,{default:a(()=>[t(e.SelectItem,{value:""},{default:a(()=>[...o[10]||(o[10]=[s("Select Department",-1)])]),_:1}),(_(!0),T(w,null,U(e.departments,p=>(_(),A(e.SelectItem,{key:p.uid,value:p?.uid},{default:a(()=>[s(x(p.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:a(({componentField:l})=>[t(e.FormItem,{class:"col-span-2"},{default:a(()=>[t(e.FormLabel,null,{default:a(()=>[...o[11]||(o[11]=[s("Description",-1)])]),_:1}),t(e.FormControl,null,{default:a(()=>[t(e.Textarea,k(l,{placeholder:"Description ...",rows:"3"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})])]),i("div",Fe,[t(e.Button,{type:"submit",class:"w-full"},{default:a(()=>[...o[12]||(o[12]=[s("Save Form",-1)])]),_:1})])],32)]),_:1})):z("",!0)],64)}const Ne=R(ue,[["render",be],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesCategories.vue"]]);export{Ne as default};
