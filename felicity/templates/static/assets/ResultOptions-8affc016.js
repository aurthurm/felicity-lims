import{P as U,u as M,e as F,h as N,t as P,Z as y,f as B,R as I,o as r,c as i,b as t,F as c,D as h,E as d,a2 as a,x as L,K as _,A as w,V as k,a as $,z as j,a7 as q,J as z,X as R,Y as O,_ as G}from"./index-f86d8273.js";import{G as H,H as J}from"./analyses.mutations-0a79566e.js";import{u as W}from"./analysis-f80e6c89.js";const X={class:"overflow-x-auto mt-4"},Y={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Z={class:"min-w-full"},Q={class:"bg-white"},ee={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},te={class:"flex items-center"},se={class:"text-sm leading-5 text-gray-800"},oe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},le={class:"text-sm leading-5 text-sky-800"},ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ne={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},re=["onClick"],ie={action:"post",class:"p-1"},de={class:"grid grid-cols-3 gap-x-4 mb-4"},ue={class:"block col-span-1 mb-2"},pe={class:"block col-span-2 mb-2"},me={class:"block col-span-3 mb-2"},ye=U({__name:"ResultOptions",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(T){const V=R(()=>O(()=>import("./index-f86d8273.js").then(l=>l.cN),["assets/index-f86d8273.js","assets/index-ba19faea.css"])),E=R(()=>O(()=>import("./vue-multiselect.esm-1db37a44.js"),["assets/vue-multiselect.esm-1db37a44.js","assets/index-f86d8273.js","assets/index-ba19faea.css"])),b=W(),S=M(),{withClientMutation:f}=F(),C=N(()=>S.getSampleTypes),g=T,{analysis:u}=P(g);let n=y(!1),x=y(""),s=B({});const p=y(!0);I(()=>g.analysisUid,(l,e)=>{});function A(){s.optionKey=+s.optionKey;const l={...s,analysisUid:u?.value?.uid,sampleTypes:s.sampleTypes?.map(e=>e.uid)};f(H,{payload:l},"createResultOption").then(e=>b.addResultOption(e))}function D(){const l={...s,analysisUid:u?.value?.uid,sampleTypes:s.sampleTypes?.map(e=>e.uid)};delete l.__typename,delete l.uid,f(J,{uid:s.uid,payload:l},"updateResultOption").then(e=>b.updateResultOption(e))}function v(l,e={}){p.value=l,n.value=!0,x.value=(l?"CREATE":"EDIT")+" RESULT OPTION",l?Object.assign(s,{optionKey:null,value:null}):Object.assign(s,{...e})}function K(){p.value===!0&&A(),p.value===!1&&D(),n.value=!1}return(l,e)=>(r(),i(c,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:e[0]||(e[0]=o=>v(!0))},"Add Result Option"),e[11]||(e[11]=t("hr",null,null,-1)),t("div",X,[t("div",Y,[t("table",Z,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Result Key"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Result Value"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Sample Tyes"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1)),t("tbody",Q,[(r(!0),i(c,null,h(a(u)?.resultOptions,o=>(r(),i("tr",{key:o?.uid},[t("td",ee,[t("div",te,[t("div",null,[t("div",se,d(o?.optionKey),1)])])]),t("td",oe,[t("div",le,d(o?.value),1)]),t("td",ae,[(r(!0),i(c,null,h(o?.sampleTypes,m=>(r(),i("span",{class:"p-1 rounded-sm text-sm leading-5 text-sky-800 bg-gray-200 mr-2",key:m.uid},d(m.name),1))),128))]),t("td",ne,[t("button",{onClick:m=>v(!1,o),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,re)])]))),128))])])])]),a(n)?(r(),L(a(V),{key:0,onClose:e[5]||(e[5]=o=>q(n)?n.value=!1:n=!1),contentWidth:"w-2/4"},{header:_(()=>[t("h3",null,d(a(x)),1)]),body:_(()=>[t("form",ie,[t("div",de,[t("label",ue,[e[7]||(e[7]=t("span",{class:"text-gray-700"},"Result Key",-1)),w(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=o=>a(s).optionKey=o),placeholder:"Key ..."},null,512),[[k,a(s).optionKey]])]),t("label",pe,[e[8]||(e[8]=t("span",{class:"text-gray-700"},"Result Value",-1)),w(t("input",{type:"text",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=o=>a(s).value=o),placeholder:"Value ..."},null,512),[[k,a(s).value]])]),t("label",me,[e[9]||(e[9]=t("span",{class:"text-gray-700"},"Sample Types",-1)),$(a(E),{modelValue:a(s).sampleTypes,"onUpdate:modelValue":e[3]||(e[3]=o=>a(s).sampleTypes=o),options:C.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])])]),e[10]||(e[10]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[4]||(e[4]=j(o=>K(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):z("",!0)],64))}}),ge=G(ye,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/ResultOptions.vue"]]);export{ge as default};
