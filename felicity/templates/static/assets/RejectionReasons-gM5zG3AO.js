import{a0 as D,f as N,a7 as f,h as T,_ as V,r as _,c as m,o as d,A as e,C as B,E as w,a as j,N as p,P as O,J as k,K as U,L as v,D as q,F as I,a2 as J}from"./index-Daoe3XS9.js";import{c as L,a as P,u as K,b as z}from"./index.esm-BT7_X8h2.js";import{s as G,t as H}from"./analyses.mutations-DmiK7cfK.js";import{u as Q}from"./analysis-D7-3mDtD.js";const W=D({__name:"RejectionReasons",setup(E,{expose:o}){o();const i=Q(),{withClientMutation:t}=N(),c=f(!1),b=f(""),l=f(!1),a=f(null),u=L({reason:P().trim().required("Reason is required")}),{handleSubmit:s,resetForm:g,setValues:R}=K({validationSchema:u,initialValues:{reason:""}}),{value:C,errorMessage:F}=z("reason");i.fetchRejectionReasons();const S=T(()=>i.getRejectionReasons);function h(n){t(G,n,"createRejectionReason").then(r=>i.addRejectionReason(r))}function x(n){a.value&&t(H,{uid:a.value,...n},"updateRejectionReason").then(r=>i.updateRejectionReason(r))}function M(n,r={}){l.value=n,c.value=!0,b.value=(n?"CREATE":"EDIT")+" REJECTION REASON",n?(a.value=null,g({values:{reason:""}})):(a.value=r.uid??null,R({reason:r.reason??""}))}const A=s(n=>{const r={reason:n.reason};l.value===!0&&h(r),l.value===!1&&x(r),c.value=!1}),y={analysisStore:i,withClientMutation:t,showModal:c,formTitle:b,formAction:l,currentUid:a,rejectionSchema:u,handleSubmit:s,resetForm:g,setValues:R,reason:C,reasonError:F,rejectionReasons:S,addRejectionReason:h,editRejectionReason:x,FormManager:M,saveForm:A};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),X={class:"rounded-md bg-card p-6 shadow-sm"},Y={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg"},Z={class:"min-w-full fel-table"},$={class:"bg-card"},ee={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},oe={class:"text-sm text-foreground"},te={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},se=["onClick"],ne={class:"text-lg font-bold text-foreground"},re={class:"space-y-4"},ae={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"};function le(E,o,i,t,c,b){const l=_("fel-button"),a=_("fel-heading"),u=_("fel-modal");return d(),m(k,null,[e("div",null,[j(a,{title:"Rejection Reasons"},{default:p(()=>[j(l,{onClick:o[0]||(o[0]=s=>t.FormManager(!0))},{default:p(()=>[...o[4]||(o[4]=[O("Add Rejection Reason",-1)])]),_:1})]),_:1}),e("div",X,[e("div",Y,[e("table",Z,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Reason"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",$,[(d(!0),m(k,null,U(t.rejectionReasons,s=>(d(),m("tr",{key:s?.uid,class:"hover:bg-accent/50"},[e("td",ee,[e("div",oe,v(s?.reason),1)]),e("td",te,[e("button",{onClick:g=>t.FormManager(!1,s),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,se)])]))),128))])])])])]),t.showModal?(d(),B(u,{key:0,onClose:o[3]||(o[3]=s=>t.showModal=!1)},{header:p(()=>[e("h3",ne,v(t.formTitle),1)]),body:p(()=>[e("form",{onSubmit:o[2]||(o[2]=q((...s)=>t.saveForm&&t.saveForm(...s),["prevent"])),class:"p-6 space-y-6"},[e("div",re,[e("label",ae,[o[6]||(o[6]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Rejection Reason",-1)),I(e("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":o[1]||(o[1]=s=>t.reason=s),placeholder:"Reason ..."},null,512),[[J,t.reason]]),t.reasonError?(d(),m("p",ie,v(t.reasonError),1)):w("",!0)])]),o[7]||(o[7]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):w("",!0)],64)}const me=V(W,[["render",le],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/RejectionReasons.vue"]]);export{me as default};
