import{Y as V,u as L,a0 as _,ah as U,a3 as P,_ as q,r as a,c as k,o as c,z as n,A as C,C as M,a as l,K as o,M as i,F,H as z,I as R,B as I,D as B,al as H}from"./index-OdhKCqIc.js";import{c as K,a as O,u as X,b as A}from"./index.esm-BfHj8iGm.js";import{u as Y,A as G,E as J}from"./reflex-CQbP3O-i.js";import{E as Q,a as W,b as Z,c as j,d as $}from"./EmptyTitle-aCQRDpx3.js";import{P as ee}from"./PageHeading-Czi_4opS.js";const te=V({__name:"ReflexListing",setup(N,{expose:e}){e();const{withClientMutation:b}=L(),t=Y();let p=_(!1),x=_("");const d=_(!0),u=_(null),g=K({name:O().trim().required("Name is required")}),{handleSubmit:v,resetForm:m,setValues:y,errors:w}=X({validationSchema:g,initialValues:{name:"",description:""}}),{value:E}=A("name"),{value:T}=A("description");U(async()=>{t.fetchAllReflexRules()});function r(s,f={}){d.value=s,p.value=!0,x.value=(s?"CREATE":"EDIT")+" REFLEX RULE",s?(u.value=null,m()):(u.value=f.uid??null,y({name:f.name??"",description:f.description??""}))}const D=v(s=>{const f={name:s.name,description:s.description};d.value===!0&&b(G,{payload:f},"createReflexRule").then(h=>{t.addReflexRule(h)}),d.value===!1&&u.value&&b(J,{uid:u.value,payload:f},"updateReflexRule").then(h=>t.updateReflexRule(h)),p.value=!1}),S={withClientMutation:b,reflexStore:t,get showModal(){return p},set showModal(s){p=s},get formTitle(){return x},set formTitle(s){x=s},formAction:d,currentUid:u,reflexRuleSchema:g,handleSubmit:v,resetForm:m,setValues:y,errors:w,name:E,description:T,FormManager:r,saveForm:D,get Button(){return P},get Empty(){return $},get EmptyContent(){return j},get EmptyDescription(){return Z},get EmptyHeader(){return W},get EmptyTitle(){return Q},PageHeading:ee};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),oe={class:"space-y-6"},le={class:"border border-border bg-card rounded-lg shadow-md"},re={class:"relative w-full overflow-auto"},ne={class:"text-xl font-semibold text-foreground"},se={class:"grid grid-cols-1 gap-4"},ae={class:"block"},ie={key:0,class:"text-sm text-destructive"},de={class:"block"};function ue(N,e,b,t,p,x){const d=a("TableHead"),u=a("TableRow"),g=a("TableHeader"),v=a("router-link"),m=a("TableCell"),y=a("TableEmpty"),w=a("TableBody"),E=a("Table"),T=a("Modal");return c(),k(F,null,[n("div",oe,[l(t.PageHeading,{title:"Reflex Rules"},{default:o(()=>[l(t.Button,{onClick:e[0]||(e[0]=r=>t.FormManager(!0))},{default:o(()=>[...e[5]||(e[5]=[i("Add Reflex Rule",-1)])]),_:1})]),_:1}),n("div",le,[n("div",re,[l(E,{class:"w-full caption-bottom text-sm"},{default:o(()=>[l(g,{class:"[&_tr]:border-b"},{default:o(()=>[l(u,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[l(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[6]||(e[6]=[i("Title",-1)])]),_:1}),l(d,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[7]||(e[7]=[i("Description",-1)])]),_:1}),l(d,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...e[8]||(e[8]=[i(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),l(w,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(c(!0),k(F,null,z(t.reflexStore.reflexRules,r=>(c(),C(u,{key:r?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[l(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[l(v,{to:{name:"reflex-detail",params:{uid:r?.uid}},class:"text-primary hover:text-primary/80"},{default:o(()=>[i(R(r?.name),1)]),_:2},1032,["to"])]),_:2},1024),l(m,{class:"px-4 py-3 align-middle whitespace-nowrap text-sm text-foreground"},{default:o(()=>[i(R(r?.description),1)]),_:2},1024),l(m,{class:"px-4 py-3 align-middle text-right text-sm"},{default:o(()=>[l(t.Button,{variant:"outline",size:"sm",onClick:D=>t.FormManager(!1,r)},{default:o(()=>[...e[9]||(e[9]=[i(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!t.reflexStore.reflexRules||t.reflexStore.reflexRules.length===0?(c(),C(y,{key:0,colspan:3},{default:o(()=>[l(t.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[l(t.EmptyContent,null,{default:o(()=>[l(t.EmptyHeader,null,{default:o(()=>[l(t.EmptyTitle,null,{default:o(()=>[...e[10]||(e[10]=[i("No reflex rules yet",-1)])]),_:1}),l(t.EmptyDescription,null,{default:o(()=>[...e[11]||(e[11]=[i("Create a rule to automate reflex testing.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):M("",!0)]),_:1})]),_:1})])])]),t.showModal?(c(),C(T,{key:0,onClose:e[4]||(e[4]=r=>t.showModal=!1),"content-width":"w-1/2"},{header:o(()=>[n("h3",ne,R(t.formTitle),1)]),body:o(()=>[n("form",{onSubmit:e[3]||(e[3]=I((...r)=>t.saveForm&&t.saveForm(...r),["prevent"])),class:"space-y-6 p-4"},[n("div",se,[n("label",ae,[e[12]||(e[12]=n("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),B(n("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.name=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Name ..."},null,512),[[H,t.name]]),t.errors.name?(c(),k("p",ie,R(t.errors.name),1)):M("",!0)]),n("label",de,[e[13]||(e[13]=n("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),B(n("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.description=r),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Description ...",rows:"3"},null,512),[[H,t.description]])])]),e[14]||(e[14]=n("hr",{class:"border-border"},null,-1)),e[15]||(e[15]=n("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Reflex Rule ",-1))],32)]),_:1})):M("",!0)],64)}const xe=q(te,[["render",ue],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/reflex/ReflexListing.vue"]]);export{xe as default};
