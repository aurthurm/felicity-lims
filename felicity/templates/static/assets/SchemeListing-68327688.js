import{V as Z,f as ee,a1 as p,h as $,i as T,a8 as te,r as S,o as i,c as a,a as k,O as e,L as r,D as x,Y as v,a6 as s,K as oe,J as u,F as N,H as G,M as V,N as H,aR as F,aS as I,aT as z,z as se,C as re,ae as O,$ as ne,a0 as ie,_ as ae}from"./index-74595aff.js";import{f as A}from"./index-52e9caa2.js";import{G as le,A as de,E as ue}from"./grind.queries-e29fb3f8.js";import{U as me}from"./_queries-3a88eae7.js";const fe={class:"pb-8"},ce={class:"flex justify-between items-center mb-6"},pe={class:"flex space-x-4"},ge={class:"relative"},be={class:"mb-4 text-sm text-foreground"},xe={key:0,class:"text-muted-foreground"},ve={key:1},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},he={class:"p-6"},we={class:"flex justify-between items-start mb-3"},ke=["onClick"],_e={class:"text-foreground text-sm mb-4 line-clamp-2"},Ce={class:"flex items-center text-xs text-muted-foreground mb-4"},De={class:"flex items-center space-x-1"},Me={key:0,class:"mb-4"},Se={class:"flex items-center space-x-2"},Ne={class:"text-sm text-foreground"},Ve={key:1},Ae={class:"flex -space-x-2 overflow-hidden"},je=["title"],Be=["title"],Ue={class:"mt-4 pt-3 border-t border-border text-xs text-muted-foreground flex justify-between"},Le={key:0},Ye={key:0,class:"mt-8 flex justify-center"},Ee=["disabled"],Pe={key:0},$e={key:1},Te={key:1,class:"flex flex-col items-center justify-center py-12"},Ge={class:"text-lg font-semibold text-foreground"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"flex justify-end space-x-3"},Ie={type:"submit",class:"px-4 py-2 text-sm font-medium text-primary-foreground bg-primary border border-transparent rounded-md shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"},ze=Z({__name:"SchemeListing",setup(Oe){const j=ne(()=>ie(()=>import("./vue-multiselect.esm-b1f61583.js"),["assets/vue-multiselect.esm-b1f61583.js","assets/index-74595aff.js","assets/index-8412b2a5.css"])),{withClientMutation:B,withClientQuery:U}=ee();let m=p(!1),_=p(""),n=$({});const y=p(!0),b=p(!1),g=p([]),C=p([]);let l=$({first:12,after:"",text:"",sortBy:["created_at"],filterAction:!1});const L=p(0);let h=p({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const R=T(()=>g.value.length+" of "+L.value+" schemes"),Y=T(()=>b.value);function D(d){b.value=!0,U(le,{first:d.first,after:d.after,text:d.text,sortBy:d.sortBy},"grindSchemeAll").then(t=>{t&&(g.value=t?.items,L.value=t?.totalCount||0,h.value=t?.pageInfo)}).finally(()=>{b.value=!1})}te(()=>{D(l),K()});function K(){U(me,{first:100,after:"",text:"",sortBy:["first_name"]},"userAll").then(d=>{d&&(C.value=d?.items)})}function E(d){l.first=12,l.after="",l.text=d,l.filterAction=!0,D(l)}function q(){!h.value.hasNextPage||b.value||(l.first=6,l.after=h.value.endCursor,l.filterAction=!1,D(l))}function J(){Object.assign(n,{title:"",description:"",startDate:"",endDate:"",assignee:null,members:[]})}function P(){y.value=!0,m.value=!0,_.value="Create New Scheme",J()}function Q(d){y.value=!1,m.value=!0,_.value="Edit Scheme",Object.assign(n,{...d})}function W(){const d=n.members?.map(f=>f.uid)||[],t={title:n.title,description:n.description,startDate:n.startDate,endDate:n.endDate,assignee:n.assignee?.uid,members:d};y.value===!0?B(de,{payload:t},"createGrindScheme").then(f=>{f&&g.value.unshift(f)}):B(ue,{uid:n.uid,payload:t},"updateGrindScheme").then(f=>{if(f){const w=g.value.findIndex(M=>M.uid===f.uid);w!==-1&&(g.value[w]=f)}}),m.value=!1}return(d,t)=>{const f=S("fel-heading"),w=S("router-link"),M=S("fel-modal");return i(),a(N,null,[k(f,{title:"Projects"}),e("div",fe,[e("div",ce,[e("div",pe,[r(" Search input "),e("div",ge,[x(e("input",{type:"text",placeholder:"Search schemes...",class:"w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground","onUpdate:modelValue":t[0]||(t[0]=o=>s(l).text=o),onKeyup:t[1]||(t[1]=oe(o=>E(s(l).text),["enter"]))},null,544),[[v,s(l).text]]),e("button",{onClick:t[2]||(t[2]=o=>E(s(l).text)),class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors duration-200"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)]))]),r(" Add button "),e("button",{onClick:P,class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},t[12]||(t[12]=[e("span",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",null,"Add Scheme")],-1)]))])]),r(" Status and count information "),e("div",be,[Y.value?(i(),a("span",xe,"Loading schemes...")):(i(),a("span",ve,u(R.value),1))]),r(" Cards grid layout "),e("div",ye,[r(" Scheme card "),(i(!0),a(N,null,G(g.value,o=>(i(),a("div",{key:o.uid,class:"bg-background rounded-lg shadow-sm overflow-hidden border border-border hover:shadow-md transition-all duration-200"},[e("div",he,[e("div",we,[k(w,{to:{name:"scheme-detail",params:{schemeUid:o?.uid}},class:"text-lg font-semibold text-foreground hover:text-primary transition-colors duration-200 truncate"},{default:V(()=>[H(u(o.title),1)]),_:2},1032,["to"]),e("button",{onClick:c=>Q(o),class:"text-muted-foreground hover:text-primary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary rounded-md p-1"},[...t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ke)]),r(" Description "),e("p",_e,u(o.description||"No description provided"),1),r(" Date information "),e("div",Ce,[e("div",De,[t[14]||(t[14]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,u(s(A)(o.startDate,"D MMMM YYYY"))+" - "+u(s(A)(o.endDate,"D MMMM YYYY")),1)])]),r(" Assignee "),o.assignee?(i(),a("div",Me,[t[15]||(t[15]=e("p",{class:"text-xs text-muted-foreground mb-1"},"Assignee:",-1)),e("div",Se,[e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center text-primary-foreground text-xs font-medium",style:F({backgroundColor:s(I)(o.assignee.firstName+o.assignee.lastName)})},u(s(z)(o.assignee.firstName,o.assignee.lastName)),5),e("span",Ne,u(o.assignee.firstName)+" "+u(o.assignee.lastName),1)])])):r("v-if",!0),r(" Members "),o.members&&o.members.length>0?(i(),a("div",Ve,[t[16]||(t[16]=e("p",{class:"text-xs text-muted-foreground mb-1"},"Members:",-1)),e("div",Ae,[(i(!0),a(N,null,G(o.members.slice(0,5),(c,X)=>(i(),a("div",{key:X,class:"w-8 h-8 rounded-full border-2 border-background flex items-center justify-center text-primary-foreground text-xs font-medium",style:F({backgroundColor:s(I)(c.firstName+c.lastName)}),title:`${c.firstName} ${c.lastName}`},u(s(z)(c.firstName,c.lastName)),13,je))),128)),r(" Show count for additional members "),o.members.length>5?(i(),a("div",{key:0,class:"w-8 h-8 rounded-full border-2 border-background flex items-center justify-center bg-muted text-foreground text-xs font-medium",title:o.members.slice(5).map(c=>`${c.firstName} ${c.lastName}`).join(", ")}," +"+u(o.members.length-5),9,Be)):r("v-if",!0)])])):r("v-if",!0),r(" Created info "),e("div",Ue,[e("span",null,"Created "+u(s(A)(o.createdAt,"D MMMM YYYY")),1),o.createdBy?(i(),a("span",Le,"by "+u(o.createdBy.firstName),1)):r("v-if",!0)])])]))),128))]),r(" Load more button "),s(h).hasNextPage?(i(),a("div",Ye,[e("button",{onClick:q,class:"px-4 py-2 bg-secondary text-foreground rounded-lg hover:bg-secondary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-secondary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:b.value},[b.value?(i(),a("span",Pe,"Loading...")):(i(),a("span",$e,"Load More"))],8,Ee)])):r("v-if",!0),r(" Empty state "),g.value.length===0&&!Y.value?(i(),a("div",Te,[t[18]||(t[18]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-muted-foreground mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-foreground mb-2"},"No schemes found",-1)),t[20]||(t[20]=e("p",{class:"text-muted-foreground mb-4"},"Get started by creating your first scheme",-1)),e("button",{onClick:P,class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},t[17]||(t[17]=[e("span",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})]),e("span",null,"Create Scheme")],-1)]))])):r("v-if",!0)]),r(" Create/Edit Scheme Modal "),s(m)?(i(),se(M,{key:0,onClose:t[10]||(t[10]=o=>O(m)?m.value=!1:m=!1),"content-width":"w-full max-w-2xl"},{header:V(()=>[e("h3",Ge,u(s(_)),1)]),body:V(()=>[e("form",{onSubmit:re(W,["prevent"]),class:"p-6 space-y-6"},[r(" Scheme Title "),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"title"},[H(" Scheme Title "),e("span",{class:"text-destructive"},"*")],-1)),x(e("input",{id:"title","onUpdate:modelValue":t[3]||(t[3]=o=>s(n).title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter scheme title"},null,512),[[v,s(n).title]])]),r(" Description "),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"description"}," Description ",-1)),x(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=o=>s(n).description=o),rows:"3",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground",placeholder:"Enter scheme description"},null,512),[[v,s(n).description]])]),r(" Date Range "),e("div",He,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"startDate"}," Start Date ",-1)),x(e("input",{id:"startDate","onUpdate:modelValue":t[5]||(t[5]=o=>s(n).startDate=o),type:"date",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground"},null,512),[[v,s(n).startDate]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-foreground mb-1",for:"endDate"}," End Date ",-1)),x(e("input",{id:"endDate","onUpdate:modelValue":t[6]||(t[6]=o=>s(n).endDate=o),type:"date",class:"w-full px-3 py-2 border border-border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary bg-background text-foreground"},null,512),[[v,s(n).endDate]])])]),r(" Assignee "),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Assignee ",-1)),k(s(j),{modelValue:s(n).assignee,"onUpdate:modelValue":t[7]||(t[7]=o=>s(n).assignee=o),options:C.value,label:"firstName",searchable:!0,"track-by":"uid",placeholder:"Select an assignee",class:"multiselect-primary"},null,8,["modelValue","options"])]),r(" Members "),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Members ",-1)),k(s(j),{modelValue:s(n).members,"onUpdate:modelValue":t[8]||(t[8]=o=>s(n).members=o),options:C.value,label:"firstName",searchable:!0,"track-by":"uid",multiple:!0,placeholder:"Select members",class:"multiselect-primary"},null,8,["modelValue","options"])]),r(" Submit button "),e("div",Fe,[e("button",{type:"button",onClick:t[9]||(t[9]=o=>O(m)?m.value=!1:m=!1),class:"px-4 py-2 text-sm font-medium text-foreground bg-background border border-border rounded-md shadow-sm hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200"}," Cancel "),e("button",Ie,u(y.value?"Create":"Update"),1)])],32)]),_:1})):r("v-if",!0)],64)}}});const Qe=ae(ze,[["__scopeId","data-v-3bab7638"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/SchemeListing.vue"]]);export{Qe as default};
