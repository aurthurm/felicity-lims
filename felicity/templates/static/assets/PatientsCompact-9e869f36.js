import{V as H,aj as J,a1 as E,h as K,i as k,a8 as q,r as p,al as W,o as n,c as r,a as g,L as a,O as e,z as v,M as y,N as X,D as A,a6 as C,F as Y,H as Z,a4 as ee,J as l,$ as m,a0 as _,_ as te}from"./index-0a787601.js";import{u as oe}from"./patient-5e9cb0a9.js";import{u as se}from"./location-2639f17c.js";import{h as w,o as I,a as S}from"./constants-89009445.js";const ne={class:"space-y-6"},ae={class:"flex justify-between items-center"},ie={class:"flex items-center space-x-4"},re={class:"grid grid-cols-12 gap-6"},le={initial:{opacity:0,y:100},enter:{opacity:1,y:0},delay:400,class:"col-span-3 h-[calc(100vh-200px)] overflow-y-auto scrollbar scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},ce={key:1,class:"space-y-2"},de=["onClick"],ue={class:"space-y-2"},pe={class:"flex justify-between items-center"},me={class:"font-semibold text-foreground"},_e={class:"text-sm text-muted-foreground"},fe={class:"flex justify-between text-sm text-muted-foreground"},ge={class:"flex justify-between text-sm text-muted-foreground"},ve={key:0,initial:{opacity:0,y:-100},enter:{opacity:1,y:0},delay:400,class:"col-span-9 space-y-6"},ye=H({__name:"PatientsCompact",setup(he){const f={MALE:0,FEMALE:1,MISSING:2,TRANS:3},T={[f.MALE]:"Male",[f.FEMALE]:"Female",[f.MISSING]:"Missing",[f.TRANS]:"Trans Gender"},h={PatientForm:m(()=>_(()=>import("./PatientForm-fb16b38d.js"),["assets/PatientForm-fb16b38d.js","assets/index-0a787601.js","assets/index-8412b2a5.css","assets/vue-multiselect.esm-230f9e8e.js","assets/array-b823a927.js","assets/patient.mutations-5b34e7f3.js","assets/client-5048b286.js","assets/location-2639f17c.js","assets/patient-5e9cb0a9.js","assets/index-b3a36a14.js","assets/vue-multiselect-a538cd7c.css"])),PatientInfo:m(()=>_(()=>import("./PatientInfo-fffa26fc.js"),["assets/PatientInfo-fffa26fc.js","assets/index-0a787601.js","assets/index-8412b2a5.css","assets/constants-89009445.js","assets/patient-5e9cb0a9.js","assets/index-b3a36a14.js"]))},d=oe(),L=se(),{patients:N,fetchingPatients:R}=J(d),u=E(!1),i=E({}),c=K({first:25,before:"",text:"",sortBy:["-uid"],filterAction:!1}),D=k(()=>Object.keys(i.value).length>0),M=k(()=>[{id:"samples",label:"Samples",component:m(()=>_(()=>import("./FelAnalyisRequestListing-2ef26367.js"),["assets/FelAnalyisRequestListing-2ef26367.js","assets/index-0a787601.js","assets/index-8412b2a5.css","assets/index-b3a36a14.js"])),props:{target:"patient-samples",targetUid:i.value.uid}},{id:"billing",label:"Billing",component:m(()=>_(()=>import("./PatientBill-9e85ef99.js"),["assets/PatientBill-9e85ef99.js","assets/index-0a787601.js","assets/index-8412b2a5.css","assets/billing-c74a3929.js","assets/index-b3a36a14.js","assets/bills-bb724f89.js","assets/array-b823a927.js","assets/PatientBill-29a3da4a.css"])),props:{patientUid:i.value.uid}},{id:"logs",label:"Logs",component:m(()=>_(()=>import("./FelAuditLog-748eef33.js"),["assets/FelAuditLog-748eef33.js","assets/index-0a787601.js","assets/index-8412b2a5.css","assets/user-c4b7fe1c.js","assets/_queries-a9525aa1.js","assets/index-b3a36a14.js"])),props:{targetType:"patient",targetUid:i.value.uid}}]),F=t=>`${t.firstName} ${t.lastName}`,V=t=>T[t]||"Unknown",b=t=>{i.value=t,d.setPatient(t)},P=()=>{i.value={},d.resetPatient()},j=t=>{const s=t.target;c.first=100,c.before="",c.text=s.value,c.filterAction=!0,d.fetchPatients(c)},B=async()=>{P(),u.value=!0},O=t=>{b(t),u.value=!1};return q(()=>{L.fetchCountries(),d.fetchPatients(c)}),(t,s)=>{const G=p("fel-heading"),$=p("router-link"),U=p("fel-loader"),Q=p("fel-tabs"),z=p("fel-modal"),x=W("motion");return n(),r("div",ne,[g(G,{title:"Patients Quick View"}),a(" Header Actions "),e("div",ae,[e("div",ie,[w(S.CREATE,I.PATIENT)?(n(),v($,{key:0,to:"/patients/search",class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"},{default:y(()=>s[2]||(s[2]=[X(" Add Patient ")])),_:1})):a("v-if",!0),e("input",{type:"text",placeholder:"Search patients...",class:"w-64 px-4 py-2 text-sm text-foreground placeholder-muted-foreground border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyup:j,onFocus:P},null,32)]),w(S.CREATE,I.PATIENT)?(n(),r("button",{key:0,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50",onClick:B}," Quick Registration ")):a("v-if",!0)]),a(" Main Content "),e("div",re,[a(" Patient List "),A((n(),r("section",le,[C(R)?(n(),v(U,{key:0,message:"Fetching patients..."})):(n(),r("div",ce,[(n(!0),r(Y,null,Z(C(N),o=>(n(),r("div",{key:o.patientId,onClick:be=>b(o),class:ee(["bg-background p-4 rounded-lg shadow-sm border border-border cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary",{"border-primary bg-primary/5":o.uid===i.value?.uid}])},[e("div",ue,[e("div",pe,[e("span",me,l(F(o)),1),e("span",_e,l(o.age)+" yrs, "+l(V(o.gender)),1)]),e("div",fe,[e("span",null,l(o.patientId),1),e("span",null,l(o.clientPatientId),1)]),e("div",ge,[e("span",null,l(o?.client?.district?.province?.name),1),e("span",null,l(o?.client?.name),1)])])],10,de))),128))]))])),[[x]]),a(" Patient Details "),D.value?A((n(),r("section",ve,[g(h.PatientInfo,{onEditPatient:s[0]||(s[0]=o=>u.value=!0)}),g(Q,{tabs:M.value,"initial-tab":"samples",class:"rounded-lg"},null,8,["tabs"])])),[[x]]):a("v-if",!0)]),a(" Edit Modal "),u.value?(n(),v(z,{key:0,onClose:s[1]||(s[1]=o=>u.value=!1),"content-width":"w-3/6",class:"bg-background"},{header:y(()=>s[3]||(s[3]=[e("h3",{class:"text-xl font-semibold text-foreground"},"Patient Form",-1)])),body:y(()=>[g(h.PatientForm,{patient:i.value,navigate:!1,onClose:O},null,8,["patient"])]),_:1})):a("v-if",!0)])}}});const Ae=te(ye,[["__scopeId","data-v-81af20fc"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/patient/PatientsCompact.vue"]]);export{Ae as default};
