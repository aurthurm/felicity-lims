import{Y as H,u as N,a0 as E,a7 as A,a3 as V,_ as L,r as d,c as M,o as _,z as u,A as T,C as h,a as t,K as o,M as l,F as B,H as P,I as C,B as R,a4 as I}from"./index-OdhKCqIc.js";import{c as q,a as D,u as z,F as K}from"./index.esm-BfHj8iGm.js";import{e as O,f as Y}from"./instrument.mutations-BxEMyJNC.js";import{u as j}from"./setup-BcFG_bXr.js";import{I as G}from"./Input-BEm5S0CJ.js";import{F as J,a as Q,b as W}from"./FormMessage-CgXFMXx9.js";import{F as X}from"./FormLabel-DxP9wnWS.js";import{E as Z,a as $,b as ee,c as te,d as oe}from"./EmptyTitle-aCQRDpx3.js";import{P as ne}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";const ae=H({name:"UnitsView",__name:"Units",setup(S,{expose:n}){n();const f=j(),{withClientMutation:e}=N();let c=E(!1),g=E("");const i=E(!0);f.fetchUnits();const b=A(()=>f.getUnits),y=q({name:D().trim().required("Name is required"),description:D().trim().nullable()}),{handleSubmit:p,resetForm:F,setValues:v}=z({validationSchema:y,initialValues:{name:"",description:""}}),m=E(null);function x(r){e(O,{payload:r},"createUnit").then(s=>f.addUnit(s))}function a(r){m.value&&e(Y,{uid:m.value,payload:r},"updateUnit").then(s=>f.updateUnit(s))}function U(r,s={}){i.value=r,c.value=!0,g.value=(r?"CREATE":"EDIT")+" UNIT",r?(m.value=null,F({values:{name:"",description:""}})):(m.value=s.uid??null,v({name:s.name??"",description:s.description??""}))}const k=p(r=>{const s={name:r.name,description:r.description??null};i.value===!0&&x(s),i.value===!1&&a(s),c.value=!1}),w={setupStore:f,withClientMutation:e,get showModal(){return c},set showModal(r){c=r},get formTitle(){return g},set formTitle(r){g=r},formAction:i,units:b,unitSchema:y,handleSubmit:p,resetForm:F,setValues:v,currentUid:m,addUnit:x,editUnit:a,FormManager:U,saveForm:k,get Button(){return V},get Input(){return G},get FormControl(){return W},get FormField(){return K},get FormItem(){return Q},get FormLabel(){return X},get FormMessage(){return J},get Empty(){return oe},get EmptyContent(){return te},get EmptyDescription(){return ee},get EmptyHeader(){return $},get EmptyTitle(){return Z},PageHeading:ne};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),re={class:"space-y-6"},le={class:"border border-border bg-card rounded-lg shadow-md"},se={class:"relative w-full overflow-auto"},ie={class:"text-lg font-semibold text-foreground"},de={class:"space-y-4"},me={class:"flex justify-end"};function ue(S,n,f,e,c,g){const i=d("TableHead"),b=d("TableRow"),y=d("TableHeader"),p=d("TableCell"),F=d("TableEmpty"),v=d("TableBody"),m=d("Table"),x=d("Modal");return _(),M(B,null,[u("div",re,[t(e.PageHeading,{title:"Units"},{default:o(()=>[t(e.Button,{onClick:n[0]||(n[0]=a=>e.FormManager(!0))},{default:o(()=>[...n[3]||(n[3]=[l(" Add Unit",-1)])]),_:1})]),_:1}),u("div",le,[u("div",se,[t(m,{class:"w-full caption-bottom text-sm"},{default:o(()=>[t(y,{class:"[&_tr]:border-b"},{default:o(()=>[t(b,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...n[4]||(n[4]=[l("Name",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:o(()=>[...n[5]||(n[5]=[l("Description",-1)])]),_:1}),t(i,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:o(()=>[...n[6]||(n[6]=[l("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(v,{class:"[&_tr:last-child]:border-0"},{default:o(()=>[(_(!0),M(B,null,P(e.units,a=>(_(),T(b,{key:a?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:o(()=>[t(p,{class:"px-4 py-3 align-middle text-sm"},{default:o(()=>[l(C(a?.name),1)]),_:2},1024),t(p,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:o(()=>[l(C(a?.description),1)]),_:2},1024),t(p,{class:"px-4 py-3 align-middle text-right"},{default:o(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:U=>e.FormManager(!1,a)},{default:o(()=>[...n[7]||(n[7]=[l(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e.units||e.units.length===0?(_(),T(F,{key:0,colspan:3},{default:o(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:o(()=>[t(e.EmptyContent,null,{default:o(()=>[t(e.EmptyHeader,null,{default:o(()=>[t(e.EmptyTitle,null,{default:o(()=>[...n[8]||(n[8]=[l("No units found",-1)])]),_:1}),t(e.EmptyDescription,null,{default:o(()=>[...n[9]||(n[9]=[l("Add a unit to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})])])]),e.showModal?(_(),T(x,{key:0,onClose:n[2]||(n[2]=a=>e.showModal=!1)},{header:o(()=>[u("h3",ie,C(e.formTitle),1)]),body:o(()=>[u("form",{onSubmit:n[1]||(n[1]=R((...a)=>e.saveForm&&e.saveForm(...a),["prevent"])),class:"space-y-4"},[u("div",de,[t(e.FormField,{name:"name"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...n[10]||(n[10]=[l("Name",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Input,I(a,{placeholder:"Enter unit name..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"description"},{default:o(({componentField:a})=>[t(e.FormItem,null,{default:o(()=>[t(e.FormLabel,null,{default:o(()=>[...n[11]||(n[11]=[l("Description",-1)])]),_:1}),t(e.FormControl,null,{default:o(()=>[t(e.Input,I(a,{placeholder:"Enter description..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),u("div",me,[t(e.Button,{type:"submit"},{default:o(()=>[...n[12]||(n[12]=[l("Save Changes",-1)])]),_:1})])],32)]),_:1})):h("",!0)],64)}const Ee=L(ae,[["render",ue],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/Units.vue"]]);export{Ee as default};
