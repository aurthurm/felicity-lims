const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelSwitch-BonIsof_.js","assets/index-CNAOKjig.js","assets/index-vawJu9QC.css"])))=>i.map(i=>d[i]);
import{a0 as B,ae as i,f as U,h as M,a7 as m,g as V,a1 as _,a6 as h,aE as H,aF as K,aG as z,_ as Y,r as J,c as g,o as c,A as s,C as Q,E as W,J as x,K as N,L as b,N as P,D as q,F as k,a2 as X,a9 as Z}from"./index-CNAOKjig.js";import{u as $}from"./user-BpCZXlao.js";const ee=B({__name:"Groups",setup(I,{expose:t}){t();const y=_(()=>h(()=>import("./FelSwitch-BonIsof_.js"),__vite__mapDeps([0,1,2]))),r=_(()=>h(()=>import("./index-CNAOKjig.js").then(e=>e.de),__vite__mapDeps([1,2]))),E=_(()=>h(()=>import("./index-CNAOKjig.js").then(e=>e.dh),__vite__mapDeps([1,2]))),A=[i.ADMINISTRATION,i.DASHBOARD,i.CLIENTS,i.PATIENTS,i.PATIENTS_COMPACT,i.SAMPLES,i.QC_SAMPLES,i.WORKSHEETS,i.NOTICE_MANAGER,i.BIO_BANKING,i.INVENTORY,i.REFERRAL,i.SCHEMES,i.DOCUMENT,i.BILLING];let a=$();const{withClientMutation:o}=U();a.fetchGroupsAndPermissions();const G=M(()=>a.getGroups);let S=m("permissions");const O=["permissions"];let f=m(!1),v=m("");const p=m(!0);let d=V({});function D(e){const l=e.pages;Object.assign(d,{...e,pages:l?.split(",")||[]}),w.value?.forEach(n=>{n[1].forEach(u=>{u.checked=!1,d.permissions?.some(F=>F?.uid==u?.uid||!1)&&(u.checked=!0)})})}function L(e,l={}){p.value=e,f.value=!0,v.value=(e?"CREATE":"EDIT")+" ANALYSES PROFILE",e?Object.assign(d,{name:"",pages:[]}):Object.assign(d,{...l})}function R(){const e={...d},l=e.pages;e.pages=l.join(","),p.value===!0&&o(H,{payload:e},"createGroup").then(n=>a.addGroup(n)),p.value===!1&&o(K,{uid:d?.uid,payload:{name:e.name,pages:e.pages}},"updateGroup").then(n=>a.updateGroup(n)),f.value=!1}const T=(e,l)=>e?.reduce(function(n,u){return(n[u[l]]=n[u[l]]||[]).push(u),n},{}),w=M(()=>Array.from(Object.entries(T(a.getPermissions,"target"))));function j(e,l){o(z,{groupUid:e?.uid,permissionUid:l?.uid},"updateGroupPermissions").then(n=>a.updateGroupsAndPermissions(n))}const C={FelSwitch:y,modal:r,accordion:E,pages:A,get userStore(){return a},set userStore(e){a=e},withClientMutation:o,groups:G,get currentTab(){return S},set currentTab(e){S=e},tabs:O,get showModal(){return f},set showModal(e){f=e},get formTitle(){return v},set formTitle(e){v=e},formAction:p,get userGroup(){return d},set userGroup(e){d=e},selectGroup:D,FormManager:L,saveForm:R,groupBy:T,permissions:w,updateGroupPerms:j};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),se={class:"space-y-6"},te={class:"flex items-center justify-between"},oe={class:"border border-border bg-card rounded-lg shadow-sm"},re={class:"relative w-full overflow-auto"},ie={class:"w-full caption-bottom text-sm"},ne={class:"[&_tr:last-child]:border-0"},ae={class:"px-4 py-2 align-middle"},le={class:"px-4 py-2 align-middle text-primary"},de={class:"px-4 py-2 align-middle text-right"},ue=["onClick"],ce={class:"text-lg font-semibold text-foreground"},fe={class:"space-y-4"},pe={class:"space-y-2"},me={class:"space-y-2"},ge=["size"],be=["value"];function ve(I,t,y,r,E,A){const a=J("fel-modal");return c(),g(x,null,[s("div",se,[s("div",te,[t[4]||(t[4]=s("h2",{class:"text-2xl font-semibold text-foreground"},"Groups",-1)),s("button",{onClick:t[0]||(t[0]=o=>r.FormManager(!0)),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Add Group ")]),s("div",oe,[s("div",re,[s("table",ie,[t[5]||(t[5]=s("thead",{class:"[&_tr]:border-b"},[s("tr",{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[s("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Group Name"),s("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Access Pages"),s("th",{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},"Actions")])],-1)),s("tbody",ne,[(c(!0),g(x,null,N(r.groups,o=>(c(),g("tr",{key:o.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},[s("td",ae,b(o.name),1),s("td",le,b(o.pages),1),s("td",de,[s("button",{onClick:G=>r.FormManager(!1,o),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,ue)])]))),128))])])])])]),r.showModal?(c(),Q(a,{key:0,onClose:t[3]||(t[3]=o=>r.showModal=!1)},{header:P(()=>[s("h3",ce,b(r.formTitle),1)]),body:P(()=>[s("form",{onSubmit:q(r.saveForm,["prevent"]),class:"space-y-4"},[s("div",fe,[s("div",pe,[t[6]||(t[6]=s("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Group Name ",-1)),k(s("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.userGroup.name=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter group name..."},null,512),[[X,r.userGroup.name]])]),s("div",me,[t[7]||(t[7]=s("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Pages ",-1)),k(s("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.userGroup.pages=o),multiple:"",size:r.pages.length,class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(c(),g(x,null,N(r.pages,o=>s("option",{key:o,value:o,class:"py-1"},b(o),9,be)),64))],8,ge),[[Z,r.userGroup.pages]])])]),t[8]||(t[8]=s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ")],-1))],32)]),_:1})):W("",!0)],64)}const xe=Y(ee,[["render",ve],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]);export{xe as default};
