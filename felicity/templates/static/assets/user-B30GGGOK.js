import{d as n,f as u,V as a,i as p,W as f}from"./index-Daoe3XS9.js";const{withClientQuery:i}=u(),{toastError:o}=p(),d=n("user",{state:()=>({users:[],usersPageInfo:void 0,usersTotalCount:0,fetchingUsers:!1,groups:[],fetchingGroups:!1,permissions:[]}),getters:{getUsers:s=>s.users,getSamplePageInfo:s=>s.usersPageInfo,getGroups:s=>s.groups,getPermissions:s=>s.permissions},actions:{async fetchUsers(s){try{this.fetchingUsers=!0;const t=await i(f,s,"userAll");this.users=t.items?.filter(r=>r.email!="system_daemon@system.daemon")??[],this.usersTotalCount=t.totalCount,this.usersPageInfo=t.pageInfo}catch(e){e instanceof Error&&o(e.message),this.users=[]}finally{this.fetchingUsers=!1}},addUser(s){this.users?.unshift(s)},updateUser(s){const e=this.users?.findIndex(t=>t.uid===s?.uid);e&&e>-1&&(this.users[e]=s)},async fetchGroupsAndPermissions(){try{this.fetchingGroups=!0;const s=await i(a,{},void 0);if(s&&typeof s=="object"){const e=s;this.groups=e.groupAll||[],this.permissions=e.permissionAll||[]}else this.groups=[],this.permissions=[]}catch(s){s instanceof Error&&o(s.message),this.groups=[],this.permissions=[]}finally{this.fetchingGroups=!1}},addGroup(s){this.groups?.unshift(s)},updateGroup(s){const e=this.groups?.findIndex(t=>t.uid===s?.uid);e>-1&&(this.groups[e]=s)},updateGroupsAndPermissions(s){const e=s?.group,t=this.groups?.findIndex(r=>r.uid===e?.uid);t>-1&&(e.permissions=e?.permissions||[],this.groups[t]=e)},getRoles(){const s=new Map;for(const e of this.groups)s.set(e.name,e.name);return s},addUserAuth(s){},updateUserAuth(s){}}});export{d as u};
