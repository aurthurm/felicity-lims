const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FolderNavigation-BEfcQKiU.js","assets/index-OdhKCqIc.js","assets/index-DD18L2yL.css","assets/plus-3a6EQFdX.js","assets/chevron-down-Dqf-ptA3.js","assets/chevron-right-DQgQPcek.js","assets/document.mutations-DOSH3hTX.js","assets/document.queries-ZdmMK7wF.js","assets/_isIterateeCall-DnrZM974.js","assets/toFinite-6PuaOTJs.js","assets/PageHeading-Czi_4opS.js","assets/RecentDocuments-PR-zeHKD.js","assets/DocumentListing-CwMaEGq2.js","assets/EmptyTitle-aCQRDpx3.js","assets/FolderDocuments-D6UvVbQC.js"])))=>i.map(i=>d[i]);
import{h as b,d as g,u as y,Y as F,aB as p,a0 as A,ah as S,a5 as a,a6 as c,_ as x,c as O,o as u,a as l,z as r,N as P,A as h,F as E}from"./index-OdhKCqIc.js";import{a as k,b as C}from"./document.queries-ZdmMK7wF.js";import{a as I}from"./_isIterateeCall-DnrZM974.js";import{t as D}from"./toFinite-6PuaOTJs.js";import{P as M}from"./PageHeading-Czi_4opS.js";const R=b("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var B=Math.floor,T=Math.random;function V(e,t){return e+B(T()*(t-e+1))}var j=parseFloat,L=Math.min,N=Math.random;function U(e,t,n){if(n&&typeof n!="boolean"&&I(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=D(e),t===void 0?(t=e,e=0):t=D(t)),e>t){var s=e;e=t,t=s}if(n||e%1||t%1){var o=N();return L(e+o*(t-e+j("1e-"+((o+"").length-1))),t)}return V(e,t)}const{withClientQuery:_}=y(),w=g("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[]}),actions:{async fetchDocuments(e,t=!1){try{const n=await _(C,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll");n&&typeof n=="object"&&"items"in n&&(this.documents=n.items,t&&(this.recentDocuments=this.documents.sort((s,o)=>{const i=s.updatedAt?new Date(s.updatedAt).getTime():0;return(o.updatedAt?new Date(o.updatedAt).getTime():0)-i}).slice(0,25)))}catch{}},addDocument(e){e?.uid&&(this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5))},updateDocument(e){if(!e?.uid)return;const t={...e,updatedAt:new Date().toISOString()};this.documents=this.documents.map(n=>n.uid===e.uid?t:n),this.recentDocuments=[t,...this.recentDocuments.filter(n=>n.uid!==e.uid)].slice(0,5)},deleteDocument(e){e&&(this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e))},duplicateDocument(e){if(!e)return;const t=this.documents.find(s=>s.uid===e);if(!t)return;const n={...t,uid:U(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(n),this.recentDocuments=[n,...this.recentDocuments].slice(0,5)},async setCurrentFolder(e){this.currentFolder=e,await this.fetchDocuments({folderUid:e})},async getFolders(){try{const e=await _(k,{},"documentFolderAll");e&&typeof e=="object"&&"items"in e&&(this.folders=e.items)}catch{}},addFolder(e){e?.uid&&this.folders.push(e)},deleteFolder(e){e&&(this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e))},updateFolder(e){e?.uid&&(this.folders=this.folders.map(t=>t.uid===e.uid?e:t))},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){e&&(this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t))}},getters:{getChildFolders:e=>t=>e.folders.filter(n=>n.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(n=>n.folderUid===t)}}),z=F({__name:"DocumentEntry",setup(e,{expose:t}){t();const n=a(()=>c(()=>import("./FolderNavigation-BEfcQKiU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),s=a(()=>c(()=>import("./RecentDocuments-PR-zeHKD.js"),__vite__mapDeps([11,1,2,12,6,4,13,3,7,8,9,10]))),o=a(()=>c(()=>import("./FolderDocuments-D6UvVbQC.js"),__vite__mapDeps([14,1,2,12,6,4,13,3,7,8,9,10]))),i=w(),{currentFolder:m}=p(i),d=A(!1),v=()=>{d.value=!d.value};S(async()=>{try{await i.getFolders()}catch{}});const f={FolderNavigation:n,RecentDocuments:s,FolderDocuments:o,documentStore:i,currentFolder:m,isSidebarOpen:d,toggleSidebar:v,get Folder(){return R},PageHeading:M};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),H={class:"flex overflow-hidden"},G={class:"flex-1 overflow-hidden"},Q={class:"lg:hidden p-4 flex items-center border-b border-border"},Y={class:"h-full overflow-auto p-6"};function Z(e,t,n,s,o,i){return u(),O(E,null,[l(s.PageHeading,{title:"Documents"}),r("div",H,[r("div",{class:P(["fixed inset-y-0 left-0 z-10 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",{"-translate-x-full":!s.isSidebarOpen}])},[l(s.FolderNavigation)],2),r("div",G,[r("div",Q,[r("button",{class:"mr-4 p-2 rounded-md border border-border hover:bg-accent",onClick:s.toggleSidebar},[l(s.Folder,{class:"h-5 w-5"})]),t[0]||(t[0]=r("h1",{class:"text-xl font-semibold text-foreground"},"Document Manager",-1))]),r("div",Y,[s.currentFolder?(u(),h(s.FolderDocuments,{key:1})):(u(),h(s.RecentDocuments,{key:0}))])])])],64)}const q=x(z,[["render",Z],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/document/DocumentEntry.vue"]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{ee as D,R as F,w as u};
