import{d as Y,I as Z,r as u,at as ee,au as te,s as E,n as P,p as se,o as i,c,g as A,f as l,e as m,L as oe,b as s,A as _,y as B,z as le,t as b,v as T,i as g,F as h,C as y,ad as k,w as ne,j as L,_ as M,k as ae}from"./index-7210a26e.js";import ie from"./FelModal-b8e55526.js";import{A as re,E as ue}from"./clients.mutations-862cb6e2.js";import{u as ce}from"./client-5ebca3eb.js";import{u as de}from"./location-358501d8.js";import{h as me,o as fe,a as pe}from"./constants-a7d5f510.js";const ve=s("hr",null,null,-1),be={action:"post",class:"p-1"},he={class:"grid grid-cols-2 gap-x-4 mb-4"},Ce={class:"block col-span-1 mb-2"},_e=s("span",{class:"text-gray-700"},"Name",-1),ge={class:"block col-span-1 mb-2"},ye=s("span",{class:"text-gray-700"},"Code",-1),ke={class:"grid grid-cols-3 gap-x-4 mb-4"},xe={class:"block col-span-1 mb-2"},we=s("span",{class:"text-gray-700"},"Country",-1),Ue=s("option",null,null,-1),De=["value"],Ee={class:"block col-span-1 mb-2"},Pe=s("span",{class:"text-gray-700"},"Province",-1),Ae=s("option",null,null,-1),Be=["value"],Te={class:"block col-span-1 mb-2"},Le=s("span",{class:"text-gray-700"},"District",-1),Me=s("option",null,null,-1),Ne=["value"],Ie=s("hr",null,null,-1),Se=Y({__name:"ClientListing",setup(Ve){const N=L(()=>M(()=>import("./FelDataTable-a2b4d2a6.js"),["assets/FelDataTable-a2b4d2a6.js","assets/index-7210a26e.js","assets/index-a67f0314.css"])),I=L(()=>M(()=>import("./FelPageHeading-6a2cd27d.js"),["assets/FelPageHeading-6a2cd27d.js","assets/index-7210a26e.js","assets/index-a67f0314.css"])),r=ce(),v=de(),{withClientMutation:x}=Z(),S=u([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Client Name",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(o,t){return ee(te,{to:{name:"client-detail",query:{clientUid:o?.uid}},class:"px-1 ml-2 border-white border text-gray-500rounded-smtransition duration-300 hover:border-sky-800 hover:text-sky-800 focus:outline-none",innerHTML:o?.name})}},{name:"Client ID",value:"code",sortable:!1,sortBy:"asc",hidden:!1},{name:"District",value:"district.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Province",value:"district.province.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Mobile Number",value:"mobilePhone",sortable:!1,sortBy:"asc",hidden:!1},{name:"Email Asdress",value:"email",sortable:!1,sortBy:"asc",hidden:!1}]),{countries:V,provinces:R,districts:O}=E(v),{clients:w,clientPageInfo:U,fetchingClients:F}=E(r);let d=u(!1),C=u(!1),j=u(""),n=P({});const D=u(""),H=()=>Object.assign(n,{});let a=P({first:50,after:"",text:"",sortBy:["uid"],filterAction:!1}),f=u(),p=u();r.fetchClients(a),v.fetchCountries();function q(){x(re,{payload:{name:n.name,code:n.code,districtUid:n.districtUid}},"createClient").then(o=>r.addClient(o))}function z(){x(ue,{uid:n.uid,payload:{name:n.name,code:n.code,districtUid:n.districtUid}},"updateClient").then(o=>r.updateClient(o))}function K(o){v.filterProvincesByCountry(f.value)}function $(o){v.filterDistrictsByProvince(p.value)}function G(o){a.first=100,a.after="",a.text=o.filterText,a.filterAction=!0,r.fetchClients(a)}function J(o){a.first=o.fetchCount,a.after=U?.value?.endCursor,a.text=o.filterText,a.filterAction=!1,r.fetchClients(a)}function Q(o,t,e={}){C.value=o,j.value=t,D.value=(o?"CREATE":"EDIT")+" "+t.toUpperCase(),t=="client"&&(d.value=!0),o?t=="client"&&Object.assign(n,{}):t=="client"&&Object.assign(n,{...e})}function W(){C.value&&q(),C.value||z(),d.value=!1}const X=se(()=>w?.value?.length+" of "+r.getClientCount+" clients");return(o,t)=>(i(),c(h,null,[A(l(I),{title:"Clients"}),m(s("button",{class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100",onClick:t[0]||(t[0]=e=>Q(!0,"client"))}," Add client ",512),[[oe,me(pe.CREATE,fe.CLIENT)]]),ve,A(l(N),{columns:S.value,data:l(w),toggleColumns:!0,loading:l(F),paginable:!0,pageMeta:{fetchCount:l(a).first,hasNextPage:l(U)?.hasNextPage,countNone:X.value},searchable:!0,filterable:!1,onOnSearchKeyUp:G,onOnSearchFocus:H,onOnPaginate:J,selectable:!1},{footer:_(()=>[]),_:1},8,["columns","data","loading","pageMeta"]),B(" Location Edit Form Modal "),l(d)?(i(),le(ie,{key:0,onClose:t[9]||(t[9]=e=>g(d)?d.value=!1:d=!1)},{header:_(()=>[s("h3",null,b(D.value),1)]),body:_(()=>[s("form",be,[s("div",he,[s("label",Ce,[_e,m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[1]||(t[1]=e=>l(n).name=e),placeholder:"Name ..."},null,512),[[T,l(n).name]])]),s("label",ge,[ye,m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=e=>l(n).code=e),placeholder:"Code ..."},null,512),[[T,l(n).code]])])]),s("div",ke,[s("label",xe,[we,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[3]||(t[3]=e=>g(f)?f.value=e:f=e),onChange:t[4]||(t[4]=e=>K(e))},[Ue,(i(!0),c(h,null,y(l(V),e=>(i(),c("option",{key:e.uid,value:e.uid},b(e.name),9,De))),128))],544),[[k,l(f)]])]),s("label",Ee,[Pe,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[5]||(t[5]=e=>g(p)?p.value=e:p=e),onChange:t[6]||(t[6]=e=>$(e))},[Ae,(i(!0),c(h,null,y(l(R),e=>(i(),c("option",{key:e.uid,value:e.uid},b(e.name),9,Be))),128))],544),[[k,l(p)]])]),s("label",Te,[Le,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[7]||(t[7]=e=>l(n).districtUid=e)},[Me,(i(!0),c(h,null,y(l(O),e=>(i(),c("option",{key:e.uid,value:e.uid},b(e.name),9,Ne))),128))],512),[[k,l(n).districtUid]])])]),Ie,s("button",{type:"button",onClick:t[8]||(t[8]=ne(e=>W(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):B("v-if",!0)],64))}}),ze=ae(Se,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/client/ClientListing.vue"]]);export{ze as default};
