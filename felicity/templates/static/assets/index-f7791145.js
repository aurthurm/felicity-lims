import{f as J,I as K,v as $,h as Y,k as X,al as M,B as S,x as Z,_ as j}from"./_plugin-vue_export-helper-dacf3d65.js";import{C as rr}from"./index-8a4723f6.js";import{l as nr}from"./shipment-53265c2d.js";var A={},er={get exports(){return A},set exports(W){A=W}};(function(W,B){(function(b,i){W.exports=i()})(nr,function(){var b=function(i,f){var _=Array.prototype.concat,d=Array.prototype.slice,w=Object.prototype.toString;function g(m,v){var a=m>v?m:v;return i.pow(10,17-~~(i.log(a>0?a:-a)*i.LOG10E))}var u=Array.isArray||function(v){return w.call(v)==="[object Array]"};function r(m){return w.call(m)==="[object Function]"}function n(m){return typeof m=="number"?m-m===0:!1}function e(m){return _.apply([],m)}function o(){return new o._init(arguments)}o.fn=o.prototype,o._init=function(v){if(u(v[0]))if(u(v[0][0])){r(v[1])&&(v[0]=o.map(v[0],v[1]));for(var a=0;a<v[0].length;a++)this[a]=v[0][a];this.length=v[0].length}else this[0]=r(v[1])?o.map(v[0],v[1]):v[0],this.length=1;else if(n(v[0]))this[0]=o.seq.apply(null,v),this.length=1;else{if(v[0]instanceof o)return o(v[0].toArray());this[0]=[],this.length=1}return this},o._init.prototype=o.prototype,o._init.constructor=o,o.utils={calcRdx:g,isArray:u,isFunction:r,isNumber:n,toVector:e},o._random_fn=i.random,o.setRandom=function(v){if(typeof v!="function")throw new TypeError("fn is not a function");o._random_fn=v},o.extend=function(v){var a,p;if(arguments.length===1){for(p in v)o[p]=v[p];return this}for(a=1;a<arguments.length;a++)for(p in arguments[a])v[p]=arguments[a][p];return v},o.rows=function(v){return v.length||1},o.cols=function(v){return v[0].length||1},o.dimensions=function(v){return{rows:o.rows(v),cols:o.cols(v)}},o.row=function(v,a){return u(a)?a.map(function(p){return o.row(v,p)}):v[a]},o.rowa=function(v,a){return o.row(v,a)},o.col=function(v,a){if(u(a)){var p=o.arange(v.length).map(function(){return new Array(a.length)});return a.forEach(function(h,D){o.arange(v.length).forEach(function(R){p[R][D]=v[R][h]})}),p}for(var y=new Array(v.length),q=0;q<v.length;q++)y[q]=[v[q][a]];return y},o.cola=function(v,a){return o.col(v,a).map(function(p){return p[0]})},o.diag=function(v){for(var a=o.rows(v),p=new Array(a),y=0;y<a;y++)p[y]=[v[y][y]];return p},o.antidiag=function(v){for(var a=o.rows(v)-1,p=new Array(a),y=0;a>=0;a--,y++)p[y]=[v[y][a]];return p},o.transpose=function(v){var a=[],p,y,q,h,D;for(u(v[0])||(v=[v]),y=v.length,q=v[0].length,D=0;D<q;D++){for(p=new Array(y),h=0;h<y;h++)p[h]=v[h][D];a.push(p)}return a.length===1?a[0]:a},o.map=function(v,a,p){var y,q,h,D,R;for(u(v[0])||(v=[v]),q=v.length,h=v[0].length,D=p?v:new Array(q),y=0;y<q;y++)for(D[y]||(D[y]=new Array(h)),R=0;R<h;R++)D[y][R]=a(v[y][R],y,R);return D.length===1?D[0]:D},o.cumreduce=function(v,a,p){var y,q,h,D,R;for(u(v[0])||(v=[v]),q=v.length,h=v[0].length,D=p?v:new Array(q),y=0;y<q;y++)for(D[y]||(D[y]=new Array(h)),h>0&&(D[y][0]=v[y][0]),R=1;R<h;R++)D[y][R]=a(D[y][R-1],v[y][R]);return D.length===1?D[0]:D},o.alter=function(v,a){return o.map(v,a,!0)},o.create=function(v,a,p){var y=new Array(v),q,h;for(r(a)&&(p=a,a=v),q=0;q<v;q++)for(y[q]=new Array(a),h=0;h<a;h++)y[q][h]=p(q,h);return y};function t(){return 0}o.zeros=function(v,a){return n(a)||(a=v),o.create(v,a,t)};function l(){return 1}o.ones=function(v,a){return n(a)||(a=v),o.create(v,a,l)},o.rand=function(v,a){return n(a)||(a=v),o.create(v,a,o._random_fn)};function s(m,v){return m===v?1:0}o.identity=function(v,a){return n(a)||(a=v),o.create(v,a,s)},o.symmetric=function(v){var a=v.length,p,y;if(v.length!==v[0].length)return!1;for(p=0;p<a;p++)for(y=0;y<a;y++)if(v[y][p]!==v[p][y])return!1;return!0},o.clear=function(v){return o.alter(v,t)},o.seq=function(v,a,p,y){r(y)||(y=!1);var q=[],h=g(v,a),D=(a*h-v*h)/((p-1)*h),R=v,x;for(x=0;R<=a&&x<p;x++,R=(v*h+D*h*x)/h)q.push(y?y(R,x):R);return q},o.arange=function(v,a,p){var y=[],q;if(p=p||1,a===f&&(a=v,v=0),v===a||p===0)return[];if(v<a&&p<0)return[];if(v>a&&p>0)return[];if(p>0)for(q=v;q<a;q+=p)y.push(q);else for(q=v;q>a;q+=p)y.push(q);return y},o.slice=function(){function m(a,p,y,q){var h,D=[],R=a.length;if(p===f&&y===f&&q===f)return o.copy(a);if(p=p||0,y=y||a.length,p=p>=0?p:R+p,y=y>=0?y:R+y,q=q||1,p===y||q===0)return[];if(p<y&&q<0)return[];if(p>y&&q>0)return[];if(q>0)for(h=p;h<y;h+=q)D.push(a[h]);else for(h=p;h>y;h+=q)D.push(a[h]);return D}function v(a,p){var y,q;if(p=p||{},n(p.row)){if(n(p.col))return a[p.row][p.col];var h=o.rowa(a,p.row);return y=p.col||{},m(h,y.start,y.end,y.step)}if(n(p.col)){var D=o.cola(a,p.col);return q=p.row||{},m(D,q.start,q.end,q.step)}q=p.row||{},y=p.col||{};var R=m(a,q.start,q.end,q.step);return R.map(function(x){return m(x,y.start,y.end,y.step)})}return v}(),o.sliceAssign=function(v,a,p){var y,q;if(n(a.row)){if(n(a.col))return v[a.row][a.col]=p;a.col=a.col||{},a.col.start=a.col.start||0,a.col.end=a.col.end||v[0].length,a.col.step=a.col.step||1,y=o.arange(a.col.start,i.min(v.length,a.col.end),a.col.step);var h=a.row;return y.forEach(function(R,x){v[h][R]=p[x]}),v}if(n(a.col)){a.row=a.row||{},a.row.start=a.row.start||0,a.row.end=a.row.end||v.length,a.row.step=a.row.step||1,q=o.arange(a.row.start,i.min(v[0].length,a.row.end),a.row.step);var D=a.col;return q.forEach(function(R,x){v[R][D]=p[x]}),v}return p[0].length===f&&(p=[p]),a.row.start=a.row.start||0,a.row.end=a.row.end||v.length,a.row.step=a.row.step||1,a.col.start=a.col.start||0,a.col.end=a.col.end||v[0].length,a.col.step=a.col.step||1,q=o.arange(a.row.start,i.min(v.length,a.row.end),a.row.step),y=o.arange(a.col.start,i.min(v[0].length,a.col.end),a.col.step),q.forEach(function(R,x){y.forEach(function(P,z){v[R][P]=p[x][z]})}),v},o.diagonal=function(v){var a=o.zeros(v.length,v.length);return v.forEach(function(p,y){a[y][y]=p}),a},o.copy=function(v){return v.map(function(a){return n(a)?a:a.map(function(p){return p})})};var c=o.prototype;return c.length=0,c.push=Array.prototype.push,c.sort=Array.prototype.sort,c.splice=Array.prototype.splice,c.slice=Array.prototype.slice,c.toArray=function(){return this.length>1?d.call(this):d.call(this)[0]},c.map=function(v,a){return o(o.map(this,v,a))},c.cumreduce=function(v,a){return o(o.cumreduce(this,v,a))},c.alter=function(v){return o.alter(this,v),this},function(m){for(var v=0;v<m.length;v++)(function(a){c[a]=function(p){var y=this,q;return p?(setTimeout(function(){p.call(y,c[a].call(y))}),this):(q=o[a](this),u(q)?o(q):q)}})(m[v])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(m){for(var v=0;v<m.length;v++)(function(a){c[a]=function(p,y){var q=this;return y?(setTimeout(function(){y.call(q,c[a].call(q,p))}),this):o(o[a](this,p))}})(m[v])}("row col".split(" ")),function(m){for(var v=0;v<m.length;v++)(function(a){c[a]=function(){return o(o[a].apply(null,arguments))}})(m[v])}("create zeros ones rand identity".split(" ")),o}(Math);return function(i,f){var _=i.utils.isFunction;function d(u,r){return u-r}function w(u,r,n){return f.max(r,f.min(u,n))}i.sum=function(r){for(var n=0,e=r.length;--e>=0;)n+=r[e];return n},i.sumsqrd=function(r){for(var n=0,e=r.length;--e>=0;)n+=r[e]*r[e];return n},i.sumsqerr=function(r){for(var n=i.mean(r),e=0,o=r.length,t;--o>=0;)t=r[o]-n,e+=t*t;return e},i.sumrow=function(r){for(var n=0,e=r.length;--e>=0;)n+=r[e];return n},i.product=function(r){for(var n=1,e=r.length;--e>=0;)n*=r[e];return n},i.min=function(r){for(var n=r[0],e=0;++e<r.length;)r[e]<n&&(n=r[e]);return n},i.max=function(r){for(var n=r[0],e=0;++e<r.length;)r[e]>n&&(n=r[e]);return n},i.unique=function(r){for(var n={},e=[],o=0;o<r.length;o++)n[r[o]]||(n[r[o]]=!0,e.push(r[o]));return e},i.mean=function(r){return i.sum(r)/r.length},i.meansqerr=function(r){return i.sumsqerr(r)/r.length},i.geomean=function(r){var n=r.map(f.log),e=i.mean(n);return f.exp(e)},i.median=function(r){var n=r.length,e=r.slice().sort(d);return n&1?e[n/2|0]:(e[n/2-1]+e[n/2])/2},i.cumsum=function(r){return i.cumreduce(r,function(n,e){return n+e})},i.cumprod=function(r){return i.cumreduce(r,function(n,e){return n*e})},i.diff=function(r){var n=[],e=r.length,o;for(o=1;o<e;o++)n.push(r[o]-r[o-1]);return n},i.rank=function(u){var r,n=[],e={};for(r=0;r<u.length;r++){var o=u[r];e[o]?e[o]++:(e[o]=1,n.push(o))}var t=n.sort(d),l={},s=1;for(r=0;r<t.length;r++){var o=t[r],c=e[o],m=s,v=s+c-1,a=(m+v)/2;l[o]=a,s+=c}return u.map(function(p){return l[p]})},i.mode=function(r){var n=r.length,e=r.slice().sort(d),o=1,t=0,l=0,s=[],c;for(c=0;c<n;c++)e[c]===e[c+1]?o++:(o>t?(s=[e[c]],t=o,l=0):o===t&&(s.push(e[c]),l++),o=1);return l===0?s[0]:s},i.range=function(r){return i.max(r)-i.min(r)},i.variance=function(r,n){return i.sumsqerr(r)/(r.length-(n?1:0))},i.pooledvariance=function(r){var n=r.reduce(function(o,t){return o+i.sumsqerr(t)},0),e=r.reduce(function(o,t){return o+t.length},0);return n/(e-r.length)},i.deviation=function(u){for(var r=i.mean(u),n=u.length,e=new Array(n),o=0;o<n;o++)e[o]=u[o]-r;return e},i.stdev=function(r,n){return f.sqrt(i.variance(r,n))},i.pooledstdev=function(r){return f.sqrt(i.pooledvariance(r))},i.meandev=function(r){for(var n=i.mean(r),e=[],o=r.length-1;o>=0;o--)e.push(f.abs(r[o]-n));return i.mean(e)},i.meddev=function(r){for(var n=i.median(r),e=[],o=r.length-1;o>=0;o--)e.push(f.abs(r[o]-n));return i.median(e)},i.coeffvar=function(r){return i.stdev(r)/i.mean(r)},i.quartiles=function(r){var n=r.length,e=r.slice().sort(d);return[e[f.round(n/4)-1],e[f.round(n/2)-1],e[f.round(n*3/4)-1]]},i.quantiles=function(r,n,e,o){var t=r.slice().sort(d),l=[n.length],s=r.length,c,m,v,a,p,y;for(typeof e>"u"&&(e=3/8),typeof o>"u"&&(o=3/8),c=0;c<n.length;c++)m=n[c],v=e+m*(1-e-o),a=s*m+v,p=f.floor(w(a,1,s-1)),y=w(a-p,0,1),l[c]=(1-y)*t[p-1]+y*t[p];return l},i.percentile=function(r,n,e){var o=r.slice().sort(d),t=n*(o.length+(e?1:-1))+(e?0:1),l=parseInt(t),s=t-l;return l+1<o.length?o[l-1]+s*(o[l]-o[l-1]):o[l-1]},i.percentileOfScore=function(r,n,e){var o=0,t=r.length,l=!1,s,c;for(e==="strict"&&(l=!0),c=0;c<t;c++)s=r[c],(l&&s<n||!l&&s<=n)&&o++;return o/t},i.histogram=function(r,n){n=n||4;var e=i.min(r),o=(i.max(r)-e)/n,t=r.length,l=[],s;for(s=0;s<n;s++)l[s]=0;for(s=0;s<t;s++)l[f.min(f.floor((r[s]-e)/o),n-1)]+=1;return l},i.covariance=function(r,n){var e=i.mean(r),o=i.mean(n),t=r.length,l=new Array(t),s;for(s=0;s<t;s++)l[s]=(r[s]-e)*(n[s]-o);return i.sum(l)/(t-1)},i.corrcoeff=function(r,n){return i.covariance(r,n)/i.stdev(r,1)/i.stdev(n,1)},i.spearmancoeff=function(u,r){return u=i.rank(u),r=i.rank(r),i.corrcoeff(u,r)},i.stanMoment=function(r,n){for(var e=i.mean(r),o=i.stdev(r),t=r.length,l=0,s=0;s<t;s++)l+=f.pow((r[s]-e)/o,n);return l/r.length},i.skewness=function(r){return i.stanMoment(r,3)},i.kurtosis=function(r){return i.stanMoment(r,4)-3};var g=i.prototype;(function(u){for(var r=0;r<u.length;r++)(function(n){g[n]=function(e,o){var t=[],l=0,s=this;if(_(e)&&(o=e,e=!1),o)return setTimeout(function(){o.call(s,g[n].call(s,e))}),this;if(this.length>1){for(s=e===!0?this:this.transpose();l<s.length;l++)t[l]=i[n](s[l]);return t}return i[n](this[0],e)}})(u[r])})("cumsum cumprod".split(" ")),function(u){for(var r=0;r<u.length;r++)(function(n){g[n]=function(e,o){var t=[],l=0,s=this;if(_(e)&&(o=e,e=!1),o)return setTimeout(function(){o.call(s,g[n].call(s,e))}),this;if(this.length>1){for(n!=="sumrow"&&(s=e===!0?this:this.transpose());l<s.length;l++)t[l]=i[n](s[l]);return e===!0?i[n](i.utils.toVector(t)):t}return i[n](this[0],e)}})(u[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(u){for(var r=0;r<u.length;r++)(function(n){g[n]=function(){var e=[],o=0,t=this,l=Array.prototype.slice.call(arguments),s;if(_(l[l.length-1])){s=l[l.length-1];var c=l.slice(0,l.length-1);return setTimeout(function(){s.call(t,g[n].apply(t,c))}),this}else{s=void 0;var m=function(a){return i[n].apply(t,[a].concat(l))}}if(this.length>1){for(t=t.transpose();o<t.length;o++)e[o]=m(t[o]);return e}return m(this[0])}})(u[r])}("quantiles percentileOfScore".split(" "))}(b,Math),function(i,f){i.gammaln=function(d){var w=0,g=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,r,n,e;for(e=(n=r=d)+5.5,e-=(r+.5)*f.log(e);w<6;w++)u+=g[w]/++n;return f.log(2.5066282746310007*u/r)-e},i.loggam=function(d){var w,g,u,r,n,e,o,t=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(w=d,o=0,d==1||d==2)return 0;for(d<=7&&(o=f.floor(7-d),w=d+o),g=1/(w*w),u=2*f.PI,n=t[9],e=8;e>=0;e--)n*=g,n+=t[e];if(r=n/w+.5*f.log(u)+(w-.5)*f.log(w)-w,d<=7)for(e=1;e<=o;e++)r-=f.log(w-1),w-=1;return r},i.gammafn=function(d){var w=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],g=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,r=0,n=0,e=0,o=d,t,l,s,c;if(d>171.6243769536076)return 1/0;if(o<=0)if(c=o%1+36e-17,c)u=(o&1?-1:1)*f.PI/f.sin(f.PI*c),o=1-o;else return 1/0;for(s=o,o<1?l=o++:l=(o-=r=(o|0)-1)-1,t=0;t<8;++t)e=(e+w[t])*l,n=n*l+g[t];if(c=e/n+1,s<o)c/=s;else if(s>o)for(t=0;t<r;++t)c*=o,o++;return u&&(c=u/c),c},i.gammap=function(d,w){return i.lowRegGamma(d,w)*i.gammafn(d)},i.lowRegGamma=function(d,w){var g=i.gammaln(d),u=d,r=1/d,n=r,e=w+1-d,o=1/1e-30,t=1/e,l=t,s=1,c=-~(f.log(d>=1?d:1/d)*8.5+d*.4+17),m;if(w<0||d<=0)return NaN;if(w<d+1){for(;s<=c;s++)r+=n*=w/++u;return r*f.exp(-w+d*f.log(w)-g)}for(;s<=c;s++)m=-s*(s-d),e+=2,t=m*t+e,o=e+m/o,t=1/t,l*=t*o;return 1-l*f.exp(-w+d*f.log(w)-g)},i.factorialln=function(d){return d<0?NaN:i.gammaln(d+1)},i.factorial=function(d){return d<0?NaN:i.gammafn(d+1)},i.combination=function(d,w){return d>170||w>170?f.exp(i.combinationln(d,w)):i.factorial(d)/i.factorial(w)/i.factorial(d-w)},i.combinationln=function(d,w){return i.factorialln(d)-i.factorialln(w)-i.factorialln(d-w)},i.permutation=function(d,w){return i.factorial(d)/i.factorial(d-w)},i.betafn=function(d,w){if(!(d<=0||w<=0))return d+w>170?f.exp(i.betaln(d,w)):i.gammafn(d)*i.gammafn(w)/i.gammafn(d+w)},i.betaln=function(d,w){return i.gammaln(d)+i.gammaln(w)-i.gammaln(d+w)},i.betacf=function(d,w,g){var u=1e-30,r=1,n=w+g,e=w+1,o=w-1,t=1,l=1-n*d/e,s,c,m,v;for(f.abs(l)<u&&(l=u),l=1/l,v=l;r<=100&&(s=2*r,c=r*(g-r)*d/((o+s)*(w+s)),l=1+c*l,f.abs(l)<u&&(l=u),t=1+c/t,f.abs(t)<u&&(t=u),l=1/l,v*=l*t,c=-(w+r)*(n+r)*d/((w+s)*(e+s)),l=1+c*l,f.abs(l)<u&&(l=u),t=1+c/t,f.abs(t)<u&&(t=u),l=1/l,m=l*t,v*=m,!(f.abs(m-1)<3e-7));r++);return v},i.gammapinv=function(d,w){var g=0,u=w-1,r=1e-8,n=i.gammaln(w),e,o,t,l,s,c,m;if(d>=1)return f.max(100,w+100*f.sqrt(w));if(d<=0)return 0;for(w>1?(c=f.log(u),m=f.exp(u*(c-1)-n),s=d<.5?d:1-d,t=f.sqrt(-2*f.log(s)),e=(2.30753+t*.27061)/(1+t*(.99229+t*.04481))-t,d<.5&&(e=-e),e=f.max(.001,w*f.pow(1-1/(9*w)-e/(3*f.sqrt(w)),3))):(t=1-w*(.253+w*.12),d<t?e=f.pow(d/t,1/w):e=1-f.log(1-(d-t)/(1-t)));g<12;g++){if(e<=0)return 0;if(o=i.lowRegGamma(w,e)-d,w>1?t=m*f.exp(-(e-u)+u*(f.log(e)-c)):t=f.exp(-e+u*f.log(e)-n),l=o/t,e-=t=l/(1-.5*f.min(1,l*((w-1)/e-1))),e<=0&&(e=.5*(e+t)),f.abs(t)<r*e)break}return e},i.erf=function(d){var w=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],g=w.length-1,u=!1,r=0,n=0,e,o,t,l;for(d<0&&(d=-d,u=!0),e=2/(2+d),o=4*e-2;g>0;g--)t=r,r=o*r-n+w[g],n=t;return l=e*f.exp(-d*d+.5*(w[0]+o*r)-n),u?l-1:1-l},i.erfc=function(d){return 1-i.erf(d)},i.erfcinv=function(d){var w=0,g,u,r,n;if(d>=2)return-100;if(d<=0)return 100;for(n=d<1?d:2-d,r=f.sqrt(-2*f.log(n/2)),g=-.70711*((2.30753+r*.27061)/(1+r*(.99229+r*.04481))-r);w<2;w++)u=i.erfc(g)-n,g+=u/(1.1283791670955126*f.exp(-g*g)-g*u);return d<1?g:-g},i.ibetainv=function(d,w,g){var u=1e-8,r=w-1,n=g-1,e=0,o,t,l,s,c,m,v,a,p,y,q;if(d<=0)return 0;if(d>=1)return 1;for(w>=1&&g>=1?(l=d<.5?d:1-d,s=f.sqrt(-2*f.log(l)),v=(2.30753+s*.27061)/(1+s*(.99229+s*.04481))-s,d<.5&&(v=-v),a=(v*v-3)/6,p=2/(1/(2*w-1)+1/(2*g-1)),y=v*f.sqrt(a+p)/p-(1/(2*g-1)-1/(2*w-1))*(a+5/6-2/(3*p)),v=w/(w+g*f.exp(2*y))):(o=f.log(w/(w+g)),t=f.log(g/(w+g)),s=f.exp(w*o)/w,c=f.exp(g*t)/g,y=s+c,d<s/y?v=f.pow(w*y*d,1/w):v=1-f.pow(g*y*(1-d),1/g)),q=-i.gammaln(w)-i.gammaln(g)+i.gammaln(w+g);e<10;e++){if(v===0||v===1)return v;if(m=i.ibeta(v,w,g)-d,s=f.exp(r*f.log(v)+n*f.log(1-v)+q),c=m/s,v-=s=c/(1-.5*f.min(1,c*(r/v-n/(1-v)))),v<=0&&(v=.5*(v+s)),v>=1&&(v=.5*(v+s+1)),f.abs(s)<u*v&&e>0)break}return v},i.ibeta=function(d,w,g){var u=d===0||d===1?0:f.exp(i.gammaln(w+g)-i.gammaln(w)-i.gammaln(g)+w*f.log(d)+g*f.log(1-d));return d<0||d>1?!1:d<(w+1)/(w+g+2)?u*i.betacf(d,w,g)/w:1-u*i.betacf(1-d,g,w)/g},i.randn=function(d,w){var g,u,r,n,e;if(w||(w=d),d)return i.create(d,w,function(){return i.randn()});do g=i._random_fn(),u=1.7156*(i._random_fn()-.5),r=g-.449871,n=f.abs(u)+.386595,e=r*r+n*(.196*n-.25472*r);while(e>.27597&&(e>.27846||u*u>-4*f.log(g)*g*g));return u/g},i.randg=function(d,w,g){var u=d,r,n,e,o,t,l;if(g||(g=w),d||(d=1),w)return l=i.zeros(w,g),l.alter(function(){return i.randg(d)}),l;d<1&&(d+=1),r=d-1/3,n=1/f.sqrt(9*r);do{do t=i.randn(),o=1+n*t;while(o<=0);o=o*o*o,e=i._random_fn()}while(e>1-.331*f.pow(t,4)&&f.log(e)>.5*t*t+r*(1-o+f.log(o)));if(d==u)return r*o;do e=i._random_fn();while(e===0);return f.pow(e,1/u)*r*o},function(_){for(var d=0;d<_.length;d++)(function(w){i.fn[w]=function(){return i(i.map(this,function(g){return i[w](g)}))}})(_[d])}("gammaln gammafn factorial factorialln".split(" ")),function(_){for(var d=0;d<_.length;d++)(function(w){i.fn[w]=function(){return i(i[w].apply(null,arguments))}})(_[d])}("randn".split(" "))}(b,Math),function(i,f){(function(u){for(var r=0;r<u.length;r++)(function(n){i[n]=function e(o,t,l){return this instanceof e?(this._a=o,this._b=t,this._c=l,this):new e(o,t,l)},i.fn[n]=function(e,o,t){var l=i[n](e,o,t);return l.data=this,l},i[n].prototype.sample=function(e){var o=this._a,t=this._b,l=this._c;return e?i.alter(e,function(){return i[n].sample(o,t,l)}):i[n].sample(o,t,l)},function(e){for(var o=0;o<e.length;o++)(function(t){i[n].prototype[t]=function(l){var s=this._a,c=this._b,m=this._c;return!l&&l!==0&&(l=this.data),typeof l!="number"?i.fn.map.call(l,function(v){return i[n][t](v,s,c,m)}):i[n][t](l,s,c,m)}})(e[o])}("pdf cdf inv".split(" ")),function(e){for(var o=0;o<e.length;o++)(function(t){i[n].prototype[t]=function(){return i[n][t](this._a,this._b,this._c)}})(e[o])}("mean median mode variance".split(" "))})(u[r])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),i.extend(i.beta,{pdf:function(r,n,e){return r>1||r<0?0:n==1&&e==1?1:n<512&&e<512?f.pow(r,n-1)*f.pow(1-r,e-1)/i.betafn(n,e):f.exp((n-1)*f.log(r)+(e-1)*f.log(1-r)-i.betaln(n,e))},cdf:function(r,n,e){return r>1||r<0?(r>1)*1:i.ibeta(r,n,e)},inv:function(r,n,e){return i.ibetainv(r,n,e)},mean:function(r,n){return r/(r+n)},median:function(r,n){return i.ibetainv(.5,r,n)},mode:function(r,n){return(r-1)/(r+n-2)},sample:function(r,n){var e=i.randg(r);return e/(e+i.randg(n))},variance:function(r,n){return r*n/(f.pow(r+n,2)*(r+n+1))}}),i.extend(i.centralF,{pdf:function(r,n,e){var o,t,l;return r<0?0:n<=2?r===0&&n<2?1/0:r===0&&n===2?1:1/i.betafn(n/2,e/2)*f.pow(n/e,n/2)*f.pow(r,n/2-1)*f.pow(1+n/e*r,-(n+e)/2):(o=n*r/(e+r*n),t=e/(e+r*n),l=n*t/2,l*i.binomial.pdf((n-2)/2,(n+e-2)/2,o))},cdf:function(r,n,e){return r<0?0:i.ibeta(n*r/(n*r+e),n/2,e/2)},inv:function(r,n,e){return e/(n*(1/i.ibetainv(r,n/2,e/2)-1))},mean:function(r,n){return n>2?n/(n-2):void 0},mode:function(r,n){return r>2?n*(r-2)/(r*(n+2)):void 0},sample:function(r,n){var e=i.randg(r/2)*2,o=i.randg(n/2)*2;return e/r/(o/n)},variance:function(r,n){if(!(n<=4))return 2*n*n*(r+n-2)/(r*(n-2)*(n-2)*(n-4))}}),i.extend(i.cauchy,{pdf:function(r,n,e){return e<0?0:e/(f.pow(r-n,2)+f.pow(e,2))/f.PI},cdf:function(r,n,e){return f.atan((r-n)/e)/f.PI+.5},inv:function(u,r,n){return r+n*f.tan(f.PI*(u-.5))},median:function(r){return r},mode:function(r){return r},sample:function(r,n){return i.randn()*f.sqrt(1/(2*i.randg(.5)))*n+r}}),i.extend(i.chisquare,{pdf:function(r,n){return r<0?0:r===0&&n===2?.5:f.exp((n/2-1)*f.log(r)-r/2-n/2*f.log(2)-i.gammaln(n/2))},cdf:function(r,n){return r<0?0:i.lowRegGamma(n/2,r/2)},inv:function(u,r){return 2*i.gammapinv(u,.5*r)},mean:function(u){return u},median:function(r){return r*f.pow(1-2/(9*r),3)},mode:function(r){return r-2>0?r-2:0},sample:function(r){return i.randg(r/2)*2},variance:function(r){return 2*r}}),i.extend(i.exponential,{pdf:function(r,n){return r<0?0:n*f.exp(-n*r)},cdf:function(r,n){return r<0?0:1-f.exp(-n*r)},inv:function(u,r){return-f.log(1-u)/r},mean:function(u){return 1/u},median:function(u){return 1/u*f.log(2)},mode:function(){return 0},sample:function(r){return-1/r*f.log(i._random_fn())},variance:function(u){return f.pow(u,-2)}}),i.extend(i.gamma,{pdf:function(r,n,e){return r<0?0:r===0&&n===1?1/e:f.exp((n-1)*f.log(r)-r/e-i.gammaln(n)-n*f.log(e))},cdf:function(r,n,e){return r<0?0:i.lowRegGamma(n,r/e)},inv:function(u,r,n){return i.gammapinv(u,r)*n},mean:function(u,r){return u*r},mode:function(r,n){if(r>1)return(r-1)*n},sample:function(r,n){return i.randg(r)*n},variance:function(r,n){return r*n*n}}),i.extend(i.invgamma,{pdf:function(r,n,e){return r<=0?0:f.exp(-(n+1)*f.log(r)-e/r-i.gammaln(n)+n*f.log(e))},cdf:function(r,n,e){return r<=0?0:1-i.lowRegGamma(n,e/r)},inv:function(u,r,n){return n/i.gammapinv(1-u,r)},mean:function(u,r){return u>1?r/(u-1):void 0},mode:function(r,n){return n/(r+1)},sample:function(r,n){return n/i.randg(r)},variance:function(r,n){if(!(r<=2))return n*n/((r-1)*(r-1)*(r-2))}}),i.extend(i.kumaraswamy,{pdf:function(r,n,e){return r===0&&n===1?e:r===1&&e===1?n:f.exp(f.log(n)+f.log(e)+(n-1)*f.log(r)+(e-1)*f.log(1-f.pow(r,n)))},cdf:function(r,n,e){return r<0?0:r>1?1:1-f.pow(1-f.pow(r,n),e)},inv:function(r,n,e){return f.pow(1-f.pow(1-r,1/e),1/n)},mean:function(u,r){return r*i.gammafn(1+1/u)*i.gammafn(r)/i.gammafn(1+1/u+r)},median:function(r,n){return f.pow(1-f.pow(2,-1/n),1/r)},mode:function(r,n){if(r>=1&&n>=1&&r!==1&&n!==1)return f.pow((r-1)/(r*n-1),1/r)},variance:function(){throw new Error("variance not yet implemented")}}),i.extend(i.lognormal,{pdf:function(r,n,e){return r<=0?0:f.exp(-f.log(r)-.5*f.log(2*f.PI)-f.log(e)-f.pow(f.log(r)-n,2)/(2*e*e))},cdf:function(r,n,e){return r<0?0:.5+.5*i.erf((f.log(r)-n)/f.sqrt(2*e*e))},inv:function(u,r,n){return f.exp(-1.4142135623730951*n*i.erfcinv(2*u)+r)},mean:function(r,n){return f.exp(r+n*n/2)},median:function(r){return f.exp(r)},mode:function(r,n){return f.exp(r-n*n)},sample:function(r,n){return f.exp(i.randn()*n+r)},variance:function(r,n){return(f.exp(n*n)-1)*f.exp(2*r+n*n)}}),i.extend(i.noncentralt,{pdf:function(r,n,e){var o=1e-14;return f.abs(e)<o?i.studentt.pdf(r,n):f.abs(r)<o?f.exp(i.gammaln((n+1)/2)-e*e/2-.5*f.log(f.PI*n)-i.gammaln(n/2)):n/r*(i.noncentralt.cdf(r*f.sqrt(1+2/n),n+2,e)-i.noncentralt.cdf(r,n,e))},cdf:function(r,n,e){var o=1e-14,t=200;if(f.abs(e)<o)return i.studentt.cdf(r,n);var l=!1;r<0&&(l=!0,e=-e);for(var s=i.normal.cdf(-e,0,1),c=o+1,m=c,v=r*r/(r*r+n),a=0,p=f.exp(-e*e/2),y=f.exp(-e*e/2-.5*f.log(2)-i.gammaln(3/2))*e;a<t||m>o||c>o;)m=c,a>0&&(p*=e*e/(2*a),y*=e*e/(2*(a+1/2))),c=p*i.beta.cdf(v,a+.5,n/2)+y*i.beta.cdf(v,a+1,n/2),s+=.5*c,a++;return l?1-s:s}}),i.extend(i.normal,{pdf:function(r,n,e){return f.exp(-.5*f.log(2*f.PI)-f.log(e)-f.pow(r-n,2)/(2*e*e))},cdf:function(r,n,e){return .5*(1+i.erf((r-n)/f.sqrt(2*e*e)))},inv:function(u,r,n){return-1.4142135623730951*n*i.erfcinv(2*u)+r},mean:function(u){return u},median:function(r){return r},mode:function(u){return u},sample:function(r,n){return i.randn()*n+r},variance:function(u,r){return r*r}}),i.extend(i.pareto,{pdf:function(r,n,e){return r<n?0:e*f.pow(n,e)/f.pow(r,e+1)},cdf:function(r,n,e){return r<n?0:1-f.pow(n/r,e)},inv:function(r,n,e){return n/f.pow(1-r,1/e)},mean:function(r,n){if(!(n<=1))return n*f.pow(r,n)/(n-1)},median:function(r,n){return r*(n*f.SQRT2)},mode:function(r){return r},variance:function(u,r){if(!(r<=2))return u*u*r/(f.pow(r-1,2)*(r-2))}}),i.extend(i.studentt,{pdf:function(r,n){return n=n>1e100?1e100:n,1/(f.sqrt(n)*i.betafn(.5,n/2))*f.pow(1+r*r/n,-((n+1)/2))},cdf:function(r,n){var e=n/2;return i.ibeta((r+f.sqrt(r*r+n))/(2*f.sqrt(r*r+n)),e,e)},inv:function(u,r){var n=i.ibetainv(2*f.min(u,1-u),.5*r,.5);return n=f.sqrt(r*(1-n)/n),u>.5?n:-n},mean:function(r){return r>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(r){return i.randn()*f.sqrt(r/(2*i.randg(r/2)))},variance:function(r){return r>2?r/(r-2):r>1?1/0:void 0}}),i.extend(i.weibull,{pdf:function(r,n,e){return r<0||n<0||e<0?0:e/n*f.pow(r/n,e-1)*f.exp(-f.pow(r/n,e))},cdf:function(r,n,e){return r<0?0:1-f.exp(-f.pow(r/n,e))},inv:function(u,r,n){return r*f.pow(-f.log(1-u),1/n)},mean:function(u,r){return u*i.gammafn(1+1/r)},median:function(r,n){return r*f.pow(f.log(2),1/n)},mode:function(r,n){return n<=1?0:r*f.pow((n-1)/n,1/n)},sample:function(r,n){return r*f.pow(-f.log(i._random_fn()),1/n)},variance:function(r,n){return r*r*i.gammafn(1+2/n)-f.pow(i.weibull.mean(r,n),2)}}),i.extend(i.uniform,{pdf:function(r,n,e){return r<n||r>e?0:1/(e-n)},cdf:function(r,n,e){return r<n?0:r<e?(r-n)/(e-n):1},inv:function(u,r,n){return r+u*(n-r)},mean:function(r,n){return .5*(r+n)},median:function(r,n){return i.mean(r,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(r,n){return r/2+n/2+(n/2-r/2)*(2*i._random_fn()-1)},variance:function(r,n){return f.pow(n-r,2)/12}});function _(u,r,n,e){for(var o=0,t=1,l=1,s=1,c=0,m=0,v;f.abs((l-m)/l)>e;)m=l,v=-(r+c)*(r+n+c)*u/(r+2*c)/(r+2*c+1),o=l+v*o,t=s+v*t,c=c+1,v=c*(n-c)*u/(r+2*c-1)/(r+2*c),l=o+v*l,s=t+v*s,o=o/s,t=t/s,l=l/s,s=1;return l/r}i.extend(i.binomial,{pdf:function(r,n,e){return e===0||e===1?n*e===r?1:0:i.combination(n,r)*f.pow(e,r)*f.pow(1-e,n-r)},cdf:function(r,n,e){var o,t=1e-10;if(r<0)return 0;if(r>=n)return 1;if(e<0||e>1||n<=0)return NaN;r=f.floor(r);var l=e,s=r+1,c=n-r,m=s+c,v=f.exp(i.gammaln(m)-i.gammaln(c)-i.gammaln(s)+s*f.log(l)+c*f.log(1-l));return l<(s+1)/(m+2)?o=v*_(l,s,c,t):o=1-v*_(1-l,c,s,t),f.round((1-o)*(1/t))/(1/t)}}),i.extend(i.negbin,{pdf:function(r,n,e){return r!==r>>>0?!1:r<0?0:i.combination(r+n-1,n-1)*f.pow(1-e,r)*f.pow(e,n)},cdf:function(r,n,e){var o=0,t=0;if(r<0)return 0;for(;t<=r;t++)o+=i.negbin.pdf(t,n,e);return o}}),i.extend(i.hypgeom,{pdf:function(r,n,e,o){if(r!==r|0)return!1;if(r<0||r<e-(n-o))return 0;if(r>o||r>e)return 0;if(e*2>n)return o*2>n?i.hypgeom.pdf(n-e-o+r,n,n-e,n-o):i.hypgeom.pdf(o-r,n,n-e,o);if(o*2>n)return i.hypgeom.pdf(e-r,n,e,n-o);if(e<o)return i.hypgeom.pdf(r,n,o,e);for(var t=1,l=0,s=0;s<r;s++){for(;t>1&&l<o;)t*=1-e/(n-l),l++;t*=(o-s)*(e-s)/((s+1)*(n-e-o+s+1))}for(;l<o;l++)t*=1-e/(n-l);return f.min(1,f.max(0,t))},cdf:function(r,n,e,o){if(r<0||r<e-(n-o))return 0;if(r>=o||r>=e)return 1;if(e*2>n)return o*2>n?i.hypgeom.cdf(n-e-o+r,n,n-e,n-o):1-i.hypgeom.cdf(o-r-1,n,n-e,o);if(o*2>n)return 1-i.hypgeom.cdf(e-r-1,n,e,n-o);if(e<o)return i.hypgeom.cdf(r,n,o,e);for(var t=1,l=1,s=0,c=0;c<r;c++){for(;t>1&&s<o;){var m=1-e/(n-s);l*=m,t*=m,s++}l*=(o-c)*(e-c)/((c+1)*(n-e-o+c+1)),t+=l}for(;s<o;s++)t*=1-e/(n-s);return f.min(1,f.max(0,t))}}),i.extend(i.poisson,{pdf:function(r,n){return n<0||r%1!==0||r<0?0:f.pow(n,r)*f.exp(-n)/i.factorial(r)},cdf:function(r,n){var e=[],o=0;if(r<0)return 0;for(;o<=r;o++)e.push(i.poisson.pdf(o,n));return i.sum(e)},mean:function(u){return u},variance:function(u){return u},sampleSmall:function(r){var n=1,e=0,o=f.exp(-r);do e++,n*=i._random_fn();while(n>o);return e-1},sampleLarge:function(r){var n=r,e,o,t,l,s,c,m,v,a,p;for(l=f.sqrt(n),s=f.log(n),m=.931+2.53*l,c=-.059+.02483*m,v=1.1239+1.1328/(m-3.4),a=.9277-3.6224/(m-2);;){if(o=f.random()-.5,t=f.random(),p=.5-f.abs(o),e=f.floor((2*c/p+m)*o+n+.43),p>=.07&&t<=a)return e;if(!(e<0||p<.013&&t>p)&&f.log(t)+f.log(v)-f.log(c/(p*p)+m)<=-n+e*s-i.loggam(e+1))return e}},sample:function(r){return r<10?this.sampleSmall(r):this.sampleLarge(r)}}),i.extend(i.triangular,{pdf:function(r,n,e,o){return e<=n||o<n||o>e?NaN:r<n||r>e?0:r<o?2*(r-n)/((e-n)*(o-n)):r===o?2/(e-n):2*(e-r)/((e-n)*(e-o))},cdf:function(r,n,e,o){return e<=n||o<n||o>e?NaN:r<=n?0:r>=e?1:r<=o?f.pow(r-n,2)/((e-n)*(o-n)):1-f.pow(e-r,2)/((e-n)*(e-o))},inv:function(r,n,e,o){return e<=n||o<n||o>e?NaN:r<=(o-n)/(e-n)?n+(e-n)*f.sqrt(r*((o-n)/(e-n))):n+(e-n)*(1-f.sqrt((1-r)*(1-(o-n)/(e-n))))},mean:function(r,n,e){return(r+n+e)/3},median:function(r,n,e){if(e<=(r+n)/2)return n-f.sqrt((n-r)*(n-e))/f.sqrt(2);if(e>(r+n)/2)return r+f.sqrt((n-r)*(e-r))/f.sqrt(2)},mode:function(r,n,e){return e},sample:function(r,n,e){var o=i._random_fn();return o<(e-r)/(n-r)?r+f.sqrt(o*(n-r)*(e-r)):n-f.sqrt((1-o)*(n-r)*(n-e))},variance:function(r,n,e){return(r*r+n*n+e*e-r*n-r*e-n*e)/18}}),i.extend(i.arcsine,{pdf:function(r,n,e){return e<=n?NaN:r<=n||r>=e?0:2/f.PI*f.pow(f.pow(e-n,2)-f.pow(2*r-n-e,2),-.5)},cdf:function(r,n,e){return r<n?0:r<e?2/f.PI*f.asin(f.sqrt((r-n)/(e-n))):1},inv:function(u,r,n){return r+(.5-.5*f.cos(f.PI*u))*(n-r)},mean:function(r,n){return n<=r?NaN:(r+n)/2},median:function(r,n){return n<=r?NaN:(r+n)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(r,n){return(r+n)/2+(n-r)/2*f.sin(2*f.PI*i.uniform.sample(0,1))},variance:function(r,n){return n<=r?NaN:f.pow(n-r,2)/8}});function d(u){return u/f.abs(u)}i.extend(i.laplace,{pdf:function(r,n,e){return e<=0?0:f.exp(-f.abs(r-n)/e)/(2*e)},cdf:function(r,n,e){return e<=0?0:r<n?.5*f.exp((r-n)/e):1-.5*f.exp(-(r-n)/e)},mean:function(u){return u},median:function(u){return u},mode:function(u){return u},variance:function(u,r){return 2*r*r},sample:function(r,n){var e=i._random_fn()-.5;return r-n*d(e)*f.log(1-2*f.abs(e))}});function w(u,r,n){var e=12,o=6,t=-30,l=-50,s=60,c=8,m=3,v=2,a=3,p=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],y=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],q=u*.5;if(q>=c)return 1;var h=2*i.normal.cdf(q,0,1,1,0)-1;h>=f.exp(l/n)?h=f.pow(h,n):h=0;var D;u>m?D=v:D=a;for(var R=q,x=(c-q)/D,P=R+x,z=0,E=n-1,V=1;V<=D;V++){for(var C=0,I=.5*(P+R),G=.5*(P-R),O=1;O<=e;O++){var T,L;o<O?(T=e-O+1,L=p[T-1]):(T=O,L=-p[T-1]);var N=G*L,k=I+N,Q=k*k;if(Q>s)break;var U=2*i.normal.cdf(k,0,1,1,0),H=2*i.normal.cdf(k,u,1,1,0),F=U*.5-H*.5;F>=f.exp(t/E)&&(F=y[T-1]*f.exp(-(.5*Q))*f.pow(F,E),C+=F)}C*=2*G*n/f.sqrt(2*f.PI),z+=C,R=P,P+=x}return h+=z,h<=f.exp(t/r)?0:(h=f.pow(h,r),h>=1?1:h)}function g(u,r,n){var e=.322232421088,o=.099348462606,t=-1,l=.588581570495,s=-.342242088547,c=.531103462366,m=-.204231210125,v=.10353775285,a=-453642210148e-16,p=.0038560700634,y=.8832,q=.2368,h=1.214,D=1.208,R=1.4142,x=120,P=.5-.5*u,z=f.sqrt(f.log(1/(P*P))),E=z+((((z*a+m)*z+s)*z+t)*z+e)/((((z*p+v)*z+c)*z+l)*z+o);n<x&&(E+=(E*E*E+E)/n/4);var V=y-q*E;return n<x&&(V+=-h/n+D*E/n),E*(V*f.log(r-1)+R)}i.extend(i.tukey,{cdf:function(r,n,e){var o=1,t=n,l=16,s=8,c=-30,m=1e-14,v=100,a=800,p=5e3,y=25e3,q=1,h=.5,D=.25,R=.125,x=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],P=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(r<=0)return 0;if(e<2||o<1||t<2)return NaN;if(!Number.isFinite(r))return 1;if(e>y)return w(r,o,t);var z=e*.5,E=z*f.log(e)-e*f.log(2)-i.gammaln(z),V=z-1,C=e*.25,I;e<=v?I=q:e<=a?I=h:e<=p?I=D:I=R,E+=f.log(I);for(var G=0,O=1;O<=50;O++){for(var T=0,L=(2*O-1)*I,N=1;N<=l;N++){var k,Q;s<N?(k=N-s-1,Q=E+V*f.log(L+x[k]*I)-(x[k]*I+L)*C):(k=N-1,Q=E+V*f.log(L-x[k]*I)+(x[k]*I-L)*C);var U;if(Q>=c){s<N?U=r*f.sqrt((x[k]*I+L)*.5):U=r*f.sqrt((-(x[k]*I)+L)*.5);var H=w(U,o,t),F=H*P[k]*f.exp(Q);T+=F}}if(O*I>=1&&T<=m)break;G+=T}if(T>m)throw new Error("tukey.cdf failed to converge");return G>1&&(G=1),G},inv:function(u,r,n){var e=1,o=r,t=1e-4,l=50;if(n<2||e<1||o<2)return NaN;if(u<0||u>1)return NaN;if(u===0)return 0;if(u===1)return 1/0;var s=g(u,o,n),c=i.tukey.cdf(s,r,n)-u,m;c>0?m=f.max(0,s-1):m=s+1;for(var v=i.tukey.cdf(m,r,n)-u,a,p=1;p<l;p++){a=m-v*(m-s)/(v-c),c=v,s=m,a<0&&(a=0,v=-u),v=i.tukey.cdf(a,r,n)-u,m=a;var y=f.abs(m-s);if(y<t)return a}throw new Error("tukey.inv failed to converge")}})}(b,Math),function(i,f){var _=Array.prototype.push,d=i.utils.isArray;function w(g){return d(g)||g instanceof i}i.extend({add:function(u,r){return w(r)?(w(r[0])||(r=[r]),i.map(u,function(n,e,o){return n+r[e][o]})):i.map(u,function(n){return n+r})},subtract:function(u,r){return w(r)?(w(r[0])||(r=[r]),i.map(u,function(n,e,o){return n-r[e][o]||0})):i.map(u,function(n){return n-r})},divide:function(u,r){return w(r)?(w(r[0])||(r=[r]),i.multiply(u,i.inv(r))):i.map(u,function(n){return n/r})},multiply:function(u,r){var n,e,o,t,l,s,c,m;if(u.length===void 0&&r.length===void 0)return u*r;if(l=u.length,s=u[0].length,c=i.zeros(l,o=w(r)?r[0].length:s),m=0,w(r)){for(;m<o;m++)for(n=0;n<l;n++){for(t=0,e=0;e<s;e++)t+=u[n][e]*r[e][m];c[n][m]=t}return l===1&&m===1?c[0][0]:c}return i.map(u,function(v){return v*r})},outer:function(u,r){return i.multiply(u.map(function(n){return[n]}),[r])},dot:function(u,r){w(u[0])||(u=[u]),w(r[0])||(r=[r]);for(var n=u[0].length===1&&u.length!==1?i.transpose(u):u,e=r[0].length===1&&r.length!==1?i.transpose(r):r,o=[],t=0,l=n.length,s=n[0].length,c,m;t<l;t++){for(o[t]=[],c=0,m=0;m<s;m++)c+=n[t][m]*e[t][m];o[t]=c}return o.length===1?o[0]:o},pow:function(u,r){return i.map(u,function(n){return f.pow(n,r)})},exp:function(u){return i.map(u,function(r){return f.exp(r)})},log:function(u){return i.map(u,function(r){return f.log(r)})},abs:function(u){return i.map(u,function(r){return f.abs(r)})},norm:function(u,r){var n=0,e=0;for(isNaN(r)&&(r=2),w(u[0])&&(u=u[0]);e<u.length;e++)n+=f.pow(f.abs(u[e]),r);return f.pow(n,1/r)},angle:function(u,r){return f.acos(i.dot(u,r)/(i.norm(u)*i.norm(r)))},aug:function(u,r){var n=[],e;for(e=0;e<u.length;e++)n.push(u[e].slice());for(e=0;e<n.length;e++)_.apply(n[e],r[e]);return n},inv:function(u){for(var r=u.length,n=u[0].length,e=i.identity(r,n),o=i.gauss_jordan(u,e),t=[],l=0,s;l<r;l++)for(t[l]=[],s=n;s<o[0].length;s++)t[l][s-n]=o[l][s];return t},det:function g(u){if(u.length===2)return u[0][0]*u[1][1]-u[0][1]*u[1][0];for(var r=0,n=0;n<u.length;n++){for(var e=[],o=1;o<u.length;o++){e[o-1]=[];for(var t=0;t<u.length;t++)t<n?e[o-1][t]=u[o][t]:t>n&&(e[o-1][t-1]=u[o][t])}var l=n%2?-1:1;r+=g(e)*u[0][n]*l}return r},gauss_elimination:function(u,r){var n=0,e=0,o=u.length,t=u[0].length,l=1,s=0,c=[],m,v,a,p;for(u=i.aug(u,r),m=u[0].length,n=0;n<o;n++){for(v=u[n][n],e=n,p=n+1;p<t;p++)v<f.abs(u[p][n])&&(v=u[p][n],e=p);if(e!=n)for(p=0;p<m;p++)a=u[n][p],u[n][p]=u[e][p],u[e][p]=a;for(e=n+1;e<o;e++)for(l=u[e][n]/u[n][n],p=n;p<m;p++)u[e][p]=u[e][p]-l*u[n][p]}for(n=o-1;n>=0;n--){for(s=0,e=n+1;e<=o-1;e++)s=s+c[e]*u[n][e];c[n]=(u[n][m-1]-s)/u[n][n]}return c},gauss_jordan:function(u,r){var n=i.aug(u,r),e=n.length,o=n[0].length,t=0,l,s,c;for(s=0;s<e;s++){var m=s;for(c=s+1;c<e;c++)f.abs(n[c][s])>f.abs(n[m][s])&&(m=c);var v=n[s];for(n[s]=n[m],n[m]=v,c=s+1;c<e;c++)for(t=n[c][s]/n[s][s],l=s;l<o;l++)n[c][l]-=n[s][l]*t}for(s=e-1;s>=0;s--){for(t=n[s][s],c=0;c<s;c++)for(l=o-1;l>s-1;l--)n[c][l]-=n[s][l]*n[c][s]/t;for(n[s][s]/=t,l=e;l<o;l++)n[s][l]/=t}return n},triaUpSolve:function(u,r){var n=u[0].length,e=i.zeros(1,n)[0],o,t=!1;return r[0].length!=null&&(r=r.map(function(l){return l[0]}),t=!0),i.arange(n-1,-1,-1).forEach(function(l){o=i.arange(l+1,n).map(function(s){return e[s]*u[l][s]}),e[l]=(r[l]-i.sum(o))/u[l][l]}),t?e.map(function(l){return[l]}):e},triaLowSolve:function(u,r){var n=u[0].length,e=i.zeros(1,n)[0],o,t=!1;return r[0].length!=null&&(r=r.map(function(l){return l[0]}),t=!0),i.arange(n).forEach(function(l){o=i.arange(l).map(function(s){return u[l][s]*e[s]}),e[l]=(r[l]-i.sum(o))/u[l][l]}),t?e.map(function(l){return[l]}):e},lu:function(u){var r=u.length,n=i.identity(r),e=i.zeros(u.length,u[0].length),o;return i.arange(r).forEach(function(t){e[0][t]=u[0][t]}),i.arange(1,r).forEach(function(t){i.arange(t).forEach(function(l){o=i.arange(l).map(function(s){return n[t][s]*e[s][l]}),n[t][l]=(u[t][l]-i.sum(o))/e[l][l]}),i.arange(t,r).forEach(function(l){o=i.arange(t).map(function(s){return n[t][s]*e[s][l]}),e[t][l]=u[o.length][l]-i.sum(o)})}),[n,e]},cholesky:function(u){var r=u.length,n=i.zeros(u.length,u[0].length),e;return i.arange(r).forEach(function(o){e=i.arange(o).map(function(t){return f.pow(n[o][t],2)}),n[o][o]=f.sqrt(u[o][o]-i.sum(e)),i.arange(o+1,r).forEach(function(t){e=i.arange(o).map(function(l){return n[o][l]*n[t][l]}),n[t][o]=(u[o][t]-i.sum(e))/n[o][o]})}),n},gauss_jacobi:function(u,r,n,e){for(var o=0,t=0,l=u.length,s=[],c=[],m=[],v,a,p,y;o<l;o++)for(s[o]=[],c[o]=[],m[o]=[],t=0;t<l;t++)o>t?(s[o][t]=u[o][t],c[o][t]=m[o][t]=0):o<t?(c[o][t]=u[o][t],s[o][t]=m[o][t]=0):(m[o][t]=u[o][t],s[o][t]=c[o][t]=0);for(p=i.multiply(i.multiply(i.inv(m),i.add(s,c)),-1),a=i.multiply(i.inv(m),r),v=n,y=i.add(i.multiply(p,n),a),o=2;f.abs(i.norm(i.subtract(y,v)))>e;)v=y,y=i.add(i.multiply(p,v),a),o++;return y},gauss_seidel:function(u,r,n,e){for(var o=0,t=u.length,l=[],s=[],c=[],m,v,a,p,y;o<t;o++)for(l[o]=[],s[o]=[],c[o]=[],m=0;m<t;m++)o>m?(l[o][m]=u[o][m],s[o][m]=c[o][m]=0):o<m?(s[o][m]=u[o][m],l[o][m]=c[o][m]=0):(c[o][m]=u[o][m],l[o][m]=s[o][m]=0);for(p=i.multiply(i.multiply(i.inv(i.add(c,l)),s),-1),a=i.multiply(i.inv(i.add(c,l)),r),v=n,y=i.add(i.multiply(p,n),a),o=2;f.abs(i.norm(i.subtract(y,v)))>e;)v=y,y=i.add(i.multiply(p,v),a),o=o+1;return y},SOR:function(u,r,n,e,o){for(var t=0,l=u.length,s=[],c=[],m=[],v,a,p,y,q;t<l;t++)for(s[t]=[],c[t]=[],m[t]=[],v=0;v<l;v++)t>v?(s[t][v]=u[t][v],c[t][v]=m[t][v]=0):t<v?(c[t][v]=u[t][v],s[t][v]=m[t][v]=0):(m[t][v]=u[t][v],s[t][v]=c[t][v]=0);for(y=i.multiply(i.inv(i.add(m,i.multiply(s,o))),i.subtract(i.multiply(m,1-o),i.multiply(c,o))),p=i.multiply(i.multiply(i.inv(i.add(m,i.multiply(s,o))),r),o),a=n,q=i.add(i.multiply(y,n),p),t=2;f.abs(i.norm(i.subtract(q,a)))>e;)a=q,q=i.add(i.multiply(y,a),p),t++;return q},householder:function(u){for(var r=u.length,n=u[0].length,e=0,o=[],t=[],l,s,c,m,v;e<r-1;e++){for(l=0,m=e+1;m<n;m++)l+=u[m][e]*u[m][e];for(v=u[e+1][e]>0?-1:1,l=v*f.sqrt(l),s=f.sqrt((l*l-u[e+1][e]*l)/2),o=i.zeros(r,1),o[e+1][0]=(u[e+1][e]-l)/(2*s),c=e+2;c<r;c++)o[c][0]=u[c][e]/(2*s);t=i.subtract(i.identity(r,n),i.multiply(i.multiply(o,i.transpose(o)),2)),u=i.multiply(t,i.multiply(u,t))}return u},QR:function(){var g=i.sum,u=i.arange;function r(n){var e=n.length,o=n[0].length,t=i.zeros(o,o);n=i.copy(n);var l,s,c;for(s=0;s<o;s++){for(t[s][s]=f.sqrt(g(u(e).map(function(m){return n[m][s]*n[m][s]}))),l=0;l<e;l++)n[l][s]=n[l][s]/t[s][s];for(c=s+1;c<o;c++)for(t[s][c]=g(u(e).map(function(m){return n[m][s]*n[m][c]})),l=0;l<e;l++)n[l][c]=n[l][c]-n[l][s]*t[s][c]}return[n,t]}return r}(),lstsq:function(){function g(r){r=i.copy(r);var n=r.length,e=i.identity(n);return i.arange(n-1,-1,-1).forEach(function(o){i.sliceAssign(e,{row:o},i.divide(i.slice(e,{row:o}),r[o][o])),i.sliceAssign(r,{row:o},i.divide(i.slice(r,{row:o}),r[o][o])),i.arange(o).forEach(function(t){var l=i.multiply(r[t][o],-1),s=i.slice(r,{row:t}),c=i.multiply(i.slice(r,{row:o}),l);i.sliceAssign(r,{row:t},i.add(s,c));var m=i.slice(e,{row:t}),v=i.multiply(i.slice(e,{row:o}),l);i.sliceAssign(e,{row:t},i.add(m,v))})}),e}function u(r,n){var e=!1;n[0].length===void 0&&(n=n.map(function(y){return[y]}),e=!0);var o=i.QR(r),t=o[0],l=o[1],s=r[0].length,c=i.slice(t,{col:{end:s}}),m=i.slice(l,{row:{end:s}}),v=g(m),a=i.transpose(c);a[0].length===void 0&&(a=[a]);var p=i.multiply(i.multiply(v,a),n);return p.length===void 0&&(p=[[p]]),e?p.map(function(y){return y[0]}):p}return u}(),jacobi:function(u){for(var r=1,n=u.length,e=i.identity(n,n),o=[],t,l,s,c,m,v,a,p;r===1;){for(v=u[0][1],c=0,m=1,l=0;l<n;l++)for(s=0;s<n;s++)l!=s&&v<f.abs(u[l][s])&&(v=f.abs(u[l][s]),c=l,m=s);for(u[c][c]===u[m][m]?a=u[c][m]>0?f.PI/4:-f.PI/4:a=f.atan(2*u[c][m]/(u[c][c]-u[m][m]))/2,p=i.identity(n,n),p[c][c]=f.cos(a),p[c][m]=-f.sin(a),p[m][c]=f.sin(a),p[m][m]=f.cos(a),e=i.multiply(e,p),t=i.multiply(i.multiply(i.inv(p),u),p),u=t,r=0,l=1;l<n;l++)for(s=1;s<n;s++)l!=s&&f.abs(u[l][s])>.001&&(r=1)}for(l=0;l<n;l++)o.push(u[l][l]);return[e,o]},rungekutta:function(u,r,n,e,o,t){var l,s,c,m,v;if(t===2)for(;e<=n;)l=r*u(e,o),s=r*u(e+r,o+l),c=o+(l+s)/2,o=c,e=e+r;if(t===4)for(;e<=n;)l=r*u(e,o),s=r*u(e+r/2,o+l/2),m=r*u(e+r/2,o+s/2),v=r*u(e+r,o+m),c=o+(l+2*s+2*m+v)/6,o=c,e=e+r;return o},romberg:function(u,r,n,e){for(var o=0,t=(n-r)/2,l=[],s=[],c=[],m,v,a,p,y;o<e/2;){for(y=u(r),a=r,p=0;a<=n;a=a+t,p++)l[p]=a;for(m=l.length,a=1;a<m-1;a++)y+=(a%2!==0?4:2)*u(l[a]);y=t/3*(y+u(n)),c[o]=y,t/=2,o++}for(v=c.length,m=1;v!==1;){for(a=0;a<v-1;a++)s[a]=(f.pow(4,m)*c[a+1]-c[a])/(f.pow(4,m)-1);v=s.length,c=s,s=[],m++}return c},richardson:function(u,r,n,e){function o(q,h){for(var D=0,R=q.length,x;D<R;D++)q[D]===h&&(x=D);return x}for(var t=f.abs(n-u[o(u,n)+1]),l=0,s=[],c=[],m,v,a,p,y;e>=t;)m=o(u,n+e),v=o(u,n),s[l]=(r[m]-2*r[v]+r[2*v-m])/(e*e),e/=2,l++;for(p=s.length,a=1;p!=1;){for(y=0;y<p-1;y++)c[y]=(f.pow(4,a)*s[y+1]-s[y])/(f.pow(4,a)-1);p=c.length,s=c,c=[],a++}return s},simpson:function(u,r,n,e){for(var o=(n-r)/e,t=u(r),l=[],s=r,c=0,m=1,v;s<=n;s=s+o,c++)l[c]=s;for(v=l.length;m<v-1;m++)t+=(m%2!==0?4:2)*u(l[m]);return o/3*(t+u(n))},hermite:function(u,r,n,e){for(var o=u.length,t=0,l=0,s=[],c=[],m=[],v=[],a;l<o;l++){for(s[l]=1,a=0;a<o;a++)l!=a&&(s[l]*=(e-u[a])/(u[l]-u[a]));for(c[l]=0,a=0;a<o;a++)l!=a&&(c[l]+=1/(u[l]-u[a]));m[l]=(1-2*(e-u[l])*c[l])*(s[l]*s[l]),v[l]=(e-u[l])*(s[l]*s[l]),t+=m[l]*r[l]+v[l]*n[l]}return t},lagrange:function(u,r,n){for(var e=0,o=0,t,l,s=u.length;o<s;o++){for(l=r[o],t=0;t<s;t++)o!=t&&(l*=(n-u[t])/(u[o]-u[t]));e+=l}return e},cubic_spline:function(u,r,n){for(var e=u.length,o=0,t,l=[],s=[],c=[],m=[],v=[],a=[],p=[];o<e-1;o++)v[o]=u[o+1]-u[o];for(c[0]=0,o=1;o<e-1;o++)c[o]=3/v[o]*(r[o+1]-r[o])-3/v[o-1]*(r[o]-r[o-1]);for(o=1;o<e-1;o++)l[o]=[],s[o]=[],l[o][o-1]=v[o-1],l[o][o]=2*(v[o-1]+v[o]),l[o][o+1]=v[o],s[o][0]=c[o];for(m=i.multiply(i.inv(l),s),t=0;t<e-1;t++)a[t]=(r[t+1]-r[t])/v[t]-v[t]*(m[t+1][0]+2*m[t][0])/3,p[t]=(m[t+1][0]-m[t][0])/(3*v[t]);for(t=0;t<e&&!(u[t]>n);t++);return t-=1,r[t]+(n-u[t])*a[t]+i.sq(n-u[t])*m[t]+(n-u[t])*i.sq(n-u[t])*p[t]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var r=u.length,n=u[0].length,e=0,o,t,l=[],s=[],c=[],m=[],v=[],a=[],p=[],y=[],q=[],h=[];for(e=0;e<r;e++)l[e]=i.sum(u[e])/n;for(e=0;e<n;e++)for(p[e]=[],o=0;o<r;o++)p[e][o]=u[o][e]-l[o];for(p=i.transpose(p),e=0;e<r;e++)for(y[e]=[],o=0;o<r;o++)y[e][o]=i.dot([p[e]],[p[o]])/(n-1);for(c=i.jacobi(y),q=c[0],s=c[1],h=i.transpose(q),e=0;e<s.length;e++)for(o=e;o<s.length;o++)s[e]<s[o]&&(t=s[e],s[e]=s[o],s[o]=t,m=h[e],h[e]=h[o],h[o]=m);for(a=i.transpose(p),e=0;e<r;e++)for(v[e]=[],o=0;o<a.length;o++)v[e][o]=i.dot([h[e]],[a[o]]);return[u,s,h,v]}}),function(g){for(var u=0;u<g.length;u++)(function(r){i.fn[r]=function(n,e){var o=this;return e?(setTimeout(function(){e.call(o,i.fn[r].call(o,n))},15),this):typeof i[r](this,n)=="number"?i[r](this,n):i(i[r](this,n))}})(g[u])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(b,Math),function(i,f){var _=[].slice,d=i.utils.isNumber,w=i.utils.isArray;i.extend({zscore:function(){var r=_.call(arguments);return d(r[1])?(r[0]-r[1])/r[2]:(r[0]-i.mean(r[1]))/i.stdev(r[1],r[2])},ztest:function(){var r=_.call(arguments),n;return w(r[1])?(n=i.zscore(r[0],r[1],r[3]),r[2]===1?i.normal.cdf(-f.abs(n),0,1):i.normal.cdf(-f.abs(n),0,1)*2):r.length>2?(n=i.zscore(r[0],r[1],r[2]),r[3]===1?i.normal.cdf(-f.abs(n),0,1):i.normal.cdf(-f.abs(n),0,1)*2):(n=r[0],r[1]===1?i.normal.cdf(-f.abs(n),0,1):i.normal.cdf(-f.abs(n),0,1)*2)}}),i.extend(i.fn,{zscore:function(r,n){return(r-this.mean())/this.stdev(n)},ztest:function(r,n,e){var o=f.abs(this.zscore(r,e));return n===1?i.normal.cdf(-o,0,1):i.normal.cdf(-o,0,1)*2}}),i.extend({tscore:function(){var r=_.call(arguments);return r.length===4?(r[0]-r[1])/(r[2]/f.sqrt(r[3])):(r[0]-i.mean(r[1]))/(i.stdev(r[1],!0)/f.sqrt(r[1].length))},ttest:function(){var r=_.call(arguments),n;return r.length===5?(n=f.abs(i.tscore(r[0],r[1],r[2],r[3])),r[4]===1?i.studentt.cdf(-n,r[3]-1):i.studentt.cdf(-n,r[3]-1)*2):d(r[1])?(n=f.abs(r[0]),r[2]==1?i.studentt.cdf(-n,r[1]-1):i.studentt.cdf(-n,r[1]-1)*2):(n=f.abs(i.tscore(r[0],r[1])),r[2]==1?i.studentt.cdf(-n,r[1].length-1):i.studentt.cdf(-n,r[1].length-1)*2)}}),i.extend(i.fn,{tscore:function(r){return(r-this.mean())/(this.stdev(!0)/f.sqrt(this.cols()))},ttest:function(r,n){return n===1?1-i.studentt.cdf(f.abs(this.tscore(r)),this.cols()-1):i.studentt.cdf(-f.abs(this.tscore(r)),this.cols()-1)*2}}),i.extend({anovafscore:function(){var r=_.call(arguments),n,e,o,t,l,s,c,m;if(r.length===1){for(l=new Array(r[0].length),c=0;c<r[0].length;c++)l[c]=r[0][c];r=l}for(e=new Array,c=0;c<r.length;c++)e=e.concat(r[c]);for(o=i.mean(e),n=0,c=0;c<r.length;c++)n=n+r[c].length*f.pow(i.mean(r[c])-o,2);for(n/=r.length-1,s=0,c=0;c<r.length;c++)for(t=i.mean(r[c]),m=0;m<r[c].length;m++)s+=f.pow(r[c][m]-t,2);return s/=e.length-r.length,n/s},anovaftest:function(){var r=_.call(arguments),n,e,o,t;if(d(r[0]))return 1-i.centralF.cdf(r[0],r[1],r[2]);var l=i.anovafscore(r);for(n=r.length-1,o=0,t=0;t<r.length;t++)o=o+r[t].length;return e=o-n-1,1-i.centralF.cdf(l,n,e)},ftest:function(r,n,e){return 1-i.centralF.cdf(r,n,e)}}),i.extend(i.fn,{anovafscore:function(){return i.anovafscore(this.toArray())},anovaftes:function(){var r=0,n;for(n=0;n<this.length;n++)r=r+this[n].length;return i.ftest(this.anovafscore(),this.length-1,r-this.length)}}),i.extend({qscore:function(){var r=_.call(arguments),n,e,o,t,l;return d(r[0])?(n=r[0],e=r[1],o=r[2],t=r[3],l=r[4]):(n=i.mean(r[0]),e=i.mean(r[1]),o=r[0].length,t=r[1].length,l=r[2]),f.abs(n-e)/(l*f.sqrt((1/o+1/t)/2))},qtest:function(){var r=_.call(arguments),n;r.length===3?(n=r[0],r=r.slice(1)):r.length===7?(n=i.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(n=i.qscore(r[0],r[1],r[2]),r=r.slice(3));var e=r[0],o=r[1];return 1-i.tukey.cdf(n,o,e-o)},tukeyhsd:function(r){for(var n=i.pooledstdev(r),e=r.map(function(m){return i.mean(m)}),o=r.reduce(function(m,v){return m+v.length},0),t=[],l=0;l<r.length;++l)for(var s=l+1;s<r.length;++s){var c=i.qtest(e[l],e[s],r[l].length,r[s].length,n,o,r.length);t.push([[l,s],c])}return t}}),i.extend({normalci:function(){var r=_.call(arguments),n=new Array(2),e;return r.length===4?e=f.abs(i.normal.inv(r[1]/2,0,1)*r[2]/f.sqrt(r[3])):e=f.abs(i.normal.inv(r[1]/2,0,1)*i.stdev(r[2])/f.sqrt(r[2].length)),n[0]=r[0]-e,n[1]=r[0]+e,n},tci:function(){var r=_.call(arguments),n=new Array(2),e;return r.length===4?e=f.abs(i.studentt.inv(r[1]/2,r[3]-1)*r[2]/f.sqrt(r[3])):e=f.abs(i.studentt.inv(r[1]/2,r[2].length-1)*i.stdev(r[2],!0)/f.sqrt(r[2].length)),n[0]=r[0]-e,n[1]=r[0]+e,n},significant:function(r,n){return r<n}}),i.extend(i.fn,{normalci:function(r,n){return i.normalci(r,n,this.toArray())},tci:function(r,n){return i.tci(r,n,this.toArray())}});function g(u,r,n,e){if(u>1||n>1||u<=0||n<=0)throw new Error("Proportions should be greater than 0 and less than 1");var o=(u*r+n*e)/(r+e),t=f.sqrt(o*(1-o)*(1/r+1/e));return(u-n)/t}i.extend(i.fn,{oneSidedDifferenceOfProportions:function(r,n,e,o){var t=g(r,n,e,o);return i.ztest(t,1)},twoSidedDifferenceOfProportions:function(r,n,e,o){var t=g(r,n,e,o);return i.ztest(t,2)}})}(b,Math),b.models=function(){function i(g){var u=g[0].length,r=b.arange(u).map(function(n){var e=b.arange(u).filter(function(o){return o!==n});return f(b.col(g,n).map(function(o){return o[0]}),b.col(g,e))});return r}function f(g,u){var r=g.length,n=u[0].length-1,e=r-n-1,o=b.lstsq(u,g),t=b.multiply(u,o.map(function(p){return[p]})).map(function(p){return p[0]}),l=b.subtract(g,t),s=b.mean(g),c=b.sum(t.map(function(p){return Math.pow(p-s,2)})),m=b.sum(g.map(function(p,y){return Math.pow(p-t[y],2)})),v=c+m,a=c/v;return{exog:u,endog:g,nobs:r,df_model:n,df_resid:e,coef:o,predict:t,resid:l,ybar:s,SST:v,SSE:c,SSR:m,R2:a}}function _(g){var u=i(g.exog),r=Math.sqrt(g.SSR/g.df_resid),n=u.map(function(s){var c=s.SST,m=s.R2;return r/Math.sqrt(c*(1-m))}),e=g.coef.map(function(s,c){return(s-0)/n[c]}),o=e.map(function(s){var c=b.studentt.cdf(s,g.df_resid);return(c>.5?1-c:c)*2}),t=b.studentt.inv(.975,g.df_resid),l=g.coef.map(function(s,c){var m=t*n[c];return[s-m,s+m]});return{se:n,t:e,p:o,sigmaHat:r,interval95:l}}function d(g){var u=g.R2/g.df_model/((1-g.R2)/g.df_resid),r=function(e,o,t){return b.beta.cdf(e/(t/o+e),o/2,t/2)},n=1-r(u,g.df_model,g.df_resid);return{F_statistic:u,pvalue:n}}function w(g,u){var r=f(g,u),n=_(r),e=d(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=e,r.adjust_R2=o,r}return{ols:w}}(),b.extend({buildxmatrix:function(){for(var f=new Array(arguments.length),_=0;_<arguments.length;_++){var d=[1];f[_]=d.concat(arguments[_])}return b(f)},builddxmatrix:function(){for(var f=new Array(arguments[0].length),_=0;_<arguments[0].length;_++){var d=[1];f[_]=d.concat(arguments[0][_])}return b(f)},buildjxmatrix:function(f){for(var _=new Array(f.length),d=0;d<f.length;d++)_[d]=f[d];return b.builddxmatrix(_)},buildymatrix:function(f){return b(f).transpose()},buildjymatrix:function(f){return f.transpose()},matrixmult:function(f,_){var d,w,g,u,r;if(f.cols()==_.rows()){if(_.rows()>1){for(u=[],d=0;d<f.rows();d++)for(u[d]=[],w=0;w<_.cols();w++){for(r=0,g=0;g<f.cols();g++)r+=f.toArray()[d][g]*_.toArray()[g][w];u[d][w]=r}return b(u)}for(u=[],d=0;d<f.rows();d++)for(u[d]=[],w=0;w<_.cols();w++){for(r=0,g=0;g<f.cols();g++)r+=f.toArray()[d][g]*_.toArray()[w];u[d][w]=r}return b(u)}},regress:function(f,_){var d=b.xtranspxinv(f),w=f.transpose(),g=b.matrixmult(b(d),w);return b.matrixmult(g,_)},regresst:function(f,_,d){var w=b.regress(f,_),g={};g.anova={};var u=b.jMatYBar(f,w);g.yBar=u;var r=_.mean();g.anova.residuals=b.residuals(_,u),g.anova.ssr=b.ssr(u,r),g.anova.msr=g.anova.ssr/(f[0].length-1),g.anova.sse=b.sse(_,u),g.anova.mse=g.anova.sse/(_.length-(f[0].length-1)-1),g.anova.sst=b.sst(_,r),g.anova.mst=g.anova.sst/(_.length-1),g.anova.r2=1-g.anova.sse/g.anova.sst,g.anova.r2<0&&(g.anova.r2=0),g.anova.fratio=g.anova.msr/g.anova.mse,g.anova.pvalue=b.anovaftest(g.anova.fratio,f[0].length-1,_.length-(f[0].length-1)-1),g.anova.rmse=Math.sqrt(g.anova.mse),g.anova.r2adj=1-g.anova.mse/g.anova.mst,g.anova.r2adj<0&&(g.anova.r2adj=0),g.stats=new Array(f[0].length);for(var n=b.xtranspxinv(f),e,o,t,l=0;l<w.length;l++)e=Math.sqrt(g.anova.mse*Math.abs(n[l][l])),o=Math.abs(w[l]/e),t=b.ttest(o,_.length-f[0].length-1,d),g.stats[l]=[w[l],e,o,t];return g.regress=w,g},xtranspx:function(f){return b.matrixmult(f.transpose(),f)},xtranspxinv:function(f){var _=b.matrixmult(f.transpose(),f),d=b.inv(_);return d},jMatYBar:function(f,_){var d=b.matrixmult(f,_);return new b(d)},residuals:function(f,_){return b.matrixsubtract(f,_)},ssr:function(f,_){for(var d=0,w=0;w<f.length;w++)d+=Math.pow(f[w]-_,2);return d},sse:function(f,_){for(var d=0,w=0;w<f.length;w++)d+=Math.pow(f[w]-_[w],2);return d},sst:function(f,_){for(var d=0,w=0;w<f.length;w++)d+=Math.pow(f[w]-_,2);return d},matrixsubtract:function(f,_){for(var d=new Array(f.length),w=0;w<f.length;w++){d[w]=new Array(f[w].length);for(var g=0;g<f[w].length;g++)d[w][g]=f[w][g]-_[w][g]}return b(d)}}),b.jStat=b,b})})(er);const or={class:""},ur=Z("hr",null,null,-1),ir=Z("div",{id:"felicity-chart"},null,-1),fr=Z("hr",null,null,-1),tr=J({__name:"index",setup(W){const B="#FF0000",b="#FEB900",i="#00FF00";function f(d,w){let g=[];d?.forEach(s=>{typeof s[w]=="number"&&g.push(s[w])});const u=g.length,r=A.jStat.mean(g),n=A.jStat.stdev(g),e=[-4,-3,-2,-1,0,1,2,3,4].map(s=>Math.round(s*(r+n)*100)/100),o=Math.round((r+n)*100)/100,t=Math.round(2*(r+n)*100)/100,l=Math.round(3*(r+n)*100)/100;for(let[s,c]of d.entries()){const m=A.jStat.abs([c[w]])[0];let v,a,p;if(c.color=i,c.rule=null,m>l){c.color=B,c.rule="1_3s";continue}if(m>t){if(c.color=b,c.rule="1_2s",s>1&&d[s-1]&&(v=A.jStat.abs([d[s-1][w]])[0],v<=l&&v>t)){c.color=B,c.rule="2_2s";continue}continue}if(s>1&&d[s-1]&&(v=A.jStat.abs([d[s-1][w]])[0],A.jStat.abs([m-v])[0]>=n*4)){c.color=B,c.rule="R_4s";continue}if(s>3&&d[s-3]&&(v=A.jStat.abs([d[s-1][w]])[0],a=A.jStat.abs([d[s-2][w]])[0],p=A.jStat.abs([d[s-3][w]])[0],m>o&&m<=t&&v>o&&v<=t&&a>o&&a<=t&&p>o&&p<=t)){const y=[d[s][w],d[s-1][w],d[s-2][w],d[s-3][w]],q=y.every(D=>D>0),h=y.every(D=>D<0);(q||h)&&(c.color=B,c.rule="4_1s"),d[s-1].rule=="4_1s"&&(c.rule="!!!"),d[s-2].rule=="4_1s"&&(c.rule="!!!"),d[s-3].rule=="4_1s"&&(c.rule="!!!"),d[s-4].rule=="4_1s"&&(c.rule="!!!");continue}}return{rules:d,stats:{n:u,mu:r,sd:n,x_sds:e}}}const _=[{date:new Date(2021,1,1).toDateString(),value:1.2,rule:"1_2S"},{date:new Date(2021,1,2).toDateString(),value:3.3,rule:"1_2S"},{date:new Date(2021,1,3).toDateString(),value:2.1,rule:"2_2S"},{date:new Date(2021,1,4).toDateString(),value:.2,rule:"1_2S"},{date:new Date(2021,1,5).toDateString(),value:3,rule:"1_2S"},{date:new Date(2021,1,6).toDateString(),value:-3,rule:"1_2S"},{date:new Date(2021,1,7).toDateString(),value:-1.2,rule:"1_2S"},{date:new Date(2021,1,8).toDateString(),value:0,rule:"2_2S"},{date:new Date(2021,1,9).toDateString(),value:-1.3,rule:"1_2S"},{date:new Date(2021,1,10).toDateString(),value:2.4,rule:"1_2S"},{date:new Date(2021,1,11).toDateString(),value:-1.3,rule:"1_2S"},{date:new Date(2021,1,12).toDateString(),value:2.3,rule:"1_2S"},{date:new Date(2021,1,13).toDateString(),value:1.9,rule:"2_2S"},{date:new Date(2021,1,14).toDateString(),value:2.1,rule:"1_2S"},{date:new Date(2021,1,15).toDateString(),value:1.4,rule:"1_2S"},{date:new Date(2021,1,16).toDateString(),value:-1.2,rule:"1_2S"},{date:new Date(2021,1,17).toDateString(),value:-6.4,rule:"1_2S"},{date:new Date(2021,1,18).toDateString(),value:6.2,rule:"1_2S"},{date:new Date(2021,1,19).toDateString(),value:-6.5,rule:"1_2S"},{date:new Date(2021,1,20).toDateString(),value:-6.4,rule:"2_2S"},{date:new Date(2021,1,21).toDateString(),value:-2.8,rule:"1_2S"},{date:new Date(2021,1,22).toDateString(),value:1.3,rule:"1_2S"},{date:new Date(2021,1,23).toDateString(),value:-1.5,rule:"1_2S"},{date:new Date(2021,1,24).toDateString(),value:5.5,rule:"1_2S"},{date:new Date(2021,1,25).toDateString(),value:5.7,rule:"1_2S"},{date:new Date(2021,1,26).toDateString(),value:5.4,rule:"1_2S"},{date:new Date(2021,1,27).toDateString(),value:5.6,rule:"1_2S"},{date:new Date(2021,1,28).toDateString(),value:5.3,rule:"1_2S"},{date:new Date(2021,1,29).toDateString(),value:4.5,rule:"1_2S"},{date:new Date(2021,1,30).toDateString(),value:4.2,rule:"1_2S"}];return K(()=>{const d=new rr({container:"felicity-chart",autoFit:!0,height:250}),w=f(_,"value");d.data(w.rules),d.scale({date:{range:[0,1]},value:{ticks:w.stats.x_sds,nice:!0,alias:"Value"}}),d.tooltip({showTitle:!0,showCrosshairs:!0}),d.line().position("date*value").label("value"),d.point().position("date*value").color("value*color*rule",(g,u,r)=>typeof u=="string"?u:""),d.legend("rule",{position:"bottom"}),d.render()}),(d,w)=>{const g=$("router-view");return Y(),X("div",or,[M(" Select Analyte to plot QC Charts if data is numeric Will prorice a drop down of the analytes within this QC Set "),ur,ir,fr,S(g)])}}}),cr=j(tr,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/qcontrol/_id/index.vue"]]);export{cr as default};
