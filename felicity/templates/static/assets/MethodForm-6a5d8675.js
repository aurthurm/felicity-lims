import{P as I,e as N,t as F,f as C,R,h as y,Z as _,o as j,c as B,b as s,A as c,V as m,a as k,a2 as d,a7 as w,z as O,X as P,Y as T,_ as z}from"./index-fa13e788.js";import{i as K,j as L}from"./instrument.mutations-5b6769bd.js";import{u as X}from"./analysis-235f825e.js";import{u as Y}from"./setup-8d8c5945.js";/* empty css                                                                 */import"./_queries-fa6c96fd.js";const Z={action:"post",class:"p-1"},q={class:"grid grid-cols-3 gap-x-4 mb-4"},G={class:"block col-span-2 mb-2"},H=s("span",{class:"text-gray-700"},"Method Name",-1),J={class:"block col-span-1 mb-2"},Q=s("span",{class:"text-gray-700"},"keyword",-1),W={class:"grid grid-cols-2 gap-x-4 mb-4"},$={class:"block col-span-2 mb-2"},ee=s("span",{class:"text-gray-700"},"Analyses",-1),se={class:"block col-span-2 mb-2"},te=s("span",{class:"text-gray-700"},"Instruments",-1),oe={class:"block col-span-2 mb-2"},ae=s("span",{class:"text-gray-700"},"Description",-1),le=s("hr",null,null,-1),ne=I({__name:"MethodForm",props:{method:Object,methodUid:Number,analysis:Object,analysisUid:Number},emits:["close"],setup(M,{emit:g}){const p=P(()=>T(()=>import("./vue-multiselect.esm-d8a2873c.js"),["assets/vue-multiselect.esm-d8a2873c.js","assets/index-fa13e788.js","assets/index-ccc6a521.css"])),x=X(),u=Y(),{withClientMutation:h}=N(),f=M,{method:i,analysis:r}=F(f),t=C({...i?.value});R(()=>f.analysisUid,(o,e)=>{});const b=g,v=y(()=>x.getAnalysesServicesSimple);let l=_([]);r?.value?.uid!==void 0?l.value.push(r.value):v.value?.forEach(o=>{o?.methods?.some(e=>e.uid==i?.value?.uid)&&l.value.push(o)}),u.fetchInstruments();const V=y(()=>u.getInstruments);let n=_([]);const A=()=>{const o=[];return i?.value?.instruments?.forEach(e=>{r?.value?.instruments?.some(E=>E?.uid===e?.uid)&&o.push(e)}),o};n.value=A(),i?.value?.uid!==void 0&&i?.value?.instruments?.forEach(o=>n.value.push(o));function U(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};h(K,{payload:o},"createMethod").then(e=>{b("close"),u.addMethod(e)})}function D(){const o={name:t?.name,keyword:t?.keyword,description:t?.description,instruments:n.value?.map(e=>e.uid),analyses:l.value?.map(e=>e.uid)};h(L,{uid:t?.uid,payload:o},"updateMethod").then(e=>{b("close"),u.updateMethod(e)})}function S(){i?.value?.uid||U(),i?.value?.uid&&D()}return(o,e)=>(j(),B("form",Z,[s("div",q,[s("label",G,[H,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[0]||(e[0]=a=>t.name=a),placeholder:"Name ..."},null,512),[[m,t.name]])]),s("label",J,[Q,c(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=a=>t.keyword=a),placeholder:"Keyword ..."},null,512),[[m,t.keyword]])])]),s("div",W,[s("label",$,[ee,k(d(p),{modelValue:d(l),"onUpdate:modelValue":e[2]||(e[2]=a=>w(l)?l.value=a:l=a),options:v.value,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:d(r)?.uid!=null},null,8,["modelValue","options","disabled"])]),s("label",se,[te,k(d(p),{modelValue:d(n),"onUpdate:modelValue":e[3]||(e[3]=a=>w(n)?n.value=a:n=a),options:V.value,multiple:!0,searchable:!0,label:"name","track-by":"uid"},null,8,["modelValue","options"])]),s("label",oe,[ae,c(s("textarea",{cols:"2",class:"form-input mt-1 block w-full","onUpdate:modelValue":e[4]||(e[4]=a=>t.description=a),placeholder:"Description ..."},null,512),[[m,t.description]])])]),le,s("button",{type:"button",onClick:e[5]||(e[5]=O(a=>S(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")]))}}),pe=z(ne,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/instruments/MethodForm.vue"]]);export{pe as default};
