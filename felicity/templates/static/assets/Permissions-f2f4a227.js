import{P as v,e as P,h as _,o as i,c as r,b as t,F as a,D as l,E as u,a as k,a2 as A,X as U,Y as D,aH as G,_ as V}from"./index-f86d8273.js";import{u as B}from"./user-ccef6161.js";import"./_queries-4c7a9cfd.js";const E={class:"overflow-x-auto mt-4"},S={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},z={class:"relative"},C={class:"min-w-full"},F={class:"flex-1 overflow-y-auto max-h-[700px]"},L={class:"min-w-full"},N={class:"bg-white"},O={class:"bg-slate-100"},T={class:"py-1 font-bold px-1 text-gray-600"},j={class:"py-1 font-sm italic text-gray-500 px-1"},H=v({__name:"Permissions",setup(I){const f=U(()=>D(()=>import("./FelSwitch-fe92b7d8.js"),["assets/FelSwitch-fe92b7d8.js","assets/index-f86d8273.js","assets/index-ba19faea.css"]));let d=B();const{withClientMutation:h}=P();d.fetchGroupsAndPermissions();const c=_(()=>d.getGroups);function p(n,s){return n?.permissions?.some(e=>e?.uid===s?.uid)??!1}const b=(n,s)=>n?.reduce(function(e,o){return(e[o[s]]=e[o[s]]||[]).push(o),e},{}),y=_(()=>Array.from(Object.entries(b(d.getPermissions,"target"))));function g(n,s){h(G,{groupUid:n?.uid,permissionUid:s?.uid},"updateGroupPermissions").then(e=>d.updateGroupsAndPermissions(e))}function x(n,s,e){e!==p(n,s)&&g(n,s)}return(n,s)=>(i(),r("div",E,[t("div",S,[t("div",z,[t("table",C,[t("thead",null,[t("tr",null,[s[0]||(s[0]=t("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Permissions ",-1)),(i(!0),r(a,null,l(c.value,e=>(i(),r("th",{key:e.uid,class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},u(e.name),1))),128)),s[1]||(s[1]=t("th",{class:"sticky top-0 z-10 bg-white px-1 py-1 border-b-2 border-gray-300"},null,-1))])])]),t("div",F,[t("table",L,[t("tbody",N,[(i(!0),r(a,null,l(y.value,e=>(i(),r(a,{key:e[0]},[t("tr",O,[t("td",T,u(e[0]),1),(i(!0),r(a,null,l(c.value,o=>(i(),r("td",{class:"py-1 font-medium px-1 text-slate-100",key:o.uid},u(o.name),1))),128))]),(i(!0),r(a,null,l(e[1],o=>(i(),r("tr",{key:o.uid,class:"border-b border-slate-200"},[t("td",j,u(o.action),1),(i(!0),r(a,null,l(c.value,m=>(i(),r("td",{key:m.uid,class:"px-1"},[k(A(f),{"model-value":p(m,o),"onUpdate:modelValue":w=>x(m,o,w),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])]))}}),Y=V(H,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{Y as default};
