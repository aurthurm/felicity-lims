const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FolderNavigation-pXUjtZWc.js","assets/index-Cdc6vSVw.js","assets/index-B3SP4dh7.css","assets/plus-DHIovP-A.js","assets/document.mutations-rh2AUT34.js","assets/document.queries-CpUPAEcn.js","assets/_isIterateeCall-P0JgY43g.js","assets/toFinite-ik2_Rz9R.js","assets/RecentDocuments-CGKUyPzK.js","assets/DocumentListing-BYpQ5Ziv.js","assets/FolderDocuments-ClGF3M1H.js"])))=>i.map(i=>d[i]);
import{d as I,f as A,a8 as _,a0 as w,as as x,a7 as C,ad as S,a1 as f,a6 as h,_ as E,r as k,c as O,o as v,a as D,A as i,Q as P,C as p,J as B}from"./index-Cdc6vSVw.js";import{a as M,b as R}from"./document.queries-CpUPAEcn.js";import{a as T}from"./_isIterateeCall-P0JgY43g.js";import{t as g}from"./toFinite-ik2_Rz9R.js";var j=Math.floor,L=Math.random;function U(e,t){return e+j(L()*(t-e+1))}var V=parseFloat,N=Math.min,$=Math.random;function Z(e,t,o){if(o&&typeof o!="boolean"&&T(e,t,o)&&(t=o=void 0),o===void 0&&(typeof t=="boolean"?(o=t,t=void 0):typeof e=="boolean"&&(o=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=g(e),t===void 0?(t=e,e=0):t=g(t)),e>t){var r=e;e=t,t=r}if(o||e%1||t%1){var n=$();return N(e+n*(t-e+V("1e-"+((n+"").length-1))),t)}return U(e,t)}const{withClientQuery:y}=A(),z=I("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[]}),actions:{async fetchDocuments(e,t=!1){try{const o=await y(R,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll");o&&typeof o=="object"&&"items"in o?(this.documents=o.items,t&&(this.recentDocuments=this.documents.sort((r,n)=>{const s=r.updatedAt?new Date(r.updatedAt).getTime():0;return(n.updatedAt?new Date(n.updatedAt).getTime():0)-s}).slice(0,25))):console.error("Invalid documents data received:",o)}catch(o){console.error("Error fetching documents:",o)}},addDocument(e){if(!e?.uid){console.error("Invalid document payload:",e);return}this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5)},updateDocument(e){if(!e?.uid){console.error("Invalid document payload:",e);return}const t={...e,updatedAt:new Date().toISOString()};this.documents=this.documents.map(o=>o.uid===e.uid?t:o),this.recentDocuments=[t,...this.recentDocuments.filter(o=>o.uid!==e.uid)].slice(0,5)},deleteDocument(e){if(!e){console.error("Invalid document ID provided to deleteDocument");return}this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e)},duplicateDocument(e){if(!e){console.error("Invalid document ID provided to duplicateDocument");return}const t=this.documents.find(r=>r.uid===e);if(!t){console.error("Document not found:",e);return}const o={...t,uid:Z(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(o),this.recentDocuments=[o,...this.recentDocuments].slice(0,5)},async setCurrentFolder(e){this.currentFolder=e,await this.fetchDocuments({folderUid:e})},async getFolders(){try{const e=await y(M,{},"documentFolderAll");e&&typeof e=="object"&&"items"in e?this.folders=e.items:console.error("Invalid folders data received:",e)}catch(e){console.error("Error fetching folders:",e)}},addFolder(e){if(!e?.uid){console.error("Invalid folder payload:",e);return}this.folders.push(e)},deleteFolder(e){if(!e){console.error("Invalid folder ID provided to deleteFolder");return}this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e)},updateFolder(e){if(!e?.uid){console.error("Invalid folder payload:",e);return}this.folders=this.folders.map(t=>t.uid===e.uid?e:t)},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){if(!e){console.error("Invalid folder ID provided to toggleFolderExpanded");return}this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t)}},getters:{getChildFolders:e=>t=>e.folders.filter(o=>o.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(o=>o.folderUid===t)}});const b=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,o,r)=>r?r.toUpperCase():o.toLowerCase()),Q=e=>{const t=G(e);return t.charAt(0).toUpperCase()+t.slice(1)},H=(...e)=>e.filter((t,o,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===o).join(" ").trim(),F=e=>e==="";var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const J=({name:e,iconNode:t,absoluteStrokeWidth:o,"absolute-stroke-width":r,strokeWidth:n,"stroke-width":s,size:d=l.width,color:a=l.stroke,...u},{slots:c})=>_("svg",{...l,...u,width:d,height:d,stroke:a,"stroke-width":F(o)||F(r)||o===!0||r===!0?Number(n||s||l["stroke-width"])*24/Number(d):n||s||l["stroke-width"],class:H("lucide",u.class,...e?[`lucide-${b(Q(e))}-icon`,`lucide-${b(e)}`]:["lucide-icon"])},[...t.map(m=>_(...m)),...c.default?[c.default()]:[]]);const q=(e,t)=>(o,{slots:r,attrs:n})=>_(J,{...n,...o,iconNode:t,name:e},r);const X=q("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Y=w({__name:"DocumentEntry",setup(e,{expose:t}){t();const o=f(()=>h(()=>import("./FolderNavigation-pXUjtZWc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),r=f(()=>h(()=>import("./RecentDocuments-CGKUyPzK.js"),__vite__mapDeps([8,1,2,9,4,3,5,6,7]))),n=f(()=>h(()=>import("./FolderDocuments-ClGF3M1H.js"),__vite__mapDeps([10,1,2,9,4,3,5,6,7]))),s=z(),{currentFolder:d}=x(s),a=C(!1),u=()=>{a.value=!a.value};S(async()=>{try{await s.getFolders()}catch(m){console.error("Error fetching folders:",m)}});const c={FolderNavigation:o,RecentDocuments:r,FolderDocuments:n,documentStore:s,currentFolder:d,isSidebarOpen:a,toggleSidebar:u,get Folder(){return X}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),K={class:"flex overflow-hidden"},W={class:"flex-1 overflow-hidden"},ee={class:"lg:hidden p-4 flex items-center border-b border-border"},te={class:"h-full overflow-auto p-6"};function oe(e,t,o,r,n,s){const d=k("fel-heading");return v(),O(B,null,[D(d,{title:"Documents"}),i("div",K,[i("div",{class:P(["fixed inset-y-0 left-0 z-10 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",{"-translate-x-full":!r.isSidebarOpen}])},[D(r.FolderNavigation)],2),i("div",W,[i("div",ee,[i("button",{class:"mr-4 p-2 rounded-md border border-border hover:bg-accent",onClick:r.toggleSidebar},[D(r.Folder,{class:"h-5 w-5"})]),t[0]||(t[0]=i("h1",{class:"text-xl font-semibold text-foreground"},"Document Manager",-1))]),i("div",te,[r.currentFolder?(v(),p(r.FolderDocuments,{key:1})):(v(),p(r.RecentDocuments,{key:0}))])])])],64)}const re=E(Y,[["render",oe],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/document/DocumentEntry.vue"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{ae as D,X as F,q as c,z as u};
