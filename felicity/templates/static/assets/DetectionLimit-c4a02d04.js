import{_ as O,A as F,t as j,bn as B,bo as R,w as $}from"./shipment-53265c2d.js";import{f as Y,G as q,T as P,r as y,c as G,w as W,d as L,h as l,k as a,x as t,F as c,ak as h,D as r,u as n,y as D,j as z,A,ag as p,i as H,_ as J}from"./_plugin-vue_export-helper-dacf3d65.js";import{d as I,v as U,a as K}from"./runtime-dom.esm-bundler-98433118.js";const Q=t("hr",null,null,-1),X={class:"overflow-x-auto mt-4"},Z={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},tt={class:"min-w-full"},et=t("thead",null,[t("tr",null,[t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Intrument"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Method"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Lower Limit"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"},"Upper Limit"),t("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),st={class:"bg-white"},ot={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},nt={class:"flex items-center"},it={class:"text-sm leading-5 text-gray-800"},lt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},at={class:"text-sm leading-5 text-sky-800"},rt={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},dt={class:"text-sm leading-5 text-sky-800"},ut={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ct={class:"text-sm leading-5 text-sky-800"},pt={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},mt=["onClick"],_t={action:"post",class:"p-1"},bt={class:"grid grid-cols-4 gap-x-4 mb-4"},yt={class:"block col-span-1 mb-2"},ht=t("span",{class:"text-gray-700 w-4/12"},"Instrument",-1),ft={class:"w-full"},xt=t("option",null,null,-1),gt=["value"],vt={class:"block col-span-1 mb-2"},wt=t("span",{class:"text-gray-700 w-4/12"},"Method",-1),kt={class:"w-full"},Lt=t("option",null,null,-1),Dt=["value"],At={class:"block col-span-1 mb-2"},It=t("span",{class:"text-gray-700"},"Lower Limit",-1),Ut={class:"block col-span-1 mb-2"},Tt=t("span",{class:"text-gray-700"},"Upper Limit",-1),St=t("hr",null,null,-1),Ct=Y({__name:"DetectionLimit",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(T){const f=T,S=q(()=>O(()=>import("./SimpleModal-9e28c074.js"),["assets/SimpleModal-9e28c074.js","assets/_plugin-vue_export-helper-dacf3d65.js","assets/runtime-dom.esm-bundler-98433118.js","assets/SimpleModal-f645a074.css"])),x=F(),u=j(),{withClientMutation:g}=$(),{analysis:v}=P(f);let d=y(!1),w=y(""),i=G({});const m=y(!0);W(()=>f.analysisUid,(o,s)=>{}),u.fetchInstruments();const _=L(()=>u.getInstruments);u.fetchMethods();const b=L(()=>u.getMethods);function C(){const o={...i,analysisUid:v?.value?.uid};g(B,{payload:o},"createAnalysisDetectionLimit").then(s=>x.addAnalysisDetectionLimit(s))}function E(){const o={...i};delete o.uid,delete o.__typename,g(R,{uid:i.uid,payload:o},"updateAnalysisDetectionLimit").then(s=>x.updateAnalysisDetectionLimit(s))}function k(o,s={}){m.value=o,d.value=!0,w.value=(o?"CREATE":"EDIT")+" ANALYSIS DETECTION_LIMIT",o?Object.assign(i,{lowerLimit:null,upperLimit:null,instrumentUid:null,methodUid:null}):Object.assign(i,{...s})}function M(){m.value===!0&&C(),m.value===!1&&E(),d.value=!1}const N=o=>{const s=_?.value?.findIndex(e=>e.uid===o);return _?.value[s]?.name||"unknown"},V=o=>{const s=b?.value?.findIndex(e=>e.uid===o);return b?.value[s]?.name||"unknown"};return(o,s)=>(l(),a(c,null,[t("button",{class:"px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:s[0]||(s[0]=e=>k(!0))},"Add Detection Limit"),Q,t("div",X,[t("div",Z,[t("table",tt,[et,t("tbody",st,[(l(!0),a(c,null,h(n(v)?.detectionLimits,e=>(l(),a("tr",{key:e?.uid},[t("td",ot,[t("div",nt,[t("div",null,[t("div",it,r(N(e?.instrumentUid)),1)])])]),t("td",lt,[t("div",at,r(V(e?.instrumentUid)),1)]),t("td",rt,[t("div",dt,r(e.lowerLimit),1)]),t("td",ut,[t("div",ct,r(e.upperLimit),1)]),t("td",pt,[t("button",{onClick:Et=>k(!1,e),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"},"Edit",8,mt)])]))),128))])])])]),D(" Detection Limit Form Modal "),n(d)?(l(),z(n(S),{key:0,onClose:s[6]||(s[6]=e=>H(d)?d.value=!1:d=!1),contentWidth:"w-2/4"},{header:A(()=>[t("h3",null,r(n(w)),1)]),body:A(()=>[t("form",_t,[t("div",bt,[t("label",yt,[ht,t("div",ft,[p(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[1]||(s[1]=e=>n(i).instrumentUid=e)},[xt,(l(!0),a(c,null,h(n(_),e=>(l(),a("option",{key:e?.uid,value:e.uid},r(e?.name),9,gt))),128))],512),[[I,n(i).instrumentUid]])])]),t("label",vt,[wt,t("div",kt,[p(t("select",{class:"form-select mt-1 w-full","onUpdate:modelValue":s[2]||(s[2]=e=>n(i).methodUid=e)},[Lt,(l(!0),a(c,null,h(n(b),e=>(l(),a("option",{key:e?.uid,value:e.uid},r(e?.name),9,Dt))),128))],512),[[I,n(i).methodUid]])])]),t("label",At,[It,p(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[3]||(s[3]=e=>n(i).lowerLimit=e),placeholder:"Value ..."},null,512),[[U,n(i).lowerLimit]])]),t("label",Ut,[Tt,p(t("input",{type:"number",class:"form-input mt-1 block w-full","onUpdate:modelValue":s[4]||(s[4]=e=>n(i).upperLimit=e),placeholder:"Value ..."},null,512),[[U,n(i).upperLimit]])])]),St,t("button",{type:"button",onClick:s[5]||(s[5]=K(e=>M(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):D("v-if",!0)],64))}}),Ot=J(Ct,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/admin/analyses/services/DetectionLimit.vue"]]);export{Ot as default};
