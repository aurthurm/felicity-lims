import{a0 as F,a7 as k,a5 as B,_ as R,c as y,o as v,A as p,L as S,E as M,P as q,Q as j}from"./index-Daoe3XS9.js";const z=F({__name:"FelJsonPreViewer",props:{data:{type:null,required:!0},wrapper:{type:String,required:!1,default:""},copyable:{type:Boolean,required:!1,default:!0},expandable:{type:Boolean,required:!1,default:!0},theme:{type:String,required:!1,default:"light"},title:{type:String,required:!1,default:"JSON Preview"}},setup(E,{expose:f}){f();const l=E,i=k(null),h=k(!1),m=k(!1),L=`json-preview-${Math.random().toString(36).slice(2,11)}`;function V(){h.value=!h.value}async function H(){try{await navigator.clipboard.writeText(JSON.stringify(l.data,null,2)),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch{}}function w(r,e){const t=l.theme==="dark"?"dark":"light";new J({container:e,data:JSON.stringify(r),theme:t,expand:h.value})}B(()=>l.data,r=>{i.value&&(i.value.innerHTML="",r&&Object.keys(r).length>0&&w(r,i.value))},{immediate:!0}),B(()=>h.value,r=>{i.value&&l.data&&(i.value.innerHTML="",w(l.data,i.value))});const b=Object.prototype.toString;function A(r){return typeof r=="number"}function O(r){return typeof r=="boolean"}function N(r){return typeof r>"u"}function C(r){return b.call(r)==="[object Array]"}function _(r){return b.call(r)==="[object Object]"}function I(r){return b.call(r)==="[object Null]"}class J{options;constructor(e){const t={theme:"light",container:null,data:"{}",expand:!1};if(this.options=Object.assign(t,e),!e.container)throw new Error("Container: dom element is required");this.render()}renderRight(e,t,n){A(n)?t.setAttribute("class",e+"rightNumber"):O(n)?t.setAttribute("class",e+"rightBoolean"):n==="null"?t.setAttribute("class",e+"rightNull"):t.setAttribute("class",e+"rightString"),t.innerText=n}renderChildren(e,t,n,s,c,o){const a=this.createElement("span"),d=this.options.expand?"rotate90":"",u=this.options.expand?"add-height":"";a.setAttribute("class",e+"folder "+d),a.onclick=x=>{const P=x.target.parentNode?.nextSibling;this.toggleItem(P,x.target)};const g=_(n)?Object.keys(n).length:n.length;o.innerHTML=_(n)?t+"&nbsp;&nbsp{"+g+"}":t+"&nbsp;&nbsp["+g+"]",o.prepend(a),s.setAttribute("class",e+"rightObj "+u),this.parse(n,s,c+0,e)}parse(e,t,n,s){this.forEach(e,(c,o)=>{const{left:a,right:d}=this.createItem(n,s,t,o,typeof c!="object");typeof c!="object"?this.renderRight(s,d,c):this.renderChildren(s,o,c,d,n,a)})}createItem(e,t,n,s,c){const o=this.createElement("div"),a=this.createElement("div"),d=this.createElement("div"),u=this.createElement("div");return o.style.marginLeft=e*2+"px",a.innerHTML=`${s}<span class="jv-${t}-symbol">&nbsp;:&nbsp;</span>`,c?(o.appendChild(u),u.appendChild(a),u.appendChild(d),n.appendChild(o),o.setAttribute("class",t+"current"),u.setAttribute("class","jv-wrap"),a.setAttribute("class",t+"left")):(o.appendChild(a),o.appendChild(d),n.appendChild(o),o.setAttribute("class",t+"current"),a.setAttribute("class",t+"left jv-folder"),a.onclick=g=>{const x=g.target.nextSibling;this.toggleItem(x,g.target.querySelector("span"))}),{left:a,right:d,current:o}}render(){const e=this.options.data,t="jv-"+this.options.theme+"-",n=0,s=this.options.container;let c="object",o;s.setAttribute("class",t+"con");try{o=JSON.parse(e)}catch{throw new Error("It is not a json format")}C(o)&&(c="array");const{left:a,right:d}=this.createItem(n,t,s,c,!1);this.renderChildren(t,c,o,d,n,a)}toggleItem(e,t){e.classList.toggle("add-height"),t.classList.toggle("rotate90")}createElement(e){return document.createElement(e)}forEach(e,t){if(!(N(e)||I(e)))if(typeof e=="object"&&C(e))for(let n=0,s=e.length;n<s;n++)t.call(null,e[n],n.toString(),e);else for(const n in e)e.hasOwnProperty(n)&&t.call(null,e[n],n,e)}}const T={props:l,jsonContainer:i,expanded:h,copied:m,containerId:L,toggleExpand:V,copyToClipboard:H,renderJson:w,toString:b,isNumber:A,isBoolean:O,isUndefined:N,isArray:C,isObject:_,isNull:I,JsonViewer:J};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),D={class:"mb-2 flex items-center justify-between"},Q={class:"text-sm font-medium text-card-foreground"},U={class:"flex items-center space-x-2"},G=["aria-label"],K=["aria-expanded"],W=["aria-label"];function X(E,f,l,i,h,m){return v(),y("div",{class:j(["w-full rounded-lg border border-border bg-card p-4",l.wrapper])},[p("div",D,[p("h3",Q,S(l.title),1),p("div",U,[l.copyable?(v(),y("button",{key:0,onClick:i.copyToClipboard,class:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring","aria-label":i.copied?"Copied to clipboard":"Copy to clipboard"},[f[0]||(f[0]=p("svg",{class:"mr-1 h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)),q(" "+S(i.copied?"Copied":"Copy"),1)],8,G)):M("",!0),l.expandable?(v(),y("button",{key:1,onClick:i.toggleExpand,class:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring","aria-expanded":i.expanded,"aria-controls":i.containerId},[(v(),y("svg",{class:j(["mr-1 h-3 w-3 transition-transform duration-200",{"rotate-180":i.expanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[...f[1]||(f[1]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),q(" "+S(i.expanded?"Collapse":"Expand"),1)],8,K)):M("",!0)])]),p("div",{ref:"jsonContainer",id:i.containerId,class:j(["overflow-auto rounded-md bg-muted p-4 font-mono text-sm",{"max-h-96":!i.expanded}]),role:"region","aria-label":`JSON preview of ${l.title}`,tabindex:"0"},null,10,W)],2)}const Z=R(z,[["render",X],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/ui/FelJsonPreViewer.vue"]]);export{Z as default};
