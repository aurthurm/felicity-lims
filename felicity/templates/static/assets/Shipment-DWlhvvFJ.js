import{Y as k,ag as S,a7 as l,av as D,aN as R,_ as A,r as v,aF as L,c as x,o as h,D as r,a as g,z as e,I as i,M as O,E as a}from"./index-OdhKCqIc.js";import{u as B}from"./shipment-DcKVexkp.js";import{u as j}from"./shipment-BZXEcwwZ.js";const N=k({name:"ShipmentView",__name:"Shipment",setup(b,{expose:o}){o();const d=S(),t=B(),{actionShipment:c}=j(),{alert:m}=R();t.fetchReferralLaboratories(),t.fetchShipmentByUid(d.params.shipmentUid);const n=l(()=>t.getShipment),u=D({dropdownOpen:!1}),f=l(()=>!!["due"].includes(n?.value?.state?.toLowerCase())),s=l(()=>!!["preperation"].includes(n?.value?.state?.toLowerCase())),_=l(()=>!!["preperation","ready"].includes(n?.value?.state?.toLowerCase())),w=l(()=>!!["ready"].includes(n?.value?.state?.toLowerCase())),y=l(()=>!!["failed"].includes(n?.value?.state?.toLowerCase())),p={route:d,shipmentStore:t,actionShipment:c,alert:m,shipment:n,state:u,canReceive:f,canFinalise:s,canCancel:_,canDispatch:w,canRetryDispatch:y,shipmentActor:C=>{if(!n.value?.incoming&&!(n.value?.laboratory?.url&&n.value?.laboratory?.password&&n.value?.laboratory?.username&&n.value?.courier)){m({title:"Missing Information",description:"The External Laboratory has missing information or the courier missing.",confirmText:"OK",variant:"destructive"});return}c(n.value?.uid,C)}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),E={class:"space-y-6"},F={class:"bg-background rounded-lg shadow-sm border border-border p-6 transition-all duration-200 hover:shadow-md"},I={class:"space-y-6"},V={class:"flex items-center justify-between"},T={class:"flex items-center space-x-6"},z={class:"text-lg font-semibold text-foreground"},M={class:"inline-flex items-center rounded-md bg-muted px-2 py-1 text-xs font-medium text-muted-foreground"},U={class:"relative"},K={class:"absolute right-0 mt-2 w-56 rounded-md bg-background shadow-lg ring-1 ring-black ring-opacity/5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button"},P={class:"py-1",role:"none"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-border"},q={class:"space-y-4"},G={class:"flex items-center"},H={class:"text-sm text-foreground"},J={class:"flex items-center"},Q={class:"text-sm text-foreground"},W={class:"flex items-center"},X={class:"text-sm text-foreground"},Z={class:"space-y-4"},$={class:"flex items-start"},ee={class:"text-sm text-foreground"};function te(b,o,d,t,c,m){const n=v("font-awesome-icon"),u=v("router-view"),f=L("motion-slide-top");return h(),x("div",E,[r((h(),x("div",F,[e("div",I,[e("div",V,[e("div",T,[e("h3",z,i(t.shipment?.shipmentId),1),e("span",M,i(t.shipment?.incoming?"InBound":"OutBound"),1)]),e("div",U,[e("button",{onClick:o[0]||(o[0]=s=>t.state.dropdownOpen=!t.state.dropdownOpen),class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4"},[O(i(t.shipment?.state||"unknown")+" ",1),g(n,{icon:"chevron-down",class:"ml-2 h-4 w-4"})]),r(e("div",K,[e("div",P,[r(e("button",{onClick:o[1]||(o[1]=s=>t.shipmentActor("reject")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Reject ",512),[[a,t.canReceive]]),r(e("button",{onClick:o[2]||(o[2]=s=>t.shipmentActor("receive")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Receive ",512),[[a,t.canReceive]]),r(e("button",{onClick:o[3]||(o[3]=s=>t.shipmentActor("finalise")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Finalise ",512),[[a,t.canFinalise]]),r(e("button",{onClick:o[4]||(o[4]=s=>t.shipmentActor("dispatch")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Dispatch ",512),[[a,t.canDispatch]]),r(e("button",{onClick:o[5]||(o[5]=s=>t.shipmentActor("dispatch-now")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Retry Notification ",512),[[a,t.canRetryDispatch]]),r(e("button",{onClick:o[6]||(o[6]=s=>t.shipmentActor("cancel")),class:"block w-full px-4 py-2 text-left text-sm text-foreground hover:bg-muted hover:text-foreground",role:"menuitem"}," Cancel ",512),[[a,t.canCancel]])])],512),[[a,t.state.dropdownOpen]])])]),e("div",Y,[e("div",q,[e("div",G,[o[7]||(o[7]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"External Laboratory",-1)),e("span",H,i(t.shipment?.laboratory?.name),1)]),e("div",J,[o[8]||(o[8]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Courier",-1)),e("span",Q,i(t.shipment?.courier),1)]),e("div",W,[o[9]||(o[9]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Assigned Count",-1)),e("span",X,i(t.shipment?.assignedCount),1)])]),e("div",Z,[e("div",$,[o[10]||(o[10]=e("span",{class:"w-1/3 text-sm font-medium text-muted-foreground"},"Comment",-1)),e("span",ee,i(t.shipment?.comment),1)])])])])])),[[f]]),g(u)])}const ie=A(N,[["render",te],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/shipment/_id/Shipment.vue"]]);export{ie as default};
