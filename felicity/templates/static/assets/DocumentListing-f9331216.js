import{S as L,f as T,a0 as g,W as P,i as C,o as n,y,c as d,N as e,C as _,X as $,J as q,M,H as m,a as I,a5 as f,F as V,E as j,K as F,A as w,a_ as J,_ as S,V as A,a$ as U,aD as Q}from"./index-628f1f8f.js";import{c as x,u as R}from"./DocumentEntry-65cd6e2b.js";import{a as W}from"./document.mutations-9804612c.js";import{C as X}from"./plus-498c34be.js";/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=x("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=x("FileIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=x("LayoutGridIcon",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=x("ListIcon",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=x("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),oe={key:0,class:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",role:"dialog","aria-labelledby":"create-document-title","aria-modal":"true"},ne={class:"space-y-4"},re={class:"relative"},ie=["aria-expanded","aria-controls"],se={key:0,id:"folder-list",class:"absolute top-full left-0 z-10 mt-1 w-full rounded-md border border-border bg-card shadow-md"},ae={class:"max-h-[200px] overflow-auto p-1"},de=["onClick","aria-selected"],le={key:1,class:"mr-2 w-4","aria-hidden":"true"},ue={class:"flex justify-end gap-2 mt-6"},ce=["disabled"],me=L({__name:"CreateDocumentDialog",props:{isOpen:{type:Boolean,required:!0},initialFolderId:{type:[String,null],required:!1}},emits:["update:isOpen"],setup(k,{emit:u}){const p=k,v=u,{withClientMutation:b}=T(),r=R(),i=g(""),l=g(""),s=g(""),c=g(!1),h=g("");P(()=>p.initialFolderId,t=>{t&&(l.value=t)},{immediate:!0});const N=C(()=>{if(!h.value)return r.folders;const t=h.value.toLowerCase();return r.folders.filter(o=>o.name.toLowerCase().includes(t))}),B=C(()=>{const t=r.folders.find(o=>o.uid===l.value);return t?t.name:"Select folder"}),E=C(()=>i.value.trim()!==""&&l.value!=="");function K(t){l.value=t,c.value=!1}async function D(){if(E.value)try{const t=await b(W,{payload:{name:i.value.trim(),folderUid:l.value,documentId:s.value.trim()}},"createDocument");if(t&&typeof t=="object"&&"uid"in t){const o=t;r.addDocument(o)}}catch(t){console.error("Failed to create document:",t)}finally{O()}}function O(){G(),v("update:isOpen",!1)}function G(){i.value="",s.value="",c.value=!1,h.value=""}const H={mounted(t,o){t._clickOutside=a=>{t===a.target||t.contains(a.target)||o.value(a)},document.addEventListener("click",t._clickOutside)},unmounted(t){t._clickOutside&&document.removeEventListener("click",t._clickOutside)}};return(t,o)=>(n(),y(J,{to:"body"},[t.isOpen?(n(),d("div",oe,[e("div",{class:"bg-card rounded-lg shadow-lg p-6 max-w-sm w-full mx-4 border border-border",onClick:o[4]||(o[4]=w(()=>{},["stop"]))},[o[8]||(o[8]=e("h3",{id:"create-document-title",class:"text-lg font-medium text-card-foreground mb-4"},"Create new document",-1)),e("div",ne,[e("div",null,[o[5]||(o[5]=e("label",{for:"name",class:"block text-sm font-medium text-card-foreground mb-1"},"Document Name",-1)),_(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document name",onKeyup:q(D,["enter"])},null,544),[[$,i.value]])]),e("div",null,[o[6]||(o[6]=e("label",{for:"documentId",class:"block text-sm font-medium text-card-foreground mb-1"},"Document ID",-1)),_(e("input",{id:"documentId","onUpdate:modelValue":o[1]||(o[1]=a=>s.value=a),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document id",onKeyup:q(D,["enter"])},null,544),[[$,s.value]])]),e("div",null,[o[7]||(o[7]=e("label",{for:"folder",class:"block text-sm font-medium text-card-foreground mb-1"},"Folder",-1)),e("div",re,[e("button",{id:"folder",type:"button",onClick:o[2]||(o[2]=a=>c.value=!c.value),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-expanded":c.value,"aria-controls":c.value?"folder-list":void 0},[M(m(B.value)+" ",1),I(f(X),{class:"ml-2 h-4 w-4 shrink-0 opacity-50","aria-hidden":"true"})],8,ie),c.value?_((n(),d("div",se,[e("div",ae,[_(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>h.value=a),class:"flex h-8 w-full rounded-sm border-0 bg-background px-3 py-1 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring mb-1",placeholder:"Search folders...","aria-label":"Search folders"},null,512),[[$,h.value]]),(n(!0),d(V,null,j(N.value,a=>(n(),d("button",{key:a.uid,onClick:ze=>K(a.uid),class:"flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent text-left text-card-foreground","aria-selected":a.uid===l.value},[a.uid===l.value?(n(),y(f(Z),{key:0,class:"mr-2 h-4 w-4","aria-hidden":"true"})):(n(),d("span",le)),M(" "+m(a.name),1)],8,de))),128))])])),[[H,()=>c.value=!1]]):F("v-if",!0)])])]),e("div",ue,[e("button",{onClick:O,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Cancel "),e("button",{onClick:D,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",disabled:!E.value}," Create ",8,ce)])])])):F("v-if",!0)]))}}),He=S(me,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/CreateDocumentDialog.vue"]]),fe=["aria-label"],pe={class:"relative mb-4 rounded-lg overflow-hidden bg-muted aspect-[3/4] flex items-center justify-center"},be={key:0,class:"w-full h-full"},ge=["src","alt"],ve={class:"absolute inset-0 flex items-center justify-center gap-x-2 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},he=["aria-label"],ye={class:"h-12 w-12 rounded-full bg-background/90 flex items-center justify-center"},xe={class:"flex flex-col"},ke=["title"],_e={class:"text-xs text-muted-foreground mt-1"},we=L({__name:"DocumentCard",props:{document:{type:Object,required:!0}},setup(k){const u=k,p=A();function v(){p.push({name:"document-editor",params:{documentVersionUid:u.document?.latestVersion?.uid}})}function b(r){return U(new Date(r),"MMM d, yyyy")}return(r,i)=>(n(),d("div",{class:"document-card animate-scale-in group bg-card rounded-lg border border-border p-4 transition-all hover:shadow-md hover:border-accent",role:"article","aria-label":`Document: ${r.document.name}`},[e("div",pe,[r.document?.latestVersion?.thumbnail?(n(),d("div",be,[e("img",{src:`data:image/png;base64,${r.document?.latestVersion?.thumbnail}`,alt:r.document.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,ge),i[0]||(i[0]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-foreground/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},null,-1))])):(n(),y(f(Y),{key:1,class:"text-muted-foreground w-12 h-12","aria-hidden":"true"})),e("div",ve,[e("button",{onClick:w(v,["stop"]),class:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full transition-transform hover:scale-105","aria-label":`Edit document: ${r.document.name}`},[e("div",ye,[I(f(z),{class:"text-foreground w-5 h-5","aria-hidden":"true"})])],8,he)])]),e("div",xe,[e("h3",{class:"font-medium text-sm text-card-foreground truncate",title:r.document.name},m(r.document.name),9,ke),e("p",_e," Updated "+m(b(r.document.updatedAt)),1)])],8,fe))}}),De=S(we,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentCard.vue"]]),Ce={class:"space-y-4",role:"region","aria-label":"Document listing"},$e={class:"flex justify-end"},Me=["aria-label","aria-pressed"],Ve={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},je={key:1,class:"overflow-x-auto rounded-lg border border-border bg-card"},Fe={class:"min-w-full divide-y divide-border"},Le={class:"divide-y divide-border bg-card"},Ie=["onClick","aria-label"],Se={class:"px-4 py-3 text-sm text-muted-foreground"},Ee={class:"px-4 py-3 text-sm text-muted-foreground"},Oe={class:"px-4 py-3 text-sm"},qe=["onClick","aria-label"],Ae={key:0},Ue=L({__name:"DocumentListing",props:{documents:{type:Array,required:!0}},setup(k){const u=g(!1);function p(i){return U(new Date(i),"MMM d, yyyy")}const v=A();function b(i){v.push({name:"document-editor",params:{documentVersionUid:i?.latestVersion?.uid}})}function r(){u.value=!u.value}return(i,l)=>(n(),d("div",Ce,[e("div",$e,[e("button",{onClick:r,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2","aria-label":`Switch to ${u.value?"list":"grid"} view`,"aria-pressed":u.value},[(n(),y(Q(u.value?f(te):f(ee)),{class:"w-4 h-4 mr-2","aria-hidden":"true"})),M(" "+m(u.value?"List View":"Grid View"),1)],8,Me)]),u.value?(n(),d("div",Ve,[(n(!0),d(V,null,j(i.documents,s=>(n(),y(De,{key:s.uid,document:s},null,8,["document"]))),128))])):(n(),d("div",je,[e("table",Fe,[l[1]||(l[1]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Name"),e("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Created At"),e("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Updated At"),e("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",Le,[(n(!0),d(V,null,j(i.documents,s=>(n(),d("tr",{key:s.uid,class:"hover:bg-accent/50 transition-colors"},[e("td",{class:"px-4 py-3 text-sm font-medium text-card-foreground cursor-pointer hover:text-accent-foreground",onClick:w(c=>b(s),["stop"]),role:"button","aria-label":`Edit document: ${s.name}`},m(s.name),9,Ie),e("td",Se,m(p(s.createdAt)),1),e("td",Ee,m(p(s.updatedAt)),1),e("td",Oe,[e("button",{onClick:w(c=>b(s),["stop"]),class:"inline-flex items-center justify-center rounded-full h-8 w-8 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground","aria-label":`Edit document: ${s.name}`},[I(f(z),{class:"w-4 h-4","aria-hidden":"true"})],8,qe)])]))),128)),i.documents.length===0?(n(),d("tr",Ae,l[0]||(l[0]=[e("td",{colspan:"4",class:"px-4 py-8 text-center text-sm text-muted-foreground"}," No documents found ",-1)]))):F("v-if",!0)])])]))]))}}),Te=S(Ue,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentListing.vue"]]);export{He as C,Te as D};
