import{Y as P,u as R,a0 as N,a7 as B,a3 as h,_ as q,r as f,c as E,o as g,z as c,A as S,C as U,a as t,K as r,M as n,F as M,H as k,I as y,B as z,aK as O,aL as K,a4 as D}from"./index-OdhKCqIc.js";import{a as Y,b as G}from"./instrument.mutations-BxEMyJNC.js";import{u as J}from"./setup-BcFG_bXr.js";import{c as Q,a as p,u as W,F as X}from"./index.esm-BfHj8iGm.js";import{I as Z}from"./Input-BEm5S0CJ.js";import{F as j,a as $,b as ee}from"./FormMessage-CgXFMXx9.js";import{F as te}from"./FormLabel-DxP9wnWS.js";import{S as re,a as ae,b as oe,c as le,d as ne}from"./SelectValue-Ds0cfAgl.js";import{E as me,a as se,b as de,c as ie,d as ue}from"./EmptyTitle-aCQRDpx3.js";import{P as fe}from"./PageHeading-Czi_4opS.js";import"./Label-CS46LzLb.js";import"./useNonce-B4v0IDPb.js";import"./chevron-down-Dqf-ptA3.js";import"./useFocusGuards-Bjb6OG0k.js";import"./PopperContent-BfyCnGUj.js";const be=P({__name:"LaboratoryInstruments",setup(A,{expose:a}){a();const i=J(),{withClientMutation:e}=R();let _=N(!1),F=N("");const m=N(!0),u=N(null),I=Q({instrumentUid:p().required("Instrument is required"),labName:p().required("Lab name/ID is required"),serialNumber:p().nullable(),dateCommissioned:p().nullable(),dateDecommissioned:p().nullable()}),{handleSubmit:d,resetForm:x,setValues:C}=W({validationSchema:I,initialValues:{instrumentUid:"",labName:"",serialNumber:"",dateCommissioned:"",dateDecommissioned:""}});i.fetchInstruments(),i.fetchLaboratoryInstruments();const T=B(()=>i.getInstruments),v=B(()=>i.getLaboratoryInstruments);function o(l){const s={labName:l.labName,serialNumber:l.serialNumber,dateCommissioned:l.dateCommissioned,dateDecommissioned:l.dateDecommissioned,instrumentUid:l.instrumentUid};e(Y,{payload:s},"createLaboratoryInstrument").then(L=>i.addLaboratoryInstrument(L))}function b(l){if(!u.value)return;const s={labName:l.labName,serialNumber:l.serialNumber,dateCommissioned:l.dateCommissioned,dateDecommissioned:l.dateDecommissioned,instrumentUid:l.instrumentUid};e(G,{uid:u.value,payload:s},"updateLaboratoryInstrument").then(L=>i.updateLaboratoryInstrument(L))}function H(l,s={}){m.value=l,_.value=!0,F.value=(l?"CREATE":"EDIT")+" LABORATORY INSTRUMENT",l?(u.value=null,x({values:{instrumentUid:"",labName:"",serialNumber:"",dateCommissioned:"",dateDecommissioned:""}})):(u.value=s.uid??null,C({instrumentUid:s.instrumentUid??"",labName:s.labName??"",serialNumber:s.serialNumber??"",dateCommissioned:s.dateCommissioned??"",dateDecommissioned:s.dateDecommissioned??""}))}const V=d(l=>{m.value===!0&&o(l),m.value===!1&&b(l),_.value=!1}),w={setupStore:i,withClientMutation:e,get showModal(){return _},set showModal(l){_=l},get formTitle(){return F},set formTitle(l){F=l},formAction:m,currentUid:u,formSchema:I,handleSubmit:d,resetForm:x,setValues:C,instruments:T,laboratoryInstruments:v,addLabInstrument:o,editLabInstrument:b,FormManager:H,saveForm:V,get Button(){return h},get Input(){return Z},get FormControl(){return ee},get FormField(){return X},get FormItem(){return $},get FormLabel(){return te},get FormMessage(){return j},get Select(){return ne},get SelectContent(){return le},get SelectItem(){return oe},get SelectTrigger(){return ae},get SelectValue(){return re},get Empty(){return ue},get EmptyContent(){return ie},get EmptyDescription(){return de},get EmptyHeader(){return se},get EmptyTitle(){return me},PageHeading:fe};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ge={class:"space-y-6"},ce={class:"border border-border bg-card rounded-lg shadow-md"},ye={class:"relative w-full overflow-auto"},_e={class:"text-lg font-semibold text-foreground"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fe={class:"flex justify-end"};function Ie(A,a,i,e,_,F){const m=f("TableHead"),u=f("TableRow"),I=f("TableHeader"),d=f("TableCell"),x=f("TableEmpty"),C=f("TableBody"),T=f("Table"),v=f("Modal");return g(),E(M,null,[c("div",ge,[t(e.PageHeading,{title:"Laboratory Instruments"},{default:r(()=>[t(e.Button,{onClick:a[0]||(a[0]=o=>e.FormManager(!0))},{default:r(()=>[...a[3]||(a[3]=[n(" Add Laboratory Instrument",-1)])]),_:1})]),_:1}),c("div",ce,[c("div",ye,[t(T,{class:"w-full caption-bottom text-sm"},{default:r(()=>[t(I,{class:"[&_tr]:border-b"},{default:r(()=>[t(u,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[t(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[4]||(a[4]=[n("Instrument",-1)])]),_:1}),t(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[5]||(a[5]=[n("Lab Name/ID",-1)])]),_:1}),t(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[6]||(a[6]=[n("Serial Number",-1)])]),_:1}),t(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[7]||(a[7]=[n("Date Commissioned",-1)])]),_:1}),t(m,{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[8]||(a[8]=[n("Date Decommissioned",-1)])]),_:1}),t(m,{class:"h-12 px-4 text-right align-middle font-medium text-muted-foreground"},{default:r(()=>[...a[9]||(a[9]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(C,{class:"[&_tr:last-child]:border-0"},{default:r(()=>[(g(!0),E(M,null,k(e.laboratoryInstruments,o=>(g(),S(u,{key:o?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:r(()=>[t(d,{class:"px-4 py-3 align-middle text-sm"},{default:r(()=>[n(y(o?.instrument?.name),1)]),_:2},1024),t(d,{class:"px-4 py-3 align-middle text-sm"},{default:r(()=>[n(y(o?.labName),1)]),_:2},1024),t(d,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:r(()=>[n(y(o?.serialNumber),1)]),_:2},1024),t(d,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:r(()=>[n(y(o?.dateCommissioned),1)]),_:2},1024),t(d,{class:"px-4 py-3 align-middle text-sm text-primary"},{default:r(()=>[n(y(o?.dateDecommissioned),1)]),_:2},1024),t(d,{class:"px-4 py-3 align-middle text-right"},{default:r(()=>[t(e.Button,{variant:"outline",size:"sm",onClick:b=>e.FormManager(!1,o)},{default:r(()=>[...a[10]||(a[10]=[n(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),!e.laboratoryInstruments||e.laboratoryInstruments.length===0?(g(),S(x,{key:0,colspan:6},{default:r(()=>[t(e.Empty,{class:"border-0 bg-transparent p-0"},{default:r(()=>[t(e.EmptyContent,null,{default:r(()=>[t(e.EmptyHeader,null,{default:r(()=>[t(e.EmptyTitle,null,{default:r(()=>[...a[11]||(a[11]=[n("No laboratory instruments found",-1)])]),_:1}),t(e.EmptyDescription,null,{default:r(()=>[...a[12]||(a[12]=[n("Add a laboratory instrument to get started.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1})])])]),e.showModal?(g(),S(v,{key:0,onClose:a[2]||(a[2]=o=>e.showModal=!1)},{header:r(()=>[c("h3",_e,y(e.formTitle),1)]),body:r(()=>[c("form",{onSubmit:a[1]||(a[1]=z((...o)=>e.saveForm&&e.saveForm(...o),["prevent"])),class:"space-y-6"},[c("div",pe,[t(e.FormField,{name:"instrumentUid"},{default:r(({componentField:o})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[13]||(a[13]=[n("Instrument",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Select,O(K(o)),{default:r(()=>[t(e.SelectTrigger,null,{default:r(()=>[t(e.SelectValue,{placeholder:"Select Instrument"})]),_:1}),t(e.SelectContent,null,{default:r(()=>[(g(!0),E(M,null,k(e.instruments,b=>(g(),S(e.SelectItem,{key:b?.uid,value:b.uid},{default:r(()=>[n(y(b?.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"labName"},{default:r(({componentField:o})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[14]||(a[14]=[n("Laboratory Name/ID",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,D(o,{placeholder:"Enter lab name or ID..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"serialNumber"},{default:r(({componentField:o})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[15]||(a[15]=[n("Serial Number",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,D(o,{placeholder:"Enter serial number..."}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"dateCommissioned"},{default:r(({componentField:o})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[16]||(a[16]=[n("Date Commissioned",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,D(o,{type:"date"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"dateDecommissioned"},{default:r(({componentField:o})=>[t(e.FormItem,null,{default:r(()=>[t(e.FormLabel,null,{default:r(()=>[...a[17]||(a[17]=[n("Date Decommissioned",-1)])]),_:1}),t(e.FormControl,null,{default:r(()=>[t(e.Input,D(o,{type:"date"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),c("div",Fe,[t(e.Button,{type:"submit"},{default:r(()=>[...a[18]||(a[18]=[n("Save Changes",-1)])]),_:1})])],32)]),_:1})):U("",!0)],64)}const He=q(be,[["render",Ie],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/LaboratoryInstruments.vue"]]);export{He as default};
