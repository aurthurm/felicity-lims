import{P as A,e as B,aa as F,Z as l,f as G,r as N,o as a,c as p,b as e,F as g,D as j,a1 as h,E as d,x as S,K as k,z as T,L as $,A as f,V as w,a as L,a2 as q,W as z,J,ar as K,aM as P,_ as Q}from"./index-f86d8273.js";import{U as W}from"./_queries-4c7a9cfd.js";import{e as Z,f as H,g as I}from"./grind.queries-12f686e0.js";import O from"./vue-multiselect.esm-1db37a44.js";const R=["onDblclick"],X={class:"absolute left-0 top-0 transform -translate-x-1/2 bg-white p-1 border border-gray-300 rounded-full w-4 h-4 flex items-center justify-center"},Y={class:"mb-6"},ee={class:"font-medium"},te={class:"text-sm text-gray-500"},se={class:"text-lg font-semibold"},oe={class:"mb-4"},re={class:"mb-4"},ne={class:"my-4 flex justify-start"},le={class:"flex justify-end"},ie={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-sky-600 border border-transparent rounded-md shadow-sm hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500"},ae=A({__name:"ErrandMilestone",props:{errandUid:{type:String,required:!0}},setup(M){const u=M,{withClientMutation:b,withClientQuery:y}=B();F(()=>{m(),V()});const v=l([]);function m(){y(Z,{errandUid:u.errandUid},"grindMilestonesByErrand").then(r=>{r&&(v.value=r)})}const n=l(!1),i=l(!1),c=l(""),o=G({});function U(){n.value=!0,c.value="Add Milestone",i.value=!0,K(o)}function _(r){n.value=!0,c.value="Edit Milestone",i.value=!1,P(o,r)}function C(){n.value=!1;const r={title:o.title,description:o.description,complete:o.complete,assigneeUid:o.assignee?.uid,errandUid:u.errandUid};i.value?b(H,{payload:{...r,errandUid:u.errandUid}},"createGrindMilestone").then(()=>m()):b(I,{uid:o.uid,payload:r},"updateGrindMilestone").then(()=>m())}function D({firstName:r,lastName:t}){return`${r} ${t}`}const x=l();function V(){y(W,{first:100},"userAll").then(r=>{x.value=r.items})}return(r,t)=>{const E=N("modal");return a(),p(g,null,[e("div",{class:"flex justify-between items-center"},[t[6]||(t[6]=e("h3",{class:"text-gray-700 font-medium"},"Milestones",-1)),e("button",{class:"text-sm text-gray-600 hover:text-gray-800 flex items-center gap-1",onClick:U},t[5]||(t[5]=[e("span",null,"+ Add New",-1)]))]),(a(!0),p(g,null,j(v.value,s=>(a(),p("div",{key:s.uid,class:h(["pl-6 border-l-2 relative",{"border-green-200":s.complete,"border-red-200":!s.complete}]),onDblclick:de=>_(s)},[e("div",X,[e("div",{class:h(["w-2 h-2 rounded-full",{"bg-green-500":s.complete,"bg-red-500":!s.complete}])},null,2)]),e("div",Y,[e("h4",ee,d(s.title),1),e("p",te,d(s.description),1)])],42,R))),128)),n.value?(a(),S(E,{key:0,onClose:t[4]||(t[4]=s=>n.value=!1),"content-width":"w-full max-w-2xl"},{header:k(()=>[e("h3",se,d(c.value),1)]),body:k(()=>[e("form",{onSubmit:T(C,["prevent"])},[e("div",oe,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"title"},[$(" Title "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>o.title=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter errand title"},null,512),[[w,o.title]])]),e("div",re,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"description"}," Description ",-1)),f(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=s=>o.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter errand description"},null,512),[[w,o.description]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Assignee",-1)),L(q(O),{modelValue:o.assignee,"onUpdate:modelValue":t[2]||(t[2]=s=>o.assignee=s),options:x.value,"track-by":"uid",searchable:!0,"custom-label":D,placeholder:"Select assignee"},null,8,["modelValue","options"])]),e("div",ne,[f(e("input",{id:"complete","onUpdate:modelValue":t[3]||(t[3]=s=>o.complete=s),type:"checkbox",class:"mr-2 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"},null,512),[[z,o.complete]]),t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1",for:"complete"}," Complete ",-1))]),e("div",le,[e("button",ie,d(i.value?"Create":"Update"),1)])],32)]),_:1})):J("",!0)],64)}}}),fe=Q(ae,[["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/grind/_id/ErrandMilestone.vue"]]);export{fe as default};
