const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FelDataTable-BRszqkhZ.js","assets/index-v7Q387fb.js","assets/index-c4lX_LAY.css","assets/vue-multiselect.esm-CWr9tQJL.js"])))=>i.map(i=>d[i]);
import{a0 as xe,f as ye,a7 as a,g as he,h as ke,ad as Te,ak as R,a1 as H,a6 as L,_ as Ce,r as V,c as x,o as g,A as n,C as Be,E as y,a as m,N as T,P as we,D as Ae,L as h,F as f,a2 as u,J as Me}from"./index-v7Q387fb.js";import{c as M,a as W,u as Ee,b as r}from"./index.esm-D-THTBXR.js";import{b as Se,a4 as Ie,a5 as Oe,c as Ue,a6 as _e,a7 as De,a8 as Ve,a9 as Pe}from"./microbiology.mutations-3L_SzLMl.js";const qe=xe({__name:"AbxBreakpoint",setup(z,{expose:e}){e();const P=H(()=>L(()=>import("./FelDataTable-BRszqkhZ.js"),__vite__mapDeps([0,1,2]))),o=H(()=>L(()=>import("./vue-multiselect.esm-CWr9tQJL.js"),__vite__mapDeps([3,1,2]))),{withClientMutation:C,withClientQuery:b}=ye();let p=a(!1),k=a("");const v=a(!0),s=a(null),q=M({guideline:M().required("Guideline year is required"),testMethod:M().required("Test method is required"),breakpointType:M().required("Breakpoint type is required"),organismCode:W().trim().required("Organism code is required"),organismCodeType:W().trim().required("Organism code type is required")}),{handleSubmit:G,resetForm:E,setValues:F,errors:J}=Ee({validationSchema:q,initialValues:{guideline:null,year:null,testMethod:null,potency:"",organismCode:"",organismCodeType:"",breakpointType:null,host:null,siteOfInfection:null,referenceTable:"",referenceSequence:"",whonetAbxCode:"",comments:"",r:"",i:"",sdd:"",s:"",ecvEcoff:"",ecvEcoffTentative:""}}),{value:K}=r("guideline"),{value:Q}=r("year"),{value:X}=r("testMethod"),{value:Z}=r("potency"),{value:j}=r("organismCode"),{value:$}=r("organismCodeType"),{value:ee}=r("breakpointType"),{value:oe}=r("host"),{value:te}=r("siteOfInfection"),{value:ne}=r("whonetAbxCode"),{value:se}=r("r"),{value:ie}=r("i"),{value:le}=r("sdd"),{value:re}=r("s"),{value:ae}=r("ecvEcoff"),{value:de}=r("ecvEcoffTentative"),N=a(!1),c=a([]),S=a([]),I=a([]),O=a([]),U=a([]),_=a([]);let d=he({first:50,after:"",text:"",sortBy:["-guideline_year___year"],filterAction:!1});const D=a(0);let B=a({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const fe=ke(()=>c?.value?.length+" of "+D.value+" antibiotics"),ue=a([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guidelineYear.code",sortable:!1,sortBy:"asc",hidden:!1},{name:"Test Method",value:"testMethod.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Potency",value:"potency",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCode",value:"organismCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCodeType",value:"organismCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"BreakpointType",value:"breakpointType.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Host",value:"host.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"SiteOfInfection",value:"siteOfInfection.name",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceSequence",value:"referenceSequence",sortable:!1,sortBy:"asc",hidden:!0},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"R",value:"r",sortable:!1,sortBy:"asc",hidden:!1},{name:"I",value:"i",sortable:!1,sortBy:"asc",hidden:!1},{name:"SDD",value:"sdd",sortable:!1,sortBy:"asc",hidden:!1},{name:"S",value:"s",sortable:!1,sortBy:"asc",hidden:!1},{name:"EcvEcoff",value:"ecvEcoff",sortable:!1,sortBy:"asc",hidden:!0},{name:"ecvEcoffTentative",value:"EcvEcoffTentative",sortable:!1,sortBy:"asc",hidden:!0}]);function w(t){b(Pe,{text:t.text,pageSize:t.first,sortBy:t.sortBy},void 0).then(i=>{const l=i.abxBreakpointAll,A=l.items;t.filterAction?(c.value=[],c.value=A):c.value=R(c.value,A,"uid"),D.value=l?.totalCount,B.value=l?.pageInfo}).finally(()=>{N.value=!1})}Te(()=>{b(Se,{},"abxGuidelineYearAll").then(t=>{t&&(S.value=t)}),w(d),b(Ie,{},"abxHostAll").then(t=>{t&&(I.value=t)}),b(Oe,{},"abxSiteOfInfectionAll").then(t=>{t&&(U.value=t)}),b(Ue,{},"abxTestMethodAll").then(t=>{t&&(_.value=t)}),b(_e,{},"abxBreakpointTypeAll").then(t=>{t&&(O.value=t)})});function ce(t){d.first=100,d.after="",d.text=t.filterText,d.filterAction=!0,w(d)}function be(t){d.first=t.fetchCount,d.after=B?.value?.endCursor,d.text=t.filterText,d.filterAction=!1,w(d)}const me=()=>E();function ge(t,i={}){v.value=t,p.value=!0,k.value=(t?"Create":"Edit")+" Breakpoint",t?(s.value=null,E()):(s.value=i.uid??null,F({guideline:S.value.find(l=>l.uid===i.guidelineYearUid)??i.guidelineYear??null,year:i.year??i.guidelineYear?.year??null,testMethod:_.value.find(l=>l.uid===i.testMethodUid)??i.testMethod??null,potency:i.potency??"",organismCode:i.organismCode??"",organismCodeType:i.organismCodeType??"",breakpointType:O.value.find(l=>l.uid===i.breakpointTypeUid)??i.breakpointType??null,host:I.value.find(l=>l.uid===i.hostUid)??i.host??null,siteOfInfection:U.value.find(l=>l.uid===i.siteOfInfectionUid)??i.siteOfInfection??null,referenceTable:i.referenceTable??"",referenceSequence:i.referenceSequence??"",whonetAbxCode:i.whonetAbxCode??"",comments:i.comments??"",r:i.r??"",i:i.i??"",sdd:i.sdd??"",s:i.s??"",ecvEcoff:i.ecvEcoff??"",ecvEcoffTentative:i.ecvEcoffTentative??""}))}const pe=G(t=>{const i={guidelineUid:t.guideline?.uid,year:t.year,testMethod:t.testMethod?.uid??"",potency:t.potency,organismCode:t.organismCode,organismCodeType:t.organismCodeType,breakpointTypeUid:t.breakpointType?.uid??"",hostUid:t.host?.uid,siteOfInfectionUid:t.siteOfInfection?.uid,referenceTable:t.referenceTable,referenceSequence:t.referenceSequence,whonetAbxCode:t.whonetAbxCode,comments:t.comments,r:t.r,i:t.i,sdd:t.sdd,s:t.s,ecvEcoff:t.ecvEcoff,ecvEcoffTentative:t.ecvEcoffTentative};v.value===!0&&C(De,{payload:i},"createAbxBreakpoint").then(l=>{l&&(c.value=R(c.value,[l],"uid"))}),v.value===!1&&s.value&&C(Ve,{uid:s.value,payload:i},"updateAbxBreakpoint").then(l=>{if(l){const A=c.value.findIndex(ve=>ve.uid==l.uid);c.value[A]=l}}),p.value=!1}),Y={DataTable:P,VueMultiselect:o,withClientMutation:C,withClientQuery:b,get showModal(){return p},set showModal(t){p=t},get formTitle(){return k},set formTitle(t){k=t},formAction:v,currentUid:s,breakpointSchema:q,handleSubmit:G,resetForm:E,setValues:F,errors:J,guideline:K,year:Q,testMethod:X,potency:Z,organismCode:j,organismCodeType:$,breakpointType:ee,host:oe,siteOfInfection:te,whonetAbxCode:ne,r:se,i:ie,sdd:le,s:re,ecvEcoff:ae,ecvEcoffTentative:de,fetchingBreakpoints:N,antibiotics:c,abxGuidelines:S,abxHosts:I,abxBreakpointTypes:O,abxSiteOfInfections:U,abxTestMethods:_,get abxParams(){return d},set abxParams(t){d=t},antibioticCount:D,get antibioticPageInfo(){return B},set antibioticPageInfo(t){B=t},countNone:fe,tableColumns:ue,fetchBreakpoints:w,searchBreakpoints:ce,showMoreBreakpoints:be,resetBreakpoint:me,FormManager:ge,saveForm:pe};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}}),Ge={class:"space-y-6"},Fe={class:"rounded-lg shadow-sm bg-card p-6"},Ne={class:"text-xl font-semibold text-foreground"},Ye={class:"space-y-4"},Re={class:"grid grid-cols-2 gap-4"},He={class:"block"},Le={key:0,class:"text-sm text-destructive"},We={class:"block"},ze={class:"space-y-4"},Je={class:"grid grid-cols-3 gap-4"},Ke={class:"block"},Qe={key:0,class:"text-sm text-destructive"},Xe={class:"block"},Ze={class:"block"},je={key:0,class:"text-sm text-destructive"},$e={class:"block"},eo={key:0,class:"text-sm text-destructive"},oo={class:"block"},to={key:0,class:"text-sm text-destructive"},no={class:"block"},so={class:"block"},io={class:"block"},lo={class:"block"},ro={class:"block"},ao={class:"block"},fo={class:"block"},uo={class:"block"},co={class:"block"};function bo(z,e,P,o,C,b){const p=V("fel-button"),k=V("fel-heading"),v=V("fel-modal");return g(),x(Me,null,[n("div",Ge,[m(k,{title:"Antibiotic Breakpoints"},{default:T(()=>[m(p,{onClick:e[0]||(e[0]=s=>o.FormManager(!0))},{default:T(()=>[...e[19]||(e[19]=[we("Add Breakpoint",-1)])]),_:1})]),_:1}),n("div",Fe,[m(o.DataTable,{columns:o.tableColumns,data:o.antibiotics,toggleColumns:!0,loading:o.fetchingBreakpoints,paginable:!0,pageMeta:{fetchCount:o.abxParams.first,hasNextPage:!0,countNone:o.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:o.searchBreakpoints,onOnSearchFocus:o.resetBreakpoint,onOnPaginate:o.showMoreBreakpoints,selectable:!1},{footer:T(()=>[...e[20]||(e[20]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),o.showModal?(g(),Be(v,{key:0,onClose:e[18]||(e[18]=s=>o.showModal=!1),"content-width":"w-1/2"},{header:T(()=>[n("h3",Ne,h(o.formTitle),1)]),body:T(()=>[n("form",{onSubmit:e[17]||(e[17]=Ae((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"space-y-6 p-4"},[n("div",Ye,[e[23]||(e[23]=n("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),n("div",Re,[n("label",He,[e[21]||(e[21]=n("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),m(o.VueMultiselect,{modelValue:o.guideline,"onUpdate:modelValue":e[1]||(e[1]=s=>o.guideline=s),options:o.abxGuidelines,searchable:!0,label:"code",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),o.errors.guideline?(g(),x("p",Le,h(o.errors.guideline),1)):y("",!0)]),n("label",We,[e[22]||(e[22]=n("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),f(n("input",{type:"number",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=s=>o.year=s),placeholder:"Year"},null,512),[[u,o.year,void 0,{number:!0}]])])])]),n("div",ze,[e[38]||(e[38]=n("h4",{class:"text-lg font-semibold text-foreground"},"Coding Systems",-1)),n("div",Je,[n("label",Ke,[e[24]||(e[24]=n("span",{class:"text-sm font-medium text-foreground"},"Test Method",-1)),m(o.VueMultiselect,{modelValue:o.testMethod,"onUpdate:modelValue":e[3]||(e[3]=s=>o.testMethod=s),options:o.abxTestMethods,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),o.errors.testMethod?(g(),x("p",Qe,h(o.errors.testMethod),1)):y("",!0)]),n("label",Xe,[e[25]||(e[25]=n("span",{class:"text-sm font-medium text-foreground"},"Potency",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=s=>o.potency=s),placeholder:"Potency"},null,512),[[u,o.potency]])]),n("label",Ze,[e[26]||(e[26]=n("span",{class:"text-sm font-medium text-foreground"},"Organism Code",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=s=>o.organismCode=s),placeholder:"Organism Code"},null,512),[[u,o.organismCode]]),o.errors.organismCode?(g(),x("p",je,h(o.errors.organismCode),1)):y("",!0)]),n("label",$e,[e[27]||(e[27]=n("span",{class:"text-sm font-medium text-foreground"},"Organism Code Type",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=s=>o.organismCodeType=s),placeholder:"Organism Code Type"},null,512),[[u,o.organismCodeType]]),o.errors.organismCodeType?(g(),x("p",eo,h(o.errors.organismCodeType),1)):y("",!0)]),n("label",oo,[e[28]||(e[28]=n("span",{class:"text-sm font-medium text-foreground"},"Breakpoint Type",-1)),m(o.VueMultiselect,{modelValue:o.breakpointType,"onUpdate:modelValue":e[7]||(e[7]=s=>o.breakpointType=s),options:o.abxBreakpointTypes,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"]),o.errors.breakpointType?(g(),x("p",to,h(o.errors.breakpointType),1)):y("",!0)]),n("label",no,[e[29]||(e[29]=n("span",{class:"text-sm font-medium text-foreground"},"Whonet AbxCode",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=s=>o.whonetAbxCode=s),placeholder:"Whonet AbxCode"},null,512),[[u,o.whonetAbxCode]])]),n("label",so,[e[30]||(e[30]=n("span",{class:"text-sm font-medium text-foreground"},"Host",-1)),m(o.VueMultiselect,{modelValue:o.host,"onUpdate:modelValue":e[9]||(e[9]=s=>o.host=s),options:o.abxHosts,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),n("label",io,[e[31]||(e[31]=n("span",{class:"text-sm font-medium text-foreground"},"Site of Infection",-1)),m(o.VueMultiselect,{modelValue:o.siteOfInfection,"onUpdate:modelValue":e[10]||(e[10]=s=>o.siteOfInfection=s),options:o.abxSiteOfInfections,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),n("label",lo,[e[32]||(e[32]=n("span",{class:"text-sm font-medium text-foreground"},"R",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=s=>o.r=s),placeholder:"R"},null,512),[[u,o.r]])]),n("label",ro,[e[33]||(e[33]=n("span",{class:"text-sm font-medium text-foreground"},"I",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[12]||(e[12]=s=>o.i=s),placeholder:"I"},null,512),[[u,o.i]])]),n("label",ao,[e[34]||(e[34]=n("span",{class:"text-sm font-medium text-foreground"},"SDD",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[13]||(e[13]=s=>o.sdd=s),placeholder:"SDD"},null,512),[[u,o.sdd]])]),n("label",fo,[e[35]||(e[35]=n("span",{class:"text-sm font-medium text-foreground"},"S",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[14]||(e[14]=s=>o.s=s),placeholder:"S"},null,512),[[u,o.s]])]),n("label",uo,[e[36]||(e[36]=n("span",{class:"text-sm font-medium text-foreground"},"EcvEcoff",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[15]||(e[15]=s=>o.ecvEcoff=s),placeholder:"EcvEcoff"},null,512),[[u,o.ecvEcoff]])]),n("label",co,[e[37]||(e[37]=n("span",{class:"text-sm font-medium text-foreground"},"EcvEcoff Tentative",-1)),f(n("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[16]||(e[16]=s=>o.ecvEcoffTentative=s),placeholder:"EcvEcoff Tentative"},null,512),[[u,o.ecvEcoffTentative]])])])]),e[39]||(e[39]=n("hr",{class:"border-border"},null,-1)),e[40]||(e[40]=n("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Breakpoint ",-1))],32)]),_:1})):y("",!0)],64)}const vo=Ce(qe,[["render",bo],["__scopeId","data-v-98440155"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/breakpoints/AbxBreakpoint.vue"]]);export{vo as default};
