import{a0 as M,f as T,a7 as g,a5 as R,h as C,_ as j,C as p,o as s,c as d,E as F,A as t,F as y,a2 as D,M as z,P as V,a as E,L as m,J as S,K as O,D as x,R as H,a4 as N,bm as q,aQ as J}from"./index-Cdc6vSVw.js";import{c as h,u as W}from"./DocumentEntry-DfC7FkJI.js";import{a as X}from"./document.mutations-rh2AUT34.js";import{C as Y}from"./plus-DHIovP-A.js";const Z=h("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const $=h("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);const ee=h("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const te=h("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);const B=h("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),oe=M({__name:"CreateDocumentDialog",props:{isOpen:{type:Boolean,required:!0},initialFolderId:{type:[String,null],required:!1}},emits:["update:isOpen"],setup(f,{expose:r,emit:i}){r();const e=f,l=i,{withClientMutation:u}=T(),o=W(),a=g(""),c=g(""),_=g(""),k=g(!1),v=g("");R(()=>e.initialFolderId,n=>{n&&(c.value=n)},{immediate:!0});const P=C(()=>{if(!v.value)return o.folders;const n=v.value.toLowerCase();return o.folders.filter(b=>b.name.toLowerCase().includes(n))}),G=C(()=>{const n=o.folders.find(b=>b.uid===c.value);return n?n.name:"Select folder"}),L=C(()=>a.value.trim()!==""&&c.value!=="");function K(n){c.value=n,k.value=!1}async function Q(){if(L.value)try{const n=await u(X,{payload:{name:a.value.trim(),folderUid:c.value,documentId:_.value.trim()}},"createDocument");if(n&&typeof n=="object"&&"uid"in n){const b=n;o.addDocument(b)}}catch(n){console.error("Failed to create document:",n)}finally{U()}}function U(){A(),l("update:isOpen",!1)}function A(){a.value="",_.value="",k.value=!1,v.value=""}const I={props:e,emit:l,withClientMutation:u,store:o,name:a,folderUid:c,documentId:_,isFolderSelectOpen:k,folderSearchQuery:v,filteredFolders:P,selectedFolderName:G,isFormValid:L,selectFolder:K,handleCreateDocument:Q,closeDialog:U,resetForm:A,vClickOutside:{mounted(n,b){n._clickOutside=w=>{n===w.target||n.contains(w.target)||b.value(w)},document.addEventListener("click",n._clickOutside)},unmounted(n){n._clickOutside&&document.removeEventListener("click",n._clickOutside)}},get ChevronDown(){return Y},get Check(){return Z}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),re={key:0,class:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",role:"dialog","aria-labelledby":"create-document-title","aria-modal":"true"},ne={class:"space-y-4"},ie={class:"relative"},se=["aria-expanded","aria-controls"],de={key:0,id:"folder-list",class:"absolute top-full left-0 z-10 mt-1 w-full rounded-md border border-border bg-card shadow-md"},ae={class:"max-h-[200px] overflow-auto p-1"},le=["onClick","aria-selected"],ce={key:1,class:"mr-2 w-4","aria-hidden":"true"},ue={class:"flex justify-end gap-2 mt-6"},me=["disabled"];function fe(f,r,i,e,l,u){return s(),p(H,{to:"body"},[i.isOpen?(s(),d("div",re,[t("div",{class:"bg-card rounded-lg shadow-lg p-6 max-w-sm w-full mx-4 border border-border",onClick:r[4]||(r[4]=x(()=>{},["stop"]))},[r[8]||(r[8]=t("h3",{id:"create-document-title",class:"text-lg font-medium text-card-foreground mb-4"},"Create new document",-1)),t("div",ne,[t("div",null,[r[5]||(r[5]=t("label",{for:"name",class:"block text-sm font-medium text-card-foreground mb-1"},"Document Name",-1)),y(t("input",{id:"name","onUpdate:modelValue":r[0]||(r[0]=o=>e.name=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document name",onKeyup:z(e.handleCreateDocument,["enter"])},null,544),[[D,e.name]])]),t("div",null,[r[6]||(r[6]=t("label",{for:"documentId",class:"block text-sm font-medium text-card-foreground mb-1"},"Document ID",-1)),y(t("input",{id:"documentId","onUpdate:modelValue":r[1]||(r[1]=o=>e.documentId=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter document id",onKeyup:z(e.handleCreateDocument,["enter"])},null,544),[[D,e.documentId]])]),t("div",null,[r[7]||(r[7]=t("label",{for:"folder",class:"block text-sm font-medium text-card-foreground mb-1"},"Folder",-1)),t("div",ie,[t("button",{id:"folder",type:"button",onClick:r[2]||(r[2]=o=>e.isFolderSelectOpen=!e.isFolderSelectOpen),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","aria-expanded":e.isFolderSelectOpen,"aria-controls":e.isFolderSelectOpen?"folder-list":void 0},[V(m(e.selectedFolderName)+" ",1),E(e.ChevronDown,{class:"ml-2 h-4 w-4 shrink-0 opacity-50","aria-hidden":"true"})],8,se),e.isFolderSelectOpen?y((s(),d("div",de,[t("div",ae,[y(t("input",{"onUpdate:modelValue":r[3]||(r[3]=o=>e.folderSearchQuery=o),class:"flex h-8 w-full rounded-sm border-0 bg-background px-3 py-1 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring mb-1",placeholder:"Search folders...","aria-label":"Search folders"},null,512),[[D,e.folderSearchQuery]]),(s(!0),d(S,null,O(e.filteredFolders,o=>(s(),d("button",{key:o.uid,onClick:a=>e.selectFolder(o.uid),class:"flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent text-left text-card-foreground","aria-selected":o.uid===e.folderUid},[o.uid===e.folderUid?(s(),p(e.Check,{key:0,class:"mr-2 h-4 w-4","aria-hidden":"true"})):(s(),d("span",ce)),V(" "+m(o.name),1)],8,le))),128))])])),[[e.vClickOutside,()=>e.isFolderSelectOpen=!1]]):F("",!0)])])]),t("div",ue,[t("button",{onClick:e.closeDialog,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Cancel "),t("button",{onClick:e.handleCreateDocument,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",disabled:!e.isFormValid}," Create ",8,me)])])])):F("",!0)])}const He=j(oe,[["render",fe],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/CreateDocumentDialog.vue"]]),be=M({__name:"DocumentCard",props:{document:{type:Object,required:!0}},setup(f,{expose:r}){r();const i=f,e=N();function l(){e.push({name:"document-editor",params:{documentVersionUid:i.document?.latestVersion?.uid}})}function u(a){return q(new Date(a),"MMM d, yyyy")}const o={props:i,router:e,handleEdit:l,formatDate:u,get File(){return $},get Edit(){return B}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),ge=["aria-label"],pe={class:"relative mb-4 rounded-lg overflow-hidden bg-muted aspect-3/4 flex items-center justify-center"},he={key:0,class:"w-full h-full"},ve=["src","alt"],ye={class:"absolute inset-0 flex items-center justify-center gap-x-2 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},xe=["aria-label"],_e={class:"h-12 w-12 rounded-full bg-background/90 flex items-center justify-center"},ke={class:"flex flex-col"},we=["title"],Ce={class:"text-xs text-muted-foreground mt-1"};function De(f,r,i,e,l,u){return s(),d("div",{class:"document-card animate-scale-in group bg-card rounded-lg border border-border p-4 transition-all hover:shadow-md hover:border-accent",role:"article","aria-label":`Document: ${i.document.name}`},[t("div",pe,[i.document?.latestVersion?.thumbnail?(s(),d("div",he,[t("img",{src:`data:image/png;base64,${i.document?.latestVersion?.thumbnail}`,alt:i.document.name,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,ve),r[0]||(r[0]=t("div",{class:"absolute inset-0 bg-linear-to-t from-foreground/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300","aria-hidden":"true"},null,-1))])):(s(),p(e.File,{key:1,class:"text-muted-foreground w-12 h-12","aria-hidden":"true"})),t("div",ye,[t("button",{onClick:x(e.handleEdit,["stop"]),class:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full transition-transform hover:scale-105","aria-label":`Edit document: ${i.document.name}`},[t("div",_e,[E(e.Edit,{class:"text-foreground w-5 h-5","aria-hidden":"true"})])],8,xe)])]),t("div",ke,[t("h3",{class:"font-medium text-sm text-card-foreground truncate",title:i.document.name},m(i.document.name),9,we),t("p",Ce," Updated "+m(e.formatDate(i.document.updatedAt)),1)])],8,ge)}const Fe=j(be,[["render",De],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentCard.vue"]]),Ve=M({__name:"DocumentListing",props:{documents:{type:Array,required:!0}},setup(f,{expose:r}){r();const i=g(!1);function e(c){return q(new Date(c),"MMM d, yyyy")}const l=N();function u(c){l.push({name:"document-editor",params:{documentVersionUid:c?.latestVersion?.uid}})}function o(){i.value=!i.value}const a={isCardView:i,formatDate:e,router:l,handleEdit:u,toggleView:o,get Edit(){return B},get LayoutGrid(){return ee},get List(){return te},DocumentCard:Fe};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),Se={class:"space-y-4",role:"region","aria-label":"Document listing"},Oe={class:"flex justify-end"},Me=["aria-label","aria-pressed"],je={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},Ee={key:1,class:"overflow-x-auto rounded-lg border border-border bg-card"},Le={class:"min-w-full divide-y divide-border"},Ue={class:"divide-y divide-border bg-card"},Ae=["onClick","aria-label"],Ie={class:"px-4 py-3 text-sm text-muted-foreground"},ze={class:"px-4 py-3 text-sm text-muted-foreground"},Ne={class:"px-4 py-3 text-sm"},qe=["onClick","aria-label"],Be={key:0};function Pe(f,r,i,e,l,u){return s(),d("div",Se,[t("div",Oe,[t("button",{onClick:e.toggleView,class:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2","aria-label":`Switch to ${e.isCardView?"list":"grid"} view`,"aria-pressed":e.isCardView},[(s(),p(J(e.isCardView?e.List:e.LayoutGrid),{class:"w-4 h-4 mr-2","aria-hidden":"true"})),V(" "+m(e.isCardView?"List View":"Grid View"),1)],8,Me)]),e.isCardView?(s(),d("div",je,[(s(!0),d(S,null,O(i.documents,o=>(s(),p(e.DocumentCard,{key:o.uid,document:o},null,8,["document"]))),128))])):(s(),d("div",Ee,[t("table",Le,[r[1]||(r[1]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Name"),t("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Created At"),t("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Updated At"),t("th",{scope:"col",class:"py-3 px-4 text-left text-sm font-medium text-muted-foreground"},"Actions")])],-1)),t("tbody",Ue,[(s(!0),d(S,null,O(i.documents,o=>(s(),d("tr",{key:o.uid,class:"hover:bg-accent/50 transition-colors"},[t("td",{class:"px-4 py-3 text-sm font-medium text-card-foreground cursor-pointer hover:text-accent-foreground",onClick:x(a=>e.handleEdit(o),["stop"]),role:"button","aria-label":`Edit document: ${o.name}`},m(o.name),9,Ae),t("td",Ie,m(e.formatDate(o.createdAt)),1),t("td",ze,m(e.formatDate(o.updatedAt)),1),t("td",Ne,[t("button",{onClick:x(a=>e.handleEdit(o),["stop"]),class:"inline-flex items-center justify-center rounded-full h-8 w-8 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground","aria-label":`Edit document: ${o.name}`},[E(e.Edit,{class:"w-4 h-4","aria-hidden":"true"})],8,qe)])]))),128)),i.documents.length===0?(s(),d("tr",Be,[...r[0]||(r[0]=[t("td",{colspan:"4",class:"px-4 py-8 text-center text-sm text-muted-foreground"}," No documents found ",-1)])])):F("",!0)])])]))])}const Je=j(Ve,[["render",Pe],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/components/document/DocumentListing.vue"]]);export{He as C,Je as D};
