import{a0 as I,f as U,ag as L,a7 as k,h as w,ae as a,aA as O,ad as V,aB as j,i as F,aC as G,_ as Q,c as s,A as t,F as S,a9 as C,b as W,J as P,K as D,L as N,Q as b,P as z,o as l}from"./index-v7Q387fb.js";import{u as H}from"./setup-sVxge2CR.js";const K=I({__name:"UserPreferences",setup(M,{expose:o}){o();const{withClientQuery:c,withClientMutation:e}=U(),i=H(),{toastSuccess:u,toastError:n}=F(),{initPreferences:d,toggleDepartment:E,isDepartmentSelected:A,theme:y,expandedMenu:h,defaultRoute:x,departments:p}=L(),g=k(!0),f=k(!1),B=w(()=>i.getDepartments),R=w(()=>[{label:"Dashboard",value:"/dashboard",page:a.DASHBOARD},{label:"Patients",value:"/patients",page:a.PATIENTS},{label:"Patients Compact",value:"/patients-compact",page:a.PATIENTS_COMPACT},{label:"Clients",value:"/clients",page:a.CLIENTS},{label:"Samples",value:"/samples",page:a.SAMPLES},{label:"Quality Control",value:"/quality-control",page:a.QC_SAMPLES},{label:"Worksheets",value:"/worksheets",page:a.WORKSHEETS},{label:"Referrals",value:"/shipments",page:a.REFERRAL},{label:"Bio-Banking",value:"/bio-banking",page:a.BIO_BANKING},{label:"Inventory",value:"/inventory",page:a.INVENTORY},{label:"Notice Manager",value:"/notice-manager",page:a.NOTICE_MANAGER},{label:"Projects/Schemes",value:"/schemes",page:a.SCHEMES},{label:"Documents",value:"/documents",page:a.DOCUMENT},{label:"Billing",value:"/billing",page:a.BILLING},{label:"Administration",value:"/admin",page:a.ADMINISTRATION}].filter(r=>O(r.page)));V(()=>{i.fetchDepartments({}),m()});function m(){g.value=!0,c(j,{},"userPreferences").then(r=>{r&&d(r)}).finally(()=>{g.value=!1})}async function T(){f.value=!0;const r={expandedMenu:h.value,theme:y.value,defaultRoute:x.value||void 0,departments:p.value.length>0?p.value.map(v=>v.uid):void 0};try{e(G,{preferencesIn:r},"updateUserPreferences").then(()=>{u("Preferences updated successfully"),m()}).catch(v=>{n(v?.message||"Failed to update preferences")})}finally{f.value=!1}}const _={withClientQuery:c,withClientMutation:e,setupStore:i,toastSuccess:u,toastError:n,initPreferences:d,toggleDepartment:E,isDepartmentSelected:A,theme:y,expandedMenu:h,defaultRoute:x,departments:p,loading:g,saving:f,allDepartments:B,availablePages:R,fetchUserPreferences:m,savePreferences:T};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),q={class:"w-full space-y-6"},J={key:0,class:"flex justify-center items-center h-32"},Y={key:1,class:"space-y-6"},X={class:"grid grid-cols-2 gap-4"},Z={class:"space-y-2"},$={class:"space-y-2"},ee=["value"],te={class:"flex items-center justify-between"},oe=["aria-checked"],ne={class:"space-y-3"},ae={key:0,class:"text-sm text-muted-foreground italic"},se={key:1,class:"grid grid-cols-2 gap-4"},le=["id","checked","onChange"],re=["for"],ie={class:"flex justify-end gap-3 pt-4"},ce=["disabled"],ue=["disabled"],de={key:0,class:"flex items-center gap-2"},pe={key:1};function ge(M,o,c,e,i,u){return l(),s("div",q,[e.loading?(l(),s("div",J,[...o[3]||(o[3]=[t("svg",{class:"w-6 h-6 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3.5-3.5L12 0v4a8 8 0 11-8 8z"})],-1)])])):(l(),s("div",Y,[t("div",X,[t("div",Z,[o[5]||(o[5]=t("label",{class:"block text-l font-semibold text-foreground"}," Theme ",-1)),S(t("select",{"onUpdate:modelValue":o[0]||(o[0]=n=>e.theme=n),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[...o[4]||(o[4]=[W('<option value="light">Light</option><option value="dark">Dark</option><option value="black-and-white">Black and White</option><option value="sterile">Sterile</option><option value="clinical-blue">Clinical Blue</option><option value="emergency-red">Emergency Red</option><option value="sterile-green">Sterile Green</option><option value="warm-neutral">Warm Neutral</option><option value="cool-slate">Cool Slate</option><option value="corporate-navy">Corporate Navy</option>',10)])],512),[[C,e.theme]])]),t("div",$,[o[7]||(o[7]=t("label",{class:"block text-l font-semibold text-foreground"}," Default Route ",-1)),S(t("select",{"onUpdate:modelValue":o[1]||(o[1]=n=>e.defaultRoute=n),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[o[6]||(o[6]=t("option",{value:""},"No preference (Dashboard)",-1)),(l(!0),s(P,null,D(e.availablePages,n=>(l(),s("option",{key:n.value,value:n.value},N(n.label),9,ee))),128))],512),[[C,e.defaultRoute]])])]),t("div",te,[o[8]||(o[8]=t("label",{class:"text-l font-semibold text-foreground"}," Expanded Menu ",-1)),t("button",{onClick:o[2]||(o[2]=n=>e.expandedMenu=!e.expandedMenu),class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",e.expandedMenu?"bg-primary":"bg-muted"]),role:"switch","aria-checked":e.expandedMenu},[t("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-background transition-transform",e.expandedMenu?"translate-x-6":"translate-x-1"])},null,2)],10,oe)]),t("div",ne,[o[9]||(o[9]=t("label",{class:"block text-l font-semibold text-foreground"}," Departments Filter ",-1)),e.allDepartments.length===0?(l(),s("div",ae," No departments available ")):(l(),s("div",se,[(l(!0),s(P,null,D(e.allDepartments,n=>(l(),s("div",{key:n.uid,class:"flex items-center"},[t("input",{id:`dept-${n.uid}`,type:"checkbox",checked:e.isDepartmentSelected(n.uid),onChange:d=>e.toggleDepartment(n),class:"h-4 w-4 rounded border-input bg-background cursor-pointer focus:outline-none focus:ring-2 focus:ring-ring"},null,40,le),t("label",{for:`dept-${n.uid}`,class:"ml-2 text-sm font-medium text-foreground cursor-pointer"},N(n.name),9,re)]))),128))]))]),t("div",ie,[t("button",{type:"button",onClick:e.fetchUserPreferences,disabled:e.saving,class:"px-4 py-2 text-sm font-medium rounded-lg border border-input bg-background text-foreground hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,ce),t("button",{type:"button",onClick:e.savePreferences,disabled:e.saving||e.loading,class:b(["px-4 py-2 text-sm font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-ring",e.saving?"bg-primary/50 text-primary-foreground cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"])},[e.saving?(l(),s("span",de,[...o[10]||(o[10]=[t("svg",{class:"w-4 h-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3.5-3.5L12 0v4a8 8 0 11-8 8z"})],-1),z(" Saving... ",-1)])])):(l(),s("span",pe,"Save Preferences"))],10,ue)])]))])}const ve=Q(K,[["render",ge],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/user/UserPreferences.vue"]]);export{ve as default};
