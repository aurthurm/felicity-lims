import{a0 as I,aq as A,a7 as f,ad as w,a5 as L,_ as k,r as S,c as y,o as h,E as B,A as e,a as N,L as g}from"./index-v7Q387fb.js";import{C as x}from"./index-u1GM8hOO.js";import{u as j}from"./dashboard-DNWjftU4.js";import"./index-BkD7Hj8s.js";import"./ticks-yQcwDFE8.js";import"./arc-B8IjlRao.js";import"./rgb-Co1IAoj1.js";import"./math-CyDA0WRY.js";import"./index-DaJBD5B5.js";import"./defaultLocale-D2nGpDRe.js";import"./Tableau10-1LCcg9PS.js";import"./range-OtVwhkKS.js";const F=I({__name:"Laggard",setup(_,{expose:a}){a();const d=j(),{dashboard:l}=A(d),c=f(0),u=f(0);w(()=>{d.getSampleLaggards()}),L(()=>l.value.laggards,(n,r)=>{const t=n?.filter(p=>p?.category==="delayed_and_incomplete")[0],o=n?.filter(p=>p?.category==="authorised_already_delayed")[0];c.value=t?.counts?.totalIncomplete??0;const s=[{item:"On-Time",count:t?.counts?.totalDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalDelayed/t?.counts?.totalIncomplete*100:0},{item:"Delayed",count:t?.counts?.totalNotDelayed,percent:t?.counts?.totalIncomplete>0?t?.counts?.totalNotDelayed/t?.counts?.totalIncomplete*100:0}];m(s,"late-active-donut");const b=[{type:"<10",value:t?.counts?.lessThanTen},{type:"10 - 20",value:t?.counts?.tenToTwenty},{type:"20 - 30",value:t?.counts?.twentyToThirty},{type:"> 30",value:t?.counts?.graterThanThirty}];i(b,"late-active-since","days since created","number of samples"),u.value=o?.counts?.totalIncomplete??0;const D=[{item:"On-Time",count:o?.counts?.totalDelayed,percent:o?.counts?.totalIncomplete>0?o?.counts?.totalDelayed/o?.counts?.totalIncomplete*100:0},{item:"Delayed",count:o?.counts?.totalNotDelayed,percent:o?.counts?.totalIncomplete>0?o?.counts?.totalNotDelayed/o?.counts?.totalIncomplete*100:0}];m(D,"late-auth-donut");const T=[{type:"<10",value:o?.counts?.lessThanTen},{type:"10 - 20",value:o?.counts?.tenToTwenty},{type:"20 - 30",value:o?.counts?.twentyToThirty},{type:"> 30",value:o?.counts?.graterThanThirty}];i(T,"late-auth-since","days: created to authorised","number of samples")});const i=(n,r,t,o)=>{const s=new x({container:r,autoFit:!0,height:200,width:600});s.data(n),s.scale({value:{max:150,min:0,alias:o},type:{alias:t}}),s.axis("type",{title:{offset:60,style:{fontSize:12,fontWeight:300}},tickLine:null,line:null}),s.axis("value",{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),s.legend(!1),s.coordinate().transpose(),s.interval().position("type*value").size(26).label("value",{style:{fill:"#8d8d8d"},offset:10}),s.interaction("element-active"),s.render()},m=(n,r)=>{const t=new x({container:r,autoFit:!0,height:150,width:300});t.data(n),t.scale("percent",{formatter:o=>`${(o*100).toFixed(2)}%`}),t.coordinate("theta",{radius:.75,innerRadius:.6}),t.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),t.annotation(),t.interval().adjust("stack").position("percent").color("item").label("percent",{content:o=>`${o.item}: ${(o.percent*100).toFixed(2)}%`}).tooltip("item*percent",(o,s)=>({name:o,value:`${(s*100).toFixed(2)}%`})),t.interaction("element-active"),t.render()},v={dashBoardStore:d,dashboard:l,totalIncompleteDAI:c,totalIncompleteAAD:u,plotLateSince:i,plotLateDonut:m,resetLateActive:()=>{const n=document.getElementById("late-active");n&&(n.innerHTML=`
      <div class="mx-8">
        <div id="late-active-donut"></div>
      </div>
      <div>
        <div id="late-active-since"></div>
      </div>
    `)},resetLateAuth:()=>{const n=document.getElementById("late-auth");n&&(n.innerHTML=`
      <div class="mx-8">
        <div id="late-auth-donut"></div>
      </div>
      <div>
        <div id="late-auth-since"></div>
      </div>
    `)}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),C={class:"mt-4"},$={key:0,class:"text-start my-4"},E={class:"flex justify-start items-center"},M={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},z={class:"font-bold text-foreground text-2xl"},O={class:"mt-8"},V={class:"flex justify-start items-center"},H={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},R={class:"font-bold text-foreground text-2xl"};function W(_,a,d,l,c,u){const i=S("fel-loader");return h(),y("div",C,[l.dashboard.fetchingLaggards?(h(),y("div",$,[N(i,{message:"Fetching laggard stats..."})])):B("",!0),e("section",null,[a[2]||(a[2]=e("h1",{class:"text-xl text-foreground font-semibold"},"Delayed and incomplete",-1)),a[3]||(a[3]=e("hr",{class:"my-2"},null,-1)),e("div",E,[e("div",M,[e("div",z,g(l.totalIncompleteDAI),1),a[0]||(a[0]=e("div",{class:"font-semibold text-muted-foreground"},"Already Delayed",-1))]),a[1]||(a[1]=e("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[e("div",{class:"me-8"},[e("div",{id:"late-active-donut"})]),e("div",null,[e("div",{id:"late-active-since"})])],-1))])]),e("section",O,[a[6]||(a[6]=e("h1",{class:"text-xl text-foreground font-semibold"},"Authorised already delayed",-1)),a[7]||(a[7]=e("hr",{class:"my-2"},null,-1)),e("div",V,[e("div",H,[e("div",R,g(l.totalIncompleteAAD),1),a[4]||(a[4]=e("div",{class:"font-semibold text-muted-foreground"},"Authorised Already Delayed",-1))]),a[5]||(a[5]=e("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[e("div",{class:"me-8"},[e("div",{id:"late-auth-donut"})]),e("div",null,[e("div",{id:"late-auth-since"})])],-1))])])])}const st=k(F,[["render",W],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{st as default};
