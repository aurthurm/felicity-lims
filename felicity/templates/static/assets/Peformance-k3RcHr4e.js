import{d7 as Q,d8 as x,d9 as yt,da as B,bS as Pl,Y as Ll,aB as Cl,a0 as ze,a7 as li,ah as Rl,an as un,bo as si,_ as zl,c as Lt,o as Ct,z as Y,F as ci,H as ui,I as me,a as Ot,K as $t,M as fn}from"./index-OdhKCqIc.js";import{i as lt,a as gt,b as et,r as xt,t as $l,g as _l,c as Nl,d as Vl,e as Wl,f as Bl,p as ql,h as Gl,j as Ul,z as Hl,k as Xl,l as Yl,m as jl,n as E,o as st,q as Oe,s as Zl,u as ma,v as Kl,w as dn,x as hn,y as Ql,A as Jn,B as fi,D as di,E as L,F as ve,G as kt,H as Ln,I as Xe,J as Cn,K as xa,C as Fa,L as Jl,M as Tt,N as Jt,O as St,P as it,Q as ba,R as ts,S as Sa,T as Rn,U as Ye,V as ae,W as ct,X as Nt,Y as Aa,Z as es,_ as Ue,$ as hi,a0 as Pr,a1 as wa,a2 as ns,a3 as vi,a4 as rs,a5 as Vt,a6 as tr,a7 as is,a8 as as,a9 as os,aa as zn,ab as ls,ac as ss,ad as er,ae as pi,af as gi,ag as cs,ah as us}from"./index-Bq8gZhK2.js";import{i as fs}from"./isArray-Dxzbedgu.js";import{u as ds}from"./dashboard-Ahkf2TxK.js";import{E as hs,a as vs,b as ps,c as gs,d as ys}from"./EmptyTitle-aCQRDpx3.js";import{S as ms}from"./Spinner-Bl8RfjFA.js";import"./value-Cwgbb3dI.js";import"./string-CE8GzbCR.js";function Da(t,e,n){n===void 0&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}function xs(t,e){var n;if(lt(e))n=function(i,a){return e(i)-e(a)};else{var r=[];gt(e)?r.push(e):et(e)&&(r=e),n=function(i,a){for(var o=0;o<r.length;o+=1){var s=r[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(n),t}const Ea=(function(t,e){if(et(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=lt(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}}),Fs=(function(t,e){if(et(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=lt(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}}),$n=(function(t,e){return xt(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})});var Ft={getLegendItems:jl,translate:Yl,rotate:Xl,zoom:Hl,transform:$l,getAngle:Ul,getSectorPath:Gl,polarToCartesian:ql,getDelegationObject:Bl,getTooltipItems:Wl,getMappingValue:Vl,getPath:Nl,getPathPoints:_l},mt=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],zt;(function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"})(zt||(zt={}));var bs="AntV/G2Plot";function Ss(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return"".concat(bs,": ").concat(t.replace(/%s/g,function(){return"".concat(e[r++])}))}function Qt(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t](Ss.apply(void 0,Q([n],r,!1)))}function J(t,e){var n={};return t!==null&&typeof t=="object"&&e.forEach(function(r){var i=t[r];i!==void 0&&(n[r]=i)}),n}function Lr(t,e){if(!t)return{};var n=t.filter(function(a){var o=E(a,[e]);return st(o)&&!isNaN(o)}),r=n.every(function(a){return E(a,[e])>=0}),i=n.every(function(a){return E(a,[e])<=0});return r?{min:0}:i?{max:0}:{}}function Oa(t,e,n,r,i){if(i===void 0&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],o={},s=-1;return t.forEach(function(l){var c=l[e],u=l[n],d=l[r],f=J(l,i);o[c]||(o[c]=x({id:++s,name:c},f)),o[u]||(o[u]=x({id:++s,name:u},f)),a.push(x({source:o[c].id,target:o[u].id,value:d},f))}),{nodes:Object.values(o).sort(function(l,c){return l.id-c.id}),links:a}}function Ae(t,e){var n=Oe(t,function(r){var i=r[e];return i===null||typeof i=="number"&&!isNaN(i)});return Qt(zt.WARN,n.length===t.length,"illegal data existed in chart data."),n}var As=5,ws={}.toString,Ia=function(t,e){return ws.call(t)==="[object "+e+"]"},Ds=function(t){return Ia(t,"Array")},Es=function(t){return typeof t=="object"&&t!==null},yi=function(t){if(!Es(t)||!Ia(t,"Object"))return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ma=function(t,e,n,r){n=n||0,r=r||As;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];a?yi(a)?(yi(t[i])||(t[i]={}),n<r?Ma(t[i],a,n+1,r):t[i]=e[i]):Ds(a)?(t[i]=[],t[i]=t[i].concat(a)):t[i]=a:t[i]=a}},A=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Ma(t,e[r]);return t};function xr(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function N(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.reduce(function(r,i){return i(r)},n)}}function vt(t,e){return t.geometries.find(function(n){return n.type===e})}function On(t){return xt(t.geometries,function(e,n){return e.concat(n.elements)},[])}function je(t){return E(t,["views","length"],0)<=0?On(t):xt(t.views,function(e,n){return e.concat(je(n))},On(t))}function Os(t){return E(t,["views","length"],0)<=0?t.geometries:xt(t.views,function(e,n){return e.concat(n.geometries)},t.geometries)}function mi(t){if(!t)return t;var e=t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return e.map(function(n){return n.toLowerCase()}).join("-")}function ht(t){if(!Zl(t,"Object"))return t;var e=x({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}var nr;function Is(){return nr||(nr=document.createElement("canvas").getContext("2d")),nr}ma(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,l=Is();l.font=[o,a,s,"".concat(n,"px"),i].join(" ");var c=l.measureText(gt(t)?t:"");return c.width},function(t,e){return e===void 0&&(e={}),Q([t],Kl(e),!0).join("")});function fe(t){return typeof t=="number"&&!isNaN(t)}function Ms(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function ee(t){if(st(t))return[t,t,t,t];if(et(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}function _n(t,e,n){e===void 0&&(e="bottom"),n===void 0&&(n=25);var r=ee(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function Cr(t){var e=t.map(function(r){return ee(r)}),n=[0,0,0,0];return e.length>0&&(n=n.map(function(r,i){return e.forEach(function(a,o){r+=e[o][i]}),r})),n}function ks(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];n.push(["L",a.x,a.y])}}return n}var Ts=function(t,e,n,r){var i=[],a,o,s=!!r,l,c;if(s){l=[1/0,1/0],c=[-1/0,-1/0];for(var u=0,d=t.length;u<d;u++){var f=t[u];l=dn([0,0],l,f),c=hn([0,0],c,f)}l=dn([0,0],l,r[0]),c=hn([0,0],c,r[1])}for(var u=0,h=t.length;u<h;u++){var f=t[u];if(u===0||u===h-1){i.push(f);continue}else a=t[u-1],o=t[u+1];var v=[0,0];v=Ql(v,o,a),v=Jn(v,v,e);var p=fi(f,a),y=fi(f,o),g=p+y;g!==0&&(p/=g,y/=g);var m=Jn([0,0],v,-p),F=Jn([0,0],v,y),S=di([0,0],f,m),b=di([0,0],f,F);s&&(S=hn([0,0],S,l),S=dn([0,0],S,c),b=hn([0,0],b,l),b=dn([0,0],b,c)),i.push(S),i.push(b)}return i};function Ps(t,e,n){for(var r=!1,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=Ts(i,.4,r,n),l=i.length,c=[],u,d,f,a=0;a<l-1;a++)u=s[a*2],d=s[a*2+1],f=i[a+1],c.push(["C",u[0],u[1],d[0],d[1],f[0],f[1]]);return c}function Ls(t,e,n){var r=[],i=t[0],a=null;if(t.length<=2)return ks(t);for(var o=0,s=t.length;o<s;o++){var l=t[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var c=[[0,0],[1,1]],u=Ps(r,e,c);return u.unshift(["M",i.x,i.y]),u}function ka(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];E(t,"fill")&&(e.color=t.fill);var r=J(t,n),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,s=r.shadowOffsetX,l=s===void 0?0:s,c=r.shadowOffsetY,u=c===void 0?0:c;e["text-shadow"]="".concat([i,"".concat(l,"px"),"".concat(u,"px"),"".concat(o,"px")].join(" "));var d=J(t,n),f=d.stroke,h=d.lineWidth,v=h===void 0?0:h;return e["-webkit-text-stroke"]="".concat(["".concat(v,"px"),f].join(" ")),L(t,function(p,y){["fontSize"].includes(y)&&st(p)?e[mi(y)]="".concat(p,"px"):y&&!n.includes(y)&&(e[mi(y)]="".concat(p))}),e}function Ta(t,e){t.style["pointer-events"]="none",L(e,function(n,r){r&&n&&(t.style[r]=n)})}var Nn=function(t,e,n){var r=e.statistic,i=e.plotType,a=r.title,o=r.content;[a,o].forEach(function(s,l){if(s){var c="";l===0?c=o?"translate(-50%, -100%)":"translate(-50%, -50%)":c=a?"translate(-50%, 0)":"translate(-50%, -50%)";var u=lt(s.style)?s.style(n):s.style;t.annotation().html(x({position:["50%","50%"],html:function(d,f){var h=f.getCoordinate(),v=0;if(i==="pie"||i==="ring-progress")v=h.getRadius()*h.innerRadius*2;else if(i==="liquid"){var p=E(f.geometries,[0,"elements",0,"shape"]);if(p){var y=p.find(function(S){return S.get("name")==="wrap"}),g=y.getCanvasBBox().width;v=g}}else v||(v=h.getWidth());Ta(d,x({width:"".concat(v,"px"),transform:c},ka(u)));var m=f.getData();if(s.customHtml)return s.customHtml(d,f,n,m);var F=s.content;return s.formatter&&(F=s.formatter(n,m)),F?gt(F)?F:"".concat(F):"<div></div>"},key:"".concat(l===0?"top":"bottom","-statistic")},J(s,["offsetX","offsetY","rotate","style","formatter"])))}})},Cs=function(t,e,n){var r=e.statistic,i=r.title,a=r.content;[i,a].forEach(function(o){if(o){var s=lt(o.style)?o.style(n):o.style;t.annotation().html(x({position:["50%","100%"],html:function(l,c){var u=c.getCoordinate(),d=c.views[0].getCoordinate(),f=d.getCenter(),h=d.getRadius(),v=Math.max(Math.sin(d.startAngle),Math.sin(d.endAngle))*h,p=f.y+v-u.y.start-parseFloat(E(s,"fontSize",0)),y=u.getRadius()*u.innerRadius*2;Ta(l,x({width:"".concat(y,"px"),transform:"translate(-50%, ".concat(p,"px)")},ka(s)));var g=c.getData();if(o.customHtml)return o.customHtml(l,c,n,g);var m=o.content;return o.formatter&&(m=o.formatter(n,g)),m?gt(m)?m:"".concat(m):"<div></div>"}},J(o,["offsetX","offsetY","rotate","style","formatter"])))}})};function Pa(t,e){return e?xt(e,function(n,r,i){return n.replace(new RegExp("{\\s*".concat(i,"\\s*}"),"g"),r)},t):t}function G(t,e){return t.views.find(function(n){return n.id===e})}function Be(t){var e=t.parent;return e?e.views:[]}function xi(t){return Be(t).filter(function(e){return e!==t})}function rn(t,e,n){n===void 0&&(n=t.geometries),typeof e=="boolean"?t.animate(e):t.animate(!0),L(n,function(r){var i;lt(e)?i=e(r.type||r.shapeType,r)||!0:i=e,r.animate(i)})}function Vn(){return typeof window=="object"?window?.devicePixelRatio:2}function Rr(t,e){e===void 0&&(e=t);var n=document.createElement("canvas"),r=Vn();n.width=t*r,n.height=e*r,n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px");var i=n.getContext("2d");return i.scale(r,r),n}function zr(t,e,n,r){r===void 0&&(r=n);var i=e.backgroundColor,a=e.opacity;t.globalAlpha=a,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function La(t,e,n){var r=t+e;return n?r*2:r}function Ca(t,e){var n=e?[[t*.25,t*.25],[t*.75,t*.75]]:[[t*.5,t*.5]];return n}function $r(t,e){var n=e*Math.PI/180,r={a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0};return r}var Rs={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function zs(t,e,n,r){var i=e.size,a=e.fill,o=e.lineWidth,s=e.stroke,l=e.fillOpacity;t.beginPath(),t.globalAlpha=l,t.fillStyle=a,t.strokeStyle=s,t.lineWidth=o,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),o&&t.stroke(),t.closePath()}function $s(t){var e=A({},Rs,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=La(n,r,i),s=Ca(o,i),l=Rr(o,o),c=l.getContext("2d");zr(c,e,o);for(var u=0,d=s;u<d.length;u++){var f=d[u],h=f[0],v=f[1];zs(c,e,h,v)}var p=c.createPattern(l,"repeat");if(p){var y=Vn(),g=$r(y,a);p.setTransform(g)}return p}var _s={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function Ns(t,e,n){var r=e.stroke,i=e.lineWidth,a=e.strokeOpacity,o=new Path2D(n);t.globalAlpha=a,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(o)}function Vs(t){var e=A({},_s,t),n=e.spacing,r=e.rotation,i=e.lineWidth,a=n+i||1,o=n+i||1,s=`
            M 0 0 L `.concat(a,` 0
            M 0 `).concat(o," L ").concat(a," ").concat(o,`
            `),l=Rr(a,o),c=l.getContext("2d");zr(c,e,a,o),Ns(c,e,s);var u=c.createPattern(l,"repeat");if(u){var d=Vn(),f=$r(d,r);u.setTransform(f)}return u}var Ws={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function Bs(t,e,n,r){var i=e.stroke,a=e.size,o=e.fill,s=e.lineWidth,l=e.fillOpacity;t.globalAlpha=l,t.strokeStyle=i,t.lineWidth=s,t.fillStyle=o,t.strokeRect(n-a/2,r-a/2,a,a),t.fillRect(n-a/2,r-a/2,a,a)}function qs(t){var e=A({},Ws,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=La(n,r,i),s=Ca(o,i),l=Rr(o,o),c=l.getContext("2d");zr(c,e,o);for(var u=0,d=s;u<d.length;u++){var f=d[u],h=f[0],v=f[1];Bs(c,e,h,v)}var p=c.createPattern(l,"repeat");if(p){var y=Vn(),g=$r(y,a);p.setTransform(g)}return p}function Gs(t){var e=t.type,n=t.cfg,r;switch(e){case"dot":r=$s(n);break;case"line":r=Vs(n);break;case"square":r=qs(n);break}return r}function At(t){var e=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;var s=function(l){for(var c,u,d,f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];var v=a.getTheme().defaultColor,p=v,y=(u=(c=a.geometries)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.getAttribute("color");if(y){var g=y.getFields()[0],m=E(l,g);p=Ft.getMappingValue(y,m,((d=y.values)===null||d===void 0?void 0:d[0])||v)}var F=o;typeof o=="function"&&(F=o.call(e,l,p)),F instanceof CanvasPattern||(F=Gs(A({},{cfg:{backgroundColor:p}},F)));var S=i[t];return x(x({},typeof S=="function"?S.call.apply(S,Q([e,l],f,!1)):S||{}),{fill:F||p})};return A({},n,{options:(r={},r[t]=s,r)})}}function Ie(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.seriesField;return r===!1?e.legend(!1):(i||a)&&e.legend(i||a,r),t}function dt(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==void 0&&e.tooltip(r),t}function rt(t){var e=t.chart,n=t.options,r=n.interactions;return L(r,function(i){i.enable===!1?e.removeInteraction(i.type):e.interaction(i.type,i.cfg||{})}),t}function tt(t){var e=t.chart,n=t.options,r=n.animation;return rn(e,r),t}function K(t){var e=t.chart,n=t.options,r=n.theme;return r&&e.theme(r),t}function oe(t){var e=t.chart,n=t.options,r=n.state;return r&&L(e.geometries,function(i){i.state(r)}),t}function an(t){var e=t.chart,n=t.options,r=n.slider;return e.option("slider",r),t}function _r(t){var e=t.chart,n=t.options,r=n.scrollbar;return e.option("scrollbar",r),t}function ot(t,e){return function(n){var r=n.chart,i=n.options,a={};return L(t,function(o,s){a[s]=J(o,mt)}),a=A({},e,i.meta,a),r.scale(a),n}}function at(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return L(Q(Q([],r.annotations||[],!0),t||[],!0),function(a){i.annotation(a)}),e}}function de(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,a=i;return ve(r)&&kt(i)&&(Object.values(J(r,["min","max","minLimit","maxLimit"])).some(function(o){return!kt(o)})?a=!0:a=!1),e.limitInPlot=a,t}function Ra(t){return function(e){var n=e.chart,r=e.options,i=r.coordinate,a=Array.from(i||[]).map(function(o){return o.type==="reflectX"?["reflect","x"]:o.type==="reflectY"?["reflect","y"]:o.type==="transpose"?["transpose"]:null}).filter(function(o){return!!o});return a.length!==0&&n.coordinate({type:t,actions:a}),e}}var Us={locale:"en-US"},Fn={};function za(t,e){Fn[t]=e}function Wn(t){return{get:function(e,n){return Pa(E(Fn[t],e)||E(Fn[Us.locale],e)||E(Fn["en-US"],e)||e,n)}}}var Hs={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},Xs={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}};function Pt(t,e){if(t===!1)return{fields:!1};var n=E(t,"fields"),r=E(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function vn(t,e){var n=t.type,r=t.xField,i=t.yField,a=t.colorField,o=t.shapeField,s=t.sizeField,l=t.styleField,c=t.rawFields,u=[];if(c=(lt(c)?c(n,e):c)||[],e==="color")u=Q([a||r],c,!0);else if(e==="shape")u=Q([o||r],c,!0);else if(e==="size")u=Q([s||r],c,!0);else{u=Q([r,i,a,o,s,l],c,!0);var d=["x","y","color","shape","size","style"].indexOf(e),f=u[d];u.splice(d,1),u.unshift(f)}var h=Xe(u.filter(function(p){return!!p})),v=n==="line"&&[r,i].includes(h.join("*"))?"":h.join("*");return{mappingFields:h,tileMappingField:v}}function xe(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach(function(a,o){i[a]=n[o]}),delete i.undefined,e(i)}}function bt(t){var e=t.chart,n=t.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,d=n.tooltipFields,f=n.label,h=n.state,v=n.customInfo,p=n.customMappingField;if(!a)return t;var y=a.color,g=a.shape,m=a.size,F=a.style,S=a.tooltip,b=e[r](i).position("".concat(o,"*").concat(s));if(gt(y))l?b.color(l,y):b.color(y);else if(lt(y)){var D=vn(n,"color"),k=D.mappingFields,I=D.tileMappingField;b.color(p||I,xe(k,y))}else l&&b.color(l,y);if(gt(g))c?b.shape(c,[g]):b.shape(g);else if(lt(g)){var R=vn(n,"shape"),k=R.mappingFields,I=R.tileMappingField;b.shape(I,xe(k,g))}else c&&b.shape(c,g);if(st(m))u?b.size(u,m):b.size(m);else if(lt(m)){var P=vn(n,"size"),k=P.mappingFields,I=P.tileMappingField;b.size(I,xe(k,m))}else u&&b.size(u,m);if(lt(F)){var O=vn(n,"style"),k=O.mappingFields,I=O.tileMappingField;b.style(I,xe(k,F))}else ve(F)&&b.style(F);if(d===!1?b.tooltip(!1):Ln(d)||b.tooltip(d.join("*"),xe(d,S)),f===!1)b.label(!1);else if(f){var C=f.callback,W=f.fields,j=yt(f,["callback","fields"]);b.label({fields:W||[s],callback:C,cfg:ht(j)})}return h&&b.state(h),v&&b.customInfo(v),[o,s].filter(function(Z){return Z!==l}).forEach(function(Z){e.legend(Z,!1)}),x(x({},t),{ext:{geometry:b}})}function Bn(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,s=e.tooltip,l=e.useDeferredLabel,c=Pt(s,[r,i,a]),u=c.fields,d=c.formatter;return n?bt(A({},t,{options:{type:"area",colorField:a,tooltipFields:u,mapping:Cn({shape:o?"smooth":"area",tooltip:d},n),args:{useDeferredLabel:l}}})):t}function $a(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=Pt(o,[r,i,a]),c=l.fields,u=l.formatter;return n?bt(A({},t,{options:{type:"edge",colorField:a,tooltipFields:c,mapping:x({tooltip:u},n),args:{useDeferredLabel:s}}})):t}function Ys(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,d=[];if(i&&(a&&d.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),o&&d.push({type:"stack",marginRatio:s})),d.length&&r?.geometry){var f=r?.geometry;f.adjust(d)}return kt(l)||e.theme(A({},ve(u)?u:xa(u),{columnWidthRatio:l})),t}function pt(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,s=e.minColumnWidth,l=e.maxColumnWidth,c=e.columnBackground,u=e.dodgePadding,d=e.intervalPadding,f=e.useDeferredLabel,h=Pt(o,[n,r,a]),v=h.fields,p=h.formatter,y=(i?bt(A({},t,{options:{type:"interval",colorField:a,tooltipFields:v,mapping:x({tooltip:p},i),args:{dodgePadding:u,intervalPadding:d,minColumnWidth:s,maxColumnWidth:l,background:c,useDeferredLabel:f}}})):t).ext;return Ys(x(x({},t),{ext:y}))}function Me(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,s=e.smooth,l=e.connectNulls,c=e.tooltip,u=e.useDeferredLabel,d=Pt(c,[i,a,o]),f=d.fields,h=d.formatter;return n?bt(A({},t,{options:{type:"line",colorField:o,tooltipFields:f,mapping:Cn({shape:r||(s?"smooth":"line"),tooltip:h},n),args:{connectNulls:l,useDeferredLabel:u}}})):t}function wt(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.shapeField,l=e.tooltip,c=e.useDeferredLabel,u=Pt(l,[r,i,a,o,s]),d=u.fields,f=u.formatter;return n?bt(A({},t,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:d,mapping:x({tooltip:f},n),args:{useDeferredLabel:c}}})):t}function qn(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=Pt(o,[r,i,a]),c=l.fields,u=l.formatter;return n?bt(A({},t,{options:{type:"polygon",colorField:a,tooltipFields:c,mapping:x({tooltip:u},n),args:{useDeferredLabel:s}}})):t}function Nr(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,s=e.useDeferredLabel,l=Pt(o,[r,i,a]),c=l.fields,u=l.formatter;return n?bt(A({},t,{options:{type:"schema",colorField:a,tooltipFields:c,mapping:x({tooltip:u},n),args:{useDeferredLabel:s}}})):t}function js(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,s=e.tooltip,l=Pt(s,[r,i,a,o]),c=l.fields,u=l.formatter;return n?bt(A({},t,{options:{type:"violin",colorField:a,tooltipFields:c,mapping:x({tooltip:u},n)}})):t}var qt={},Gt={},rr={},Fi;function Zs(){return Fi||(Fi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1,n=function(){return"".concat(e++)};t.default=n})(rr)),rr}var $e={},_e={},ir={},bi;function _a(){return bi||(bi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a=null;return function(){for(var o=this,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];clearTimeout(a),a=setTimeout(function(){r.apply(o,l)},i)}};t.default=e})(ir)),ir}var Ut={},Si;function Vr(){if(Si)return Ut;Si=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.SizeSensorId=Ut.SensorTabIndex=Ut.SensorClassName=void 0;var t="size-sensor-id";Ut.SizeSensorId=t;var e="size-sensor-object";Ut.SensorClassName=e;var n="-1";return Ut.SensorTabIndex=n,Ut}var Ai;function Ks(){if(Ai)return _e;Ai=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.createSensor=void 0;var t=n(_a()),e=Vr();function n(i){return i&&i.__esModule?i:{default:i}}var r=function(a,o){var s=void 0,l=[],c=function(){getComputedStyle(a).position==="static"&&(a.style.position="relative");var p=document.createElement("object");return p.onload=function(){p.contentDocument.defaultView.addEventListener("resize",u),u()},p.style.display="block",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.height="100%",p.style.width="100%",p.style.overflow="hidden",p.style.pointerEvents="none",p.style.zIndex="-1",p.style.opacity="0",p.setAttribute("class",e.SensorClassName),p.setAttribute("tabindex",e.SensorTabIndex),p.type="text/html",a.appendChild(p),p.data="about:blank",p},u=(0,t.default)(function(){l.forEach(function(v){v(a)})}),d=function(p){s||(s=c()),l.indexOf(p)===-1&&l.push(p)},f=function(){s&&s.parentNode&&(s.contentDocument&&s.contentDocument.defaultView.removeEventListener("resize",u),s.parentNode.removeChild(s),a.removeAttribute(e.SizeSensorId),s=void 0,l=[],o&&o())},h=function(p){var y=l.indexOf(p);y!==-1&&l.splice(y,1),l.length===0&&s&&f()};return{element:a,bind:d,destroy:f,unbind:h}};return _e.createSensor=r,_e}var Ne={},wi;function Qs(){if(wi)return Ne;wi=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.createSensor=void 0;var t=Vr(),e=n(_a());function n(i){return i&&i.__esModule?i:{default:i}}var r=function(a,o){var s=void 0,l=[],c=(0,e.default)(function(){l.forEach(function(v){v(a)})}),u=function(){var p=new ResizeObserver(c);return p.observe(a),c(),p},d=function(p){s||(s=u()),l.indexOf(p)===-1&&l.push(p)},f=function(){s.disconnect(),l=[],s=void 0,a.removeAttribute(t.SizeSensorId),o&&o()},h=function(p){var y=l.indexOf(p);y!==-1&&l.splice(y,1),l.length===0&&s&&f()};return{element:a,bind:d,destroy:f,unbind:h}};return Ne.createSensor=r,Ne}var Di;function Js(){if(Di)return $e;Di=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.createSensor=void 0;var t=Ks(),e=Qs(),n=typeof ResizeObserver<"u"?e.createSensor:t.createSensor;return $e.createSensor=n,$e}var Ei;function tc(){if(Ei)return Gt;Ei=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.removeSensor=Gt.getSensor=Gt.Sensors=void 0;var t=r(Zs()),e=Js(),n=Vr();function r(l){return l&&l.__esModule?l:{default:l}}var i={};Gt.Sensors=i;function a(l){l&&i[l]&&delete i[l]}var o=function(c){var u=c.getAttribute(n.SizeSensorId);if(u&&i[u])return i[u];var d=(0,t.default)();c.setAttribute(n.SizeSensorId,d);var f=(0,e.createSensor)(c,function(){return a(d)});return i[d]=f,f};Gt.getSensor=o;var s=function(c){var u=c.element.getAttribute(n.SizeSensorId);c.destroy(),a(u)};return Gt.removeSensor=s,Gt}var Oi;function ec(){if(Oi)return qt;Oi=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.ver=qt.clear=qt.bind=void 0;var t=tc(),e=function(a,o){var s=(0,t.getSensor)(a);return s.bind(o),function(){s.unbind(o)}};qt.bind=e;var n=function(a){var o=(0,t.getSensor)(a);(0,t.removeSensor)(o)};qt.clear=n;var r="1.0.2";return qt.ver=r,qt}var nc=ec(),Ii="data-chart-source-type",Na=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],q=(function(t){B(e,t);function e(n,r){var i=t.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=A({},i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var n=this.options,r=n.width,i=n.height,a=n.defaultInteractions;this.chart=new Fa(x(x(x(x({container:this.container,autoFit:!1},this.getChartSize(r,i)),{localRefresh:!1}),J(this.options,Na)),{defaultInteractions:a})),this.container.setAttribute(Ii,"G2Plot")},e.prototype.getChartSize=function(n,r){var i=xr(this.container);return{width:n||i.width||400,height:r||i.height||400}},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r?.type&&n.emit(r.type,r)})},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(n){this.updateOption(n),this.render()},e.prototype.updateOption=function(n){this.options=A({},this.options,n)},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=je(this.chart);L(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=je(this.chart),r=[];return L(n,function(i){var a=i.getData(),o=i.getStates();L(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},e.prototype.changeData=function(n){this.update({data:n})},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.addAnnotations=function(n,r){r=r||this.chart;var i=Q([],n,!0),a=r.getController("annotation"),o=a.getComponents().map(function(c){return c.extra});a.clear(!0);for(var s=function(c){var u=o[c],d=i.findIndex(function(f){return f.id&&f.id===u.id});d!==-1&&(u=A({},u,i[d]),i.splice(d,1)),a.annotation(u)},l=0;l<o.length;l++)s(l);i.forEach(function(c){return a.annotation(c)}),r.render(!0)},e.prototype.removeAnnotations=function(n){var r=this.chart.getController("annotation"),i=r.getComponents().map(function(s){return s.extra});r.clear(!0);for(var a=function(s){var l=i[s];n.find(function(c){return c.id&&c.id===l.id})||r.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(Ii)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor(),r=this.options,i=r.padding,a=r.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this;if(!this.unbind){var r=this.options.autoFit,i=r===void 0?!0:r;i&&(this.unbind=nc.bind(this.container,function(){var a=xr(n.container),o=a.width,s=a.height;(o!==n.chart.width||s!==n.chart.height)&&n.triggerResize()}))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e})(Jl);function Va(t,e,n,r){var i=xt(t,function(a,o){var s=o[n],l=a.has(s)?a.get(s):0,c=o[e];return l=fe(c)?l+c:l,a.set(s,l),a},new Map);return Tt(t,function(a){var o,s=a[e],l=a[n],c=fe(s)&&i.get(l)!==0?s/i.get(l):0;return x(x({},a),(o={},o[r]=c,o))})}function rc(t,e,n,r){var i=xt(t,function(a,o){var s=xt(n,function(u,d){return"".concat(u).concat(o[d])},""),l=a.has(s)?a.get(s):0,c=o[e];return l=fe(c)?l+c:l,a.set(s,l),a},new Map);return Tt(t,function(a){var o,s=a[e],l=xt(n,function(u,d){return"".concat(u).concat(a[d])},""),c=fe(s)&&i.get(l)!==0?s/i.get(l):0;return x(x({},a),(o={},o[r]=c,o))})}function on(t,e,n,r,i){return i?Va(t,e,n,r):t}function ic(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,s=n.point,l=n.area,c=n.seriesField,u=s?.state,d=l?.state;e.data(r);var f=A({},t,{options:{shapeField:c,line:{color:i,style:a,shape:o},point:s&&x({color:i,shape:"circle"},s),area:l&&x({color:i},l),label:void 0}}),h=A({},f,{options:{tooltip:!1,state:u}}),v=A({},f,{options:{tooltip:!1,state:d}});return Me(f),wt(h),Bn(v),t}function Gn(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data;return N(ot((e={},e[o]=i,e[s]=a,e),(n={},n[o]={type:"cat"},n[s]=Lr(l,s),n)))(t)}function ac(t){var e=t.chart,n=t.options,r=n.reflect;if(r){var i=r;et(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});e.coordinate({type:"rect",actions:a})}return t}function Wa(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function Ba(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function oc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=vt(e,"line");if(!r)a.label(!1);else{var o=r.fields,s=r.callback,l=yt(r,["fields","callback"]);a.label({fields:o||[i],callback:s,cfg:x({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},ht(l))})}return t}function lc(t){var e=t.chart,n=t.options,r=n.isStack;return r&&L(e.geometries,function(i){i.adjust("stack")}),t}function qa(t){return N(ic,Gn,lc,K,ac,Wa,Ba,dt,oc,an,_r,rt,tt,at(),de)(t)}function sc(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,a=n.areaShape,o=n.color,s=n.point,l=n.line,c=n.isPercent,u=n.xField,d=n.yField,f=n.tooltip,h=n.seriesField,v=n.startOnZero,p=s?.state,y=on(r,d,u,d,c);e.data(y);var g=c?x({formatter:function(b){return{name:b[h]||b[u],value:(Number(b[d])*100).toFixed(2)+"%"}}},f):f,m=A({},t,{options:{area:{color:o,style:i,shape:a},point:s&&x({color:o},s),tooltip:g,label:void 0,args:{startOnZero:v}}}),F={chart:e,options:A({line:{size:2}},$n(n,["state"]),{line:l&&x({color:o},l),sizeField:h,state:l?.state,tooltip:!1,label:void 0,args:{startOnZero:v}})},S=A({},m,{options:{tooltip:!1,state:p}});return Bn(m),Me(F),wt(S),t}function cc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=vt(e,"area");if(!r)a.label(!1);else{var o=r.fields,s=r.callback,l=yt(r,["fields","callback"]);a.label({fields:o||[i],callback:s,cfg:x({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},ht(l))})}return t}function uc(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,a=n.seriesField;return(i||r)&&a&&L(e.geometries,function(o){o.adjust("stack")}),t}function Ga(t){return N(K,At("areaStyle"),Ra("rect"),sc,Gn,uc,Wa,Ba,dt,cc,an,at(),rt,tt,de)(t)}var fc=A({},q.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),dc=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return fc},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.isPercent,a=r.xField,o=r.yField,s=this,l=s.chart,c=s.options;Gn({chart:l,options:c}),this.chart.changeData(on(n,o,a,o,i))},e.prototype.getSchemaAdaptor=function(){return Ga},e})(q),hc=10,vc=5,pc={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},gc=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.buttonGroup=null,n.buttonCfg=x({name:"button"},pc),n}return e.prototype.getButtonCfg=function(){var n=this.context.view,r=E(n,["interactions","filter-action","cfg","buttonConfig"]);return A(this.buttonCfg,r,this.cfg)},e.prototype.drawButton=function(){var n=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:n.name}),i=this.drawText(r);this.drawBackground(r,i.getBBox()),this.buttonGroup=r},e.prototype.drawText=function(n){var r,i=this.getButtonCfg();return n.addShape({type:"text",name:"button-text",attrs:x({text:i.text},(r=i.textStyle)===null||r===void 0?void 0:r.default)})},e.prototype.drawBackground=function(n,r){var i,a=this.getButtonCfg(),o=ee(a.padding),s=n.addShape({type:"rect",name:"button-rect",attrs:x({x:r.x-o[3],y:r.y-o[0],width:r.width+o[1]+o[3],height:r.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return s.toBack(),n.on("mouseenter",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),n.on("mouseleave",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),s},e.prototype.resetPosition=function(){var n=this.context.view,r=n.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Ft.transform(null,[["t",i.x-o.width-hc,i.y+o.height+vc]]);a.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var n=this.buttonGroup;n&&n.remove(),t.prototype.destroy.call(this)},e})(Jt);St("brush-reset-button",gc,{name:"brush-reset-button"});it("filter-action",{});function Ht(t){return t.isInPlot()}function pe(t,e,n){var r=n||{},i=r.mask,a=r.isStartEnable,o=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ht,action:["brush:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Ht,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ht,action:["brush:filter","brush:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(s){return a?!a(s):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||(function(s){return!s.isInShape("mask")}),action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ht,action:["brush-x:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Ht,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ht,action:["brush-x:filter","brush-x:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||(function(s){return!s.isInShape("mask")}),action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Ht,action:["brush-y:start","".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Ht,action:["".concat(o,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:Ht,action:["brush-y:filter","brush-y:end","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||(function(){return!0})},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||(function(){return!0})},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||(function(s){return!s.isInShape("mask")}),action:["".concat(o,"-mask:start"),"".concat(o,"-mask:show")],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:["".concat(o,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(o,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(o,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(o,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(o,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(s){return!s.isInPlot()},action:["element-range-highlight:clear","".concat(o,"-mask:end"),"".concat(o,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(o,"-mask:hide")]}]};default:return{}}}it("brush",pe("brush"));it("brush-highlight",pe("brush-highlight"));it("brush-x",pe("brush-x","x-rect"));it("brush-y",pe("brush-y","y-rect"));it("brush-x-highlight",pe("brush-x-highlight","x-rect"));it("brush-y-highlight",pe("brush-y-highlight","y-rect"));var Mi=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Ua(t){var e=t.options,n=e.brush,r=Oe(e.interactions||[],function(i){return Mi.indexOf(i.type)===-1});return n?.enabled&&(Mi.forEach(function(i){var a=!1;switch(n.type){case"x-rect":a=i===(n.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":a=i===(n.action==="highlight"?"brush-y-highlight":"brush-y");break;default:a=i===(n.action==="highlight"?"brush-highlight":"brush");break}var o={type:i,enable:a};n&&(o.cfg=pe(i,n.type,n)),r.push(o)}),n?.action!=="highlight"&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),A({},t,{options:{interactions:r}})}var ue={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Wr=function(t,e){return t==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};it(ue.hover,{start:Wr(ue.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});it(ue.click,{start:Wr(ue.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function yc(t){return t===void 0&&(t=!1),function(e){var n=e.chart,r=e.options,i=r.connectedArea,a=function(){n.removeInteraction(ue.hover),n.removeInteraction(ue.click)};if(!t&&i){var o=i.trigger||"hover";a(),n.interaction(ue[o],{start:Wr(o,i.style)})}else a();return e}}function Ha(t,e){return!st(t)||!st(e)||t===0&&e===0?"-":t===e?"100%":t===0?"∞":"".concat((100*e/t).toFixed(2),"%")}function mc(t,e){return A({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:t.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:t.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:Ha}},t)}function In(t,e){return Tt(e.getModel().points,function(n){return t.convertPoint(n)})}function xc(t,e,n){var r=t.view,i=t.geometry,a=t.group,o=t.options,s=t.horizontal,l=o.offset,c=o.size,u=o.arrow,d=r.getCoordinate(),f=In(d,e)[3],h=In(d,n)[0],v=h.y-f.y,p=h.x-f.x;if(typeof u!="boolean"){var y=u.headSize,g=o.spacing,m;s?(p-y)/2<g?(g=Math.max(1,(p-y)/2),m=[[f.x+g,f.y-l],[f.x+g,f.y-l-c],[h.x-g,h.y-l-c/2]]):m=[[f.x+g,f.y-l],[f.x+g,f.y-l-c],[h.x-g-y,h.y-l-c],[h.x-g,h.y-l-c/2],[h.x-g-y,h.y-l]]:(v-y)/2<g?(g=Math.max(1,(v-y)/2),m=[[f.x+l,f.y+g],[f.x+l+c,f.y+g],[h.x+l+c/2,h.y-g]]):m=[[f.x+l,f.y+g],[f.x+l+c,f.y+g],[h.x+l+c,h.y-g-y],[h.x+l+c/2,h.y-g],[h.x+l,h.y-g-y]],a.addShape("polygon",{id:"".concat(r.id,"-conversion-tag-arrow-").concat(i.getElementId(e.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:x(x({},u.style||{}),{points:m})})}}function Fc(t,e,n){var r,i,a,o=t.view,s=t.geometry,l=t.group,c=t.options,u=t.field,d=t.horizontal,f=c.offset,h=c.size;if(typeof c.text!="boolean"){var v=o.getCoordinate(),p=((r=c.text)===null||r===void 0?void 0:r.formatter)&&((i=c.text)===null||i===void 0?void 0:i.formatter(e.getData()[u],n.getData()[u])),y=In(v,e)[d?3:0],g=In(v,n)[d?0:3],m=l.addShape("text",{id:"".concat(o.id,"-conversion-tag-text-").concat(s.getElementId(e.getModel().mappingData)),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:x(x({},((a=c.text)===null||a===void 0?void 0:a.style)||{}),{text:p,x:d?(y.x+g.x)/2:y.x+f+h/2,y:d?y.y-f-h/2:(y.y+g.y)/2})});if(d){var F=g.x-y.x,S=m.getBBox().width;if(S>F){var b=S/p.length,D=Math.max(1,Math.ceil(F/b)-1),k="".concat(p.slice(0,D),"...");m.attr("text",k)}}}}function bc(t,e,n){xc(t,e,n),Fc(t,e,n)}function Sc(t,e,n){return e===void 0&&(e=!0),n===void 0&&(n=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,s=i.theme;return o&&!n&&(a.theme(A({},ve(s)?s:xa(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,c){var u=l.addGroup({id:"".concat(a.id,"-conversion-tag-group"),name:"conversion-tag-group"}),d=ba(a.geometries,function(v){return v.type==="interval"}),f={view:c,geometry:d,group:u,field:t,horizontal:e,options:mc(o,e)},h=d.elements;L(h,function(v,p){p>0&&bc(f,h[p-1],v)})}})),r}}function Ac(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?n!==!1&&(n=x({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function wc(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,d=n.yField,f=n.seriesField,h=n.groupField,v=n.tooltip,p=n.shape,y=s&&l&&c?rc(r,d,[u,h],d):on(r,d,u,d,s),g=[];c&&f&&!l?y.forEach(function(S){var b=g.find(function(D){return D[u]===S[u]&&D[f]===S[f]});b?b[d]+=S[d]||0:g.push(x({},S))}):g=y,e.data(g);var m=s?x({formatter:function(S){var b;return{name:l&&c?"".concat(S[f]," - ").concat(S[h]):(b=S[f])!==null&&b!==void 0?b:S[u],value:(Number(S[d])*100).toFixed(2)+"%"}}},v):v,F=A({},t,{options:{data:g,widthRatio:o,tooltip:m,interval:{shape:p,style:i,color:a}}});return pt(F),F}function Br(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.data,c=r.isPercent,u=c?{max:1,min:0,minLimit:0,maxLimit:1}:{};return N(ot((e={},e[o]=i,e[s]=a,e),(n={},n[o]={type:"cat"},n[s]=x(x({},Lr(l,s)),u),n)))(t)}function Dc(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function Ec(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function Oc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=n.isRange,o=vt(e,"interval");if(!r)o.label(!1);else{var s=r.callback,l=yt(r,["callback"]);o.label({fields:[i],callback:s,cfg:x({layout:l?.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},ht(a?x({content:function(c){var u;return(u=c[i])===null||u===void 0?void 0:u.join("-")}},l):l))})}return t}function Ic(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(r===!1)e.tooltip(!1);else{var d=r;if(i&&a){var f=d.customItems,h=d?.formatter||(function(v){return{name:"".concat(v[u]," - ").concat(v[o]),value:v[c]}});d=x(x({},d),{customItems:function(v){var p=[];return L(v,function(y){var g=Oe(s,function(m){return ts(m,J(y.data,[l,u]))});g.forEach(function(m){p.push(x(x(x({},y),{value:m[c],data:m,mappingData:{_origin:m}}),h(m)))})}),f?f(p):p}})}e.tooltip(d)}return t}function Un(t,e){e===void 0&&(e=!1);var n=t.options,r=n.seriesField;return N(Ac,K,At("columnStyle"),oe,Ra("rect"),wc,Br,Dc,Ec,Ic,an,_r,Oc,Ua,rt,tt,at(),Sc(n.yField,!e,!!r),yc(!n.isStack),de)(t)}function Mc(t){var e=t.options,n=e.xField,r=e.yField,i=e.xAxis,a=e.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},s=a!==!1?x({position:o[a?.position||"left"]},a):!1,l=i!==!1?x({position:o[i?.position||"bottom"]},i):!1;return x(x({},t),{options:x(x({},e),{xField:r,yField:n,xAxis:s,yAxis:l})})}function kc(t){var e=t.options,n=e.label;return n&&!n.position&&(n.position="left",n.layout||(n.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),A({},t,{options:{label:n}})}function Tc(t){var e=t.options,n=e.seriesField,r=e.isStack,i=e.legend;return n?i!==!1&&(i=x({position:r?"top-left":"right-top"},i||{})):i=!1,A({},t,{options:{legend:i}})}function Pc(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return A({},t,{options:{coordinate:n}})}function Lc(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,s=n.barBackground;return Un({chart:e,options:x(x({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:s})},!0)}function Xa(t){return N(Mc,kc,Tc,dt,Pc,Lc)(t)}var Cc=A({},q.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Ya=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bar",n}return e.getDefaultOptions=function(){return Cc},e.prototype.changeData=function(n){var r,i;this.updateOption({data:n});var a=this,o=a.chart,s=a.options,l=s.isPercent,c=s.xField,u=s.yField,d=s.xAxis,f=s.yAxis;r=[u,c],c=r[0],u=r[1],i=[f,d],d=i[0],f=i[1];var h=x(x({},s),{xField:c,yField:u,yAxis:f,xAxis:d});Br({chart:o,options:h}),o.changeData(on(n,c,u,c,l))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xa},e})(q),Rc=A({},q.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),zc=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return Rc},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.yField,a=r.xField,o=r.isPercent,s=this,l=s.chart,c=s.options;Br({chart:l,options:c}),this.chart.changeData(on(n,i,a,i,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Un},e})(q),ar,ne="$$percentage$$",re="$$mappingValue$$",Zt="$$conversion$$",Fr="$$totalPercentage$$",Ze="$$x$$",Ke="$$y$$",$c={appendPadding:[0,80],minSize:0,maxSize:1,meta:(ar={},ar[re]={min:0,max:1,nice:!1},ar),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},ja="CONVERSION_TAG_NAME";function qr(t,e,n){var r=[],i=n.yField,a=n.maxSize,o=n.minSize,s=E(Ea(e,i),[i]),l=st(a)?a:1,c=st(o)?o:0;return r=Tt(t,function(u,d){var f=(u[i]||0)/s;return u[ne]=f,u[re]=(l-c)*f+c,u[Zt]=[E(t,[d-1,i]),u[i]],u}),r}function Gr(t){return function(e){var n=e.chart,r=e.options,i=r.conversionTag,a=r.filteredData,o=a||n.getOptions().data;if(i){var s=i.formatter;o.forEach(function(l,c){if(!(c<=0||Number.isNaN(l[re]))){var u=t(l,c,o,{top:!0,name:ja,text:{content:lt(s)?s(l,o):s,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:x({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(u)}})}return e}}function _c(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=n.maxSize,s=n.minSize,l=qr(i,i,{yField:a,maxSize:o,minSize:s});return e.data(l),t}function Nc(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.shape,c=l===void 0?"funnel":l,u=n.funnelStyle,d=n.state,f=Pt(o,[r,i]),h=f.fields,v=f.formatter;bt({chart:e,options:{type:"interval",xField:r,yField:re,colorField:r,tooltipFields:et(h)&&h.concat([ne,Zt]),mapping:{shape:c,tooltip:v,color:a,style:u},label:s,state:d}});var p=vt(t.chart,"interval");return p.adjust("symmetric"),t}function Vc(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[]:[["transpose"],["scale",1,-1]]}),t}function Za(t){var e=t.options,n=t.chart,r=e.maxSize,i=E(n,["geometries","0","dataArray"],[]),a=E(n,["options","data","length"]),o=Tt(i,function(l){return E(l,["0","nextPoints","0","x"])*a-.5}),s=function(l,c,u,d){var f=r-(r-l[re])/2;return x(x({},d),{start:[o[c-1]||c-.5,f],end:[o[c-1]||c-.5,f+.05]})};return Gr(s)(t),t}function Ka(t){return N(_c,Nc,Vc,Za)(t)}function Wc(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function Bc(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,d=n.minSize,f=n.label,h=n.funnelStyle,v=n.state,p=n.showFacetTitle;return e.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],showTitle:p,eachView:function(y,g){var m=l?g.rowIndex:g.columnIndex;l||y.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var F=qr(g.data,r,{yField:a,maxSize:u,minSize:d});y.data(F);var S=Pt(c,[i,a,s]),b=S.fields,D=S.formatter,k=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};bt({chart:y,options:{type:"interval",xField:i,yField:re,colorField:i,tooltipFields:et(b)&&b.concat([ne,Zt]),mapping:{shape:"funnel",tooltip:D,color:o,style:h},label:f===!1?!1:A({},k,f),state:v}})}}),t}function Qa(t){var e=t.chart,n=t.index,r=t.options,i=r.conversionTag,a=r.isTransposed;(st(n)?[e]:e.views).forEach(function(o,s){var l=E(o,["geometries","0","dataArray"],[]),c=E(o,["options","data","length"]),u=Tt(l,function(f){return E(f,["0","nextPoints","0","x"])*c-.5}),d=function(f,h,v,p){var y=(n||s)===0?-1:1;return A({},p,{start:[u[h-1]||h-.5,f[re]],end:[u[h-1]||h-.5,f[re]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:i!==!1?y*i.offsetX:0,style:{textAlign:(n||s)===0?"end":"start"}}})};Gr(d)(A({},{chart:o,options:r}))})}function qc(t){var e=t.chart;return e.once("beforepaint",function(){return Qa(t)}),t}function Gc(t){return N(Wc,Bc,qc)(t)}function Uc(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=xt(i,function(c,u){return c+(u[a]||0)},0),s=Ea(i,a)[a],l=Tt(i,function(c,u){var d=[],f=[];if(c[Fr]=(c[a]||0)/o,u){var h=i[u-1][Ze],v=i[u-1][Ke];d[0]=h[3],f[0]=v[3],d[1]=h[2],f[1]=v[2]}else d[0]=-.5,f[0]=1,d[1]=.5,f[1]=1;return f[2]=f[1]-c[Fr],d[2]=(f[2]+1)/4,f[3]=f[2],d[3]=-d[2],c[Ze]=d,c[Ke]=f,c[ne]=(c[a]||0)/s,c[Zt]=[E(i,[u-1,a]),c[a]],c});return e.data(l),t}function Hc(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=Pt(o,[r,i]),d=u.fields,f=u.formatter;return bt({chart:e,options:{type:"polygon",xField:Ze,yField:Ke,colorField:r,tooltipFields:et(d)&&d.concat([ne,Zt]),label:s,state:c,mapping:{tooltip:f,color:a,style:l}}}),t}function Xc(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[["transpose"],["reflect","x"]]:[]}),t}function Yc(t){var e=function(n,r,i,a){return x(x({},a),{start:[n[Ze][1],n[Ke][1]],end:[n[Ze][1]+.05,n[Ke][1]]})};return Gr(e)(t),t}function jc(t){return N(Uc,Hc,Xc,Yc)(t)}function Zc(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function Kc(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,a=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(o,s){Ka(A({},t,{chart:o,options:{data:s.data}}))}}),t}function Qc(t){return N(Zc,Kc)(t)}var Jc=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.rendering=!1,n}return e.prototype.change=function(n){var r=this;if(!this.rendering){var i=n.seriesField,a=n.compareField,o=a?Qa:Za,s=this.context.view,l=i||a?s.views:[s];Tt(l,function(c,u){var d=c.getController("annotation"),f=Oe(E(d,["option"],[]),function(v){var p=v.name;return p!==ja});d.clear(!0),L(f,function(v){typeof v=="object"&&c.annotation()[v.type](v)});var h=E(c,["filteredData"],c.getOptions().data);o({chart:c,index:u,options:x(x({},n),{filteredData:qr(h,h,n)})}),c.filterData(h),r.rendering=!0,c.render(!0)})}this.rendering=!1},e})(Jt),Ja="funnel-conversion-tag",br="funnel-afterrender",to={trigger:"afterrender",action:"".concat(Ja,":change")};St(Ja,Jc);it(br,{start:[to]});function tu(t){var e=t.options,n=e.compareField,r=e.xField,i=e.yField,a=e.locale,o=e.funnelStyle,s=e.data,l=Wn(a),c={label:n?{fields:[r,i,n,ne,Zt],formatter:function(d){return"".concat(d[i])}}:{fields:[r,i,ne,Zt],offset:0,position:"middle",formatter:function(d){return"".concat(d[r]," ").concat(d[i])}},tooltip:{title:r,formatter:function(d){return{name:d[r],value:d[i]}}},conversionTag:{formatter:function(d){return"".concat(l.get(["conversionTag","label"]),": ").concat(Ha.apply(void 0,d[Zt]))}}},u;return(n||o)&&(u=function(d){return A({},n&&{lineWidth:1,stroke:"#fff"},lt(o)?o(d):o)}),A({options:c},t,{options:{funnelStyle:u,data:Sa(s)}})}function eu(t){var e=t.options,n=e.compareField,r=e.dynamicHeight,i=e.seriesField;return i?Qc(t):n?Gc(t):r?jc(t):Ka(t)}function nu(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return N(ot((e={},e[a]=r,e[o]=i,e)))(t)}function ru(t){var e=t.chart;return e.axis(!1),t}function iu(t){var e=t.chart,n=t.options,r=n.legend;return r===!1?e.legend(!1):e.legend(r),t}function au(t){var e=t.chart,n=t.options,r=n.interactions,i=n.dynamicHeight;return L(r,function(a){a.enable===!1?e.removeInteraction(a.type):e.interaction(a.type,a.cfg||{})}),i?e.removeInteraction(br):e.interaction(br,{start:[x(x({},to),{arg:n})]}),t}function eo(t){return N(tu,eu,nu,ru,dt,au,iu,tt,K,at())(t)}var ou=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="funnel",n}return e.getDefaultOptions=function(){return $c},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return eo},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=je(this.chart);L(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=je(this.chart),r=[];return L(n,function(i){var a=i.getData(),o=i.getStates();L(o,function(s){r.push({data:a,state:s,geometry:i.geometry,element:i})})}),r},e.CONVERSATION_FIELD=Zt,e.PERCENT_FIELD=ne,e.TOTAL_PERCENT_FIELD=Fr,e})(q),pn,Ur="range",no="type",Yt="percent",lu="#f0f0f0",ro="indicator-view",io="range-view",su={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(pn={},pn[Ur]={sync:"v"},pn[Yt]={sync:"v",tickCount:5,tickInterval:.2},pn),animation:!1};function cu(t,e){return t.map(function(n,r){var i;return i={},i[Ur]=n-(t[r-1]||0),i[no]="".concat(r),i[Yt]=e,i})}function ao(t){var e;return[(e={},e[Yt]=Rn(t,0,1),e)]}function oo(t,e){var n=E(e,["ticks"],[]),r=Ye(n)?Xe(n):[0,Rn(t,0,1),1];return r[0]||r.shift(),cu(r,t)}function uu(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,d=n.gaugeStyle,f=n.type,h=n.meter,v=i.color,p=i.width;if(u){var y=ao(r),g=e.createView({id:ro});g.data(y),g.point().position("".concat(Yt,"*1")).shape(u.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:u}),g.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),g.axis(Yt,c),g.scale(Yt,J(c,mt))}var m=oo(r,n.range),F=e.createView({id:io});F.data(m);var S=gt(v)?[v,lu]:v,b=pt({chart:F,options:{xField:"1",yField:Ur,seriesField:no,rawFields:[Yt],isStack:!0,interval:{color:S,style:d,shape:f==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:p,maxColumnWidth:p}}).ext,D=b.geometry;return D.customInfo({meter:h}),F.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),t}function fu(t){var e;return N(ot((e={range:{min:0,max:1,maxLimit:1,minLimit:0}},e[Yt]={},e)))(t)}function lo(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=A({},{content:"".concat((a*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),Cs(n,{statistic:x(x({},i),{content:s})},{percent:a})}return e&&n.render(!0),t}function du(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(A({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(i,a){var o=E(a,[0,"data",Yt],0);return"".concat((o*100).toFixed(2),"%")}},r)):e.tooltip(!1),t}function hu(t){var e=t.chart;return e.legend(!1),t}function so(t){return N(K,tt,uu,fu,du,lo,rt,at(),hu)(t)}ae("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,s=a.pin,l=e.addGroup(),c=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:x({x1:c.x,y1:c.y,x2:t.x,y2:t.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:x({x:c.x,y:c.y,stroke:i},s.style)}),l}});ae("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=n===void 0?{}:n,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=Rn(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,d=0;if(s>0&&s<1){var f=u-c;d=f/a/(s/(1-s)+1-1/a)}for(var h=d/(1-s)*s,v=e.addGroup(),p=this.coordinate.getCenter(),y=this.coordinate.getRadius(),g=Ft.getAngle(t,this.coordinate),m=g.startAngle,F=g.endAngle,S=m;S<F;){var b=void 0,D=(S-c)%(h+d);D<h?b=S+(h-D):(S+=h+d-D,b=S+h);var k=Ft.getSectorPath(p.x,p.y,y,S,Math.min(b,F),y*this.coordinate.innerRadius);v.addShape("path",{name:"meter-gauge",attrs:{path:k,fill:t.color,stroke:t.color,lineWidth:.5}}),S=b+d}return v}});var vu=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="gauge",n}return e.getDefaultOptions=function(){return su},e.prototype.changeData=function(n){this.chart.emit(ct.BEFORE_CHANGE_DATA,Nt.fromData(this.chart,ct.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n});var r=this.chart.views.find(function(a){return a.id===ro});r&&r.data(ao(n));var i=this.chart.views.find(function(a){return a.id===io});i&&i.data(oo(n,this.options.range)),lo({chart:this.chart,options:this.options},!0),this.chart.emit(ct.AFTER_CHANGE_DATA,Nt.fromData(this.chart,ct.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return so},e})(q);function ki(t,e,n){if(n===1)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function pu(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function co(t,e,n,r,i){var a=Sa(t);xs(a,e);var o=Aa(a,e),s=es(o),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=pu(o);c=l/u}var d={},f=Ue(a,i);Ln(f)?L(a,function(v){var p=v[e],y=ki(p,c,r),g="".concat(y[0],"-").concat(y[1]);hi(d,g)||(d[g]={range:y,count:0}),d[g].count+=1}):Object.keys(f).forEach(function(v){L(f[v],function(p){var y=p[e],g=ki(y,c,r),m="".concat(g[0],"-").concat(g[1]),F="".concat(m,"-").concat(v);hi(d,F)||(d[F]={range:g,count:0},d[F][i]=v),d[F].count+=1})});var h=[];return L(d,function(v){h.push(v)}),h}var Mn="range",Qe="count",gu=A({},q.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function yu(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,d=co(r,i,o,a,l);e.data(d);var f=A({},t,{options:{xField:Mn,yField:Qe,seriesField:l,isStack:!0,interval:{color:s,style:u}}});return pt(f),c&&l?e.legend(l,c):e.legend(!1),t}function mu(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return N(ot((e={},e[Mn]=r,e[Qe]=i,e)))(t)}function xu(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return r===!1?e.axis(Mn,!1):e.axis(Mn,r),i===!1?e.axis(Qe,!1):e.axis(Qe,i),t}function Fu(t){var e=t.chart,n=t.options,r=n.label,i=vt(e,"interval");if(!r)i.label(!1);else{var a=r.callback,o=yt(r,["callback"]);i.label({fields:[Qe],callback:a,cfg:ht(o)})}return t}function uo(t){return N(K,At("columnStyle"),yu,mu,xu,oe,Fu,dt,rt,tt)(t)}var bu=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="histogram",n}return e.getDefaultOptions=function(){return gu},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.binField,a=r.binNumber,o=r.binWidth,s=r.stackField;this.chart.changeData(co(n,i,o,a,s))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uo},e})(q),Su=A({},q.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),Au=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.active=function(){var n=this.getView(),r=this.context.event;if(r.data){var i=r.data.items,a=n.geometries.filter(function(o){return o.type==="point"});L(a,function(o){L(o.elements,function(s){var l=Da(i,function(c){return c.data===s.data})!==-1;s.setState("active",l)})})}},e.prototype.reset=function(){var n=this.getView(),r=n.geometries.filter(function(i){return i.type==="point"});L(r,function(i){L(i.elements,function(a){a.setState("active",!1)})})},e.prototype.getView=function(){return this.context.view},e})(Jt);St("marker-active",Au);it("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var wu=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return Su},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Gn({chart:i,options:a}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qa},e})(q),fo=A({},q.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),Du=[1,0,0,0,1,0,0,0,1];function Sr(t,e){var n=Q([],Du,!0);return Ft.transform(n,t)}var Eu=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getActiveElements=function(){var n=Ft.getDelegationObject(this.context);if(n){var r=this.context.view,i=n.component,a=n.item,o=i.get("field");if(o){var s=r.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},e.prototype.getActiveElementLabels=function(){var n=this.context.view,r=this.getActiveElements(),i=n.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return r.find(function(o){return Pr(o.getData(),a.get("data"))})})},e.prototype.transfrom=function(n){n===void 0&&(n=7.5);var r=this.getActiveElements(),i=this.getActiveElementLabels();r.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var c=Ft.getAngle(a.getModel(),l),u=c.startAngle,d=c.endAngle,f=(u+d)/2,h=n,v=h*Math.cos(f),p=h*Math.sin(f);a.shape.setMatrix(Sr([["t",v,p]])),s.setMatrix(Sr([["t",v,p]]))}})},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e})(Jt);function Ou(t){var e=t.event,n,r=e.target;return r&&(n=r.get("element")),n}var Iu=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAnnotations=function(n){var r=n||this.context.view;return r.getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var n=this,r=this.context.view;r.removeInteraction("tooltip"),r.on("afterchangesize",function(){var i=n.getAnnotations(r);n.initialAnnotation=i})},e.prototype.change=function(n){var r=this.context,i=r.view,a=r.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=E(a,["data","data"]);if(a.type.match("legend-item")){var s=Ft.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var c=s.item;o=i.getData().find(function(h){return h[l]===c.value})}}if(o){var u=E(n,"annotations",[]),d=E(n,"statistic",{});i.getController("annotation").clear(!0),L(u,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),Nn(i,{statistic:d,plotType:"pie"},o),i.render(!0)}var f=Ou(this.context);f&&f.shape.toFront()},e.prototype.reset=function(){var n=this.context.view,r=n.getController("annotation");r.clear(!0);var i=this.getInitialAnnotation();L(i,function(a){n.annotation()[a.type](a)}),n.render(!0)},e})(Jt),ho="pie-statistic";St(ho,Iu);it("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});St("pie-legend",Eu);it("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function Mu(t,e){var n=null;return L(t,function(r){typeof r[e]=="number"&&(n+=r[e])}),n}function ku(t,e){var n;switch(t){case"inner":return n="-30%",gt(e)&&e.endsWith("%")?parseFloat(e)*.01>0?n:e:e<0?e:n;case"outer":return n=12,gt(e)&&e.endsWith("%")?parseFloat(e)*.01<0?n:e:e>0?e:n;default:return e}}function kn(t,e){return wa(Ae(t,e),function(n){return n[e]===0})}function Tu(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,s=n.pieStyle,l=n.shape,c=Ae(r,i);if(kn(c,i)){var u="$$percentage$$";c=c.map(function(f){var h;return x(x({},f),(h={},h[u]=1/c.length,h))}),e.data(c);var d=A({},t,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});pt(d)}else{e.data(c);var d=A({},t,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}});pt(d)}return t}function Pu(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.colorField,o=A({},i);return n.scale(o,(e={},e[a]={type:"cat"},e)),t}function Lu(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function Cu(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.angleField,o=e.geometries[0];if(!r)o.label(!1);else{var s=r.callback,l=yt(r,["callback"]),c=ht(l);if(c.content){var u=c.content;c.content=function(v,p,y){var g=v[i],m=v[a],F=e.getScaleByField(a),S=F?.scale(m);return lt(u)?u(x(x({},v),{percent:S}),p,y):gt(u)?Pa(u,{value:m,name:g,percentage:st(S)&&!kt(m)?"".concat((S*100).toFixed(2),"%"):null}):u}}var d={inner:"",outer:"pie-outer",spider:"pie-spider"},f=c.type?d[c.type]:"pie-outer",h=c.layout?et(c.layout)?c.layout:[c.layout]:[];c.layout=(f?[{type:f}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:x(x({},c),{offset:ku(c.type,c.offset),type:"pie"})})}return t}function vo(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,a=t.meta,o=t.locale,s=Wn(o);if(e&&n){var l=A({},fo.statistic,n),c=l.title,u=l.content;return c!==!1&&(c=A({},{formatter:function(d){var f=d?d[i]:kt(c.content)?s.get(["statistic","total"]):c.content,h=E(a,[i,"formatter"])||(function(v){return v});return h(f)}},c)),u!==!1&&(u=A({},{formatter:function(d,f){var h=d?d[r]:Mu(f,r),v=E(a,[r,"formatter"])||(function(p){return p});return d||kt(u.content)?v(h):u.content}},u)),A({},{statistic:{title:c,content:u}},t)}return t}function po(t){var e=t.chart,n=t.options,r=vo(n),i=r.innerRadius,a=r.statistic;return e.getController("annotation").clear(!0),N(at())(t),i&&a&&Nn(e,{statistic:a,plotType:"pie"}),t}function Ru(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(r===!1)e.tooltip(r);else if(e.tooltip(A({},r,{shared:!1})),kn(o,a)){var s=E(r,"fields"),l=E(r,"formatter");Ln(E(r,"fields"))&&(s=[i,a],l=l||(function(c){return{name:c[i],value:ns(c[a])}})),e.geometries[0].tooltip(s.join("*"),xe(s,l))}return t}function zu(t){var e=t.chart,n=t.options,r=vo(n),i=r.interactions,a=r.statistic,o=r.annotations;return L(i,function(s){var l,c;if(s.enable===!1)e.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var u=[];!((l=s.cfg)===null||l===void 0)&&l.start||(u=[{trigger:"element:mouseenter",action:"".concat(ho,":change"),arg:{statistic:a,annotations:o}}]),L((c=s.cfg)===null||c===void 0?void 0:c.start,function(d){u.push(x(x({},d),{arg:{statistic:a,annotations:o}}))}),e.interaction(s.type,A({},s.cfg,{start:u}))}else e.interaction(s.type,s.cfg||{})}),t}function go(t){return N(At("pieStyle"),Tu,Pu,K,Lu,Ie,Ru,Cu,oe,po,zu,tt)(t)}var $u=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return fo},e.prototype.changeData=function(n){this.chart.emit(ct.BEFORE_CHANGE_DATA,Nt.fromData(this.chart,ct.BEFORE_CHANGE_DATA,null));var r=this.options,i=this.options.angleField,a=Ae(r.data,i),o=Ae(n,i);kn(a,i)||kn(o,i)?this.update({data:n}):(this.updateOption({data:n}),this.chart.data(o),po({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(ct.AFTER_CHANGE_DATA,Nt.fromData(this.chart,ct.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return go},e})(q),yo=["#FAAD14","#E8EDF3"],_u={percent:.2,color:yo,animation:{}};function Hr(t){var e=Rn(fe(t)?t:0,0,1);return[{current:"".concat(e),type:"current",percent:e},{current:"".concat(e),type:"target",percent:1}]}function mo(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;e.data(Hr(r));var s=A({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:gt(a)?[a,yo[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return pt(s),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function Nu(t){var e=t.chart;return e.coordinate("rect").transpose(),t}function xo(t){return N(mo,ot({}),Nu,tt,K,at())(t)}var Vu=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="process",n}return e.getDefaultOptions=function(){return _u},e.prototype.changeData=function(n){this.updateOption({percent:n}),this.chart.changeData(Hr(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xo},e})(q);function Wu(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function Fo(t,e){var n=t.chart,r=t.options,i=r.innerRadius,a=r.statistic,o=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=E(s,["percent","formatter"])||(function(u){return"".concat((u*100).toFixed(2),"%")}),c=a.content;c&&(c=A({},c,{content:kt(c.content)?l(o):c.content})),Nn(n,{statistic:x(x({},a),{content:c}),plotType:"ring-progress"},{percent:o})}return e&&n.render(!0),t}function bo(t){return N(mo,ot({}),Wu,Fo,tt,K,at())(t)}var Bu={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},qu=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="ring-process",n}return e.getDefaultOptions=function(){return Bu},e.prototype.changeData=function(n){this.chart.emit(ct.BEFORE_CHANGE_DATA,Nt.fromData(this.chart,ct.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(Hr(n)),Fo({chart:this.chart,options:this.options},!0),this.chart.emit(ct.AFTER_CHANGE_DATA,Nt.fromData(this.chart,ct.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bo},e})(q);function ie(t,e){return Gu(t)||Uu(t,e)||Hu()}function Gu(t){if(Array.isArray(t))return t}function Uu(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}function Hu(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Xr(t,e,n,r){t=t.filter(function(v,p){var y=e(v,p),g=n(v,p);return y!=null&&isFinite(y)&&g!=null&&isFinite(g)}),r&&t.sort(function(v,p){return e(v)-e(p)});for(var i=t.length,a=new Float64Array(i),o=new Float64Array(i),s=0,l=0,c,u,d,f=0;f<i;)d=t[f],a[f]=c=+e(d,f,t),o[f]=u=+n(d,f,t),++f,s+=(c-s)/f,l+=(u-l)/f;for(var h=0;h<i;++h)a[h]-=s,o[h]-=l;return[a,o,s,l]}function ge(t,e,n,r){for(var i=0,a=0,o=t.length;a<o;a++){var s=t[a],l=+e(s,a,t),c=+n(s,a,t);l!=null&&isFinite(l)&&c!=null&&isFinite(c)&&r(l,c,i++)}}function ke(t,e,n,r,i){var a=0,o=0;return ge(t,e,n,function(s,l){var c=l-i(s),u=l-r;a+=c*c,o+=u*u}),1-a/o}function Ti(t){return Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])*180/Math.PI}function Xu(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function ln(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=1e4,o=[l(t),l(e)],s=0;c(o)&&s<a;);return o;function l(u){return[u,n(u)]}function c(u){s++;for(var d=u.length,f=!1,h=0;h<d-1;h++){var v=u[h],p=u[h+1],y=Xu([v,p]),g=l(y[0]),m=Ti([v,y]),F=Ti([v,g]),S=Math.abs(m-F);S>i&&(u.splice(h+1,0,g),f=!0)}return f}}function sn(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,o=e-a*t;return[o,a]}function Yu(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,s=0,l=0,c=0,u=0,d=n?+n[0]:1/0,f=n?+n[1]:-1/0;ge(i,t,e,function(F,S){var b=Math.log(S),D=F*S;++a,o+=(S-o)/a,l+=(D-l)/a,u+=(F*D-u)/a,s+=(S*b-s)/a,c+=(D*b-c)/a,n||(F<d&&(d=F),F>f&&(f=F))});var h=sn(l/o,s/o,c/o,u/o),v=ie(h,2),p=v[0],y=v[1];p=Math.exp(p);var g=function(S){return p*Math.exp(y*S)},m=ln(d,f,g);return m.a=p,m.b=y,m.predict=g,m.rSquared=ke(i,t,e,o,g),m}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function So(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,s=0,l=0,c=0,u=n?+n[0]:1/0,d=n?+n[1]:-1/0;ge(i,t,e,function(m,F){++a,o+=(m-o)/a,s+=(F-s)/a,l+=(m*F-l)/a,c+=(m*m-c)/a,n||(m<u&&(u=m),m>d&&(d=m))});var f=sn(o,s,l,c),h=ie(f,2),v=h[0],p=h[1],y=function(F){return p*F+v},g=[[u,y(u)],[d,y(d)]];return g.a=p,g.b=v,g.predict=y,g.rSquared=ke(i,t,e,s,y),g}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function ju(t){t.sort(function(n,r){return n-r});var e=t.length/2;return e%1===0?(t[e-1]+t[e])/2:t[Math.floor(e)]}var Pi=2,Li=1e-12;function Zu(){var t=function(a){return a[0]},e=function(a){return a[1]},n=.3;function r(i){for(var a=Xr(i,t,e,!0),o=ie(a,4),s=o[0],l=o[1],c=o[2],u=o[3],d=s.length,f=Math.max(2,~~(n*d)),h=new Float64Array(d),v=new Float64Array(d),p=new Float64Array(d).fill(1),y=-1;++y<=Pi;){for(var g=[0,f-1],m=0;m<d;++m){for(var F=s[m],S=g[0],b=g[1],D=F-s[S]>s[b]-F?S:b,k=0,I=0,R=0,P=0,O=0,C=1/Math.abs(s[D]-F||1),W=S;W<=b;++W){var j=s[W],Z=l[W],w=Ku(Math.abs(F-j)*C)*p[W],M=j*w;k+=w,I+=M,R+=Z*w,P+=Z*M,O+=j*M}var _=sn(I/k,R/k,P/k,O/k),z=ie(_,2),T=z[0],$=z[1];h[m]=T+$*F,v[m]=Math.abs(l[m]-h[m]),Qu(s,m+1,g)}if(y===Pi)break;var H=ju(v);if(Math.abs(H)<Li)break;for(var X=0,V,U;X<d;++X)V=v[X]/(6*H),p[X]=V>=1?Li:(U=1-V*V)*U}return Ju(s,h,c,u)}return r.bandwidth=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Ku(t){return(t=1-t*t*t)*t*t}function Qu(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}function Ju(t,e,n,r){for(var i=t.length,a=[],o=0,s=0,l=[],c;o<i;++o)c=t[o]+n,l[0]===c?l[1]+=(e[o]-l[1])/++s:(s=0,l[1]+=r,l=[c,e[o]],a.push(l));return l[1]+=r,a}function tf(){var t=function(o){return o[0]},e=function(o){return o[1]},n=Math.E,r;function i(a){var o=0,s=0,l=0,c=0,u=0,d=r?+r[0]:1/0,f=r?+r[1]:-1/0,h=Math.log(n);ge(a,t,e,function(S,b){var D=Math.log(S)/h;++o,s+=(D-s)/o,l+=(b-l)/o,c+=(D*b-c)/o,u+=(D*D-u)/o,r||(S<d&&(d=S),S>f&&(f=S))});var v=sn(s,l,c,u),p=ie(v,2),y=p[0],g=p[1],m=function(b){return g*Math.log(b)/h+y},F=ln(d,f,m);return F.a=g,F.b=y,F.predict=m,F.rSquared=ke(a,t,e,l,m),F}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.base=function(a){return arguments.length?(n=a,i):n},i}function Ao(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=Xr(i,t,e),o=ie(a,4),s=o[0],l=o[1],c=o[2],u=o[3],d=s.length,f=0,h=0,v=0,p=0,y=0,g,m,F,S;for(g=0;g<d;)m=s[g],F=l[g++],S=m*m,f+=(S-f)/g,h+=(S*m-h)/g,v+=(S*S-v)/g,p+=(m*F-p)/g,y+=(S*F-y)/g;var b=0,D=0,k=n?+n[0]:1/0,I=n?+n[1]:-1/0;ge(i,t,e,function(w,M){D++,b+=(M-b)/D,n||(w<k&&(k=w),w>I&&(I=w))});var R=v-f*f,P=f*R-h*h,O=(y*f-p*h)/P,C=(p*R-y*h)/P,W=-O*f,j=function(M){return M=M-c,O*M*M+C*M+W+u},Z=ln(k,I,j);return Z.a=O,Z.b=C-2*O*c,Z.c=W-C*c+O*c*c+u,Z.predict=j,Z.rSquared=ke(i,t,e,b,j),Z}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function ef(){var t=function(o){return o[0]},e=function(o){return o[1]},n=3,r;function i(a){if(n===1){var o=So().x(t).y(e).domain(r)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(n===2){var s=Ao().x(t).y(e).domain(r)(a);return s.coefficients=[s.c,s.b,s.a],delete s.a,delete s.b,delete s.c,s}var l=Xr(a,t,e),c=ie(l,4),u=c[0],d=c[1],f=c[2],h=c[3],v=u.length,p=[],y=[],g=n+1,m=0,F=0,S=r?+r[0]:1/0,b=r?+r[1]:-1/0;ge(a,t,e,function(j,Z){++F,m+=(Z-m)/F,r||(j<S&&(S=j),j>b&&(b=j))});var D,k,I,R,P;for(D=0;D<g;++D){for(I=0,R=0;I<v;++I)R+=Math.pow(u[I],D)*d[I];for(p.push(R),P=new Float64Array(g),k=0;k<g;++k){for(I=0,R=0;I<v;++I)R+=Math.pow(u[I],D+k);P[k]=R}y.push(P)}y.push(p);var O=rf(y),C=function(Z){Z-=f;var w=h+O[0]+O[1]*Z+O[2]*Z*Z;for(D=3;D<g;++D)w+=O[D]*Math.pow(Z,D);return w},W=ln(S,b,C);return W.coefficients=nf(g,O,-f,h),W.predict=C,W.rSquared=ke(a,t,e,m,C),W}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.order=function(a){return arguments.length?(n=a,i):n},i}function nf(t,e,n,r){var i=Array(t),a,o,s,l;for(a=0;a<t;++a)i[a]=0;for(a=t-1;a>=0;--a)for(s=e[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(n,o)*l;return i[0]+=r,i}function rf(t){var e=t.length-1,n=[],r,i,a,o,s;for(r=0;r<e;++r){for(o=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(a=r;a<e+1;++a)s=t[a][r],t[a][r]=t[a][o],t[a][o]=s;for(i=r+1;i<e;++i)for(a=e;a>=r;a--)t[a][i]-=t[a][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(s=0,a=i+1;a<e;++a)s+=t[a][i]*n[a];n[i]=(t[e][i]-s)/t[i][i]}return n}function af(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,s=0,l=0,c=0,u=0,d=n?+n[0]:1/0,f=n?+n[1]:-1/0;ge(i,t,e,function(F,S){var b=Math.log(F),D=Math.log(S);++a,o+=(b-o)/a,s+=(D-s)/a,l+=(b*D-l)/a,c+=(b*b-c)/a,u+=(S-u)/a,n||(F<d&&(d=F),F>f&&(f=F))});var h=sn(o,s,l,c),v=ie(h,2),p=v[0],y=v[1];p=Math.exp(p);var g=function(S){return p*Math.pow(S,y)},m=ln(d,f,g);return m.a=p,m.b=y,m.predict=g,m.rSquared=ke(i,t,e,u,g),m}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var of={exp:Yu,linear:So,loess:Zu,log:tf,poly:ef,pow:af,quad:Ao};function lf(t,e){var n=10,r={regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-n,offsetY:-n,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-n,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-n,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return r}var sf=function(t,e){var n=e.view,r=e.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),s=n.getScaleByField(a),l=t.map(function(c){return n.getCoordinate().convert({x:o.scale(c[0]),y:s.scale(c[1])})});return Ls(l,!1)},cf=function(t){var e=t.options,n=e.xField,r=e.yField,i=e.data,a=e.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,c=a.equation,u,d=null;if(l)u=et(l)?l:l(i),d=c;else{var f=of[s]().x(function(h){return h[n]}).y(function(h){return h[r]});u=f(i),d=ff(s,u)}return[sf(u,t),d]},uf=function(t){var e,n=t.meta,r=n===void 0?{}:n,i=t.xField,a=t.yField,o=t.data,s=o[0][i],l=o[0][a],c=s>0,u=l>0;function d(f,h){var v=E(r,[f]);function p(g){return E(v,g)}var y={};return h==="x"?(st(s)&&(st(p("min"))||(y.min=c?0:s*2),st(p("max"))||(y.max=c?s*2:0)),y):(st(l)&&(st(p("min"))||(y.min=u?0:l*2),st(p("max"))||(y.max=u?l*2:0)),y)}return x(x({},r),(e={},e[i]=x(x({},r[i]),d(i,"x")),e[a]=x(x({},r[a]),d(a,"y")),e))};function ff(t,e){var n,r,i,a=function(c,u){return u===void 0&&(u=4),Math.round(c*Math.pow(10,u))/Math.pow(10,u)},o=function(c){return Number.isFinite(c)?a(c):"?"};switch(t){case"linear":return"y = ".concat(o(e.a),"x + ").concat(o(e.b),", R^2 = ").concat(o(e.rSquared));case"exp":return"y = ".concat(o(e.a),"e^(").concat(o(e.b),"x), R^2 = ").concat(o(e.rSquared));case"log":return"y = ".concat(o(e.a),"ln(x) + ").concat(o(e.b),", R^2 = ").concat(o(e.rSquared));case"quad":return"y = ".concat(o(e.a),"x^2 + ").concat(o(e.b),"x + ").concat(o(e.c),", R^2 = ").concat(o(e.rSquared));case"poly":for(var s="y = ".concat(o((n=e.coefficients)===null||n===void 0?void 0:n[0])," + ").concat(o((r=e.coefficients)===null||r===void 0?void 0:r[1]),"x + ").concat(o((i=e.coefficients)===null||i===void 0?void 0:i[2]),"x^2"),l=3;l<e.coefficients.length;++l)s+=" + ".concat(o(e.coefficients[l]),"x^").concat(l);return"".concat(s,", R^2 = ").concat(o(e.rSquared));case"pow":return"y = ".concat(o(e.a),"x^").concat(o(e.b),", R^2 = ").concat(o(e.rSquared))}return null}function wo(t){var e=t.data,n=e===void 0?[]:e,r=t.xField,i=t.yField;if(n.length){for(var a=!0,o=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));c++)s=l;var u=[];a&&u.push(r),o&&u.push(i);var d=J(uf(t),u);return A({},t,{meta:d})}return t}function df(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.color,o=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,d=n.yField,f=n.sizeField,h=n.size,v=n.tooltip;f&&(h||(h=[2,8]),st(h)&&(h=[h,h])),v&&!v.fields&&(v=x(x({},v),{fields:[u,d,c,f,l]})),e.data(r),wt(A({},t,{options:{seriesField:c,point:{color:a,shape:o,size:h,style:s},tooltip:v}}));var p=vt(e,"point");return i&&p.adjust(i),t}function bn(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=wo(n);return N(ot((e={},e[a]=r,e[o]=i,e)))(A({},t,{options:s}))}function hf(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return e.axis(a,r),e.axis(o,i),t}function vf(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=r!==!1;return i&&e.legend(i,c?r:!1),a&&(s?e.legend(a,s):e.legend(a,s===!1?!1:r)),o&&e.legend(o,l||!1),!c&&!s&&!l&&e.legend(!1),t}function pf(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=vt(e,"point");if(!r)a.label(!1);else{var o=r.callback,s=yt(r,["callback"]);a.label({fields:[i],callback:o,cfg:ht(s)})}return t}function gf(t){var e=t.options,n=e.quadrant,r=[];if(n){var i=n.xBaseline,a=i===void 0?0:i,o=n.yBaseline,s=o===void 0?0:o,l=n.labels,c=n.regionStyle,u=n.lineStyle,d=lf(a,s),f=new Array(4).join(",").split(",");f.forEach(function(h,v){r.push(x(x({type:"region",top:!1},d.regionStyle[v].position),{style:A({},d.regionStyle[v].style,c?.[v])}),x({type:"text",top:!0},A({},d.labelStyle[v],l?.[v])))}),r.push({type:"line",top:!1,start:["min",s],end:["max",s],style:A({},d.lineStyle,u)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:A({},d.lineStyle,u)})}return N(at(r))(t)}function yf(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,a=r.equationStyle,o=a===void 0?{}:a,s=r.top,l=s===void 0?!1:s,c=r.showEquation,u=c===void 0?!1:c,d={stroke:"#9ba29a",lineWidth:2,opacity:.5},f={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};n.annotation().shape({top:l,render:function(h,v){var p=h.addGroup({id:"".concat(n.id,"-regression-line"),name:"regression-line-group"}),y=cf({view:v,options:e}),g=y[0],m=y[1];p.addShape("path",{name:"regression-line",attrs:x(x({path:g},d),i)}),u&&p.addShape("text",{name:"regression-equation",attrs:x(x(x({},f),o),{text:m})})}})}return t}function mf(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(r):r===!1&&e.tooltip(!1),t}function Do(t){return N(df,bn,hf,vf,mf,pf,Ua,an,_r,rt,gf,tt,K,yf)(t)}var xf=A({},q.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});it("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Ff=(function(t){B(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.type="scatter",i.on(ct.BEFORE_RENDER,function(a){var o,s,l=i,c=l.options,u=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===vi.FILTER){var d=i.chart.filterData(i.chart.getData());bn({chart:u,options:x(x({},c),{data:d})})}((s=a.data)===null||s===void 0?void 0:s.source)===vi.RESET&&bn({chart:u,options:c})}),i}return e.getDefaultOptions=function(){return xf},e.prototype.changeData=function(n){this.updateOption(wo(A({},this.options,{data:n})));var r=this,i=r.options,a=r.chart;bn({chart:a,options:i}),this.chart.changeData(n)},e.prototype.getSchemaAdaptor=function(){return Do},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q),Je="$$stock-range$$",Hn="trend",Eo="up",Oo="down",bf={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if(t==="x"){var i=n[0];r=i?i.title:e}else r=e;return{position:t==="y"?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},Sf=A({},q.getDefaultOptions(),{tooltip:bf,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Io(t,e){return Tt(t,function(n){var r=n&&x({},n);if(et(e)&&r){var i=e[0],a=e[1],o=e[2],s=e[3];r[Hn]=r[i]<=r[a]?Eo:Oo,r[Je]=[r[i],r[a],r[o],r[s]]}return r})}function Af(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,s=n.tooltip,l=n.stockStyle;e.data(Io(i,r));var c=s;return c!==!1&&(c=A({},{fields:r},c)),Nr(A({},t,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:Je,seriesField:Hn,rawFields:r,tooltip:c}})),t}function wf(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=(e={},e[l]={type:"timeCat",tickCount:6},e[Hn]={values:[Eo,Oo]},e),u=A(c,a,(n={},n[l]=J(o,mt),n[Je]=J(s,mt),n));return r.scale(u),t}function Df(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(Je,!1):e.axis(Je,i),t}function Ef(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==!1?e.tooltip(r):e.tooltip(!1),t}function Of(t){var e=t.chart,n=t.options,r=n.legend;return r?e.legend(Hn,r):r===!1&&e.legend(!1),t}function Mo(t){N(K,Af,wf,Df,Ef,Of,rt,tt,at(),an)(t)}var If=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return Sf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Mo},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField;this.chart.changeData(Io(n,r))},e})(q);function ye(t){return Tt(t||[],function(e,n){return{x:"".concat(n),y:e}})}var tn="x",be="y",ko={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return"".concat(E(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Mf={appendPadding:2,tooltip:x({},ko),animation:{}};function kf(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,s=n.line,l=o?.state,c=ye(r);e.data(c);var u=A({},t,{options:{xField:tn,yField:be,area:{color:i,style:a},line:s,point:o}}),d=A({},u,{options:{tooltip:!1}}),f=A({},u,{options:{tooltip:!1,state:l}});return Bn(u),Me(d),wt(f),e.axis(!1),e.legend(!1),t}function Te(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.data,s=ye(o);return N(ot((e={},e[tn]=i,e[be]=a,e),(n={},n[tn]={type:"cat"},n[be]=Lr(s,be),n)))(t)}function To(t){return N(At("areaStyle"),kf,Te,dt,K,tt,at())(t)}var Tf={appendPadding:2,tooltip:x({},ko),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Pf=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-area",n}return e.getDefaultOptions=function(){return Tf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Te({chart:i,options:a}),i.changeData(ye(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return To},e})(q);function Lf(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,s=ye(r);e.data(s);var l=A({},t,{options:{xField:tn,yField:be,widthRatio:o,interval:{style:a,color:i}}});return pt(l),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function Po(t){return N(K,At("columnStyle"),Lf,Te,dt,tt,at())(t)}var Cf={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return"".concat(E(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},Rf={appendPadding:2,tooltip:x({},Cf),animation:{}},zf=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-column",n}return e.getDefaultOptions=function(){return Rf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Te({chart:i,options:a}),i.changeData(ye(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Po},e})(q);function $f(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,s=o?.state,l=ye(r);e.data(l);var c=A({},t,{options:{xField:tn,yField:be,line:{color:i,style:a},point:o}}),u=A({},c,{options:{tooltip:!1,state:s}});return Me(c),wt(u),e.axis(!1),e.legend(!1),t}function Lo(t){return N($f,Te,K,dt,tt,at())(t)}var _f=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-line",n}return e.getDefaultOptions=function(){return Mf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Te({chart:i,options:a}),i.changeData(ye(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Lo},e})(q),Nf={line:qa,pie:go,column:Un,bar:Xa,area:Ga,gauge:so,"tiny-line":Lo,"tiny-column":Po,"tiny-area":To,"ring-progress":bo,progress:xo,scatter:Do,histogram:uo,funnel:eo,stock:Mo},Vf={line:wu,pie:$u,column:zc,bar:Ya,area:dc,gauge:vu,"tiny-line":_f,"tiny-column":zf,"tiny-area":Pf,"ring-progress":qu,progress:Vu,scatter:Ff,histogram:bu,funnel:ou,stock:If},Wf={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function Ar(t,e,n){var r=Vf[t];if(!r){console.error("could not find ".concat(t," plot"));return}var i=Nf[t];i({chart:e,options:A({},r.getDefaultOptions(),E(Wf,t,{}),n)})}function Bf(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return L(r,function(a){var o=a.region,s=a.data,l=a.meta,c=a.axes,u=a.coordinate,d=a.interactions,f=a.annotations,h=a.tooltip,v=a.geometries,p=e.createView({region:o});p.data(s);var y={};c&&L(c,function(g,m){y[m]=J(g,mt)}),y=A({},l,y),p.scale(y),c?L(c,function(g,m){p.axis(m,g)}):p.axis(!1),p.coordinate(u),L(v,function(g){var m=bt({chart:p,options:g}).ext,F=g.adjust;F&&m.geometry.adjust(F)}),L(d,function(g){g.enable===!1?p.removeInteraction(g.type):p.interaction(g.type,g.cfg)}),L(f,function(g){p.annotation()[g.type](x({},g))}),typeof a.animation=="boolean"?p.animate(!1):(p.animate(!0),L(p.geometries,function(g){g.animate(a.animation)})),h&&(p.interaction("tooltip"),p.tooltip(h))}),i?L(i,function(a,o){e.legend(o,a)}):e.legend(!1),e.tooltip(n.tooltip),t}function qf(t){var e=t.chart,n=t.options,r=n.plots,i=n.data,a=i===void 0?[]:i;return L(r,function(o){var s=o.type,l=o.region,c=o.options,u=c===void 0?{}:c,d=o.top,f=u.tooltip;if(d){Ar(s,e,x(x({},u),{data:a}));return}var h=e.createView(x({region:l},J(u,Na)));f&&h.interaction("tooltip"),Ar(s,h,x({data:a},u))}),t}function Gf(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function Uf(t){return N(tt,Bf,qf,rt,tt,K,dt,Gf,at())(t)}function Hf(t,e){var n=t.getModel(),r=n.data,i;return et(r)?i=r[0][e]:i=r[e],i}function Xf(t){var e=On(t);L(e,function(n){n.hasState("active")&&n.setState("active",!1),n.hasState("selected")&&n.setState("selected",!1),n.hasState("inactive")&&n.setState("inactive",!1)})}var Yf=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAssociationItems=function(n,r){var i,a=this.context.event,o=r||{},s=o.linkField,l=o.dim,c=[];if(!((i=a.data)===null||i===void 0)&&i.data){var u=a.data.data;L(n,function(d){var f,h,v=s;if(l==="x"?v=d.getXScale().field:l==="y"?v=(f=d.getYScales().find(function(y){return y.field===v}))===null||f===void 0?void 0:f.field:v||(v=(h=d.getGroupScales()[0])===null||h===void 0?void 0:h.field),!!v){var p=Tt(On(d),function(y){var g=!1,m=!1,F=et(u)?E(u[0],v):E(u,v);return Hf(y,v)===F?g=!0:m=!0,{element:y,view:d,active:g,inactive:m}});c.push.apply(c,p)}})}return c},e.prototype.showTooltip=function(n){var r=xi(this.context.view),i=this.getAssociationItems(r,n);L(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},e.prototype.hideTooltip=function(){var n=xi(this.context.view);L(n,function(r){r.hideTooltip()})},e.prototype.active=function(n){var r=Be(this.context.view),i=this.getAssociationItems(r,n);L(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},e.prototype.selected=function(n){var r=Be(this.context.view),i=this.getAssociationItems(r,n);L(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},e.prototype.highlight=function(n){var r=Be(this.context.view),i=this.getAssociationItems(r,n);L(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},e.prototype.reset=function(){var n=Be(this.context.view);L(n,function(r){Xf(r)})},e})(Jt);St("association",Yf);it("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});it("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});it("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});it("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="mix",n}return e.prototype.getSchemaAdaptor=function(){return Uf},e})(q);var Ci;(function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"})(Ci||(Ci={}));var Wt="first-axes-view",Bt="second-axes-view",se="series-field-key";function Co(t,e,n,r,i){var a=[];e.forEach(function(d){r.forEach(function(f){var h,v=(h={},h[t]=f[t],h[n]=d,h[d]=f[d],h);a.push(v)})});var o=Object.values(Ue(a,n)),s=o[0],l=s===void 0?[]:s,c=o[1],u=c===void 0?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function jt(t){return t!=="vertical"}function jf(t,e,n){var r=e[0],i=e[1],a=r.autoPadding,o=i.autoPadding,s=t.__axisPosition,l=s.layout,c=s.position;if(jt(l)&&c==="top"&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),jt(l)&&c==="bottom"&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!jt(l)&&c==="bottom"){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,u),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,u)}if(!jt(l)&&c==="top"){var u=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,u),i.autoPadding=n.instance(0,o.right,a.top,u)}}function Zf(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,s=n.barStyle,l=n.widthRatio,c=n.legend,u=n.layout,d=Co(i,a,se,r,jt(u));c?e.legend(se,c):c===!1&&e.legend(!1);var f,h,v=d[0],p=d[1];jt(u)?(f=e.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Wt}),f.coordinate().transpose().reflect("x"),h=e.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Bt}),h.coordinate().transpose(),f.data(v),h.data(p)):(f=e.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Wt}),h=e.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Bt}),h.coordinate().reflect("y"),f.data(v),h.data(p));var y=A({},t,{chart:f,options:{widthRatio:l,xField:i,yField:a[0],seriesField:se,interval:{color:o,style:s}}});pt(y);var g=A({},t,{chart:h,options:{xField:i,yField:a[1],seriesField:se,widthRatio:l,interval:{color:o,style:s}}});return pt(g),t}function Kf(t){var e,n,r,i=t.options,a=t.chart,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=G(a,Wt),d=G(a,Bt),f={};return rs(i?.meta||{}).map(function(h){E(i?.meta,[h,"alias"])&&(f[h]=i.meta[h].alias)}),a.scale((e={},e[se]={sync:!0,formatter:function(h){return E(f,h,h)}},e)),ot((n={},n[l]=o,n[c[0]]=s[c[0]],n))(A({},t,{chart:u})),ot((r={},r[l]=o,r[c[1]]=s[c[1]],r))(A({},t,{chart:d})),t}function Qf(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=n.layout,l=G(e,Wt),c=G(e,Bt);return r?.position==="bottom"?c.axis(a,x(x({},r),{label:{formatter:function(){return""}}})):c.axis(a,!1),r===!1?l.axis(a,!1):l.axis(a,x({position:jt(s)?"top":"bottom"},r)),i===!1?(l.axis(o[0],!1),c.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),c.axis(o[1],i[o[1]])),e.__axisPosition={position:l.getOptions().axes[a].position,layout:s},t}function Jf(t){var e=t.chart;return rt(A({},t,{chart:G(e,Wt)})),rt(A({},t,{chart:G(e,Bt)})),t}function td(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return de(A({},t,{chart:G(e,Wt),options:{yAxis:i[r[0]]}})),de(A({},t,{chart:G(e,Bt),options:{yAxis:i[r[1]]}})),t}function ed(t){var e=t.chart;return K(A({},t,{chart:G(e,Wt)})),K(A({},t,{chart:G(e,Bt)})),K(t),t}function nd(t){var e=t.chart;return tt(A({},t,{chart:G(e,Wt)})),tt(A({},t,{chart:G(e,Bt)})),t}function rd(t){var e=this,n,r,i=t.chart,a=t.options,o=a.label,s=a.yField,l=a.layout,c=G(i,Wt),u=G(i,Bt),d=vt(c,"interval"),f=vt(u,"interval");if(!o)d.label(!1),f.label(!1);else{var h=o.callback,v=yt(o,["callback"]);v.position||(v.position="middle"),v.offset===void 0&&(v.offset=2);var p=x({},v);if(jt(l)){var y=((n=p.style)===null||n===void 0?void 0:n.textAlign)||(v.position==="middle"?"center":"left");v.style=A({},v.style,{textAlign:y});var g={left:"right",right:"left",center:"center"};p.style=A({},p.style,{textAlign:g[y]})}else{var m={top:"bottom",bottom:"top",middle:"middle"};typeof v.position=="string"?v.position=m[v.position]:typeof v.position=="function"&&(v.position=function(){for(var b=[],D=0;D<arguments.length;D++)b[D]=arguments[D];return m[v.position.apply(e,b)]});var F=((r=p.style)===null||r===void 0?void 0:r.textBaseline)||"bottom";p.style=A({},p.style,{textBaseline:F});var S={top:"bottom",bottom:"top",middle:"middle"};v.style=A({},v.style,{textBaseline:S[F]})}d.label({fields:[s[0]],callback:h,cfg:ht(p)}),f.label({fields:[s[1]],callback:h,cfg:ht(v)})}return t}function id(t){return N(Zf,Kf,Qf,td,ed,rd,dt,Jf,nd)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bidirectional-bar",n}return e.getDefaultOptions=function(){return A({},t.getDefaultOptions.call(this),{syncViewPadding:jf})},e.prototype.changeData=function(n){n===void 0&&(n=[]),this.chart.emit(ct.BEFORE_CHANGE_DATA,Nt.fromData(this.chart,ct.BEFORE_CHANGE_DATA,null)),this.updateOption({data:n});var r=this.options,i=r.xField,a=r.yField,o=r.layout,s=Co(i,a,se,n,jt(o)),l=s[0],c=s[1],u=G(this.chart,Wt),d=G(this.chart,Bt);u.data(l),d.data(c),this.chart.render(!0),this.chart.emit(ct.AFTER_CHANGE_DATA,Nt.fromData(this.chart,ct.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return id},e.SERIES_FIELD_KEY=se,e})(q);var or,we="$$range$$",ad="low-q1-median-q3-high",od="$$y_outliers$$",Ro="outliers_view",ld=A({},q.getDefaultOptions(),{meta:(or={},or[we]={min:0,alias:ad},or),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),zo=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4];n=Tt(t,function(l){return l[we]=[l[r],l[i],l[a],l[o],l[s]],l})}return n};function sd(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,s=n.tooltip,l=n.boxStyle;e.data(zo(n.data,i));var c=et(i)?we:i,u=i?et(i)?i:[i]:[],d=s;d!==!1&&(d=A({},{fields:et(i)?i:[]},d));var f=Nr(A({},t,{options:{xField:r,yField:c,seriesField:a,tooltip:d,rawFields:u,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&f.geometry.adjust("dodge"),t}function cd(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,s=n.padding,l=n.label;if(!a)return t;var c=e.createView({padding:s,id:Ro}),u=i.reduce(function(d,f){var h=f[a];return h.forEach(function(v){var p;return d.push(x(x({},f),(p={},p[a]=v,p)))}),d},[]);return c.data(u),wt({chart:c,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),c.axis(!1),t}function ud(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,d=Array.isArray(c)?we:c,f={};if(u){var h=od;f=(e={},e[u]={sync:h,nice:!0},e[d]={sync:h,nice:!0},e)}var v=A(f,a,(n={},n[l]=J(o,mt),n[d]=J(s,mt),n));return r.scale(v),t}function fd(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,s=Array.isArray(o)?we:o;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(we,!1):e.axis(s,i),t}function dd(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function hd(t){return N(sd,cd,ud,fd,dd,dt,at(),rt,tt,K)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return ld},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField,i=this.chart.views.find(function(a){return a.id===Ro});i&&i.data(n),this.chart.changeData(zo(n,r))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hd},e})(q);function Ri(t,e,n){return t.length>1?"".concat(e,"_").concat(n):"".concat(e)}function $o(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,a=t.targetField,o=t.layout,s=[],l=[];e.forEach(function(d,f){var h=[d[i]].flat();h.sort(function(y,g){return y-g}),h.forEach(function(y,g){var m,F=g===0?y:h[g]-h[g-1];s.push((m={rKey:"".concat(i,"_").concat(g)},m[n]=n?d[n]:String(f),m[i]=F,m))});var v=[d[r]].flat();v.forEach(function(y,g){var m;s.push((m={mKey:Ri(v,r,g)},m[n]=n?d[n]:String(f),m[r]=y,m))});var p=[d[a]].flat();p.forEach(function(y,g){var m;s.push((m={tKey:Ri(p,a,g)},m[n]=n?d[n]:String(f),m[a]=y,m))}),l.push(d[i],d[r],d[a])});var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,o==="vertical"&&s.reverse(),{min:c,max:u,ds:s}}function vd(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,d=n.label,f=$o(n),h=f.min,v=f.max,p=f.ds;e.data(p);var y=A({},t,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:E(d,"range"),interval:{color:E(l,"range"),style:E(r,"range"),size:E(u,"range")}}});pt(y),e.geometries[0].tooltip(!1);var g=A({},t,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:E(d,"measure"),interval:{color:E(l,"measure"),style:E(r,"measure"),size:E(u,"measure")}}});pt(g);var m=A({},t,{options:{xField:s,yField:i,seriesField:"tKey",label:E(d,"target"),point:{color:E(l,"target"),style:E(r,"target"),size:lt(E(u,"target"))?function(F){return E(u,"target")(F)/2}:E(u,"target")/2,shape:c==="horizontal"?"line":"hyphen"}}});return wt(m),c==="horizontal"&&e.coordinate().transpose(),x(x({},t),{ext:{data:{min:h,max:v}}})}function _o(t){var e,n,r=t.options,i=t.ext,a=r.xAxis,o=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,d=i.data;return N(ot((e={},e[u]=a,e[c]=o,e),(n={},n[c]={min:d?.min,max:d?.max,sync:!0},n[s]={sync:"".concat(c)},n[l]={sync:"".concat(c)},n)))(t)}function pd(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,s=n.rangeField,l=n.targetField;return e.axis("".concat(s),!1),e.axis("".concat(l),!1),r===!1?e.axis("".concat(a),!1):e.axis("".concat(a),r),i===!1?e.axis("".concat(o),!1):e.axis("".concat(o),i),t}function gd(t){var e=t.chart,n=t.options,r=n.legend;return e.removeInteraction("legend-filter"),e.legend(r),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function yd(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,s=e.geometries,l=s[0],c=s[1],u=s[2];return E(r,"range")?l.label("".concat(o),x({layout:[{type:"limit-in-plot"}]},ht(r.range))):l.label(!1),E(r,"measure")?c.label("".concat(i),x({layout:[{type:"limit-in-plot"}]},ht(r.measure))):c.label(!1),E(r,"target")?u.label("".concat(a),x({layout:[{type:"limit-in-plot"}]},ht(r.target))):u.label(!1),t}function md(t){N(vd,_o,pd,gd,K,yd,dt,rt,tt)(t)}var xd=A({},q.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return xd},e.prototype.changeData=function(n){this.updateOption({data:n});var r=$o(this.options),i=r.min,a=r.max,o=r.ds;_o({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},e.prototype.getSchemaAdaptor=function(){return md},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var Fd={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function bd(t,e,n){L(t,function(r,i){r.inEdges=e.filter(function(a){return"".concat(n.target(a))==="".concat(i)}),r.outEdges=e.filter(function(a){return"".concat(n.source(a))==="".concat(i)}),r.edges=r.outEdges.concat(r.inEdges),r.frequency=r.edges.length,r.value=0,r.inEdges.forEach(function(a){r.value+=n.targetWeight(a)}),r.outEdges.forEach(function(a){r.value+=n.sourceWeight(a)})})}function Sd(t,e){var n={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return"".concat(e.id(i)).localeCompare("".concat(e.id(a)))}},r=n[e.sortBy];!r&&lt(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}function Ad(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;t.forEach(function(l){o+=l.value}),t.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-r),l.height=a}),t.forEach(function(l,c){for(var u=0,d=c-1;d>=0;d--)u+=t[d].width+2*i;var f=l.minX=i+u,h=l.maxX=l.minX+l.width,v=l.minY=e.y-a/2,p=l.maxY=v+a;l.x=[f,h,h,f],l.y=[v,v,p,p]})}else{var s=1/n;t.forEach(function(l,c){l.x=(c+.5)*s,l.y=e.y})}return t}function wd(t,e,n){if(n.weight){var r={};L(t,function(i,a){r[a]=i.value}),e.forEach(function(i){var a=n.source(i),o=n.target(i),s=t[a],l=t[o];if(s&&l){var c=r[a],u=n.sourceWeight(i),d=s.minX+(s.value-c)/s.value*s.width,f=d+u/s.value*s.width;r[a]-=u;var h=r[o],v=n.targetWeight(i),p=l.minX+(l.value-h)/l.value*l.width,y=p+v/l.value*l.width;r[o]-=v;var g=n.y;i.x=[d,f,p,y],i.y=[g,g,g,g],i.source=s,i.target=l}})}else e.forEach(function(i){var a=t[n.source(i)],o=t[n.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return e}function Dd(t){return Vt({},Fd,t)}function Ed(t,e){var n=Dd(t),r={},i=e.nodes,a=e.links;i.forEach(function(l){var c=n.id(l);r[c]=l}),bd(r,a,n),Sd(i,n);var o=Ad(i,n),s=wd(r,a,n);return{nodes:o,links:s}}var No="x",Vo="y",Wo="name",Bo="source",Od={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){var n=(t[0]+t[1])/2,r=n>.5?-4:4;return{offsetX:r,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!E(t,[0,"data","isNode"])},formatter:function(t){var e=t.source,n=t.target,r=t.value;return{name:"".concat(e," -> ").concat(n),value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Id(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,s=e.nodeWidthRatio,l=e.rawFields,c=l===void 0?[]:l,u=Oa(n,r,i,a),d=Ed({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},u),f=d.nodes,h=d.links,v=f.map(function(y){return x(x({},J(y,Q(["id","x","y","name"],c,!0))),{isNode:!0})}),p=h.map(function(y){return x(x({source:y.source.name,target:y.target.name,name:y.source.name||y.target.name},J(y,Q(["x","y","value"],c,!0))),{isNode:!1})});return x(x({},t),{ext:x(x({},t.ext),{chordData:{nodesData:v,edgesData:p}})})}function Md(t){var e,n=t.chart;return n.scale((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},e[Wo]={sync:"color"},e[Bo]={sync:"color"},e)),t}function kd(t){var e=t.chart;return e.axis(!1),t}function Td(t){var e=t.chart;return e.legend(!1),t}function Pd(t){var e=t.chart,n=t.options,r=n.tooltip;return e.tooltip(r),t}function Ld(t){var e=t.chart;return e.coordinate("polar").reflect("y"),t}function Cd(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,s=e.createView();return s.data(r),qn({chart:s,options:{xField:No,yField:Vo,seriesField:Wo,polygon:{style:i},label:a,tooltip:o}}),t}function Rd(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=e.createView();o.data(r);var s={xField:No,yField:Vo,seriesField:Bo,edge:{style:i,shape:"arc"},tooltip:a};return $a({chart:o,options:s}),t}function zd(t){var e=t.chart,n=t.options,r=n.animation;return rn(e,r,Os(e)),t}function $d(t){return N(K,Id,Ld,Md,kd,Td,Pd,Rd,Cd,rt,oe,zd)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="chord",n}return e.getDefaultOptions=function(){return Od},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $d},e})(q);var _d=["x","y","r","name","value","path","depth"],Nd={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},zi=4,Vd=0,$i=5,_i="drilldown-bread-crumb",Wd={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},en="hierarchy-data-transform-params",Bd=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.name="drill-down",n.historyCache=[],n.breadCrumbGroup=null,n.breadCrumbCfg=Wd,n}return e.prototype.click=function(){var n=E(this.context,["event","data","data"]);if(!n)return!1;this.drill(n),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var n=this.context.view.getCoordinate(),r=this.breadCrumbGroup,i=r.getBBox(),a=this.getButtonCfg().position,o={x:n.start.x,y:n.end.y-(i.height+$i*2)};n.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:n.start.x,y:n.start.y});var s=Ft.transform(null,[["t",o.x+Vd,o.y+i.height+$i]]);r.setMatrix(s)}},e.prototype.back=function(){Ye(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(n){var r=this.context.view,i=E(r,["interactions","drill-down","cfg","transformData"],function(c){return c}),a=i(x({data:n.data},n[en]));r.changeData(a);for(var o=[],s=n;s;){var l=s.data;o.unshift({id:"".concat(l.name,"_").concat(s.height,"_").concat(s.depth),name:l.name,children:i(x({data:l},n[en]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},e.prototype.backTo=function(n){if(!(!n||n.length<=0)){var r=this.context.view,i=tr(n).children;r.changeData(i),n.length>1?(this.historyCache=n,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var n=this.context.view,r=E(n,["interactions","drill-down","cfg","drillDownConfig"]);return A(this.breadCrumbCfg,r?.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var n=this,r=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:_i});var a=0;i.forEach(function(o,s){var l=n.breadCrumbGroup.addShape({type:"text",id:o.id,name:"".concat(_i,"_").concat(o.name,"_text"),attrs:x(x({text:s===0&&!kt(r.rootText)?r.rootText:o.name},r.textStyle),{x:a,y:0})}),c=l.getBBox();if(a+=c.width+zi,l.on("click",function(f){var h,v=f.target.get("id");if(v!==((h=tr(i))===null||h===void 0?void 0:h.id)){var p=i.slice(0,i.findIndex(function(y){return y.id===v})+1);n.backTo(p)}}),l.on("mouseenter",function(f){var h,v=f.target.get("id");v!==((h=tr(i))===null||h===void 0?void 0:h.id)?l.attr(r.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(r.textStyle)}),s<i.length-1){var u=n.breadCrumbGroup.addShape({type:"text",name:"".concat(r.name,"_").concat(o.name,"_divider"),attrs:x(x({text:r.dividerText},r.textStyle),{x:a,y:0})}),d=u.getBBox();a+=d.width+zi}})},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e})(Jt);function qd(t,e){return t.parent===e.parent?1:2}function Gd(t){return t.reduce(Ud,0)/t.length}function Ud(t,e){return t+e.x}function Hd(t){return 1+t.reduce(Xd,0)}function Xd(t,e){return Math.max(t,e.y)}function Yd(t){for(var e;e=t.children;)t=e[0];return t}function jd(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Zd(){var t=qd,e=1,n=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(f){var h=f.children;h?(f.x=Gd(h),f.y=Hd(h)):(f.x=o?s+=t(f,o):0,f.y=0,o=f)});var l=Yd(a),c=jd(a),u=l.x-t(l,c)/2,d=c.x+t(c,l)/2;return a.eachAfter(r?function(f){f.x=(f.x-a.x)*e,f.y=(a.y-f.y)*n}:function(f){f.x=(f.x-u)/(d-u)*e,f.y=(1-(a.y?f.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function Kd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Qd(){return this.eachAfter(Kd)}function Jd(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function th(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function eh(t,e){for(var n=this,r=[n],i=[],a,o,s,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function nh(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function rh(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function ih(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ah(t){for(var e=this,n=oh(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function oh(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function lh(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function sh(){return Array.from(this)}function ch(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function uh(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*fh(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Pe(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vh)):e===void 0&&(e=hh);for(var n=new De(t),r,i=[n],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new De(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(qo)}function dh(){return Pe(this).eachBefore(ph)}function hh(t){return t.children}function vh(t){return Array.isArray(t)?t[1]:null}function ph(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function qo(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function De(t){this.data=t,this.depth=this.height=0,this.parent=null}De.prototype=Pe.prototype={constructor:De,count:Qd,each:Jd,eachAfter:eh,eachBefore:th,find:nh,sum:rh,sort:ih,path:ah,ancestors:lh,descendants:sh,leaves:ch,links:uh,copy:dh,[Symbol.iterator]:fh};function gh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yh(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t}function Go(t){for(var e=0,n=(t=yh(Array.from(t))).length,r=[],i,a;e<n;)i=t[e],a&&Uo(a,i)?++e:(a=xh(r=mh(r,i)),e=0);return a}function mh(t,e){var n,r;if(lr(e,t))return[e];for(n=0;n<t.length;++n)if(gn(e,t[n])&&lr(qe(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(gn(qe(t[n],t[r]),e)&&gn(qe(t[n],e),t[r])&&gn(qe(t[r],e),t[n])&&lr(Ho(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function gn(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Uo(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function lr(t,e){for(var n=0;n<e.length;++n)if(!Uo(t,e[n]))return!1;return!0}function xh(t){switch(t.length){case 1:return Fh(t[0]);case 2:return qe(t[0],t[1]);case 3:return Ho(t[0],t[1],t[2])}}function Fh(t){return{x:t.x,y:t.y,r:t.r}}function qe(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,c=o-r,u=s-i,d=Math.sqrt(l*l+c*c);return{x:(n+a+l/d*u)/2,y:(r+o+c/d*u)/2,r:(d+i+s)/2}}function Ho(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,c=n.x,u=n.y,d=n.r,f=r-o,h=r-c,v=i-s,p=i-u,y=l-a,g=d-a,m=r*r+i*i-a*a,F=m-o*o-s*s+l*l,S=m-c*c-u*u+d*d,b=h*v-f*p,D=(v*S-p*F)/(b*2)-r,k=(p*y-v*g)/b,I=(h*F-f*S)/(b*2)-i,R=(f*g-h*y)/b,P=k*k+R*R-1,O=2*(a+D*k+I*R),C=D*D+I*I-a*a,W=-(P?(O+Math.sqrt(O*O-4*P*C))/(2*P):C/O);return{x:r+D+k*W,y:i+I+R*W,r:W}}function Ni(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,s,l,c=r*r+o*o;c?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(c+l-a)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),n.x=t.x-i*r-s*o,n.y=t.y-i*o+s*r):(i=(c+a-l)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),n.x=e.x+i*r-s*o,n.y=e.y+i*o+s*r)):(n.x=e.x+n.r,n.y=e.y)}function Vi(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Wi(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function yn(t){this._=t,this.next=null,this.previous=null}function Xo(t){if(!(i=(t=gh(t)).length))return 0;var e,n,r,i,a,o,s,l,c,u,d;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Ni(n,e,r=t[2]),e=new yn(e),n=new yn(n),r=new yn(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Ni(e._,n._,r=t[s]),r=new yn(r),l=n.next,c=e.previous,u=n._.r,d=e._.r;do if(u<=d){if(Vi(l._,r._)){n=l,e.next=n,n.previous=e,--s;continue t}u+=l._.r,l=l.next}else{if(Vi(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}d+=c._.r,c=c.previous}while(l!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=Wi(e);(r=r.next)!==n;)(o=Wi(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Go(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function bh(t){return Xo(t),t}function Sh(t){return t==null?null:Tn(t)}function Tn(t){if(typeof t!="function")throw new Error;return t}function le(){return 0}function Fe(t){return function(){return t}}function Ah(t){return Math.sqrt(t.value)}function Yo(){var t=null,e=1,n=1,r=le;function i(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(Bi(t)).eachAfter(sr(r,.5)).eachBefore(qi(1)):a.eachBefore(Bi(Ah)).eachAfter(sr(le,1)).eachAfter(sr(r,a.r/Math.min(e,n))).eachBefore(qi(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Sh(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Fe(+a),i):r},i}function Bi(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function sr(t,e){return function(n){if(r=n.children){var r,i,a=r.length,o=t(n)*e||0,s;if(o)for(i=0;i<a;++i)r[i].r+=o;if(s=Xo(r),o)for(i=0;i<a;++i)r[i].r-=o;n.r=s+o}}}function qi(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function jo(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function cn(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(r-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function Zo(){var t=1,e=1,n=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),r&&o.eachBefore(jo),o}function a(o,s){return function(l){l.children&&cn(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var c=l.x0,u=l.y0,d=l.x1-n,f=l.y1-n;d<c&&(c=d=(c+d)/2),f<u&&(u=f=(u+f)/2),l.x0=c,l.y0=u,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var wh={depth:-1},Gi={};function Dh(t){return t.id}function Eh(t){return t.parentId}function Oh(){var t=Dh,e=Eh;function n(r){var i=Array.from(r),a=i.length,o,s,l,c,u,d,f,h=new Map;for(s=0;s<a;++s)o=i[s],u=i[s]=new De(o),(d=t(o,s,r))!=null&&(d+="")&&(f=u.id=d,h.set(f,h.has(f)?Gi:u)),(d=e(o,s,r))!=null&&(d+="")&&(u.parent=d);for(s=0;s<a;++s)if(u=i[s],d=u.parent){if(c=h.get(d),!c)throw new Error("missing: "+d);if(c===Gi)throw new Error("ambiguous: "+d);c.children?c.children.push(u):c.children=[u],u.parent=c}else{if(l)throw new Error("multiple roots");l=u}if(!l)throw new Error("no root");if(l.parent=wh,l.eachBefore(function(v){v.depth=v.parent.depth+1,--a}).eachBefore(qo),l.parent=null,a>0)throw new Error("cycle");return l}return n.id=function(r){return arguments.length?(t=Tn(r),n):t},n.parentId=function(r){return arguments.length?(e=Tn(r),n):e},n}function Ih(t,e){return t.parent===e.parent?1:2}function cr(t){var e=t.children;return e?e[0]:t.t}function ur(t){var e=t.children;return e?e[e.length-1]:t.t}function Mh(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function kh(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function Th(t,e,n){return t.a.parent===e.parent?t.a:n}function Sn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Sn.prototype=Object.create(De.prototype);function Ph(t){for(var e=new Sn(t,0),n,r=[e],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new Sn(a[o],o)),i.parent=n;return(e.parent=new Sn(null,0)).children=[e],e}function Lh(){var t=Ih,e=1,n=1,r=null;function i(c){var u=Ph(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var d=c,f=c,h=c;c.eachBefore(function(m){m.x<d.x&&(d=m),m.x>f.x&&(f=m),m.depth>h.depth&&(h=m)});var v=d===f?1:t(d,f)/2,p=v-d.x,y=e/(f.x+v+p),g=n/(h.depth||1);c.eachBefore(function(m){m.x=(m.x+p)*y,m.y=m.depth*g})}return c}function a(c){var u=c.children,d=c.parent.children,f=c.i?d[c.i-1]:null;if(u){kh(c);var h=(u[0].z+u[u.length-1].z)/2;f?(c.z=f.z+t(c._,f._),c.m=c.z-h):c.z=h}else f&&(c.z=f.z+t(c._,f._));c.parent.A=s(c,f,c.parent.A||d[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,d){if(u){for(var f=c,h=c,v=u,p=f.parent.children[0],y=f.m,g=h.m,m=v.m,F=p.m,S;v=ur(v),f=cr(f),v&&f;)p=cr(p),h=ur(h),h.a=c,S=v.z+m-f.z-y+t(v._,f._),S>0&&(Mh(Th(v,c,d),c,S),y+=S,g+=S),m+=v.m,y+=f.m,F+=p.m,g+=h.m;v&&!ur(h)&&(h.t=v,h.m+=m-g),f&&!cr(p)&&(p.t=f,p.m+=y-F,d=c)}return d}function l(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}function Xn(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,c=t.value&&(i-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}var Ko=(1+Math.sqrt(5))/2;function Qo(t,e,n,r,i,a){for(var o=[],s=e.children,l,c,u=0,d=0,f=s.length,h,v,p=e.value,y,g,m,F,S,b,D;u<f;){h=i-n,v=a-r;do y=s[d++].value;while(!y&&d<f);for(g=m=y,b=Math.max(v/h,h/v)/(p*t),D=y*y*b,S=Math.max(m/D,D/g);d<f;++d){if(y+=c=s[d].value,c<g&&(g=c),c>m&&(m=c),D=y*y*b,F=Math.max(m/D,D/g),F>S){y-=c;break}S=F}o.push(l={value:y,dice:h<v,children:s.slice(u,d)}),l.dice?cn(l,n,r,i,p?r+=v*y/p:a):Xn(l,n,r,p?n+=h*y/p:i,a),p-=y,u=d}return o}const Jo=(function t(e){function n(r,i,a,o,s){Qo(e,r,i,a,o,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Ko);function tl(){var t=Jo,e=!1,n=1,r=1,i=[0],a=le,o=le,s=le,l=le,c=le;function u(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],e&&f.eachBefore(jo),f}function d(f){var h=i[f.depth],v=f.x0+h,p=f.y0+h,y=f.x1-h,g=f.y1-h;y<v&&(v=y=(v+y)/2),g<p&&(p=g=(p+g)/2),f.x0=v,f.y0=p,f.x1=y,f.y1=g,f.children&&(h=i[f.depth+1]=a(f)/2,v+=c(f)-h,p+=o(f)-h,y-=s(f)-h,g-=l(f)-h,y<v&&(v=y=(v+y)/2),g<p&&(p=g=(p+g)/2),t(f,v,p,y,g))}return u.round=function(f){return arguments.length?(e=!!f,u):e},u.size=function(f){return arguments.length?(n=+f[0],r=+f[1],u):[n,r]},u.tile=function(f){return arguments.length?(t=Tn(f),u):t},u.padding=function(f){return arguments.length?u.paddingInner(f).paddingOuter(f):u.paddingInner()},u.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:Fe(+f),u):a},u.paddingOuter=function(f){return arguments.length?u.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):u.paddingTop()},u.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:Fe(+f),u):o},u.paddingRight=function(f){return arguments.length?(s=typeof f=="function"?f:Fe(+f),u):s},u.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:Fe(+f),u):l},u.paddingLeft=function(f){return arguments.length?(c=typeof f=="function"?f:Fe(+f),u):c},u}function Ch(t,e,n,r,i){var a=t.children,o,s=a.length,l,c=new Array(s+1);for(c[0]=l=o=0;o<s;++o)c[o+1]=l+=a[o].value;u(0,s,t.value,e,n,r,i);function u(d,f,h,v,p,y,g){if(d>=f-1){var m=a[d];m.x0=v,m.y0=p,m.x1=y,m.y1=g;return}for(var F=c[d],S=h/2+F,b=d+1,D=f-1;b<D;){var k=b+D>>>1;c[k]<S?b=k+1:D=k}S-c[b-1]<c[b]-S&&d+1<b&&--b;var I=c[b]-F,R=h-I;if(y-v>g-p){var P=h?(v*R+y*I)/h:y;u(d,b,I,v,p,P,g),u(b,f,R,P,p,y,g)}else{var O=h?(p*R+g*I)/h:g;u(d,b,I,v,p,y,O),u(b,f,R,v,O,y,g)}}}function Rh(t,e,n,r,i){(t.depth&1?Xn:cn)(t,e,n,r,i)}const zh=(function t(e){function n(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,d,f=-1,h,v=l.length,p=r.value;++f<v;){for(c=l[f],u=c.children,d=c.value=0,h=u.length;d<h;++d)c.value+=u[d].value;c.dice?cn(c,i,a,o,p?a+=(s-a)*c.value/p:s):Xn(c,i,a,p?i+=(o-i)*c.value/p:o,s),p-=c.value}else r._squarify=l=Qo(e,r,i,a,o,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Ko),Ui=Object.freeze(Object.defineProperty({__proto__:null,cluster:Zd,hierarchy:Pe,pack:Yo,packEnclose:Go,packSiblings:bh,partition:Zo,stratify:Oh,tree:Lh,treemap:tl,treemapBinary:Ch,treemapDice:cn,treemapResquarify:zh,treemapSlice:Xn,treemapSliceDice:Rh,treemapSquarify:Jo},Symbol.toStringTag,{value:"Module"}));var el="nodeIndex",nl="childNodeCount",Yr="nodeAncestor",fr="Invalid field: it must be a string!";function jr(t,e){var n=t.field,r=t.fields;if(gt(n))return n;if(et(n))return console.warn(fr),n[0];if(console.warn("".concat(fr," will try to get fields instead.")),gt(r))return r;if(et(r)&&r.length)return r[0];throw new TypeError(fr)}function Zr(t){var e=[];if(t&&t.each){var n,r;t.each(function(i){var a,o;i.parent!==n?(n=i.parent,r=0):r+=1;var s=Oe((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return e.find(function(c){return c.name===l.name})||l}),function(l){var c=l.depth;return c>0&&c<i.depth});i[Yr]=s,i[nl]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[el]=r,e.push(i)})}else t&&t.eachNode&&t.eachNode(function(i){e.push(i)});return e}var $h={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function _h(t,e){e=Vt({},$h,e);var n=e.as;if(!et(n)||n.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var r;try{r=jr(e)}catch(c){console.warn(c)}var i=function(c){return Yo().size(e.size).padding(e.padding)(Pe(c).sum(function(u){return u[r]}).sort(e.sort))},a=i(t),o=n[0],s=n[1],l=n[2];return a.each(function(c){c[o]=c.x,c[s]=c.y,c[l]=c.r}),Zr(a)}function rl(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=r===void 0?[]:r,a=t.enableDrillDown,o=_h(e,x(x({},n),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var c,u=l.data.name,d=x({},l);d.depth>1;)u="".concat((c=d.parent.data)===null||c===void 0?void 0:c.name," / ").concat(u),d=d.parent;if(a&&l.depth>2)return null;var f=A({},l.data,x(x(x({},J(l.data,i)),{path:u}),l));f.ext=n,f[en]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},s.push(f)}),s}function il(t,e,n){var r=Cr([t,e]),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width,c=n.height,u=l-(s+a),d=c-(i+o),f=Math.min(u,d),h=(u-f)/2,v=(d-f)/2,p=i+v,y=a+h,g=o+v,m=s+h,F=[p,y,g,m],S=f<0?0:f;return{finalPadding:F,finalSize:S}}function Nh(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return A({options:{size:function(r){var i=r.r;return i*n}}},t)}function Vh(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,s=a;if(o?.enabled){var l=_n(n.appendPadding,E(o,["breadCrumb","position"]));s=Cr([l,a])}var c=il(i,s,r).finalPadding;return n.padding=c,n.appendPadding=0,t}function Wh(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,a=n.color,o=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,d=u===void 0?[]:u,f=n.drilldown,h=rl({data:n.data,hierarchyConfig:l,enableDrillDown:f?.enabled,rawFields:d});e.data(h);var v=e.viewBBox,p=il(r,i,v).finalSize,y=function(g){var m=g.r;return m*p};return c&&(y=function(g){return g[c]*p}),wt(A({},t,{options:{xField:"x",yField:"y",seriesField:o,sizeField:c,rawFields:Q(Q([],_d,!0),d,!0),point:{color:a,style:s,shape:"circle",size:y}}})),t}function Bh(t){return N(ot({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function qh(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;E(r,"fields")||(i=A({},{customItems:function(a){return a.map(function(o){var s=E(e.getOptions(),"scales"),l=E(s,["name","formatter"],function(u){return u}),c=E(s,["value","formatter"],function(u){return u});return x(x({},o),{name:l(o.data.name),value:c(o.data.value)})})}},i)),e.tooltip(i)}return t}function Gh(t){var e=t.chart;return e.axis(!1),t}function Uh(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e?.enabled?A({},t,{interactions:Q(Q([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:rl,enableDrillDown:!0}}],!1)}):t}function Hh(t){var e=t.chart,n=t.options;return rt({chart:e,options:Uh(n)}),t}function Xh(t){return N(At("pointStyle"),Nh,Vh,K,Bh,Wh,Gh,Ie,qh,Hh,tt,at())(t)}function Hi(t){var e=E(t,["event","data","data"],{});return et(e.children)&&e.children.length>0}function Xi(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,a=r.y,o=e.center,s=o.x,l=o.y,c=e.getRadius()*n,u=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2));return u<c}return!1}St("drill-down-action",Bd);it("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:Hi},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:Xi}],start:[{trigger:"element:click",isEnable:Hi,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:Xi,action:["drill-down-action:back"]}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="circle-packing",n}return e.getDefaultOptions=function(){return Nd},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xh},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(q);var Dt="left-axes-view",Et="right-axes-view",al={nice:!0,label:{autoHide:!0,autoRotate:!1}},Yh=x(x({},al),{position:"left"}),jh=x(x({},al),{position:"right",grid:null}),Ee;(function(t){t.Left="Left",t.Right="Right"})(Ee||(Ee={}));var he;(function(t){t.Line="line",t.Column="column"})(he||(he={}));function wr(t){return E(t,"geometry")===he.Line}function Kr(t){return E(t,"geometry")===he.Column}function Yi(t,e,n){return Kr(n)?A({},{geometry:he.Column,label:n.label&&n.isRange?{content:function(r){var i;return(i=r[e])===null||i===void 0?void 0:i.join("-")}}:void 0},n):x({geometry:he.Line},n)}function ji(t,e){var n=t[0],r=t[1];if(et(e)){var i=e[0],a=e[1];return[i,a]}var o=E(e,n),s=E(e,r);return[o,s]}function Zi(t,e){return e===Ee.Left?t===!1?!1:A({},Yh,t):e===Ee.Right?t===!1?!1:A({},jh,t):t}function Zh(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(wr(r)){Me(A({},t,{options:x(x(x({},J(e,c)),r),{line:{color:r.color,style:r.lineStyle}})})),wt(A({},t,{options:x(x(x({},J(e,c)),r),{point:r.point&&x({color:a,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&u.push({type:"stack"}),u.length&&L(n.geometries,function(d){d.adjust(u)})}return Kr(r)&&Un(A({},t,{options:x(x(x({},J(e,c)),r),{widthRatio:r.columnWidthRatio,interval:x(x({},J(r,["color"])),{style:r.columnStyle})})})),t}function Ki(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,a=E(i,"marker"),o=vt(e,wr(n)?"line":"interval");if(!n.seriesField){var s=E(e,"options.scales.".concat(r,".alias"))||r,l=o.getAttribute("color"),c=e.getTheme().defaultColor;l&&(c=Ft.getMappingValue(l,s,E(l,["values",0],c)));var u=(lt(a)?a:!Ln(a)&&A({},{style:{stroke:c,fill:c}},a))||(wr(n)?{symbol:function(f,h,v){return[["M",f-v,h],["L",f+v,h]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}});return[{value:r,name:s,marker:u,isGeometry:!0,viewId:e.id}]}var d=o.getGroupAttributes();return xt(d,function(f,h){var v=Ft.getLegendItems(e,o,h,e.getTheme(),a);return f.concat(v)},[])}var Qi=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,a=t.getXScale(),o=Ye(i);if(!(!a||!o)){var s=Aa(i,a.field),l=s,c=Ye(l),u=Math.round(n*(c-1)),d=Math.round(r*(c-1));t.filter(a.field,function(f){var h=l.indexOf(f);return h>-1?Ms(h,u,d):!0}),t.getRootView().render(!0)}};function Kh(t){var e,n=t.options,r=n.geometryOptions,i=r===void 0?[]:r,a=n.xField,o=n.yField,s=wa(i,function(l){var c=l.geometry;return c===he.Line||c===void 0});return A({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},e),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:ji(o,n.yAxis),geometryOptions:[Yi(a,o[0],i[0]),Yi(a,o[1],i[1])],annotations:ji(o,n.annotations)}})}function Qh(t){var e,n,r=t.chart,i=t.options,a=i.geometryOptions,o={line:0,column:1},s=[{type:(e=a[0])===null||e===void 0?void 0:e.geometry,id:Dt},{type:(n=a[1])===null||n===void 0?void 0:n.geometry,id:Et}];return s.sort(function(l,c){return-o[l.type]+o[c.type]}).forEach(function(l){return r.createView({id:l.id})}),t}function Jh(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,s=n.tooltip,l=[x(x({},a[0]),{id:Dt,data:o[0],yField:i[0]}),x(x({},a[1]),{id:Et,data:o[1],yField:i[1]})];return l.forEach(function(c){var u=c.id,d=c.data,f=c.yField,h=Kr(c)&&c.isPercent,v=h?Va(d,f,r,f):d,p=G(e,u).data(v),y=h?x({formatter:function(g){return{name:g[c.seriesField]||f,value:(Number(g[f])*100).toFixed(2)+"%"}}},s):s;Zh({chart:p,options:{xField:r,yField:f,tooltip:y,geometryOption:c}})}),t}function tv(t){var e,n=t.chart,r=t.options,i=r.geometryOptions,a=((e=n.getTheme())===null||e===void 0?void 0:e.colors10)||[],o=0;return n.once("beforepaint",function(){L(i,function(s,l){var c=G(n,l===0?Dt:Et);if(!s.color){var u=c.getGroupScales(),d=E(u,[0,"values","length"],1),f=a.slice(o,o+d).concat(l===0?[]:a);c.geometries.forEach(function(h){s.seriesField?h.color(s.seriesField,f):h.color(f[0])}),o+=d}}),n.render(!0)}),t}function ev(t){var e,n,r=t.chart,i=t.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return ot((e={},e[s]=a,e[l[0]]=o[0],e))(A({},t,{chart:G(r,Dt)})),ot((n={},n[s]=a,n[l[1]]=o[1],n))(A({},t,{chart:G(r,Et)})),t}function nv(t){var e=t.chart,n=t.options,r=G(e,Dt),i=G(e,Et),a=n.xField,o=n.yField,s=n.xAxis,l=n.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),r.axis(a,s),r.axis(o[0],Zi(l[0],Ee.Left)),i.axis(a,!1),i.axis(o[1],Zi(l[1],Ee.Right)),t}function rv(t){var e=t.chart,n=t.options,r=n.tooltip,i=G(e,Dt),a=G(e,Et);return e.tooltip(r),i.tooltip({shared:!0}),a.tooltip({shared:!0}),t}function iv(t){var e=t.chart;return rt(A({},t,{chart:G(e,Dt)})),rt(A({},t,{chart:G(e,Et)})),t}function av(t){var e=t.chart,n=t.options,r=n.annotations,i=E(r,[0]),a=E(r,[1]);return at(i)(A({},t,{chart:G(e,Dt),options:{annotations:i}})),at(a)(A({},t,{chart:G(e,Et),options:{annotations:a}})),t}function ov(t){var e=t.chart;return K(A({},t,{chart:G(e,Dt)})),K(A({},t,{chart:G(e,Et)})),K(t),t}function lv(t){var e=t.chart;return tt(A({},t,{chart:G(e,Dt)})),tt(A({},t,{chart:G(e,Et)})),t}function sv(t){var e=t.chart,n=t.options,r=n.yAxis;return de(A({},t,{chart:G(e,Dt),options:{yAxis:r[0]}})),de(A({},t,{chart:G(e,Et),options:{yAxis:r[1]}})),t}function cv(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,s=G(e,Dt),l=G(e,Et);if(r===!1)e.legend(!1);else if(ve(r)&&r.custom===!0)e.legend(r);else{var c=E(i,[0,"legend"],r),u=E(i,[1,"legend"],r);e.once("beforepaint",function(){var d=o[0].length?Ki({view:s,geometryOption:i[0],yField:a[0],legend:c}):[],f=o[1].length?Ki({view:l,geometryOption:i[1],yField:a[1],legend:u}):[];e.legend(A({},r,{custom:!0,items:d.concat(f)}))}),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),e.on("legend-item:click",function(d){var f=E(d,"gEvent.delegateObject",{});if(f&&f.item){var h=f.item,v=h.value,p=h.isGeometry,y=h.viewId;if(p){var g=Da(a,function(S){return S===v});if(g>-1){var m=E(G(e,y),"geometries");L(m,function(S){S.changeVisible(!f.item.unchecked)})}}else{var F=E(e.getController("legend"),"option.items",[]);L(e.views,function(S){var b=S.getGroupScales();L(b,function(D){D.values&&D.values.indexOf(v)>-1&&S.filter(D.field,function(k){var I=ba(F,function(R){return R.value===k});return!I.unchecked})}),e.render(!0)})}}})}return t}function uv(t){var e=t.chart,n=t.options,r=n.slider,i=G(e,Dt),a=G(e,Et);return r&&(i.option("slider",r),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,c=s.originValue;Pr(l,c)||Qi(a,l)}),e.once("afterpaint",function(){if(!is(r)){var o=r.start,s=r.end;(o||s)&&Qi(a,[o,s])}})),t}function fv(t){return N(Kh,Qh,ov,Jh,ev,nv,sv,rv,iv,av,lv,tv,cv,uv)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dual-axes",n}return e.prototype.getDefaultOptions=function(){return A({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return fv},e})(q);function dv(t,e){var n=e.data,r=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,s=e.tooltip,l=e.axes,c=e.meta,u=e.geometries;n&&t.data(n);var d={};l&&L(l,function(f,h){d[h]=J(f,mt)}),d=A({},c,d),t.scale(d),r&&t.coordinate(r),l===!1?t.axis(!1):L(l,function(f,h){t.axis(h,f)}),L(u,function(f){var h=bt({chart:t,options:f}).ext,v=f.adjust;v&&h.geometry.adjust(v)}),L(i,function(f){f.enable===!1?t.removeInteraction(f.type):t.interaction(f.type,f.cfg)}),L(a,function(f){t.annotation()[f.type](x({},f))}),rn(t,o),s?(t.interaction("tooltip"),t.tooltip(s)):s===!1&&t.removeInteraction("tooltip")}function hv(t){var e=t.chart,n=t.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,s=$n(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,x(x({},s),{fields:a,eachView:function(l,c){var u=o(l,c);if(u.geometries)dv(l,u);else{var d=u,f=d.options;["seriesField","colorField","shapeField","sizeField","groupField"].forEach(function(h){n[h]&&typeof f[h]>"u"&&(f[h]=n[h])}),f.tooltip&&l.interaction("tooltip"),Ar(d.type,l,f)}}})),t}function vv(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,d=n.shapeField,f=n.sizeField,h=n.shapeLegend,v=n.sizeLegend,p={};r&&L(r,function(g,m){p[m]=J(g,mt)}),p=A({},i,p),e.scale(p),e.coordinate(o),r?L(r,function(g,m){e.axis(m,g)}):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):a===!1&&e.removeInteraction("tooltip"),e.legend(l);var y=l!==!1;return d&&(h?e.legend(d,h):e.legend(d,h===!1?!1:l)),f&&e.legend(f,v||!1),!y&&!h&&!v&&e.legend(!1),s&&e.theme(s),L(c,function(g){g.enable===!1?e.removeInteraction(g.type):e.interaction(g.type,g.cfg)}),L(u,function(g){e.annotation()[g.type](x({},g))}),t}function pv(t){return N(K,hv,vv)(t)}var gv={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return gv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return pv},e})(q);function yv(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.xField,o=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,d=n.color,f=n.tooltip,h=n.heatmapStyle,v=n.meta;e.data(r);var p="polygon";i==="density"&&(p="heatmap");var y=Pt(f,[a,o,s]),g=y.fields,m=y.formatter,F=1;return(c||c===0)&&(!u&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):F=c),bt(A({},t,{options:{type:p,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:u&&(l?function(S){var b=r.map(function(R){return R[l]}),D=v?.[l]||{},k=D.min,I=D.max;return k=st(k)?k:Math.min.apply(Math,b),I=st(I)?I:Math.max.apply(Math,b),[u,(E(S,l)-k)/(I-k),F]}:function(){return[u,1,F]}),color:d||s&&e.getTheme().sequenceColors.join("-"),style:h}}})),t}function mv(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return N(ot((e={},e[a]=r,e[o]=i,e)))(t)}function xv(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function Fv(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,s=r!==!1;return i&&e.legend(i,s?r:!1),a&&e.legend(a,o===void 0?r:o),!s&&!o&&e.legend(!1),t}function bv(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.type,o=vt(e,a==="density"?"heatmap":"polygon");if(!r)o.label(!1);else if(i){var s=r.callback,l=yt(r,["callback"]);o.label({fields:[i],callback:s,cfg:ht(l)})}return t}function Sv(t){var e,n,r=t.chart,i=t.options,a=i.coordinate,o=i.reflect,s=A({actions:[]},a??{type:"rect"});return o&&((n=(e=s.actions)===null||e===void 0?void 0:e.push)===null||n===void 0||n.call(e,["reflect",o])),r.coordinate(s),t}function Av(t){return N(K,At("heatmapStyle"),mv,Sv,yv,xv,Fv,dt,bv,at(),rt,tt,oe)(t)}var wv=A({},q.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});ae("polygon","circle",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l)/2,u=Number(t.shape[1]),d=Number(t.shape[2]),f=Math.sqrt(d),h=c*f*Math.sqrt(u),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("circle",{attrs:x(x(x({x:i,y:a,r:h},t.defaultStyle),t.style),{fill:v})});return p}});ae("polygon","square",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),c=Math.min(s,l),u=Number(t.shape[1]),d=Number(t.shape[2]),f=Math.sqrt(d),h=c*f*Math.sqrt(u),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("rect",{attrs:x(x(x({x:i-h/2,y:a-h/2,width:h,height:h},t.defaultStyle),t.style),{fill:v})});return p}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return wv},e.prototype.getSchemaAdaptor=function(){return Av},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var Dv="liquid";function ol(t){return[{percent:t,type:Dv}]}function Ev(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,s=n.wave,l=n.shape,c=n.shapeStyle,u=n.animation;e.scale({percent:{min:0,max:1}}),e.data(ol(r));var d=n.color||e.getTheme().defaultColor,f=A({},t,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:d,style:i,shape:"liquid-fill-gauge"}}}),h=pt(f).ext,v=h.geometry,p=e.getTheme().background,y={percent:r,radius:a,outline:o,wave:s,shape:l,shapeStyle:c,background:p,animation:u};return v.customInfo(y),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function ll(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var s=E(o,["percent","formatter"])||(function(c){return"".concat((c*100).toFixed(2),"%")}),l=i.content;return l&&(l=A({},l,{content:kt(l.content)?s(a):l.content})),Nn(n,{statistic:x(x({},i),{content:l}),plotType:"liquid"},{percent:a}),e&&n.render(!0),t}function Ov(t){return N(K,At("liquidStyle"),Ev,ll,ot({}),tt,rt)(t)}var Iv={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},Ji=5e3;function ta(t,e,n){return t+(e-t)*n}function Mv(t){var e=x({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}function kv(t){var e={fill:"#fff",fillOpacity:0,lineWidth:4},n=Vt({},e,t.style);return t.color&&!n.stroke&&(n.stroke=t.color),st(t.opacity)&&(n.opacity=n.strokeOpacity=t.opacity),n}function Tv(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function Pv(t,e,n,r,i,a,o){for(var s=Math.ceil(2*t/n*4)*4,l=[],c=r;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*n;var u=a-t+c-t*2;l.push(["M",u,e]);for(var d=0,f=0;f<s;++f){var h=f%4,v=Tv(f*n/4,h,n,i);l.push(["C",v[0][0]+u,-v[0][1]+e,v[1][0]+u,-v[1][1]+e,v[2][0]+u,-v[2][1]+e]),f===s-1&&(d=v[2][0])}return l.push(["L",d+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function Lv(t,e,n,r,i,a,o,s,l,c){for(var u=i.fill,d=i.opacity,f=o.getBBox(),h=f.maxX-f.minX,v=f.maxY-f.minY,p=0;p<r;p++){var y=r<=1?1:p/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:Pv(s,f.minY+v*n,l,0,h/32,t,e),fill:u,opacity:ta(.2,.9,y)*d}});try{if(c===!1)return;var m=Sr([["t",l,0]]);g.stopAnimate(),g.animate({matrix:m},{duration:ta(.5*Ji,Ji,y),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function Cv(t,e,n,r){var i=n*2/3,a=Math.max(i,r),o=i/2,s=t,l=o+e-a/2,c=Math.asin(o/((a-o)*.85)),u=Math.sin(c)*o,d=Math.cos(c)*o,f=s-d,h=l+u,v=t,p=l+o/Math.sin(c);return`
      M `.concat(f," ").concat(h,`
      A `).concat(o," ").concat(o," 0 1 1 ").concat(f+d*2," ").concat(h,`
      Q `).concat(v," ").concat(p," ").concat(t," ").concat(e+a/2,`
      Q `).concat(v," ").concat(p," ").concat(f," ").concat(h,`
      Z 
    `)}function Rv(t,e,n,r){var i=n/2,a=r/2;return`
      M `.concat(t," ").concat(e-a,` 
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(a*2,`
      a `).concat(i," ").concat(a," 0 1 0 0 ").concat(-a*2,`
      Z
    `)}function zv(t,e,n,r){var i=r/2,a=n/2;return`
      M `.concat(t," ").concat(e-i,`
      L `).concat(t+a," ").concat(e,`
      L `).concat(t," ").concat(e+i,`
      L `).concat(t-a," ").concat(e,`
      Z
    `)}function $v(t,e,n,r){var i=r/2,a=n/2;return`
      M `.concat(t," ").concat(e-i,`
      L `).concat(t+a," ").concat(e+i,`
      L `).concat(t-a," ").concat(e+i,`
      Z
    `)}function _v(t,e,n,r){var i=.618,a=r/2,o=n/2*i;return`
      M `.concat(t-o," ").concat(e-a,`
      L `).concat(t+o," ").concat(e-a,`
      L `).concat(t+o," ").concat(e+a,`
      L `).concat(t-o," ").concat(e+a,`
      Z
    `)}var ea={pin:Cv,circle:Rv,diamond:zv,triangle:$v,rect:_v};ae("interval","liquid-fill-gauge",{draw:function(t,e){var n=.5,r=.5,i=t.customInfo,a=i,o=a.percent,s=a.radius,l=a.shape,c=a.shapeStyle,u=a.background,d=a.animation,f=i.outline,h=i.wave,v=f.border,p=f.distance,y=h.count,g=h.length,m=xt(t.points,function(j,Z){return Math.min(j,Z.x)},1/0),F=this.parsePoint({x:n,y:r}),S=this.parsePoint({x:m,y:r}),b=F.x-S.x,D=Math.min(b,S.y*s),k=Mv(t),I=kv(Vt({},t,f)),R=D-v/2,P=typeof l=="function"?l:ea[l]||ea.circle,O=P(F.x,F.y,R*2,R*2);if(c&&e.addShape("path",{name:"shape",attrs:x({path:O},c)}),o>0){var C=e.addGroup({name:"waves"}),W=C.setClip({type:"path",attrs:{path:O}});Lv(F.x,F.y,1-t.points[1].y,y,k,C,W,D*2,g,d)}return e.addShape("path",{name:"distance",attrs:{path:O,fill:"transparent",lineWidth:v+p*2,stroke:u==="transparent"?"#fff":u}}),e.addShape("path",{name:"wrap",attrs:Vt(I,{path:O,fill:"transparent",lineWidth:v})}),e}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="liquid",n}return e.getDefaultOptions=function(){return Iv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.chart.emit(ct.BEFORE_CHANGE_DATA,Nt.fromData(this.chart,ct.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(ol(n)),ll({chart:this.chart,options:this.options},!0),this.chart.emit(ct.AFTER_CHANGE_DATA,Nt.fromData(this.chart,ct.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return Ov},e})(q);function Nv(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,s=n.area;e.data(r);var l=A({},t,{options:{line:{style:i,color:a},point:o&&x({color:a},o),area:s&&x({color:a},s),label:void 0}}),c=A({},l,{options:{tooltip:!1}}),u=o?.state||n.state,d=A({},l,{options:{tooltip:!1,state:u}});return Me(l),wt(d),Bn(c),t}function Vv(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return N(ot((e={},e[a]=r,e[o]=i,e)))(t)}function Wv(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,a=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),t}function Bv(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return e.axis(r,i),e.axis(a,o),t}function qv(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=vt(e,"line");if(!r)a.label(!1);else{var o=r.fields,s=r.callback,l=yt(r,["fields","callback"]);a.label({fields:o||[i],callback:s,cfg:ht(l)})}return t}function Gv(t){return N(Nv,Vv,K,Wv,Bv,Ie,dt,qv,rt,tt,at())(t)}var Uv=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(n){var r=this.getTooltipCfg(),i=r.shared,a=r.title,o=t.prototype.getTooltipItems.call(this,n);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,c=o[0].name,u=[];return l.forEach(function(d){d.forEach(function(f){var h=Ft.getTooltipItems(f,s),v=h[0];if(!i&&v&&v.name===c){var p=kt(a)?c:a;u.push(x(x({},v),{name:v.title,title:p}))}else if(i&&v){var p=kt(a)?v.name||c:a;u.push(x(x({},v),{name:v.title,title:p}))}})}),u}return[]},e})(as);os("radar-tooltip",Uv);var Hv=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=this.context.view;n.removeInteraction("tooltip")},e.prototype.show=function(){var n=this.context.event,r=this.getTooltipController();r.showTooltip({x:n.x,y:n.y})},e.prototype.hide=function(){var n=this.getTooltipController();n.hideTooltip()},e.prototype.getTooltipController=function(){var n=this.context.view;return n.getController("radar-tooltip")},e})(Jt);St("radar-tooltip",Hv);it("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return A({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return Gv},e})(q);function Xv(t,e,n){var r=n.map(function(o){return o[e]}).filter(function(o){return o!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(t)%360;return a?i*360/a:i}function Yv(t,e,n){var r=[];return t.forEach(function(i){var a=r.find(function(o){return o[e]===i[e]});a?a[n]+=i[n]||null:r.push(x({},i))}),r}function jv(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,s=n.type,l=n.xField,c=n.yField,u=n.data,d=n.shape,f=Ae(u,c);e.data(f);var h=A({},t,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:d||(s==="line"?"line":"intervel")},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}});return pt(h),s==="line"&&wt({chart:e,options:{xField:l,yField:c,seriesField:o,point:{shape:"circle",color:i}}}),t}function sl(t){var e,n=t.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=o&&!s&&l?Yv(a,i,r):a,d=Ae(u,r);return N(ot((e={},e[r]={min:0,max:Xv(c,r,d)},e)))(t)}function Zv(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),t}function Kv(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function Qv(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=vt(e,"interval");if(!r)a.label(!1);else{var o=r.callback,s=yt(r,["callback"]);a.label({fields:[i],callback:o,cfg:x(x({},ht(s)),{type:"polar"})})}return t}function Jv(t){return N(At("barStyle"),jv,sl,Kv,Zv,rt,tt,K,dt,Ie,at(),Qv)(t)}var tp=A({},q.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial-bar",n}return e.getDefaultOptions=function(){return tp},e.prototype.changeData=function(n){this.updateOption({data:n}),sl({chart:this.chart,options:this.options}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Jv},e})(q);function ep(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,a=n.shape,o=n.color;return e.data(r),N(pt)(A({},t,{options:{marginRatio:1,interval:{style:i,color:o,shape:a}}})),t}function np(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,a=vt(e,"interval");if(r===!1)a.label(!1);else if(ve(r)){var o=r.callback,s=r.fields,l=yt(r,["callback","fields"]),c=l.offset,u=l.layout;(c===void 0||c>=0)&&(u=u?et(u)?u:[u]:[],l.layout=Oe(u,function(d){return d.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:ht(l)})}else Qt(zt.WARN,r===null,"the label option must be an Object."),a.label({fields:[i]});return t}function rp(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r===!1?e.legend(!1):i&&e.legend(i,r),t}function ip(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function ap(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return N(ot((e={},e[a]=r,e[o]=i,e)))(t)}function op(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?e.axis(a,r):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),t}function lp(t){N(At("sectorStyle"),ep,ap,np,ip,op,rp,dt,rt,tt,K,at(),oe)(t)}var sp=A({},q.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return sp},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return lp},e})(q);var na="x",ra="y",ia="name",Yn="nodes",jn="edges";function cp(t,e,n){var r=[];return t.forEach(function(i){var a=i[e],o=i[n];r.includes(a)||r.push(a),r.includes(o)||r.push(o)}),r}function up(t,e,n,r){var i={};return e.forEach(function(a){i[a]={},e.forEach(function(o){i[a][o]=0})}),t.forEach(function(a){i[a[n]][a[r]]=1}),i}function fp(t,e,n){if(!et(t))return[];var r=[],i=cp(t,e,n),a=up(t,i,e,n),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(c){if(a[l][c]!=0)if(o[c]==1)r.push("".concat(l,"_").concat(c));else{if(o[c]==-1)return;s(c)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),r.length!==0&&console.warn("sankey data contains circle, ".concat(r.length," records removed."),r),t.filter(function(l){return r.findIndex(function(c){return c==="".concat(l[e],"_").concat(l[n])})<0})}function dp(t){return t.target.depth}function hp(t){return t.depth}function vp(t,e){return e-1-t.height}function Qr(t,e){return t.sourceLinks.length?t.depth:e-1}function pp(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Fs(t.sourceLinks,dp)-1:0}function mn(t){return function(){return t}}function dr(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function hr(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function gp(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}function aa(t,e){return Pn(t.source,e.source)||t.index-e.index}function oa(t,e){return Pn(t.target,e.target)||t.index-e.index}function Pn(t,e){return t.y0-e.y0}function vr(t){return t.value}function yp(t){return t.index}function mp(t){return t.nodes}function xp(t){return t.links}function la(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function sa(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){for(var i=r[n],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var c=l[s];c.y0=a+c.width/2,a+=c.width}for(var u=0,d=i.targetLinks;u<d.length;u++){var c=d[u];c.y1=o+c.width/2,o+=c.width}}}function Fp(){var t=0,e=0,n=1,r=1,i=24,a=8,o,s=yp,l=Qr,c,u,d,f=mp,h=xp,v=6;function p(w){var M={nodes:f(w),links:h(w)};return y(M),g(M),m(M),F(M),D(M),sa(M),M}p.update=function(w){return sa(w),w},p.nodeId=function(w){return arguments.length?(s=typeof w=="function"?w:mn(w),p):s},p.nodeAlign=function(w){return arguments.length?(l=typeof w=="function"?w:mn(w),p):l},p.nodeDepth=function(w){return arguments.length?(c=w,p):c},p.nodeSort=function(w){return arguments.length?(u=w,p):u},p.nodeWidth=function(w){return arguments.length?(i=+w,p):i},p.nodePadding=function(w){return arguments.length?(a=o=+w,p):a},p.nodes=function(w){return arguments.length?(f=typeof w=="function"?w:mn(w),p):f},p.links=function(w){return arguments.length?(h=typeof w=="function"?w:mn(w),p):h},p.linkSort=function(w){return arguments.length?(d=w,p):d},p.size=function(w){return arguments.length?(t=e=0,n=+w[0],r=+w[1],p):[n-t,r-e]},p.extent=function(w){return arguments.length?(t=+w[0][0],n=+w[1][0],e=+w[0][1],r=+w[1][1],p):[[t,e],[n,r]]},p.iterations=function(w){return arguments.length?(v=+w,p):v};function y(w){var M=w.nodes,_=w.links;M.forEach(function(U,nt){U.index=nt,U.sourceLinks=[],U.targetLinks=[]});var z=new Map(M.map(function(U){return[s(U),U]}));if(_.forEach(function(U,nt){U.index=nt;var ut=U.source,ft=U.target;typeof ut!="object"&&(ut=U.source=la(z,ut)),typeof ft!="object"&&(ft=U.target=la(z,ft)),ut.sourceLinks.push(U),ft.targetLinks.push(U)}),d!=null)for(var T=0,$=M;T<$.length;T++){var H=$[T],X=H.sourceLinks,V=H.targetLinks;X.sort(d),V.sort(d)}}function g(w){for(var M=w.nodes,_=0,z=M;_<z.length;_++){var T=z[_];T.value=T.fixedValue===void 0?Math.max(dr(T.sourceLinks,vr),dr(T.targetLinks,vr)):T.fixedValue}}function m(w){for(var M=w.nodes,_=M.length,z=new Set(M),T=new Set,$=0;z.size;){if(z.forEach(function(U){U.depth=$;for(var nt=0,ut=U.sourceLinks;nt<ut.length;nt++){var ft=ut[nt].target;T.add(ft)}}),++$>_)throw new Error("circular link");z=T,T=new Set}if(c)for(var H=Math.max(hr(M,function(U){return U.depth})+1,0),X=void 0,V=0;V<M.length;V++)X=M[V],X.depth=c.call(null,X,H)}function F(w){for(var M=w.nodes,_=M.length,z=new Set(M),T=new Set,$=0;z.size;){if(z.forEach(function(H){H.height=$;for(var X=0,V=H.targetLinks;X<V.length;X++){var U=V[X].source;T.add(U)}}),++$>_)throw new Error("circular link");z=T,T=new Set}}function S(w){for(var M=w.nodes,_=Math.max(hr(M,function(ft){return ft.depth})+1,0),z=(n-t-i)/(_-1),T=new Array(_).fill(0).map(function(){return[]}),$=0,H=M;$<H.length;$++){var X=H[$],V=Math.max(0,Math.min(_-1,Math.floor(l.call(null,X,_))));X.layer=V,X.x0=t+V*z,X.x1=X.x0+i,T[V]?T[V].push(X):T[V]=[X]}if(u)for(var U=0,nt=T;U<nt.length;U++){var ut=nt[U];ut.sort(u)}return T}function b(w){for(var M=gp(w,function(te){return(r-e-(te.length-1)*o)/dr(te,vr)}),_=0,z=w;_<z.length;_++){for(var T=z[_],$=e,H=0,X=T;H<X.length;H++){var V=X[H];V.y0=$,V.y1=$+V.value*M,$=V.y1+o;for(var U=0,nt=V.sourceLinks;U<nt.length;U++){var ut=nt[U];ut.width=ut.value*M}}$=(r-$+o)/(T.length+1);for(var ft=0;ft<T.length;++ft){var V=T[ft];V.y0+=$*(ft+1),V.y1+=$*(ft+1)}W(T)}}function D(w){var M=S(w);o=Math.min(a,(r-e)/(hr(M,function($){return $.length})-1)),b(M);for(var _=0;_<v;++_){var z=Math.pow(.99,_),T=Math.max(1-z,(_+1)/v);I(M,z,T),k(M,z,T)}}function k(w,M,_){for(var z=1,T=w.length;z<T;++z){for(var $=w[z],H=0,X=$;H<X.length;H++){for(var V=X[H],U=0,nt=0,ut=0,ft=V.targetLinks;ut<ft.length;ut++){var te=ft[ut],Le=te.source,Qn=te.value,Ce=Qn*(V.layer-Le.layer);U+=j(Le,V)*Ce,nt+=Ce}if(nt>0){var Re=(U/nt-V.y0)*M;V.y0+=Re,V.y1+=Re,C(V)}}u===void 0&&$.sort(Pn),$.length&&R($,_)}}function I(w,M,_){for(var z=w.length,T=z-2;T>=0;--T){for(var $=w[T],H=0,X=$;H<X.length;H++){for(var V=X[H],U=0,nt=0,ut=0,ft=V.sourceLinks;ut<ft.length;ut++){var te=ft[ut],Le=te.target,Qn=te.value,Ce=Qn*(Le.layer-V.layer);U+=Z(V,Le)*Ce,nt+=Ce}if(nt>0){var Re=(U/nt-V.y0)*M;V.y0+=Re,V.y1+=Re,C(V)}}u===void 0&&$.sort(Pn),$.length&&R($,_)}}function R(w,M){var _=w.length>>1,z=w[_];O(w,z.y0-o,_-1,M),P(w,z.y1+o,_+1,M),O(w,r,w.length-1,M),P(w,e,0,M)}function P(w,M,_,z){for(;_<w.length;++_){var T=w[_],$=(M-T.y0)*z;$>1e-6&&(T.y0+=$,T.y1+=$),M=T.y1+o}}function O(w,M,_,z){for(;_>=0;--_){var T=w[_],$=(T.y1-M)*z;$>1e-6&&(T.y0-=$,T.y1-=$),M=T.y0-o}}function C(w){var M=w.sourceLinks,_=w.targetLinks;if(d===void 0){for(var z=0,T=_;z<T.length;z++){var $=T[z].source.sourceLinks;$.sort(oa)}for(var H=0,X=M;H<X.length;H++){var V=X[H].target.targetLinks;V.sort(aa)}}}function W(w){if(d===void 0)for(var M=0,_=w;M<_.length;M++){var z=_[M],T=z.sourceLinks,$=z.targetLinks;T.sort(oa),$.sort(aa)}}function j(w,M){for(var _=w.y0-(w.sourceLinks.length-1)*o/2,z=0,T=w.sourceLinks;z<T.length;z++){var $=T[z],H=$.target,X=$.width;if(H===M)break;_+=X+o}for(var V=0,U=M.targetLinks;V<U.length;V++){var nt=U[V],H=nt.source,X=nt.width;if(H===w)break;_-=X}return _}function Z(w,M){for(var _=M.y0-(M.targetLinks.length-1)*o/2,z=0,T=M.targetLinks;z<T.length;z++){var $=T[z],H=$.source,X=$.width;if(H===w)break;_+=X+o}for(var V=0,U=w.sourceLinks;V<U.length;V++){var nt=U[V],H=nt.target,X=nt.width;if(H===M)break;_-=X}return _}return p}var bp={left:hp,right:vp,center:pp,justify:Qr},Sp={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function Ap(t){var e=gt(t)?bp[t]:lt(t)?t:null;return e||Qr}function wp(t){return Vt({},Sp,t)}function Dp(t,e){var n=wp(t),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=Fp().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(Ap(a)).extent([[0,0],[1,1]]).nodeId(r),u=c(e),d=u.nodes.map(function(h){var v=h.x0,p=h.x1,y=h.y0,g=h.y1;return h.x=[v,p,p,v],h.y=[y,y,g,g],h}).filter(function(h){return h.name!==null}),f=u.links.map(function(h){var v=h.source,p=h.target,y=v.x1,g=p.x0;h.x=[y,y,g,g];var m=h.width/2;return h.y=[h.y0+m,h.y0-m,h.y1+m,h.y1-m],h}).filter(function(h){var v=h.source,p=h.target;return v.name!==null&&p.name!==null});return{nodes:d,links:f}}function Ep(t){return t==="node-link"}function Op(t,e,n){return fe(t)?t/n:e}function Ip(t,e,n){return fe(t)?t/n:e}function cl(t,e,n){var r=t.dataType,i=t.data,a=t.sourceField,o=t.targetField,s=t.weightField,l=t.nodeAlign,c=t.nodeSort,u=t.nodePadding,d=t.nodePaddingRatio,f=t.nodeWidth,h=t.nodeWidthRatio,v=t.nodeDepth,p=t.rawFields,y=p===void 0?[]:p,g;Ep(r)?g=i:g=Oa(fp(i,a,o),a,o,s,y);var m=Dp({nodeAlign:l,nodePadding:Ip(u,d,n),nodeWidth:Op(f,h,e),nodeSort:c,nodeDepth:v},g),F=m.nodes,S=m.links;return{nodes:F.map(function(b){return x(x({},J(b,Q(["x","y","name"],y,!0))),{isNode:!0})}),edges:S.map(function(b){return x(x({source:b.source.name,target:b.target.name,name:b.source.name||b.target.name},J(b,Q(["x","y","value"],y,!0))),{isNode:!1})})}}function Mp(t){var e=t.options,n=e.rawFields,r=n===void 0?[]:n;return A({},{options:{tooltip:{fields:Xe(Q(["name","source","target","value","isNode"],r,!0))},label:{fields:Xe(Q(["x","name"],r,!0))}}},t)}function kp(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState,u=n.rawFields,d=u===void 0?[]:u;e.legend(!1),e.tooltip(s),e.axis(!1),e.coordinate().reflect("y");var f=cl(n,e.width,e.height),h=f.nodes,v=f.edges,p=e.createView({id:jn});p.data(v),$a({chart:p,options:{xField:na,yField:ra,seriesField:ia,rawFields:Q(["source","target"],d,!0),edge:{color:r,style:a,shape:"arc"},tooltip:s,state:c}});var y=e.createView({id:Yn});return y.data(h),qn({chart:y,options:{xField:na,yField:ra,seriesField:ia,polygon:{color:r,style:i},label:o,tooltip:s,state:l}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function Tp(t){var e=t.chart,n=t.options,r=n.animation,i=Q(Q([],e.views[0].geometries,!0),e.views[1].geometries,!0);return rn(e,r,i),t}function Pp(t){var e=t.chart,n=t.options,r=n.nodeDraggable,i="sankey-node-draggable";return r?e.interaction(i):e.removeInteraction(i),t}function Lp(t){var e=t.chart,n=t.options,r=n.interactions,i=r===void 0?[]:r,a=[].concat(i,n.nodeInteractions||[]),o=[].concat(i,n.edgeInteractions||[]),s=G(e,Yn),l=G(e,jn);return a.forEach(function(c){c?.enable===!1?s.removeInteraction(c.type):s.interaction(c.type,c.cfg||{})}),o.forEach(function(c){c?.enable===!1?l.removeInteraction(c.type):l.interaction(c.type,c.cfg||{})}),t}function Cp(t){return N(Mp,kp,Lp,Pp,Tp,K)(t)}var Rp=(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDragging=!1,n}return e.prototype.isNodeElement=function(){var n=E(this.context,"event.target");if(n){var r=n.get("element");return r&&r.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return G(this.context.view,Yn)},e.prototype.getEdgeView=function(){return G(this.context.view,jn)},e.prototype.getCurrentDatumIdx=function(n){return this.getNodeView().geometries[0].elements.indexOf(n)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:E(this.context,"event.x"),y:E(this.context,"event.y")};var n=this.context.event.target.get("element"),r=this.getCurrentDatumIdx(n);if(r===-1)return;this.currentElementIdx=r,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var n=this.context.view,r={x:E(this.context,"event.x"),y:E(this.context,"event.y")},i=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,c=o.getOptions().data,u=o.getCoordinate(),d={x:i/u.getWidth(),y:a/u.getHeight()},f=x(x({},l),{x:l.x.map(function(g){return g+=d.x}),y:l.y.map(function(g){return g+=d.y})}),h=Q([],c,!0);h[this.currentElementIdx]=f,o.data(h);var v=l.name,p=this.getEdgeView(),y=p.getOptions().data;y.forEach(function(g){g.source===v&&(g.x[0]+=d.x,g.x[1]+=d.x,g.y[0]+=d.y,g.y[1]+=d.y),g.target===v&&(g.x[2]+=d.x,g.x[3]+=d.x,g.y[2]+=d.y,g.y[3]+=d.y)}),p.data(y),this.prevPoint=r,n.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e})(Jt);St("sankey-node-drag",Rp);it("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(n){var r=n.name;return r},callback:function(n){var r=n[1]===1;return{style:{fill:"#545454",textAlign:r?"end":"start"},offsetX:r?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(n){return!E(n,[0,"data","isNode"])},formatter:function(n){var r=n.source,i=n.target,a=n.value;return{name:r+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(n){this.updateOption({data:n});var r=cl(this.options,this.chart.width,this.chart.height),i=r.nodes,a=r.edges,o=G(this.chart,Yn),s=G(this.chart,jn);o.changeData(i),s.changeData(a)},e.prototype.getSchemaAdaptor=function(){return Cp},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var Jr="ancestor-node",ul="value",nn="path",zp=[nn,el,Yr,nl,"name","depth","height"],$p=A({},q.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),_p={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function Np(t,e){e=Vt({},_p,e);var n=e.as;if(!et(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=jr(e)}catch(l){console.warn(l)}var i=function(l){return Zo().size(e.size).round(e.round).padding(e.padding)(Pe(l).sum(function(c){return Ye(c.children)?e.ignoreParentValue?0:c[r]-xt(c.children,function(u,d){return u+d[r]},0):c[r]}).sort(e.sort))},a=i(t),o=n[0],s=n[1];return a.each(function(l){var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(d){n.indexOf(d)===-1&&delete l[d]})}),Zr(a)}var Vp={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function Wp(t,e){return t==="treemapSquarify"?Ui[t].ratio(e):Ui[t]}function fl(t,e){e=Vt({},Vp,e);var n=e.as;if(!et(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=jr(e)}catch(c){console.warn(c)}var i=Wp(e.tile,e.ratio),a=function(c){return tl().tile(i).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Pe(c).sum(function(u){return e.ignoreParentValue&&u.children?0:u[r]}).sort(e.sort))},o=a(t),s=n[0],l=n[1];return o.each(function(c){c[s]=[c.x0,c.x1,c.x1,c.x0],c[l]=[c.y1,c.y1,c.y0,c.y0],["x0","x1","y0","y1"].forEach(function(u){n.indexOf(u)===-1&&delete c[u]})}),Zr(o)}function dl(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,s={partition:Np,treemap:fl},l=t.seriesField,c=t.type||"partition",u=s[c](e,x(x({field:l||"value"},$n(a,["activeDepth"])),{type:"hierarchy.".concat(c),as:["x","y"]})),d=[];return u.forEach(function(f){var h,v,p,y,g,m;if(f.depth===0||o>0&&f.depth>o)return null;for(var F=f.data.name,S=x({},f);S.depth>1;)F="".concat((v=S.parent.data)===null||v===void 0?void 0:v.name," / ").concat(F),S=S.parent;var b=x(x(x({},J(f.data,Q(Q([],r||[],!0),[a.field],!1))),(h={},h[nn]=F,h[Jr]=S.data.name,h)),f);l&&(b[l]=f.data[l]||((y=(p=f.parent)===null||p===void 0?void 0:p.data)===null||y===void 0?void 0:y[l])),n&&(b[n]=f.data[n]||((m=(g=f.parent)===null||g===void 0?void 0:g.data)===null||m===void 0?void 0:m[n])),b.ext=a,b[en]={hierarchyConfig:a,colorField:n,rawFields:r},d.push(b)}),d}function Bp(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=i===void 0?Jr:i,o=n.sunburstStyle,s=n.rawFields,l=s===void 0?[]:s,c=n.shape,u=dl(n);e.data(u);var d;return o&&(d=function(f){return A({},{fillOpacity:Math.pow(.85,f.depth)},lt(o)?o(f):o)}),qn(A({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:Xe(Q(Q([],zp,!0),l,!0)),polygon:{color:r,style:d,shape:c}}})),t}function qp(t){var e=t.chart;return e.axis(!1),t}function Gp(t){var e=t.chart,n=t.options,r=n.label,i=vt(e,"polygon");if(!r)i.label(!1);else{var a=r.fields,o=a===void 0?["name"]:a,s=r.callback,l=yt(r,["fields","callback"]);i.label({fields:o,callback:s,cfg:ht(l)})}return t}function Up(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),t}function Hp(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return N(ot({},(e={},e[ul]=E(i,E(r,["field"],"value")),e)))(t)}function Xp(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;E(r,"fields")||(i=A({},{customItems:function(a){return a.map(function(o){var s=E(e.getOptions(),"scales"),l=E(s,[nn,"formatter"],function(u){return u}),c=E(s,[ul,"formatter"],function(u){return u});return x(x({},o),{name:l(o.data[nn]),value:c(o.data.value)})})}},i)),e.tooltip(i)}return t}function Yp(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e?.enabled?A({},t,{interactions:Q(Q([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:dl}}],!1)}):t}function jp(t){var e=t.chart,n=t.options,r=n.drilldown;return rt({chart:e,options:Yp(n)}),r?.enabled&&(e.appendPadding=_n(e.appendPadding,E(r,["breadCrumb","position"]))),t}function Zp(t){return N(K,At("sunburstStyle"),Bp,qp,Hp,Ie,Up,Xp,Gp,jp,tt,at())(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sunburst",n}return e.getDefaultOptions=function(){return $p},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zp},e.SUNBURST_ANCESTOR_FIELD=Jr,e.SUNBURST_PATH_FIELD=nn,e.NODE_ANCESTORS_FIELD=Yr,e})(q);function hl(t,e){if(et(t))return t.find(function(n){return n.type===e})}function vl(t,e){var n=hl(t,e);return n&&n.enable!==!1}function ti(t){var e=t.interactions,n=t.drilldown;return E(n,"enabled")||vl(e,"treemap-drill-down")}function Kp(t){var e=t.interactions["drill-down"];if(e){var n=e.context.actions.find(function(r){return r.name==="drill-down-action"});n.reset()}}function ei(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,a=fl(e,x(x({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||r&&s.depth!==1||!r&&s.children)return null;var l=s.ancestors().map(function(f){return{data:f.data,height:f.height,value:f.value}}),c=r&&et(e.path)?l.concat(e.path.slice(1)):l,u=Object.assign({},s.data,x({x:s.x,y:s.y,depth:s.depth,value:s.value,path:c},s));if(!s.data[n]&&s.parent){var d=s.ancestors().find(function(f){return f.data[n]});u[n]=d?.data[n]}else u[n]=s.data[n];u[en]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(u)}),o}function Qp(t){var e=t.options,n=e.colorField;return A({options:{rawFields:["value"],tooltip:{fields:["name","value",n,"path"],formatter:function(r){return{name:r.name,value:r.value}}}}},t)}function Jp(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,s=n.rawFields,l=ei({data:n.data,colorField:n.colorField,enableDrillDown:ti(n),hierarchyConfig:o});return e.data(l),qn(A({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:a}}})),e.coordinate().reflect("y"),t}function tg(t){var e=t.chart;return e.axis(!1),t}function eg(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n,i=ti(t);return i?A({},t,{interactions:Q(Q([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:ei}}],!1)}):t}function ng(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;rt({chart:e,options:eg(n)});var a=hl(r,"view-zoom");a&&(a.enable!==!1?e.getCanvas().on("mousewheel",function(s){s.preventDefault()}):e.getCanvas().off("mousewheel"));var o=ti(n);return o&&(e.appendPadding=_n(e.appendPadding,E(i,["breadCrumb","position"]))),t}function rg(t){return N(Qp,K,At("rectStyle"),Jp,tg,Ie,dt,ng,tt,at())(t)}var ig={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return ig},e.prototype.changeData=function(n){var r=this.options,i=r.colorField,a=r.interactions,o=r.hierarchyConfig;this.updateOption({data:n});var s=ei({data:n,colorField:i,enableDrillDown:vl(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),Kp(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return rg},e})(q);var Kt="id",Dr="path",ag={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function Zn(t){if(t){var e=t.geometries[0].elements;e.forEach(function(n){n.shape.toFront()})}}var og=zn("element-active"),lg=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){Zn(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e})(og),sg=zn("element-highlight"),cg=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){Zn(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e})(sg),ug=zn("element-selected"),fg=zn("element-single-selected"),dg=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){Zn(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e})(ug),hg=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){Zn(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e})(fg);St("venn-element-active",lg);St("venn-element-highlight",cg);St("venn-element-selected",dg);St("venn-element-single-selected",hg);it("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});it("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});it("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});it("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});it("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});it("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var vg=(function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelPoint=function(n,r,i){var a=n.data,o=a.x,s=a.y,l=n.customLabelInfo,c=l.offsetX,u=l.offsetY;return{content:n.content[i],x:o+c,y:s+u}},e})(ls);ss("venn",vg);var He=`	
\v\f\r   ᠎             　\u2028\u2029`,pg=new RegExp("([a-z])["+He+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+He+"]*,?["+He+"]*)+)","ig"),gg=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+He+"]*,?["+He+"]*","ig");function yg(t){if(!t)return null;if(fs(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(pg,function(r,i,a){var o=[],s=i.toLowerCase();if(a.replace(gg,function(l,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&n.push([i,o[0]]),s==="r")n.push([i].concat(o));else for(;o.length>=e[s]&&(n.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),n}function mg(t){return A({},t.defaultStyle,{fill:t.color},t.style)}ae("schema","venn",{draw:function(t,e){var n=t.data,r=yg(n[Dr]),i=mg(t),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:x(x({},i),{path:r}),name:"venn-path"});var o=t.customInfo,s=o.offsetX,l=o.offsetY,c=Ft.transform(null,[["t",s,l]]);return a.setMatrix(c),a},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var xg=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},ca={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},burn:function(t,e){return e===255?255:t===0?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}},Fg=function(t){if(!ca[t])throw new Error("unknown blend mode "+t);return ca[t]};function bg(t,e,n){n===void 0&&(n="normal");var r=xg(Fg(n))(xn(t),xn(e)),i=xn(t),a=i[0],o=i[1],s=i[2],l=i[3],c=xn(e),u=c[0],d=c[1],f=c[2],h=c[3],v=Number((l+h*(1-l)).toFixed(2)),p=Math.round((l*(1-h)*(a/255)+l*h*(r[0]/255)+(1-l)*h*(u/255))/v*255),y=Math.round((l*(1-h)*(o/255)+l*h*(r[1]/255)+(1-l)*h*(d/255))/v*255),g=Math.round((l*(1-h)*(s/255)+l*h*(r[2]/255)+(1-l)*h*(f/255))/v*255);return"rgba(".concat(p,", ").concat(y,", ").concat(g,", ").concat(v,")")}function xn(t){var e=t.replace("/s+/g",""),n;return typeof e=="string"&&!e.startsWith("rgba")&&!e.startsWith("#")?n=er.rgb2arr(er.toRGB(e)).concat([1]):(e.startsWith("rgba")&&(n=e.replace("rgba(","").replace(")","").split(",")),e.startsWith("#")&&(n=er.rgb2arr(e).concat([1])),n.map(function(r,i){return i===3?Number(r):r|0}))}function Sg(t,e,n,r){r=r||{};var i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(e),s=t(n),l=n-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(s===0)return n;for(var c=0;c<i;++c){l/=2;var u=e+l,d=t(u);if(d*o>=0&&(e=u),Math.abs(l)<a||d===0)return u}return e+l}function Er(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function ua(t,e){return Er(t).map(function(){return Er(e)})}function Se(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function Or(t){return Math.sqrt(Se(t,t))}function Ir(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function Xt(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function pl(t,e,n){n=n||{};var r=n.maxIterations||e.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,l=n.rho!==void 0?n.rho:1,c=n.chi!==void 0?n.chi:2,u=n.psi!==void 0?n.psi:-.5,d=n.sigma!==void 0?n.sigma:.5,f,h=e.length,v=new Array(h+1);v[0]=e,v[0].fx=t(e),v[0].id=0;for(var p=0;p<h;++p){var y=e.slice();y[p]=y[p]?y[p]*i:a,v[p+1]=y,v[p+1].fx=t(y),v[p+1].id=p+1}function g(C){for(var W=0;W<C.length;W++)v[h][W]=C[W];v[h].fx=C.fx}for(var m=function(C,W){return C.fx-W.fx},F=e.slice(),S=e.slice(),b=e.slice(),D=e.slice(),k=0;k<r;++k){if(v.sort(m),n.history){var I=v.map(function(C){var W=C.slice();return W.fx=C.fx,W.id=C.id,W});I.sort(function(C,W){return C.id-W.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:I})}for(f=0,p=0;p<h;++p)f=Math.max(f,Math.abs(v[0][p]-v[1][p]));if(Math.abs(v[0].fx-v[h].fx)<o&&f<s)break;for(p=0;p<h;++p){F[p]=0;for(var R=0;R<h;++R)F[p]+=v[R][p];F[p]/=h}var P=v[h];if(Xt(S,1+l,F,-l,P),S.fx=t(S),S.fx<v[0].fx)Xt(D,1+c,F,-c,P),D.fx=t(D),D.fx<S.fx?g(D):g(S);else if(S.fx>=v[h-1].fx){var O=!1;if(S.fx>P.fx?(Xt(b,1+u,F,-u,P),b.fx=t(b),b.fx<P.fx?g(b):O=!0):(Xt(b,1-u*l,F,u*l,P),b.fx=t(b),b.fx<S.fx?g(b):O=!0),O){if(d>=1)break;for(p=1;p<v.length;++p)Xt(v[p],1-d,v[0],d,v[p]),v[p].fx=t(v[p])}}else g(S)}return v.sort(m),{fx:v[0].fx,x:v[0]}}function Ag(t,e,n,r,i,a,o){var s=n.fx,l=Se(n.fxprime,e),c=s,u=s,d=l,f=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,y,g){for(var m=0;m<16;++m)if(i=(p+y)/2,Xt(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),d=Se(r.fxprime,e),c>s+a*i*l||c>=g)y=i;else{if(Math.abs(d)<=-o*l)return i;d*(y-p)>=0&&(y=p),p=i,g=c}return 0}for(var v=0;v<10;++v){if(Xt(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),d=Se(r.fxprime,e),c>s+a*i*l||v&&c>=u)return h(f,i,u);if(Math.abs(d)<=-o*l)return i;if(d>=0)return h(i,f,c);u=c,f=i,i*=2}return i}function wg(t,e,n){var r={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()},a=e.slice(),o,s,l=1,c;n=n||{},c=n.maxIterations||e.length*20,r.fx=t(r.x,r.fxprime),o=r.fxprime.slice(),Ir(o,r.fxprime,-1);for(var u=0;u<c;++u){if(l=Ag(t,o,r,i,l),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),!l)Ir(o,r.fxprime,-1);else{Xt(a,1,i.fxprime,-1,r.fxprime);var d=Se(r.fxprime,r.fxprime),f=Math.max(0,Se(a,i.fxprime)/d);Xt(o,f,o,-1,i.fxprime),s=r,r=i,i=s}if(Or(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),r}var gl=1e-10;function ni(t,e){var n=Eg(t),r=n.filter(function(k){return Dg(k,t)}),i=0,a=0,o,s=[];if(r.length>1){var l=xl(r);for(o=0;o<r.length;++o){var c=r[o];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}r.sort(function(k,I){return I.angle-k.angle});var u=r[r.length-1];for(o=0;o<r.length;++o){var d=r[o];a+=(u.x+d.x)*(d.y-u.y);for(var f={x:(d.x+u.x)/2,y:(d.y+u.y)/2},h=null,v=0;v<d.parentIndex.length;++v)if(u.parentIndex.indexOf(d.parentIndex[v])>-1){var p=t[d.parentIndex[v]],y=Math.atan2(d.x-p.x,d.y-p.y),g=Math.atan2(u.x-p.x,u.y-p.y),m=g-y;m<0&&(m+=2*Math.PI);var F=g-m/2,S=Rt(f,{x:p.x+p.radius*Math.sin(F),y:p.y+p.radius*Math.cos(F)});S>p.radius*2&&(S=p.radius*2),(h===null||h.width>S)&&(h={circle:p,width:S,p1:d,p2:u})}h!==null&&(s.push(h),i+=Mr(h.circle.radius,h.width),u=d)}}else{var b=t[0];for(o=1;o<t.length;++o)t[o].radius<b.radius&&(b=t[o]);var D=!1;for(o=0;o<t.length;++o)if(Rt(t[o],b)>Math.abs(b.radius-t[o].radius)){D=!0;break}D?i=a=0:(i=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-gl,y:b.y+b.radius},width:b.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=s,e.innerPoints=r,e.intersectionPoints=n),i+a}function Dg(t,e){for(var n=0;n<e.length;++n)if(Rt(t,e[n])>e[n].radius+gl)return!1;return!0}function Eg(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=ml(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}function Mr(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Rt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function yl(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return Mr(t,r)+Mr(e,i)}function ml(t,e){var n=Rt(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=t.x+a*(e.x-t.x)/n,l=t.y+a*(e.y-t.y)/n,c=-(e.y-t.y)*(o/n),u=-(e.x-t.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function xl(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function pr(t,e,n){var r=e[0].radius-Rt(e[0],t),i,a;for(i=1;i<e.length;++i)a=e[i].radius-Rt(e[i],t),a<=r&&(r=a);for(i=0;i<n.length;++i)a=Rt(n[i],t)-n[i].radius,a<=r&&(r=a);return r}function Fl(t,e){var n=[],r;for(r=0;r<t.length;++r){var i=t[r];n.push({x:i.x,y:i.y}),n.push({x:i.x+i.radius/2,y:i.y}),n.push({x:i.x-i.radius/2,y:i.y}),n.push({x:i.x,y:i.y+i.radius/2}),n.push({x:i.x,y:i.y-i.radius/2})}var a=n[0],o=pr(n[0],t,e);for(r=1;r<n.length;++r){var s=pr(n[r],t,e);s>=o&&(a=n[r],o=s)}var l=pl(function(f){return-1*pr({x:f[0],y:f[1]},t,e)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(r=0;r<t.length;++r)if(Rt(c,t[r])>t[r].radius){u=!1;break}for(r=0;r<e.length;++r)if(Rt(c,e[r])<e[r].radius){u=!1;break}if(!u)if(t.length==1)c={x:t[0].x,y:t[0].y};else{var d={};ni(t,d),d.arcs.length===0?c={x:0,y:-1e3,disjoint:!0}:d.arcs.length==1?c={x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:e.length?c=Fl(t,[]):c=xl(d.arcs.map(function(f){return f.p1}))}return c}function Og(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var a=t[n[i]],o=i+1;o<n.length;++o){var s=t[n[o]],l=Rt(a,s);l+s.radius<=a.radius+1e-10?e[n[o]].push(n[i]):l+a.radius<=s.radius+1e-10&&e[n[i]].push(n[o])}return e}function Ig(t,e){for(var n={},r=Og(t),i=0;i<e.length;++i){for(var a=e[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var c=r[a[l]],u=0;u<c.length;++u)s[c[u]]=!0}var d=[],f=[];for(var h in t)h in o?d.push(t[h]):h in s||f.push(t[h]);var v=Fl(d,f);n[a]=v,v.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}function Mg(t,e,n){var r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function kg(t){var e={};ni(t,e);var n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){var r=n[0].circle;return Mg(r.x,r.y,r.radius)}else{for(var i=[`
M`,n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],s=o.circle.radius,l=o.width>s;i.push(`
A`,s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}function Tg(t,e){e=e||{},e.maxIterations=e.maxIterations||500;var n=e.initialLayout||Rg,r=e.lossFunction||ri;t=Pg(t);var i=n(t,e),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var l=pl(function(d){for(var f={},h=0;h<o.length;++h){var v=o[h];f[v]={x:d[2*h],y:d[2*h+1],radius:i[v].radius}}return r(f,t)},a,e),c=l.x,u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}var bl=1e-10;function kr(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+bl?Math.abs(t-e):Sg(function(r){return yl(t,e,r)-n},0,t+e)}function Pg(t){t=t.slice();var e=[],n={},r,i,a,o;for(r=0;r<t.length;++r){var s=t[r];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(e.sort(function(l,c){return l>c?1:-1}),r=0;r<e.length;++r)for(a=e[r],i=r+1;i<e.length;++i)o=e[i],[a,o]in n||t.push({sets:[a,o],size:0});return t}function Lg(t,e,n){var r=ua(e.length,e.length),i=ua(e.length,e.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){var o=n[a.sets[0]],s=n[a.sets[1]],l=Math.sqrt(e[o].size/Math.PI),c=Math.sqrt(e[s].size/Math.PI),u=kr(l,c,a.size);r[o][s]=r[s][o]=u;var d=0;a.size+1e-10>=Math.min(e[o].size,e[s].size)?d=1:a.size<=1e-10&&(d=-1),i[o][s]=i[s][o]=d}),{distances:r,constraints:i}}function Cg(t,e,n,r){var i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a)for(var o=t[2*a],s=t[2*a+1],l=a+1;l<n.length;++l){var c=t[2*l],u=t[2*l+1],d=n[a][l],f=r[a][l],h=(c-o)*(c-o)+(u-s)*(u-s),v=Math.sqrt(h),p=h-d*d;f>0&&v<=d||f<0&&v>=d||(i+=2*p*p,e[2*a]+=4*p*(o-c),e[2*a+1]+=4*p*(s-u),e[2*l]+=4*p*(c-o),e[2*l+1]+=4*p*(u-s))}return i}function Rg(t,e){var n=$g(t,e),r=e.lossFunction||ri;if(t.length>=8){var i=zg(t,e),a=r(i,t),o=r(n,t);a+1e-8<o&&(n=i)}return n}function zg(t,e){e=e||{};var n=e.restarts||10,r=[],i={},a;for(a=0;a<t.length;++a){var o=t[a];o.sets.length==1&&(i[o.sets[0]]=r.length,r.push(o))}var s=Lg(t,r,i),l=s.distances,c=s.constraints,u=Or(l.map(Or))/l.length;l=l.map(function(m){return m.map(function(F){return F/u})});var d=function(m,F){return Cg(m,F,l,c)},f,h;for(a=0;a<n;++a){var v=Er(l.length*2).map(Math.random);h=wg(d,v,e),(!f||h.fx<f.fx)&&(f=h)}var p=f.x,y={};for(a=0;a<r.length;++a){var g=r[a];y[g.sets[0]]={x:p[2*a]*u,y:p[2*a+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)Ir(e.history[a].x,u);return y}function $g(t,e){for(var n=e&&e.lossFunction?e.lossFunction:ri,r={},i={},a,o=0;o<t.length;++o){var s=t[o];s.sets.length==1&&(a=s.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}t=t.filter(function(w){return w.sets.length==2});for(var o=0;o<t.length;++o){var l=t[o],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],d=l.sets[1];l.size+bl>=Math.min(r[u].size,r[d].size)&&(c=0),i[u].push({set:d,size:l.size,weight:c}),i[d].push({set:u,size:l.size,weight:c})}var f=[];for(a in i)if(i.hasOwnProperty(a)){for(var h=0,o=0;o<i[a].length;++o)h+=i[a][o].size*i[a][o].weight;f.push({set:a,size:h})}function v(w,M){return M.size-w.size}f.sort(v);var p={};function y(w){return w.set in p}function g(w,M){r[M].x=w.x,r[M].y=w.y,p[M]=!0}g({x:0,y:0},f[0].set);for(var o=1;o<f.length;++o){var m=f[o].set,F=i[m].filter(y);if(a=r[m],F.sort(v),F.length===0)throw"ERROR: missing pairwise overlap information";for(var S=[],b=0;b<F.length;++b){var D=r[F[b].set],k=kr(a.radius,D.radius,F[b].size);S.push({x:D.x+k,y:D.y}),S.push({x:D.x-k,y:D.y}),S.push({y:D.y+k,x:D.x}),S.push({y:D.y-k,x:D.x});for(var I=b+1;I<F.length;++I)for(var R=r[F[I].set],P=kr(a.radius,R.radius,F[I].size),O=ml({x:D.x,y:D.y,radius:k},{x:R.x,y:R.y,radius:P}),C=0;C<O.length;++C)S.push(O[C])}for(var W=1e50,j=S[0],b=0;b<S.length;++b){r[m].x=S[b].x,r[m].y=S[b].y;var Z=n(r,t);Z<W&&(W=Z,j=S[b])}g(j,m)}return r}function ri(t,e){var n=0;function r(u){return u.map(function(d){return t[d]})}for(var i=0;i<e.length;++i){var a=e[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=t[a.sets[0]],l=t[a.sets[1]];o=yl(s.radius,l.radius,Rt(s,l))}else o=ni(r(a.sets));var c=a.hasOwnProperty("weight")?a.weight:1;n+=c*(o-a.size)*(o-a.size)}}return n}function _g(t){var e=function(n){var r=Math.max.apply(null,t.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function Ng(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var s=_g(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var u=e/(l.max-l.min),d=n/(c.max-c.min),f=Math.min(d,u),h=(e-(l.max-l.min)*f)/2,v=(n-(c.max-c.min)*f)/2,p={},y=0;y<i.length;++y){var g=i[y];p[a[y]]={radius:f*g.radius,x:r+h+(g.x-l.min)*f,y:r+v+(g.y-c.min)*f}}return p}var Vg=ma((function(t,e,n,r){var i=new Map,a=t.length;return e.forEach(function(o,s){if(o[r].length===1)i.set(o[Kt],t[(s+a)%a]);else{var l=o[r].map(function(c){return i.get(c)});i.set(o[Kt],l.slice(1).reduce(function(c,u){return bg(c,u,n)},l[0]))}}),i}),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)});function Wg(t,e,n,r){var i=t.data,a=t.setsField,o=t.sizeField;if(i.length===0)return Qt(zt.WARN,!1,"warn: %s","数据不能为空"),[];var s=i.map(function(d){var f;return x(x({},d),(f={sets:d[a]||[],size:d[o]},f[Dr]="",f[Kt]="",f))});s.sort(function(d,f){return d.sets.length-f.sets.length});var l=Tg(s),c=Ng(l,e,n,r),u=Ig(c,s);return s.forEach(function(d){var f=d.sets,h=f.join(",");d[Kt]=h;var v=f.map(function(g){return c[g]}),p=kg(v);/[zZ]$/.test(p)||(p+=" Z"),d[Dr]=p;var y=u[h]||{x:0,y:0};Vt(d,y)}),s}function Bg(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}var qg=40;function Sl(t,e,n){var r=t.chart,i=t.options,a=i.blendMode,o=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;et(u)||(u=e.filter(function(f){return f[o].length===1}).length<=10?l:c);var d=Vg(u,e,a,o);return function(f){return d.get(f)||u[0]}}function Gg(t,e){var n=t.options,r=n.color;if(typeof r!="function"){var i=typeof r=="string"?[r]:r,a=Sl(t,e,i);return function(o){return a(o[Kt])}}return r}function Ug(t){var e=t.chart,n=t.options,r=n.legend,i=n.appendPadding,a=n.padding,o=ee(i);return r!==!1&&(o=_n(i,E(r,"position"),qg)),e.appendPadding=Cr([o,a]),t}function Hg(t){var e=t.options,n=e.data;n||(Qt(zt.WARN,!1,"warn: %s","数据不能为空"),n=[]);var r=n.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=n.filter(function(a){var o=a.sets;return Bg(r,o)});return Pr(i,n)||Qt(zt.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Cn({},t,{options:{data:i}})}function Xg(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=ee(e.appendPadding),s=o[0],l=o[1],c=o[2],u=o[3],d={offsetX:u,offsetY:s},f=e.viewBBox,h=f.width,v=f.height,p=Wg(n,Math.max(h-(l+u),0),Math.max(v-(s+c),0),0);e.data(p);var y=Nr(A({},t,{options:{xField:"x",yField:"y",sizeField:a,seriesField:Kt,rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext,g=y.geometry;g.customInfo(d);var m=Gg(t,p);return typeof m=="function"&&g.color(Kt,function(F){var S=p.find(function(D){return D[Kt]===F}),b=Sl(t,p)(F);return m(S,b)}),t}function Yg(t){var e=t.chart,n=t.options,r=n.label,i=ee(e.appendPadding),a=i[0],o=i[3],s={offsetX:o,offsetY:a},l=vt(e,"schema");if(!r)l.label(!1);else{var c=r.callback,u=yt(r,["callback"]);l.label({fields:["id"],callback:c,cfg:Cn({},ht(u),{type:"venn",customLabelInfo:s})})}return t}function jg(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend(Kt,r),e.legend(i,!1),t}function Zg(t){var e=t.chart;return e.axis(!1),t}function Kg(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};rt(A({},t,{options:{interactions:r.map(function(a){return x(x({},a),{type:i[a.type]||a.type})})}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function Qg(t){return N(Ug,K,Hg,Xg,Yg,ot({}),jg,Zg,dt,Kg,tt)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return ag},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Qg},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(q);var It="x",ce="violinY",Jg="violinSize",Al="minMax",wl="quantile",Dl="median",ii="violin_view",ty="min_max_view",ey="quantile_view",ny="median_view",ry=A({},q.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),gr={exports:{}},yr={exports:{}},fa;function iy(){return fa||(fa=1,(function(t){var e=t.exports;t.exports.isNumber=function(n){return typeof n=="number"},t.exports.findMin=function(n){if(n.length===0)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r},t.exports.findMax=function(n){if(n.length===0)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r},t.exports.findMinMulti=function(n){for(var r=e.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,e.findMin(n[i]));return r},t.exports.findMaxMulti=function(n){for(var r=e.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,e.findMax(n[i]));return r},t.exports.inside=function(n,r,i){return n<=i&&i<=r}})(yr)),yr.exports}var da;function ay(){return da||(da=1,(function(t){var e=50,n=2,r=Math.log(2),i=t.exports,a=iy();function o(l){return 1-Math.abs(l)}t.exports.getUnifiedMinMax=function(l,c){return i.getUnifiedMinMaxMulti([l],c)},t.exports.getUnifiedMinMaxMulti=function(l,c){c=c||{};var u=!1,d=!1,f=a.isNumber(c.width)?c.width:n,h=a.isNumber(c.size)?c.size:e,v=a.isNumber(c.min)?c.min:(u=!0,a.findMinMulti(l)),p=a.isNumber(c.max)?c.max:(d=!0,a.findMaxMulti(l)),y=p-v,g=y/(h-1);return u&&(v=v-2*f*g),d&&(p=p+2*f*g),{min:v,max:p}},t.exports.create=function(l,c){if(c=c||{},!l||l.length===0)return[];var u=a.isNumber(c.size)?c.size:e,d=a.isNumber(c.width)?c.width:n,f=i.getUnifiedMinMax(l,{size:u,width:d,min:c.min,max:c.max}),h=f.min,v=f.max,p=v-h,y=p/(u-1);if(p===0)return[{x:h,y:1}];for(var g=[],m=0;m<u;m++)g.push({x:h+m*y,y:0});var F=function(O){return Math.floor((O-h)/y)},S=s(o,d),b=S[d],D=S[d-1]-S[d-2],k=0;l.forEach(function(O){var C=F(O);if(!(C+d<0||C-d>=g.length)){var W=Math.max(C-d,0),j=C,Z=Math.min(C+d,g.length-1),w=W-(C-d),M=C+d-Z,_=S[-d-1+w]||0,z=S[-d-1+M]||0,T=b/(b-_-z);w>0&&(k+=T*(w-1)*D);var $=Math.max(0,C-d+1);a.inside(0,g.length-1,$)&&(g[$].y+=T*1*D),a.inside(0,g.length-1,j+1)&&(g[j+1].y-=T*2*D),a.inside(0,g.length-1,Z+1)&&(g[Z+1].y+=T*1*D)}});var I=k,R=0,P=0;return g.forEach(function(O){R+=O.y,I+=R,O.y=I,P+=I}),P>0&&g.forEach(function(O){O.y/=P}),g};function s(l,c){for(var u={},d=0,f=-c;f<=c;f++)d+=l(f/c),u[f]=d;return u}t.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){c+=u.x*u.y}),c}},t.exports.getXWithLeftTailArea=function(l,c){if(!(!l||l.length===0)){for(var u=0,d=0,f=0;f<l.length&&(d=f,u+=l[f].y,!(u>=c));f++);return l[d].x}},t.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){var d=Math.log(u.y);isFinite(d)&&(c+=u.y*d)}),c=-c/r,Math.pow(2,c)}}})(gr)),gr.exports}var oy=ay();const ly=Pl(oy);function ha(t,e){var n=t.length*e;if(t.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?t[t.length-1]:e===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Ve(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function An(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,a=e-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var c=Math.max(n,Math.floor(e-a*s/i+l)),u=Math.min(r,Math.floor(e+(i-a)*s/i+l));An(t,e,c,u)}var d=t[e],f=n,h=r;for(Ve(t,n,e),t[r]>d&&Ve(t,n,r);f<h;){for(Ve(t,f,h),f++,h--;t[f]<d;)f++;for(;t[h]>d;)h--}t[n]===d?Ve(t,n,h):(h++,Ve(t,h,r)),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function We(t,e){var n=t.slice();if(Array.isArray(e)){sy(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=ha(n,e[i]);return r}else{var a=Ol(n.length,e);return El(n,a,0,n.length-1),ha(n,e)}}function El(t,e,n,r){e%1===0?An(t,e,n,r):(e=Math.floor(e),An(t,e,n,r),An(t,e+1,e+1,r))}function sy(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(Ol(t.length,e[r]));n.push(t.length-1),n.sort(cy);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);El(t,n[s],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,s,s,a)}}}function cy(t,e){return t-e}function Ol(t,e){var n=t*e;return e===1?t-1:e===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}var va=function(t){return{low:pi(t),high:gi(t),q1:We(t,.25),q3:We(t,.75),median:We(t,[.5]),minMax:[pi(t),gi(t)],quantile:[We(t,.25),We(t,.75)]}},pa=function(t,e){var n=ly.create(t,e);return{violinSize:n.map(function(r){return r.y}),violinY:n.map(function(r){return r.x})}},Il=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,a=t.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var s=Ue(i,e);return Object.keys(s).map(function(u){var d=s[u],f=d.map(function(h){return h[n]});return x(x({x:u},pa(f,o)),va(f))})}var l=[],c=Ue(i,r);return Object.keys(c).forEach(function(u){var d=Ue(c[u],e);return Object.keys(d).forEach(function(f){var h,v=d[f],p=v.map(function(y){return y[n]});l.push(x(x((h={x:f},h[r]=u,h),pa(p,o)),va(p)))})}),l},wn=["low","high","q1","q3","median"],Dn=[{type:"dodge",marginRatio:1/32}];function uy(t){var e=t.chart,n=t.options;return e.data(Il(n)),t}function fy(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.shape,o=a===void 0?"violin":a,s=n.violinStyle,l=n.tooltip,c=n.state,u=e.createView({id:ii});return js({chart:u,options:{xField:It,yField:ce,seriesField:r||It,sizeField:Jg,tooltip:x({fields:wn},l),violin:{style:s,color:i,shape:o},state:c}}),u.geometries[0].adjust(Dn),t}function dy(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(o===!1)return t;var s=e.createView({id:ty});pt({chart:s,options:{xField:It,yField:Al,seriesField:r||It,tooltip:x({fields:wn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(Dn);var l=e.createView({id:ey});pt({chart:l,options:{xField:It,yField:wl,seriesField:r||It,tooltip:x({fields:wn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(Dn);var c=e.createView({id:ny});return wt({chart:c,options:{xField:It,yField:Dl,seriesField:r||It,tooltip:x({fields:wn},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(Dn),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),t}function hy(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.xAxis,o=r.yAxis,s={},l=A(s,i,(e={},e[It]=x(x({sync:!0},J(a,mt)),{type:"cat"}),e[ce]=x({sync:!0},J(o,mt)),e[Al]=x({sync:ce},J(o,mt)),e[wl]=x({sync:ce},J(o,mt)),e[Dl]=x({sync:ce},J(o,mt)),e));return n.scale(l),t}function vy(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=G(e,ii);return r===!1?a.axis(It,!1):a.axis(It,r),i===!1?a.axis(ce,!1):a.axis(ce,i),e.axis(!1),t}function py(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,a=n.shape;if(r===!1)e.legend(!1);else{var o=i||It,s=$n(r,["selected"]);(!a||!a.startsWith("hollow"))&&(E(s,["marker","style","lineWidth"])||cs(s,["marker","style","lineWidth"],0)),e.legend(o,s),E(r,"selected")&&L(e.views,function(l){return l.legend(o,r)})}return t}function gy(t){var e=t.chart,n=G(e,ii);return at()(x(x({},t),{chart:n})),t}function yy(t){var e=t.chart,n=t.options,r=n.animation;return L(e.views,function(i){rn(i,r)}),t}function my(t){return N(K,uy,fy,dy,hy,dt,vy,py,rt,gy,yy)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return ry},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(Il(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return my},e})(q);var Mt="$$yField$$",Kn="$$diffField$$",ai="$$absoluteField$$",Tr="$$isTotal$$",xy={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function Fy(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=n===0?"M":"L";e.push([i,r.x,r.y])}}var a=t[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}function by(t){return A({},t.defaultStyle,t.style,{fill:t.color})}ae("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,a=e.addGroup(),o=this.parsePath(Fy(r)),s=by(t);a.addShape("path",{attrs:x(x({},s),{path:o})});var l=E(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),a.addShape("path",{attrs:x({path:c},l.style||{})})}return a}});function Sy(t,e,n,r,i){var a,o=[];if(xt(t,function(l,c){var u;Qt(zt.WARN,st(c[n]),"".concat(c[n]," is not a valid number"));var d=us(c[n])?null:c[n];return o.push(x(x({},c),(u={},u[r]=[l,l+d],u))),l+d},0),o.length&&i){var s=E(o,[[t.length-1],r,[1]]);o.push((a={},a[e]=i.label,a[n]=s,a[r]=[0,s],a))}return o}function Ml(t,e,n,r){var i=Sy(t,e,n,Mt,r);return i.map(function(a,o){var s;return ve(a)?x(x({},a),(s={},s[ai]=a[Mt][1],s[Kn]=a[Mt][1]-a[Mt][0],s[Tr]=o===t.length,s)):a})}function Ay(t){var e=t.options,n=e.locale,r=e.total,i=Wn(n).get(["waterfall","total"]);return r&&typeof r.label!="string"&&i&&(t.options.total.label=i),t}function wy(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,d=n.fallingFill,f=n.color,h=n.shape,v=n.customInfo;e.data(Ml(r,i,a,o));var p=f||function(F){return E(F,[Tr])?E(o,["style","fill"],""):E(F,[Mt,1])-E(F,[Mt,0])>0?u:d},y=A({},t,{options:{xField:i,yField:Mt,seriesField:i,rawFields:[a,Kn,Tr,Mt],widthRatio:l,interval:{style:c,shape:h||"waterfall",color:p}}}),g=pt(y).ext,m=g.geometry;return m.customInfo(x(x({},v),{leaderLine:s})),t}function Dy(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,s=r.yField,l=r.meta,c=A({},{alias:s},E(l,s));return N(ot((e={},e[o]=i,e[s]=a,e[Mt]=a,e),A({},l,(n={},n[Mt]=c,n[Kn]=c,n[ai]=c,n))))(t)}function Ey(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?(e.axis(o,!1),e.axis(Mt,!1)):(e.axis(o,i),e.axis(Mt,i)),t}function Oy(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,s=n.locale,l=Wn(s);if(r===!1)e.legend(!1);else{var c=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&c.push({name:i.label||"",value:"total",marker:{symbol:"square",style:A({},{r:5},E(i,"style"))}}),e.legend(A({},{custom:!0,position:"top",items:c},r)),e.removeInteraction("legend-filter")}return t}function Iy(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,a=n.xField,o=vt(e,"interval");if(!r)o.label(!1);else{var s=r.callback,l=yt(r,["callback"]);o.label({fields:i==="absolute"?[ai,a]:[Kn,a],callback:s,cfg:ht(l)})}return t}function My(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,a=n.yField;if(r!==!1){e.tooltip(x({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=e.geometries[0];r?.formatter?o.tooltip("".concat(i,"*").concat(a),r.formatter):o.tooltip(a)}else e.tooltip(!1);return t}function ky(t){return N(Ay,K,wy,Dy,Ey,Oy,My,Iy,oe,rt,tt,at())(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return xy},e.prototype.changeData=function(n){var r=this.options,i=r.xField,a=r.yField,o=r.total;this.updateOption({data:n}),this.chart.changeData(Ml(n,i,a,o))},e.prototype.getSchemaAdaptor=function(){return ky},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var oi="color",Ty=A({},q.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",oi],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),Py={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Ly(t,e){return e=Vt({},Py,e),Cy(t,e)}function Cy(t,e){var n=Xy();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){kt(e[l])||n[l](e[l])}),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start(),i=r._tags;i.forEach(function(l){l.x+=e.size[0]/2,l.y+=e.size[1]/2});var a=e.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var mr=Math.PI/180,Ge=64,En=2048;function Ry(t){return t.text}function zy(){return"serif"}function ga(){return"normal"}function $y(t){return t.value}function _y(){return~~(Math.random()*2)*90}function Ny(){return 1}function Vy(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(Ge<<5)/a,En/a);var o=0,s=0,l=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var u=i.measureText(e.text+"m").width*a,d=e.size<<1;if(e.rotate){var f=Math.sin(e.rotate*mr),h=Math.cos(e.rotate*mr),v=u*h,p=u*f,y=d*h,g=d*f;u=Math.max(Math.abs(v+g),Math.abs(v-g))+31>>5<<5,d=~~Math.max(Math.abs(p+y),Math.abs(p-y))}else u=u+31>>5<<5;if(d>l&&(l=d),o+u>=Ge<<5&&(o=0,s+=l,l=0),s+d>=En)break;i.translate((o+(u>>1))/a,(s+(d>>1))/a),e.rotate&&i.rotate(e.rotate*mr),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=u,e.height=d,e.xoff=o,e.yoff=s,e.x1=u>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=u}for(var m=i.getImageData(0,0,(Ge<<5)/a,En/a).data,F=[];--r>=0;)if(e=n[r],!!e.hasText){for(var u=e.width,S=u>>5,d=e.y1-e.y0,b=0;b<d*S;b++)F[b]=0;if(o=e.xoff,o==null)return;s=e.yoff;for(var D=0,k=-1,I=0;I<d;I++){for(var b=0;b<u;b++){var R=S*I+(b>>5),P=m[(s+I)*(Ge<<5)+(o+b)<<2]?1<<31-b%32:0;F[R]|=P,D|=P}D?k=I:(e.y0++,d--,I--,s++)}e.y1=e.y0+k,e.sprite=F.slice(0,(e.y1-e.y0)*S)}}}function Wy(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),u,d=0;d<l;d++){u=0;for(var f=0;f<=i;f++)if((u<<s|(f<i?(u=r[d*i+f])>>>o:0))&e[c+f])return!0;c+=n}return!1}function By(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function qy(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function kl(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Gy(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function ya(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Uy(){return document.createElement("canvas")}function _t(t){return lt(t)?t:function(){return t}}var Hy={archimedean:kl,rectangular:Gy};function Xy(){var t=[256,256],e=zy,n=$y,r=ga,i=_y,a=Ny,o=kl,s=Math.random,l=[],c=1/0,u=Ry,d=ga,f=Uy,h={};h.start=function(){var y=t[0],g=t[1],m=v(f()),F=h.board?h.board:ya((t[0]>>5)*t[1]),S=l.length,b=[],D=l.map(function(P,O,C){return P.text=u.call(this,P,O,C),P.font=e.call(this,P,O,C),P.style=d.call(this,P,O,C),P.weight=r.call(this,P,O,C),P.rotate=i.call(this,P,O,C),P.size=~~n.call(this,P,O,C),P.padding=a.call(this,P,O,C),P}).sort(function(P,O){return O.size-P.size}),k=-1,I=h.board?[{x:0,y:0},{x:y,y:g}]:null;R();function R(){for(var P=Date.now();Date.now()-P<c&&++k<S;){var O=D[k];O.x=y*(s()+.5)>>1,O.y=g*(s()+.5)>>1,Vy(m,O,D,k),O.hasText&&p(F,O,I)&&(b.push(O),I?h.hasImage||By(I,O):I=[{x:O.x+O.x0,y:O.y+O.y0},{x:O.x+O.x1,y:O.y+O.y1}],O.x-=t[0]>>1,O.y-=t[1]>>1)}h._tags=b,h._bounds=I}return h};function v(y){y.width=y.height=1;var g=Math.sqrt(y.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);y.width=(Ge<<5)/g,y.height=En/g;var m=y.getContext("2d",{willReadFrequently:!0});return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function p(y,g,m){for(var F=g.x,S=g.y,b=Math.sqrt(t[0]*t[0]+t[1]*t[1]),D=o(t),k=s()<.5?1:-1,I,R=-k,P,O;(I=D(R+=k))&&(P=~~I[0],O=~~I[1],!(Math.min(Math.abs(P),Math.abs(O))>=b));)if(g.x=F+P,g.y=S+O,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!m||!Wy(g,y,t[0]))&&(!m||qy(g,m))){for(var C=g.sprite,W=g.width>>5,j=t[0]>>5,Z=g.x-(W<<4),w=Z&127,M=32-w,_=g.y1-g.y0,z=void 0,T=(g.y+g.y0)*j+(Z>>5),$=0;$<_;$++){z=0;for(var H=0;H<=W;H++)y[T+H]|=z<<M|(H<W?(z=C[$*W+H])>>>w:0);T+=j}return delete g.sprite,!0}return!1}return h.createMask=function(y){var g=document.createElement("canvas"),m=t[0],F=t[1];if(!(!m||!F)){var S=m>>5,b=ya((m>>5)*F);g.width=m,g.height=F;var D=g.getContext("2d");D.drawImage(y,0,0,y.width,y.height,0,0,m,F);for(var k=D.getImageData(0,0,m,F).data,I=0;I<F;I++)for(var R=0;R<m;R++){var P=S*I+(R>>5),O=I*m+R<<2,C=k[O]>=250&&k[O+1]>=250&&k[O+2]>=250,W=C?1<<31-R%32:0;b[P]|=W}h.board=b,h.hasImage=!0}},h.timeInterval=function(y){c=y??1/0},h.words=function(y){l=y},h.size=function(y){t=[+y[0],+y[1]]},h.font=function(y){e=_t(y)},h.fontWeight=function(y){r=_t(y)},h.rotate=function(y){i=_t(y)},h.spiral=function(y){o=Hy[y]||y},h.fontSize=function(y){n=_t(y)},h.padding=function(y){a=_t(y)},h.random=function(y){s=_t(y)},h}function Tl(t){var e=t.options,n=t.chart,r=n,i=r.width,a=r.height,o=r.padding,s=r.appendPadding,l=r.ele,c=e.data,u=e.imageMask,d=e.wordField,f=e.weightField,h=e.colorField,v=e.wordStyle,p=e.timeInterval,y=e.random,g=e.spiral,m=e.autoFit,F=m===void 0?!0:m,S=e.placementStrategy;if(!c||!c.length)return[];var b=v.fontFamily,D=v.fontWeight,k=v.padding,I=v.fontSize,R=Qy(c,f),P=[e0(R),n0(R)],O=c.map(function(j){return{text:j[d],value:j[f],color:j[h],datum:j}}),C={imageMask:u,font:b,fontSize:Ky(I,P),fontWeight:D,size:Yy({width:i,height:a,padding:o,appendPadding:s,autoFit:F,container:l}),padding:k,timeInterval:p,random:y,spiral:g,rotate:Jy(e)};if(lt(S)){var W=O.map(function(j,Z,w){return x(x(x({},j),{hasText:!!j.text,font:_t(C.font)(j,Z,w),weight:_t(C.fontWeight)(j,Z,w),rotate:_t(C.rotate)(j,Z,w),size:_t(C.fontSize)(j,Z,w),style:"normal"}),S.call(n,j,Z,w))});return W.push({text:"",value:0,x:0,y:0,opacity:0}),W.push({text:"",value:0,x:C.size[0],y:C.size[1],opacity:0}),W}return Ly(O,C)}function Yy(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,a=t.padding,o=t.appendPadding;if(i){var s=xr(r);e=s.width,n=s.height}e=e||400,n=n||400;var l=jy({padding:a,appendPadding:o}),c=l[0],u=l[1],d=l[2],f=l[3],h=[e-(f+u),n-(c+d)];return h}function jy(t){var e=ee(t.padding),n=ee(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],a=e[2]+n[2],o=e[3]+n[3];return[r,i,a,o]}function Zy(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement){e(t);return}if(gt(t)){var r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=function(){e(r)},r.onerror=function(){Qt(zt.ERROR,!1,"image %s load failed !!!",t),n()};return}Qt(zt.WARN,t===void 0,"The type of imageMask option must be String or HTMLImageElement."),n()})}function Ky(t,e){if(lt(t))return t;if(et(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],a=e[1];return a===i?function(){return(r+n)/2}:function(s){var l=s.value;return(r-n)/(a-i)*(l-i)+n}}return function(){return t}}function Qy(t,e){return t.map(function(n){return n[e]}).filter(function(n){return typeof n=="number"&&!isNaN(n)})}function Jy(t){var e=t0(t),n=e.rotation,r=e.rotationSteps;if(!et(n))return n;var i=n[0],a=n[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function t0(t){var e=t.wordStyle.rotationSteps;return e<1&&(Qt(zt.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1),{rotation:t.wordStyle.rotation,rotationSteps:e}}function e0(t){return Math.min.apply(Math,t)}function n0(t){return Math.max.apply(Math,t)}function r0(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,a=Tl(t);e.data(a);var o=A({},t,{options:{xField:"x",yField:"y",seriesField:r&&oi,rawFields:lt(i)&&Q(Q([],E(n,"rawFields",[]),!0),["datum"],!1),point:{color:i,shape:"word-cloud"}}}),s=wt(o).ext;return s.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function i0(t){return N(ot({x:{nice:!1},y:{nice:!1}}))(t)}function a0(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return r===!1?e.legend(!1):i&&e.legend(oi,r),t}function o0(t){N(r0,i0,dt,a0,rt,tt,K,oe)(t)}ae("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:x(x({},l0(t)),{x:n,y:r})}),a=t.data.rotate;return typeof a=="number"&&Ft.rotate(i,a*Math.PI/180),i}});function l0(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="word-cloud",n}return e.getDefaultOptions=function(){return Ty},e.prototype.changeData=function(n){this.updateOption({data:n}),this.options.imageMask?this.render():this.chart.changeData(Tl({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var n=this;return new Promise(function(r){var i=n.options.imageMask;if(!i){t.prototype.render.call(n),r();return}var a=function(o){n.options=x(x({},n.options),{imageMask:o||null}),t.prototype.render.call(n),r()};Zy(i).then(a).catch(a)})},e.prototype.getSchemaAdaptor=function(){return o0},e.prototype.triggerResize=function(){var n=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){t.prototype.triggerResize.call(n)}))},e})(q);(function(t){B(e,t);function e(n,r,i,a){var o=t.call(this,n,A({},a,r))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor},e})(q);za("en-US",Hs);za("zh-CN",Xs);const s0=Ll({__name:"Peformance",setup(t,{expose:e}){e();const n=ds(),{dashboard:r}=Cl(n),i=ze({}),a=ze({}),o=ze({}),s=ze({}),l=ze({}),c=li(()=>(r.value.peformanceStats.sample??[]).length>0),u=li(()=>(r.value.peformanceStats.analysis??[]).length>0);Rl(()=>{n.getSampleProcessPeformance(),n.getAnalysisProcessPeformance()}),un(()=>r.value.currentPeformancePeriod,()=>{v(),h(),n.getSampleProcessPeformance(),n.getAnalysisProcessPeformance()}),un(()=>r.value.peformanceStats.sample,async y=>{y?.length&&(await si(),y.forEach(g=>{const m=[{item:"On-Time",count:g?.counts?.totalNotLate??0,percent:g?.counts?.totalSamples?g.counts.totalNotLate/g.counts.totalSamples*100:0},{item:"Delayed",count:g?.counts?.totalLate??0,percent:g?.counts?.totalSamples?g.counts.totalLate/g.counts.totalSamples*100:0}];switch(g?.process){case"received_to_published":i.value=g,f(m,"process-rtp");break;case"received_to_submitted":a.value=g,f(m,"process-rts");break;case"submitted_to_verified":o.value=g,f(m,"process-stv");break;case"verified_to_published":s.value=g,f(m,"process-vtp");break}}))}),un(()=>r.value.currentPeformance,()=>{h(),n.getAnalysisProcessPeformance()}),un(()=>r.value.peformanceStats.analysis,async y=>{if(y?.[0]){await si(),l.value=y[0];const g=y[0].groups?.map(m=>({analysis:m?.service??"",value:m?.processAverage??0,total:m?.totalSamples??0}))??[];d(g,"process-service")}});const d=(y,g)=>{new Ya(g,{data:y,xField:"value",yField:"analysis",seriesField:"",meta:{analysis:{alias:"Analysis"},value:{alias:"process average in days"}},label:{position:"middle"},minBarWidth:5,maxBarWidth:20}).render()},f=(y,g)=>{const m=new Fa({container:g,autoFit:!0,height:150,width:300});m.data(y),m.scale("percent",{formatter:F=>`${(F*100).toFixed(2)}%`}),m.coordinate("theta",{radius:.75,innerRadius:.6}),m.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),m.annotation(),m.interval().adjust("stack").position("percent").color("item").label("percent",{content:F=>`${(F.percent*100).toFixed(2)}%`}).tooltip("item*percent",(F,S)=>({name:F,value:`${(S*100).toFixed(2)}%`})),m.interaction("element-active"),m.render()},h=()=>{const y=document.getElementById("ap-graphs");y&&(y.innerHTML='<div id="process-service" class="mt-3"></div>')},v=()=>{const y=["rtp-graph","rts-graph","stv-graph","vtp-graph"],g=["process-rtp","process-rts","process-stv","process-vtp"];y.forEach((m,F)=>{const S=document.getElementById(m);S&&(S.innerHTML=`<div id="${g[F]}" class="mt-3"></div>`)})},p={dashBoardStore:n,dashboard:r,prRTP:i,prRTS:a,prSTV:o,prVTP:s,analProcess:l,hasSamplePerformance:c,hasAnalysisPerformance:u,plotAnalyses:d,plotLateDonut:f,resetAPGraphs:h,resetSampleGraphs:v,get Empty(){return ys},get EmptyContent(){return gs},get EmptyDescription(){return ps},get EmptyHeader(){return vs},get EmptyTitle(){return hs},get Spinner(){return ms}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),c0={class:"mt-4"},u0={class:"flex justify-end items-center mb-4"},f0=["value","selected"],d0={class:"bg-muted p-4 rounded-sm"},h0={key:0,class:"text-start my-4"},v0={class:"inline-flex items-center gap-2"},p0={key:1,class:"py-4"},g0={key:2,class:"flex flex-wrap justify-start gap-4"},y0={class:"flex flex-col items-center"},m0={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},x0={class:"font-bold text-foreground text-xl"},F0={class:"flex flex-col items-center"},b0={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},S0={class:"font-bold text-foreground text-xl"},A0={class:"flex flex-col items-center"},w0={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},D0={class:"font-bold text-foreground text-xl"},E0={class:"flex flex-col items-center"},O0={class:"bg-background shadow rounded-sm px-6 pt-3 pb-5 border border-foreground text-center"},I0={class:"font-bold text-foreground text-xl"},M0={class:"mt-1 text-xl text-foreground font-semibold"},k0=["value","selected"],T0={class:"bg-muted p-2"},P0={key:0,class:"text-start my-4 w-100"},L0={class:"inline-flex items-center gap-2"},C0={key:1,class:"py-4"},R0={key:2,id:"ap-graphs"};function z0(t,e,n,r,i,a){return Ct(),Lt("div",c0,[Y("section",u0,[e[2]||(e[2]=Y("span",{class:"text-foreground"},"In the last",-1)),Y("select",{class:"mx-4 p-1 bg-muted rounded-sm border border-border",onChange:e[0]||(e[0]=o=>r.dashBoardStore.setCurrentPeformancePeriod(o))},[(Ct(!0),Lt(ci,null,ui(r.dashboard.peformancePeriods,o=>(Ct(),Lt("option",{key:o,value:o,selected:o===r.dashboard.currentPeformancePeriod},me(o),9,f0))),128))],32),e[3]||(e[3]=Y("span",{class:"text-foreground"},"days",-1))]),e[20]||(e[20]=Y("h1",{class:"text-xl text-foreground font-semibold"}," Process performance for samples in average days ",-1)),e[21]||(e[21]=Y("hr",{class:"my-2"},null,-1)),Y("div",d0,[r.dashboard.fetchingSampePeformanceStats?(Ct(),Lt("div",h0,[Y("span",v0,[Ot(r.Spinner,{class:"size-4"}),e[4]||(e[4]=Y("span",{class:"text-sm"},"Fetching updated sample performance stats...",-1))])])):r.hasSamplePerformance?(Ct(),Lt("div",g0,[Y("div",y0,[Y("div",m0,[e[7]||(e[7]=Y("div",{class:"font-semibold text-muted-foreground"},"Received to Published",-1)),Y("div",x0,me(r.prRTP?.counts?.processAverage??0)+" days ",1)]),e[8]||(e[8]=Y("div",{id:"rtp-graph",class:"mt-3"},[Y("div",{id:"process-rtp"})],-1))]),Y("div",F0,[Y("div",b0,[e[9]||(e[9]=Y("div",{class:"font-semibold text-muted-foreground"},"Received to Submitted",-1)),Y("div",S0,me(r.prRTS?.counts?.processAverage??0)+" days ",1)]),e[10]||(e[10]=Y("div",{id:"rts-graph",class:"mt-3"},[Y("div",{id:"process-rts"})],-1))]),Y("div",A0,[Y("div",w0,[e[11]||(e[11]=Y("div",{class:"font-semibold text-muted-foreground"},"Submitted to Verified",-1)),Y("div",D0,me(r.prSTV?.counts?.processAverage??0)+" days ",1)]),e[12]||(e[12]=Y("div",{id:"stv-graph",class:"mt-3"},[Y("div",{id:"process-stv"})],-1))]),Y("div",E0,[Y("div",O0,[e[13]||(e[13]=Y("div",{class:"font-semibold text-muted-foreground"},"Verified to Published",-1)),Y("div",I0,me(r.prVTP?.counts?.processAverage??0)+" days ",1)]),e[14]||(e[14]=Y("div",{id:"vtp-graph",class:"mt-3"},[Y("div",{id:"process-vtp"})],-1))])])):(Ct(),Lt("div",p0,[Ot(r.Empty,{class:"border-0 bg-background"},{default:$t(()=>[Ot(r.EmptyContent,null,{default:$t(()=>[Ot(r.EmptyHeader,null,{default:$t(()=>[Ot(r.EmptyTitle,null,{default:$t(()=>[...e[5]||(e[5]=[fn("No sample performance data",-1)])]),_:1}),Ot(r.EmptyDescription,null,{default:$t(()=>[...e[6]||(e[6]=[fn("Performance metrics will appear after samples are processed.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]))]),e[22]||(e[22]=Y("hr",null,null,-1)),Y("h1",M0,[e[15]||(e[15]=Y("span",null,"Process peformance by anayses service",-1)),Y("select",{name:"",id:"",class:"ml-8 p-1 bg-muted outline-none",onChange:e[1]||(e[1]=o=>r.dashBoardStore.setCurrentPeformance(o))},[(Ct(!0),Lt(ci,null,ui(r.dashboard.performances,o=>(Ct(),Lt("option",{key:o,value:o,selected:o===r.dashboard.currentPeformance},me(r.dashboard.perfs[o]),9,k0))),128))],32)]),e[23]||(e[23]=Y("hr",{class:"mt-1 mb-2"},null,-1)),Y("div",T0,[r.dashboard.fetchingAnalysisPeformanceStats?(Ct(),Lt("div",P0,[Y("span",L0,[Ot(r.Spinner,{class:"size-4"}),e[16]||(e[16]=Y("span",{class:"text-sm"},"fetching analysis peformance stats ...",-1))])])):r.hasAnalysisPerformance?(Ct(),Lt("div",R0,[...e[19]||(e[19]=[Y("div",{id:"process-service",class:"mt-3"},null,-1)])])):(Ct(),Lt("div",C0,[Ot(r.Empty,{class:"border-0 bg-background"},{default:$t(()=>[Ot(r.EmptyContent,null,{default:$t(()=>[Ot(r.EmptyHeader,null,{default:$t(()=>[Ot(r.EmptyTitle,null,{default:$t(()=>[...e[17]||(e[17]=[fn("No analysis performance data",-1)])]),_:1}),Ot(r.EmptyDescription,null,{default:$t(()=>[...e[18]||(e[18]=[fn("Analysis trends will appear once results are recorded.",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]))])])}const U0=zl(s0,[["render",z0],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/dashboard/Peformance.vue"]]);export{U0 as default};
