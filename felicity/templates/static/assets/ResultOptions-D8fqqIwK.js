const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cdc6vSVw.js","assets/index-B3SP4dh7.css","assets/vue-multiselect.esm-CZOh13og.js"])))=>i.map(i=>d[i]);
import{a0 as U,u as F,f as N,h as P,t as B,a7 as x,g as L,a5 as j,a1 as k,a6 as S,_ as I,r as C,c as u,o as d,a as v,A as e,C as q,E as z,N as f,P as J,J as h,K as M,L as b,F as E,a2 as A,D as W}from"./index-Cdc6vSVw.js";import{z as G,B as H}from"./analyses.mutations-DiZ_xJnn.js";import{u as Q}from"./analysis-C80mPHS9.js";const X=U({__name:"ResultOptions",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(w,{expose:t}){t();const T=k(()=>S(()=>import("./index-Cdc6vSVw.js").then(r=>r.dd),__vite__mapDeps([0,1]))),o=k(()=>S(()=>import("./vue-multiselect.esm-CZOh13og.js"),__vite__mapDeps([2,0,1]))),p=Q(),y=F(),{withClientMutation:i}=N(),g=P(()=>y.getSampleTypes),s=w,{analysis:a}=B(s);let c=x(!1),_=x(""),n=L({});const m=x(!0);j(()=>s.analysisUid,(r,l)=>{});function O(){n.optionKey=+n.optionKey;const r={...n,analysisUid:a?.value?.uid,sampleTypes:n.sampleTypes?.map(l=>l.uid)};i(G,{payload:r},"createResultOption").then(l=>p.addResultOption(l))}function R(){const r={...n,analysisUid:a?.value?.uid,sampleTypes:n.sampleTypes?.map(l=>l.uid)};delete r.__typename,delete r.uid,i(H,{uid:n.uid,payload:r},"updateResultOption").then(l=>p.updateResultOption(l))}function D(r,l={}){m.value=r,c.value=!0,_.value=(r?"CREATE":"EDIT")+" RESULT OPTION",r?Object.assign(n,{optionKey:null,value:null}):Object.assign(n,{...l})}function K(){m.value===!0&&O(),m.value===!1&&R(),c.value=!1}const V={modal:T,VueMultiselect:o,analysisStore:p,sampleStore:y,withClientMutation:i,sampleTypes:g,props:s,analysis:a,get showModal(){return c},set showModal(r){c=r},get formTitle(){return _},set formTitle(r){_=r},get form(){return n},set form(r){n=r},formAction:m,addResultOption:O,editResultOption:R,FormManager:D,saveForm:K};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),Y={class:"overflow-x-auto mt-4"},Z={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},$={class:"min-w-full"},ee={class:"bg-card"},te={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},oe={class:"text-sm text-foreground"},se={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},re={class:"text-sm text-foreground"},ne={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},le={class:"flex flex-wrap gap-2"},ae={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},de=["onClick"],ie={class:"text-lg font-bold text-foreground"},ue={action:"post",class:"p-6 space-y-6"},pe={class:"space-y-4"},ce={class:"grid grid-cols-3 gap-4"},me={class:"space-y-2"},fe={class:"col-span-2 space-y-2"},be={class:"space-y-2"},ye={class:"pt-4"};function ge(w,t,T,o,p,y){const i=C("fel-button"),g=C("fel-heading");return d(),u(h,null,[v(g,{title:"Result Options"},{default:f(()=>[v(i,{onClick:t[0]||(t[0]=s=>o.FormManager(!0))},{default:f(()=>[...t[6]||(t[6]=[J("Add Result Option",-1)])]),_:1})]),_:1}),e("div",Y,[e("div",Z,[e("table",$,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Key"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Value"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Sample Types"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",ee,[(d(!0),u(h,null,M(o.analysis?.resultOptions,s=>(d(),u("tr",{key:s?.uid,class:"hover:bg-accent/50"},[e("td",te,[e("div",oe,b(s?.optionKey),1)]),e("td",se,[e("div",re,b(s?.value),1)]),e("td",ne,[e("div",le,[(d(!0),u(h,null,M(s?.sampleTypes,a=>(d(),u("span",{key:a.uid,class:"px-2 py-1 text-xs font-medium bg-accent text-accent-foreground rounded-md"},b(a.name),1))),128))])]),e("td",ae,[e("button",{onClick:a=>o.FormManager(!1,s),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,de)])]))),128))])])])]),o.showModal?(d(),q(o.modal,{key:0,onClose:t[5]||(t[5]=s=>o.showModal=!1),contentWidth:"w-2/4"},{header:f(()=>[e("h3",ie,b(o.formTitle),1)]),body:f(()=>[e("form",ue,[e("div",pe,[e("div",ce,[e("label",me,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result Key",-1)),E(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=s=>o.form.optionKey=s),placeholder:"Key ..."},null,512),[[A,o.form.optionKey]])]),e("label",fe,[t[9]||(t[9]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Result Value",-1)),E(e("input",{type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=s=>o.form.value=s),placeholder:"Value ..."},null,512),[[A,o.form.value]])])]),e("div",be,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),v(o.VueMultiselect,{modelValue:o.form.sampleTypes,"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.sampleTypes=s),options:o.sampleTypes,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-primary"},null,8,["modelValue","options"])])]),e("div",ye,[e("button",{type:"button",onClick:t[4]||(t[4]=W(s=>o.saveForm(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):z("",!0)],64)}const he=I(X,[["render",ge],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/ResultOptions.vue"]]);export{he as default};
