import{a7 as k,br as ee,ck as L,cl as te,Y as w,bq as Q,aw as ae,cf as oe,be as R,A as h,o as y,K as l,y as C,bf as i,bg as W,J as ne,bs as re,b_ as se,_ as P,aK as X,aL as Z,a4 as O,bh as N,ak as F,z as _,N as le,c8 as ie,a as f,u as de,ag as ce,P as ue,ah as G,a0 as J,aN as pe,r as B,aF as fe,c as I,D as U,B as me,F as E,H as j,I as V,aG as _e,M as D}from"./index-OdhKCqIc.js";import{u as ye}from"./analysis-PB9AMevg.js";import{_ as ge,$ as ve}from"./analyses.mutations-DUxQZn1r.js";import{C as be,a as he,b as Ae}from"./CollapsibleTrigger-CC-LRQ5L.js";import{u as xe}from"./useArrowNavigation-C6Y-ieo6.js";import{C as Ce}from"./chevron-down-Dqf-ptA3.js";function we({type:o,defaultValue:t,modelValue:a}){const e=a||t;return a!==void 0||t!==void 0?Array.isArray(e)?"multiple":"single":o??"single"}function qe({type:o,defaultValue:t,modelValue:a}){return o||we({type:o,defaultValue:t,modelValue:a})}function Se({type:o,defaultValue:t}){return t!==void 0?t:o==="single"?void 0:[]}function Te(o,t){const a=k(()=>qe(o)),e=ee(o,"modelValue",t,{defaultValue:Se(o),passive:o.modelValue===void 0,deep:!0});function n(s){if(a.value==="single")e.value=L(s,e.value)?void 0:s;else{const m=Array.isArray(e.value)?[...e.value||[]]:[e.value].filter(Boolean);if(te(m,s)){const g=m.findIndex(A=>L(A,s));m.splice(g,1)}else m.push(s);e.value=m}}const r=k(()=>a.value==="single");return{modelValue:e,changeModelValue:n,isSingle:r}}const[H,ke]=Q("AccordionRoot");var Be=w({__name:"AccordionRoot",props:{collapsible:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1,default:"vertical"},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(o,{emit:t}){const a=o,e=t,{dir:n,disabled:r,unmountOnHide:s}=ae(a),m=oe(n),{modelValue:g,changeModelValue:A,isSingle:v}=Te(a,e),{forwardRef:b,currentElement:q}=R();return ke({disabled:r,direction:m,orientation:a.orientation,parentElement:q,isSingle:v,collapsible:a.collapsible,modelValue:g,changeModelValue:A,unmountOnHide:s}),(c,u)=>(y(),h(i(W),{ref:i(b),"as-child":c.asChild,as:c.as},{default:l(()=>[C(c.$slots,"default",{modelValue:i(g)})]),_:3},8,["as-child","as"]))}}),De=Be,$=(function(o){return o.Open="open",o.Closed="closed",o})($||{});const[K,Ie]=Q("AccordionItem");var Ve=w({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1,default:void 0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:t}){const a=o,e=H(),n=k(()=>e.isSingle.value?a.value===e.modelValue.value:Array.isArray(e.modelValue.value)&&e.modelValue.value.includes(a.value)),r=k(()=>e.disabled.value||a.disabled),s=k(()=>r.value?"":void 0),m=k(()=>n.value?$.Open:$.Closed);t({open:n,dataDisabled:s});const{currentRef:g,currentElement:A}=R();Ie({open:n,dataState:m,disabled:r,dataDisabled:s,triggerId:"",currentRef:g,currentElement:A,value:k(()=>a.value)});function v(b){const q=b.target;if(Array.from(e.parentElement.value?.querySelectorAll("[data-reka-collection-item]")??[]).findIndex(T=>T===q)===-1)return null;xe(b,q,e.parentElement.value,{arrowKeyOptions:e.orientation,dir:e.direction.value,focus:!0})}return(b,q)=>(y(),h(i(be),{"data-orientation":i(e).orientation,"data-disabled":s.value,"data-state":m.value,disabled:r.value,open:n.value,as:a.as,"as-child":a.asChild,"unmount-on-hide":a.unmountOnHide??i(e).unmountOnHide.value,onKeydown:ne(v,["up","down","left","right","home","end"])},{default:l(()=>[C(b.$slots,"default",{open:n.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),Me=Ve,Pe=w({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o,a=H(),e=K();return R(),(n,r)=>(y(),h(i(he),{role:"region","as-child":t.asChild,as:n.as,"force-mount":t.forceMount,"aria-labelledby":i(e).triggerId,"data-state":i(e).dataState.value,"data-disabled":i(e).dataDisabled.value,"data-orientation":i(a).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:r[0]||(r[0]=s=>i(a).changeModelValue(i(e).value.value))},{default:l(()=>[C(n.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),Re=Pe,Oe=w({__name:"AccordionHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h3"}},setup(o){const t=o,a=H(),e=K();return R(),(n,r)=>(y(),h(i(W),{as:t.as,"as-child":t.asChild,"data-orientation":i(a).orientation,"data-state":i(e).dataState.value,"data-disabled":i(e).dataDisabled.value},{default:l(()=>[C(n.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),He=Oe,Ue=w({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o,a=H(),e=K();e.triggerId||=re(void 0,"reka-accordion-trigger");function n(){const r=a.isSingle.value&&e.open.value&&!a.collapsible;e.disabled.value||r||a.changeModelValue(e.value.value)}return(r,s)=>(y(),h(i(Ae),{id:i(e).triggerId,ref:i(e).currentRef,"data-reka-collection-item":"",as:t.as,"as-child":t.asChild,"aria-disabled":i(e).disabled.value||void 0,"aria-expanded":i(e).open.value||!1,"data-disabled":i(e).dataDisabled.value,"data-orientation":i(a).orientation,"data-state":i(e).dataState.value,disabled:i(e).disabled.value,onClick:n},{default:l(()=>[C(r.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),Ee=Ue;const je=w({__name:"Accordion",props:{collapsible:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1},unmountOnHide:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(o,{expose:t,emit:a}){t();const e=o,n=a,r=se(e,n),s={props:e,emits:n,forwarded:r,get AccordionRoot(){return De}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function $e(o,t,a,e,n,r){return y(),h(e.AccordionRoot,O({"data-slot":"accordion"},e.forwarded),{default:l(s=>[C(o.$slots,"default",X(Z(s)))]),_:3},16)}const Ne=P(je,[["render",$e],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/ui/accordion/Accordion.vue"]]),Fe=w({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:t}){t();const a=o,e=N(a,"class"),n={props:a,delegatedProps:e,get AccordionContent(){return Re},get cn(){return F}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function Ke(o,t,a,e,n,r){return y(),h(e.AccordionContent,O({"data-slot":"accordion-content"},e.delegatedProps,{class:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"}),{default:l(()=>[_("div",{class:le(e.cn("pt-0 pb-4",e.props.class))},[C(o.$slots,"default")],2)]),_:3},16)}const Ye=P(Fe,[["render",Ke],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/ui/accordion/AccordionContent.vue"]]),ze=w({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:t}){t();const a=o,e=N(a,"class"),n=ie(e),r={props:a,delegatedProps:e,forwardedProps:n,get AccordionItem(){return Me},get cn(){return F}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function Le(o,t,a,e,n,r){return y(),h(e.AccordionItem,O({"data-slot":"accordion-item"},e.forwardedProps,{class:e.cn("border-b last:border-b-0",e.props.class)}),{default:l(s=>[C(o.$slots,"default",X(Z(s)))]),_:3},16,["class"])}const Ge=P(ze,[["render",Le],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/ui/accordion/AccordionItem.vue"]]),Je=w({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(o,{expose:t}){t();const a=o,e=N(a,"class"),n={props:a,delegatedProps:e,get ChevronDown(){return Ce},get AccordionHeader(){return He},get AccordionTrigger(){return Ee},get cn(){return F}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function Qe(o,t,a,e,n,r){return y(),h(e.AccordionHeader,{class:"flex"},{default:l(()=>[f(e.AccordionTrigger,O({"data-slot":"accordion-trigger"},e.delegatedProps,{class:e.cn("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e.props.class)}),{default:l(()=>[C(o.$slots,"default"),C(o.$slots,"icon",{},()=>[f(e.ChevronDown,{class:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})])]),_:3},16,["class"])]),_:3})}const We=P(Je,[["render",Qe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/ui/accordion/AccordionTrigger.vue"]]),Xe=w({__name:"ManageAnalyses",emits:["changeTab"],setup(o,{expose:t,emit:a}){t();const{withClientMutation:e}=de(),n=ce(),r=ye(),s=ue(),m=k(()=>r.getAnalysesServices),{confirm:g}=pe();G(()=>{r.fetchAnalysesTemplates(),r.fetchAnalysesServices({})});const A=a,v=d=>{A("changeTab",d)},b=J(),q=async()=>{try{if(!await g({title:"Are you sure?",description:"You want to apply this template to add analyses?",confirmText:"Yes, apply now!",cancelText:"No, cancel apply!",variant:"destructive"}))return;await e(ge,{uid:n.params.sampleUid,analysisTemplateUid:b.value},"samplesApplyTemplate"),v("analysis-results")}catch{}},c=J([]);G(()=>{c.value=[...s.analysisResults?.map(d=>d.analysisUid)]});const u=(d,x)=>{const p=c.value.includes(d);if(x===!0&&!p){c.value=[...c.value,d];return}if(x===!1&&p){c.value=c.value.filter(M=>M!==d);return}x===void 0&&(c.value=p?c.value.filter(M=>M!==d):[...c.value,d])},T=d=>c.value.includes(d),z={withClientMutation:e,route:n,analysisStore:r,sampleStore:s,analysesServices:m,confirm:g,emit:A,changeTab:v,templateUid:b,applyTemplate:q,selectedAnalyses:c,selectAnalysis:u,isSelectedAnalysis:T,isSelectedCategory:d=>d.every(x=>T(x.uid)),selectCategory:(d,x)=>{if(x===!0){d.forEach(p=>u(p.uid,!0));return}if(x===!1){d.forEach(p=>u(p.uid,!1));return}d.every(p=>T(p.uid))?d.forEach(p=>u(p.uid)):d.forEach(p=>{T(p.uid)||u(p.uid)})},applyChanges:async()=>{const d=s.analysisResults?.filter(p=>!c.value.includes(p.analysisUid)).map(p=>p.uid),x=c.value.filter(p=>!s.analysisResults?.map(M=>M.analysisUid).includes(p));try{if(!await g({title:"Are you sure?",description:"You want to apply these changes to the analyses?",confirmText:"Yes, apply now!",cancelText:"No, cancel apply!",variant:"destructive"}))return;await e(ve,{sampleUid:n.params.sampleUid,payload:{cancel:d,add:x}},"manageAnalyses"),v("analysis-results")}catch{}},get Accordion(){return Ne},get AccordionContent(){return Ye},get AccordionItem(){return Ge},get AccordionTrigger(){return We}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),Ze={class:"space-y-6"},et={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},tt={class:"flex items-center space-x-4"},at=["value"],ot={class:"space-y-4"},nt={class:"flex items-center justify-between"},rt={class:"text-lg font-semibold text-foreground"},st={class:"max-h-[540px] overflow-y-auto border border-border bg-card rounded-lg shadow-md"},lt={class:"w-full"},it={class:"relative w-full overflow-auto"},dt={class:"flex justify-end pt-4"};function ct(o,t,a,e,n,r){const s=B("Checkbox"),m=B("TableHead"),g=B("TableRow"),A=B("TableHeader"),v=B("TableCell"),b=B("TableBody"),q=B("Table"),c=fe("motion-slide-right");return y(),I("div",Ze,[_("section",et,[U((y(),I("form",{onSubmit:t[2]||(t[2]=me(()=>{},["prevent"])),class:"space-y-4"},[_("div",tt,[t[5]||(t[5]=_("span",{class:"text-sm font-medium text-foreground"},"Analyses Template (Auto)",-1)),U(_("select",{"onUpdate:modelValue":t[0]||(t[0]=u=>e.templateUid=u),class:"w-64 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[t[4]||(t[4]=_("option",null,null,-1)),(y(!0),I(E,null,j(e.analysisStore.analysesTemplates,u=>(y(),I("option",{key:u.uid,value:u.uid},V(u.name),9,at))),128))],512),[[_e,e.templateUid]]),_("button",{type:"button",onClick:t[1]||(t[1]=u=>e.applyTemplate()),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Template ")])],32)),[[c]]),t[10]||(t[10]=_("div",{class:"border-t border-border"},null,-1)),_("div",ot,[_("div",nt,[_("h3",rt," Manually Modify Analyses: ("+V(e.selectedAnalyses?.length)+") ",1)]),t[9]||(t[9]=_("div",{class:"border-t border-border"},null,-1)),_("div",st,[_("div",lt,[(y(!0),I(E,null,j(e.analysesServices,(u,T)=>(y(),h(e.Accordion,{key:T,type:"single",collapsible:""},{default:l(()=>[f(e.AccordionItem,{value:String(u[0])},{default:l(()=>[f(e.AccordionTrigger,null,{default:l(()=>[D(V(u[0]),1)]),_:2},1024),f(e.AccordionContent,null,{default:l(()=>[_("div",it,[f(q,{class:"w-full caption-bottom text-sm"},{default:l(()=>[f(A,{class:"[&_tr]:border-b"},{default:l(()=>[f(g,{class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[f(m,{class:"px-4 py-2 text-left"},{default:l(()=>[f(s,{checked:e.isSelectedCategory(u[1]),"onUpdate:checked":S=>e.selectCategory(u[1],S)},null,8,["checked","onUpdate:checked"])]),_:2},1024),f(m,{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},{default:l(()=>[...t[6]||(t[6]=[D("Analysis",-1)])]),_:1}),f(m,{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},{default:l(()=>[...t[7]||(t[7]=[D("Keyword",-1)])]),_:1}),f(m,{class:"px-4 py-2 text-left text-sm font-medium text-foreground"},{default:l(()=>[...t[8]||(t[8]=[D("Description",-1)])]),_:1})]),_:2},1024)]),_:2},1024),f(b,{class:"[&_tr:last-child]:border-0"},{default:l(()=>[(y(!0),I(E,null,j(u[1],S=>U((y(),h(g,{key:S?.uid,class:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted"},{default:l(()=>[f(v,{class:"px-4 py-2"},{default:l(()=>[f(s,{checked:e.isSelectedAnalysis(S?.uid),"onUpdate:checked":Y=>e.selectAnalysis(S?.uid,Y)},null,8,["checked","onUpdate:checked"])]),_:2},1024),f(v,{class:"px-4 py-2 text-sm text-foreground"},{default:l(()=>[D(V(S?.name),1)]),_:2},1024),f(v,{class:"px-4 py-2 text-sm text-muted-foreground"},{default:l(()=>[D(V(S?.keyword),1)]),_:2},1024),f(v,{class:"px-4 py-2 text-sm text-muted-foreground"},{default:l(()=>[D(V(S?.description),1)]),_:2},1024)]),_:2},1024)),[[c]])),128))]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1032,["value"])]),_:2},1024))),128))])]),_("div",dt,[_("button",{type:"button",onClick:t[3]||(t[3]=u=>e.applyChanges()),class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50"}," Apply Changes ")])])])])}const vt=P(Xe,[["render",ct],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/sample/_id/ManageAnalyses.vue"]]);export{vt as default};
