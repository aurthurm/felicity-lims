import{Y as w,aB as j,an as p,ah as z,a3 as A,_ as H,c as f,o as c,z as C,a as t,K as l,M as i,a4 as P,F as _,H as U,A as y,I as b,B as K}from"./index-OdhKCqIc.js";import{c as R,a as s,u as Y,F as G}from"./index.esm-BfHj8iGm.js";import{F as J,a as Q,b as W}from"./FormMessage-CgXFMXx9.js";import{F as X}from"./FormLabel-DxP9wnWS.js";import{I as Z}from"./Input-BEm5S0CJ.js";import{S as h,a as $,b as ee,c as te,d as le}from"./SelectValue-Ds0cfAgl.js";import{u as oe}from"./location-zigt6URg.js";const S="__none__",re=w({__name:"ClientForm",props:{client:{type:[Object,null],required:!1,default:null},create:{type:Boolean,required:!1,default:!0}},emits:["submit","close"],setup(E,{expose:o,emit:I}){o();const e=E,F=I,u=oe(),{countries:n,provinces:a,districts:k}=j(u),N=R({name:s().required("Name is required"),code:s().required("Code is required"),countryUid:s().nullable(),provinceUid:s().nullable(),districtUid:s().nullable()}),{handleSubmit:V,setFieldValue:d,setValues:v}=Y({validationSchema:N,initialValues:{name:e.client?.name??"",code:e.client?.code??"",countryUid:e.client?.district?.province?.countryUid??"",provinceUid:e.client?.district?.provinceUid??"",districtUid:e.client?.districtUid??""}});function B(r){r?(u.filterProvincesByCountry(r),d("provinceUid",""),d("districtUid","")):(d("provinceUid",""),d("districtUid",""))}function L(r){r&&u.filterDistrictsByProvince(r),d("districtUid","")}function D(r){const m=r===S?"":r;d("countryUid",m),B(m||void 0)}function O(r){const m=r===S?"":r;d("provinceUid",m),L(m||void 0)}function x(r){d("districtUid",r===S?"":r)}const q=V(r=>{F("submit",{name:r.name,code:r.code,districtUid:r.districtUid||void 0})});function T(r){if(!r){v({name:"",code:"",countryUid:"",provinceUid:"",districtUid:""});return}const m=r?.district?.province?.countryUid??"",g=r?.district?.provinceUid??"";v({name:r.name??"",code:r.code??"",countryUid:m,provinceUid:g,districtUid:r.districtUid??""}),m&&u.filterProvincesByCountry(m),g&&u.filterDistrictsByProvince(g)}p(()=>e.client,r=>T(r??null),{immediate:!0}),z(()=>{u.fetchCountries()});const M={SELECT_NONE:S,props:e,emit:F,locationStore:u,countries:n,provinces:a,districts:k,clientSchema:N,handleSubmit:V,setFieldValue:d,setValues:v,getProvinces:B,getDistricts:L,onCountryChange:D,onProvinceChange:O,onDistrictChange:x,onSubmit:q,initFromClient:T,get FormControl(){return W},get FormField(){return G},get FormItem(){return Q},get FormLabel(){return X},get FormMessage(){return J},get Input(){return Z},get Select(){return le},get SelectContent(){return te},get SelectItem(){return ee},get SelectTrigger(){return $},get SelectValue(){return h},get Button(){return A}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),ne={class:"grid grid-cols-2 gap-4"},ie={class:"grid grid-cols-3 gap-4"},ae={class:"flex justify-end gap-2 pt-2"};function de(E,o,I,e,F,u){return c(),f("form",{class:"space-y-6",autocomplete:"off",onSubmit:o[2]||(o[2]=K((...n)=>e.onSubmit&&e.onSubmit(...n),["prevent"]))},[C("div",ne,[t(e.FormField,{name:"name"},{default:l(({componentField:n})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...o[3]||(o[3]=[i("Name",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,P(n,{placeholder:"Client name"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"code"},{default:l(({componentField:n})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...o[4]||(o[4]=[i("Code",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Input,P(n,{placeholder:"Client code"}),null,16)]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),C("div",ie,[t(e.FormField,{name:"countryUid"},{default:l(({componentField:n})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...o[5]||(o[5]=[i("Country",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,{"model-value":n.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onCountryChange},{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select country"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:e.SELECT_NONE},{default:l(()=>[...o[6]||(o[6]=[i("Select country",-1)])]),_:1}),(c(!0),f(_,null,U(e.countries,a=>(c(),y(e.SelectItem,{key:a.uid,value:a.uid},{default:l(()=>[i(b(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"provinceUid"},{default:l(({componentField:n})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...o[7]||(o[7]=[i("Province",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,{"model-value":n.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onProvinceChange},{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select province"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:e.SELECT_NONE},{default:l(()=>[...o[8]||(o[8]=[i("Select province",-1)])]),_:1}),(c(!0),f(_,null,U(e.provinces,a=>(c(),y(e.SelectItem,{key:a.uid,value:a.uid},{default:l(()=>[i(b(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1}),t(e.FormField,{name:"districtUid"},{default:l(({componentField:n})=>[t(e.FormItem,null,{default:l(()=>[t(e.FormLabel,null,{default:l(()=>[...o[9]||(o[9]=[i("District",-1)])]),_:1}),t(e.FormControl,null,{default:l(()=>[t(e.Select,{"model-value":n.modelValue||e.SELECT_NONE,"onUpdate:modelValue":e.onDistrictChange},{default:l(()=>[t(e.SelectTrigger,null,{default:l(()=>[t(e.SelectValue,{placeholder:"Select district"})]),_:1}),t(e.SelectContent,null,{default:l(()=>[t(e.SelectItem,{value:e.SELECT_NONE},{default:l(()=>[...o[10]||(o[10]=[i("Select district",-1)])]),_:1}),(c(!0),f(_,null,U(e.districts,a=>(c(),y(e.SelectItem,{key:a.uid,value:a.uid},{default:l(()=>[i(b(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),_:2},1024),t(e.FormMessage)]),_:2},1024)]),_:1})]),C("div",ae,[t(e.Button,{type:"button",variant:"secondary",onClick:o[0]||(o[0]=n=>e.emit("close"))},{default:l(()=>[...o[11]||(o[11]=[i(" Cancel ",-1)])]),_:1}),t(e.Button,{type:"button",variant:"outline",onClick:o[1]||(o[1]=n=>e.emit("close"))},{default:l(()=>[...o[12]||(o[12]=[i(" Close ",-1)])]),_:1}),t(e.Button,{type:"submit"},{default:l(()=>[...o[13]||(o[13]=[i("Save Form",-1)])]),_:1})])],32)}const ve=H(re,[["render",de],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/client/ClientForm.vue"]]);export{ve as C};
