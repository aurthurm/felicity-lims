import{_ as D,z as X,A as Z,y as ee,S as M,bb as te,bc as se,w as oe}from"./shipment-53265c2d.js";import{f as ae,G as j,r as v,d as f,c as ne,aj as F,h as a,k as n,x as e,ag as l,F as u,ak as _,D as r,u as i,B as w,A as L,al as N,_ as le}from"./_plugin-vue_export-helper-dacf3d65.js";import{h as re,o as ie,a as ce}from"./constants-743d82a1.js";import{d as g,a as A,b as T,e as R}from"./runtime-dom.esm-bundler-98433118.js";const de=e("hr",null,null,-1),ue={action:"post",class:"mt-4"},pe={class:"flex justify-start items-center mr-4"},he=e("span",{class:"text-gray-700"},"Worksheet Template",-1),_e={class:"block mx-4"},me=e("option",null,null,-1),ye=["value"],fe=e("hr",{class:"mt-4 mb-2"},null,-1),ge=e("h3",{class:"font-bold"},"Manual Analyses Assignment",-1),be=e("hr",{class:"mb-4 mt-2"},null,-1),xe={class:"overflow-x-auto mt-4"},ke={action:"post",class:"p-1"},ve={class:"flex justify-start mb-4"},we={class:"flex justify-between items-center"},Ae=e("span",{class:"text-gray-700 mr-2"},"SampleType",-1),Te=["value"],Se={class:"flex justify-between items-center ml-6"},Ce=e("span",{class:"text-gray-700 mr-2"},"Analyses",-1),Ue=["value"],Ee={class:"ml-6 mt-2"},Be={class:"overflow-x-auto mt-4"},We={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},Ve={key:0,class:"py-4 text-center"},De={key:1,class:"min-w-full"},Me={class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},je=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},null,-1),Fe=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Sample ID ",-1),Le=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Analysis ",-1),Ne=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Created ",-1),Re=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Received ",-1),Ie=e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status ",-1),Pe={class:"bg-white"},Oe=["onUpdate:modelValue","onChange"],Ye=e("td",{class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},null,-1),qe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},He={class:"text-sm leading-5 text-sky-800 font-semibold"},Ke={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Qe={class:"text-sm leading-5 text-sky-800"},$e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ge={class:"text-sm leading-5 text-sky-800"},ze={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Je={class:"text-sm leading-5 text-sky-800"},Xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ze={class:"text-sm leading-5 text-sky-800"},et={class:"my-4"},tt={action:"post",class:"mb-4"},st={class:"flex justify-start items-center mr-4"},ot=e("span",{class:"text-gray-700"},"Apply QC Template",-1),at={class:"block mx-4"},nt=e("option",null,null,-1),lt=["value"],rt=ae({__name:"WorkSheetAssign",setup(it){const I=j(()=>D(()=>import("./LoadingMessage-097e117a.js"),["assets/LoadingMessage-097e117a.js","assets/_plugin-vue_export-helper-dacf3d65.js"])),S=j(()=>D(()=>import("./Button-ea0a63f5.js"),["assets/Button-ea0a63f5.js","assets/_plugin-vue_export-helper-dacf3d65.js"])),d=X(),m=Z(),C=ee(),{withClientMutation:U}=oe(),b=v();d.fetchWorkSheetTemplates();const E=f(()=>d.getWorkSheet),P=f(()=>d.getWorkSheetTemplates),O=async()=>{try{M.fire({title:"Are you sure?",text:"You want to apply this template to add samples?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, apply now!",cancelButtonText:"No, cancel apply!"}).then(s=>{s.isConfirmed&&U(te,{worksheetUid:E?.value?.uid,templateUid:b.value},"updateWorksheetApplyTemplate").then(o=>{})})}catch{}};m.fetchAnalysesServices({first:void 0,after:"",text:"",sortBy:["name"]}),C.fetchSampleTypes(),m.fetchQCTemplates();const Y=f(()=>m.getQCTemplates),x=v(void 0),p=ne({sampleTypeUid:void 0,analysisUid:void 0}),h=v(!1),y=f(()=>{const s=B;return d.getAnalysisResults?.forEach(c=>{s?.some(k=>k.uid===c.uid)||s.push(c)}),s}),q=()=>{W(),d.fetchForWorkSheetsAssign({first:50,after:"",text:"",sortBy:void 0,...p})},H=()=>{const s=K();try{M.fire({title:"Are you sure?",text:"You want to assign selected to worksheet?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, assign now!",cancelButtonText:"No, cancel apply!"}).then(o=>{o.isConfirmed&&U(se,{uid:E?.value?.uid,qcTemplateUid:x.value,analysesUids:s},"updateWorksheetApplyTemplate").then(c=>{})})}catch{}};let B=[];function W(){let s=[];return y?.value?.forEach(o=>{o.checked&&s.push(o)}),B=s,s}function K(){const s=W();let o=[];return s?.forEach(c=>o.push(c.uid)),o}function Q(s){J()?h.value=!0:h.value=!1}function $(s){s.checked=!0}function G(s){s.checked=!1}async function z(){await y?.value?.forEach(s=>h.value?$(s):G(s))}function J(){return y?.value?.every(s=>s.checked===!0)}return(s,o)=>{const c=F("motion-slide-right"),k=F("motion-slide-left");return a(),n(u,null,[e("section",null,[de,l((a(),n("form",ue,[e("div",pe,[he,e("label",_e,[l(e("select",{class:"form-select block w-full py-1","onUpdate:modelValue":o[0]||(o[0]=t=>b.value=t)},[me,(a(!0),n(u,null,_(i(P),t=>(a(),n("option",{key:t.uid,value:t.uid},r(t.name),9,ye))),128))],512),[[g,b.value]])]),l(e("button",{type:"button",onClick:o[1]||(o[1]=A(t=>O(),["prevent"])),class:"border border-sky-800 bg-sky-800 text-white rounded-sm px-2 py-1 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Apply Template ",512),[[T,re(ce.CREATE,ie.WORKSHEET)]])])])),[[c]])]),fe,ge,be,e("div",xe,[l((a(),n("form",ke,[e("div",ve,[e("label",we,[Ae,l(e("select",{name:"analyses_uids","onUpdate:modelValue":o[2]||(o[2]=t=>p.sampleTypeUid=t),class:"form-input mt-1 block w-full py-1"},[(a(!0),n(u,null,_(i(C).sampleTypes,t=>(a(),n("option",{key:t.uid,value:t.uid},r(t.name),9,Te))),128))],512),[[g,p.sampleTypeUid]])]),e("label",Se,[Ce,l(e("select",{name:"analyses_uids","onUpdate:modelValue":o[3]||(o[3]=t=>p.analysisUid=t),class:"form-input mt-1 block w-full py-1"},[(a(!0),n(u,null,_(i(m).analysesServices,t=>(a(),n("option",{key:t.uid,value:t.uid},r(t.name),9,Ue))),128))],512),[[g,p.analysisUid]])]),e("div",Ee,[l(w(i(S),{onClick:o[4]||(o[4]=A(t=>q(),["prevent"])),color:"sky-800",class:"p-1"},{default:L(()=>[N("Apply Filters")]),_:1},512),[[T,!0]])])])])),[[k]])]),e("div",Be,[e("div",We,[i(d).fetchingAnalysisResults?(a(),n("div",Ve,[w(i(I),{message:"Fetching analytes ..."})])):(a(),n("table",De,[e("thead",null,[e("tr",null,[e("th",Me,[l(e("input",{type:"checkbox",onChange:z,"onUpdate:modelValue":o[5]||(o[5]=t=>h.value=t)},null,544),[[R,h.value]])]),je,Fe,Le,Ne,Re,Ie])]),l((a(),n("tbody",Pe,[(a(!0),n(u,null,_(i(y),t=>(a(),n("tr",{key:t?.uid},[e("td",null,[l(e("input",{type:"checkbox","onUpdate:modelValue":V=>t.checked=V,onChange:V=>Q()},null,40,Oe),[[R,t.checked]])]),Ye,e("td",qe,[e("div",He,r(t?.sample?.sampleId),1)]),e("td",Ke,[e("div",Qe,r(t?.analysis?.name),1)]),e("td",$e,[e("div",Ge,r(t?.sample?.createdAt),1)]),e("td",ze,[e("div",Je,r(t?.sample?.dateReceived),1)]),e("td",Xe,[e("div",Ze,r(t?.sample?.status),1)])]))),128))])),[[c]])]))])]),e("section",et,[e("form",tt,[e("div",st,[ot,e("label",at,[l(e("select",{class:"form-select block w-full py-1","onUpdate:modelValue":o[6]||(o[6]=t=>x.value=t)},[nt,(a(!0),n(u,null,_(i(Y),t=>(a(),n("option",{key:t.uid,value:t.uid},r(t.name),9,lt))),128))],512),[[g,x.value]])])])]),l(w(i(S),{onClick:A(H,["prevent"]),color:"orange-600"},{default:L(()=>[N("Assign Analyses")]),_:1},8,["onClick"]),[[T,!0]])])],64)}}}),ht=le(rt,[["__file","/home/aurthurm/Development/felicity-lims/webapp/views/worksheet/_id/WorkSheetAssign.vue"]]);export{ht as default};
