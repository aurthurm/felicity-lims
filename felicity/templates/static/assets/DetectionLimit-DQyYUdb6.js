const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5OmCQ1r.js","assets/index-DNLAO2yS.css"])))=>i.map(i=>d[i]);
import{a0 as F,f as O,t as j,a7 as w,g as B,a5 as P,h as S,a1 as R,a6 as q,_ as K,r as C,c as a,o as i,a as I,A as e,C as J,E as W,N as g,P as Y,J as x,K as L,L as l,F as y,a9 as N,a2 as T,D as z}from"./index-C5OmCQ1r.js";import{K as G,L as H}from"./analyses.mutations-COGCX6rV.js";import{u as Q}from"./analysis-CQxuKvI2.js";import{u as X}from"./setup-BMS7aX7t.js";const Z=F({__name:"DetectionLimit",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(D,{expose:t}){t();const k=R(()=>q(()=>import("./index-C5OmCQ1r.js").then(n=>n.de),__vite__mapDeps([0,1]))),r=Q(),u=X(),{withClientMutation:c}=O(),m=D,{analysis:f}=j(m);let o=w(!1),p=w(""),d=B({});const b=w(!0);P(()=>m.analysisUid,(n,s)=>{}),u.fetchInstruments();const _=S(()=>u.getInstruments);u.fetchMethods();const v=S(()=>u.getMethods);function A(){const n={...d,analysisUid:f?.value?.uid};c(G,{payload:n},"createAnalysisDetectionLimit").then(s=>r.addAnalysisDetectionLimit(s))}function M(){const n={...d};delete n.uid,delete n.__typename,c(H,{uid:d.uid,payload:n},"updateAnalysisDetectionLimit").then(s=>r.updateAnalysisDetectionLimit(s))}function E(n,s={}){b.value=n,o.value=!0,p.value=(n?"CREATE":"EDIT")+" ANALYSIS DETECTION_LIMIT",n?Object.assign(d,{lowerLimit:null,upperLimit:null,instrumentUid:null,methodUid:null}):Object.assign(d,{...s})}function V(){b.value===!0&&A(),b.value===!1&&M(),o.value=!1}const U={modal:k,analysisStore:r,setupStore:u,withClientMutation:c,props:m,analysis:f,get showModal(){return o},set showModal(n){o=n},get formTitle(){return p},set formTitle(n){p=n},get form(){return d},set form(n){d=n},formAction:b,instruments:_,methods:v,addAnalysisDetectionLimit:A,editAnalysisDetectionLimit:M,FormManager:E,saveForm:V,instrumentName:n=>{const s=_?.value?.findIndex(h=>h.uid===n);return _?.value[s]?.name||"unknown"},methodName:n=>{const s=v?.value?.findIndex(h=>h.uid===n);return v?.value[s]?.name||"unknown"}};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),$={class:"overflow-x-auto mt-4"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},te={class:"min-w-full"},oe={class:"bg-card"},re={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ne={class:"text-sm text-foreground"},se={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ie={class:"text-sm text-foreground"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},le={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ue={class:"text-sm text-foreground"},me={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},ce=["onClick"],fe={class:"text-lg font-bold text-foreground"},pe={action:"post",class:"p-6 space-y-6"},be={class:"space-y-4"},ge={class:"grid grid-cols-4 gap-4"},xe={class:"space-y-2"},ye=["value"],_e={class:"space-y-2"},ve=["value"],he={class:"space-y-2"},we={class:"space-y-2"},Le={class:"pt-4"};function De(D,t,k,r,u,c){const m=C("fel-button"),f=C("fel-heading");return i(),a(x,null,[I(f,{title:"Detection Limits"},{default:g(()=>[I(m,{onClick:t[0]||(t[0]=o=>r.FormManager(!0))},{default:g(()=>[...t[7]||(t[7]=[Y("Add Detection Limit",-1)])]),_:1})]),_:1}),e("div",$,[e("div",ee,[e("table",te,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Lower Limit"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Upper Limit"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",oe,[(i(!0),a(x,null,L(r.analysis?.detectionLimits,o=>(i(),a("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",re,[e("div",ne,l(r.instrumentName(o?.instrumentUid)),1)]),e("td",se,[e("div",ie,l(r.methodName(o?.methodUid)),1)]),e("td",de,[e("div",ae,l(o.lowerLimit),1)]),e("td",le,[e("div",ue,l(o.upperLimit),1)]),e("td",me,[e("button",{onClick:p=>r.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ce)])]))),128))])])])]),r.showModal?(i(),J(r.modal,{key:0,onClose:t[6]||(t[6]=o=>r.showModal=!1),contentWidth:"w-2/4"},{header:g(()=>[e("h3",fe,l(r.formTitle),1)]),body:g(()=>[e("form",pe,[e("div",be,[e("div",ge,[e("label",xe,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),y(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r.form.instrumentUid=o)},[t[9]||(t[9]=e("option",{value:""},"Select Instrument",-1)),(i(!0),a(x,null,L(r.instruments,o=>(i(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,ye))),128))],512),[[N,r.form.instrumentUid]])]),e("label",_e,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),y(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r.form.methodUid=o)},[t[11]||(t[11]=e("option",{value:""},"Select Method",-1)),(i(!0),a(x,null,L(r.methods,o=>(i(),a("option",{key:o?.uid,value:o.uid},l(o?.name),9,ve))),128))],512),[[N,r.form.methodUid]])]),e("label",he,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Lower Limit",-1)),y(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r.form.lowerLimit=o),placeholder:"Value ..."},null,512),[[T,r.form.lowerLimit]])]),e("label",we,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Upper Limit",-1)),y(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[4]||(t[4]=o=>r.form.upperLimit=o),placeholder:"Value ..."},null,512),[[T,r.form.upperLimit]])])])]),e("div",Le,[e("button",{type:"button",onClick:t[5]||(t[5]=z(o=>r.saveForm(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):W("",!0)],64)}const Ie=K(Z,[["render",De],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/DetectionLimit.vue"]]);export{Ie as default};
