import{S as w,a6 as k,V as C,h as V,a7 as D,i as N,r as E,o as a,c as r,N as e,F as g,E as h,K as y,H as n,C as p,a2 as q,X as I,D as U,a as A,A as M,_ as T}from"./index-54016222.js";import{u as B}from"./samples-7242f2e2.js";import{u as P}from"./analysis-67f4ba72.js";import"./analyses.mutations-fdbdb917.js";import"./storage.mutations-f3ea605c.js";const F={class:"space-y-6"},O={class:"bg-background rounded-lg shadow-sm p-6 space-y-6"},$={key:0,class:"border-t border-border"},H={class:"text-lg font-semibold text-foreground"},J={class:"grid grid-cols-12 gap-6"},K={class:"col-span-6 grid grid-cols-2 gap-6"},L={class:"space-y-4"},X={class:"flex items-center justify-between"},z={class:"text-muted-foreground"},G={class:"flex items-center justify-between"},Q={class:"text-muted-foreground"},W={class:"flex items-center justify-between"},Y={class:"text-muted-foreground"},Z={class:"space-y-4"},ee={class:"flex items-center justify-between"},se={class:"text-muted-foreground"},te={class:"flex items-center justify-between"},oe={class:"text-muted-foreground"},ne={class:"col-span-5"},ie={class:"grid grid-cols-2 gap-6"},ae={class:"space-y-2"},re={class:"space-y-2"},de=["onUpdate:modelValue"],ce=["value"],le={class:"space-y-2"},ue={class:"space-y-2"},pe=["onUpdate:modelValue"],fe={class:"col-span-1 flex items-center justify-center"},me=["onClick"],_e={class:"flex justify-end"},ge=w({__name:"RejectSamples",setup(he){k();const l=C(),f=P(),{rejectSamples:v}=B(),m=l.options.history.state,d=V({rejections:[]}),x=JSON.parse(window.history.state.samples);let _=[];for(let o of x)o.reasons=[],o.other=void 0,_.push(o);d.rejections=_,D(()=>f.fetchRejectionReasons());const b=(o,s)=>{let c=[];return o?.forEach(t=>c.push(t.name)),s?.forEach(t=>c.push(t.name)),c.join(", ")},j=o=>{d.rejections?.forEach(s=>{s.reasons=o.reasons,s.other=o.other})},R=N(()=>f.getRejectionReasons),S=async()=>{const o=[];d.rejections?.forEach(s=>{o.push({uid:s?.uid,reasons:s?.reasons,other:s?.other})}),await v(o).then(s=>{o.length==1&&m.back?.toString().includes("patient")?l.push({path:m.back.toString()}):l.push({name:"samples-listing"})})};return(o,s)=>{const c=E("font-awesome-icon");return a(),r("div",F,[s[9]||(s[9]=e("h4",{class:"text-xl font-semibold text-foreground"},"Sample Rejection",-1)),e("div",O,[(a(!0),r(g,null,h(d.rejections,(t,u)=>(a(),r("div",{key:u,class:"space-y-6"},[u>0?(a(),r("div",$)):y("",!0),e("h2",H,n(t?.sampleId)+" â†’ "+n(t?.status),1),e("div",J,[e("div",K,[e("div",L,[e("div",X,[s[1]||(s[1]=e("span",{class:"font-medium text-foreground"},"Sample Type",-1)),e("span",z,n(t?.sampleType?.name),1)]),e("div",G,[s[2]||(s[2]=e("span",{class:"font-medium text-foreground"},"Client Sample ID",-1)),e("span",Q,n(t?.analysisRequest?.clientRequestId),1)]),e("div",W,[s[3]||(s[3]=e("span",{class:"font-medium text-foreground"},"Analyses",-1)),e("span",Y,n(b(t?.profiles,t?.analyses)),1)])]),e("div",Z,[e("div",ee,[s[4]||(s[4]=e("span",{class:"font-medium text-foreground"},"Patient",-1)),e("span",se,n(t?.analysisRequest?.patient?.firstName)+" "+n(t?.analysisRequest?.patient?.lastName),1)]),e("div",te,[s[5]||(s[5]=e("span",{class:"font-medium text-foreground"},"Client Patient ID",-1)),e("span",oe,n(t?.analysisRequest?.patient?.clientPatientId),1)])])]),e("div",ne,[e("div",ie,[e("div",ae,[e("label",re,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-foreground"},"Rejection Reasons",-1)),p(e("select",{name:"reasons",multiple:"","onUpdate:modelValue":i=>t.reasons=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[s[6]||(s[6]=e("option",{value:""},null,-1)),(a(!0),r(g,null,h(R.value,i=>(a(),r("option",{key:i.uid,value:i.uid},n(i.reason),9,ce))),128))],8,de),[[q,t.reasons]])])]),e("div",le,[e("label",ue,[s[8]||(s[8]=e("span",{class:"text-sm font-medium text-foreground"},"Other",-1)),p(e("input",{type:"text","onUpdate:modelValue":i=>t.other=i,class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,pe),[[I,t.other]])])])])]),e("div",fe,[p(e("button",{onClick:i=>j(t),class:"text-primary hover:text-primary/80 transition-colors"},[A(c,{icon:"level-down-alt"})],8,me),[[U,u===0]])])])]))),128))]),e("div",_e,[d.rejections?.length>0?(a(),r("button",{key:0,onClick:s[0]||(s[0]=M(t=>S(),["prevent"])),class:"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-destructive/50"}," Reject Samples ")):y("",!0)])])}}}),Re=T(ge,[["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/sample/RejectSamples.vue"]]);export{Re as default};
