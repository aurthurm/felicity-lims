import{V as W,f as $,a1 as l,h as V,i as z,a8 as J,r as h,o as _,c as K,O as t,a as b,M as g,N as Q,a6 as a,L as y,z as X,J as Z,C as ee,D as i,Y as d,ae as oe,F as te,$ as D,a0 as S,af as M,_ as se}from"./index-74595aff.js";import{j as ae,a4 as ne,a5 as le,c as re,a6 as ie,a7 as de,a8 as ue,a9 as fe}from"./microbiology.mutations-05669adc.js";const me={class:"space-y-6"},ce={class:"rounded-lg shadow-sm bg-card p-6"},pe={class:"text-xl font-semibold text-foreground"},be={class:"space-y-4"},ge={class:"grid grid-cols-2 gap-4"},ye={class:"block"},ve={class:"block"},xe={class:"space-y-4"},he={class:"grid grid-cols-3 gap-4"},ke={class:"block"},Be={class:"block"},Ae={class:"block"},Ce={class:"block"},we={class:"block"},Te={class:"block"},Ee={class:"block"},Ue={class:"block"},Ve={class:"block"},_e={class:"block"},De={class:"block"},Se=W({__name:"AbxBreakpoint",setup(Me){const O=D(()=>S(()=>import("./FelDataTable-b273d3d1.js"),["assets/FelDataTable-b273d3d1.js","assets/index-74595aff.js","assets/index-8412b2a5.css"])),k=D(()=>S(()=>import("./vue-multiselect.esm-b1f61583.js"),["assets/vue-multiselect.esm-b1f61583.js","assets/index-74595aff.js","assets/index-8412b2a5.css"])),{withClientMutation:B,withClientQuery:m}=$();let c=l(!1),A=l(""),o=V({});const v=l(!0),C=l(!1),u=l([]),w=l([]),I=l([]),P=l([]),G=l([]),T=l([]);let r=V({first:50,after:"",text:"",sortBy:["-guideline_year___year"],filterAction:!1});const E=l(0);let U=l({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const N=z(()=>u?.value?.length+" of "+E.value+" antibiotics"),R=l([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guidelineYear.code",sortable:!1,sortBy:"asc",hidden:!1},{name:"Test Method",value:"testMethod.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Potency",value:"potency",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCode",value:"organismCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"OrganismCodeType",value:"organismCodeType",sortable:!1,sortBy:"asc",hidden:!1},{name:"BreakpointType",value:"breakpointType.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Host",value:"host.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"SiteOfInfection",value:"siteOfInfection.name",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!0},{name:"ReferenceSequence",value:"referenceSequence",sortable:!1,sortBy:"asc",hidden:!0},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"R",value:"r",sortable:!1,sortBy:"asc",hidden:!1},{name:"I",value:"i",sortable:!1,sortBy:"asc",hidden:!1},{name:"SDD",value:"sdd",sortable:!1,sortBy:"asc",hidden:!1},{name:"S",value:"s",sortable:!1,sortBy:"asc",hidden:!1},{name:"EcvEcoff",value:"ecvEcoff",sortable:!1,sortBy:"asc",hidden:!0},{name:"ecvEcoffTentative",value:"EcvEcoffTentative",sortable:!1,sortBy:"asc",hidden:!0}]);function x(s){m(de,{text:s.text,pageSize:s.first,sortBy:s.sortBy},void 0).then(e=>{const f=e.abxBreakpointAll,p=f.items;s.filterAction?(u.value=[],u.value=p):u.value=M(u.value,p,"uid"),E.value=f?.totalCount,U.value=f?.pageInfo}).finally(()=>{C.value=!1})}J(()=>{m(ae,{},"abxGuidelinesAll").then(s=>{s&&(w.value=s)}),x(r),m(ne,{},"abxHostAll").then(s=>{s&&(I.value=s)}),m(le,{},"abxSiteOfInfectionAll").then(s=>{s&&(G.value=s)}),m(re,{},"abxTestMethodAll").then(s=>{s&&(T.value=s)}),m(ie,{},"abxBreakpointTypeAll").then(s=>{s&&(P.value=s)})});function F(s){r.first=100,r.after="",r.text=s.filterText,r.filterAction=!0,x(r)}function q(s){r.first=s.fetchCount,r.after=U?.value?.endCursor,r.text=s.filterText,r.filterAction=!1,x(r)}const j=()=>Object.assign(o,{});function H(s,e={}){v.value=s,c.value=!0,A.value=(s?"Create":"Edit")+" Breakpoint",s?Object.assign(o,{}):Object.assign(o,{...e})}function L(){const s={guidelineUid:o.guidelineUid,year:o.year,testMethod:o.testMethod,potency:o.potency,organismCode:o.organismCode,organismCodeType:o.organismCodeType,breakpointTypeUid:o.breakpointTypeUid,hostUid:o.hostUid,siteOfInfectionUid:o.siteOfInfectionUid,referenceTable:o.referenceTable,referenceSequence:o.referenceSequence,whonetAbxCode:o.whonetAbxCode,comments:o.comments,r:o.r,i:o.i,sdd:o.sdd,s:o.s,ecvEcoff:o.ecvEcoff,ecvEcoffTentative:o.ecvEcoffTentative};v.value===!0&&B(ue,{payload:s},"createAbxBreakpoint").then(e=>{e&&(u.value=M(u.value,[e],"uid"))}),v.value===!1&&B(fe,{uid:o.uid,payload:s},"updateAbxBreakpoint").then(e=>{if(e){const f=u.value.findIndex(p=>p.uid==e.uid);u.value[f]=e}}),c.value=!1}return(s,e)=>{const f=h("fel-button"),p=h("fel-heading"),Y=h("fel-modal");return _(),K(te,null,[t("div",me,[b(p,{title:"Antibiotic Breakpoints"},{default:g(()=>[b(f,{onClick:e[0]||(e[0]=n=>H(!0))},{default:g(()=>e[15]||(e[15]=[Q("Add Breakpoint")])),_:1})]),_:1}),t("div",ce,[b(a(O),{columns:R.value,data:u.value,toggleColumns:!0,loading:C.value,paginable:!0,pageMeta:{fetchCount:a(r).first,hasNextPage:!0,countNone:N.value},searchable:!0,filterable:!1,onOnSearchKeyUp:F,onOnSearchFocus:j,onOnPaginate:q,selectable:!1},{footer:g(()=>e[16]||(e[16]=[])),_:1},8,["columns","data","loading","pageMeta"])])]),y(" Breakpoint Form Modal "),a(c)?(_(),X(Y,{key:0,onClose:e[14]||(e[14]=n=>oe(c)?c.value=!1:c=!1),"content-width":"w-1/2"},{header:g(()=>[t("h3",pe,Z(a(A)),1)]),body:g(()=>[t("form",{onSubmit:ee(L,["prevent"]),class:"space-y-6 p-4"},[y(" Basic Information "),t("div",be,[e[19]||(e[19]=t("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),t("div",ge,[t("label",ye,[e[17]||(e[17]=t("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),b(a(k),{modelValue:a(o).guidelines,"onUpdate:modelValue":e[1]||(e[1]=n=>a(o).guidelines=n),options:w.value,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),t("label",ve,[e[18]||(e[18]=t("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),i(t("input",{type:"number",class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[2]||(e[2]=n=>a(o).year=n),placeholder:"Year"},null,512),[[d,a(o).year]])])])]),y(" Coding Systems "),t("div",xe,[e[31]||(e[31]=t("h4",{class:"text-lg font-semibold text-foreground"},"Coding Systems",-1)),t("div",he,[t("label",ke,[e[20]||(e[20]=t("span",{class:"text-sm font-medium text-foreground"},"Test Method",-1)),b(a(k),{modelValue:a(o).testMethod,"onUpdate:modelValue":e[3]||(e[3]=n=>a(o).testMethod=n),options:T.value,searchable:!0,label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),t("label",Be,[e[21]||(e[21]=t("span",{class:"text-sm font-medium text-foreground"},"Potency",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[4]||(e[4]=n=>a(o).potency=n),placeholder:"Potency"},null,512),[[d,a(o).potency]])]),t("label",Ae,[e[22]||(e[22]=t("span",{class:"text-sm font-medium text-foreground"},"Organism Code",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[5]||(e[5]=n=>a(o).organismCode=n),placeholder:"Organism Code"},null,512),[[d,a(o).organismCode]])]),t("label",Ce,[e[23]||(e[23]=t("span",{class:"text-sm font-medium text-foreground"},"Organism Code Type",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[6]||(e[6]=n=>a(o).organismCodeType=n),placeholder:"Organism Code Type"},null,512),[[d,a(o).organismCodeType]])]),t("label",we,[e[24]||(e[24]=t("span",{class:"text-sm font-medium text-foreground"},"Whonet AbxCode",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[7]||(e[7]=n=>a(o).whonetAbxCode=n),placeholder:"Whonet AbxCode"},null,512),[[d,a(o).whonetAbxCode]])]),t("label",Te,[e[25]||(e[25]=t("span",{class:"text-sm font-medium text-foreground"},"R",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[8]||(e[8]=n=>a(o).r=n),placeholder:"R"},null,512),[[d,a(o).r]])]),t("label",Ee,[e[26]||(e[26]=t("span",{class:"text-sm font-medium text-foreground"},"I",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[9]||(e[9]=n=>a(o).i=n),placeholder:"I"},null,512),[[d,a(o).i]])]),t("label",Ue,[e[27]||(e[27]=t("span",{class:"text-sm font-medium text-foreground"},"SDD",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[10]||(e[10]=n=>a(o).sdd=n),placeholder:"SDD"},null,512),[[d,a(o).sdd]])]),t("label",Ve,[e[28]||(e[28]=t("span",{class:"text-sm font-medium text-foreground"},"S",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[11]||(e[11]=n=>a(o).s=n),placeholder:"S"},null,512),[[d,a(o).s]])]),t("label",_e,[e[29]||(e[29]=t("span",{class:"text-sm font-medium text-foreground"},"EcvEcoff",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[12]||(e[12]=n=>a(o).ecvEcoff=n),placeholder:"EcvEcoff"},null,512),[[d,a(o).ecvEcoff]])]),t("label",De,[e[30]||(e[30]=t("span",{class:"text-sm font-medium text-foreground"},"EcvEcoff Tentative",-1)),i(t("input",{class:"mt-1 block w-full rounded-md border-border shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50","onUpdate:modelValue":e[13]||(e[13]=n=>a(o).ecvEcoffTentative=n),placeholder:"EcvEcoff Tentative"},null,512),[[d,a(o).ecvEcoffTentative]])])])]),e[32]||(e[32]=t("hr",{class:"border-border"},null,-1)),e[33]||(e[33]=t("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Breakpoint ",-1))],32)]),_:1})):y("v-if",!0)],64)}}});const Pe=se(Se,[["__scopeId","data-v-98440155"],["__file","/home/aurthurm/Documents/Development/felicity/felicity-lims/webapp/views/admin/microbiology/breakpoints/AbxBreakpoint.vue"]]);export{Pe as default};
