const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-multiselect.esm-C31Sh9AO.js","assets/index-Daoe3XS9.js","assets/index-C7Rn7ES8.css"])))=>i.map(i=>d[i]);
import{a0 as L,f as R,t as T,a5 as I,h as D,a7 as F,a1 as z,a6 as G,_ as H,c as J,o as Q,A as o,F as b,a2 as y,L as U,a as j,D as W}from"./index-Daoe3XS9.js";import{c as X,a as v,u as Y,b as g}from"./index.esm-BT7_X8h2.js";import{k as Z,l as $}from"./instrument.mutations-Bit4aQ8X.js";import{u as ee}from"./analysis-D7-3mDtD.js";import{u as se}from"./setup-B4brziEy.js";/* empty css                                                                 */const te=L({__name:"MethodForm",props:{method:Object,methodUid:String,analysis:Object,analysisUid:String},emits:["close"],setup(h,{expose:s,emit:x}){s();const t=z(()=>G(()=>import("./vue-multiselect.esm-C31Sh9AO.js"),__vite__mapDeps([0,1,2]))),c=ee(),a=se(),{withClientMutation:i}=R(),p=h,{method:n,analysis:m}=T(p),w=X({name:v().required("Method name is required"),keyword:v().required("Keyword is required"),description:v().nullable()}),{handleSubmit:k,errors:q,setValues:_}=Y({validationSchema:w,initialValues:{name:n?.value?.name??"",keyword:n?.value?.keyword??"",description:n?.value?.description??""}}),{value:C}=g("name"),{value:O}=g("keyword"),{value:B}=g("description");I(()=>p.analysisUid,(e,l)=>{}),I(()=>n?.value,e=>{_({name:e?.name??"",keyword:e?.keyword??"",description:e?.description??""})});const f=x,M=D(()=>c.getAnalysesServicesSimple);let r=F([]);m?.value?.uid!==void 0?r.value.push(m.value):M.value?.forEach(e=>{e?.methods?.some(l=>l.uid==n?.value?.uid)&&r.value.push(e)}),a.fetchInstruments();const N=D(()=>a.getInstruments);let u=F([]);const S=()=>{const e=[];return n?.value?.instruments?.forEach(l=>{m?.value?.instruments?.some(K=>K?.uid===l?.uid)&&e.push(l)}),e};u.value=S(),n?.value?.uid!==void 0&&n?.value?.instruments?.forEach(e=>u.value.push(e));function V(e){const l={name:e.name,keyword:e.keyword,description:e.description,instruments:u.value?.map(d=>d.uid),analyses:r.value?.map(d=>d.uid)};i(Z,{payload:l},"createMethod").then(d=>{f("close"),a.addMethod(d)})}function A(e){const l={name:e.name,keyword:e.keyword,description:e.description,instruments:u.value?.map(d=>d.uid),analyses:r.value?.map(d=>d.uid)};i($,{uid:n?.value?.uid,payload:l},"updateMethod").then(d=>{f("close"),a.updateMethod(d)})}const P=k(e=>{const l={name:e.name,keyword:e.keyword,description:e.description};n?.value?.uid||V(l),n?.value?.uid&&A(l)}),E={VueMultiselect:t,analysisStore:c,setupStore:a,withClientMutation:i,props:p,method:n,analysis:m,formSchema:w,handleSubmit:k,errors:q,setValues:_,name:C,keyword:O,description:B,emit:f,analyses:M,get selectedAnalyses(){return r},set selectedAnalyses(e){r=e},instruments:N,get selectedIntsruments(){return u},set selectedIntsruments(e){u=e},getAnalMethInstruments:S,addMethod:V,editMethod:A,saveForm:P};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),oe={class:"space-y-4"},ie={class:"grid grid-cols-3 gap-4"},ne={class:"col-span-2 space-y-2"},le={class:"text-sm text-destructive"},de={class:"space-y-2"},ae={class:"text-sm text-destructive"},re={class:"space-y-4"},ue={class:"space-y-2"},me={class:"space-y-2"},ce={class:"space-y-2"};function pe(h,s,x,t,c,a){return Q(),J("form",{onSubmit:s[5]||(s[5]=W((...i)=>t.saveForm&&t.saveForm(...i),["prevent"])),class:"space-y-4"},[o("div",oe,[o("div",ie,[o("div",ne,[s[6]||(s[6]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Method Name ",-1)),b(o("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>t.name=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter method name..."},null,512),[[y,t.name]]),o("div",le,U(t.errors.name),1)]),o("div",de,[s[7]||(s[7]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Keyword ",-1)),b(o("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>t.keyword=i),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter keyword..."},null,512),[[y,t.keyword]]),o("div",ae,U(t.errors.keyword),1)])]),o("div",re,[o("div",ue,[s[8]||(s[8]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Analyses ",-1)),j(t.VueMultiselect,{modelValue:t.selectedAnalyses,"onUpdate:modelValue":s[2]||(s[2]=i=>t.selectedAnalyses=i),options:t.analyses,multiple:!0,searchable:!0,label:"name","track-by":"uid",disabled:t.analysis?.uid!=null,class:"multiselect-blue"},null,8,["modelValue","options","disabled"])]),o("div",me,[s[9]||(s[9]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Instruments ",-1)),j(t.VueMultiselect,{modelValue:t.selectedIntsruments,"onUpdate:modelValue":s[3]||(s[3]=i=>t.selectedIntsruments=i),options:t.instruments,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-blue"},null,8,["modelValue","options"])]),o("div",ce,[s[10]||(s[10]=o("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Description ",-1)),b(o("textarea",{"onUpdate:modelValue":s[4]||(s[4]=i=>t.description=i),class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter description..."},null,512),[[y,t.description]])])])]),s[11]||(s[11]=o("div",{class:"flex justify-end"},[o("button",{type:"submit",class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ")],-1))],32)}const xe=H(te,[["render",pe],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/instruments/MethodForm.vue"]]);export{xe as default};
