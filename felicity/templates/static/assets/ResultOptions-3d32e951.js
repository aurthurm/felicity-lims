import{S as F,u as L,f as $,i as I,t as P,a0 as f,h as j,W as q,r as w,o as a,c as d,a as b,L as i,M as H,N as t,F as y,E as R,H as u,a5 as r,y as W,C as O,X as T,A as z,ac as X,K as Z,Z as k,$ as V,_ as G}from"./index-54016222.js";import{z as J,B as Q}from"./analyses.mutations-fdbdb917.js";import{u as Y}from"./analysis-67f4ba72.js";const ee={class:"overflow-x-auto mt-4"},te={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},oe={class:"min-w-full"},se={class:"bg-card"},ne={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},re={class:"text-sm text-foreground"},le={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ae={class:"text-sm text-foreground"},de={class:"px-4 py-2 whitespace-no-wrap border-b border-border"},ie={class:"flex flex-wrap gap-2"},ue={class:"px-4 py-2 whitespace-no-wrap text-right border-b border-border"},pe=["onClick"],ce={class:"text-lg font-bold text-foreground"},me={action:"post",class:"p-6 space-y-6"},fe={class:"space-y-4"},be={class:"grid grid-cols-3 gap-4"},ye={class:"space-y-2"},ge={class:"col-span-2 space-y-2"},xe={class:"space-y-2"},_e={class:"pt-4"},ve=F({__name:"ResultOptions",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(C){const S=k(()=>V(()=>import("./index-54016222.js").then(n=>n.cH),["assets/index-54016222.js","assets/index-a1ed10d8.css"])),E=k(()=>V(()=>import("./vue-multiselect.esm-03413bf7.js"),["assets/vue-multiselect.esm-03413bf7.js","assets/index-54016222.js","assets/index-a1ed10d8.css"])),g=Y(),A=L(),{withClientMutation:x}=$(),K=I(()=>A.getSampleTypes),_=C,{analysis:p}=P(_);let l=f(!1),v=f(""),o=j({});const c=f(!0);q(()=>_.analysisUid,(n,e)=>{});function U(){o.optionKey=+o.optionKey;const n={...o,analysisUid:p?.value?.uid,sampleTypes:o.sampleTypes?.map(e=>e.uid)};x(J,{payload:n},"createResultOption").then(e=>g.addResultOption(e))}function D(){const n={...o,analysisUid:p?.value?.uid,sampleTypes:o.sampleTypes?.map(e=>e.uid)};delete n.__typename,delete n.uid,x(Q,{uid:o.uid,payload:n},"updateResultOption").then(e=>g.updateResultOption(e))}function h(n,e={}){c.value=n,l.value=!0,v.value=(n?"CREATE":"EDIT")+" RESULT OPTION",n?Object.assign(o,{optionKey:null,value:null}):Object.assign(o,{...e})}function M(){c.value===!0&&U(),c.value===!1&&D(),l.value=!1}return(n,e)=>{const N=w("fel-button"),B=w("fel-heading");return a(),d(y,null,[b(B,{title:"Result Options"},{default:i(()=>[b(N,{onClick:e[0]||(e[0]=s=>h(!0))},{default:i(()=>e[6]||(e[6]=[H("Add Result Option")])),_:1})]),_:1}),t("div",ee,[t("div",te,[t("table",oe,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Key"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Result Value"),t("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Sample Types"),t("th",{class:"px-4 py-2 border-b border-border"})])],-1)),t("tbody",se,[(a(!0),d(y,null,R(r(p)?.resultOptions,s=>(a(),d("tr",{key:s?.uid,class:"hover:bg-accent/50"},[t("td",ne,[t("div",re,u(s?.optionKey),1)]),t("td",le,[t("div",ae,u(s?.value),1)]),t("td",de,[t("div",ie,[(a(!0),d(y,null,R(s?.sampleTypes,m=>(a(),d("span",{key:m.uid,class:"px-2 py-1 text-xs font-medium bg-accent text-accent-foreground rounded-md"},u(m.name),1))),128))])]),t("td",ue,[t("button",{onClick:m=>h(!1,s),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,pe)])]))),128))])])])]),r(l)?(a(),W(r(S),{key:0,onClose:e[5]||(e[5]=s=>X(l)?l.value=!1:l=!1),contentWidth:"w-2/4"},{header:i(()=>[t("h3",ce,u(r(v)),1)]),body:i(()=>[t("form",me,[t("div",fe,[t("div",be,[t("label",ye,[e[8]||(e[8]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Result Key",-1)),O(t("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[1]||(e[1]=s=>r(o).optionKey=s),placeholder:"Key ..."},null,512),[[T,r(o).optionKey]])]),t("label",ge,[e[9]||(e[9]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Result Value",-1)),O(t("input",{type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":e[2]||(e[2]=s=>r(o).value=s),placeholder:"Value ..."},null,512),[[T,r(o).value]])])]),t("div",xe,[e[10]||(e[10]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),b(r(E),{modelValue:r(o).sampleTypes,"onUpdate:modelValue":e[3]||(e[3]=s=>r(o).sampleTypes=s),options:K.value,multiple:!0,searchable:!0,label:"name","track-by":"uid",class:"multiselect-primary"},null,8,["modelValue","options"])])]),t("div",_e,[t("button",{type:"button",onClick:e[4]||(e[4]=z(s=>M(),["prevent"])),class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")])])]),_:1})):Z("",!0)],64)}}}),Oe=G(ve,[["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/services/ResultOptions.vue"]]);export{Oe as default};
