import{d as se,a8 as ae,ad as oe,u as ne,A as re,s as ie,x as k,U as d,B as w,V as le,o as c,g as m,h as e,j as s,D as de,E as R,G as S,y as v,i as r,l as b,L as ce,H as ue,t as o,C as l,a9 as y,F as j,z as pe,_ as me}from"./index-cd9e6ac8.js";import{u as ve}from"./samples-84482611.js";const ye={class:"flex justify-between"},he=e("h3",{class:"my-4 font-bold"},"Sample Detail",-1),xe=e("hr",null,null,-1),be={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},fe={key:0,class:"py-4 text-center"},ge={key:1,class:"grid grid-cols-12 gap-3"},_e={class:"col-span-12 px-3 sm:px-0"},we={class:"mb-2 flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Se=e("i",{class:"fa fa-star"},null,-1),Ce=[Se],ke={key:1},Re={type:"button",class:"bg-sky-800 text-white px-2 py-1 rounded-sm leading-none"},je={class:"ml-2"},Le={class:"absolute mt-4 py-0 bg-gray-300 rounded-sm shadow-xl z-20"},De=e("hr",null,null,-1),$e={class:"grid grid-cols-3 gap-x-4 mt-2"},Pe={class:"col-span-1"},Ue={class:"flex justify-between"},qe=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client Request ID:",-1),Be={class:"text-gray-600 text-sm md:text-md"},Ie={class:"flex justify-between"},Oe=e("span",{class:"text-gray-800 text-sm font-semibold"},"Client:",-1),Te={class:"text-gray-600 text-sm md:text-md"},Ve=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800 text-sm font-semibold"},"Cliet Contact:"),e("span",{class:"text-gray-600 text-sm md:text-md"},"Sister in Charge")],-1),Ne={class:"col-span-1"},ze={class:"flex justify-between"},Ae=e("span",{class:"text-gray-800 text-sm font-semibold"},"Sample Type:",-1),Ee={class:"text-gray-600 text-sm md:text-md"},Fe={class:"flex justify-between"},Je=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Sampled:",-1),We={class:"text-gray-600 text-sm md:text-md"},Ge={class:"flex justify-between"},He=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Registered:",-1),Me={class:"text-gray-600 text-sm md:text-md"},Ke={class:"flex justify-between"},Qe=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Received:",-1),Xe={class:"text-gray-600 text-sm md:text-md"},Ye={class:"col-span-1"},Ze={class:"flex justify-between"},et=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Submitted:",-1),tt={class:"text-gray-600 text-sm md:text-md"},st={class:"flex justify-between"},at=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Verified:",-1),ot={class:"text-gray-600 text-sm md:text-md"},nt={class:"flex justify-between"},rt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Published:",-1),it={class:"text-gray-600 text-sm md:text-md"},lt={class:"flex justify-between"},dt=e("span",{class:"text-gray-800 text-sm font-semibold"},"Date Printed:",-1),ct={class:"text-gray-600 text-sm md:text-md"},ut={class:"bg-blue-300 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},pt={class:"flex"},mt=e("div",{class:"mr-4 font-semibold"},"Storage:",-1),vt={class:"bg-orange-600 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},yt=se({__name:"index",setup(ht){const u=ae(),f=oe(),C=ne();u.resetSample();const{cancelSamples:L,reInstateSamples:D,receiveSamples:$,invalidateSamples:P,publishSamples:U,verifySamples:q,recoverSamples:B}=ve(),x=re({dropdownOpen:!1}),{sample:t,fetchingSample:I,repeatSample:g}=ie(u);u.fetchSampleByUid(f.params.sampleUid),k(()=>t?.value?.status,(n,a)=>{if(n)if(n!=="invalidated"){u.resetRepeatSample();return}else u.fetchRepeatSampleByParentId(f.params.sampleUid)}),k(()=>f.params.sampleUid,(n,a)=>{u.fetchSampleByUid(+n)});function O(n,a){let p=[];return n?.forEach(h=>p.push(h.name)),a?.forEach(h=>p.push(h.name)),p.join(", ")}const T=d(()=>!!["expected"].includes(t?.value?.status?.toLowerCase())),V=async()=>$([t?.value?.uid]),N=d(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),z=async()=>L([t?.value?.uid]),A=d(()=>!!["cancelled"].includes(t?.value?.status?.toLowerCase())),E=async()=>D([t?.value?.uid]),F=d(()=>t?.value?.status?.toLowerCase()==="awaiting"),J=async()=>q([t?.value?.uid]),W=d(()=>t?.value?.status?.toLowerCase()==="published"),_=d(()=>["approved"].includes(t?.value?.status?.toLowerCase())?"Publish":["published"].includes(t?.value?.status?.toLowerCase())?"Re publish":"Pre publish"),G=d(()=>{if(["awaiting","approved","published"].includes(t?.value?.status?.toLowerCase()))return!0;const n=u.analysisResults;return!!(t?.value?.status?.toLowerCase()==="received"&&n?.some(a=>["approved"].includes(a.status?.toLowerCase()??"")))}),H=async()=>{const n=_.value.startsWith("Pre")?"pre-publish":_.value.startsWith("Re")?"re-publish":"publish";U([{uid:t?.value?.uid,action:n}])},M=async()=>P([t?.value?.uid]).then(n=>{let a=n?.filter(p=>p.uid!==t?.value?.uid);a.length>0&&u.setRepeatSample(a[0])}),K=d(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),Q=async()=>C.push({name:"reject-samples",params:{samples:JSON.stringify([t?.value])}}),X=d(()=>!!["stored"].includes(t?.value?.status?.toLowerCase())),Y=async()=>B([t?.value?.uid]),Z=async n=>{C.push({path:"/bio-banking",state:{sample:JSON.stringify(n)}})};return(n,a)=>{const p=w("router-link"),h=w("font-awesome-icon"),ee=w("router-view"),te=le("motion-slide-right");return c(),m(j,null,[e("div",ye,[he,s(t)?.analysisRequest?.patient?.uid?(c(),de(p,{key:0,to:{name:"patient-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[S(" ... other samples ")]),_:1},8,["to"])):v("v-if",!0)]),xe,r((c(),m("div",be,[s(I)?(c(),m("div",fe,[b(ce,{message:"Fetching sample details ..."})])):(c(),m("div",ge,[v(" Summary Column "),e("div",_e,[e("div",we,[e("div",null,[s(t)?.priority<1?(c(),m("span",{key:0,class:ue(["font-small",{"text-orange-600":s(t)?.priority<1}])},Ce,2)):v("v-if",!0),S(" "+o(s(t)?.sampleId)+" ",1),v(` <button
                                                class="ml-4 text-xs inline-flex items-center justify-center w-6 h-6 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"
                                              >
                                                <i class="fa fa-pen"></i>
                                              </button> `),s(t)?.analysisRequest?.patient?.uid&&s(g)?.uid?(c(),m("span",ke,[b(h,{icon:"angle-double-right",class:"mx-2"}),b(p,{to:{name:"sample-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid,sampleUid:s(g)?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[S(o(s(g)?.sampleId),1)]),_:1},8,["to"])])):v("v-if",!0)]),e("span",null,o(O(s(t)?.profiles,s(t)?.analyses)),1),v(' <button type="button" class="bg-sky-800 text-white p-1rounded-smleading-none">{{ sample?.status }}</button> '),e("div",null,[e("div",{onClick:a[0]||(a[0]=i=>x.dropdownOpen=!x.dropdownOpen),class:"hidden md:block md:flex md:items-center ml-2 mt-2"},[e("button",Re,o(s(t)?.status),1),e("div",je,[b(h,{icon:"chevron-down",class:"text-gray-400"})])]),r(e("div",{onClick:a[1]||(a[1]=i=>x.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[l,x.dropdownOpen]]),r(e("div",Le,[r(e("div",{onClick:a[2]||(a[2]=i=>V()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Receive ",512),[[l,s(T)]]),r(e("div",{onClick:a[3]||(a[3]=i=>J()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Approve ",512),[[l,s(F)]]),r(e("div",{onClick:a[4]||(a[4]=i=>Q()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reject ",512),[[l,s(K)]]),r(e("div",{onClick:a[5]||(a[5]=i=>z()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Cancel ",512),[[l,s(N)]]),r(e("div",{onClick:a[6]||(a[6]=i=>E()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reinstate ",512),[[l,s(A)]]),r(e("div",{onClick:a[7]||(a[7]=i=>H()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"},o(s(_)),513),[[l,s(G)]]),r(e("div",{onClick:a[8]||(a[8]=i=>M()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Invalidate ",512),[[l,s(W)]]),r(e("div",{onClick:a[9]||(a[9]=i=>Y()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Recover ",512),[[l,s(X)]])],512),[[l,x.dropdownOpen]])])]),De,e("div",$e,[e("div",Pe,[e("div",Ue,[qe,e("span",Be,o(s(t)?.analysisRequest?.clientRequestId),1)]),e("div",Ie,[Oe,e("span",Te,o(s(t)?.analysisRequest?.client?.name),1)]),Ve]),e("div",Ne,[e("div",ze,[Ae,e("span",Ee,o(s(t)?.sampleType?.name),1)]),e("div",Fe,[Je,e("span",We,o(s(y)(s(t)?.dateCollected,!0)),1)]),e("div",Ge,[He,e("span",Me,o(s(y)(s(t)?.createdAt,!0)),1)]),e("div",Ke,[Qe,e("span",Xe,o(s(y)(s(t)?.dateReceived,!0)),1)])]),e("div",Ye,[e("div",Ze,[et,e("span",tt,o(s(y)(s(t)?.dateSubmitted,!0)),1)]),e("div",st,[at,e("span",ot,o(s(y)(s(t)?.dateVerified,!0)),1)]),e("div",nt,[rt,e("span",it,o(s(y)(s(t)?.datePublished,!0)),1)]),e("div",lt,[dt,e("span",ct,o(s(y)(s(t)?.datePrinted,!0)),1)])])])])]))])),[[te]]),r(e("div",ut,[e("div",pt,[mt,v("  "),e("div",{class:"hover:underline hover:cursor-pointer",onClick:a[10]||(a[10]=i=>Z(s(t)))},[e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.storageLocation?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.storageSection?.name)+" › ",1),e("span",null,o(s(t)?.storageContainer?.name)+" › ",1),e("span",null,o(s(t)?.storageSlot),1)])])],512),[[l,s(t)?.status==="stored"]]),r(e("div",vt,[v(' <h3 clas="font-bold text-gray-800 text-md">This sample was rejected because of the following reason(s):</h3> '),e("ul",null,[(c(!0),m(j,null,pe(s(t)?.rejectionReasons,i=>(c(),m("li",null,o(i.reason),1))),256))])],512),[[l,s(t)?.status==="rejected"]]),b(ee)],64)}}}),ft=me(yt,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/sample/_id/index.vue"]]);export{ft as default};
