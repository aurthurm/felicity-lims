const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BeakDataTable-CSqXb4Dl.js","assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css","assets/vue-multiselect.esm-CQe58Q7H.js"])))=>i.map(i=>d[i]);
import{a0 as ye,f as ve,a7 as n,h as b,g as xe,ad as he,ak as J,a1 as Q,a6 as H,_ as Ce,r as D,c as X,o as S,A as o,E as U,C as ke,a as c,N as y,P as Oe,D as Te,F as k,a2 as I,L as Y,a3 as we,J as Ae}from"./index-DCVfsbos.js";import{c as Be,a as Ge,u as _e,b as u}from"./index.esm-89YX2EbQ.js";import{o as De,p as Se,q as Ue,r as Ie,s as Me,t as Pe,u as Fe,v as Ne,a as Ve}from"./microbiology.mutations-CV_wjL4A.js";const Ee=ye({__name:"AbxOrganism",setup(Z,{expose:a}){a();const M=Q(()=>H(()=>import("./BeakDataTable-CSqXb4Dl.js"),__vite__mapDeps([0,1,2]))),s=Q(()=>H(()=>import("./vue-multiselect.esm-CQe58Q7H.js"),__vite__mapDeps([3,1,2]))),{withClientMutation:v,withClientQuery:m}=ve();let f=n(!1),p=n("");const g=n(!0),t=n(null),P=Be({name:Ge().trim().required("Name is required")}),{handleSubmit:F,resetForm:O,setValues:N,errors:j}=_e({validationSchema:P,initialValues:{name:"",whonetOrgCode:"",replacedBy:"",taxonomicStatus:"",common:"",organismType:"",anaerobe:!1,morphology:"",subkingdomCode:"",familyCode:"",genusGroup:"",genusCode:"",speciesGroup:"",serovarGroup:"",msfGrpClin:"",sctCode:"",sctText:"",gbifTaxonId:"",gbifDatasetId:"",gbifTaxonomicStatus:"",kingdom:null,phylum:null,class:null,order:null,family:null,genus:null,comments:""}}),{value:$}=u("name"),{value:ee}=u("whonetOrgCode"),{value:V}=u("kingdom"),{value:E}=u("phylum"),{value:K}=u("class"),{value:q}=u("order"),{value:L}=u("family"),{value:ae}=u("genus"),{value:se}=u("organismType"),{value:oe}=u("anaerobe"),R=n(!1),i=n([]),W=n([]),T=n([]),le=b(()=>T.value.filter(e=>e.kingdomUid===V.value?.uid)),w=n([]),te=b(()=>w.value.filter(e=>e.phylumUid===E.value?.uid)),A=n([]),ne=b(()=>A.value.filter(e=>e.classUid===K.value?.uid)),B=n([]),re=b(()=>B.value.filter(e=>e.orderUid===q.value?.uid)),G=n([]),ie=b(()=>G.value.filter(e=>e.familyUid===L.value?.uid));let r=xe({first:50,after:"",text:"",sortBy:["name"],filterAction:!1});const _=n(0);let x=n({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const de=b(()=>i?.value?.length+" of "+_.value+" organisms"),ue=n([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Name",value:"name",sortable:!1,sortBy:"asc",hidden:!1},{name:"whonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"replacedBy",value:"replacedBy",sortable:!1,sortBy:"asc",hidden:!0},{name:"taxonomicStatus",value:"taxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"common",value:"common",sortable:!1,sortBy:"asc",hidden:!0},{name:"organismType",value:"organismType",sortable:!1,sortBy:"asc",hidden:!1},{name:"anaerobe",value:"anaerobe",sortable:!1,sortBy:"asc",hidden:!1},{name:"morphology",value:"morphology",sortable:!1,sortBy:"asc",hidden:!0},{name:"subkingdomCode",value:"subkingdomCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"familyCode",value:"familyCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusGroup",value:"genusGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"genusCode",value:"genusCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"speciesGroup",value:"speciesGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"serovarGroup",value:"serovarGroup",sortable:!1,sortBy:"asc",hidden:!0},{name:"msfGrpClin",value:"msfGrpClin",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctCode",value:"sctCode",sortable:!1,sortBy:"asc",hidden:!0},{name:"sctText",value:"sctText",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonId",value:"gbifTaxonId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifDatasetId",value:"gbifDatasetId",sortable:!1,sortBy:"asc",hidden:!0},{name:"gbifTaxonomicStatus",value:"gbifTaxonomicStatus",sortable:!1,sortBy:"asc",hidden:!0},{name:"kingdom",value:"kingdom.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"phylum",value:"phylum.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"class",value:"class_.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"order",value:"order.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"family",value:"family.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"genus",value:"genus.name",sortable:!1,sortBy:"asc",hidden:!1}]);function h(e){m(Ve,{text:e.text,pageSize:e.first,sortBy:e.sortBy},void 0).then(l=>{const d=l.abxOrganismAll,C=d.items;e.filterAction?(i.value=[],i.value=C):i.value=J(i.value,C,"uid"),_.value=d?.totalCount,x.value=d?.pageInfo}).finally(()=>{R.value=!1})}he(()=>{h(r),m(De,{},"abxOrderAll").then(e=>{e&&(A.value=e)}),m(Se,{},"abxFamilyAll").then(e=>{e&&(B.value=e)}),m(Ue,{},"abxKingdomAll").then(e=>{e&&(W.value=e)}),m(Ie,{},"abxPhylumAll").then(e=>{e&&(T.value=e)}),m(Me,{},"abxGenusAll").then(e=>{e&&(G.value=e)}),m(Pe,{},"abxClassAll").then(e=>{e&&(w.value=e)})});function me(e){r.first=100,r.after="",r.text=e.filterText,r.filterAction=!0,h(r)}function ce(e){r.first=e.fetchCount,r.after=x?.value?.endCursor,r.text=e.filterText,r.filterAction=!1,h(r)}const fe=()=>O();function ge(e,l={}){g.value=e,f.value=!0,p.value=(e?"Create":"Edit")+" Organism",e?(t.value=null,O()):(t.value=l.uid??null,N({name:l.name??"",whonetOrgCode:l.whonetOrgCode??"",replacedBy:l.replacedBy??"",taxonomicStatus:l.taxonomicStatus??"",common:l.common??"",organismType:l.organismType??"",anaerobe:l.anaerobe??!1,morphology:l.morphology??"",subkingdomCode:l.subkingdomCode??"",familyCode:l.familyCode??"",genusGroup:l.genusGroup??"",genusCode:l.genusCode??"",speciesGroup:l.speciesGroup??"",serovarGroup:l.serovarGroup??"",msfGrpClin:l.msfGrpClin??"",sctCode:l.sctCode??"",sctText:l.sctText??"",gbifTaxonId:l.gbifTaxonId??"",gbifDatasetId:l.gbifDatasetId??"",gbifTaxonomicStatus:l.gbifTaxonomicStatus??"",kingdom:l.kingdom??null,phylum:l.phylum??null,class:l.class??l.class_??null,order:l.order??null,family:l.family??null,genus:l.genus??null,comments:l.comments??""}))}const be=F(e=>{const l={name:e.name,whonetOrgCode:e.whonetOrgCode,replacedBy:e.replacedBy,taxonomicStatus:e.taxonomicStatus,common:e.common,organismType:e.organismType,anaerobe:e.anaerobe,morphology:e.morphology,subkingdomCode:e.subkingdomCode,familyCode:e.familyCode,genusGroup:e.genusGroup,genusCode:e.genusCode,speciesGroup:e.speciesGroup,serovarGroup:e.serovarGroup,msfGrpClin:e.msfGrpClin,sctCode:e.sctCode,sctText:e.sctText,gbifTaxonId:e.gbifTaxonId,gbifDatasetId:e.gbifDatasetId,gbifTaxonomicStatus:e.gbifTaxonomicStatus,kingdomUid:e.kingdom?.uid,phylumUid:e.phylum?.uid,classUid:e.class?.uid,orderUid:e.order?.uid,familyUid:e.family?.uid,genusUid:e.genus?.uid,comments:e.comments};g.value===!0&&v(Fe,{payload:l},"createAbxOrganism").then(d=>{d&&(i.value=J(i.value,[d],"uid"))}),g.value===!1&&t.value&&v(Ne,{uid:t.value,payload:l},"updateAbxOrganism").then(d=>{if(d){const C=i.value.findIndex(pe=>pe.uid==d.uid);i.value[C]=d}}),f.value=!1}),z={DataTable:M,VueMultiselect:s,withClientMutation:v,withClientQuery:m,get showModal(){return f},set showModal(e){f=e},get formTitle(){return p},set formTitle(e){p=e},formAction:g,currentUid:t,organismSchema:P,handleSubmit:F,resetForm:O,setValues:N,errors:j,name:$,whonetOrgCode:ee,kingdom:V,phylum:E,classValue:K,order:q,family:L,genus:ae,organismType:se,anaerobe:oe,fetchingOrganisms:R,abxOrganisms:i,abxKingdoms:W,abxPhylums:T,phylums:le,abxClasss:w,classes:te,abxOrders:A,orders:ne,abxFamilys:B,familys:re,abxGenuss:G,genuses:ie,get abxParams(){return r},set abxParams(e){r=e},organismCount:_,get organismPageInfo(){return x},set organismPageInfo(e){x=e},countNone:de,tableColumns:ue,fetchOrganisms:h,searchOrganisms:me,showMoreOrganisms:ce,resetOrganism:fe,FormManager:ge,saveForm:be};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),Ke={class:"space-y-6"},qe={class:"bg-card p-6 shadow-sm rounded-lg"},Le={class:"text-xl font-semibold text-foreground"},Re={class:"grid grid-cols-2 gap-4"},We={class:"block"},ze={key:0,class:"text-sm text-destructive"},Je={class:"block"},Qe={class:"grid grid-cols-2 gap-4"},He={class:"block"},Xe={class:"block"},Ye={class:"grid grid-cols-2 gap-4"},Ze={class:"block"},je={class:"block"},$e={class:"grid grid-cols-2 gap-4"},ea={class:"block"},aa={class:"block"},sa={class:"grid grid-cols-2 gap-4"},oa={class:"block"},la={class:"block"};function ta(Z,a,M,s,v,m){const f=D("beak-button"),p=D("beak-heading"),g=D("beak-modal");return S(),X(Ae,null,[o("div",Ke,[c(p,{title:"Organisms"},{default:y(()=>[c(f,{onClick:a[0]||(a[0]=t=>s.FormManager(!0))},{default:y(()=>[...a[13]||(a[13]=[Oe("Add Organism",-1)])]),_:1})]),_:1}),o("div",qe,[c(s.DataTable,{columns:s.tableColumns,data:s.abxOrganisms,toggleColumns:!0,loading:s.fetchingOrganisms,paginable:!0,pageMeta:{fetchCount:s.abxParams.first,hasNextPage:!0,countNone:s.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:s.searchOrganisms,onOnSearchFocus:s.resetOrganism,onOnPaginate:s.showMoreOrganisms,selectable:!1},{footer:y(()=>[...a[14]||(a[14]=[])]),_:1},8,["columns","data","loading","pageMeta"])])]),U(" Organism Edit Form Modal "),s.showModal?(S(),ke(g,{key:0,onClose:a[12]||(a[12]=t=>s.showModal=!1),"content-width":"w-1/2"},{header:y(()=>[o("h3",Le,Y(s.formTitle),1)]),body:y(()=>[o("form",{onSubmit:a[11]||(a[11]=Te((...t)=>s.saveForm&&s.saveForm(...t),["prevent"])),class:"space-y-6 p-4"},[o("div",Re,[o("label",We,[a[15]||(a[15]=o("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":a[1]||(a[1]=t=>s.name=t),placeholder:"Name ..."},null,512),[[I,s.name]]),s.errors.name?(S(),X("p",ze,Y(s.errors.name),1)):U("v-if",!0)]),o("label",Je,[a[16]||(a[16]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":a[2]||(a[2]=t=>s.whonetOrgCode=t),placeholder:"Whonet Org Code ..."},null,512),[[I,s.whonetOrgCode]])])]),o("div",Qe,[o("label",He,[a[17]||(a[17]=o("span",{class:"text-sm font-medium text-foreground"},"Kingdom",-1)),c(s.VueMultiselect,{modelValue:s.kingdom,"onUpdate:modelValue":a[3]||(a[3]=t=>s.kingdom=t),options:s.abxKingdoms,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",Xe,[a[18]||(a[18]=o("span",{class:"text-sm font-medium text-foreground"},"Phylum",-1)),c(s.VueMultiselect,{modelValue:s.phylum,"onUpdate:modelValue":a[4]||(a[4]=t=>s.phylum=t),options:s.phylums,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",Ye,[o("label",Ze,[a[19]||(a[19]=o("span",{class:"text-sm font-medium text-foreground"},"Class",-1)),c(s.VueMultiselect,{modelValue:s.classValue,"onUpdate:modelValue":a[5]||(a[5]=t=>s.classValue=t),options:s.classes,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",je,[a[20]||(a[20]=o("span",{class:"text-sm font-medium text-foreground"},"Order",-1)),c(s.VueMultiselect,{modelValue:s.order,"onUpdate:modelValue":a[6]||(a[6]=t=>s.order=t),options:s.orders,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",$e,[o("label",ea,[a[21]||(a[21]=o("span",{class:"text-sm font-medium text-foreground"},"Family",-1)),c(s.VueMultiselect,{modelValue:s.family,"onUpdate:modelValue":a[7]||(a[7]=t=>s.family=t),options:s.familys,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])]),o("label",aa,[a[22]||(a[22]=o("span",{class:"text-sm font-medium text-foreground"},"Genus",-1)),c(s.VueMultiselect,{modelValue:s.genus,"onUpdate:modelValue":a[8]||(a[8]=t=>s.genus=t),options:s.genuses,searchable:!0,"close-on-select":!0,"show-labels":!1,"track-by":"uid",label:"name",class:"mt-1 multiselect-blue"},null,8,["modelValue","options"])])]),o("div",sa,[o("label",oa,[a[23]||(a[23]=o("span",{class:"text-sm font-medium text-foreground"},"Organism Type",-1)),k(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":a[9]||(a[9]=t=>s.organismType=t),placeholder:"Organism Type ..."},null,512),[[I,s.organismType]])]),o("label",la,[a[24]||(a[24]=o("span",{class:"text-sm font-medium text-foreground"},"Anaerobe",-1)),k(o("input",{type:"checkbox",class:"mt-1 h-4 w-4 rounded border-border text-primary focus:ring-primary","onUpdate:modelValue":a[10]||(a[10]=t=>s.anaerobe=t)},null,512),[[we,s.anaerobe]])])]),a[25]||(a[25]=o("hr",{class:"border-border"},null,-1)),a[26]||(a[26]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Organism ",-1))],32)]),_:1})):U("v-if",!0)],64)}const da=Ce(Ee,[["render",ta],["__scopeId","data-v-4d09f0a0"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/microbiology/organism/AbxOrganism.vue"]]);export{da as default};
