import{a0 as E,f as T,a7 as c,h as A,aN as V,aO as B,_ as L,r as b,c as v,o as p,A as e,E as D,C as U,a as k,N as f,P as j,J as w,K as q,L as g,D as O,F as P,a2 as I}from"./index-DCVfsbos.js";import{c as J,a as K,u as R,b as z}from"./index.esm-89YX2EbQ.js";import{u as G}from"./setup-DMRnqeyP.js";const H=E({__name:"Departments",setup(F,{expose:t}){t();const r=G(),{withClientMutation:o}=T();let l=c(!1),m=c("");const d=c(!0),a=c(null),u=J({name:K().required("Department name is required")}),{handleSubmit:s,errors:_,resetForm:h,setValues:y}=R({validationSchema:u,initialValues:{name:""}}),{value:M}=z("name");r.fetchDepartments({});const C=A(()=>r.getDepartments);function S(n,i){d.value=n,l.value=!0,m.value=(n?"CREATE":"EDIT")+" Department",n?(a.value=null,h({values:{name:""}})):(a.value=i?.uid??null,y({name:i?.name??""}))}const N=s(n=>{if(d.value===!0)o(V,{payload:{name:n.name}},"createDepartment").then(i=>r.addDepartment(i));else{if(!a.value)return;o(B,{uid:a.value,payload:{name:n.name}},"updateDepartment").then(i=>r.updateDepartment(i))}l.value=!1}),x={setupStore:r,withClientMutation:o,get showModal(){return l},set showModal(n){l=n},get formTitle(){return m},set formTitle(n){m=n},formAction:d,currentUid:a,formSchema:u,handleSubmit:s,errors:_,resetForm:h,setValues:y,name:M,departments:C,FormManager:S,saveForm:N};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Q={class:"space-y-6"},W={class:"shadow-sm rounded-lg bg-card p-6"},X={class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-border beak-table"},Z={class:"divide-y divide-border bg-background"},$={class:"whitespace-nowrap text-sm text-foreground"},ee={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},te=["onClick"],oe={class:"text-lg font-semibold text-foreground"},se={class:"space-y-2"},ne={class:"text-sm text-destructive"};function ae(F,t,r,o,l,m){const d=b("beak-button"),a=b("beak-heading"),u=b("beak-modal");return p(),v(w,null,[e("div",Q,[k(a,{title:"Departments"},{default:f(()=>[k(d,{onClick:t[0]||(t[0]=s=>o.FormManager(!0,null))},{default:f(()=>[...t[4]||(t[4]=[j("Add Department",-1)])]),_:1})]),_:1}),e("div",W,[e("div",X,[e("table",Y,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",Z,[(p(!0),v(w,null,q(o.departments,s=>(p(),v("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",$,g(s?.name),1),e("td",ee,[e("button",{onClick:_=>o.FormManager(!1,s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,te)])]))),128))])])])])]),D(" Location Edit Form Modal "),o.showModal?(p(),U(u,{key:0,onClose:t[3]||(t[3]=s=>o.showModal=!1)},{header:f(()=>[e("h3",oe,g(o.formTitle),1)]),body:f(()=>[e("form",{class:"space-y-6",onSubmit:t[2]||(t[2]=O((...s)=>o.saveForm&&o.saveForm(...s),["prevent"]))},[e("div",se,[t[6]||(t[6]=e("label",{class:"beak-label"}," Department Name ",-1)),P(e("input",{class:"beak-input","onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),placeholder:"Name ..."},null,512),[[I,o.name]]),e("div",ne,g(o.errors.name),1)]),t[7]||(t[7]=e("hr",{class:"border-border"},null,-1)),t[8]||(t[8]=e("button",{type:"submit",class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Form ",-1))],32)]),_:1})):D("v-if",!0)],64)}const de=L(H,[["render",ae],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/laboratory/Departments.vue"]]);export{de as default};
