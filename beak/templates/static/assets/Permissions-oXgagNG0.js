const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BeakSwitch-6dLMxGgA.js","assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css"])))=>i.map(i=>d[i]);
import{a0 as w,f as S,h as y,a1 as A,a6 as B,aG as G,_ as U,c as t,o as r,A as s,E as f,J as l,K as p,L as g,a as V}from"./index-DCVfsbos.js";import{u as D}from"./user-C8Z2RT46.js";const C=w({__name:"Permissions",setup(P,{expose:u}){u();const h=A(()=>B(()=>import("./BeakSwitch-6dLMxGgA.js"),__vite__mapDeps([0,1,2])));let e=D();const{withClientMutation:b}=S();e.fetchGroupsAndPermissions();const k=y(()=>e.getGroups);function n(o,d){return o?.permissions?.some(a=>a?.uid===d?.uid)??!1}const i=(o,d)=>o?.reduce(function(a,_){return(a[_[d]]=a[_[d]]||[]).push(_),a},{}),c=y(()=>Array.from(Object.entries(i(e.getPermissions,"target"))));function m(o,d){b(G,{groupUid:o?.uid,permissionUid:d?.uid},"updateGroupPermissions").then(a=>e.updateGroupsAndPermissions(a))}function v(o,d,a){a!==n(o,d)&&m(o,d)}const x={BeakSwitch:h,get userStore(){return e},set userStore(o){e=o},withClientMutation:b,groups:k,hasPermission:n,groupBy:i,permissions:c,updateGroupPerms:m,handlePermissionToggle:v};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),E={class:"space-y-6"},z={class:"bg-background rounded-lg shadow-sm overflow-hidden"},L={class:"relative"},N={class:"w-full beak-table"},O={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},T={class:"w-full beak-table"},j={class:"divide-y divide-border"},F={class:"bg-muted/50"},H={class:"px-4 py-3 font-medium text-sm text-foreground"},I={class:"px-4 py-2 text-sm text-muted-foreground"};function J(P,u,h,e,b,k){return r(),t("div",E,[s("div",z,[s("div",L,[f(" Fixed Header "),s("table",N,[s("thead",null,[s("tr",null,[u[0]||(u[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),t(l,null,p(e.groups,n=>(r(),t("th",{key:n.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},g(n.name),1))),128)),u[1]||(u[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),f(" Scrollable Body "),s("div",O,[s("table",T,[s("tbody",j,[(r(!0),t(l,null,p(e.permissions,n=>(r(),t(l,{key:n[0]},[s("tr",F,[s("td",H,g(n[0]),1),(r(!0),t(l,null,p(e.groups,i=>(r(),t("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:i.uid},[f(" {{ group.name }} ")]))),128))]),(r(!0),t(l,null,p(n[1],i=>(r(),t("tr",{key:i.uid},[s("td",I,g(i.action),1),(r(!0),t(l,null,p(e.groups,c=>(r(),t("td",{key:c.uid,class:"px-4 py-2"},[V(e.BeakSwitch,{"model-value":e.hasPermission(c,i),"onUpdate:modelValue":m=>e.handlePermissionToggle(c,i,m),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])])}const R=U(C,[["render",J],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/users/Permissions.vue"]]);export{R as default};
