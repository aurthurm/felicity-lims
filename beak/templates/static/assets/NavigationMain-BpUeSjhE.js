const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Logo-Vbc6BToV.js","assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css","assets/BeakBadge-7Eqi6SKY.js","assets/UserPreferences-CRUFNGd6.js","assets/setup-DMRnqeyP.js"])))=>i.map(i=>d[i]);
import{a0 as ue,af as ce,a4 as fe,a7 as g,a5 as me,ab as ge,h as v,f as pe,ag as be,ad as Q,ae as f,ah as W,a1 as P,a6 as A,ai as ve,_ as he,r as _,c as l,A as r,E as n,a as s,C as E,N as u,T as J,F as k,L as m,H as N,J as C,o as a,K as O,P as h,a9 as xe,D as ye}from"./index-DCVfsbos.js";import{u as we}from"./notification-X906LHt5.js";import{s as _e}from"./index-BaPnjn4Y.js";const ke=ue({__name:"NavigationMain",setup(X,{expose:o}){o();const T=P(()=>A(()=>import("./Logo-Vbc6BToV.js"),__vite__mapDeps([0,1,2]))),e=P(()=>A(()=>import("./BeakBadge-7Eqi6SKY.js"),__vite__mapDeps([3,1,2]))),I=P(()=>A(()=>import("./UserPreferences-CRUFNGd6.js"),__vite__mapDeps([4,1,2,5]))),{isFullscreen:U,toggle:y}=ce(),d=fe(),p=g(!1),x=g(!1);let b=null;me(()=>d.currentRoute.value,(i,c)=>{i.path!==c?.path&&(p.value=!1,x.value=!1)});const t=ge(),M=v(()=>t.auth?.activeLaboratory),Z=v(()=>t.auth?.laboratories),$=v(()=>{const i=t.auth?.user?.firstName||"",c=t.auth?.user?.lastName||"";return`${i} ${c}`.trim()||t.auth?.user?.email||"User"}),ee=v(()=>t.auth?.user?.email||""),oe=v(()=>{const i=t.auth?.user?.firstName||"",c=t.auth?.user?.lastName||"";return`${i.charAt(0)}${c.charAt(0)}`.toUpperCase()||t.auth?.user?.email?.charAt(0)?.toUpperCase()||"U"}),{errors:R,clearErrors:re,withClientMutation:B}=pe(),te=g(!1),ne=v(()=>{const i=new Map;for(const c of R.value){const w=typeof c=="string"?c:c?.error??String(c);i.set(w,(i.get(w)??0)+1)}return Array.from(i.entries()).map(([c,w])=>({message:c,count:w}))}),se=g(!1),D=we(),ae=i=>D.showNotifications(i),{loadPreferredTheme:F,megaMenu:j}=be(),V=g(!1);Q(()=>{F(),V.value=j.value});const ie=v(()=>[{id:"patients-compact",label:"Compact",icon:"bullseye",route:"/patients-compact",guard:f.PATIENTS_COMPACT},{id:"patients",label:"Patients",icon:"user-injured",route:"/patients",guard:f.PATIENTS},{id:"clients",label:"Clients",icon:"clinic-medical",route:"/clients",guard:f.CLIENTS},{id:"samples",label:"Samples",icon:"vial",route:"/samples",guard:f.SAMPLES},{id:"worksheets",label:"WorkSheets",icon:"grip-vertical",route:"/worksheets",guard:f.WORKSHEETS},{id:"quality-control",label:"QControl",icon:"anchor",route:"/quality-control",guard:f.QC_SAMPLES},{id:"notice-manager",label:"NoticeManager",icon:"bell",route:"/notice-manager",guard:f.NOTICE_MANAGER},{id:"bio-banking",label:"BioBanking",icon:"database",route:"/bio-banking",guard:f.BIO_BANKING},{id:"shipments",label:"Referrals",icon:"truck",route:"/shipments",guard:f.REFERRAL},{id:"inventory",label:"Inventory",icon:"fa-solid fa-boxes-stacked",route:"/inventory",guard:f.INVENTORY},{id:"schemes",label:"Projects",icon:"project-diagram",route:"/schemes",guard:f.SCHEMES},{id:"documents",label:"Documents",icon:"file",route:"/documents",guard:f.DOCUMENT}]),H=()=>{p.value=!1,x.value=!1},le=()=>{b&&(clearTimeout(b),b=null),p.value=!0},de=()=>{b=setTimeout(()=>{p.value=!1,b=null},150)},K=g(null),z=g(null);W(K,()=>{x.value=!1}),W(z,()=>{p.value=!1});const Y=i=>{i.key==="Escape"&&H()};Q(()=>{document.addEventListener("keydown",Y)});const q=g(!1),L=g(null),S=g(!1),G={Logo:T,BeakBadge:e,UserPreferences:I,isFullscreen:U,toggle:y,router:d,menuOpen:p,dropdownOpen:x,get megaMenuCloseTimeout(){return b},set megaMenuCloseTimeout(i){b=i},authStore:t,activeLaboratory:M,userLaboratories:Z,userFullName:$,userEmail:ee,userInitials:oe,errors:R,clearErrors:re,withClientMutation:B,showErrors:te,deduplicatedErrors:ne,showPreferences:se,notificationStore:D,toggleNotifications:ae,loadPreferredTheme:F,megaMenu:j,useMegaMenu:V,navItems:ie,closeMenus:H,onMegaMenuEnter:le,onMegaMenuLeave:de,userMenuRef:K,megaMenuRef:z,handleKeyDown:Y,showModal:q,targetLaboratoryUid:L,switching:S,switchLabNow:()=>{if(!L.value){alert("Please select a laboratory to switch to.");return}S.value=!0,setTimeout(async()=>{await B(ve,{userUid:t.auth?.user?.uid,laboratoryUid:L.value},"setUserActiveLaboratory").then(i=>t.logout()).catch(()=>{}).finally(()=>{q.value=!1,S.value=!1})},3e3)},get guards(){return _e}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),Me={id:"main-nav",class:"flex items-center px-6 bg-primary border-b border-border",role:"navigation","aria-label":"Main Navigation"},Ee={class:"flex-1"},Ne={class:"flex items-center"},Ce={class:"text-left text-2xl font-medium ml-2"},Le={key:0,class:"mx-8 border-l border-border h-8 self-center","aria-hidden":"true"},Se=["aria-expanded"],Pe={id:"main-menu",class:"absolute left-0 top-full mt-1 min-w-[600px] rounded-xl border border-border bg-popover text-popover-foreground shadow-xl z-20 overflow-hidden",role:"menu","aria-label":"Main Menu"},Ae={class:"p-4"},Oe={class:"grid grid-cols-3 gap-2",role:"none"},Te={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-muted/80","aria-hidden":"true"},Ie={class:"text-sm font-medium"},Ue={class:"flex items-center space-x-4"},Re={class:"bg-destructive text-destructive-foreground text-xs rounded-full px-2 py-0.5 min-w-[1.25rem] text-center"},Be={key:1,class:"border-l border-border h-8 self-center","aria-hidden":"true"},De={ref:"userMenuRef",class:"relative pl-4"},Fe=["aria-expanded"],je={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-foreground/20 text-xs font-semibold text-primary-foreground ring-2 ring-primary-foreground/30","aria-hidden":"true"},Ve={class:"hidden md:block text-left min-w-0"},He={class:"block text-sm font-medium truncate max-w-[140px]"},Ke={key:0,class:"block text-xs text-primary-foreground/70 truncate max-w-[140px]"},ze={id:"user-menu",class:"absolute right-0 top-full mt-2 w-56 rounded-xl border border-border bg-popover text-popover-foreground shadow-lg z-30 overflow-hidden",role:"menu","aria-orientation":"vertical"},Ye={class:"px-4 py-3 bg-muted/50 border-b border-border"},qe={class:"text-sm font-medium text-foreground truncate"},Ge={key:0,class:"text-xs text-muted-foreground truncate mt-0.5"},Qe={key:1,class:"text-xs text-muted-foreground truncate mt-1 flex items-center gap-1.5"},We={class:"py-1.5"},Je={class:"py-1.5"},Xe=["aria-label"],Ze={class:"flex items-center justify-between"},$e={key:0,class:"text-muted-foreground italic"},eo={key:1,"aria-label":"Error messages",class:"divide-y divide-border"},oo={class:"flex-1 whitespace-pre-wrap"},ro={action:"post",class:"p-6 space-y-6"},to={class:"space-y-4"},no={class:"grid grid-cols-2 gap-4"},so={class:"col-span-2 space-y-2"},ao=["value"];function io(X,o,T,e,I,U){const y=_("router-link"),d=_("font-awesome-icon"),p=_("beak-drawer"),x=_("beak-button"),b=_("beak-modal");return a(),l(C,null,[r("nav",Me,[n(" Brand and menu section "),r("div",Ee,[r("div",Ne,[n(" Logo and brand name "),s(y,{to:"/",id:"brand",class:"flex items-center md:w-auto text-primary-foreground/80 hover:text-primary-foreground transition-colors","aria-label":"Beak LIMS Home"},{default:u(()=>[s(e.Logo),r("h1",Ce,m(e.activeLaboratory?.name??"Beak LIMS"),1)]),_:1}),e.useMegaMenu?(a(),l("span",Le)):n("v-if",!0),n(" Mega menu: hover to open, smooth transitions "),e.useMegaMenu?(a(),l("div",{key:1,ref:"megaMenuRef",class:"relative hidden md:block",onMouseenter:e.onMegaMenuEnter,onMouseleave:e.onMegaMenuLeave},[r("button",{onClick:o[0]||(o[0]=t=>e.menuOpen=!e.menuOpen),class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-foreground/40 focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":e.menuOpen,"aria-controls":"main-menu","aria-haspopup":"true"},[o[15]||(o[15]=r("span",null,"Menu",-1)),s(d,{icon:e.menuOpen?"chevron-up":"chevron-down",class:"text-primary-foreground/70 text-xs transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,Se),s(J,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95 -translate-y-1","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-1",persisted:""},{default:u(()=>[k(r("div",Pe,[r("div",Ae,[r("div",Oe,[(a(!0),l(C,null,O(e.navItems,t=>k((a(),E(y,{key:t.id,to:t.route,id:`${t.id}-link`,class:"flex items-center gap-3 rounded-lg py-2.5 px-3 text-foreground hover:bg-accent hover:text-accent-foreground transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-popover",role:"menuitem",onClick:o[1]||(o[1]=M=>e.menuOpen=!1)},{default:u(()=>[r("span",Te,[s(d,{icon:t.icon,class:"text-muted-foreground"},null,8,["icon"])]),r("span",Ie,m(t.label),1)]),_:2},1032,["to","id"])),[[N,e.guards.canAccessPage(t.guard)]])),128))])])],512),[[N,e.menuOpen]])]),_:1})],544)):n("v-if",!0)])]),n(" User section and actions "),r("div",Ue,[n(" Errors button "),e.errors.length>0?(a(),l("button",{key:0,class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary",onClick:o[2]||(o[2]=t=>e.showErrors=!0),"aria-label":"Show errors"},[s(d,{icon:"bell",class:"shrink-0","aria-hidden":"true"}),o[16]||(o[16]=r("span",null,"Errors",-1)),r("span",Re,m(e.errors.length),1)])):n("v-if",!0),e.errors.length>0?(a(),l("span",Be)):n("v-if",!0),n(" Notifications button "),r("button",{class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary",onClick:o[3]||(o[3]=t=>e.toggleNotifications(!0)),"aria-label":"Show notifications"},[s(d,{icon:"bell",class:"shrink-0","aria-hidden":"true"}),o[17]||(o[17]=r("span",null,"Notifications",-1))]),o[23]||(o[23]=r("span",{class:"border-l border-border h-8 self-center","aria-hidden":"true"},null,-1)),n(" Admin settings link "),k(s(y,{to:"/admin",class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-label":"Settings"},{default:u(()=>[s(d,{icon:"cog",class:"shrink-0","aria-hidden":"true"}),o[18]||(o[18]=r("span",null,"Settings",-1))]),_:1},512),[[N,e.guards.canAccessPage(e.guards.pages.ADMINISTRATION)]]),n(" User menu trigger "),r("div",De,[r("button",{onClick:o[4]||(o[4]=t=>e.dropdownOpen=!e.dropdownOpen),class:"flex items-center gap-2 min-h-9 py-2 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-foreground/40 focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":e.dropdownOpen,"aria-controls":"user-menu","aria-haspopup":"true"},[r("span",je,m(e.userInitials),1),r("div",Ve,[r("span",He,m(e.userFullName),1),e.userEmail?(a(),l("span",Ke,m(e.userEmail),1)):n("v-if",!0)]),s(d,{icon:e.dropdownOpen?"chevron-up":"chevron-down",class:"hidden md:block shrink-0 text-primary-foreground/70 text-xs transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,Fe),n(" User dropdown menu "),s(J,{"enter-active-class":"transition ease-out duration-150","enter-from-class":"opacity-0 scale-95 -translate-y-1","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-1",persisted:""},{default:u(()=>[k(r("div",ze,[n(" User info header "),r("div",Ye,[r("p",qe,m(e.userFullName),1),e.userEmail?(a(),l("p",Ge,m(e.userEmail),1)):n("v-if",!0),e.activeLaboratory?.name?(a(),l("p",Qe,[s(d,{icon:"vial",class:"shrink-0 opacity-70","aria-hidden":"true"}),h(" "+m(e.activeLaboratory.name),1)])):n("v-if",!0)]),n(" Menu items "),r("div",We,[r("button",{class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground",role:"menuitem",onClick:o[5]||(o[5]=t=>{e.showPreferences=!0,e.dropdownOpen=!1})},[s(d,{icon:"user-gear",class:"w-4 text-muted-foreground","aria-hidden":"true"}),o[19]||(o[19]=h(" Preferences ",-1))]),(e.userLaboratories?.length??0)>1?(a(),l("button",{key:0,class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground",role:"menuitem",onClick:o[6]||(o[6]=t=>{e.showModal=!0,e.dropdownOpen=!1})},[s(d,{icon:"shuffle",class:"w-4 text-muted-foreground","aria-hidden":"true"}),o[20]||(o[20]=h(" Switch laboratory ",-1))])):n("v-if",!0)]),o[22]||(o[22]=r("div",{class:"border-t border-border",role:"separator"},null,-1)),r("div",Je,[r("button",{onClick:o[7]||(o[7]=t=>e.authStore.logout()),class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-destructive hover:bg-destructive/10 transition-colors focus:outline-none focus:bg-destructive/10",role:"menuitem"},[s(d,{icon:"sign-out-alt",class:"w-4","aria-hidden":"true"}),o[21]||(o[21]=h(" Log out ",-1))])])],512),[[N,e.dropdownOpen]])]),_:1})],512),r("button",{onClick:o[8]||(o[8]=(...t)=>e.toggle&&e.toggle(...t)),class:"flex items-center justify-center h-9 w-9 shrink-0 rounded-lg text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-label":e.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[s(d,{icon:e.isFullscreen?"compress":"expand",class:"shrink-0"},null,8,["icon"])],8,Xe)])]),n(" Error drawer "),s(p,{show:e.showErrors,onClose:o[10]||(o[10]=t=>e.showErrors=!1)},{header:u(()=>[r("div",Ze,[o[24]||(o[24]=r("h3",{class:"font-semibold text-lg"},"Errors List",-1)),r("button",{class:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-secondary transition-colors focus:outline-none",onClick:o[9]||(o[9]=t=>e.clearErrors()),"aria-label":"Clear all errors"},[s(d,{icon:"trash-alt",class:"w-5 h-5","aria-hidden":"true"})])])]),body:u(()=>[e.errors.length===0?(a(),l("p",$e,"No errors to display")):(a(),l("ul",eo,[(a(!0),l(C,null,O(e.deduplicatedErrors,(t,M)=>(a(),l("li",{key:M,class:"mb-2 p-3 bg-background rounded text-sm border-l-4 border-destructive flex items-start gap-2"},[r("code",oo,m(t.message),1),t.count>1?(a(),E(e.BeakBadge,{key:0,variant:"destructive",size:"sm",class:"shrink-0"},{default:u(()=>[h(m(t.count),1)]),_:2},1024)):n("v-if",!0)]))),128))]))]),_:1},8,["show"]),n(" User Preferences Drawer "),s(p,{show:e.showPreferences,onClose:o[11]||(o[11]=t=>e.showPreferences=!1)},{header:u(()=>[...o[25]||(o[25]=[r("div",{class:"flex items-center justify-between"},[r("h3",{class:"font-semibold text-lg"},"Your Preferences")],-1)])]),body:u(()=>[e.showPreferences?(a(),E(e.UserPreferences,{key:0})):n("v-if",!0)]),_:1},8,["show"]),n(" Lab Switcher "),e.showModal?(a(),E(b,{key:0,onClose:o[14]||(o[14]=t=>e.showModal=!1)},{header:u(()=>[...o[26]||(o[26]=[r("h3",{class:"text-lg font-bold text-foreground"},"Current Laboratory Switcher",-1)])]),body:u(()=>[r("form",ro,[o[30]||(o[30]=r("p",{class:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4 border border-border"},[r("span",{class:"font-medium text-foreground"},"Note:"),h(" Switching laboratories will automatically log you out. You will need to sign in again for the change to take effect. ")],-1)),r("div",to,[r("div",no,[r("label",so,[o[28]||(o[28]=r("span",{class:"text-base font-medium"},"Laboratory Name",-1)),k(r("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":o[12]||(o[12]=t=>e.targetLaboratoryUid=t)},[o[27]||(o[27]=r("option",{value:""},"Select Department",-1)),(a(!0),l(C,null,O(e.userLaboratories,t=>(a(),l("option",{key:t.uid,value:t?.uid},m(t.name),9,ao))),128))],512),[[xe,e.targetLaboratoryUid]])])])]),s(x,{type:"button",onClick:o[13]||(o[13]=ye(t=>e.switchLabNow(),["prevent"])),loading:e.switching,disabled:e.switching,class:"w-full"},{default:u(()=>[...o[29]||(o[29]=[h(" Switch Laboratory ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})):n("v-if",!0)],64)}const mo=he(ke,[["render",io],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/components/nav/NavigationMain.vue"]]);export{mo as default};
