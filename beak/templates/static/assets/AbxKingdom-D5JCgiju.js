import{a0 as T,f as B,a7 as u,ad as q,_ as U,r as h,c as g,o as c,A as e,E as y,C as I,a as M,N as v,P as L,J as C,K as P,L as w,D as z,F as G,a2 as J}from"./index-DCVfsbos.js";import{c as O,a as Q,u as j,b as H}from"./index.esm-89YX2EbQ.js";import{q as R,z as W,B as X}from"./microbiology.mutations-CV_wjL4A.js";const Y=T({__name:"AbxKingdom",setup(F,{expose:o}){o();const{withClientMutation:f,withClientQuery:t}=B();let l=u(!1),b=u("");const r=u(!0),a=u(null),p=O({name:Q().trim().required("Name is required")}),{handleSubmit:s,resetForm:x,setValues:k,errors:N}=j({validationSchema:p,initialValues:{name:""}}),{value:D}=H("name"),i=u([]);q(()=>{t(R,{},"abxKingdomAll").then(n=>{n&&(i.value=n)})});function S(n,m={}){r.value=n,l.value=!0,b.value=(n?"Create":"Edit")+" kingdom",n?(a.value=null,x()):(a.value=m.uid??null,k({name:m.name??""}))}const V=s(n=>{const m={name:n.name};r.value===!0&&f(W,{payload:m},"createAbxKingdom").then(d=>{d&&i.value.unshift(d)}),r.value===!1&&a.value&&f(X,{uid:a.value,payload:m},"updateAbxKingdom").then(d=>{if(d){const A=i.value.findIndex(_=>_.uid==d.uid);A>-1&&(i.value=[...i.value.map((_,E)=>E===A?d:_)])}}),l.value=!1}),K={withClientMutation:f,withClientQuery:t,get showModal(){return l},set showModal(n){l=n},get formTitle(){return b},set formTitle(n){b=n},formAction:r,currentUid:a,kingdomSchema:p,handleSubmit:s,resetForm:x,setValues:k,errors:N,name:D,abxKingdoms:i,FormManager:S,saveForm:V};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),Z={class:"space-y-6"},$={class:"rounded-md border border-border shadow-sm bg-card p-6"},ee={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-border beak-table"},te={class:"divide-y divide-border bg-background"},se={class:"whitespace-nowrap text-sm text-foreground"},ne={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ae=["onClick"],re={class:"text-xl font-semibold text-foreground"},ie={class:"grid grid-cols-2 gap-4"},de={class:"block"},le={key:0,class:"text-sm text-destructive"};function me(F,o,f,t,l,b){const r=h("beak-button"),a=h("beak-heading"),p=h("beak-modal");return c(),g(C,null,[e("div",Z,[M(a,{title:"Kingdoms"},{default:v(()=>[M(r,{onClick:o[0]||(o[0]=s=>t.FormManager(!0))},{default:v(()=>[...o[4]||(o[4]=[L("Add Kingdom",-1)])]),_:1})]),_:1}),e("div",$,[e("div",ee,[e("table",oe,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",te,[(c(!0),g(C,null,P(t.abxKingdoms,s=>(c(),g("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",se,w(s?.name),1),e("td",ne,[e("button",{onClick:x=>t.FormManager(!1,s),class:"text-primary hover:text-primary/80"}," Edit ",8,ae)])]))),128))])])])])]),y(" Kingdom Edit Form Modal "),t.showModal?(c(),I(p,{key:0,onClose:o[3]||(o[3]=s=>t.showModal=!1),"content-width":"w-1/2"},{header:v(()=>[e("h3",re,w(t.formTitle),1)]),body:v(()=>[e("form",{onSubmit:o[2]||(o[2]=z((...s)=>t.saveForm&&t.saveForm(...s),["prevent"])),class:"space-y-6 p-4"},[e("div",ie,[e("label",de,[o[6]||(o[6]=e("span",{class:"text-sm font-medium text-foreground"},"Kingdom Name",-1)),G(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":o[1]||(o[1]=s=>t.name=s),placeholder:"Name ..."},null,512),[[J,t.name]]),t.errors.name?(c(),g("p",le,w(t.errors.name),1)):y("v-if",!0)])]),o[7]||(o[7]=e("hr",{class:"border-border"},null,-1)),o[8]||(o[8]=e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-md px-4 py-2 transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Kingdom ",-1))],32)]),_:1})):y("v-if",!0)],64)}const be=U(Y,[["render",me],["__scopeId","data-v-f35e5a63"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/microbiology/organism/AbxKingdom.vue"]]);export{be as default};
