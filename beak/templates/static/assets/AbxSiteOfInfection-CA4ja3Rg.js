import{a0 as U,f as L,a7 as u,ad as q,_ as G,r as S,c as p,o as c,A as e,E as g,C as J,a as K,J as I,K as P,L as x,N as A,D as Q,F as O,a2 as M}from"./index-DCVfsbos.js";import{c as z,a as H,u as R,b as F}from"./index.esm-89YX2EbQ.js";import{a5 as W,ac as X,ad as Y}from"./microbiology.mutations-CV_wjL4A.js";const Z=U({__name:"AbxSiteOfInfection",setup(D,{expose:t}){t();const{withClientMutation:m,withClientQuery:o}=L();let f=u(!1),b=u("");const r=u(!0),s=u(null),i=z({name:H().trim().required("Name is required")}),{handleSubmit:h,resetForm:_,setValues:y,errors:C}=R({validationSchema:i,initialValues:{name:"",description:""}}),{value:N}=F("name"),{value:E}=F("description"),a=u([]);q(()=>{o(W,{},"abxSiteOfInfectionAll").then(n=>{n&&(a.value=n)})});function V(n,l={}){r.value=n,f.value=!0,b.value=(n?"Create":"Edit")+" Abx SiteOfInfection",n?(s.value=null,_()):(s.value=l.uid??null,y({name:l.name??"",description:l.description??""}))}const B=h(n=>{const l={name:n.name,description:n.description};r.value===!0&&m(X,{payload:l},"createAbxSiteOfInfection").then(d=>{d&&a.value.unshift(d)}),r.value===!1&&s.value&&m(Y,{uid:s.value,payload:l},"updateAbxSiteOfInfection").then(d=>{if(d){const k=a.value.findIndex(v=>v.uid==d.uid);k>-1&&(a.value=[...a.value.map((v,T)=>T===k?d:v)])}}),f.value=!1}),w={withClientMutation:m,withClientQuery:o,get showModal(){return f},set showModal(n){f=n},get formTitle(){return b},set formTitle(n){b=n},formAction:r,currentUid:s,siteOfInfectionSchema:i,handleSubmit:h,resetForm:_,setValues:y,errors:C,name:N,description:E,abxSiteOfInfections:a,FormManager:V,saveForm:B};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={class:"space-y-6"},$={class:"overflow-x-auto"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card shadow-dashboard rounded-lg p-6"},te={class:"min-w-full divide-y divide-border beak-table"},oe={class:"bg-background divide-y divide-border"},ie={class:"whitespace-nowrap text-sm text-foreground"},ne={class:"whitespace-nowrap text-sm text-foreground"},se={class:"text-xl font-semibold text-foreground"},re={class:"grid grid-cols-2 gap-4"},ae={class:"block"},le={key:0,class:"text-sm text-destructive"},de={class:"block"};function fe(D,t,m,o,f,b){const r=S("beak-heading"),s=S("beak-modal");return c(),p(I,null,[e("div",j,[K(r,{title:"Site of Infection"}),e("div",$,[e("div",ee,[e("table",te,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:""})])],-1)),e("tbody",oe,[(c(!0),p(I,null,P(o.abxSiteOfInfections,i=>(c(),p("tr",{key:i?.uid},[e("td",ie,x(i?.name),1),e("td",ne,x(i?.description),1),t[4]||(t[4]=e("td",{class:"whitespace-nowrap text-right text-sm"},[g(` <button @click="FormManager(false, soi)"
 class="px-3 py-1.5 bg-primary text-primary-foreground rounded-sm transition duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
 Edit
 </button> `)],-1))]))),128))])])])])]),g(" Location Edit Form Modal "),o.showModal?(c(),J(s,{key:0,onClose:t[3]||(t[3]=i=>o.showModal=!1)},{header:A(()=>[e("h3",se,x(o.formTitle),1)]),body:A(()=>[e("form",{onSubmit:t[2]||(t[2]=Q((...i)=>o.saveForm&&o.saveForm(...i),["prevent"])),class:"space-y-6 p-4"},[e("div",re,[e("label",ae,[t[6]||(t[6]=e("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),O(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[0]||(t[0]=i=>o.name=i),placeholder:"Name ..."},null,512),[[M,o.name]]),o.errors.name?(c(),p("p",le,x(o.errors.name),1)):g("v-if",!0)]),e("label",de,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),O(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[1]||(t[1]=i=>o.description=i),placeholder:"Begin typing ..."},null,512),[[M,o.description]])])]),t[8]||(t[8]=e("hr",{class:"border-border"},null,-1)),t[9]||(t[9]=e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Abx SiteOfInfection ",-1))],32)]),_:1})):g("v-if",!0)],64)}const be=G(Z,[["render",fe],["__scopeId","data-v-575af280"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/microbiology/breakpoints/AbxSiteOfInfection.vue"]]);export{be as default};
