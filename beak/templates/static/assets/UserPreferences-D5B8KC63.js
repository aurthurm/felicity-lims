import{a0 as V,f as j,ag as F,a7 as M,h as P,ae as a,aB as G,ad as Q,aC as W,i as H,aD as K,_ as q,r as D,c as s,a as N,A as n,P as w,F as E,a9 as A,b as z,J as R,K as T,L as I,Q as c,N as J,o as l}from"./index-B3ZheI5m.js";import{u as Y}from"./setup-DpgcXA6u.js";const X=V({__name:"UserPreferences",setup(B,{expose:t}){t();const{withClientQuery:f,withClientMutation:e}=j(),i=Y(),{toastSuccess:g,toastError:d}=H(),{initPreferences:u,toggleDepartment:o,isDepartmentSelected:h,theme:k,expandedMenu:y,megaMenu:_,defaultRoute:S,departments:p}=F(),m=M(!0),b=M(!1),U=P(()=>i.getDepartments),L=P(()=>[{label:"Dashboard",value:"/dashboard",page:a.DASHBOARD},{label:"Patients",value:"/patients",page:a.PATIENTS},{label:"Patients Compact",value:"/patients-compact",page:a.PATIENTS_COMPACT},{label:"Clients",value:"/clients",page:a.CLIENTS},{label:"Samples",value:"/samples",page:a.SAMPLES},{label:"Quality Control",value:"/quality-control",page:a.QC_SAMPLES},{label:"Worksheets",value:"/worksheets",page:a.WORKSHEETS},{label:"Referrals",value:"/shipments",page:a.REFERRAL},{label:"Bio-Banking",value:"/bio-banking",page:a.BIO_BANKING},{label:"Inventory",value:"/inventory",page:a.INVENTORY},{label:"Notice Manager",value:"/notice-manager",page:a.NOTICE_MANAGER},{label:"Projects/Schemes",value:"/schemes",page:a.SCHEMES},{label:"Documents",value:"/documents",page:a.DOCUMENT},{label:"Billing",value:"/billing",page:a.BILLING},{label:"Administration",value:"/admin",page:a.ADMINISTRATION}].filter(r=>G(r.page)));Q(()=>{i.fetchDepartments({}),v()});function v(){m.value=!0,f(W,{},"userPreferences").then(r=>{r&&u(r)}).finally(()=>{m.value=!1})}async function O(){b.value=!0;const r={expandedMenu:y.value,megaMenu:_.value,theme:k.value,defaultRoute:S.value||void 0,departments:p.value.length>0?p.value.map(x=>x.uid):void 0};try{e(K,{preferencesIn:r},"updateUserPreferences").then(()=>{g("Preferences updated successfully"),v()}).catch(x=>{d(x?.message||"Failed to update preferences")})}finally{b.value=!1}}const C={withClientQuery:f,withClientMutation:e,setupStore:i,toastSuccess:g,toastError:d,initPreferences:u,toggleDepartment:o,isDepartmentSelected:h,theme:k,expandedMenu:y,megaMenu:_,defaultRoute:S,departments:p,loading:m,saving:b,allDepartments:U,availablePages:L,fetchUserPreferences:v,savePreferences:O};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),Z={class:"w-full space-y-6"},$={key:0,class:"flex justify-center items-center h-32"},ee={key:1,class:"space-y-6"},te={class:"grid grid-cols-2 gap-4"},ne={class:"space-y-2"},oe={class:"space-y-2"},ae=["value"],se={class:"space-y-4"},le={class:"flex items-center justify-between"},re=["aria-checked"],ie={class:"flex items-center justify-between"},de=["aria-checked"],ue={class:"space-y-3"},ce={key:0,class:"text-sm text-muted-foreground italic"},fe={key:1,class:"grid grid-cols-2 gap-4"},ge=["id","checked","onChange"],pe=["for"],me={class:"flex justify-end gap-3 pt-4"},be=["disabled"];function ve(B,t,f,e,i,g){const d=D("beak-loader"),u=D("beak-button");return l(),s("div",Z,[e.loading?(l(),s("div",$,[N(d,{message:"Loading preferences...",variant:"muted"})])):(l(),s("div",ee,[t[12]||(t[12]=n("p",{class:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4 border border-border"},[n("span",{class:"font-medium text-foreground"},"Note:"),w(" Some changes require you to log out and log back in to take effect. ")],-1)),n("div",te,[n("div",ne,[t[5]||(t[5]=n("label",{class:"block text-l font-semibold text-foreground"}," Theme ",-1)),E(n("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.theme=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[...t[4]||(t[4]=[z('<option value="light">Light</option><option value="dark">Dark</option><option value="black-and-white">Black and White</option><option value="sterile">Sterile</option><option value="clinical-blue">Clinical Blue</option><option value="emergency-red">Emergency Red</option><option value="sterile-green">Sterile Green</option><option value="warm-neutral">Warm Neutral</option><option value="cool-slate">Cool Slate</option><option value="corporate-navy">Corporate Navy</option>',10)])],512),[[A,e.theme]])]),n("div",oe,[t[7]||(t[7]=n("label",{class:"block text-l font-semibold text-foreground"}," Default Route ",-1)),E(n("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.defaultRoute=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[6]||(t[6]=n("option",{value:""},"No preference (Dashboard)",-1)),(l(!0),s(R,null,T(e.availablePages,o=>(l(),s("option",{key:o.value,value:o.value},I(o.label),9,ae))),128))],512),[[A,e.defaultRoute]])])]),n("div",se,[n("div",le,[t[8]||(t[8]=n("label",{class:"text-l font-semibold text-foreground"}," Expanded Menu ",-1)),n("button",{onClick:t[2]||(t[2]=o=>e.expandedMenu=!e.expandedMenu),class:c(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",e.expandedMenu?"bg-primary":"bg-muted"]),role:"switch","aria-checked":e.expandedMenu},[n("span",{class:c(["inline-block h-4 w-4 transform rounded-full bg-background transition-transform",e.expandedMenu?"translate-x-6":"translate-x-1"])},null,2)],10,re)]),n("div",ie,[t[9]||(t[9]=n("div",null,[n("label",{class:"text-l font-semibold text-foreground"}," Mega Menu "),n("p",{class:"text-sm text-muted-foreground"}," Enable horizontal mega menu instead of sidebar (takes effect after page reload) ")],-1)),n("button",{onClick:t[3]||(t[3]=o=>e.megaMenu=!e.megaMenu),class:c(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",e.megaMenu?"bg-primary":"bg-muted"]),role:"switch","aria-checked":e.megaMenu},[n("span",{class:c(["inline-block h-4 w-4 transform rounded-full bg-background transition-transform",e.megaMenu?"translate-x-6":"translate-x-1"])},null,2)],10,de)])]),n("div",ue,[t[10]||(t[10]=n("label",{class:"block text-l font-semibold text-foreground"}," Departments Filter ",-1)),e.allDepartments.length===0?(l(),s("div",ce," No departments available ")):(l(),s("div",fe,[(l(!0),s(R,null,T(e.allDepartments,o=>(l(),s("div",{key:o.uid,class:"flex items-center"},[n("input",{id:`dept-${o.uid}`,type:"checkbox",checked:e.isDepartmentSelected(o.uid),onChange:h=>e.toggleDepartment(o),class:"h-4 w-4 rounded border-input bg-background cursor-pointer focus:outline-none focus:ring-2 focus:ring-ring"},null,40,ge),n("label",{for:`dept-${o.uid}`,class:"ml-2 text-sm font-medium text-foreground cursor-pointer"},I(o.name),9,pe)]))),128))]))]),n("div",me,[n("button",{type:"button",onClick:e.fetchUserPreferences,disabled:e.saving,class:"px-4 py-2 text-sm font-medium rounded-lg border border-input bg-background text-foreground hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,be),N(u,{type:"button",onClick:e.savePreferences,disabled:e.saving||e.loading,loading:e.saving,class:"px-4 py-2"},{default:J(()=>[...t[11]||(t[11]=[w(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])])]))])}const ke=q(X,[["render",ve],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/user/UserPreferences.vue"]]);export{ke as default};
