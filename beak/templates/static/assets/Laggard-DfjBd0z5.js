import{a0 as p,h as c,_ as b,c as l,o as i,A as e,E as f,L as n,Q as y,O as _,aq as x,ad as v,r as T,a as h}from"./index-B3ZheI5m.js";import{u as D}from"./dashboard-BWageVZl.js";const w=p({__name:"LaggardCard",props:{title:{type:String,required:!0},tooltip:{type:String,required:!1,default:void 0},tooltipPosition:{type:String,required:!1,default:"left"},total:{type:Number,required:!0},onTimeCount:{type:Number,required:!0},delayedCount:{type:Number,required:!0},lessThanTen:{type:Number,required:!1,default:0},tenToTwenty:{type:Number,required:!1,default:0},twentyToThirty:{type:Number,required:!1,default:0},graterThanThirty:{type:Number,required:!1,default:0},daysLabel:{type:String,required:!1,default:"Days since created"}},setup(m,{expose:o}){o();const a=m,t=c(()=>a.total>0),d=c(()=>{const r=a.onTimeCount+a.delayedCount;return r===0?0:Math.round(a.onTimeCount/r*100)}),u=c(()=>{const r=d.value;return r>=80?"text-success":r>=50?"text-warning":"text-destructive"}),s={props:a,hasData:t,onTimePercent:d,onTimePercentColorClass:u};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),C={class:"rounded-lg border border-border bg-card shadow-sm p-5 border-l-4 border-primary"},S={class:"flex items-center justify-between gap-3 mb-2"},k={class:"text-sm text-muted-foreground"},L={key:0,class:"group relative inline-block"},q={class:"text-2xl font-bold text-foreground"},N={class:"mt-3 space-y-3"},P={class:"flex items-center justify-between gap-2 mb-1"},z={class:"text-xs text-muted-foreground"},A={class:"h-2 w-full rounded-full bg-muted overflow-hidden flex"},B={class:"pt-2 border-t border-border"},j={class:"text-xs text-muted-foreground mb-2"},M={class:"grid grid-cols-4 gap-2"},I={class:"rounded-md bg-muted/50 px-2 py-1.5 text-center"},O={class:"text-lg font-semibold text-foreground"},V={class:"rounded-md bg-muted/50 px-2 py-1.5 text-center"},E={class:"text-lg font-semibold text-foreground"},F={class:"rounded-md bg-muted/50 px-2 py-1.5 text-center"},H={class:"text-lg font-semibold text-foreground"},Q={class:"rounded-md bg-muted/50 px-2 py-1.5 text-center"},R={class:"text-lg font-semibold text-foreground"};function G(m,o,a,t,d,u){return i(),l("div",C,[e("div",S,[e("p",k,n(a.title),1),a.tooltip?(i(),l("div",L,[o[0]||(o[0]=e("span",{class:"cursor-help text-muted-foreground transition-colors hover:text-primary"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",{class:y(["hidden group-hover:block absolute z-10 bottom-full mb-2 w-48 bg-popover text-popover-foreground text-xs rounded-md p-2 shadow-md border border-border",a.tooltipPosition==="right"?"right-0 left-auto":"left-0 right-auto"])},n(a.tooltip),3)])):f("",!0)]),e("p",q,n(a.total),1),e("div",N,[e("div",null,[e("div",P,[e("span",{class:y(["text-sm font-medium",t.hasData?t.onTimePercentColorClass:"text-muted-foreground"])},n(t.onTimePercent)+"% on-time ",3),e("span",z,n(a.onTimeCount)+" on-time / "+n(a.delayedCount)+" delayed ",1)]),e("div",A,[t.hasData?(i(),l("div",{key:0,class:"h-full rounded-l-full transition-all duration-300 bg-success",style:_({width:`${t.onTimePercent}%`})},null,4)):f("",!0),e("div",{class:y(["h-full transition-all duration-300",t.hasData?"rounded-r-full bg-destructive":"rounded-full bg-muted"]),style:_({width:t.hasData?`${100-t.onTimePercent}%`:"100%"})},null,6)])]),e("div",B,[e("p",j,n(a.daysLabel),1),e("div",M,[e("div",I,[e("p",O,n(a.lessThanTen),1),o[1]||(o[1]=e("p",{class:"text-xs text-muted-foreground"}," <10 ",-1))]),e("div",V,[e("p",E,n(a.tenToTwenty),1),o[2]||(o[2]=e("p",{class:"text-xs text-muted-foreground"}," 10–20 ",-1))]),e("div",F,[e("p",H,n(a.twentyToThirty),1),o[3]||(o[3]=e("p",{class:"text-xs text-muted-foreground"}," 20–30 ",-1))]),e("div",Q,[e("p",R,n(a.graterThanThirty),1),o[4]||(o[4]=e("p",{class:"text-xs text-muted-foreground"}," >30 ",-1))])])])])])}const J=b(w,[["render",G],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/dashboard/LaggardCard.vue"]]),K=p({__name:"Laggard",setup(m,{expose:o}){o();const a=D(),{dashboard:t}=x(a);v(()=>{a.getSampleLaggards()});const d=c(()=>{const r=t.value.laggards;return Array.isArray(r)?r.find(g=>g?.category==="delayed_and_incomplete"):null}),u=c(()=>{const r=t.value.laggards;return Array.isArray(r)?r.find(g=>g?.category==="authorised_already_delayed"):null}),s={dashBoardStore:a,dashboard:t,daiData:d,aadData:u,LaggardCard:J};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),U={class:"mt-4"},W={key:0,class:"text-start my-4"},X={key:1},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"};function Z(m,o,a,t,d,u){const s=T("beak-loader");return i(),l("div",U,[t.dashboard.fetchingLaggards?(i(),l("div",W,[h(s,{message:"Fetching laggard stats..."})])):(i(),l("section",X,[e("div",Y,[h(t.LaggardCard,{title:"Delayed & Incomplete",tooltip:"Samples still in the workflow that are past their due date",total:t.daiData?.counts?.totalIncomplete??0,"on-time-count":t.daiData?.counts?.totalDelayed??0,"delayed-count":t.daiData?.counts?.totalNotDelayed??0,"less-than-ten":t.daiData?.counts?.lessThanTen??0,"ten-to-twenty":t.daiData?.counts?.tenToTwenty??0,"twenty-to-thirty":t.daiData?.counts?.twentyToThirty??0,"grater-than-thirty":t.daiData?.counts?.graterThanThirty??0,"days-label":"Days since created"},null,8,["total","on-time-count","delayed-count","less-than-ten","ten-to-twenty","twenty-to-thirty","grater-than-thirty"]),h(t.LaggardCard,{title:"Authorised & Past Due",tooltip:"Samples that were authorised but are past their expected turnaround time","tooltip-position":"right",total:t.aadData?.counts?.totalIncomplete??0,"on-time-count":t.aadData?.counts?.totalDelayed??0,"delayed-count":t.aadData?.counts?.totalNotDelayed??0,"less-than-ten":t.aadData?.counts?.lessThanTen??0,"ten-to-twenty":t.aadData?.counts?.tenToTwenty??0,"twenty-to-thirty":t.aadData?.counts?.twentyToThirty??0,"grater-than-thirty":t.aadData?.counts?.graterThanThirty??0,"days-label":"Days: created to authorised"},null,8,["total","on-time-count","delayed-count","less-than-ten","ten-to-twenty","twenty-to-thirty","grater-than-thirty"])])]))])}const et=b(K,[["render",Z],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]);export{et as default};
