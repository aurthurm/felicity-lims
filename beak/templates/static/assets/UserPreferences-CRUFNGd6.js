import{a0 as j,f as F,ag as G,a7 as D,h as N,ae as a,aB as Q,ad as W,aC as H,i as K,aD as q,_ as z,r as E,c as l,E as s,a as w,J as k,A as n,P as T,F as A,a9 as R,b as J,K as B,L as I,Q as g,N as Y,o as r}from"./index-DCVfsbos.js";import{u as X}from"./setup-DMRnqeyP.js";const Z=j({__name:"UserPreferences",setup(U,{expose:t}){t();const{withClientQuery:f,withClientMutation:e}=F(),u=X(),{toastSuccess:p,toastError:d}=K(),{initPreferences:c,toggleDepartment:o,isDepartmentSelected:y,theme:_,expandedMenu:M,megaMenu:S,defaultRoute:P,departments:m}=G(),b=D(!0),v=D(!1),L=N(()=>u.getDepartments),O=N(()=>[{label:"Dashboard",value:"/dashboard",page:a.DASHBOARD},{label:"Patients",value:"/patients",page:a.PATIENTS},{label:"Patients Compact",value:"/patients-compact",page:a.PATIENTS_COMPACT},{label:"Clients",value:"/clients",page:a.CLIENTS},{label:"Samples",value:"/samples",page:a.SAMPLES},{label:"Quality Control",value:"/quality-control",page:a.QC_SAMPLES},{label:"Worksheets",value:"/worksheets",page:a.WORKSHEETS},{label:"Referrals",value:"/shipments",page:a.REFERRAL},{label:"Bio-Banking",value:"/bio-banking",page:a.BIO_BANKING},{label:"Inventory",value:"/inventory",page:a.INVENTORY},{label:"Notice Manager",value:"/notice-manager",page:a.NOTICE_MANAGER},{label:"Projects/Schemes",value:"/schemes",page:a.SCHEMES},{label:"Documents",value:"/documents",page:a.DOCUMENT},{label:"Billing",value:"/billing",page:a.BILLING},{label:"Administration",value:"/admin",page:a.ADMINISTRATION}].filter(i=>Q(i.page)));W(()=>{u.fetchDepartments({}),x()});function x(){b.value=!0,f(H,{},"userPreferences").then(i=>{i&&c(i)}).finally(()=>{b.value=!1})}async function V(){v.value=!0;const i={expandedMenu:M.value,megaMenu:S.value,theme:_.value,defaultRoute:P.value||void 0,departments:m.value.length>0?m.value.map(h=>h.uid):void 0};try{e(q,{preferencesIn:i},"updateUserPreferences").then(()=>{p("Preferences updated successfully"),x()}).catch(h=>{d(h?.message||"Failed to update preferences")})}finally{v.value=!1}}const C={withClientQuery:f,withClientMutation:e,setupStore:u,toastSuccess:p,toastError:d,initPreferences:c,toggleDepartment:o,isDepartmentSelected:y,theme:_,expandedMenu:M,megaMenu:S,defaultRoute:P,departments:m,loading:b,saving:v,allDepartments:L,availablePages:O,fetchUserPreferences:x,savePreferences:V};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),$={class:"w-full space-y-6"},ee={key:0,class:"flex justify-center items-center h-32"},te={class:"space-y-6"},ne={class:"grid grid-cols-2 gap-4"},oe={class:"space-y-2"},ae={class:"space-y-2"},se=["value"],le={class:"space-y-4"},re={class:"flex items-center justify-between"},ie=["aria-checked"],ue={class:"flex items-center justify-between"},de=["aria-checked"],ce={class:"space-y-3"},ge={key:0,class:"text-sm text-muted-foreground italic"},fe={key:1,class:"grid grid-cols-2 gap-4"},pe=["id","checked","onChange"],me=["for"],be={class:"flex justify-end gap-3 pt-4"},ve=["disabled"];function xe(U,t,f,e,u,p){const d=E("beak-loader"),c=E("beak-button");return r(),l("div",$,[s(" Loading state "),e.loading?(r(),l("div",ee,[w(d,{message:"Loading preferences...",variant:"muted"})])):(r(),l(k,{key:1},[s(" Main content "),n("div",te,[t[12]||(t[12]=n("p",{class:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4 border border-border"},[n("span",{class:"font-medium text-foreground"},"Note:"),T(" Some changes require you to log out and log back in to take effect. ")],-1)),s(" Theme and Default Route in one line "),n("div",ne,[s(" Theme Preference "),n("div",oe,[t[5]||(t[5]=n("label",{class:"block text-l font-semibold text-foreground"}," Theme ",-1)),A(n("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.theme=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[...t[4]||(t[4]=[J('<option value="light">Light</option><option value="dark">Dark</option><option value="black-and-white">Black and White</option><option value="sterile">Sterile</option><option value="clinical-blue">Clinical Blue</option><option value="emergency-red">Emergency Red</option><option value="sterile-green">Sterile Green</option><option value="warm-neutral">Warm Neutral</option><option value="cool-slate">Cool Slate</option><option value="corporate-navy">Corporate Navy</option>',10)])],512),[[R,e.theme]])]),s(" Default Route "),n("div",ae,[t[7]||(t[7]=n("label",{class:"block text-l font-semibold text-foreground"}," Default Route ",-1)),A(n("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.defaultRoute=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[6]||(t[6]=n("option",{value:""},"No preference (Dashboard)",-1)),(r(!0),l(k,null,B(e.availablePages,o=>(r(),l("option",{key:o.value,value:o.value},I(o.label),9,se))),128))],512),[[R,e.defaultRoute]])])]),s(" Menu Preferences "),n("div",le,[s(" Expanded Menu Toggle "),n("div",re,[t[8]||(t[8]=n("label",{class:"text-l font-semibold text-foreground"}," Expanded Menu ",-1)),n("button",{onClick:t[2]||(t[2]=o=>e.expandedMenu=!e.expandedMenu),class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",e.expandedMenu?"bg-primary":"bg-muted"]),role:"switch","aria-checked":e.expandedMenu},[n("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-background transition-transform",e.expandedMenu?"translate-x-6":"translate-x-1"])},null,2)],10,ie)]),s(" Mega Menu Toggle "),n("div",ue,[t[9]||(t[9]=n("div",null,[n("label",{class:"text-l font-semibold text-foreground"}," Mega Menu "),n("p",{class:"text-sm text-muted-foreground"}," Enable horizontal mega menu instead of sidebar (takes effect after page reload) ")],-1)),n("button",{onClick:t[3]||(t[3]=o=>e.megaMenu=!e.megaMenu),class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",e.megaMenu?"bg-primary":"bg-muted"]),role:"switch","aria-checked":e.megaMenu},[n("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-background transition-transform",e.megaMenu?"translate-x-6":"translate-x-1"])},null,2)],10,de)])]),s(" Departments in 2 columns "),n("div",ce,[t[10]||(t[10]=n("label",{class:"block text-l font-semibold text-foreground"}," Departments Filter ",-1)),e.allDepartments.length===0?(r(),l("div",ge," No departments available ")):(r(),l("div",fe,[(r(!0),l(k,null,B(e.allDepartments,o=>(r(),l("div",{key:o.uid,class:"flex items-center"},[n("input",{id:`dept-${o.uid}`,type:"checkbox",checked:e.isDepartmentSelected(o.uid),onChange:y=>e.toggleDepartment(o),class:"h-4 w-4 rounded border-input bg-background cursor-pointer focus:outline-none focus:ring-2 focus:ring-ring"},null,40,pe),n("label",{for:`dept-${o.uid}`,class:"ml-2 text-sm font-medium text-foreground cursor-pointer"},I(o.name),9,me)]))),128))]))]),s(" Action Buttons "),n("div",be,[n("button",{type:"button",onClick:e.fetchUserPreferences,disabled:e.saving,class:"px-4 py-2 text-sm font-medium rounded-lg border border-input bg-background text-foreground hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,ve),w(c,{type:"button",onClick:e.savePreferences,disabled:e.saving||e.loading,loading:e.saving,class:"px-4 py-2"},{default:Y(()=>[...t[11]||(t[11]=[T(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])])])],2112))])}const ye=z(Z,[["render",xe],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/components/user/UserPreferences.vue"]]);export{ye as default};
