import{a0 as L,u as j,h as F,g as q,a7 as P,aW as H,_ as J,r as K,aa as D,c as n,o as d,F as r,A as e,J as _,K as v,L as a,a9 as O,a as y,N as T,P as V,D as B,H as R,a3 as b}from"./index-DCVfsbos.js";import{u as W}from"./shipment-WjNW9B2l.js";import{u as z}from"./shipment-BLjiMqHB.js";const G=L({__name:"ShipmentAssign",setup(I,{expose:t}){t();const m=W(),i=j(),{manageSamples:g}=z();m.fetchReferralLaboratories();const x=F(()=>m.getShipment);i.fetchSampleTypes();const f=q({sampleTypeUid:void 0,analysisUid:void 0}),c=P(!1),u=F(()=>{const o=[];return m.getSamples?.forEach(U=>{o?.some(E=>E.uid===U.uid)||o.push(U)}),o}),s=()=>{p(),m.fetchFoShipmentAssign({first:50,after:"",text:"",sortBy:void 0,...f})},l=()=>{const o=k();g(x?.value?.uid,o,"assign")};function p(){return m.samples?.filter(o=>o.checked)}function k(){return p().map(o=>({sampleUid:o.uid,shipedSampleUid:void 0,analyses:o.analysisResults?.filter(h=>h.checked)?.map(h=>h.uid)}))?.filter(o=>o?.analyses?.length>0)}function M(o){w()?c.value=!0:c.value=!1}function S(o){o.checked=!0}function C(o){o.checked=!1}async function N(){await u?.value?.forEach(o=>c.value?S(o):C(o))}function w(){return u?.value?.every(o=>o.checked===!0)}const A={shipmentStore:m,sampleStore:i,manageSamples:g,shipment:x,filterForm:f,allChecked:c,samples:u,filterSamples:s,assignToShipment:l,getSamplesChecked:p,getSelectedMetadata:k,checkCheck:M,check:S,unCheck:C,toggleCheckAll:N,areAllChecked:w,FButton:H};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),Q={class:"space-y-6"},X={action:"post",class:"space-y-4"},Y={class:"flex flex-wrap gap-4 items-end"},Z={class:"flex-1 min-w-[200px]"},$={class:"block space-y-1.5"},ee=["value"],te={class:"rounded-md border border-border"},se={class:"overflow-x-auto"},oe={key:0,class:"p-4 text-center"},ie={key:1,class:"w-full beak-table"},ne={class:"border-b border-border bg-muted/50"},de={class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},le={class:"divide-y divide-border"},ae={class:"p-4 align-middle"},re=["onUpdate:modelValue","onChange"],me={class:"p-4 align-middle"},ce={class:"text-sm font-medium text-foreground"},ue={class:"p-4 align-middle"},pe={class:"text-sm font-medium text-foreground"},fe={class:"p-4 align-middle"},he={class:"text-sm font-medium text-foreground"},ge={class:"p-4 align-middle"},xe={class:"text-sm text-foreground"},_e={class:"space-y-2"},ve=["onUpdate:modelValue","disabled"],ye={class:"flex-1"},be={class:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary"},ke={class:"p-4 align-middle"},Se={class:"text-sm text-foreground"},Ce={class:"p-4 align-middle"},we={class:"text-sm text-foreground"},Ae={class:"p-4 align-middle"},Ue={class:"inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary"},Fe={class:"flex justify-end"};function De(I,t,m,i,g,x){const f=K("beak-loader"),c=D("motion-slide-left"),u=D("motion-slide-right");return d(),n("div",Q,[r((d(),n("form",X,[e("div",Y,[e("div",Z,[e("label",$,[t[3]||(t[3]=e("span",{class:"text-sm font-medium leading-none"},"Sample Type",-1)),r(e("select",{name:"analyses_uids","onUpdate:modelValue":t[0]||(t[0]=s=>i.filterForm.sampleTypeUid=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[(d(!0),n(_,null,v(i.sampleStore.sampleTypes,s=>(d(),n("option",{key:s.uid,value:s.uid},a(s.name),9,ee))),128))],512),[[O,i.filterForm.sampleTypeUid]])])]),e("div",null,[r(y(i.FButton,{onClick:t[1]||(t[1]=B(s=>i.filterSamples(),["prevent"])),color:"sky-800",class:"h-10 px-4"},{default:T(()=>[...t[4]||(t[4]=[V(" Apply Filters ",-1)])]),_:1},512),[[R,!0]])])])])),[[c]]),e("div",te,[e("div",se,[i.shipmentStore.fetchingSamples?(d(),n("div",oe,[y(f,{message:"Fetching samples ..."})])):(d(),n("table",ie,[e("thead",null,[e("tr",ne,[e("th",de,[r(e("input",{type:"checkbox",onChange:i.toggleCheckAll,"onUpdate:modelValue":t[2]||(t[2]=s=>i.allChecked=s),class:"h-4 w-4 rounded border-input text-primary focus:ring-primary"},null,544),[[b,i.allChecked]])]),t[5]||(t[5]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},null,-1)),t[6]||(t[6]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Sample ID",-1)),t[7]||(t[7]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Sample Type",-1)),t[8]||(t[8]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Client Sample ID",-1)),t[9]||(t[9]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Analysis",-1)),t[10]||(t[10]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Date Created",-1)),t[11]||(t[11]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Date Received",-1)),t[12]||(t[12]=e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground"},"Status",-1))])]),r((d(),n("tbody",le,[(d(!0),n(_,null,v(i.shipmentStore.samples,s=>(d(),n("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",ae,[r(e("input",{type:"checkbox","onUpdate:modelValue":l=>s.checked=l,onChange:l=>i.checkCheck(s),class:"h-4 w-4 rounded border-input text-primary focus:ring-primary"},null,40,re),[[b,s.checked]])]),t[13]||(t[13]=e("td",{class:"p-4 align-middle"},null,-1)),e("td",me,[e("div",ce,a(s?.sampleId),1)]),e("td",ue,[e("div",pe,a(s?.sampleType?.name),1)]),e("td",fe,[e("div",he,a(s?.analysisRequest?.clientRequestId),1)]),e("td",ge,[e("div",xe,[e("ul",_e,[(d(!0),n(_,null,v(s?.analysisResults,l=>(d(),n("li",{key:l.uid,class:"flex items-center space-x-2"},[r(e("input",{type:"checkbox","onUpdate:modelValue":p=>l.checked=p,class:"h-4 w-4 rounded border-input text-primary focus:ring-primary",disabled:!s.checked},null,8,ve),[[b,l.checked]]),e("span",ye,a(l?.analysis?.name),1),e("span",be,a(l?.status),1)]))),128))])])]),e("td",ke,[e("div",Se,a(s?.createdAt),1)]),e("td",Ce,[e("div",we,a(s?.dateReceived),1)]),e("td",Ae,[e("span",Ue,a(s?.status),1)])]))),128))])),[[u]])]))])]),e("section",Fe,[r(y(i.FButton,{onClick:B(i.assignToShipment,["prevent"]),color:"orange-600",class:"h-10 px-4"},{default:T(()=>[...t[14]||(t[14]=[V(" Assign Samples ",-1)])]),_:1},512),[[R,!0]])])])}const Re=J(G,[["render",De],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/shipment/_id/ShipmentAssign.vue"]]);export{Re as default};
