import{a0 as q,f as I,a7 as m,ad as L,_ as G,r as k,c as p,o as c,A as e,C as J,E as A,a as K,J as H,K as O,L as x,N as D,D as P,F as M,a2 as C}from"./index-B3ZheI5m.js";import{c as Q,a as z,u as R,b as F}from"./index.esm-C1wdlr_y.js";import{a4 as W,aa as X,ab as Y}from"./microbiology.mutations-BmMdh5Z0.js";const Z=q({__name:"AbxHost",setup(N,{expose:t}){t();const{withClientMutation:f,withClientQuery:o}=I();let u=m(!1),b=m("");const a=m(!0),n=m(null),s=Q({name:z().trim().required("Name is required")}),{handleSubmit:v,resetForm:h,setValues:_,errors:S}=R({validationSchema:s,initialValues:{name:"",description:""}}),{value:V}=F("name"),{value:B}=F("description"),r=m([]);L(()=>{o(W,{},"abxHostAll").then(i=>{i&&(r.value=i)})});function T(i,l={}){a.value=i,u.value=!0,b.value=(i?"Create":"Edit")+" Abx Host",i?(n.value=null,h()):(n.value=l.uid??null,_({name:l.name??"",description:l.description??""}))}const E=v(i=>{const l={name:i.name,description:i.description};a.value===!0&&f(X,{payload:l},"createAbxHost").then(d=>{d&&r.value.unshift(d)}),a.value===!1&&n.value&&f(Y,{uid:n.value,payload:l},"updateAbxHost").then(d=>{if(d){const y=r.value.findIndex(g=>g.uid==d.uid);y>-1&&(r.value=[...r.value.map((g,U)=>U===y?d:g)])}}),u.value=!1}),w={withClientMutation:f,withClientQuery:o,get showModal(){return u},set showModal(i){u=i},get formTitle(){return b},set formTitle(i){b=i},formAction:a,currentUid:n,hostSchema:s,handleSubmit:v,resetForm:h,setValues:_,errors:S,name:V,description:B,abxHosts:r,FormManager:T,saveForm:E};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={class:"space-y-6"},$={class:"overflow-x-auto"},ee={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card shadow-dashboard rounded-lg p-6"},te={class:"min-w-full divide-y divide-border beak-table"},oe={class:"bg-background divide-y divide-border"},se={class:"whitespace-nowrap text-sm text-foreground"},ie={class:"whitespace-nowrap text-sm text-foreground"},ne={class:"text-xl font-semibold text-foreground"},ae={class:"grid grid-cols-2 gap-4"},re={class:"block"},le={key:0,class:"text-sm text-destructive"},de={class:"block"};function ue(N,t,f,o,u,b){const a=k("beak-heading"),n=k("beak-modal");return c(),p(H,null,[e("div",j,[K(a,{title:"Antibiotic Host"}),e("div",$,[e("div",ee,[e("table",te,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"text-left text-sm font-semibold text-foreground"},"Description"),e("th",{class:""})])],-1)),e("tbody",oe,[(c(!0),p(H,null,O(o.abxHosts,s=>(c(),p("tr",{key:s?.uid},[e("td",se,x(s?.name),1),e("td",ie,x(s?.description),1),t[4]||(t[4]=e("td",{class:"whitespace-nowrap text-right text-sm"},null,-1))]))),128))])])])])]),o.showModal?(c(),J(n,{key:0,onClose:t[3]||(t[3]=s=>o.showModal=!1)},{header:D(()=>[e("h3",ne,x(o.formTitle),1)]),body:D(()=>[e("form",{onSubmit:t[2]||(t[2]=P((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"space-y-6 p-4"},[e("div",ae,[e("label",re,[t[6]||(t[6]=e("span",{class:"text-sm font-medium text-foreground"},"Name",-1)),M(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[0]||(t[0]=s=>o.name=s),placeholder:"Name ..."},null,512),[[C,o.name]]),o.errors.name?(c(),p("p",le,x(o.errors.name),1)):A("",!0)]),e("label",de,[t[7]||(t[7]=e("span",{class:"text-sm font-medium text-foreground"},"Description",-1)),M(e("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":t[1]||(t[1]=s=>o.description=s),placeholder:"Begin typing ..."},null,512),[[C,o.description]])])]),t[8]||(t[8]=e("hr",{class:"border-border"},null,-1)),t[9]||(t[9]=e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save Abx Host ",-1))],32)]),_:1})):A("",!0)],64)}const be=G(Z,[["render",ue],["__scopeId","data-v-fee2aafa"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/microbiology/breakpoints/AbxHost.vue"]]);export{be as default};
