import{a0 as D,f as N,a7 as m,h as T,_ as V,r as g,c as f,o as d,A as e,E as R,C as B,a as j,N as p,P as O,J as w,K as U,L as _,D as q,F as I,a2 as J}from"./index-DCVfsbos.js";import{c as L,a as P,u as K,b as z}from"./index.esm-89YX2EbQ.js";import{s as G,t as H}from"./analyses.mutations-BEU63HnJ.js";import{u as Q}from"./analysis-BI7XPyQA.js";const W=D({__name:"RejectionReasons",setup(E,{expose:o}){o();const i=Q(),{withClientMutation:s}=N(),c=m(!1),v=m(""),l=m(!1),r=m(null),u=L({reason:P().trim().required("Reason is required")}),{handleSubmit:t,resetForm:b,setValues:y}=K({validationSchema:u,initialValues:{reason:""}}),{value:F,errorMessage:C}=z("reason");i.fetchRejectionReasons();const M=T(()=>i.getRejectionReasons);function h(n){s(G,n,"createRejectionReason").then(a=>i.addRejectionReason(a))}function x(n){r.value&&s(H,{uid:r.value,...n},"updateRejectionReason").then(a=>i.updateRejectionReason(a))}function S(n,a={}){l.value=n,c.value=!0,v.value=(n?"CREATE":"EDIT")+" REJECTION REASON",n?(r.value=null,b({values:{reason:""}})):(r.value=a.uid??null,y({reason:a.reason??""}))}const A=t(n=>{const a={reason:n.reason};l.value===!0&&h(a),l.value===!1&&x(a),c.value=!1}),k={analysisStore:i,withClientMutation:s,showModal:c,formTitle:v,formAction:l,currentUid:r,rejectionSchema:u,handleSubmit:t,resetForm:b,setValues:y,reason:F,reasonError:C,rejectionReasons:M,addRejectionReason:h,editRejectionReason:x,FormManager:S,saveForm:A};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),X={class:"space-y-6"},Y={class:"shadow-sm rounded-lg bg-card p-6"},Z={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-border beak-table"},ee={class:"divide-y divide-border bg-background"},oe={class:"whitespace-nowrap text-sm text-foreground"},se={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},te=["onClick"],ne={class:"text-lg font-bold text-foreground"},ae={class:"space-y-4"},re={class:"space-y-2"},ie={key:0,class:"text-sm text-destructive"};function le(E,o,i,s,c,v){const l=g("beak-button"),r=g("beak-heading"),u=g("beak-modal");return d(),f(w,null,[e("div",X,[j(r,{title:"Rejection Reasons"},{default:p(()=>[j(l,{onClick:o[0]||(o[0]=t=>s.FormManager(!0))},{default:p(()=>[...o[4]||(o[4]=[O("Add Rejection Reason",-1)])]),_:1})]),_:1}),e("div",Y,[e("div",Z,[e("table",$,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Reason"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ee,[(d(!0),f(w,null,U(s.rejectionReasons,t=>(d(),f("tr",{key:t?.uid,class:"hover:bg-muted/50"},[e("td",oe,_(t?.reason),1),e("td",se,[e("button",{onClick:b=>s.FormManager(!1,t),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,te)])]))),128))])])])])]),R(" Rejection Reason Form Modal "),s.showModal?(d(),B(u,{key:0,onClose:o[3]||(o[3]=t=>s.showModal=!1)},{header:p(()=>[e("h3",ne,_(s.formTitle),1)]),body:p(()=>[e("form",{onSubmit:o[2]||(o[2]=q((...t)=>s.saveForm&&s.saveForm(...t),["prevent"])),class:"p-6 space-y-6"},[e("div",ae,[e("label",re,[o[6]||(o[6]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Rejection Reason",-1)),I(e("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":o[1]||(o[1]=t=>s.reason=t),placeholder:"Reason ..."},null,512),[[J,s.reason]]),s.reasonError?(d(),f("p",ie,_(s.reasonError),1)):R("v-if",!0)])]),o[7]||(o[7]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):R("v-if",!0)],64)}const fe=V(W,[["render",le],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/analyses/RejectionReasons.vue"]]);export{fe as default};
