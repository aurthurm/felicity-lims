const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BeakSwitch-DTeAYq0B.js","assets/index-B3ZheI5m.js","assets/index-C_1sfwqa.css"])))=>i.map(i=>d[i]);
import{a0 as v,f as w,h as x,a1 as S,a6 as A,aG as G,_ as U,c as t,o as r,A as s,J as l,K as p,L as f,a as B}from"./index-B3ZheI5m.js";import{u as D}from"./user-BHZZlXLC.js";const V=v({__name:"Permissions",setup(y,{expose:u}){u();const g=S(()=>A(()=>import("./BeakSwitch-DTeAYq0B.js"),__vite__mapDeps([0,1,2])));let e=D();const{withClientMutation:b}=w();e.fetchGroupsAndPermissions();const h=x(()=>e.getGroups);function n(o,d){return o?.permissions?.some(a=>a?.uid===d?.uid)??!1}const i=(o,d)=>o?.reduce(function(a,_){return(a[_[d]]=a[_[d]]||[]).push(_),a},{}),c=x(()=>Array.from(Object.entries(i(e.getPermissions,"target"))));function m(o,d){b(G,{groupUid:o?.uid,permissionUid:d?.uid},"updateGroupPermissions").then(a=>e.updateGroupsAndPermissions(a))}function P(o,d,a){a!==n(o,d)&&m(o,d)}const k={BeakSwitch:g,get userStore(){return e},set userStore(o){e=o},withClientMutation:b,groups:h,hasPermission:n,groupBy:i,permissions:c,updateGroupPerms:m,handlePermissionToggle:P};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),z={class:"space-y-6"},C={class:"bg-background rounded-lg shadow-sm overflow-hidden"},E={class:"relative"},L={class:"w-full beak-table"},O={class:"overflow-y-auto max-h-[700px] scrollbar-thin scrollbar-thumb-border scrollbar-track-muted"},T={class:"w-full beak-table"},j={class:"divide-y divide-border"},N={class:"bg-muted/50"},F={class:"px-4 py-3 font-medium text-sm text-foreground"},I={class:"px-4 py-2 text-sm text-muted-foreground"};function J(y,u,g,e,b,h){return r(),t("div",z,[s("div",C,[s("div",E,[s("table",L,[s("thead",null,[s("tr",null,[u[0]||(u[0]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"}," Permissions ",-1)),(r(!0),t(l,null,p(e.groups,n=>(r(),t("th",{key:n.uid,class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border text-right text-xs font-medium text-muted-foreground uppercase tracking-wider"},f(n.name),1))),128)),u[1]||(u[1]=s("th",{class:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 py-3 border-b border-border"},null,-1))])])]),s("div",O,[s("table",T,[s("tbody",j,[(r(!0),t(l,null,p(e.permissions,n=>(r(),t(l,{key:n[0]},[s("tr",N,[s("td",F,f(n[0]),1),(r(!0),t(l,null,p(e.groups,i=>(r(),t("td",{class:"px-4 py-3 font-medium text-sm text-muted-foreground",key:i.uid}))),128))]),(r(!0),t(l,null,p(n[1],i=>(r(),t("tr",{key:i.uid},[s("td",I,f(i.action),1),(r(!0),t(l,null,p(e.groups,c=>(r(),t("td",{key:c.uid,class:"px-4 py-2"},[B(e.BeakSwitch,{"model-value":e.hasPermission(c,i),"onUpdate:modelValue":m=>e.handlePermissionToggle(c,i,m),reverse:""},null,8,["model-value","onUpdate:modelValue"])]))),128))]))),128))],64))),128))])])])])])])}const R=U(V,[["render",J],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/users/Permissions.vue"]]);export{R as default};
