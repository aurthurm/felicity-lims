import{a0 as B,f as I,ac as L,ad as A,a7 as c,_ as R,r as b,c as a,o as i,A as t,E as u,C as j,a as w,L as r,F as f,H as q,N as M,a2 as E,J as _,K as k,a9 as U,D as H}from"./index-DCVfsbos.js";import{A as J,E as K}from"./clients.mutations-DUBsbRkU.js";import{u as O}from"./location-DdmSnePa.js";import{u as z}from"./client-B-7vfgTR.js";import{s as G}from"./index-BaPnjn4Y.js";const Q=B({__name:"Client",setup(T,{expose:e}){e();const v=O(),{withClientMutation:o}=I(),C=L(),p=z();A(()=>{p.fetchClientByUid(C.query.clientUid),v.fetchCountries()});let m=c(!1),d=c(!1),g=c(""),l=c({}),n=c(),x=c();function F(s){v.filterProvincesByCountry(n.value)}function P(s){v.filterDistrictsByProvince(x.value)}function N(s,y={}){d.value=s,g.value=`${s?"CREATE":"EDIT"} CLIENT`,m.value=!0,s?l.value={}:(n.value=y?.district?.province?.countryUid,x.value=y?.district?.provinceUid,l.value=y)}function h(){o(J,{payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"createClient").then(s=>p.addClient(s))}function S(){o(K,{uid:l?.value?.uid,payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"updateClient").then(s=>p.updateClient(s))}function V(){d.value&&h(),d.value||S(),m.value=!1,l.value={}}const D={locationStore:v,withClientMutation:o,route:C,clientStore:p,get showClientModal(){return m},set showClientModal(s){m=s},get createItem(){return d},set createItem(s){d=s},get formTitle(){return g},set formTitle(s){g=s},get form(){return l},set form(s){l=s},get countryUid(){return n},set countryUid(s){n=s},get provinceUid(){return x},set provinceUid(s){x=s},getProvinces:F,getDistricts:P,FormManager:N,addClient:h,editClient:S,saveForm:V,get shield(){return G}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),W={class:"grid grid-cols-12 gap-4 mt-2 mb-4"},X={class:"col-span-12"},Y={class:"bg-background rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Z={key:0,class:"py-4 text-center"},$={key:1,class:"grid grid-cols-12 gap-3"},ee={class:"col-span-12 px-3 sm:px-0"},te={class:"flex justify-between sm:text-sm md:text-base lg:text-lg text-foreground font-bold"},oe={class:"grid grid-cols-2 mt-2"},ne={class:"col-span-1"},se={class:"flex"},le={class:"text-foreground text-sm md:text-base"},ie={class:"flex"},re={class:"text-foreground text-sm md:text-base"},ae={class:"flex"},de={class:"text-foreground text-sm md:text-base"},me={class:"col-span-1"},ce={class:"flex"},ue={class:"text-foreground text-sm md:text-base"},fe={class:"flex"},ve={class:"text-foreground text-sm md:text-base"},pe={action:"post",class:"p-1"},ge={class:"grid grid-cols-2 gap-x-4 mb-4"},xe={class:"block col-span-1 mb-2"},be={class:"block col-span-1 mb-2"},_e={class:"grid grid-cols-3 gap-x-4 mb-4"},Ce={class:"block col-span-1 mb-2"},ye=["value"],we={class:"block col-span-1 mb-2"},ke=["value"],Ue={class:"block col-span-1 mb-2"},he=["value"];function Se(T,e,v,o,C,p){const m=b("beak-loader"),d=b("font-awesome-icon"),g=b("router-view"),l=b("beak-modal");return i(),a(_,null,[t("div",null,[t("div",W,[t("section",X,[u(" Listing Item Card "),t("div",Y,[o.clientStore.fetchingClient?(i(),a("div",Z,[w(m,{message:"Fetching client metadata ..."})])):(i(),a("div",$,[u(" Summary Column "),t("div",ee,[t("div",te,[t("span",null,r(o.clientStore.client?.name),1),t("div",null,[f(t("button",{onClick:e[0]||(e[0]=n=>o.FormManager(!1,o.clientStore.client)),class:"p-1 ml-2 rounded-sm border border-foreground text-muted-foreground text-base transition duration-300 hover:text-primary focus:outline-none"},[w(d,{icon:"fa-edit"})],512),[[q,o.shield.hasRights(o.shield.actions.UPDATE,o.shield.objects.CLIENT)]])])]),e[15]||(e[15]=t("hr",null,null,-1)),t("div",oe,[t("div",ne,[u(" Client Details "),t("div",se,[e[10]||(e[10]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Province:",-1)),t("span",le,r(o.clientStore.client?.district?.province?.name),1)]),t("div",ie,[e[11]||(e[11]=t("span",{class:"text-foreground text-sm font-medium w-16"},"District:",-1)),t("span",re,r(o.clientStore.client?.district?.name),1)]),t("div",ae,[e[12]||(e[12]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Code:",-1)),t("span",de,r(o.clientStore.client?.code),1)])]),t("div",me,[u(" Communication Details "),t("div",ce,[e[13]||(e[13]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Email:",-1)),t("span",ue,r(o.clientStore.client?.email),1)]),t("div",fe,[e[14]||(e[14]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Mobile:",-1)),t("span",ve,r(o.clientStore.client?.mobilePhone),1)])])])])]))])])]),w(g)]),u(" Location Edit Form Modal "),o.showClientModal?(i(),j(l,{key:0,onClose:e[9]||(e[9]=n=>o.showClientModal=!1)},{header:M(()=>[t("h3",null,r(o.formTitle),1)]),body:M(()=>[t("form",pe,[t("div",ge,[t("label",xe,[e[16]||(e[16]=t("span",{class:"text-foreground"},"Name",-1)),f(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=n=>o.form.name=n),placeholder:"Name ..."},null,512),[[E,o.form.name]])]),t("label",be,[e[17]||(e[17]=t("span",{class:"text-foreground"},"Code",-1)),f(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=n=>o.form.code=n),placeholder:"Code ..."},null,512),[[E,o.form.code]])])]),t("div",_e,[t("label",Ce,[e[19]||(e[19]=t("span",{class:"text-foreground"},"Country",-1)),f(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[3]||(e[3]=n=>o.countryUid=n),onChange:e[4]||(e[4]=n=>o.getProvinces(n))},[e[18]||(e[18]=t("option",null,null,-1)),(i(!0),a(_,null,k(o.locationStore.countries,n=>(i(),a("option",{key:n.uid,value:n.uid},r(n.name),9,ye))),128))],544),[[U,o.countryUid]])]),t("label",we,[e[21]||(e[21]=t("span",{class:"text-foreground"},"Province",-1)),f(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[5]||(e[5]=n=>o.provinceUid=n),onChange:e[6]||(e[6]=n=>o.getDistricts(n))},[e[20]||(e[20]=t("option",null,null,-1)),(i(!0),a(_,null,k(o.locationStore.provinces,n=>(i(),a("option",{key:n.uid,value:n.uid},r(n.name),9,ke))),128))],544),[[U,o.provinceUid]])]),t("label",Ue,[e[23]||(e[23]=t("span",{class:"text-foreground"},"District",-1)),f(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[7]||(e[7]=n=>o.form.districtUid=n)},[e[22]||(e[22]=t("option",null,null,-1)),(i(!0),a(_,null,k(o.locationStore.districts,n=>(i(),a("option",{key:n.uid,value:n.uid},r(n.name),9,he))),128))],512),[[U,o.form.districtUid]])])]),e[24]||(e[24]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[8]||(e[8]=H(n=>o.saveForm(),["prevent"])),class:"m-2 -mb-4 w-full rounded-sm border border-primary bg-primary px-4 py-2 text-primary-foreground transition-colors duration-500 ease select-none hover:bg-primary focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):u("v-if",!0)],64)}const Pe=R(Q,[["render",Se],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/client/_id/Client.vue"]]);export{Pe as default};
