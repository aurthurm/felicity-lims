import{a0 as D,f as T,a7 as f,h as V,_ as q,r as g,c as m,o as u,A as e,C as N,E as k,a as L,N as b,P as B,J as w,K as U,L as _,D as j,F as I,a2 as P}from"./index-B3ZheI5m.js";import{c as J,a as K,u as O,b as R}from"./index.esm-C1wdlr_y.js";import{W,X}from"./analyses.mutations--kSQRsEC.js";import{u as z}from"./analysis-B6vUCJdb.js";const G=D({__name:"QCLevels",setup(Q,{expose:t}){t();const r=z(),{withClientMutation:o}=T();let d=f(!1),c=f("");const a=f(!0),i=f(null),v=J({level:K().trim().required("QC level is required")}),{handleSubmit:l,resetForm:p,setValues:h}=O({validationSchema:v,initialValues:{level:""}}),{value:M,errorMessage:E}=R("level");r.fetchQCLevels();const F=V(()=>r.getQCLevels);function x(s){o(W,s,"createQcLevel").then(n=>r.addQcLevel(n))}function y(s){i.value&&o(X,{uid:i.value,...s},"updateQcLevel").then(n=>r.updateQcLevel(n))}function S(s,n={}){a.value=s,d.value=!0,c.value=(s?"CREATE":"EDIT")+" QC Level",s?(i.value=null,p({values:{level:""}})):(i.value=n.uid??null,h({level:n.level??""}))}const A=l(s=>{const n={level:s.level};a.value===!0&&x(n),a.value===!1&&y(n),d.value=!1}),C={analysisStore:r,withClientMutation:o,get showModal(){return d},set showModal(s){d=s},get formTitle(){return c},set formTitle(s){c=s},formAction:a,currentUid:i,qcLevelSchema:v,handleSubmit:l,resetForm:p,setValues:h,level:M,levelError:E,qcLevels:F,addQCLevel:x,editQCLevel:y,FormManager:S,saveForm:A};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),H={class:"shadow-sm rounded-lg bg-card p-6"},Y={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-border beak-table"},$={class:"divide-y divide-border bg-background"},ee={class:"whitespace-nowrap text-sm text-foreground"},te={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},oe=["onClick"],se={class:"text-lg font-semibold leading-none tracking-tight"},le={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"};function ie(Q,t,r,o,d,c){const a=g("beak-button"),i=g("beak-heading"),v=g("beak-modal");return u(),m(w,null,[e("div",null,[L(i,{title:"QC Levels"},{default:b(()=>[L(a,{onClick:t[0]||(t[0]=l=>o.FormManager(!0))},{default:b(()=>[...t[4]||(t[4]=[B("Add QC Level",-1)])]),_:1})]),_:1}),e("div",H,[e("div",Y,[e("table",Z,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Level"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",$,[(u(!0),m(w,null,U(o.qcLevels,l=>(u(),m("tr",{key:l?.uid,class:"hover:bg-muted/50"},[e("td",ee,_(l?.level),1),e("td",te,[e("button",{onClick:p=>o.FormManager(!1,l),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Edit ",8,oe)])]))),128))])])])])]),o.showModal?(u(),N(v,{key:0,onClose:t[3]||(t[3]=l=>o.showModal=!1)},{header:b(()=>[e("h3",se,_(o.formTitle),1)]),body:b(()=>[e("form",{onSubmit:t[2]||(t[2]=j((...l)=>o.saveForm&&o.saveForm(...l),["prevent"])),class:"space-y-4 p-4"},[e("div",le,[t[6]||(t[6]=e("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," QC Level ",-1)),I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.level=l),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter QC level name..."},null,512),[[P,o.level]]),o.levelError?(u(),m("p",ne,_(o.levelError),1)):k("",!0)]),t[7]||(t[7]=e("button",{type:"submit",class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Changes ",-1))],32)]),_:1})):k("",!0)],64)}const ce=q(G,[["render",ie],["__scopeId","data-v-89951d03"],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/analyses/QCLevels.vue"]]);export{ce as default};
