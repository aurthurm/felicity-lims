const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css"])))=>i.map(i=>d[i]);
import{a0 as j,f as $,t as ee,a7 as v,a5 as te,h as V,a1 as re,a6 as oe,_ as ie,r as T,c as d,o as n,a as q,A as e,E as m,C as se,N as h,P as ne,J as y,K as k,L as a,D as de,F as L,a9 as B,a2 as O}from"./index-DCVfsbos.js";import{c as ae,d as P,a as R,u as le,b as _}from"./index.esm-89YX2EbQ.js";import{K as ue,L as me}from"./analyses.mutations-BEU63HnJ.js";import{u as ce}from"./analysis-BI7XPyQA.js";import{u as pe}from"./setup-DMRnqeyP.js";const fe=j({__name:"DetectionLimit",props:{analysis:{type:Object,required:!0,default:()=>({})},analysisUid:{type:String,required:!0,default:0}},setup(E,{expose:t}){t();const D=re(()=>oe(()=>import("./index-DCVfsbos.js").then(i=>i.cl),__vite__mapDeps([0,1]))),r=ce(),l=pe(),{withClientMutation:f}=$(),c=E,{analysis:b}=ee(c);let o=v(!1),g=v("");const x=v(!0),p=v(null),M=ae({instrumentUid:R().trim().required("Instrument is required"),methodUid:R().trim().required("Method is required"),lowerLimit:P().typeError("Lower limit must be a number").required("Lower limit is required"),upperLimit:P().typeError("Upper limit must be a number").required("Upper limit is required")}),{handleSubmit:A,resetForm:S,setValues:N}=le({validationSchema:M,initialValues:{instrumentUid:"",methodUid:"",lowerLimit:"",upperLimit:""}}),{value:K,errorMessage:J}=_("instrumentUid"),{value:W,errorMessage:Y}=_("methodUid"),{value:z,errorMessage:G}=_("lowerLimit"),{value:H,errorMessage:Q}=_("upperLimit");te(()=>c.analysisUid,(i,s)=>{}),l.fetchInstruments();const w=V(()=>l.getInstruments);l.fetchMethods();const U=V(()=>l.getMethods);function I(i){f(ue,{payload:i},"createAnalysisDetectionLimit").then(s=>r.addAnalysisDetectionLimit(s))}function C(i){p.value&&f(me,{uid:p.value,payload:i},"updateAnalysisDetectionLimit").then(s=>r.updateAnalysisDetectionLimit(s))}function X(i,s={}){x.value=i,o.value=!0,g.value=(i?"CREATE":"EDIT")+" ANALYSIS DETECTION_LIMIT",i?(p.value=null,S({values:{instrumentUid:"",methodUid:"",lowerLimit:"",upperLimit:""}})):(p.value=s.uid??null,N({instrumentUid:s.instrumentUid??"",methodUid:s.methodUid??"",lowerLimit:s.lowerLimit??"",upperLimit:s.upperLimit??""}))}const Z=A(i=>{const s=b?.value?.uid;if(!s)return;const u={instrumentUid:i.instrumentUid,methodUid:i.methodUid,lowerLimit:Number(i.lowerLimit),upperLimit:Number(i.upperLimit),analysisUid:s};x.value===!0&&I(u),x.value===!1&&C(u),o.value=!1}),F={modal:D,analysisStore:r,setupStore:l,withClientMutation:f,props:c,analysis:b,get showModal(){return o},set showModal(i){o=i},get formTitle(){return g},set formTitle(i){g=i},formAction:x,currentUid:p,detectionSchema:M,handleSubmit:A,resetForm:S,setValues:N,instrumentUid:K,instrumentError:J,methodUid:W,methodError:Y,lowerLimit:z,lowerLimitError:G,upperLimit:H,upperLimitError:Q,instruments:w,methods:U,addAnalysisDetectionLimit:I,editAnalysisDetectionLimit:C,FormManager:X,saveForm:Z,instrumentName:i=>{const s=w?.value?.findIndex(u=>u.uid===i);return w?.value[s]?.name||"unknown"},methodName:i=>{const s=U?.value?.findIndex(u=>u.uid===i);return U?.value[s]?.name||"unknown"}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),be={class:"overflow-x-auto mt-4"},ge={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-card text-card-foreground rounded-lg border border-border"},xe={class:"min-w-full beak-table"},ve={class:"bg-card"},he={class:"px-4 py-2 whitespace-nowrap border-b border-border"},ye={class:"text-sm text-foreground"},Le={class:"px-4 py-2 whitespace-nowrap border-b border-border"},_e={class:"text-sm text-foreground"},we={class:"px-4 py-2 whitespace-nowrap border-b border-border"},Ue={class:"text-sm text-foreground"},ke={class:"px-4 py-2 whitespace-nowrap border-b border-border"},Ee={class:"text-sm text-foreground"},De={class:"px-4 py-2 whitespace-nowrap text-right border-b border-border"},Me=["onClick"],Ae={class:"text-lg font-bold text-foreground"},Se={class:"space-y-4"},Ne={class:"grid grid-cols-4 gap-4"},Ie={class:"space-y-2"},Ce=["value"],Fe={key:0,class:"text-sm text-destructive"},Ve={class:"space-y-2"},Te=["value"],qe={key:0,class:"text-sm text-destructive"},Be={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},Pe={class:"space-y-2"},Re={key:0,class:"text-sm text-destructive"};function Ke(E,t,D,r,l,f){const c=T("beak-button"),b=T("beak-heading");return n(),d(y,null,[q(b,{title:"Detection Limits"},{default:h(()=>[q(c,{onClick:t[0]||(t[0]=o=>r.FormManager(!0))},{default:h(()=>[...t[7]||(t[7]=[ne("Add Detection Limit",-1)])]),_:1})]),_:1}),e("div",be,[e("div",ge,[e("table",xe,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Instrument"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Method"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Lower Limit"),e("th",{class:"px-4 py-2 border-b border-border text-left text-sm font-medium text-muted-foreground"},"Upper Limit"),e("th",{class:"px-4 py-2 border-b border-border"})])],-1)),e("tbody",ve,[(n(!0),d(y,null,k(r.analysis?.detectionLimits,o=>(n(),d("tr",{key:o?.uid,class:"hover:bg-accent/50"},[e("td",he,[e("div",ye,a(r.instrumentName(o?.instrumentUid)),1)]),e("td",Le,[e("div",_e,a(r.methodName(o?.methodUid)),1)]),e("td",we,[e("div",Ue,a(o.lowerLimit),1)]),e("td",ke,[e("div",Ee,a(o.upperLimit),1)]),e("td",De,[e("button",{onClick:g=>r.FormManager(!1,o),class:"px-2 py-1 mr-2 border border-border bg-background text-foreground transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,Me)])]))),128))])])])]),m(" Detection Limit Form Modal "),r.showModal?(n(),se(r.modal,{key:0,onClose:t[6]||(t[6]=o=>r.showModal=!1),contentWidth:"w-2/4"},{header:h(()=>[e("h3",Ae,a(r.formTitle),1)]),body:h(()=>[e("form",{onSubmit:t[5]||(t[5]=de((...o)=>r.saveForm&&r.saveForm(...o),["prevent"])),class:"p-6 space-y-6"},[e("div",Se,[e("div",Ne,[e("label",Ie,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Instrument",-1)),L(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=o=>r.instrumentUid=o)},[t[9]||(t[9]=e("option",{value:""},"Select Instrument",-1)),(n(!0),d(y,null,k(r.instruments,o=>(n(),d("option",{key:o?.uid,value:o.uid},a(o?.name),9,Ce))),128))],512),[[B,r.instrumentUid]]),r.instrumentError?(n(),d("p",Fe,a(r.instrumentError),1)):m("v-if",!0)]),e("label",Ve,[t[12]||(t[12]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Method",-1)),L(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=o=>r.methodUid=o)},[t[11]||(t[11]=e("option",{value:""},"Select Method",-1)),(n(!0),d(y,null,k(r.methods,o=>(n(),d("option",{key:o?.uid,value:o.uid},a(o?.name),9,Te))),128))],512),[[B,r.methodUid]]),r.methodError?(n(),d("p",qe,a(r.methodError),1)):m("v-if",!0)]),e("label",Be,[t[13]||(t[13]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Lower Limit",-1)),L(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=o=>r.lowerLimit=o),placeholder:"Value ..."},null,512),[[O,r.lowerLimit]]),r.lowerLimitError?(n(),d("p",Oe,a(r.lowerLimitError),1)):m("v-if",!0)]),e("label",Pe,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Upper Limit",-1)),L(e("input",{type:"number",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[4]||(t[4]=o=>r.upperLimit=o),placeholder:"Value ..."},null,512),[[O,r.upperLimit]]),r.upperLimitError?(n(),d("p",Re,a(r.upperLimitError),1)):m("v-if",!0)])])]),t[15]||(t[15]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):m("v-if",!0)],64)}const Xe=ie(fe,[["render",Ke],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/analyses/services/DetectionLimit.vue"]]);export{Xe as default};
