import{a0 as X,h as g,_ as Z,c as n,o as r,E as a,A as e,J as y,K as w,L as b,Q as E,u as Ue,a4 as qe,f as Me,a7 as M,g as de,e as J,a5 as F,bn as Ne,r as ce,C as Ee,a as C,F as A,a9 as Q,a2 as I,M as Te,D as j,P as W}from"./index-DCVfsbos.js";import{Multiselect as Be}from"./vue-multiselect.esm-CQe58Q7H.js";import{u as Fe}from"./patient-rk8kC1RZ.js";import{u as Ie}from"./analysis-BI7XPyQA.js";import{u as je}from"./client-B-7vfgTR.js";import{u as Le}from"./billing-DgtkDXhi.js";import{u as be}from"./setup-DMRnqeyP.js";import{$ as Oe}from"./analyses.mutations-BEU63HnJ.js";import{c as k,e as L,i as ue,d as Ye,f as me,a as N,u as ze,b as P}from"./index.esm-89YX2EbQ.js";import{f as pe}from"./index-Cw3weLtk.js";/* empty css                                                                 */import"./location-DdmSnePa.js";import"./billing.queries-C5-RkHZH.js";const He=X({__name:"SampleCostBreakdown",props:{profiles:{type:Array,default:()=>[]},analyses:{type:Array,default:()=>[]},priceMap:{type:Map,required:!0},loading:{type:Boolean,default:!1}},setup(D,{expose:s}){s();const p=be(),t=D,v=g(()=>p.getLaboratory?.settings?.currency??"USD"),x=c=>c==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:v.value}).format(c),m=g(()=>t.profiles?.map(c=>({name:c.name,price:t.priceMap.get(`profile_${c.uid}`)??null}))??[]),f=g(()=>t.analyses?.map(c=>({name:c.name,price:t.priceMap.get(`analysis_${c.uid}`)??null}))??[]),o=g(()=>{let c=0;return m.value.forEach(S=>{S.price!==null&&(c+=S.price)}),f.value.forEach(S=>{S.price!==null&&(c+=S.price)}),c}),u={setupStore:p,props:t,currency:v,formatCurrency:x,profileCosts:m,analysisCosts:f,subtotal:o};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Ke={class:"space-y-2 text-sm"},Ge={key:0,class:"animate-pulse space-y-2"},Je={key:0,class:"space-y-1"},Qe={class:"text-foreground truncate flex-1 mr-2"},We={class:"text-foreground truncate flex-1 mr-2"},Xe={key:2,class:"border-t border-border pt-2 mt-2"},Ze={class:"flex justify-between items-center font-semibold"},$e={class:"text-primary text-base"},et={key:3,class:"text-muted-foreground italic"};function tt(D,s,p,t,v,x){return r(),n("div",Ke,[a(" Loading skeleton "),p.loading?(r(),n("div",Ge,[...s[0]||(s[0]=[e("div",{class:"h-4 bg-muted rounded w-3/4"},null,-1),e("div",{class:"h-4 bg-muted rounded w-1/2"},null,-1),e("div",{class:"h-4 bg-muted rounded w-full"},null,-1)])])):(r(),n(y,{key:1},[a(" Cost breakdown "),e("div",null,[a(" Profiles breakdown "),t.profileCosts.length>0?(r(),n("div",Je,[s[1]||(s[1]=e("div",{class:"text-xs font-semibold text-muted-foreground uppercase"},"Profiles",-1)),(r(!0),n(y,null,w(t.profileCosts,(m,f)=>(r(),n("div",{key:`profile-${f}`,class:"flex justify-between items-center"},[e("span",Qe,b(m.name),1),e("span",{class:E(m.price===null?"text-destructive":"text-foreground font-medium")},b(t.formatCurrency(m.price)),3)]))),128))])):a("v-if",!0),a(" Analyses breakdown "),t.analysisCosts.length>0?(r(),n("div",{key:1,class:E(["space-y-1",{"mt-3":t.profileCosts.length>0}])},[s[2]||(s[2]=e("div",{class:"text-xs font-semibold text-muted-foreground uppercase"},"Analyses",-1)),(r(!0),n(y,null,w(t.analysisCosts,(m,f)=>(r(),n("div",{key:`analysis-${f}`,class:"flex justify-between items-center"},[e("span",We,b(m.name),1),e("span",{class:E(m.price===null?"text-destructive":"text-foreground font-medium")},b(t.formatCurrency(m.price)),3)]))),128))],2)):a("v-if",!0),a(" Subtotal "),t.profileCosts.length>0||t.analysisCosts.length>0?(r(),n("div",Xe,[e("div",Ze,[s[3]||(s[3]=e("span",{class:"text-foreground"},"Subtotal:",-1)),e("span",$e,b(t.formatCurrency(t.subtotal)),1)])])):a("v-if",!0),a(" No items message "),t.profileCosts.length===0&&t.analysisCosts.length===0?(r(),n("div",et," No tests selected ")):a("v-if",!0)])],2112))])}const st=Z(He,[["render",tt],["__scopeId","data-v-d366cf69"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/components/billing/SampleCostBreakdown.vue"]]),ot=X({__name:"CostSummary",props:{sampleCosts:{type:Array,required:!0},grandTotal:{type:Number,required:!0},currency:{type:String,default:"USD"},loading:{type:Boolean,default:!1}},setup(D,{expose:s}){s();const p=D,t=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:p.currency}).format(m),v=g(()=>p.sampleCosts.some(m=>m.subtotal>0)),x={props:p,formatCurrency:t,hasCosts:v};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),lt={class:"bg-muted rounded-lg p-6 mt-6 border border-border"},at={key:0,class:"animate-pulse space-y-3"},rt={class:"space-y-2 mb-4"},nt={class:"text-foreground"},it={class:"font-medium text-foreground"},dt={class:"border-t border-border pt-4 mt-4"},ct={class:"flex justify-between items-center"},ut={class:"text-2xl font-bold text-primary"};function mt(D,s,p,t,v,x){return r(),n("div",lt,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-foreground mb-4"},"Cost Summary",-1)),a(" Loading skeleton "),p.loading?(r(),n("div",at,[...s[0]||(s[0]=[e("div",{class:"h-4 bg-background rounded w-3/4"},null,-1),e("div",{class:"h-4 bg-background rounded w-1/2"},null,-1),e("div",{class:"h-6 bg-background rounded w-full mt-4"},null,-1)])])):t.hasCosts?(r(),n(y,{key:1},[a(" Cost summary content "),e("div",null,[a(" Per-sample breakdown "),e("div",rt,[(r(!0),n(y,null,w(p.sampleCosts,(m,f)=>(r(),n("div",{key:f,class:"flex justify-between items-center text-sm"},[e("span",nt,"Sample "+b(f+1)+":",1),e("span",it,b(t.formatCurrency(m.subtotal)),1)]))),128))]),a(" Grand total "),e("div",dt,[e("div",ct,[s[1]||(s[1]=e("span",{class:"text-xl font-bold text-foreground"},"Total:",-1)),e("span",ut,b(t.formatCurrency(p.grandTotal)),1)])]),a(" Note "),s[2]||(s[2]=e("div",{class:"mt-4 text-xs text-muted-foreground italic"}," * Final cost may vary after discounts and adjustments are applied ",-1))])],2112)):(r(),n(y,{key:2},[a(" No costs message "),s[3]||(s[3]=e("div",{class:"text-muted-foreground italic text-sm"}," No tests selected. Add profiles or analyses to see cost breakdown. ",-1))],2112))])}const pt=Z(ot,[["render",mt],["__scopeId","data-v-8d1e035b"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/components/billing/CostSummary.vue"]]),bt=X({__name:"SamplesAdd",setup(D,{expose:s}){s();const p=Ue(),t=Fe(),v=Ie(),x=je(),m=Le(),f=be(),o=qe(),{withClientMutation:u}=Me(),c=M(!1);let S=g(()=>t.getPatient),O=de({first:void 0,after:"",text:"",sortBy:["name"],contacts:!0});x.fetchClients(O);const fe=g(()=>x.getClients),U=M(null),T=M([]),ge=l=>{U.value=l,R.value=null};p.fetchSampleTypes();const ye=g(()=>p.getSampleTypes);let Y=de({first:void 0,after:"",text:"",sortBy:["name"]});v.fetchAnalysesServices(Y);const ve=g(()=>{const l=v.getAnalysesServicesSimple;let i=new Set;return l.forEach((d,h)=>{d.profiles?.length===0&&i.add(d)}),[...i]});v.fetchAnalysesProfiles();const xe=g(()=>v.getAnalysesProfiles),z=M(!1),he=J().endOf("day").toDate(),$=k({sampleType:k().required("Sample type is required").test("sample-type-uid","Sample type is required",l=>!!l?.uid),dateCollected:ue().nullable(),dateReceived:ue().nullable(),profiles:L().nullable(),analyses:L().nullable()}).test("profiles-or-analyses","Samples must have either profiles or services",l=>(l?.profiles?.length??0)+(l?.analyses?.length??0)>0),ee=k({clientRequestId:N().required("Client Request ID is Required"),clinicalData:k({clinicalIndication:N().nullable(),symptoms:L().of(N()),symptomsRaw:N().nullable(),treatmentNotes:N().nullable(),pregnancyStatus:me().nullable(),breastFeeding:me().nullable(),vitals:k().nullable(),otherContext:k().nullable()}).nullable(),client:k().required("Client is Required"),clientContact:k().nullable().required("Client Contact is Required"),samples:L().of($).required().min(1,"Add at least 1 sample"),priority:Ye()});function H(l){return{sampleType:null,dateCollected:J(new Date),dateReceived:J(new Date),profiles:[],analyses:[],...l}}function te(){return{clinicalIndication:"",symptoms:[],symptomsRaw:"",treatmentNotes:"",pregnancyStatus:null,breastFeeding:null,vitals:{},otherContext:{}}}const{handleSubmit:se,errors:we,setFieldValue:oe}=ze({validationSchema:ee,initialValues:{priority:0,client:null,clientContact:null,samples:[H({})],clinicalData:te()}});F(()=>S.value?.client,l=>{l&&oe("client",l)},{immediate:!0});const{value:Se}=P("clientRequestId"),{value:B}=P("clinicalData"),{value:K}=P("client"),{value:R}=P("clientContact"),{value:_e}=P("priority");F(K,l=>{U.value=l??null,R.value&&R.value?.clientUid!==l?.uid&&(R.value=null)},{immediate:!0}),F(U,async l=>{if(!l){T.value=[];return}let i;if(l.contacts?.length)i=l.contacts,T.value=i;else{const d=l.uid;if(await x.fetchClientContacts(d),U.value?.uid!==d)return;i=[...x.getClientContacts],T.value=i}i.length===1&&(R.value=i[0])},{immediate:!0});const{value:V}=P("samples"),q=M(""),Ce=()=>{q.value.trim()&&!B.value?.symptoms?.includes(q.value.trim())&&(B.value?.symptoms?.push(q.value.trim()),q.value="")},ke=l=>{B.value?.symptoms?.splice(l,1)},De=se(l=>{z.value=!0,le(l)});function le(l){const i={patientUid:S.value?.uid,clientRequestId:l.clientRequestId,clinicalData:l.clinicalData,clientUid:K?.value?.uid,clientContactUid:R?.value?.uid,samples:l.samples?.map(d=>({...d,profiles:d.profiles?.map(h=>h.uid),analyses:d.analyses?.map(h=>h.uid),sampleType:d.sampleType?.uid,dateCollected:d.dateCollected?pe(d.dateCollected,"YYYY-MM-DD HH:mm"):null,dateReceived:d.dateReceived?pe(d.dateReceived,"YYYY-MM-DD HH:mm"):null}))};u(Oe,{payload:i},"createAnalysisRequest").then(d=>{p.addAnalysisRequest(d),o.push({name:"patient-detail",params:{patientUid:S.value?.uid}})}).finally(()=>{z.value=!1})}function Re(){const l=H({});V.value.push(l)}function Ve(l){V.value.length>1&&V.value.splice(l,1)}const Ae=g(()=>V.value.length>1),ae=g(()=>f.getLaboratory?.settings?.allowBilling??!1),G=g(()=>{const l=new Map;return m.profilePrices.forEach((i,d)=>{l.set(`profile_${d}`,i.amount)}),m.analysisPrices.forEach((i,d)=>{l.set(`analysis_${d}`,i.amount)}),l}),re=g(()=>V.value.map(l=>{let i=0;const d={profiles:[],analyses:[],subtotal:0};return l.profiles?.forEach(h=>{const _=G.value.get(`profile_${h.uid}`);_!==void 0&&(i+=_,d.profiles.push({name:h.name,price:_}))}),l.analyses?.forEach(h=>{const _=G.value.get(`analysis_${h.uid}`);_!==void 0&&(i+=_,d.analyses.push({name:h.name,price:_}))}),d.subtotal=i,d})),Pe=g(()=>re.value.reduce((l,i)=>l+i.subtotal,0)),ne=Ne((l,i)=>{m.fetchBatchPrices(l,i)},300);F(()=>V.value.map(l=>({profiles:l.profiles?.map(i=>i.uid)??[],analyses:l.analyses?.map(i=>i.uid)??[]})),l=>{if(!ae.value)return;const i=new Set,d=new Set;l.forEach(h=>{h.profiles.forEach(_=>i.add(_)),h.analyses.forEach(_=>d.add(_))}),(i.size>0||d.size>0)&&ne(Array.from(i),Array.from(d))},{deep:!0});const ie={sampleStore:p,patientStore:t,analysisStore:v,clientStore:x,billingStore:m,setupStore:f,router:o,withClientMutation:u,clinicalDataExpanded:c,get patient(){return S},set patient(l){S=l},get clientParams(){return O},set clientParams(l){O=l},clients:fe,selectedClient:U,clientContactsForDropdown:T,selectContact:ge,sampleTypes:ye,get analysesParams(){return Y},set analysesParams(l){Y=l},analysesServices:ve,analysesProfiles:xe,arSaving:z,maxDate:he,sampleSchema:$,arSchema:ee,createDefaultSample:H,createDefaultClinicalData:te,handleSubmit:se,errors:we,setFieldValue:oe,clientRequestId:Se,clinicalData:B,client:K,clientContact:R,priority:_e,samples:V,newSymptom:q,addSymptom:Ce,removeSymptom:ke,submitARForm:De,addAnalysesRequest:le,addSample:Re,removeSample:Ve,canRemoveSample:Ae,billingEnabled:ae,priceMap:G,sampleCosts:re,grandTotal:Pe,debouncedFetchPrices:ne,contactLabel:l=>`${l.firstName} ${l.lastName}`,get VueMultiselect(){return Be},SampleCostBreakdown:st,CostSummary:pt};return Object.defineProperty(ie,"__isScriptSetup",{enumerable:!1,value:!0}),ie}}),ft={class:"space-y-6"},gt={key:0,class:"absolute inset-0 bg-background/10 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",role:"status","aria-live":"polite"},yt={class:"flex flex-col items-center gap-4"},vt={class:"space-y-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ht={class:"flex items-center gap-x-4"},wt={class:"flex items-center gap-x-4"},St={class:"text-sm text-destructive"},_t={class:"flex items-center gap-x-4"},Ct=["disabled"],kt={class:"text-sm text-destructive"},Dt={class:"flex items-center gap-x-4"},Rt=["disabled"],Vt={class:"text-sm text-destructive"},At={class:"border border-border rounded-lg bg-background/50"},Pt=["disabled"],Ut={key:0,class:"px-4 py-4 space-y-4 border-t border-border"},qt={class:"flex items-center gap-x-4"},Mt=["disabled"],Nt={class:"flex flex-wrap mt-2"},Et={class:"flex gap-2"},Tt=["disabled","onKeydown"],Bt=["disabled"],Ft={class:"flex flex-wrap gap-2 mt-2"},It=["onClick","disabled"],jt={class:"flex items-center gap-x-4"},Lt=["disabled"],Ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Yt={class:"flex items-center gap-x-4"},zt=["disabled"],Ht={class:"flex items-center gap-x-4"},Kt=["disabled"],Gt={id:"samples",class:"space-y-4"},Jt={class:"flex justify-between items-center"},Qt={class:"flex items-center gap-4"},Wt={class:"text-sm text-destructive"},Xt=["disabled"],Zt={class:"relative border border-border rounded-lg bg-background/50 overflow-visible"},$t={class:"absolute left-0 top-0 bottom-0 w-48 bg-muted/30 border-r border-border z-10"},es={class:"w-full h-full beak-table"},ts={key:0,class:"border-b border-border"},ss={class:"overflow-x-auto overflow-y-visible pl-48"},os={class:"w-80 min-w-80 beak-table"},ls={class:"border-b border-border bg-muted/30"},as={class:"flex items-center justify-between"},rs=["onClick","disabled","title"],ns={class:"border-b border-border hover:bg-muted/20 h-20 min-h-20 max-h-20"},is={class:"border-b border-border hover:bg-muted/20 h-20 min-h-20 max-h-20"},ds={class:"border-b border-border hover:bg-muted/20 h-20 min-h-20 max-h-20"},cs={class:"border-b border-border hover:bg-muted/20 h-20 min-h-20 max-h-20"},us={class:"border-b border-border hover:bg-muted/20 h-20 min-h-20 max-h-20"},ms={key:0,class:"border-b border-border hover:bg-muted/20"},ps={class:"hover:bg-muted/20 h-24"},bs={class:"p-3 bg-muted/50 rounded-md text-sm space-y-1"},fs={key:0,class:"text-xs text-destructive whitespace-nowrap"},gs={key:1},ys={class:"text-xs text-muted-foreground"},vs={class:"text-xs text-muted-foreground"},xs={class:"flex justify-end pt-4"},hs=["disabled"];function ws(D,s,p,t,v,x){const m=ce("beak-loader"),f=ce("VueDatePicker");return r(),n("div",ft,[s[37]||(s[37]=e("h5",{class:"text-xl font-semibold text-foreground mb-4"},"Add Analysis Request",-1)),e("form",{action:"post",class:"relative p-6 bg-background rounded-lg shadow-sm space-y-6",onSubmit:s[11]||(s[11]=j((...o)=>t.submitARForm&&t.submitARForm(...o),["prevent"]))},[a(" Loading overlay "),t.arSaving?(r(),n("div",gt,[e("div",yt,[C(m,{message:"Adding Samples...",variant:"primary",size:"lg"})])])):a("v-if",!0),e("div",vt,[a(" Client, Contact, and Priority - Same Row "),e("div",xt,[e("label",ht,[s[12]||(s[12]=e("span",{class:"text-sm font-medium text-foreground"},"Client",-1)),C(t.VueMultiselect,{class:"w-full",placeholder:"Select a Client",modelValue:t.client,"onUpdate:modelValue":s[0]||(s[0]=o=>t.client=o),options:t.clients,searchable:!0,disabled:t.arSaving,label:"name","track-by":"uid",onSelect:t.selectContact,"option-height":60,"close-on-select":!0},null,8,["modelValue","options","disabled"])]),e("label",wt,[s[13]||(s[13]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap"},"Client Contact",-1)),C(t.VueMultiselect,{class:"w-full",placeholder:"Select a Client Contact",modelValue:t.clientContact,"onUpdate:modelValue":s[1]||(s[1]=o=>t.clientContact=o),options:t.clientContactsForDropdown,"custom-label":t.contactLabel,disabled:t.arSaving,"track-by":"uid","close-on-select":!0,searchable:!0},null,8,["modelValue","options","disabled"]),e("div",St,b(t.errors.clientContact),1)]),e("label",_t,[s[15]||(s[15]=e("span",{class:"text-sm font-medium text-foreground"},"Priority",-1)),A(e("select",{name:"priority",id:"priority","onUpdate:modelValue":s[2]||(s[2]=o=>t.priority=o),disabled:t.arSaving,class:"w-full px-3 py-2 bg-background/10 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50","aria-label":"Select priority level"},[...s[14]||(s[14]=[e("option",{value:"0"},"Low",-1),e("option",{value:"1"},"Medium",-1),e("option",{value:"2"},"High",-1)])],8,Ct),[[Q,t.priority]]),e("div",kt,b(t.errors.priority),1)])]),e("label",Dt,[s[16]||(s[16]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap"},"Client Request ID",-1)),A(e("input",{class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":s[3]||(s[3]=o=>t.clientRequestId=o),disabled:t.arSaving,placeholder:"CRID ..."},null,8,Rt),[[I,t.clientRequestId]]),e("div",Vt,b(t.errors.clientRequestId),1)]),a(" Clinical Data Section - Collapsible "),e("div",At,[e("button",{type:"button",onClick:s[4]||(s[4]=o=>t.clinicalDataExpanded=!t.clinicalDataExpanded),disabled:t.arSaving,class:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-muted/20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 rounded-t-lg disabled:opacity-50 disabled:cursor-not-allowed"},[s[18]||(s[18]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap"},"Clinical Data (click to expand)",-1)),(r(),n("svg",{class:E(["w-5 h-5 transition-transform duration-200",{"rotate-180":t.clinicalDataExpanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[17]||(s[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Pt),t.clinicalDataExpanded?(r(),n("div",Ut,[a(" Clinical Indication "),e("label",qt,[s[19]||(s[19]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap w-40"},"Clinical Indication",-1)),A(e("input",{class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":s[5]||(s[5]=o=>t.clinicalData.clinicalIndication=o),disabled:t.arSaving,placeholder:"Enter clinical indication..."},null,8,Mt),[[I,t.clinicalData.clinicalIndication]])]),a(" Symptoms "),e("div",Nt,[s[20]||(s[20]=e("span",{class:"text-sm font-medium text-foreground w-40"},"Symptoms",-1)),e("div",Et,[A(e("input",{class:"flex-1 px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":s[6]||(s[6]=o=>t.newSymptom=o),disabled:t.arSaving,placeholder:"Add symptom...",onKeydown:Te(j(t.addSymptom,["prevent","stop"]),["enter"])},null,40,Tt),[[I,t.newSymptom]]),e("button",{type:"button",onClick:t.addSymptom,disabled:t.arSaving,class:"px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50 disabled:cursor-not-allowed"}," Add ",8,Bt)]),e("div",Ft,[(r(!0),n(y,null,w(t.clinicalData.symptoms,(o,u)=>(r(),n("span",{key:u,class:"inline-flex items-center gap-1 px-2 py-1 bg-muted text-muted-foreground rounded-md text-sm"},[W(b(o)+" ",1),e("button",{type:"button",onClick:c=>t.removeSymptom(u),disabled:t.arSaving,class:"text-destructive hover:text-destructive/80 ml-1 disabled:opacity-50 disabled:cursor-not-allowed"}," × ",8,It)]))),128))])]),a(" Raw Symptoms "),a('            <label class="flex items-center gap-x-4">'),a('              <span class="text-sm font-medium text-foreground whitespace-nowrap">Raw Symptoms (Other)</span>'),a("              <textarea"),a('                  class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"'),a('                  v-model="clinicalData.symptomsRaw"'),a('                  placeholder="Enter raw symptoms description..."'),a('                  rows="3"'),a("              />"),a("            </label>"),a(" Treatment Notes "),e("label",jt,[s[21]||(s[21]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap w-40"},"Treatment Notes",-1)),A(e("textarea",{class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":s[7]||(s[7]=o=>t.clinicalData.treatmentNotes=o),disabled:t.arSaving,placeholder:"Enter treatment notes...",rows:"2"},null,8,Lt),[[I,t.clinicalData.treatmentNotes]])]),a(" Patient Status "),e("div",Ot,[e("label",Yt,[s[23]||(s[23]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap w-40"},"Pregnancy Status",-1)),A(e("select",{"onUpdate:modelValue":s[8]||(s[8]=o=>t.clinicalData.pregnancyStatus=o),disabled:t.arSaving,class:"w-full ml-4 px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"},[...s[22]||(s[22]=[e("option",{value:null},"Not specified",-1),e("option",{value:!0},"Pregnant",-1),e("option",{value:!1},"Not pregnant",-1)])],8,zt),[[Q,t.clinicalData.pregnancyStatus]])]),e("label",Ht,[s[25]||(s[25]=e("span",{class:"text-sm font-medium text-foreground whitespace-nowrap w-40"},"Breastfeeding Status",-1)),A(e("select",{"onUpdate:modelValue":s[9]||(s[9]=o=>t.clinicalData.breastFeeding=o),disabled:t.arSaving,class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"},[...s[24]||(s[24]=[e("option",{value:null},"Not specified",-1),e("option",{value:!0},"Breastfeeding",-1),e("option",{value:!1},"Not breastfeeding",-1)])],8,Kt),[[Q,t.clinicalData.breastFeeding]])])]),a(" Vitals "),a(` <div class="space-y-2">
              <span class="text-sm font-medium text-foreground whitespace-nowrap">Vital Signs</span>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Temperature (°C)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.temperature!"
                      placeholder="36.5"
                  />
                </label>
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Blood Pressure (mmHg)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.bloodPressure!"
                      placeholder="120/80"
                  />
                </label>
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Heart Rate (bpm)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.heartRate!"
                      placeholder="72"
                  />
                </label>
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Respiratory Rate (breaths/min)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.respiratoryRate!"
                      placeholder="16"
                  />
                </label>
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Oxygen Saturation (%)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.oxygenSaturation!"
                      placeholder="98"
                  />
                </label>
                <label class="flex flex-col space-y-1">
                  <span class="text-xs text-muted-foreground whitespace-nowrap">Weight (kg)</span>
                  <input
                      class="w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50"
                      v-model="clinicalData.vitals?.weight!"
                      placeholder="70"
                  />
                </label>
              </div>
            </div> `)])):a("v-if",!0)])]),e("section",Gt,[e("div",Jt,[s[26]||(s[26]=e("h5",{class:"text-lg font-semibold text-foreground"},"Samples",-1)),e("div",Qt,[e("span",Wt,b(t.errors.samples),1),t.samples?.length!==20?(r(),n("button",{key:0,type:"button",onClick:s[10]||(s[10]=j(o=>t.addSample(),["prevent"])),disabled:t.arSaving,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50 disabled:cursor-not-allowed"}," Add Sample ",8,Xt)):a("v-if",!0)])]),e("div",Zt,[a(" Fixed field labels column "),e("div",$t,[e("table",es,[s[34]||(s[34]=e("thead",null,[e("tr",{class:"border-b border-border bg-muted/30"},[e("th",{class:"p-4 text-left text-sm font-medium text-foreground h-16"}," Field ")])],-1)),e("tbody",null,[s[28]||(s[28]=e("tr",{class:"border-b border-border h-20 min-h-20 max-h-20"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Sample Type ")],-1)),s[29]||(s[29]=e("tr",{class:"border-b border-border h-20 min-h-20 max-h-20"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Date Collected ")],-1)),s[30]||(s[30]=e("tr",{class:"border-b border-border h-20 min-h-20 max-h-20"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Date Received ")],-1)),s[31]||(s[31]=e("tr",{class:"border-b border-border h-20 min-h-20 max-h-20"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Analysis Profiles ")],-1)),s[32]||(s[32]=e("tr",{class:"border-b border-border h-20 min-h-20 max-h-20"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Analysis Services ")],-1)),t.billingEnabled?(r(),n("tr",ts,[...s[27]||(s[27]=[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Cost Breakdown ",-1)])])):a("v-if",!0),s[33]||(s[33]=e("tr",{class:"h-24"},[e("td",{class:"p-4 text-sm font-medium text-foreground bg-muted/10"}," Selection Summary ")],-1))])])]),a(" Scrollable samples content "),e("div",ss,[e("table",os,[e("thead",null,[e("tr",ls,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("th",{key:u,class:"p-4 text-center text-sm font-medium text-foreground w-80 min-w-80 relative h-16 border-r"},[e("div",as,[e("span",null,"Sample "+b(u+1),1),e("button",{type:"button",onClick:j(c=>t.removeSample(u),["prevent"]),disabled:!t.canRemoveSample||t.arSaving,class:E(["px-2 py-1 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 text-xs ml-2",t.canRemoveSample&&!t.arSaving?"bg-destructive text-destructive-foreground hover:bg-destructive/90 focus:ring-destructive/50":"bg-muted text-muted-foreground cursor-not-allowed"]),title:t.canRemoveSample&&!t.arSaving?"Remove sample":"At least one sample is required"}," Remove ",10,rs)])]))),128))])]),e("tbody",null,[a(" Sample Type Row "),e("tr",ns,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[C(t.VueMultiselect,{class:"w-full",placeholder:"Select sample type",modelValue:o.sampleType,"onUpdate:modelValue":c=>o.sampleType=c,options:t.sampleTypes,searchable:!0,disabled:t.arSaving,label:"name","track-by":"uid",openDirection:"below"},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]))),128))]),a(" Date Collected Row "),e("tr",is,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[C(f,{class:"w-full",modelValue:o.dateCollected,"onUpdate:modelValue":c=>o.dateCollected=c,"max-date":t.maxDate,disabled:t.arSaving,"time-picker-inline":"",teleport:!0},null,8,["modelValue","onUpdate:modelValue","max-date","disabled"])]))),128))]),a(" Date Received Row "),e("tr",ds,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[C(f,{class:"w-full",modelValue:o.dateReceived,"onUpdate:modelValue":c=>o.dateReceived=c,"min-date":o.dateCollected&&typeof o.dateCollected=="object"&&!(o.dateCollected instanceof Date)&&typeof o.dateCollected.toDate=="function"?o.dateCollected.toDate():o.dateCollected||null,"max-date":t.maxDate,disabled:t.arSaving,"time-picker-inline":"",teleport:!0},null,8,["modelValue","onUpdate:modelValue","min-date","max-date","disabled"])]))),128))]),a(" Analysis Profiles Row "),e("tr",cs,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[C(t.VueMultiselect,{class:"w-full whitespace-nowrap z-10",placeholder:"Select analysis profiles",modelValue:o.profiles,"onUpdate:modelValue":c=>o.profiles=c,options:t.analysesProfiles,searchable:!0,disabled:t.arSaving,multiple:!0,label:"name","track-by":"uid",openDirection:"below"},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]))),128))]),a(" Analysis Services Row "),e("tr",us,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[C(t.VueMultiselect,{class:"w-full whitespace-nowrap",placeholder:"Select analysis services",modelValue:o.analyses,"onUpdate:modelValue":c=>o.analyses=c,options:t.analysesServices,searchable:!0,disabled:t.arSaving,multiple:!0,label:"name","track-by":"uid",openDirection:"below"},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]))),128))]),a(" Cost Breakdown Row (Only if billing enabled) "),t.billingEnabled?(r(),n("tr",ms,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r align-top"},[C(t.SampleCostBreakdown,{profiles:o.profiles,analyses:o.analyses,"price-map":t.priceMap,loading:t.billingStore.fetchingPrices},null,8,["profiles","analyses","price-map","loading"])]))),128))])):a("v-if",!0),a(" Selection Summary Row "),e("tr",ps,[(r(!0),n(y,null,w(t.samples,(o,u)=>(r(),n("td",{key:u,class:"p-4 w-80 border-r"},[e("div",bs,[o.profiles?.length===0&&o.analyses?.length===0?(r(),n("div",fs," ⚠️ Select profiles or services ")):(r(),n("div",gs,[e("div",ys,[s[35]||(s[35]=e("strong",null,"Profiles:",-1)),W(" "+b(o.profiles?.length||0)+" selected ",1)]),e("div",vs,[s[36]||(s[36]=e("strong",null,"Services:",-1)),W(" "+b(o.analyses?.length||0)+" selected ",1)])]))])]))),128))])])])])])]),a(" Cost Summary (Only if billing enabled) "),t.billingEnabled?(r(),Ee(t.CostSummary,{key:1,"sample-costs":t.sampleCosts,"grand-total":t.grandTotal,currency:t.setupStore.getLaboratory?.settings?.currency??"USD",loading:t.billingStore.fetchingPrices},null,8,["sample-costs","grand-total","currency","loading"])):a("v-if",!0),e("div",xs,[e("button",{type:"submit",disabled:t.arSaving,class:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50 disabled:cursor-not-allowed"}," Save Sample(s) ",8,hs)])],32)])}const Ts=Z(bt,[["render",ws],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/sample/SamplesAdd.vue"]]);export{Ts as default};
