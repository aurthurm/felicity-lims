const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css","assets/BeakDataTable-CSqXb4Dl.js","assets/vue-multiselect.esm-CQe58Q7H.js"])))=>i.map(i=>d[i]);
import{a0 as be,f as ce,a7 as d,g as ge,h as xe,ad as ve,ak as N,a1 as Q,a6 as O,_ as pe,r as W,c as g,o as u,a as R,A as o,E as r,C as he,N as w,D as ye,L as x,F as m,a2 as f,J as we}from"./index-DCVfsbos.js";import{c as B,a as v,d as ke,u as Ce,b as a}from"./index.esm-89YX2EbQ.js";import{i as Ae,P as Te,Q as _e,R as Re,T as Me}from"./microbiology.mutations-CV_wjL4A.js";const qe=be({__name:"AbxQCRange",setup(L,{expose:e}){e();const U=Q(()=>O(()=>import("./index-DCVfsbos.js").then(i=>i.cl),__vite__mapDeps([0,1]))),t=Q(()=>O(()=>import("./BeakDataTable-CSqXb4Dl.js"),__vite__mapDeps([2,0,1]))),P=Q(()=>O(()=>import("./vue-multiselect.esm-CQe58Q7H.js"),__vite__mapDeps([3,0,1]))),{withClientMutation:k,withClientQuery:p}=ce();let h=d(!1),n=d("");const C=d(!0),y=d(null),S=B({guideline:B().required("Guideline is required"),year:ke().typeError("Year is required").required("Year is required"),strain:v().trim().required("Strain is required"),referenceTable:v().trim().required("Reference table is required"),whonetOrgCode:v().trim().required("Whonet org code is required"),antibiotic:v().trim().required("Antibiotic is required"),abxTest:v().trim().required("Abx test is required"),whonetAbxCode:v().trim().required("Whonet abx code is required"),method:v().trim().required("Method is required"),medium:B().nullable(),minimum:v().trim().nullable(),maximum:v().trim().nullable(),comments:v().trim().nullable()}),{handleSubmit:V,resetForm:M,setValues:D,errors:Y}=Ce({validationSchema:S,initialValues:{guideline:null,year:"",strain:"",referenceTable:"",whonetOrgCode:"",antibiotic:"",abxTest:"",whonetAbxCode:"",method:"",medium:null,minimum:"",maximum:"",comments:""}}),{value:z}=a("guideline"),{value:J}=a("year"),{value:K}=a("strain"),{value:H}=a("referenceTable"),{value:X}=a("whonetOrgCode"),{value:Z}=a("antibiotic"),{value:j}=a("abxTest"),{value:$}=a("whonetAbxCode"),{value:ee}=a("method"),{value:te}=a("medium"),{value:oe}=a("minimum"),{value:ie}=a("maximum"),{value:ne}=a("comments"),I=d(!1),b=d([]),E=d([]),F=d([]);let l=ge({first:50,after:"",text:"",sortBy:["-year"],filterAction:!1});const q=d(0);let A=d({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1});const se=xe(()=>b?.value?.length+" of "+q.value+" qcRanges"),re=d([{name:"UID",value:"uid",sortable:!1,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Guideline",value:"guideline.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Year",value:"year",sortable:!1,sortBy:"asc",hidden:!1},{name:"Strain",value:"strain",sortable:!1,sortBy:"asc",hidden:!1},{name:"ReferenceTable",value:"referenceTable",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetOrgCode",value:"whonetOrgCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Antibiotic",value:"antibiotic",sortable:!1,sortBy:"asc",hidden:!1},{name:"AbxTest",value:"abxTest",sortable:!1,sortBy:"asc",hidden:!1},{name:"WhonetAbxCode",value:"whonetAbxCode",sortable:!1,sortBy:"asc",hidden:!1},{name:"Method",value:"method",sortable:!1,sortBy:"asc",hidden:!1},{name:"Medium",value:"medium.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Minimum",value:"minimum",sortable:!1,sortBy:"asc",hidden:!1},{name:"Maximum",value:"maximum",sortable:!1,sortBy:"asc",hidden:!1}]);function T(i){p(Me,{text:i.text,pageSize:i.first,sortBy:i.sortBy},void 0).then(s=>{const c=s.abxQcRangeAll,_=c.items;i.filterAction?(b.value=[],b.value=_):b.value=N(b.value,_,"uid"),q.value=c?.totalCount,A.value=c?.pageInfo}).finally(()=>{I.value=!1})}ve(()=>{p(Ae,{},"abxGuidelinesAll").then(i=>{i&&(E.value=i)}),T(l),p(Te,{},"abxMediumAll").then(i=>{i&&(F.value=i)})});function le(i){l.first=100,l.after="",l.text=i.filterText,l.filterAction=!0,T(l)}function ae(i){l.first=i.fetchCount,l.after=A?.value?.endCursor,l.text=i.filterText,l.filterAction=!1,T(l)}const de=()=>M();function ue(i,s={}){C.value=i,h.value=!0,n.value=(i?"Create":"Edit")+" QcRange",i?(y.value=null,M()):(y.value=s.uid??null,D({guideline:s.guideline??null,year:s.year??"",strain:s.strain??"",referenceTable:s.referenceTable??"",whonetOrgCode:s.whonetOrgCode??"",antibiotic:s.antibiotic??"",abxTest:s.abxTest??"",whonetAbxCode:s.whonetAbxCode??"",method:s.method??"",medium:s.medium??null,minimum:s.minimum??"",maximum:s.maximum??"",comments:s.comments??""}))}const me=V(i=>{const s={guidelineUid:i.guideline?.uid,year:Number(i.year),strain:i.strain,referenceTable:i.referenceTable,whonetOrgCode:i.whonetOrgCode,antibiotic:i.antibiotic,abxTest:i.abxTest,whonetAbxCode:i.whonetAbxCode,method:i.method,mediumUid:i.medium?.uid??null,minimum:i.minimum??null,maximum:i.maximum??null};C.value===!0&&k(_e,{payload:s},"createAbxQcRange").then(c=>{c&&(b.value=N(b.value,[c],"uid"))}),C.value===!1&&y.value&&k(Re,{uid:y.value,payload:s},"updateAbxQcRange").then(c=>{if(c){const _=b.value.findIndex(fe=>fe.uid==c.uid);b.value[_]=c}}),h.value=!1}),G={modal:U,DataTable:t,VueMultiselect:P,withClientMutation:k,withClientQuery:p,get showModal(){return h},set showModal(i){h=i},get formTitle(){return n},set formTitle(i){n=i},formAction:C,currentUid:y,qcRangeSchema:S,handleSubmit:V,resetForm:M,setValues:D,errors:Y,guideline:z,year:J,strain:K,referenceTable:H,whonetOrgCode:X,antibiotic:Z,abxTest:j,whonetAbxCode:$,method:ee,medium:te,minimum:oe,maximum:ie,comments:ne,fetchingQcRanges:I,qcRanges:b,abxGuidelines:E,abxMediums:F,get abxParams(){return l},set abxParams(i){l=i},qcRangesCount:q,get qcRangesPageInfo(){return A},set qcRangesPageInfo(i){A=i},countNone:se,tableColumns:re,fetchQcRanges:T,searchQcRanges:le,showMoreQcRanges:ae,resetQcRange:de,FormManager:ue,saveForm:me};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),Qe={class:"rounded-lg shadow-sm bg-card p-6"},Oe={class:"text-xl font-semibold text-foreground"},Be={class:"space-y-4"},Ue={class:"grid grid-cols-2 gap-4"},Pe={class:"block"},Se={key:0,class:"text-sm text-destructive"},Ve={class:"block"},De={key:0,class:"text-sm text-destructive"},Ie={class:"space-y-4"},Ee={class:"grid grid-cols-3 gap-4"},Fe={class:"block"},Ge={key:0,class:"text-sm text-destructive"},Ne={class:"block"},We={key:0,class:"text-sm text-destructive"},Le={class:"block"},Ye={key:0,class:"text-sm text-destructive"},ze={class:"block"},Je={key:0,class:"text-sm text-destructive"},Ke={class:"block"},He={key:0,class:"text-sm text-destructive"},Xe={class:"block"},Ze={key:0,class:"text-sm text-destructive"},je={class:"block"},$e={key:0,class:"text-sm text-destructive"},et={class:"block"},tt={class:"block"},ot={class:"block"},it={class:"space-y-4"},nt={class:"block"};function st(L,e,U,t,P,k){const p=W("beak-heading"),h=W("beak-modal");return u(),g(we,null,[R(p,{title:"Quality Control range"},{default:w(()=>[r(' <beak-button @click="FormManager(true)">Add Medium</beak-button> ')]),_:1}),o("div",Qe,[R(t.DataTable,{columns:t.tableColumns,data:t.qcRanges,toggleColumns:!0,loading:t.fetchingQcRanges,paginable:!0,pageMeta:{fetchCount:t.abxParams.first,hasNextPage:!0,countNone:t.countNone},searchable:!0,filterable:!1,onOnSearchKeyUp:t.searchQcRanges,onOnSearchFocus:t.resetQcRange,onOnPaginate:t.showMoreQcRanges,selectable:!1},{footer:w(()=>[...e[15]||(e[15]=[])]),_:1},8,["columns","data","loading","pageMeta"])]),r(" QcRange Form Modal "),t.showModal?(u(),he(h,{key:0,onClose:e[14]||(e[14]=n=>t.showModal=!1),"content-width":"w-1/2"},{header:w(()=>[o("h3",Oe,x(t.formTitle),1)]),body:w(()=>[o("form",{onSubmit:e[13]||(e[13]=ye((...n)=>t.saveForm&&t.saveForm(...n),["prevent"])),class:"space-y-6 p-4"},[r(" Basic Information "),o("div",Be,[e[18]||(e[18]=o("h4",{class:"text-lg font-semibold text-foreground"},"Basic Information",-1)),o("div",Ue,[o("label",Pe,[e[16]||(e[16]=o("span",{class:"text-sm font-medium text-foreground"},"Guidelines",-1)),R(t.VueMultiselect,{modelValue:t.guideline,"onUpdate:modelValue":e[0]||(e[0]=n=>t.guideline=n),options:t.abxGuidelines,searchable:!0,label:"name",class:"mt-1"},{default:w(()=>[r(' track-by="uid" ')]),_:1},8,["modelValue","options"]),t.errors.guideline?(u(),g("p",Se,x(t.errors.guideline),1)):r("v-if",!0)]),o("label",Ve,[e[17]||(e[17]=o("span",{class:"text-sm font-medium text-foreground"},"Year",-1)),m(o("input",{type:"number",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[1]||(e[1]=n=>t.year=n),placeholder:"Enter year"},null,512),[[f,t.year,void 0,{number:!0}]]),t.errors.year?(u(),g("p",De,x(t.errors.year),1)):r("v-if",!0)])])]),r(" Coding Systems "),o("div",Ie,[o("div",Ee,[o("label",Fe,[e[19]||(e[19]=o("span",{class:"text-sm font-medium text-foreground"},"Strain",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[2]||(e[2]=n=>t.strain=n),placeholder:"Strain"},null,512),[[f,t.strain]]),t.errors.strain?(u(),g("p",Ge,x(t.errors.strain),1)):r("v-if",!0)]),o("label",Ne,[e[20]||(e[20]=o("span",{class:"text-sm font-medium text-foreground"},"Reference Table",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[3]||(e[3]=n=>t.referenceTable=n),placeholder:"Reference Table"},null,512),[[f,t.referenceTable]]),t.errors.referenceTable?(u(),g("p",We,x(t.errors.referenceTable),1)):r("v-if",!0)]),o("label",Le,[e[21]||(e[21]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Org Code",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[4]||(e[4]=n=>t.whonetOrgCode=n),placeholder:"Whonet Org Code"},null,512),[[f,t.whonetOrgCode]]),t.errors.whonetOrgCode?(u(),g("p",Ye,x(t.errors.whonetOrgCode),1)):r("v-if",!0)]),o("label",ze,[e[22]||(e[22]=o("span",{class:"text-sm font-medium text-foreground"},"Antibiotic",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[5]||(e[5]=n=>t.antibiotic=n),placeholder:"Antibiotic"},null,512),[[f,t.antibiotic]]),t.errors.antibiotic?(u(),g("p",Je,x(t.errors.antibiotic),1)):r("v-if",!0)]),o("label",Ke,[e[23]||(e[23]=o("span",{class:"text-sm font-medium text-foreground"},"Abx Test",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[6]||(e[6]=n=>t.abxTest=n),placeholder:"Abx Test"},null,512),[[f,t.abxTest]]),t.errors.abxTest?(u(),g("p",He,x(t.errors.abxTest),1)):r("v-if",!0)]),o("label",Xe,[e[24]||(e[24]=o("span",{class:"text-sm font-medium text-foreground"},"Whonet Abx Code",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[7]||(e[7]=n=>t.whonetAbxCode=n),placeholder:"Whonet Abx Code"},null,512),[[f,t.whonetAbxCode]]),t.errors.whonetAbxCode?(u(),g("p",Ze,x(t.errors.whonetAbxCode),1)):r("v-if",!0)]),o("label",je,[e[25]||(e[25]=o("span",{class:"text-sm font-medium text-foreground"},"Method",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[8]||(e[8]=n=>t.method=n),placeholder:"Method"},null,512),[[f,t.method]]),t.errors.method?(u(),g("p",$e,x(t.errors.method),1)):r("v-if",!0)]),o("label",et,[e[26]||(e[26]=o("span",{class:"text-sm font-medium text-foreground"},"Medium",-1)),R(t.VueMultiselect,{modelValue:t.medium,"onUpdate:modelValue":e[9]||(e[9]=n=>t.medium=n),options:t.abxMediums,searchable:!0,label:"name",class:"mt-1"},null,8,["modelValue","options"])]),o("label",tt,[e[27]||(e[27]=o("span",{class:"text-sm font-medium text-foreground"},"Minimum",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[10]||(e[10]=n=>t.minimum=n),placeholder:"Minimum"},null,512),[[f,t.minimum]])]),o("label",ot,[e[28]||(e[28]=o("span",{class:"text-sm font-medium text-foreground"},"Maximum",-1)),m(o("input",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[11]||(e[11]=n=>t.maximum=n),placeholder:"Maximum"},null,512),[[f,t.maximum]])])])]),r(" Additional Information "),o("div",it,[o("label",nt,[e[29]||(e[29]=o("span",{class:"text-sm font-medium text-foreground"},"Comments",-1)),m(o("textarea",{class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","onUpdate:modelValue":e[12]||(e[12]=n=>t.comments=n),rows:"3",placeholder:"Additional comments..."},null,512),[[f,t.comments]])])]),e[30]||(e[30]=o("hr",{class:"border-border"},null,-1)),e[31]||(e[31]=o("button",{type:"submit",class:"w-full bg-primary text-primary-foreground rounded-sm px-4 py-2 transition-colors duration-300 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"}," Save QcRange ",-1))],32)]),_:1})):r("v-if",!0)],64)}const dt=pe(qe,[["render",st],["__scopeId","data-v-2041ea59"],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/microbiology/medium/AbxQCRange.vue"]]);export{dt as default};
