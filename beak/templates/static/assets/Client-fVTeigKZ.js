import{a0 as V,f as B,ac as A,ad as I,a7 as c,_ as L,r as x,c as d,o as i,A as t,C as R,E as j,a as y,L as r,F as u,H as q,N as D,a2 as M,J as b,K as w,a9 as k,D as H}from"./index-B3ZheI5m.js";import{A as J,E as K}from"./clients.mutations-bDvdJtaL.js";import{u as O}from"./location-D4s7i66G.js";import{u as z}from"./client-CXQzvEEi.js";import{s as G}from"./index-C7zlg90Q.js";const Q=V({__name:"Client",setup(E,{expose:e}){e();const f=O(),{withClientMutation:o}=B(),_=A(),v=z();I(()=>{v.fetchClientByUid(_.query.clientUid),f.fetchCountries()});let m=c(!1),a=c(!1),p=c(""),l=c({}),s=c(),g=c();function T(n){f.filterProvincesByCountry(s.value)}function P(n){f.filterDistrictsByProvince(g.value)}function F(n,C={}){a.value=n,p.value=`${n?"CREATE":"EDIT"} CLIENT`,m.value=!0,n?l.value={}:(s.value=C?.district?.province?.countryUid,g.value=C?.district?.provinceUid,l.value=C)}function U(){o(J,{payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"createClient").then(n=>v.addClient(n))}function h(){o(K,{uid:l?.value?.uid,payload:{name:l?.value?.name,code:l?.value?.code,districtUid:l?.value?.districtUid}},"updateClient").then(n=>v.updateClient(n))}function N(){a.value&&U(),a.value||h(),m.value=!1,l.value={}}const S={locationStore:f,withClientMutation:o,route:_,clientStore:v,get showClientModal(){return m},set showClientModal(n){m=n},get createItem(){return a},set createItem(n){a=n},get formTitle(){return p},set formTitle(n){p=n},get form(){return l},set form(n){l=n},get countryUid(){return s},set countryUid(n){s=n},get provinceUid(){return g},set provinceUid(n){g=n},getProvinces:T,getDistricts:P,FormManager:F,addClient:U,editClient:h,saveForm:N,get shield(){return G}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),W={class:"grid grid-cols-12 gap-4 mt-2 mb-4"},X={class:"col-span-12"},Y={class:"bg-background rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Z={key:0,class:"py-4 text-center"},$={key:1,class:"grid grid-cols-12 gap-3"},ee={class:"col-span-12 px-3 sm:px-0"},te={class:"flex justify-between sm:text-sm md:text-base lg:text-lg text-foreground font-bold"},oe={class:"grid grid-cols-2 mt-2"},se={class:"col-span-1"},ne={class:"flex"},le={class:"text-foreground text-sm md:text-base"},ie={class:"flex"},re={class:"text-foreground text-sm md:text-base"},de={class:"flex"},ae={class:"text-foreground text-sm md:text-base"},me={class:"col-span-1"},ce={class:"flex"},ue={class:"text-foreground text-sm md:text-base"},fe={class:"flex"},ve={class:"text-foreground text-sm md:text-base"},pe={action:"post",class:"p-1"},ge={class:"grid grid-cols-2 gap-x-4 mb-4"},xe={class:"block col-span-1 mb-2"},be={class:"block col-span-1 mb-2"},_e={class:"grid grid-cols-3 gap-x-4 mb-4"},Ce={class:"block col-span-1 mb-2"},ye=["value"],we={class:"block col-span-1 mb-2"},ke=["value"],Ue={class:"block col-span-1 mb-2"},he=["value"];function Se(E,e,f,o,_,v){const m=x("beak-loader"),a=x("font-awesome-icon"),p=x("router-view"),l=x("beak-modal");return i(),d(b,null,[t("div",null,[t("div",W,[t("section",X,[t("div",Y,[o.clientStore.fetchingClient?(i(),d("div",Z,[y(m,{message:"Fetching client metadata ..."})])):(i(),d("div",$,[t("div",ee,[t("div",te,[t("span",null,r(o.clientStore.client?.name),1),t("div",null,[u(t("button",{onClick:e[0]||(e[0]=s=>o.FormManager(!1,o.clientStore.client)),class:"p-1 ml-2 rounded-sm border border-foreground text-muted-foreground text-base transition duration-300 hover:text-primary focus:outline-none"},[y(a,{icon:"fa-edit"})],512),[[q,o.shield.hasRights(o.shield.actions.UPDATE,o.shield.objects.CLIENT)]])])]),e[15]||(e[15]=t("hr",null,null,-1)),t("div",oe,[t("div",se,[t("div",ne,[e[10]||(e[10]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Province:",-1)),t("span",le,r(o.clientStore.client?.district?.province?.name),1)]),t("div",ie,[e[11]||(e[11]=t("span",{class:"text-foreground text-sm font-medium w-16"},"District:",-1)),t("span",re,r(o.clientStore.client?.district?.name),1)]),t("div",de,[e[12]||(e[12]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Code:",-1)),t("span",ae,r(o.clientStore.client?.code),1)])]),t("div",me,[t("div",ce,[e[13]||(e[13]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Email:",-1)),t("span",ue,r(o.clientStore.client?.email),1)]),t("div",fe,[e[14]||(e[14]=t("span",{class:"text-foreground text-sm font-medium w-16"},"Mobile:",-1)),t("span",ve,r(o.clientStore.client?.mobilePhone),1)])])])])]))])])]),y(p)]),o.showClientModal?(i(),R(l,{key:0,onClose:e[9]||(e[9]=s=>o.showClientModal=!1)},{header:D(()=>[t("h3",null,r(o.formTitle),1)]),body:D(()=>[t("form",pe,[t("div",ge,[t("label",xe,[e[16]||(e[16]=t("span",{class:"text-foreground"},"Name",-1)),u(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[1]||(e[1]=s=>o.form.name=s),placeholder:"Name ..."},null,512),[[M,o.form.name]])]),t("label",be,[e[17]||(e[17]=t("span",{class:"text-foreground"},"Code",-1)),u(t("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":e[2]||(e[2]=s=>o.form.code=s),placeholder:"Code ..."},null,512),[[M,o.form.code]])])]),t("div",_e,[t("label",Ce,[e[19]||(e[19]=t("span",{class:"text-foreground"},"Country",-1)),u(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[3]||(e[3]=s=>o.countryUid=s),onChange:e[4]||(e[4]=s=>o.getProvinces(s))},[e[18]||(e[18]=t("option",null,null,-1)),(i(!0),d(b,null,w(o.locationStore.countries,s=>(i(),d("option",{key:s.uid,value:s.uid},r(s.name),9,ye))),128))],544),[[k,o.countryUid]])]),t("label",we,[e[21]||(e[21]=t("span",{class:"text-foreground"},"Province",-1)),u(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[5]||(e[5]=s=>o.provinceUid=s),onChange:e[6]||(e[6]=s=>o.getDistricts(s))},[e[20]||(e[20]=t("option",null,null,-1)),(i(!0),d(b,null,w(o.locationStore.provinces,s=>(i(),d("option",{key:s.uid,value:s.uid},r(s.name),9,ke))),128))],544),[[k,o.provinceUid]])]),t("label",Ue,[e[23]||(e[23]=t("span",{class:"text-foreground"},"District",-1)),u(t("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":e[7]||(e[7]=s=>o.form.districtUid=s)},[e[22]||(e[22]=t("option",null,null,-1)),(i(!0),d(b,null,w(o.locationStore.districts,s=>(i(),d("option",{key:s.uid,value:s.uid},r(s.name),9,he))),128))],512),[[k,o.form.districtUid]])])]),e[24]||(e[24]=t("hr",null,null,-1)),t("button",{type:"button",onClick:e[8]||(e[8]=H(s=>o.saveForm(),["prevent"])),class:"m-2 -mb-4 w-full rounded-sm border border-primary bg-primary px-4 py-2 text-primary-foreground transition-colors duration-500 ease select-none hover:bg-primary focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):j("",!0)],64)}const Fe=L(Q,[["render",Se],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/client/_id/Client.vue"]]);export{Fe as default};
