import{a0 as K,f as z,a7 as v,h as M,_ as H,r as _,c as i,o as a,A as e,E as f,C as Q,a as D,N as y,P as W,J as h,K as F,L as d,D as X,F as C,a2 as N,a9 as Z}from"./index-DCVfsbos.js";import{c as j,f as $,a as k,u as ee,b}from"./index.esm-89YX2EbQ.js";import{o as te,p as oe}from"./analyses.mutations-BEU63HnJ.js";import{u as se}from"./setup-DMRnqeyP.js";import{u as re}from"./analysis-BI7XPyQA.js";const ne=K({__name:"AnalysesCategories",setup(T,{expose:t}){t();const u=re(),o=se(),{withClientMutation:g}=z();let m=v(!1),p=v("");const c=v(!0),l=v(null),s=j({name:k().trim().required("Category name is required"),description:k().trim().nullable(),departmentUid:k().trim().nullable(),active:$().default(!0)}),{handleSubmit:x,resetForm:A,setValues:w}=ee({validationSchema:s,initialValues:{name:"",description:"",departmentUid:"",active:!0}}),{value:V,errorMessage:B}=b("name"),{value:L,errorMessage:q}=b("description"),{value:O,errorMessage:P}=b("departmentUid"),{value:R}=b("active"),Y=M(()=>o.getDepartments);u.fetchAnalysesCategories();const G=M(()=>u.getAnalysesCategories);function E(r){g(te,{payload:r},"createAnalysisCategory").then(n=>u.addAnalysisCategory(n))}function S(r){l.value&&g(oe,{uid:l.value,payload:r},"updateAnalysisCategory").then(n=>u.updateAnalysisCategory(n))}function I(r,n){c.value=r,m.value=!0,p.value=(r?"CREATE":"EDIT")+" ANALYSES CATEGORY",r?(l.value=null,A({values:{name:"",description:"",departmentUid:"",active:!0}})):(l.value=n?.uid??null,w({name:n?.name??"",description:n?.description??"",departmentUid:n?.departmentUid??"",active:n?.active??!0}))}const J=x(r=>{const n={name:r.name,description:r.description??null,departmentUid:r.departmentUid?r.departmentUid:null,active:r.active};c.value===!0&&E(n),c.value===!1&&S(n),m.value=!1}),U={analysisStore:u,setupStore:o,withClientMutation:g,get showModal(){return m},set showModal(r){m=r},get formTitle(){return p},set formTitle(r){p=r},formAction:c,currentUid:l,categorySchema:s,handleSubmit:x,resetForm:A,setValues:w,name:V,nameError:B,description:L,descriptionError:q,departmentUid:O,departmentError:P,active:R,departments:Y,analysesCategories:G,addAnalysesCategory:E,editAnalysesCategory:S,FormManager:I,saveForm:J};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),ae={class:"space-y-6"},ie={class:"shadow-sm rounded-lg bg-card p-6"},le={class:"overflow-x-auto"},de={class:"min-w-full divide-y divide-border beak-table"},ue={class:"divide-y divide-border bg-background"},ce={class:"whitespace-nowrap text-sm text-foreground"},me={class:"whitespace-nowrap text-sm text-foreground"},pe={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},fe=["onClick"],ge={class:"text-lg font-bold text-foreground"},ve={class:"space-y-4"},ye={class:"grid grid-cols-2 gap-4"},be={class:"col-span-2 space-y-2"},xe={key:0,class:"text-sm text-destructive"},_e={class:"col-span-1 space-y-2"},he=["value"],Ce={key:0,class:"text-sm text-destructive"},ke={class:"col-span-2 space-y-2"},Ae={key:0,class:"text-sm text-destructive"};function we(T,t,u,o,g,m){const p=_("beak-button"),c=_("beak-heading"),l=_("beak-modal");return a(),i(h,null,[e("div",ae,[D(c,{title:"Analyses Categories"},{default:y(()=>[D(p,{onClick:t[0]||(t[0]=s=>o.FormManager(!0,null))},{default:y(()=>[...t[6]||(t[6]=[W("Add Analyses Category",-1)])]),_:1})]),_:1}),e("div",ie,[e("div",le,[e("table",de,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Category Name"),e("th",{class:"text-left text-sm font-semibold text-foreground"},"Department"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ue,[(a(!0),i(h,null,F(o.analysesCategories,s=>(a(),i("tr",{key:s?.uid,class:"hover:bg-muted/50"},[e("td",ce,d(s?.name),1),e("td",me,d(s?.department?.name),1),e("td",pe,[e("button",{onClick:x=>o.FormManager(!1,s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,fe)])]))),128))])])])])]),f(" Location Edit Form Modal "),o.showModal?(a(),Q(l,{key:0,onClose:t[5]||(t[5]=s=>o.showModal=!1)},{header:y(()=>[e("h3",ge,d(o.formTitle),1)]),body:y(()=>[e("form",{onSubmit:t[4]||(t[4]=X((...s)=>o.saveForm&&o.saveForm(...s),["prevent"])),class:"p-6 space-y-6"},[e("div",ve,[e("div",ye,[e("label",be,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Category Name",-1)),C(e("input",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),placeholder:"Name ..."},null,512),[[N,o.name]]),o.nameError?(a(),i("p",xe,d(o.nameError),1)):f("v-if",!0)]),e("label",_e,[t[10]||(t[10]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),C(e("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[2]||(t[2]=s=>o.departmentUid=s)},[t[9]||(t[9]=e("option",{value:""},"Select Department",-1)),(a(!0),i(h,null,F(o.departments,s=>(a(),i("option",{key:s.uid,value:s?.uid},d(s.name),9,he))),128))],512),[[Z,o.departmentUid]]),o.departmentError?(a(),i("p",Ce,d(o.departmentError),1)):f("v-if",!0)]),e("label",ke,[t[11]||(t[11]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),C(e("textarea",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":t[3]||(t[3]=s=>o.description=s),placeholder:"Description ...",rows:"3"},null,512),[[N,o.description]]),o.descriptionError?(a(),i("p",Ae,d(o.descriptionError),1)):f("v-if",!0)])])]),t[12]||(t[12]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Form ")],-1))],32)]),_:1})):f("v-if",!0)],64)}const Fe=H(ne,[["render",we],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/admin/analyses/AnalysesCategories.vue"]]);export{Fe as default};
