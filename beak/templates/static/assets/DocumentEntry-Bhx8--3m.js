const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FolderNavigation-D3KP_oPj.js","assets/index-DCVfsbos.js","assets/index-C_1sfwqa.css","assets/plus-BIoBoYHZ.js","assets/document.mutations-ZelDoHTa.js","assets/document.queries-BbmADCJ_.js","assets/_isIterateeCall-M0-ssUVw.js","assets/toFinite-CjZYoUjd.js","assets/RecentDocuments-DBOOR62t.js","assets/DocumentListing-BAh7KyYO.js","assets/FolderDocuments-BU_WlBcm.js"])))=>i.map(i=>d[i]);
import{d as C,f as w,a8 as v,a0 as x,aq as S,a7 as k,ad as E,a1 as f,a6 as h,_ as O,r as M,c as P,o as _,a as D,A as a,E as m,Q as I,C as g,J as B}from"./index-DCVfsbos.js";import{a as R,b as T}from"./document.queries-BbmADCJ_.js";import{a as j}from"./_isIterateeCall-M0-ssUVw.js";import{t as b}from"./toFinite-CjZYoUjd.js";var L=Math.floor,U=Math.random;function V(e,t){return e+L(U()*(t-e+1))}var N=parseFloat,$=Math.min,Z=Math.random;function z(e,t,n){if(n&&typeof n!="boolean"&&j(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=b(e),t===void 0?(t=e,e=0):t=b(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var s=Z();return $(e+s*(t-e+N("1e-"+((s+"").length-1))),t)}return V(e,t)}const{withClientQuery:p}=w(),G=C("documents",{state:()=>({documents:[],folders:[],currentFolder:null,selectedDocument:null,isPreviewOpen:!1,recentDocuments:[]}),actions:{async fetchDocuments(e,t=!1){try{const n=await p(T,{first:100,text:"",sortBy:["-created_at"],...e},"documentAll");n&&typeof n=="object"&&"items"in n&&(this.documents=n.items,t&&(this.recentDocuments=this.documents.sort((o,s)=>{const r=o.updatedAt?new Date(o.updatedAt).getTime():0;return(s.updatedAt?new Date(s.updatedAt).getTime():0)-r}).slice(0,25)))}catch{}},addDocument(e){e?.uid&&(this.documents.push(e),this.recentDocuments=[e,...this.recentDocuments].slice(0,5))},updateDocument(e){if(!e?.uid)return;const t={...e,updatedAt:new Date().toISOString()};this.documents=this.documents.map(n=>n.uid===e.uid?t:n),this.recentDocuments=[t,...this.recentDocuments.filter(n=>n.uid!==e.uid)].slice(0,5)},deleteDocument(e){e&&(this.documents=this.documents.filter(t=>t.uid!==e),this.recentDocuments=this.recentDocuments.filter(t=>t.uid!==e))},duplicateDocument(e){if(!e)return;const t=this.documents.find(o=>o.uid===e);if(!t)return;const n={...t,uid:z(1e3,9999).toString(),name:`${t.name} (Copy)`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(n),this.recentDocuments=[n,...this.recentDocuments].slice(0,5)},async setCurrentFolder(e){this.currentFolder=e,await this.fetchDocuments({folderUid:e})},async getFolders(){try{const e=await p(R,{},"documentFolderAll");e&&typeof e=="object"&&"items"in e&&(this.folders=e.items)}catch{}},addFolder(e){e?.uid&&this.folders.push(e)},deleteFolder(e){e&&(this.folders=this.folders.filter(t=>t.uid!==e),this.documents=this.documents.filter(t=>t.folderUid!==e))},updateFolder(e){e?.uid&&(this.folders=this.folders.map(t=>t.uid===e.uid?e:t))},setSelectedDocument(e){this.selectedDocument=e},togglePreview(e){this.isPreviewOpen=e},toggleFolderExpanded(e){e&&(this.folders=this.folders.map(t=>t.uid===e?{...t,expanded:!t.expanded}:t))}},getters:{getChildFolders:e=>t=>e.folders.filter(n=>n.parentUid===t),getDocumentsInFolder:e=>t=>e.documents.filter(n=>n.folderUid===t)}});const y=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Q=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase()),q=e=>{const t=Q(e);return t.charAt(0).toUpperCase()+t.slice(1)},H=(...e)=>e.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim(),F=e=>e==="";var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const J=({name:e,iconNode:t,absoluteStrokeWidth:n,"absolute-stroke-width":o,strokeWidth:s,"stroke-width":r,size:i=u.width,color:d=u.stroke,...l},{slots:c})=>v("svg",{...u,...l,width:i,height:i,stroke:d,"stroke-width":F(n)||F(o)||n===!0||o===!0?Number(s||r||u["stroke-width"])*24/Number(i):s||r||u["stroke-width"],class:H("lucide",l.class,...e?[`lucide-${y(q(e))}-icon`,`lucide-${y(e)}`]:["lucide-icon"])},[...t.map(A=>v(...A)),...c.default?[c.default()]:[]]);const X=(e,t)=>(n,{slots:o,attrs:s})=>v(J,{...s,...n,iconNode:t,name:e},o);const Y=X("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),K=x({__name:"DocumentEntry",setup(e,{expose:t}){t();const n=f(()=>h(()=>import("./FolderNavigation-D3KP_oPj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),o=f(()=>h(()=>import("./RecentDocuments-DBOOR62t.js"),__vite__mapDeps([8,1,2,9,4,3,5,6,7]))),s=f(()=>h(()=>import("./FolderDocuments-BU_WlBcm.js"),__vite__mapDeps([10,1,2,9,4,3,5,6,7]))),r=G(),{currentFolder:i}=S(r),d=k(!1),l=()=>{d.value=!d.value};E(async()=>{try{await r.getFolders()}catch{}});const c={FolderNavigation:n,RecentDocuments:o,FolderDocuments:s,documentStore:r,currentFolder:i,isSidebarOpen:d,toggleSidebar:l,get Folder(){return Y}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),W={class:"flex overflow-hidden"},ee={class:"flex-1 overflow-hidden"},te={class:"lg:hidden p-4 flex items-center border-b border-border"},ne={class:"h-full overflow-auto p-6"};function oe(e,t,n,o,s,r){const i=M("beak-heading");return _(),P(B,null,[D(i,{title:"Documents"}),a("div",W,[m(" Sidebar "),a("div",{class:I(["fixed inset-y-0 left-0 z-10 w-64 transform bg-doc-folder border-r border-border transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",{"-translate-x-full":!o.isSidebarOpen}])},[D(o.FolderNavigation)],2),m(" Main content "),a("div",ee,[m(" Mobile header "),a("div",te,[a("button",{class:"mr-4 p-2 rounded-md border border-border hover:bg-accent",onClick:o.toggleSidebar},[D(o.Folder,{class:"h-5 w-5"})]),t[0]||(t[0]=a("h1",{class:"text-xl font-semibold text-foreground"},"Document Manager",-1))]),m(" Content area "),a("div",ne,[o.currentFolder?(_(),g(o.FolderDocuments,{key:1})):(_(),g(o.RecentDocuments,{key:0}))])])])],64)}const se=O(K,[["render",oe],["__file","/home/administrator/Documents/Development/beak-insights/beak/beak-lims/webapp/views/document/DocumentEntry.vue"]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{ce as D,Y as F,X as c,G as u};
