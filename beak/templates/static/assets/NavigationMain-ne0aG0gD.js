const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Logo-GdbGUaC5.js","assets/index-B3ZheI5m.js","assets/index-C_1sfwqa.css","assets/BeakBadge-yYk43aIB.js","assets/UserPreferences-D5B8KC63.js","assets/setup-DpgcXA6u.js"])))=>i.map(i=>d[i]);
import{a0 as de,af as ce,a4 as fe,a7 as g,a5 as me,ab as ge,h as v,f as pe,ag as be,ad as Q,ae as c,ah as W,a1 as O,a6 as P,ai as ve,_ as xe,r as _,c as i,A as r,a as n,C as E,E as m,N as u,T as J,F as k,L as f,H as N,J as C,o as s,K as A,P as x,a9 as he,D as ye}from"./index-B3ZheI5m.js";import{u as we}from"./notification-Bzm6LQVx.js";import{s as _e}from"./index-C7zlg90Q.js";const ke=de({__name:"NavigationMain",setup(X,{expose:o}){o();const T=O(()=>P(()=>import("./Logo-GdbGUaC5.js"),__vite__mapDeps([0,1,2]))),e=O(()=>P(()=>import("./BeakBadge-yYk43aIB.js"),__vite__mapDeps([3,1,2]))),I=O(()=>P(()=>import("./UserPreferences-D5B8KC63.js"),__vite__mapDeps([4,1,2,5]))),{isFullscreen:R,toggle:y}=ce(),l=fe(),p=g(!1),h=g(!1);let b=null;me(()=>l.currentRoute.value,(a,d)=>{a.path!==d?.path&&(p.value=!1,h.value=!1)});const t=ge(),M=v(()=>t.auth?.activeLaboratory),Z=v(()=>t.auth?.laboratories),$=v(()=>{const a=t.auth?.user?.firstName||"",d=t.auth?.user?.lastName||"";return`${a} ${d}`.trim()||t.auth?.user?.email||"User"}),ee=v(()=>t.auth?.user?.email||""),oe=v(()=>{const a=t.auth?.user?.firstName||"",d=t.auth?.user?.lastName||"";return`${a.charAt(0)}${d.charAt(0)}`.toUpperCase()||t.auth?.user?.email?.charAt(0)?.toUpperCase()||"U"}),{errors:U,clearErrors:re,withClientMutation:B}=pe(),te=g(!1),ne=v(()=>{const a=new Map;for(const d of U.value){const w=typeof d=="string"?d:d?.error??String(d);a.set(w,(a.get(w)??0)+1)}return Array.from(a.entries()).map(([d,w])=>({message:d,count:w}))}),se=g(!1),D=we(),ae=a=>D.showNotifications(a),{loadPreferredTheme:F,megaMenu:j}=be(),V=g(!1);Q(()=>{F(),V.value=j.value});const ie=v(()=>[{id:"patients-compact",label:"Compact",icon:"bullseye",route:"/patients-compact",guard:c.PATIENTS_COMPACT},{id:"patients",label:"Patients",icon:"user-injured",route:"/patients",guard:c.PATIENTS},{id:"clients",label:"Clients",icon:"clinic-medical",route:"/clients",guard:c.CLIENTS},{id:"samples",label:"Samples",icon:"vial",route:"/samples",guard:c.SAMPLES},{id:"worksheets",label:"WorkSheets",icon:"grip-vertical",route:"/worksheets",guard:c.WORKSHEETS},{id:"quality-control",label:"QControl",icon:"anchor",route:"/quality-control",guard:c.QC_SAMPLES},{id:"notice-manager",label:"NoticeManager",icon:"bell",route:"/notice-manager",guard:c.NOTICE_MANAGER},{id:"bio-banking",label:"BioBanking",icon:"database",route:"/bio-banking",guard:c.BIO_BANKING},{id:"shipments",label:"Referrals",icon:"truck",route:"/shipments",guard:c.REFERRAL},{id:"inventory",label:"Inventory",icon:"fa-solid fa-boxes-stacked",route:"/inventory",guard:c.INVENTORY},{id:"schemes",label:"Projects",icon:"project-diagram",route:"/schemes",guard:c.SCHEMES},{id:"documents",label:"Documents",icon:"file",route:"/documents",guard:c.DOCUMENT}]),H=()=>{p.value=!1,h.value=!1},le=()=>{b&&(clearTimeout(b),b=null),p.value=!0},ue=()=>{b=setTimeout(()=>{p.value=!1,b=null},150)},K=g(null),z=g(null);W(K,()=>{h.value=!1}),W(z,()=>{p.value=!1});const Y=a=>{a.key==="Escape"&&H()};Q(()=>{document.addEventListener("keydown",Y)});const q=g(!1),L=g(null),S=g(!1),G={Logo:T,BeakBadge:e,UserPreferences:I,isFullscreen:R,toggle:y,router:l,menuOpen:p,dropdownOpen:h,get megaMenuCloseTimeout(){return b},set megaMenuCloseTimeout(a){b=a},authStore:t,activeLaboratory:M,userLaboratories:Z,userFullName:$,userEmail:ee,userInitials:oe,errors:U,clearErrors:re,withClientMutation:B,showErrors:te,deduplicatedErrors:ne,showPreferences:se,notificationStore:D,toggleNotifications:ae,loadPreferredTheme:F,megaMenu:j,useMegaMenu:V,navItems:ie,closeMenus:H,onMegaMenuEnter:le,onMegaMenuLeave:ue,userMenuRef:K,megaMenuRef:z,handleKeyDown:Y,showModal:q,targetLaboratoryUid:L,switching:S,switchLabNow:()=>{if(!L.value){alert("Please select a laboratory to switch to.");return}S.value=!0,setTimeout(async()=>{await B(ve,{userUid:t.auth?.user?.uid,laboratoryUid:L.value},"setUserActiveLaboratory").then(a=>t.logout()).catch(()=>{}).finally(()=>{q.value=!1,S.value=!1})},3e3)},get guards(){return _e}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),Me={id:"main-nav",class:"flex items-center px-6 bg-primary border-b border-border",role:"navigation","aria-label":"Main Navigation"},Ee={class:"flex-1"},Ne={class:"flex items-center"},Ce={class:"text-left text-2xl font-medium ml-2"},Le={key:0,class:"mx-8 border-l border-border h-8 self-center","aria-hidden":"true"},Se=["aria-expanded"],Oe={id:"main-menu",class:"absolute left-0 top-full mt-1 min-w-[600px] rounded-xl border border-border bg-popover text-popover-foreground shadow-xl z-20 overflow-hidden",role:"menu","aria-label":"Main Menu"},Pe={class:"p-4"},Ae={class:"grid grid-cols-3 gap-2",role:"none"},Te={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-muted/80","aria-hidden":"true"},Ie={class:"text-sm font-medium"},Re={class:"flex items-center space-x-4"},Ue={class:"bg-destructive text-destructive-foreground text-xs rounded-full px-2 py-0.5 min-w-[1.25rem] text-center"},Be={key:1,class:"border-l border-border h-8 self-center","aria-hidden":"true"},De={ref:"userMenuRef",class:"relative pl-4"},Fe=["aria-expanded"],je={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-foreground/20 text-xs font-semibold text-primary-foreground ring-2 ring-primary-foreground/30","aria-hidden":"true"},Ve={class:"hidden md:block text-left min-w-0"},He={class:"block text-sm font-medium truncate max-w-[140px]"},Ke={key:0,class:"block text-xs text-primary-foreground/70 truncate max-w-[140px]"},ze={id:"user-menu",class:"absolute right-0 top-full mt-2 w-56 rounded-xl border border-border bg-popover text-popover-foreground shadow-lg z-30 overflow-hidden",role:"menu","aria-orientation":"vertical"},Ye={class:"px-4 py-3 bg-muted/50 border-b border-border"},qe={class:"text-sm font-medium text-foreground truncate"},Ge={key:0,class:"text-xs text-muted-foreground truncate mt-0.5"},Qe={key:1,class:"text-xs text-muted-foreground truncate mt-1 flex items-center gap-1.5"},We={class:"py-1.5"},Je={class:"py-1.5"},Xe=["aria-label"],Ze={class:"flex items-center justify-between"},$e={key:0,class:"text-muted-foreground italic"},eo={key:1,"aria-label":"Error messages",class:"divide-y divide-border"},oo={class:"flex-1 whitespace-pre-wrap"},ro={action:"post",class:"p-6 space-y-6"},to={class:"space-y-4"},no={class:"grid grid-cols-2 gap-4"},so={class:"col-span-2 space-y-2"},ao=["value"];function io(X,o,T,e,I,R){const y=_("router-link"),l=_("font-awesome-icon"),p=_("beak-drawer"),h=_("beak-button"),b=_("beak-modal");return s(),i(C,null,[r("nav",Me,[r("div",Ee,[r("div",Ne,[n(y,{to:"/",id:"brand",class:"flex items-center md:w-auto text-primary-foreground/80 hover:text-primary-foreground transition-colors","aria-label":"Beak LIMS Home"},{default:u(()=>[n(e.Logo),r("h1",Ce,f(e.activeLaboratory?.name??"Beak LIMS"),1)]),_:1}),e.useMegaMenu?(s(),i("span",Le)):m("",!0),e.useMegaMenu?(s(),i("div",{key:1,ref:"megaMenuRef",class:"relative hidden md:block",onMouseenter:e.onMegaMenuEnter,onMouseleave:e.onMegaMenuLeave},[r("button",{onClick:o[0]||(o[0]=t=>e.menuOpen=!e.menuOpen),class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-foreground/40 focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":e.menuOpen,"aria-controls":"main-menu","aria-haspopup":"true"},[o[15]||(o[15]=r("span",null,"Menu",-1)),n(l,{icon:e.menuOpen?"chevron-up":"chevron-down",class:"text-primary-foreground/70 text-xs transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,Se),n(J,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95 -translate-y-1","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-1"},{default:u(()=>[k(r("div",Oe,[r("div",Pe,[r("div",Ae,[(s(!0),i(C,null,A(e.navItems,t=>k((s(),E(y,{key:t.id,to:t.route,id:`${t.id}-link`,class:"flex items-center gap-3 rounded-lg py-2.5 px-3 text-foreground hover:bg-accent hover:text-accent-foreground transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-popover",role:"menuitem",onClick:o[1]||(o[1]=M=>e.menuOpen=!1)},{default:u(()=>[r("span",Te,[n(l,{icon:t.icon,class:"text-muted-foreground"},null,8,["icon"])]),r("span",Ie,f(t.label),1)]),_:2},1032,["to","id"])),[[N,e.guards.canAccessPage(t.guard)]])),128))])])],512),[[N,e.menuOpen]])]),_:1})],544)):m("",!0)])]),r("div",Re,[e.errors.length>0?(s(),i("button",{key:0,class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary",onClick:o[2]||(o[2]=t=>e.showErrors=!0),"aria-label":"Show errors"},[n(l,{icon:"bell",class:"shrink-0","aria-hidden":"true"}),o[16]||(o[16]=r("span",null,"Errors",-1)),r("span",Ue,f(e.errors.length),1)])):m("",!0),e.errors.length>0?(s(),i("span",Be)):m("",!0),r("button",{class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary",onClick:o[3]||(o[3]=t=>e.toggleNotifications(!0)),"aria-label":"Show notifications"},[n(l,{icon:"bell",class:"shrink-0","aria-hidden":"true"}),o[17]||(o[17]=r("span",null,"Notifications",-1))]),o[23]||(o[23]=r("span",{class:"border-l border-border h-8 self-center","aria-hidden":"true"},null,-1)),k(n(y,{to:"/admin",class:"flex items-center gap-2 h-9 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-label":"Settings"},{default:u(()=>[n(l,{icon:"cog",class:"shrink-0","aria-hidden":"true"}),o[18]||(o[18]=r("span",null,"Settings",-1))]),_:1},512),[[N,e.guards.canAccessPage(e.guards.pages.ADMINISTRATION)]]),r("div",De,[r("button",{onClick:o[4]||(o[4]=t=>e.dropdownOpen=!e.dropdownOpen),class:"flex items-center gap-2 min-h-9 py-2 px-4 rounded-lg text-sm font-medium text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-foreground/40 focus:ring-offset-2 focus:ring-offset-primary","aria-expanded":e.dropdownOpen,"aria-controls":"user-menu","aria-haspopup":"true"},[r("span",je,f(e.userInitials),1),r("div",Ve,[r("span",He,f(e.userFullName),1),e.userEmail?(s(),i("span",Ke,f(e.userEmail),1)):m("",!0)]),n(l,{icon:e.dropdownOpen?"chevron-up":"chevron-down",class:"hidden md:block shrink-0 text-primary-foreground/70 text-xs transition-transform duration-200","aria-hidden":"true"},null,8,["icon"])],8,Fe),n(J,{"enter-active-class":"transition ease-out duration-150","enter-from-class":"opacity-0 scale-95 -translate-y-1","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-1"},{default:u(()=>[k(r("div",ze,[r("div",Ye,[r("p",qe,f(e.userFullName),1),e.userEmail?(s(),i("p",Ge,f(e.userEmail),1)):m("",!0),e.activeLaboratory?.name?(s(),i("p",Qe,[n(l,{icon:"vial",class:"shrink-0 opacity-70","aria-hidden":"true"}),x(" "+f(e.activeLaboratory.name),1)])):m("",!0)]),r("div",We,[r("button",{class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground",role:"menuitem",onClick:o[5]||(o[5]=t=>{e.showPreferences=!0,e.dropdownOpen=!1})},[n(l,{icon:"user-gear",class:"w-4 text-muted-foreground","aria-hidden":"true"}),o[19]||(o[19]=x(" Preferences ",-1))]),(e.userLaboratories?.length??0)>1?(s(),i("button",{key:0,class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:bg-accent focus:text-accent-foreground",role:"menuitem",onClick:o[6]||(o[6]=t=>{e.showModal=!0,e.dropdownOpen=!1})},[n(l,{icon:"shuffle",class:"w-4 text-muted-foreground","aria-hidden":"true"}),o[20]||(o[20]=x(" Switch laboratory ",-1))])):m("",!0)]),o[22]||(o[22]=r("div",{class:"border-t border-border",role:"separator"},null,-1)),r("div",Je,[r("button",{onClick:o[7]||(o[7]=t=>e.authStore.logout()),class:"w-full text-left py-2.5 px-4 flex items-center gap-3 text-sm text-destructive hover:bg-destructive/10 transition-colors focus:outline-none focus:bg-destructive/10",role:"menuitem"},[n(l,{icon:"sign-out-alt",class:"w-4","aria-hidden":"true"}),o[21]||(o[21]=x(" Log out ",-1))])])],512),[[N,e.dropdownOpen]])]),_:1})],512),r("button",{onClick:o[8]||(o[8]=(...t)=>e.toggle&&e.toggle(...t)),class:"flex items-center justify-center h-9 w-9 shrink-0 rounded-lg text-primary-foreground/90 hover:text-primary-foreground hover:bg-primary-foreground/10 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-primary","aria-label":e.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n(l,{icon:e.isFullscreen?"compress":"expand",class:"shrink-0"},null,8,["icon"])],8,Xe)])]),n(p,{show:e.showErrors,onClose:o[10]||(o[10]=t=>e.showErrors=!1)},{header:u(()=>[r("div",Ze,[o[24]||(o[24]=r("h3",{class:"font-semibold text-lg"},"Errors List",-1)),r("button",{class:"p-2 text-muted-foreground hover:text-foreground rounded-full hover:bg-secondary transition-colors focus:outline-none",onClick:o[9]||(o[9]=t=>e.clearErrors()),"aria-label":"Clear all errors"},[n(l,{icon:"trash-alt",class:"w-5 h-5","aria-hidden":"true"})])])]),body:u(()=>[e.errors.length===0?(s(),i("p",$e,"No errors to display")):(s(),i("ul",eo,[(s(!0),i(C,null,A(e.deduplicatedErrors,(t,M)=>(s(),i("li",{key:M,class:"mb-2 p-3 bg-background rounded text-sm border-l-4 border-destructive flex items-start gap-2"},[r("code",oo,f(t.message),1),t.count>1?(s(),E(e.BeakBadge,{key:0,variant:"destructive",size:"sm",class:"shrink-0"},{default:u(()=>[x(f(t.count),1)]),_:2},1024)):m("",!0)]))),128))]))]),_:1},8,["show"]),n(p,{show:e.showPreferences,onClose:o[11]||(o[11]=t=>e.showPreferences=!1)},{header:u(()=>[...o[25]||(o[25]=[r("div",{class:"flex items-center justify-between"},[r("h3",{class:"font-semibold text-lg"},"Your Preferences")],-1)])]),body:u(()=>[e.showPreferences?(s(),E(e.UserPreferences,{key:0})):m("",!0)]),_:1},8,["show"]),e.showModal?(s(),E(b,{key:0,onClose:o[14]||(o[14]=t=>e.showModal=!1)},{header:u(()=>[...o[26]||(o[26]=[r("h3",{class:"text-lg font-bold text-foreground"},"Current Laboratory Switcher",-1)])]),body:u(()=>[r("form",ro,[o[30]||(o[30]=r("p",{class:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4 border border-border"},[r("span",{class:"font-medium text-foreground"},"Note:"),x(" Switching laboratories will automatically log you out. You will need to sign in again for the change to take effect. ")],-1)),r("div",to,[r("div",no,[r("label",so,[o[28]||(o[28]=r("span",{class:"text-base font-medium"},"Laboratory Name",-1)),k(r("select",{class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring","onUpdate:modelValue":o[12]||(o[12]=t=>e.targetLaboratoryUid=t)},[o[27]||(o[27]=r("option",{value:""},"Select Department",-1)),(s(!0),i(C,null,A(e.userLaboratories,t=>(s(),i("option",{key:t.uid,value:t?.uid},f(t.name),9,ao))),128))],512),[[he,e.targetLaboratoryUid]])])])]),n(h,{type:"button",onClick:o[13]||(o[13]=ye(t=>e.switchLabNow(),["prevent"])),loading:e.switching,disabled:e.switching,class:"w-full"},{default:u(()=>[...o[29]||(o[29]=[x(" Switch Laboratory ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})):m("",!0)],64)}const mo=xe(ke,[["render",io],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/components/nav/NavigationMain.vue"]]);export{mo as default};
