import{a0 as N,f as T,a7 as c,h as A,aN as E,aO as V,_ as B,r as b,c as v,o as p,A as e,C as U,E as j,a as D,N as f,P as q,J as k,K as L,L as g,D as O,F as P,a2 as I}from"./index-B3ZheI5m.js";import{c as J,a as K,u as R,b as z}from"./index.esm-C1wdlr_y.js";import{u as G}from"./setup-DpgcXA6u.js";const H=N({__name:"Departments",setup(w,{expose:t}){t();const r=G(),{withClientMutation:s}=T();let l=c(!1),m=c("");const d=c(!0),a=c(null),u=J({name:K().required("Department name is required")}),{handleSubmit:o,errors:_,resetForm:h,setValues:y}=R({validationSchema:u,initialValues:{name:""}}),{value:F}=z("name");r.fetchDepartments({});const C=A(()=>r.getDepartments);function M(n,i){d.value=n,l.value=!0,m.value=(n?"CREATE":"EDIT")+" Department",n?(a.value=null,h({values:{name:""}})):(a.value=i?.uid??null,y({name:i?.name??""}))}const S=o(n=>{if(d.value===!0)s(E,{payload:{name:n.name}},"createDepartment").then(i=>r.addDepartment(i));else{if(!a.value)return;s(V,{uid:a.value,payload:{name:n.name}},"updateDepartment").then(i=>r.updateDepartment(i))}l.value=!1}),x={setupStore:r,withClientMutation:s,get showModal(){return l},set showModal(n){l=n},get formTitle(){return m},set formTitle(n){m=n},formAction:d,currentUid:a,formSchema:u,handleSubmit:o,errors:_,resetForm:h,setValues:y,name:F,departments:C,FormManager:M,saveForm:S};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Q={class:"space-y-6"},W={class:"shadow-sm rounded-lg bg-card p-6"},X={class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-border beak-table"},Z={class:"divide-y divide-border bg-background"},$={class:"whitespace-nowrap text-sm text-foreground"},ee={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},te=["onClick"],se={class:"text-lg font-semibold text-foreground"},oe={class:"space-y-2"},ne={class:"text-sm text-destructive"};function ae(w,t,r,s,l,m){const d=b("beak-button"),a=b("beak-heading"),u=b("beak-modal");return p(),v(k,null,[e("div",Q,[D(a,{title:"Departments"},{default:f(()=>[D(d,{onClick:t[0]||(t[0]=o=>s.FormManager(!0,null))},{default:f(()=>[...t[4]||(t[4]=[q("Add Department",-1)])]),_:1})]),_:1}),e("div",W,[e("div",X,[e("table",Y,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left text-sm font-semibold text-foreground"},"Name"),e("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",Z,[(p(!0),v(k,null,L(s.departments,o=>(p(),v("tr",{key:o?.uid,class:"hover:bg-muted/50"},[e("td",$,g(o?.name),1),e("td",ee,[e("button",{onClick:_=>s.FormManager(!1,o),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2"}," Edit ",8,te)])]))),128))])])])])]),s.showModal?(p(),U(u,{key:0,onClose:t[3]||(t[3]=o=>s.showModal=!1)},{header:f(()=>[e("h3",se,g(s.formTitle),1)]),body:f(()=>[e("form",{class:"space-y-6",onSubmit:t[2]||(t[2]=O((...o)=>s.saveForm&&s.saveForm(...o),["prevent"]))},[e("div",oe,[t[6]||(t[6]=e("label",{class:"beak-label"}," Department Name ",-1)),P(e("input",{class:"beak-input","onUpdate:modelValue":t[1]||(t[1]=o=>s.name=o),placeholder:"Name ..."},null,512),[[I,s.name]]),e("div",ne,g(s.errors.name),1)]),t[7]||(t[7]=e("hr",{class:"border-border"},null,-1)),t[8]||(t[8]=e("button",{type:"submit",class:"inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Save Form ",-1))],32)]),_:1})):j("",!0)],64)}const de=B(H,[["render",ae],["__file","/home/administrator/Documents/Development/beak-insights/felicity/felicity-lims/webapp/views/admin/laboratory/Departments.vue"]]);export{de as default};
