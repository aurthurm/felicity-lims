import{d as Q,ac as X,a4 as Y,s as D,r as i,U as B,A as E,b6 as Z,b7 as ee,o as r,g as c,l as N,W as te,i as m,C as se,h as s,E as g,j as o,ap as le,y as P,D as oe,t as d,v as I,k as _,F as v,z as y,R as k,w as ne,I as ae,ak as ie,_ as re}from"./index-596c477d.js";import{A as ue,E as ce}from"./clients.mutations-0d9931fd.js";import{h as de,o as fe,a as me}from"./constants-43b2a573.js";const be=s("hr",null,null,-1),pe={action:"post",class:"p-1"},he={class:"grid grid-cols-2 gap-x-4 mb-4"},ve={class:"block col-span-1 mb-2"},Ce=s("span",{class:"text-gray-700"},"Name",-1),ge={class:"block col-span-1 mb-2"},_e=s("span",{class:"text-gray-700"},"Code",-1),ye={class:"grid grid-cols-3 gap-x-4 mb-4"},ke={class:"block col-span-1 mb-2"},xe=s("span",{class:"text-gray-700"},"Country",-1),we=s("option",null,null,-1),Ue=["value"],Te={class:"block col-span-1 mb-2"},De=s("span",{class:"text-gray-700"},"Province",-1),Be=s("option",null,null,-1),Ee=["value"],Ne={class:"block col-span-1 mb-2"},Pe=s("span",{class:"text-gray-700"},"District",-1),Ie=s("option",null,null,-1),Me=["value"],Ae=s("hr",null,null,-1),Se=Q({__name:"Clients",setup(Le){const u=X(),h=Y(),{withClientMutation:x}=ie(),{countries:M}=D(h),{clients:w,clientPageInfo:U,fetchingClients:A}=D(u);let S=i("samples");B(()=>"tab-"+S.value);let f=i(!1),C=i(!1),L=i(""),R=i([]),V=i([]),n=E({});const F=()=>Object.assign(n,{}),O=i([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Client Name",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(l,t){return Z(ee,{to:{name:"client-detail",query:{clientUid:l?.uid}},class:"p-1 ml-2 border-white border text-gray-500rounded-smtransition duration-300 hover:border-sky-800 hover:text-sky-800 focus:outline-none",innerHTML:l?.name})}},{name:"Client ID",value:"code",sortable:!1,sortBy:"asc",hidden:!1},{name:"District",value:"district.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Province",value:"district.province.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Mobile Number",value:"mobilePhone",sortable:!1,sortBy:"asc",hidden:!1},{name:"Email Asdress",value:"email",sortable:!1,sortBy:"asc",hidden:!1}]);let a=E({first:50,after:"",text:"",sortBy:["uid"],filterAction:!1}),b=i(),p=i(),T=i("");u.fetchClients(a),h.fetchCountries();function j(){x(ue,{name:n.name,code:n.code,districtUid:n.districtUid},"createClient").then(l=>u.addClient(l))}function H(){x(ce,{uid:n.uid,name:n.name,code:n.code,districtUid:n.districtUid},"updateClient").then(l=>u.updateClient(l))}function q(l){h.filterProvincesByCountry(b.value)}function z(l){h.filterDistrictsByProvince(p.value)}function K(l){a.first=100,a.after="",a.text=l.filterText,a.filterAction=!0,u.fetchClients(a)}function W(l){a.first=l.fetchCount,a.after=U?.value?.endCursor,a.text=l.filterText,a.filterAction=!1,u.fetchClients(a)}function $(l,t,e={}){C.value=l,L.value=t,T.value=(l?"CREATE":"EDIT")+" "+t.toUpperCase(),t=="client"&&(f.value=!0),l?t=="client"&&Object.assign(n,{}):t=="client"&&Object.assign(n,{...e})}function G(){C.value&&j(),C.value||H(),f.value=!1}const J=B(()=>w?.value?.length+" of "+u.getClientCount+" clients");return(l,t)=>(r(),c(v,null,[N(te,{title:"Clients"}),m(s("button",{class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100",onClick:t[0]||(t[0]=e=>$(!0,"client"))}," Add client ",512),[[se,de(me.CREATE,fe.CLIENT)]]),be,N(le,{columns:O.value,data:o(w),toggleColumns:!0,loading:o(A),paginable:!0,pageMeta:{fetchCount:o(a).first,hasNextPage:o(U)?.hasNextPage,countNone:o(J)},searchable:!0,filterable:!1,onOnSearchKeyUp:K,onOnSearchFocus:F,onOnPaginate:W,selectable:!1},{footer:g(()=>[]),_:1},8,["columns","data","loading","pageMeta"]),P(" Location Edit Form Modal "),o(f)?(r(),oe(ae,{key:0,onClose:t[9]||(t[9]=e=>_(f)?f.value=!1:f=!1)},{header:g(()=>[s("h3",null,d(o(T)),1)]),body:g(()=>[s("form",pe,[s("div",he,[s("label",ve,[Ce,m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[1]||(t[1]=e=>o(n).name=e),placeholder:"Name ..."},null,512),[[I,o(n).name]])]),s("label",ge,[_e,m(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=e=>o(n).code=e),placeholder:"Code ..."},null,512),[[I,o(n).code]])])]),s("div",ye,[s("label",ke,[xe,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[3]||(t[3]=e=>_(b)?b.value=e:b=e),onChange:t[4]||(t[4]=e=>q(e))},[we,(r(!0),c(v,null,y(o(M),e=>(r(),c("option",{key:e.uid,value:e.uid},d(e.name)+" "+d(e.uid),9,Ue))),128))],544),[[k,o(b)]])]),s("label",Te,[De,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[5]||(t[5]=e=>_(p)?p.value=e:p=e),onChange:t[6]||(t[6]=e=>z(e))},[Be,(r(!0),c(v,null,y(o(R),e=>(r(),c("option",{key:e.uid,value:e.uid},d(e.name)+" "+d(e.uid),9,Ee))),128))],544),[[k,o(p)]])]),s("label",Ne,[Pe,m(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[7]||(t[7]=e=>o(n).districtUid=e)},[Ie,(r(!0),c(v,null,y(o(V),e=>(r(),c("option",{key:e.uid,value:e.uid},d(e.name)+" "+d(e.uid),9,Me))),128))],512),[[k,o(n).districtUid]])])]),Ae,s("button",{type:"button",onClick:t[8]||(t[8]=ne(e=>G(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):P("v-if",!0)],64))}}),Oe=re(Se,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/client/Clients.vue"]]);export{Oe as default};
