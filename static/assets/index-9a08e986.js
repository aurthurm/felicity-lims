import{d as L,am as Y,a8 as K,r as w,A as W,aa as T,o as a,g as i,h as e,F as v,z as k,t as p,H as A,y as m,j as l,D as S,E as $,i as _,v as U,R as q,G as M,ai as O,w as E,k as D,I,ap as J,aq as X,ar as Z,as as ee,ak as Q,_ as j,l as se,ao as y,at as te,au as oe,av as le}from"./index-32219e1a.js";import{A as ne}from"./Accordion-0dc26c4b.js";const ae={class:"w-full my-4"},re=e("hr",null,null,-1),ie={class:"flex justify-between items-center"},de=e("h3",null,"Users",-1),ce=e("hr",null,null,-1),ue={class:"overflow-x-auto mt-4"},pe={class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-lg rounded-br-lg"},he={class:"min-w-full"},me=e("thead",null,[e("tr",null,[e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," First Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Last Name "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Email Adress "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Active "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Groups "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Username "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," User Type "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Blocked "),e("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),ge={class:"bg-white"},_e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},be={class:"flex items-center"},fe={class:"text-sm leading-5 text-gray-800"},ye={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ve={class:"text-sm leading-5 text-sky-800"},xe={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},ke={class:"text-sm leading-5 text-sky-800"},we={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},$e={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ue={class:"text-sm leading-5 text-sky-800"},Ae={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ce={class:"text-sm leading-5 text-sky-800"},Ne={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ee={class:"text-sm leading-5 text-sky-800"},Te={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Se={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},De=["onClick"],Ge=["onClick"],Pe=["onClick"],Me={action:"post",class:"p-1"},Oe={class:"grid grid-cols-2 gap-x-4 mb-4"},Re={class:"block col-span-1 mb-2"},Fe=e("span",{class:"text-gray-700"},"First Name",-1),Ve={class:"block col-span-1 mb-2"},Be=e("span",{class:"text-gray-700"},"Last Name",-1),Ie={class:"block col-span-1 mb-2"},Le=e("span",{class:"text-gray-700"},"Email",-1),je={class:"block col-span-1 mb-2"},ze=e("span",{class:"text-gray-700"},"Group",-1),He=e("option",null,null,-1),Ke=["value"],We={for:"toggle",class:"block col-span-2 text-xs text-gray-700 mt-4"},qe={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},Qe=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),Ye=e("hr",null,null,-1),Je={action:"post",class:"p-1"},Xe={class:"grid grid-cols-2 gap-x-4 mb-4"},Ze={class:"block col-span-1 mb-2"},es=e("span",{class:"text-gray-700"},"UserName",-1),ss={class:"block col-span-1 mb-2"},ts=e("span",{class:"text-gray-700"},"Password",-1),os={class:"block col-span-1 mb-2"},ls=e("span",{class:"text-gray-700"},"Confirm Password",-1),ns={for:"toggle",class:"block col-span-2 text-xs text-gray-700 mt-4"},as={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},rs=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),is=e("hr",null,null,-1),ds=L({__name:"Users",setup(z){Y();const d=K(),{withClientMutation:g}=Q();let b=w(!1),x=w(!1),h=w(""),n=W({});const f=w(!0);d.fetchUsers({}),d.fetchGroupsAndPermissions(),d.fetchGroupsAndPermissions(),d.fetchUsers({});let G=T(()=>d.getUsers);const C=T(()=>d.getGroups);function u(){g(J,n,"createUser").then(t=>d.addUser(t))}function R(){g(X,n,"updateUser").then(t=>d.updateUser(t))}function P(){g(Z,n,"createUserAuth").then(t=>d.addUserAuth(t))}function F(){g(ee,n,"updateUserAuth").then(t=>d.updateUserAuth(t))}function V(t){let o=[];return t?.groups?.forEach(s=>o.push(s?.name)),o.join(", ")}function N(t,o={}){if(f.value=t,b.value=!0,h.value=(t?"CREATE":"EDIT")+" USER",t){let s=new Object;s.firstName="",s.lastName="",s.email="",s.isActive=!0,s.groupUid=void 0,Object.assign(n,{...s})}else o.userUid=o?.uid,o.groupUid=o?.groups[0]?.uid,Object.assign(n,{...o})}function B(){f.value?u():R(),b.value=!1}function c(t,o){f.value=t,x.value=!0,h.value=(t?"ADD":"EDIT")+" AUTHENTICATION FOR USER "+o?.firstName;let s=new Object;s.userUid=o?.uid,s.password="",s.passwordc="",t?(s.userName="",s.isBlocked=!1,Object.assign(n,{...s})):(s.userName=o?.auth?.userName,s.isBlocked=o?.auth?.isBlocked,Object.assign(n,{...s}))}function r(){f.value?P():F(),x.value=!1}return(t,o)=>(a(),i(v,null,[e("div",ae,[re,e("div",ie,[de,e("button",{onClick:o[0]||(o[0]=s=>N(!0)),class:"px-2 py-1 ml-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Add User/Lab Contact ")]),ce,e("div",ue,[e("div",pe,[e("table",he,[me,e("tbody",ge,[(a(!0),i(v,null,k(l(G),s=>(a(),i("tr",{key:s.uid},[e("td",_e,[e("div",be,[e("div",fe,p(s.firstName),1)])]),e("td",ye,[e("div",ve,p(s.lastName),1)]),e("td",xe,[e("div",ke,p(s.email),1)]),e("td",we,[e("span",{class:A(["",["block h-4 w-4 rounded-full bottom-0 right-0",s?.isActive?"bg-emerald-600":"bg-orange-600"]])},null,2)]),e("td",$e,[e("div",Ue,p(V(s)),1)]),e("td",Ae,[e("div",Ce,p(s?.auth?.userName),1)]),e("td",Ne,[e("div",Ee,p(s?.auth?.userType),1)]),e("td",Te,[s?.auth?(a(),i("span",{key:0,class:A(["block h-4 w-4 rounded-full bottom-0 right-0",s?.auth?.isBlocked?"bg-orange-600":"bg-emerald-600"])},null,2)):m("v-if",!0)]),e("td",Se,[e("button",{onClick:H=>N(!1,s),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit User ",8,De),s?.auth?m("v-if",!0):(a(),i("button",{key:0,onClick:H=>c(!0,s),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Add Auth ",8,Ge)),s?.auth?(a(),i("button",{key:1,onClick:H=>c(!1,s),class:"px-2 py-1 mr-2 border-orange-500 border text-orange-500 rounded-sm transition duration-300 hover:bg-orange-700 hover:text-white focus:outline-none"}," Edit Auth ",8,Pe)):m("v-if",!0)])]))),128))])])])])]),m(" UserForm Modal "),l(b)?(a(),S(I,{key:0,onClose:o[7]||(o[7]=s=>D(b)?b.value=!1:b=!1)},{header:$(()=>[e("h3",null,p(l(h)),1)]),body:$(()=>[e("form",Me,[e("div",Oe,[e("label",Re,[Fe,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[1]||(o[1]=s=>l(n).firstName=s),placeholder:"First Name ..."},null,512),[[U,l(n).firstName]])]),e("label",Ve,[Be,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[2]||(o[2]=s=>l(n).lastName=s),placeholder:"Last Name ..."},null,512),[[U,l(n).lastName]])]),e("label",Ie,[Le,_(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":o[3]||(o[3]=s=>l(n).email=s),placeholder:"Email ..."},null,512),[[U,l(n).email]])]),e("label",je,[ze,_(e("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":o[4]||(o[4]=s=>l(n).groupUid=s)},[He,(a(!0),i(v,null,k(l(C),s=>(a(),i("option",{key:s.uid,value:s.uid},p(s?.name),9,Ke))),128))],512),[[q,l(n).groupUid]])]),e("label",We,[M("Active "),e("div",qe,[_(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":o[5]||(o[5]=s=>l(n).isActive=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[O,l(n).isActive]]),Qe])])]),Ye,e("button",{type:"button",onClick:o[6]||(o[6]=E(s=>B(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):m("v-if",!0),m(" UserAuthForm Modal "),l(x)?(a(),S(I,{key:1,onClose:o[13]||(o[13]=s=>D(x)?x.value=!1:x=!1)},{header:$(()=>[e("h3",null,p(l(h)),1)]),body:$(()=>[e("form",Je,[e("div",Xe,[e("label",Ze,[es,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[8]||(o[8]=s=>l(n).userName=s),placeholder:"First Name ..."},null,512),[[U,l(n).userName]])]),e("label",ss,[ts,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":o[9]||(o[9]=s=>l(n).password=s),placeholder:"Last Name ..."},null,512),[[U,l(n).password]])]),e("label",os,[ls,_(e("input",{class:"form-input mt-1 block w-full",type:"email","onUpdate:modelValue":o[10]||(o[10]=s=>l(n).passwordc=s),placeholder:"Email ..."},null,512),[[U,l(n).passwordc]])]),e("label",ns,[M("Blocked "),e("div",as,[_(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":o[11]||(o[11]=s=>l(n).isBlocked=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[O,l(n).isBlocked]]),rs])])]),is,e("button",{type:"button",onClick:o[12]||(o[12]=E(s=>r(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):m("v-if",!0)],64))}}),cs=j(ds,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/admin/users/Users.vue"]]),us={class:""},ps={class:"container w-full my-4"},hs=e("hr",null,null,-1),ms=e("hr",null,null,-1),gs=e("hr",null,null,-1),_s={class:"grid grid-cols-12 gap-4 mt-2"},bs={class:"col-span-3 overflow-y-scroll overscroll-contain patient-scrol"},fs=["onClick"],ys={class:"cursor-pointer"},vs={class:"flex-grow p-1"},xs={class:"font-medium text-gray-800 hover:text-gray-600 flex justify-between"},ks=e("span",{class:"text-sm text-gray-500"},null,-1),ws={key:0,class:"col-span-9"},$s={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},Us={class:"grid grid-cols-12 gap-3"},As={class:"col-span-12 px-3 sm:px-0"},Cs={class:"flex justify-between"},Ns={class:"sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},Es=e("hr",null,null,-1),Ts={div:"",class:"flex justify-start mt-2"},Ss=e("h3",{class:"mr-2 text-gray-600 font-semibold"},"Pages: ",-1),Ds={class:"mr-2"},Gs=e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),Ps=[Gs],Ms={class:"bg-white shadow-md mt-2"},Os={class:"-mb-px flex justify-start"},Rs=["onClick"],Fs={class:"mt-2 p-2 bg-white"},Vs={key:0},Bs={class:"col-span-4 overflow-y-scroll overscroll-contain analyses-scroll bg-white p-1"},Is={class:"grid grid-cols-4 gap-2 w-full"},Ls=["onClick"],js={class:"flex-grow p-1"},zs={class:A(["font-medium text-gray-500 hover:text-gray-700 flex justify-start",{"text-gray-700 font-medium":!1}])},Hs=["onClick"],Ks={class:"inline-block w-10 mr-2 align-middle transition duration-200 ease-in"},Ws=["onUpdate:modelValue"],qs=e("hr",null,null,-1),Qs={key:1},Ys=e("h3",null,"Error",-1),Js=e("hr",null,null,-1),Xs={action:"post",class:"p-1"},Zs={class:"grid grid-cols-2 gap-x-4 mb-4"},et={class:"block col-span-2 mb-2"},st=e("span",{class:"text-gray-700"},"Group Name",-1),tt={class:"block col-span-2 mb-2"},ot=e("span",{class:"text-gray-700"},"Pages",-1),lt=["size"],nt=["value"],at={for:"toggle",class:"text-xs text-gray-700 mr-4"},rt={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},it=e("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),dt=e("hr",null,null,-1),ct=L({__name:"Groups",setup(z){const d=[y.ADMINISTRATION,y.DASHBOARD,y.CLIENTS,y.PATIENTS,y.PATIENTS_COMPACT,y.SAMPLES,y.QC_SAMPLES,y.WORKSHEETS,y.NOTICE_MANAGER,y.MARKDOWN_DOCUMENTS,y.KANBAN_BOARD];let g=K();const{withClientMutation:b}=Q();g.fetchGroupsAndPermissions();const x=T(()=>g.getGroups);let h=w("permissions");const n=["permissions"];let f=w(!1),G=w("");const C=w(!0);let u=W({});function R(c){const r=c.pages;Object.assign(u,{...c,pages:r?.split(",")||[]}),N.value?.forEach(t=>{t[1].forEach(o=>{o.checked=!1,u.permissions?.some(s=>s?.uid==o?.uid||!1)&&(o.checked=!0)})})}function P(c,r={}){C.value=c,f.value=!0,G.value=(c?"CREATE":"EDIT")+" ANALYSES PROFILE",c?Object.assign(u,{name:"",pages:[]}):Object.assign(u,{...r})}function F(){const c={...u},r=c.pages;c.pages=r.join(","),C.value===!0&&b(te,{payload:c},"createGroup").then(t=>g.addGroup(t)),C.value===!1&&b(oe,{uid:u?.uid,payload:{name:c.name,pages:c.pages}},"updateGroup").then(t=>g.updateGroup(t)),f.value=!1}const V=(c,r)=>c?.reduce(function(t,o){return(t[o[r]]=t[o[r]]||[]).push(o),t},{}),N=T(()=>Array.from(Object.entries(V(g.getPermissions,"target"))));function B(c,r){b(le,{groupUid:c?.uid,permissionUid:r?.uid},"updateGroupPermissions").then(t=>g.updateGroupsAndPermissions(t))}return(c,r)=>(a(),i(v,null,[e("div",us,[e("div",ps,[hs,e("button",{class:"px-2 py-1 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",onClick:r[0]||(r[0]=t=>P(!0))},"Add Group"),ms]),gs,e("div",_s,[e("section",bs,[e("ul",null,[(a(!0),i(v,null,k(l(x),t=>(a(),i("li",{key:t?.uid,href:"#",onClick:E(o=>R(t),["prevent","stop"]),class:A(["bg-white shadow w-full p-1 mb-1 rounded-sm",{"border border-sky-800 bg-emerald-200":t?.uid===l(u)?.uid}])},[e("a",ys,[e("div",vs,[e("div",xs,[e("span",null,p(t?.name),1),ks])])])],10,fs))),128))])]),l(u)?.uid!==void 0?(a(),i("section",ws,[e("div",$s,[e("div",Us,[e("div",As,[e("div",Cs,[e("section",null,[e("h2",Ns,p(l(u)?.name),1),Es,e("div",Ts,[Ss,(a(!0),i(v,null,k(l(u)?.pages,t=>(a(),i("span",Ds,p(t?.toLowerCase()),1))),256))])]),e("div",null,[e("button",{onClick:r[1]||(r[1]=t=>P(!1)),class:"ml-4 inline-flex items-center justify-center w-8 h-8 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"},Ps)])])])])]),m(" Sample and Case Data "),e("nav",Ms,[e("div",Os,[(a(),i(v,null,k(n,t=>e("a",{key:t,class:A(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":l(h)===t}]),onClick:o=>D(h)?h.value=t:h=t,href:"#"},p(t),11,Rs)),64))])]),e("section",Fs,[l(h)==="permissions"?(a(),i("div",Vs,[e("section",Bs,[e("div",Is,[(a(!0),i(v,null,k(l(N),t=>(a(),i("div",{class:"col-span-1",key:t[0]},[se(ne,null,{title:$(()=>[M(p(t[0]),1)]),body:$(()=>[e("div",null,[e("ul",null,[(a(!0),i(v,null,k(t[1],o=>(a(),i("li",{key:o?.uid,class:A(["cursor-pointer",[{"border-sky-800 bg-gray-200 underline pl-3":!1}]]),onClick:E(s=>o.checked=!o?.checked,["prevent"])},[e("div",js,[e("div",zs,[e("label",{for:"toggle",class:"text-xs text-gray-700 mr-2",onClick:s=>B(l(u),o)},[e("div",Ks,[_(e("input",{type:"checkbox","onUpdate:modelValue":s=>o.checked=s,class:""},null,8,Ws),[[O,o.checked]])]),e("span",null,p(o?.action),1)],8,Hs)])]),qs],8,Ls))),128))])])]),_:2},1024)]))),128))])])])):(a(),i("div",Qs,[m(" fiancials "),Ys,Js]))])])):m("v-if",!0)])]),m(" AnaltsisProfile Form Modal "),l(f)?(a(),S(I,{key:0,onClose:r[6]||(r[6]=t=>D(f)?f.value=!1:f=!1)},{header:$(()=>[e("h3",null,p(l(G)),1)]),body:$(()=>[e("form",Xs,[e("div",Zs,[e("label",et,[st,_(e("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":r[2]||(r[2]=t=>l(u).name=t),placeholder:"Name ..."},null,512),[[U,l(u).name]])]),e("label",tt,[ot,_(e("select",{name:"controlLevels",id:"controlLevels","onUpdate:modelValue":r[3]||(r[3]=t=>l(u).pages=t),class:"form-input mt-1 block w-full",multiple:"",size:d.length},[(a(),i(v,null,k(d,(t,o)=>e("option",{key:t,value:t},p(t),9,nt)),64))],8,lt),[[q,l(u).pages]])]),e("label",at,[M("Active "),e("div",rt,[_(e("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":r[4]||(r[4]=t=>l(u).active=t),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer outline-none"},null,512),[[O,l(u).active]]),it])])]),dt,e("button",{type:"button",onClick:r[5]||(r[5]=E(t=>F(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):m("v-if",!0)],64))}}),ut=j(ct,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/admin/users/Groups.vue"]]),pt={class:"mt-4"},ht={class:"bg-white shadow-md mt-2"},mt={class:"-mb-px flex justify-start"},gt=["onClick"],_t=L({__name:"index",setup(z){let d=w("users");const g=["users","groups"];return T(()=>"tab-"+d.value),(b,x)=>(a(),i("div",pt,[e("nav",ht,[e("div",mt,[(a(),i(v,null,k(g,h=>e("a",{key:h,class:A(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":l(d)===h}]),onClick:n=>D(d)?d.value=h:d=h,href:"#"},p(h),11,gt)),64))])]),l(d)==="users"?(a(),S(cs,{key:0})):m("v-if",!0),l(d)==="groups"?(a(),S(ut,{key:1})):m("v-if",!0)]))}}),yt=j(_t,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/admin/users/index.vue"]]);export{yt as default};
