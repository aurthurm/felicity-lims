import{d as G,ac as J,a4 as Q,r as c,b6 as X,b7 as Y,s as T,A as B,U as Z,o as i,g as u,l as E,W as ee,i as f,C as te,h as s,E as g,j as l,ap as se,y as N,D as oe,t as h,v as P,k as y,F as v,z as _,R as k,w as le,I as ne,ak as ae,_ as ie}from"./index-cd9e6ac8.js";import{A as re,E as ce}from"./clients.mutations-1bc962d0.js";import{h as ue,o as de,a as fe}from"./constants-99d18042.js";const me=s("hr",null,null,-1),pe={action:"post",class:"p-1"},be={class:"grid grid-cols-2 gap-x-4 mb-4"},he={class:"block col-span-1 mb-2"},ve=s("span",{class:"text-gray-700"},"Name",-1),Ce={class:"block col-span-1 mb-2"},ge=s("span",{class:"text-gray-700"},"Code",-1),ye={class:"grid grid-cols-3 gap-x-4 mb-4"},_e={class:"block col-span-1 mb-2"},ke=s("span",{class:"text-gray-700"},"Country",-1),xe=s("option",null,null,-1),we=["value"],Ue={class:"block col-span-1 mb-2"},De=s("span",{class:"text-gray-700"},"Province",-1),Te=s("option",null,null,-1),Be=["value"],Ee={class:"block col-span-1 mb-2"},Ne=s("span",{class:"text-gray-700"},"District",-1),Pe=s("option",null,null,-1),Ie=["value"],Me=s("hr",null,null,-1),Ae=G({__name:"Clients",setup(Se){const r=J(),b=Q(),{withClientMutation:x}=ae(),I=c([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Client Name",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(o,t){return X(Y,{to:{name:"client-detail",query:{clientUid:o?.uid}},class:"px-1 ml-2 border-white border text-gray-500rounded-smtransition duration-300 hover:border-sky-800 hover:text-sky-800 focus:outline-none",innerHTML:o?.name})}},{name:"Client ID",value:"code",sortable:!1,sortBy:"asc",hidden:!1},{name:"District",value:"district.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Province",value:"district.province.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Mobile Number",value:"mobilePhone",sortable:!1,sortBy:"asc",hidden:!1},{name:"Email Asdress",value:"email",sortable:!1,sortBy:"asc",hidden:!1}]),{countries:M,provinces:A,districts:S}=T(b),{clients:w,clientPageInfo:U,fetchingClients:L}=T(r);let d=c(!1),C=c(!1),R=c(""),n=B({});const D=c(""),V=()=>Object.assign(n,{});let a=B({first:50,after:"",text:"",sortBy:["uid"],filterAction:!1}),m=c(),p=c();r.fetchClients(a),b.fetchCountries();function F(){x(re,{payload:{name:n.name,code:n.code,districtUid:n.districtUid}},"createClient").then(o=>r.addClient(o))}function O(){x(ce,{uid:n.uid,payload:{name:n.name,code:n.code,districtUid:n.districtUid}},"updateClient").then(o=>r.updateClient(o))}function j(o){b.filterProvincesByCountry(m.value)}function H(o){b.filterDistrictsByProvince(p.value)}function q(o){a.first=100,a.after="",a.text=o.filterText,a.filterAction=!0,r.fetchClients(a)}function z(o){a.first=o.fetchCount,a.after=U?.value?.endCursor,a.text=o.filterText,a.filterAction=!1,r.fetchClients(a)}function K(o,t,e={}){C.value=o,R.value=t,D.value=(o?"CREATE":"EDIT")+" "+t.toUpperCase(),t=="client"&&(d.value=!0),o?t=="client"&&Object.assign(n,{}):t=="client"&&Object.assign(n,{...e})}function W(){C.value&&F(),C.value||O(),d.value=!1}const $=Z(()=>w?.value?.length+" of "+r.getClientCount+" clients");return(o,t)=>(i(),u(v,null,[E(ee,{title:"Clients"}),f(s("button",{class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100",onClick:t[0]||(t[0]=e=>K(!0,"client"))}," Add client ",512),[[te,ue(fe.CREATE,de.CLIENT)]]),me,E(se,{columns:I.value,data:l(w),toggleColumns:!0,loading:l(L),paginable:!0,pageMeta:{fetchCount:l(a).first,hasNextPage:l(U)?.hasNextPage,countNone:l($)},searchable:!0,filterable:!1,onOnSearchKeyUp:q,onOnSearchFocus:V,onOnPaginate:z,selectable:!1},{footer:g(()=>[]),_:1},8,["columns","data","loading","pageMeta"]),N(" Location Edit Form Modal "),l(d)?(i(),oe(ne,{key:0,onClose:t[9]||(t[9]=e=>y(d)?d.value=!1:d=!1)},{header:g(()=>[s("h3",null,h(D.value),1)]),body:g(()=>[s("form",pe,[s("div",be,[s("label",he,[ve,f(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[1]||(t[1]=e=>l(n).name=e),placeholder:"Name ..."},null,512),[[P,l(n).name]])]),s("label",Ce,[ge,f(s("input",{class:"form-input mt-1 block w-full","onUpdate:modelValue":t[2]||(t[2]=e=>l(n).code=e),placeholder:"Code ..."},null,512),[[P,l(n).code]])])]),s("div",ye,[s("label",_e,[ke,f(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[3]||(t[3]=e=>y(m)?m.value=e:m=e),onChange:t[4]||(t[4]=e=>j(e))},[xe,(i(!0),u(v,null,_(l(M),e=>(i(),u("option",{key:e.uid,value:e.uid},h(e.name),9,we))),128))],544),[[k,l(m)]])]),s("label",Ue,[De,f(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[5]||(t[5]=e=>y(p)?p.value=e:p=e),onChange:t[6]||(t[6]=e=>H(e))},[Te,(i(!0),u(v,null,_(l(A),e=>(i(),u("option",{key:e.uid,value:e.uid},h(e.name),9,Be))),128))],544),[[k,l(p)]])]),s("label",Ee,[Ne,f(s("select",{class:"form-select block w-full mt-1","onUpdate:modelValue":t[7]||(t[7]=e=>l(n).districtUid=e)},[Pe,(i(!0),u(v,null,_(l(S),e=>(i(),u("option",{key:e.uid,value:e.uid},h(e.name),9,Ie))),128))],512),[[k,l(n).districtUid]])])]),Me,s("button",{type:"button",onClick:t[8]||(t[8]=le(e=>W(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):N("v-if",!0)],64))}}),Fe=ie(Ae,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/client/Clients.vue"]]);export{Fe as default};
