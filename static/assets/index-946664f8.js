import{d as te,a6 as se,ad as ae,u as oe,A as ne,s as re,x as S,aa as u,B as _,U as ie,o as c,g as v,h as e,j as s,D as le,E as R,G as w,y as d,i as r,l as x,L as de,H as ue,t as n,C as l,F as L,z as ce,_ as pe}from"./index-055aea84.js";import{u as me}from"./samples-bf9ecff3.js";const ve={class:"flex justify-between"},ye=e("h3",{class:"my-4 font-bold"},"Sample Detail",-1),he=e("hr",null,null,-1),xe={class:"bg-white rounded-sm shadow-sm hover:shadow-lg duration-500 px-4 sm:px-6 md:px-2 py-4"},ge={key:0,class:"py-4 text-center"},be={key:1,class:"grid grid-cols-12 gap-3"},fe={class:"col-span-12 px-3 sm:px-0"},_e={class:"mb-2 flex justify-between sm:text-sm md:text-md lg:text-lg text-gray-700 font-bold"},we=e("i",{class:"fa fa-star"},null,-1),Ce=[we],ke={key:1},Se={type:"button",class:"bg-sky-800 text-white px-2 py-1 rounded-sm leading-none"},Re={class:"ml-2"},Le={class:"absolute mt-4 py-0 bg-gray-300 rounded-sm shadow-xl z-20"},je=e("hr",null,null,-1),$e={class:"grid grid-cols-2 mt-2"},qe={class:"col-span-1"},De={class:"flex"},Ue=e("span",{class:"text-gray-800 text-sm font-semibold w-1/6"},"Requests:",-1),Be={class:"text-gray-600 text-sm md:text-md"},Ie={class:"flex"},Oe=e("span",{class:"text-gray-800 text-sm font-semibold w-1/6"},"Client Request ID:",-1),Te={class:"text-gray-600 text-sm md:text-md"},Ne={class:"flex"},Pe=e("span",{class:"text-gray-800 text-sm font-semibold w-1/6"},"Sample Type:",-1),Ve={class:"text-gray-600 text-sm md:text-md"},ze={class:"col-span-1"},Ee={class:"flex"},Ae=e("span",{class:"text-gray-800 text-sm font-semibold w-1/6"},"Client:",-1),Fe={class:"text-gray-600 text-sm md:text-md"},Je=e("div",{class:"flex"},[e("span",{class:"text-gray-800 text-sm font-semibold w-1/6"},"Cliet Contact:"),e("span",{class:"text-gray-600 text-sm md:text-md"},"Sister in Charge")],-1),We={class:"bg-blue-300 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},Ge={class:"flex"},He=e("div",{class:"mr-4 font-semibold"},"Storage:",-1),Me={class:"bg-orange-600 rounded-sm shadow-md duration-500 px-4 sm:px-6 md:px-2 py-4 my-4"},Ke=te({__name:"index",setup(Qe){const p=se(),g=ae(),C=oe();p.resetSample();const{cancelSamples:j,reInstateSamples:$,receiveSamples:q,invalidateSamples:D,publishSamples:U,verifySamples:B,recoverSamples:I}=me(),h=ne({dropdownOpen:!1}),{sample:t,fetchingSample:O,repeatSample:b}=re(p);p.fetchSampleByUid(g.params.sampleUid),S(()=>t?.value?.status,(o,a)=>{if(o)if(o!=="invalidated"){p.resetRepeatSample();return}else p.fetchRepeatSampleByParentId(g.params.sampleUid)}),S(()=>g.params.sampleUid,(o,a)=>{p.fetchSampleByUid(+o)});function k(o,a){let m=[];return o?.forEach(y=>m.push(y.name)),a?.forEach(y=>m.push(y.name)),m.join(", ")}const T=u(()=>!!["expected"].includes(t?.value?.status?.toLowerCase())),N=async()=>q([t?.value?.uid]),P=u(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),V=async()=>j([t?.value?.uid]),z=u(()=>!!["cancelled"].includes(t?.value?.status?.toLowerCase())),E=async()=>$([t?.value?.uid]),A=u(()=>t?.value?.status?.toLowerCase()==="awaiting"),F=async()=>B([t?.value?.uid]),J=u(()=>t?.value?.status?.toLowerCase()==="published"),f=u(()=>["approved"].includes(t?.value?.status?.toLowerCase())?"Publish":["published"].includes(t?.value?.status?.toLowerCase())?"Re publish":"Pre publish"),W=u(()=>{if(["awaiting","approved","published"].includes(t?.value?.status?.toLowerCase()))return!0;const o=p.analysisResults;return!!(t?.value?.status?.toLowerCase()==="received"&&o?.some(a=>["approved"].includes(a.status?.toLowerCase()??"")))}),G=async()=>{const o=f.value.startsWith("Pre")?"pre-publish":f.value.startsWith("Re")?"re-publish":"publish";U([{uid:t?.value?.uid,action:o}])},H=async()=>D([t?.value?.uid]).then(o=>{let a=o?.filter(m=>m.uid!==t?.value?.uid);a.length>0&&p.setRepeatSample(a[0])}),M=u(()=>!!["received","expected"].includes(t?.value?.status?.toLowerCase())),K=async()=>C.push({name:"reject-samples",params:{samples:JSON.stringify([t?.value])}}),Q=u(()=>!!["stored"].includes(t?.value?.status?.toLowerCase())),X=async()=>I([t?.value?.uid]),Y=async o=>{C.push({path:"/bio-banking",state:{sample:JSON.stringify(o)}})};return(o,a)=>{const m=_("router-link"),y=_("font-awesome-icon"),Z=_("router-view"),ee=ie("motion-slide-right");return c(),v(L,null,[e("div",ve,[ye,s(t)?.analysisRequest?.patient?.uid?(c(),le(m,{key:0,to:{name:"patient-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[w(" ... other samples ")]),_:1},8,["to"])):d("v-if",!0)]),he,r((c(),v("div",xe,[s(O)?(c(),v("div",ge,[x(de,{message:"Fetching sample details ..."})])):(c(),v("div",be,[d(" Summary Column "),e("div",fe,[e("div",_e,[e("div",null,[s(t)?.priority<1?(c(),v("span",{key:0,class:ue(["font-small",{"text-orange-600":s(t)?.priority<1}])},Ce,2)):d("v-if",!0),w(" "+n(s(t)?.sampleId)+" ",1),d(` <button
                class="ml-4 text-xs inline-flex items-center justify-center w-6 h-6 mr-2 border-sky-800 border text-gray-900 transition-colors duration-150 bg-white rounded-full focus:outline-none hover:bg-gray-200"
              >
                <i class="fa fa-pen"></i>
              </button> `),s(t)?.analysisRequest?.patient?.uid&&s(b)?.uid?(c(),v("span",ke,[x(y,{icon:"angle-double-right",class:"mx-2"}),x(m,{to:{name:"sample-detail",params:{patientUid:s(t)?.analysisRequest?.patient?.uid,sampleUid:s(b)?.uid}},class:"p-2 my-2 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:R(()=>[w(n(s(b)?.sampleId),1)]),_:1},8,["to"])])):d("v-if",!0)]),e("span",null,n(k(s(t)?.profiles,s(t)?.analyses)),1),d(' <button type="button" class="bg-sky-800 text-white p-1rounded-smleading-none">{{ sample?.status }}</button> '),e("div",null,[e("div",{onClick:a[0]||(a[0]=i=>h.dropdownOpen=!h.dropdownOpen),class:"hidden md:block md:flex md:items-center ml-2 mt-2"},[e("button",Se,n(s(t)?.status),1),e("div",Re,[x(y,{icon:"chevron-down",class:"text-gray-400"})])]),r(e("div",{onClick:a[1]||(a[1]=i=>h.dropdownOpen=!1),class:"fixed inset-0 h-full w-full z-10"},null,512),[[l,h.dropdownOpen]]),r(e("div",Le,[r(e("div",{onClick:a[2]||(a[2]=i=>N()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Receive ",512),[[l,s(T)]]),r(e("div",{onClick:a[3]||(a[3]=i=>F()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-sky-800 hover:text-white"}," Approve ",512),[[l,s(A)]]),r(e("div",{onClick:a[4]||(a[4]=i=>K()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reject ",512),[[l,s(M)]]),r(e("div",{onClick:a[5]||(a[5]=i=>V()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Cancel ",512),[[l,s(P)]]),r(e("div",{onClick:a[6]||(a[6]=i=>E()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-orange-600 hover:text-white"}," Reinstate ",512),[[l,s(z)]]),r(e("div",{onClick:a[7]||(a[7]=i=>G()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"},n(s(f)),513),[[l,s(W)]]),r(e("div",{onClick:a[8]||(a[8]=i=>H()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Invalidate ",512),[[l,s(J)]]),r(e("div",{onClick:a[9]||(a[9]=i=>X()),class:"no-underline text-gray-900 py-0 opacity-60 px-4 border-b border-transparent hover:opacity-100 md:hover:border-grey-dark hover:bg-gray-400 hover:text-white"}," Recover ",512),[[l,s(Q)]])],512),[[l,h.dropdownOpen]])])]),je,e("div",$e,[e("div",qe,[d(" Client Details "),e("div",De,[Ue,e("span",Be,n(k(s(t)?.profiles,s(t)?.analyses)),1)]),e("div",Ie,[Oe,e("span",Te,n(s(t)?.analysisRequest?.clientRequestId),1)]),e("div",Ne,[Pe,e("span",Ve,n(s(t)?.sampleType?.name),1)])]),e("div",ze,[d(" Communication Details "),e("div",Ee,[Ae,e("span",Fe,n(s(t)?.analysisRequest?.client?.name),1)]),Je])])])]))])),[[ee]]),r(e("div",We,[e("div",Ge,[He,d("  "),e("div",{class:"hover:underline hover:cursor-pointer",onClick:a[10]||(a[10]=i=>Y(s(t)))},[e("span",null,n(s(t)?.storageContainer?.storageSection?.storageLocation?.storeRoom?.name)+" › ",1),e("span",null,n(s(t)?.storageContainer?.storageSection?.storageLocation?.name)+" › ",1),e("span",null,n(s(t)?.storageContainer?.storageSection?.name)+" › ",1),e("span",null,n(s(t)?.storageContainer?.name)+" › ",1),e("span",null,n(s(t)?.storageSlot),1)])])],512),[[l,s(t)?.status==="stored"]]),r(e("div",Me,[d(' <h3 clas="font-bold text-gray-800 text-md">This sample was rejected because of the following reason(s):</h3> '),e("ul",null,[(c(!0),v(L,null,ce(s(t)?.rejectionReasons,i=>(c(),v("li",null,n(i.reason),1))),256))])],512),[[l,s(t)?.status==="rejected"]]),x(Z)],64)}}}),Ze=pe(Ke,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/sample/_id/index.vue"]]);export{Ze as default};
