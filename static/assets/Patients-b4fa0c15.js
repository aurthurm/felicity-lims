import{d as P,a2 as x,a3 as _,s as C,r as d,b5 as l,b6 as r,A as B,U as T,o as N,D as k,E as f,h as s,i as w,l as I,j as a,G as R,C as A,ao as S,_ as D}from"./index-b7f12717.js";import{h as M,a as L,o as U}from"./constants-000fbf7c.js";const E=s("div",{class:"flex content-start items-center"},[s("span",{class:"text-sky-800"},[s("i",{class:"fas fa-info-circle"})]),s("p",{class:"ml-2 italic text-orange-600"}," Click register when you dont find your patient during search* ")],-1),H=s("hr",{class:"my-2"},null,-1),V=P({__name:"Patients",setup(j){let n=x(),m=_();const{patients:c,fetchingPatients:h,patientPageInfo:o}=C(n),p=d([{name:"UID",value:"uid",sortable:!0,sortBy:"asc",defaultSort:!0,showInToggler:!1,hidden:!0},{name:"Patient Id",value:"patientId",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,i){return l(r,{to:{name:"patient-detail",params:{patientUid:e?.uid}},innerHTML:e?.patientId})}},{name:"Full Name",value:"",sortable:!1,sortBy:"asc",hidden:!1,customRender:function(e,i){return l(r,{to:{name:"patient-detail",params:{patientUid:e?.uid}},innerHTML:y(e)})}},{name:"Age",value:"age",sortable:!1,sortBy:"asc",hidden:!1},{name:"Gender",value:"gender",sortable:!1,sortBy:"asc",hidden:!1},{name:"Client Patient ID",value:"clientPatientId",sortable:!1,sortBy:"asc",hidden:!1},{name:"Province",value:"client.district.province.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"District",value:"client.district.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"Client",value:"client.name",sortable:!1,sortBy:"asc",hidden:!1},{name:"",value:"",sortable:!1,sortBy:"asc",showInToggler:!1,hidden:!1,customRender:function(e,i){return l(r,{to:{name:"samples-add",params:{patientUid:e?.uid}},class:"px-2 mr-2 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",innerHTML:"+ Analysis Request"})}}]);m.fetchCountries();let t=B({first:50,before:"",text:"",sortBy:["-uid"],filterAction:!1});n.fetchPatients(t);let u=d("");function g(e){t.first=100,t.before=o?.value?.endCursor??"",t.text=e.filterText,t.filterAction=!0,u.value=e.filterText,n.fetchPatients(t)}const b=T(()=>c?.value?.length+" of "+n.getPatientCount+" patients");function v(e){t.first=e.fetchCount,t.before=o?.value?.endCursor??"",t.text=e.filterText,t.filterAction=!1,n.fetchPatients(t)}let y=e=>e.firstName+" "+e.lastName;return(e,i)=>(N(),k(S,{columns:p.value,data:a(c),toggleColumns:!0,loading:a(h),paginable:!0,pageMeta:{fetchCount:a(t).first,hasNextPage:a(o)?.hasNextPage,countNone:a(b)},searchable:!0,filterable:!1,onOnSearch:g,onOnPaginate:v,selectable:!1},{footer:f(()=>[s("div",null,[E,H,w(I(a(r),{to:{name:"patients-register",query:{cpid:a(u)}},class:"px-4 p-1 text-sm border-sky-800 border text-dark-700 transition-colors duration-150 rounded-sm focus:outline-none hover:bg-sky-800 hover:text-gray-100"},{default:f(()=>[R(" Register New Patiet ")]),_:1},8,["to"]),[[A,M(L.CREATE,U.PATIENT)]])])]),_:1},8,["columns","data","loading","pageMeta"]))}}),G=D(V,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/patient/Patients.vue"]]);export{G as default};
