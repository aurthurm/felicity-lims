import{d as de,p as hn,s as vn,q as Re,x as oe,o as B,g as Y,j as X,l as le,L as tn,y as yt,h as F,F as xt,z as Lt,t as et,_ as he,r as ae,A as Aa,B as Wl,i as Et,C as Rn,D as jt,E as Gt,G as zn,H as _a,k as Ai,v as Nn,w as Da,I as Bl,m as Gl,J as _i,K as st,M as m,N as St,O as U,P as Ul,Q as ql,R as Fn,S as Hl,n as Xl,T as Yl,U as jl}from"./index-451d5bb0.js";import{i as ft,a as wt,b as it,r as _t,g as Zl,t as Kl,c as Ql,z as Jl,d as ts,e as es,f as ns,p as rs,h as is,j as as,k as os,l as ls,m as ss,C as en,n as ze,o as k,q as dt,s as us,u as ka,v as cs,w as wn,x as Sn,y as fs,A as pr,B as Di,D as ki,E as P,F as Ae,G as Rt,H as Xn,I as nn,J as Ea,K as Yr,L as ds,M as zt,N as re,O as lt,P as It,Q as Ia,R as hs,S as Ta,T as Yn,U as rn,V as ve,W as ht,X as Ut,Y as Oa,Z as vs,_ as Qe,$ as Ei,a0 as jr,a1 as Ma,a2 as ps,a3 as Ii,a4 as gs,a5 as qt,a6 as gr,a7 as ys,a8 as ms,a9 as xs,aa as jn,ab as bs,ac as Fs,ad as ws,ae as yr,af as Ti,ag as Oi,ah as Ss,ai as As}from"./index-bf418299.js";import{A as Or}from"./Accordion-b02de833.js";function $a(t,e,n){n===void 0&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}function _s(t,e){var n;if(ft(e))n=function(i,a){return e(i)-e(a)};else{var r=[];wt(e)?r.push(e):it(e)&&(r=e),n=function(i,a){for(var o=0;o<r.length;o+=1){var u=r[o];if(i[u]>a[u])return 1;if(i[u]<a[u])return-1}return 0}}return t.sort(n),t}const Pa=function(t,e){if(it(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=ft(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}},Ds=function(t,e){if(it(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=ft(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}},Zn=function(t,e){return _t(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})};var Dt={getLegendItems:Zl,translate:Kl,rotate:Ql,zoom:Jl,transform:ts,getAngle:es,getSectorPath:ns,polarToCartesian:rs,getDelegationObject:is,getTooltipItems:as,getMappingValue:os,getPath:ls,getPathPoints:ss};const ks={key:0,class:"text-start my-4 w-100"},Es=F("h1",{class:"text-xl text-gray-700 font-semibold"},"Analyses Status",-1),Is=F("hr",{class:"my-2"},null,-1),Ts={class:"flex justify-start"},Os={class:"mr-4 font-bold text-gray-600 text-xl"},Ms={class:"font-semibold text-gray-400 text-l"},$s={key:0,class:"my-4"},Ps=F("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"Sample Status",-1),Ls=F("hr",{class:"my-2"},null,-1),Cs={class:"flex justify-start"},Rs={class:"mr-4 font-bold text-gray-600 text-xl"},zs={class:"font-semibold text-gray-400 text-l"},Ns={key:1,class:"my-4"},Vs=F("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"WorkSheet Status",-1),Ws=F("hr",{class:"my-2"},null,-1),Bs={class:"flex justify-start"},Gs={class:"mr-4 font-bold text-gray-600 text-xl"},Us={class:"font-semibold text-gray-400 text-l"},qs={key:2,class:"my-4"},Hs=F("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"Extras",-1),Xs=F("hr",{class:"my-2"},null,-1),Ys={class:"flex justify-start"},js={class:"mr-4 font-bold text-gray-600 text-xl"},Zs={class:"font-semibold text-gray-400 text-l"},Ks={key:0,class:"my-4"},Qs=de({__name:"Overview",setup(t){const e=hn(),{dashboard:n}=vn(e);return Re(async()=>{e.getOverViewStats()}),oe(()=>n.value.filterRange,(r,i)=>{e.getOverViewStats()},{deep:!0}),(r,i)=>(B(),Y(xt,null,[X(n).fetchingOverViewStats?(B(),Y("div",ks,[le(tn,{message:"fetching updated overview stats ..."})])):yt("v-if",!0),F("section",null,[Es,Is,F("div",Ts,[(B(!0),Y(xt,null,Lt(X(n).overViewStats?.analyses,a=>(B(),Y("div",{key:a.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[F("span",Os,et(a.count),1),F("span",Ms,et(a.group),1)]))),128))]),X(n).overViewStats?.analyses?.length?yt("v-if",!0):(B(),Y("p",$s,"I did not find any analyses indicators to show")),Ps,Ls,F("div",Cs,[(B(!0),Y(xt,null,Lt(X(n).overViewStats?.samples,a=>(B(),Y("div",{key:a.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[F("span",Rs,et(a.count),1),F("span",zs,et(a.group),1)]))),128))]),X(n).overViewStats?.samples?.length?yt("v-if",!0):(B(),Y("p",Ns,"I did not find any sample indicators to show")),Vs,Ws,F("div",Bs,[(B(!0),Y(xt,null,Lt(X(n).overViewStats?.worksheets,a=>(B(),Y("div",{key:a.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[F("span",Gs,et(a.count),1),F("span",Us,et(a.group),1)]))),128))]),X(n).overViewStats?.worksheets?.length?yt("v-if",!0):(B(),Y("p",qs,"I did not find any worksheet indicators to show")),Hs,Xs,F("div",Ys,[(B(!0),Y(xt,null,Lt(X(n).overViewStats?.extras,a=>(B(),Y("div",{key:a.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[F("span",js,et(a.count),1),F("span",Zs,et(a.group),1)]))),128)),X(n).overViewStats?.extras?.length?yt("v-if",!0):(B(),Y("p",Ks,"I did not find any extra indicators to show"))])])],64))}}),Js=he(Qs,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Overview.vue"]]),tu={key:0,class:"text-start my-4 w-100"},eu=F("h1",{class:"text-xl text-gray-700 font-semibold"},"Delayed and incomplete",-1),nu=F("hr",{class:"my-2"},null,-1),ru={class:"flex justify-start items-center"},iu={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},au={class:"mr-4 font-bold text-gray-600 text-2xl"},ou=F("div",{class:"font-semibold text-gray-400 text-l"},"Already Delayed",-1),lu=F("div",{id:"late-active",class:"flex justify-start items-center ms-8"},[F("div",{class:"me-8"},[F("div",{id:"late-active-donut"})]),F("div",null,[F("div",{id:"late-active-since"})])],-1),su=F("h1",{class:"mt-4 text-xl text-gray-700 font-semibold"},"Authosised already delayed",-1),uu=F("hr",{class:"my-2"},null,-1),cu={class:"flex justify-start items-center"},fu={class:"content-middle bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},du={class:"mr-4 font-bold text-gray-600 text-2xl"},hu=F("div",{class:"font-semibold text-gray-400 text-l"},"Released as Delayed",-1),vu=F("div",{id:"late-auth",class:"flex justify-start items-center ms-8"},[F("div",{class:"me-8"},[F("div",{id:"late-auth-donut"})]),F("div",null,[F("div",{id:"late-auth-since"})])],-1),pu=de({__name:"Laggard",setup(t){const e=hn(),{dashboard:n}=vn(e),r=ae(0),i=ae(0);Re(()=>{e.getSampleLaggards()}),oe(()=>n.value.laggards,(u,s)=>{const l=u?.filter(p=>p?.category==="delayed_and_incomplete")[0],c=u?.filter(p=>p?.category==="authorised_already_delayed")[0];r.value=l?.counts?.totalIncomplete??0;const f=[{item:"On-Time",count:l?.counts?.totalDelayed,percent:l?.counts?.totalIncomplete>0?l?.counts?.totalDelayed/l?.counts?.totalIncomplete*100:0},{item:"Delayed",count:l?.counts?.totalNotDelayed,percent:l?.counts?.totalIncomplete>0?l?.counts?.totalNotDelayed/l?.counts?.totalIncomplete*100:0}];o(f,"late-active-donut");const d=[{type:"<10",value:l?.counts?.lessThanTen},{type:"10 - 20",value:l?.counts?.tenToTwenty},{type:"20 - 30",value:l?.counts?.twentyToThirty},{type:"> 30",value:l?.counts?.graterThanThirty}];a(d,"late-active-since","days since created","number of samples"),i.value=c?.counts?.totalIncomplete??0;const h=[{item:"On-Time",count:c?.counts?.totalDelayed,percent:c?.counts?.totalIncomplete>0?c?.counts?.totalDelayed/c?.counts?.totalIncomplete*100:0},{item:"Delayed",count:c?.counts?.totalNotDelayed,percent:c?.counts?.totalIncomplete>0?c?.counts?.totalNotDelayed/c?.counts?.totalIncomplete*100:0}];o(h,"late-auth-donut");const v=[{type:"<10",value:c?.counts?.lessThanTen},{type:"10 - 20",value:c?.counts?.tenToTwenty},{type:"20 - 30",value:c?.counts?.twentyToThirty},{type:"> 30",value:c?.counts?.graterThanThirty}];a(v,"late-auth-since","days: created to authorised","number of samples")});const a=(u,s,l,c)=>{const f=new en({container:s,autoFit:!0,height:200,width:600});f.data(u),f.scale({value:{max:150,min:0,alias:c},type:{alias:l}}),f.axis("type",{title:{offset:60,style:{fontSize:12,fontWeight:300}},tickLine:null,line:null}),f.axis("value",{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),f.legend(!1),f.coordinate().transpose(),f.interval().position("type*value").size(26).label("value",{style:{fill:"#8d8d8d"},offset:10}),f.interaction("element-active"),f.render()},o=(u,s)=>{const l=new en({container:s,autoFit:!0,height:150,width:300});l.data(u),l.scale("percent",{formatter:c=>(c=c*100+"%",c)}),l.coordinate("theta",{radius:.75,innerRadius:.6}),l.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),l.annotation(),l.interval().adjust("stack").position("percent").color("item").label("percent",c=>({content:f=>`${f.item}: ${c*100}%`})).tooltip("item*percent",(c,f)=>(f=f*100+"%",{name:c,value:f})),l.interaction("element-active"),l.render()};return(u,s)=>(B(),Y(xt,null,[X(n).fetchingLaggards?(B(),Y("div",tu,[le(tn,{message:"fetching laggard stats ..."})])):yt("v-if",!0),F("section",null,[eu,nu,F("div",ru,[F("div",iu,[F("div",au,et(r.value),1),ou]),lu]),su,uu,F("div",cu,[F("div",fu,[F("div",du,et(i.value),1),hu]),vu])])],64))}}),gu=he(pu,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Laggard.vue"]]),yu={class:"flex justify-between"},mu={class:"flex justify-end align-items-center mt-4 mb-8"},xu=["onClick"],bu={key:0,class:"text-start my-4 w-100"},Fu=F("h1",{class:"text-xl text-gray-700 font-semibold"},"Instrument Matrix / Load",-1),wu=F("hr",{class:"my-2"},null,-1),Su={key:0},Au={key:1,class:"flex justify-start"},_u={class:"mr-4 font-bold text-gray-600 text-xl"},Du={class:"font-semibold text-gray-400 text-l"},ku=Gl('<h1 class="mt-8 text-xl text-gray-700 font-semibold">User Matrix / Load</h1><hr class="my-2"><div class="flex flex-wrap justify-start" id="user-matrix"><div><div id="registration"></div></div><div><div id="submission"></div></div><div><div id="verification"></div></div><div><div id="publication"></div></div></div>',3),Eu=F("h3",null,"Custom Filter Date Range",-1),Iu={action:"post",class:"p-1"},Tu={class:"grid grid-cols-2 gap-x-4 mb-4"},Ou={class:"block col-span-2 mb-2"},Mu=F("span",{class:"text-gray-700"},"Date From",-1),$u={class:"block col-span-2 mb-2"},Pu=F("span",{class:"text-gray-700"},"Date To",-1),Lu=F("hr",null,null,-1),Cu=de({__name:"Resource",setup(t){const e=hn(),{dashboard:n}=vn(e),r=Aa({range:{from:"",to:""}});let i=ae(!1);const a=()=>{e.setFilterRange(_i(r.range.from),_i(r.range.to)),i.value=!1};Re(async()=>{s(),e.setShowFilters(!0),e.getResourceStats()}),oe(()=>n.value.filterRange.from,(l,c)=>{s(),e.getResourceStats()}),oe(()=>n.value.resourceStats?.samples,(l,c)=>{n.value.resourceStats?.samples?.forEach(f=>{let d=[],h=0;f.counts?.forEach(v=>h+=v.count),f.counts?.forEach(v=>{d.push({item:v.group,count:v.count,percent:v.count/h})}),u(d,f.group,f.group)})});const o=l=>{let c=0;return n.value.resourceStats?.instruments?.forEach(d=>c+=d.count),(l/c*100).toFixed(2)+" %"},u=(l,c,f)=>{const d=new en({container:c,autoFit:!0,height:250,width:500,localRefresh:!1});d.coordinate("theta",{radius:.75,innerRadius:.5}),d.data(l),d.scale("percent",{formatter:v=>(v=(v*100).toFixed(2)+"%",v)}),d.tooltip({showTitle:!1,showMarkers:!1}),d.legend(!1),d.interval().position("percent").color("item").label("percent",{layout:[{type:"pie-spider"},{type:"hide-overlap"}],offset:8,labelHeight:38,content:v=>`${v.item} (${v.count})`,labelLine:{style:{lineWidth:.5}}}).adjust("stack"),d.createView().annotation().text({position:["50%","50%"],content:f,style:{fill:"#262626",textAlign:"center"}}),d.interaction("element-active"),d.render()},s=()=>{document.getElementById("user-matrix").innerHTML="";const l=`
      <div>
        <div id="registration"></div>
      </div>
      <div>
        <div id="submission"></div>
      </div>
      <div>
        <div id="verification"></div>
      </div>
      <div>
        <div id="publication"></div>
      </div>
    `;document.getElementById("user-matrix").innerHTML=l};return(l,c)=>{const f=Wl("VTooltip");return B(),Y(xt,null,[F("section",yu,[Et(F("div",mu,[(B(!0),Y(xt,null,Lt(X(n).filters,(d,h)=>Et((B(),jt(f,{key:h,placements:["right-start"]},{popper:Gt(()=>[zn(et(X(e).filterToolTip(d)),1)]),default:Gt(()=>[F("button",{onClick:v=>X(e).setCurrentFilter(d),type:"button",class:_a(["px-2 py-1 mr-2 border-gray-800 border text-gray-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none",{"bg-sky-800 text-white":X(n).currentFilter===d}])},et(d),11,xu)]),_:2},1024)),[[Rn,d!==X(n).filters[X(n).filters.length]]])),128)),F("button",{onClick:c[0]||(c[0]=d=>Ai(i)?i.value=!0:i=!0),class:"ml-4 mr-1 px-2 py-1 border-gray-500 border text-gray-500 rounded-sm transition duration-300 hover:bg-gray-700 hover:text-white focus:outline-none"},et(X(n).filterRange.from)+" - "+et(X(n).filterRange.to),1),yt(` <button
        type="button"
        class="px-2 py-1 border-sky-800 border text-sky-800 rounded-sm transition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"
      >
        Apply
      </button> `)],512),[[Rn,X(n).showFilters]])]),X(n).fetchingResourceStats?(B(),Y("div",bu,[le(tn,{message:"fetching resource stats ..."})])):yt("v-if",!0),F("section",null,[Fu,wu,X(n).resourceStats?.instruments?.length===0?(B(),Y("div",Su,"NO DATA")):(B(),Y("div",Au,[(B(!0),Y(xt,null,Lt(X(n).resourceStats?.instruments,d=>(B(),Y("div",{key:d.group,class:"flex items-center bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8"},[F("span",_u,et(o(d?.count)),1),F("span",Du,et(d.group),1)]))),128))])),ku]),yt(" Custome Dat Range Modal "),X(i)?(B(),jt(Bl,{key:1,onClose:c[4]||(c[4]=d=>Ai(i)?i.value=!1:i=!1),contentWidth:"w-1/4"},{header:Gt(()=>[Eu]),body:Gt(()=>[F("form",Iu,[F("div",Tu,[F("label",Ou,[Mu,Et(F("input",{type:"datetime-local",class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":c[1]||(c[1]=d=>r.range.from=d),placeholder:"Name ..."},null,512),[[Nn,r.range.from]])]),F("label",$u,[Pu,Et(F("input",{type:"datetime-local",class:"form-input mt-1 block w-full","onUpdate:modelValue":c[2]||(c[2]=d=>r.range.to=d),placeholder:"Name ..."},null,512),[[Nn,r.range.to]])])]),Lu,F("button",{type:"button",onClick:c[3]||(c[3]=Da(d=>a(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])]),_:1})):yt("v-if",!0)],64)}}}),Ru=he(Cu,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Resource.vue"]]);var At=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],Wt;(function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"})(Wt||(Wt={}));var zu="AntV/G2Plot";function Nu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return zu+": "+t.replace(/%s/g,function(){return""+e[r++]})}function ne(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t](Nu.apply(void 0,st([n],r)))}function nt(t,e){var n={};return t!==null&&typeof t=="object"&&e.forEach(function(r){var i=t[r];i!==void 0&&(n[r]=i)}),n}function Zr(t,e){if(!t)return{};var n=t.filter(function(a){var o=k(a,[e]);return dt(o)&&!isNaN(o)}),r=n.every(function(a){return k(a,[e])>=0}),i=n.every(function(a){return k(a,[e])<=0});return r?{min:0}:i?{max:0}:{}}function La(t,e,n,r,i){if(i===void 0&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],o={},u=-1;return t.forEach(function(s){var l=s[e],c=s[n],f=s[r],d=nt(s,i);o[l]||(o[l]=m({id:++u,name:l},d)),o[c]||(o[c]=m({id:++u,name:c},d)),a.push(m({source:o[l].id,target:o[c].id,value:f},d))}),{nodes:Object.values(o).sort(function(s,l){return s.id-l.id}),links:a}}function Me(t,e){var n=ze(t,function(r){var i=r[e];return i===null||typeof i=="number"&&!isNaN(i)});return ne(Wt.WARN,n.length===t.length,"illegal data existed in chart data."),n}var Vu=5,Wu={}.toString,Ca=function(t,e){return Wu.call(t)==="[object "+e+"]"},Bu=function(t){return Ca(t,"Array")},Gu=function(t){return typeof t=="object"&&t!==null},Mi=function(t){if(!Gu(t)||!Ca(t,"Object"))return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ra=function(t,e,n,r){n=n||0,r=r||Vu;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];a?Mi(a)?(Mi(t[i])||(t[i]={}),n<r?Ra(t[i],a,n+1,r):t[i]=e[i]):Bu(a)?(t[i]=[],t[i]=t[i].concat(a)):t[i]=a:t[i]=a}},S=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Ra(t,e[r]);return t};function Mr(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function V(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.reduce(function(r,i){return i(r)},n)}}function bt(t,e){return t.geometries.find(function(n){return n.type===e})}function Vn(t){return _t(t.geometries,function(e,n){return e.concat(n.elements)},[])}function an(t){return k(t,["views","length"],0)<=0?Vn(t):_t(t.views,function(e,n){return e.concat(an(n))},Vn(t))}function Uu(t){return k(t,["views","length"],0)<=0?t.geometries:_t(t.views,function(e,n){return e.concat(n.geometries)},t.geometries)}function $i(t){if(!t)return t;var e=t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return e.map(function(n){return n.toLowerCase()}).join("-")}function mt(t){if(!us(t,"Object"))return t;var e=m({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}var mr;function qu(){return mr||(mr=document.createElement("canvas").getContext("2d")),mr}ka(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,u=e.fontVariant,s=qu();s.font=[o,a,u,n+"px",i].join(" ");var l=s.measureText(wt(t)?t:"");return l.width},function(t,e){return e===void 0&&(e={}),st([t],cs(e)).join("")});function Fe(t){return typeof t=="number"&&!isNaN(t)}function Hu(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function se(t){if(dt(t))return[t,t,t,t];if(it(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}function Kn(t,e,n){e===void 0&&(e="bottom"),n===void 0&&(n=25);var r=se(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function Kr(t){var e=t.map(function(r){return se(r)}),n=[0,0,0,0];return e.length>0&&(n=n.map(function(r,i){return e.forEach(function(a,o){r+=e[o][i]}),r})),n}function Xu(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];n.push(["L",a.x,a.y])}e&&n.push(["Z"])}return n}var Yu=function(t,e,n,r){var i=[],a,o,u=!!r,s,l;if(u){s=[1/0,1/0],l=[-1/0,-1/0];for(var c=0,f=t.length;c<f;c++){var d=t[c];s=wn([0,0],s,d),l=Sn([0,0],l,d)}s=wn([0,0],s,r[0]),l=Sn([0,0],l,r[1])}for(var c=0,h=t.length;c<h;c++){var d=t[c];if(n)a=t[c?c-1:h-1],o=t[(c+1)%h];else if(c===0||c===h-1){i.push(d);continue}else a=t[c-1],o=t[c+1];var v=[0,0];v=fs(v,o,a),v=pr(v,v,e);var p=Di(d,a),y=Di(d,o),g=p+y;g!==0&&(p/=g,y/=g);var x=pr([0,0],v,-p),w=pr([0,0],v,y),b=ki([0,0],d,x),A=ki([0,0],d,w);u&&(b=Sn([0,0],b,s),b=wn([0,0],b,l),A=Sn([0,0],A,s),A=wn([0,0],A,l)),i.push(b),i.push(A)}return n&&i.push(i.shift()),i};function ju(t,e,n){for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var u=Yu(i,.4,r,n),s=i.length,l=[],c,f,d,a=0;a<s-1;a++)c=u[a*2],f=u[a*2+1],d=i[a+1],l.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return r&&(c=u[s],f=u[s+1],d=i[0],l.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),l}function Zu(t,e,n){var r=[],i=t[0],a=null;if(t.length<=2)return Xu(t,e);for(var o=0,u=t.length;o<u;o++){var s=t[o];(!a||!(a.x===s.x&&a.y===s.y))&&(r.push(s.x),r.push(s.y),a=s)}var l=n||[[0,0],[1,1]],c=ju(r,e,l);return c.unshift(["M",i.x,i.y]),c}function za(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];k(t,"fill")&&(e.color=t.fill);var r=nt(t,n),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,u=r.shadowOffsetX,s=u===void 0?0:u,l=r.shadowOffsetY,c=l===void 0?0:l;e["text-shadow"]=""+[i,s+"px",c+"px",o+"px"].join(" ");var f=nt(t,n),d=f.stroke,h=f.lineWidth,v=h===void 0?0:h;return e["-webkit-text-stroke"]=""+[v+"px",d].join(" "),P(t,function(p,y){["fontSize"].includes(y)&&dt(p)?e[$i(y)]=p+"px":y&&!n.includes(y)&&(e[$i(y)]=""+p)}),e}function Na(t,e){t.style["pointer-events"]="none",P(e,function(n,r){r&&n&&(t.style[r]=n)})}var Qn=function(t,e,n){var r=e.statistic,i=e.plotType,a=r.title,o=r.content;[a,o].forEach(function(u,s){if(u){var l="";s===0?l=o?"translate(-50%, -100%)":"translate(-50%, -50%)":l=a?"translate(-50%, 0)":"translate(-50%, -50%)";var c=ft(u.style)?u.style(n):u.style;t.annotation().html(m({position:["50%","50%"],html:function(f,d){var h=d.getCoordinate(),v=0;if(i==="pie"||i==="ring-progress")v=h.getRadius()*h.innerRadius*2;else if(i==="liquid"){var p=k(d.geometries,[0,"elements",0,"shape"]);if(p){var y=p.find(function(b){return b.get("name")==="wrap"}),g=y.getCanvasBBox().width;v=g}}else v||(v=h.getWidth());Na(f,m({width:v+"px",transform:l},za(c)));var x=d.getData();if(u.customHtml)return u.customHtml(f,d,n,x);var w=u.content;return u.formatter&&(w=u.formatter(n,x)),w?wt(w)?w:""+w:"<div></div>"},key:(s===0?"top":"bottom")+"-statistic"},nt(u,["offsetX","offsetY","rotate","style","formatter"])))}})},Ku=function(t,e,n){var r=e.statistic,i=r.title,a=r.content;[i,a].forEach(function(o){if(o){var u=ft(o.style)?o.style(n):o.style;t.annotation().html(m({position:["50%","100%"],html:function(s,l){var c=l.getCoordinate(),f=l.views[0].getCoordinate(),d=f.getCenter(),h=f.getRadius(),v=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*h,p=d.y+v-c.y.start-parseFloat(k(u,"fontSize",0)),y=c.getRadius()*c.innerRadius*2;Na(s,m({width:y+"px",transform:"translate(-50%, "+p+"px)"},za(u)));var g=l.getData();if(o.customHtml)return o.customHtml(s,l,n,g);var x=o.content;return o.formatter&&(x=o.formatter(n,g)),x?wt(x)?x:""+x:"<div></div>"}},nt(o,["offsetX","offsetY","rotate","style","formatter"])))}})};function Va(t,e){return e?_t(e,function(n,r,i){return n.replace(new RegExp("{\\s*"+i+"\\s*}","g"),r)},t):t}function H(t,e){return t.views.find(function(n){return n.id===e})}function je(t){var e=t.parent;return e?e.views:[]}function Pi(t){return je(t).filter(function(e){return e!==t})}function pn(t,e,n){n===void 0&&(n=t.geometries),typeof e=="boolean"?t.animate(e):t.animate(!0),P(n,function(r){var i;ft(e)?i=e(r.type||r.shapeType,r)||!0:i=e,r.animate(i)})}function Jn(){return typeof window=="object"?window?.devicePixelRatio:2}function Qr(t,e){e===void 0&&(e=t);var n=document.createElement("canvas"),r=Jn();n.width=t*r,n.height=e*r,n.style.width=t+"px",n.style.height=e+"px";var i=n.getContext("2d");return i.scale(r,r),n}function Jr(t,e,n,r){r===void 0&&(r=n);var i=e.backgroundColor,a=e.opacity;t.globalAlpha=a,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function Wa(t,e,n){var r=t+e;return n?r*2:r}function Ba(t,e){var n=e?[[t*.25,t*.25],[t*.75,t*.75]]:[[t*.5,t*.5]];return n}function ti(t,e){var n=e*Math.PI/180,r={a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0};return r}var Qu={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function Ju(t,e,n,r){var i=e.size,a=e.fill,o=e.lineWidth,u=e.stroke,s=e.fillOpacity;t.beginPath(),t.globalAlpha=s,t.fillStyle=a,t.strokeStyle=u,t.lineWidth=o,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),o&&t.stroke(),t.closePath()}function tc(t){var e=S({},Qu,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=Wa(n,r,i),u=Ba(o,i),s=Qr(o,o),l=s.getContext("2d");Jr(l,e,o);for(var c=0,f=u;c<f.length;c++){var d=f[c],h=d[0],v=d[1];Ju(l,e,h,v)}var p=l.createPattern(s,"repeat");if(p){var y=Jn(),g=ti(y,a);p.setTransform(g)}return p}var ec={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function nc(t,e,n){var r=e.stroke,i=e.lineWidth,a=e.strokeOpacity,o=new Path2D(n);t.globalAlpha=a,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(o)}function rc(t){var e=S({},ec,t),n=e.spacing,r=e.rotation,i=e.lineWidth,a=n+i||1,o=n+i||1,u=`
            M 0 0 L `+a+` 0
            M 0 `+o+" L "+a+" "+o+`
            `,s=Qr(a,o),l=s.getContext("2d");Jr(l,e,a,o),nc(l,e,u);var c=l.createPattern(s,"repeat");if(c){var f=Jn(),d=ti(f,r);c.setTransform(d)}return c}var ic={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function ac(t,e,n,r){var i=e.stroke,a=e.size,o=e.fill,u=e.lineWidth,s=e.fillOpacity;t.globalAlpha=s,t.strokeStyle=i,t.lineWidth=u,t.fillStyle=o,t.strokeRect(n-a/2,r-a/2,a,a),t.fillRect(n-a/2,r-a/2,a,a)}function oc(t){var e=S({},ic,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=Wa(n,r,i),u=Ba(o,i),s=Qr(o,o),l=s.getContext("2d");Jr(l,e,o);for(var c=0,f=u;c<f.length;c++){var d=f[c],h=d[0],v=d[1];ac(l,e,h,v)}var p=l.createPattern(s,"repeat");if(p){var y=Jn(),g=ti(y,a);p.setTransform(g)}return p}function lc(t){var e=t.type,n=t.cfg,r;switch(e){case"dot":r=tc(n);break;case"line":r=rc(n);break;case"square":r=oc(n);break}return r}function Tt(t){var e=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;var u=function(s){for(var l,c,f,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var v=a.getTheme().defaultColor,p=v,y=(c=(l=a.geometries)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.getAttribute("color");if(y){var g=y.getFields()[0],x=k(s,g);p=Dt.getMappingValue(y,x,((f=y.values)===null||f===void 0?void 0:f[0])||v)}var w=o;typeof o=="function"&&(w=o.call(e,s,p)),w instanceof CanvasPattern||(w=lc(S({},{cfg:{backgroundColor:p}},w)));var b=i[t];return m(m({},typeof b=="function"?b.call.apply(b,st([e,s],d)):b||{}),{fill:w||p})};return S({},n,{options:(r={},r[t]=u,r)})}}function Ne(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.seriesField;return r===!1?e.legend(!1):(i||a)&&e.legend(i||a,r),t}function gt(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==void 0&&e.tooltip(r),t}function ot(t){var e=t.chart,n=t.options,r=n.interactions;return P(r,function(i){i.enable===!1?e.removeInteraction(i.type):e.interaction(i.type,i.cfg||{})}),t}function rt(t){var e=t.chart,n=t.options,r=n.animation;return pn(e,r),t}function J(t){var e=t.chart,n=t.options,r=n.theme;return r&&e.theme(r),t}function pe(t){var e=t.chart,n=t.options,r=n.state;return r&&P(e.geometries,function(i){i.state(r)}),t}function gn(t){var e=t.chart,n=t.options,r=n.slider;return e.option("slider",r),t}function ei(t){var e=t.chart,n=t.options,r=n.scrollbar;return e.option("scrollbar",r),t}function ct(t,e){return function(n){var r=n.chart,i=n.options,a={};return P(t,function(o,u){a[u]=nt(o,At)}),a=S({},e,i.meta,a),r.scale(a),n}}function ut(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return P(st(r.annotations||[],t||[]),function(a){i.annotation(a)}),e}}function we(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,a=i;return Ae(r)&&Rt(i)&&(Object.values(nt(r,["min","max","minLimit","maxLimit"])).some(function(o){return!Rt(o)})?a=!0:a=!1),e.limitInPlot=a,t}function Ga(t){return t===void 0&&(t="rect"),function(e){var n=e.chart,r=e.options,i=r.coordinate,a=Array.from(i||[]).map(function(o){return o.type==="reflectX"?["reflect","x"]:o.type==="reflectY"?["reflect","y"]:o.type==="transpose"?["transpose"]:null}).filter(function(o){return!!o});return a.length!==0&&n.coordinate({type:t,actions:a}),e}}var sc={locale:"en-US"},Tn={};function Ua(t,e){Tn[t]=e}function tr(t){return{get:function(e,n){return Va(k(Tn[t],e)||k(Tn[sc.locale],e)||k(Tn["en-US"],e)||e,n)}}}var uc={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},cc={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}};function Nt(t,e){if(t===!1)return{fields:!1};var n=k(t,"fields"),r=k(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function An(t,e){var n=t.type,r=t.xField,i=t.yField,a=t.colorField,o=t.shapeField,u=t.sizeField,s=t.styleField,l=t.rawFields,c=[];if(l=(ft(l)?l(n,e):l)||[],e==="color")c=st([a||r],l);else if(e==="shape")c=st([o||r],l);else if(e==="size")c=st([u||r],l);else{c=st([r,i,a,o,u,s],l);var f=["x","y","color","shape","size","style"].indexOf(e),d=c[f];c.splice(f,1),c.unshift(d)}var h=nn(c.filter(function(p){return!!p})),v=n==="line"&&[r,i].includes(h.join("*"))?"":h.join("*");return{mappingFields:h,tileMappingField:v}}function Ee(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach(function(a,o){i[a]=n[o]}),delete i.undefined,e(i)}}function kt(t){var e=t.chart,n=t.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,u=n.yField,s=n.colorField,l=n.shapeField,c=n.sizeField,f=n.tooltipFields,d=n.label,h=n.state,v=n.customInfo;if(!a)return t;var p=a.color,y=a.shape,g=a.size,x=a.style,w=a.tooltip,b=e[r](i).position(o+"*"+u);if(wt(p))s?b.color(s,p):b.color(p);else if(ft(p)){var A=An(n,"color"),D=A.mappingFields,T=A.tileMappingField;b.color(T,Ee(D,p))}else s&&b.color(s,p);if(wt(y))l?b.shape(l,[y]):b.shape(y);else if(ft(y)){var O=An(n,"shape"),D=O.mappingFields,T=O.tileMappingField;b.shape(T,Ee(D,y))}else l&&b.shape(l,y);if(dt(g))c?b.size(c,g):b.size(g);else if(ft(g)){var C=An(n,"size"),D=C.mappingFields,T=C.tileMappingField;b.size(T,Ee(D,g))}else c&&b.size(c,g);if(ft(x)){var M=An(n,"style"),D=M.mappingFields,T=M.tileMappingField;b.style(T,Ee(D,x))}else Ae(x)&&b.style(x);if(f===!1?b.tooltip(!1):Xn(f)||b.tooltip(f.join("*"),Ee(f,w)),d===!1)b.label(!1);else if(d){var E=d.callback,L=d.fields,G=St(d,["callback","fields"]);b.label({fields:L||[u],callback:E,cfg:mt(G)})}return h&&b.state(h),v&&b.customInfo(v),[o,u].filter(function(Z){return Z!==s}).forEach(function(Z){e.legend(Z,!1)}),m(m({},t),{ext:{geometry:b}})}function er(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,u=e.tooltip,s=e.useDeferredLabel,l=Nt(u,[r,i,a]),c=l.fields,f=l.formatter;return n?kt(S({},t,{options:{type:"area",colorField:a,tooltipFields:c,mapping:m({shape:o?"smooth":"area",tooltip:f},n),args:{useDeferredLabel:s}}})):t}function qa(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=Nt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?kt(S({},t,{options:{type:"edge",colorField:a,tooltipFields:l,mapping:m({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function fc(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,u=n.marginRatio,s=n.widthRatio,l=n.groupField,c=n.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:l||i,marginRatio:u}),o&&f.push({type:"stack",marginRatio:u})),f.length&&r?.geometry){var d=r?.geometry;d.adjust(f)}return Rt(s)||e.theme(S({},Ae(c)?c:Ea(c),{columnWidthRatio:s})),t}function Ft(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,u=e.minColumnWidth,s=e.maxColumnWidth,l=e.columnBackground,c=e.dodgePadding,f=e.intervalPadding,d=e.useDeferredLabel,h=Nt(o,[n,r,a]),v=h.fields,p=h.formatter,y=(i?kt(S({},t,{options:{type:"interval",colorField:a,tooltipFields:v,mapping:m({tooltip:p},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:u,maxColumnWidth:s,background:l,useDeferredLabel:d}}})):t).ext;return fc(m(m({},t),{ext:y}))}function Ve(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,u=e.smooth,s=e.connectNulls,l=e.tooltip,c=e.useDeferredLabel,f=Nt(l,[i,a,o]),d=f.fields,h=f.formatter;return n?kt(S({},t,{options:{type:"line",colorField:o,tooltipFields:d,mapping:Yr({shape:r||(u?"smooth":"line"),tooltip:h},n),args:{connectNulls:s,useDeferredLabel:c}}})):t}function Ot(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=e.shapeField,s=e.tooltip,l=e.useDeferredLabel,c=Nt(s,[r,i,a,o,u]),f=c.fields,d=c.formatter;return n?kt(S({},t,{options:{type:"point",colorField:a,shapeField:u,tooltipFields:f,mapping:m({tooltip:d},n),args:{useDeferredLabel:l}}})):t}function nr(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=Nt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?kt(S({},t,{options:{type:"polygon",colorField:a,tooltipFields:l,mapping:m({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function ni(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,s=Nt(o,[r,i,a]),l=s.fields,c=s.formatter;return n?kt(S({},t,{options:{type:"schema",colorField:a,tooltipFields:l,mapping:m({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function dc(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=e.tooltip,s=Nt(u,[r,i,a,o]),l=s.fields,c=s.formatter;return n?kt(S({},t,{options:{type:"violin",colorField:a,tooltipFields:l,mapping:m({tooltip:c},n)}})):t}var xe={},$e={},Ha={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1,n=function(){return"".concat(e++)};t.default=n})(Ha);var rr={},ir={},ri={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a=null;return function(){for(var o=this,u=arguments.length,s=new Array(u),l=0;l<u;l++)s[l]=arguments[l];clearTimeout(a),a=setTimeout(function(){r.apply(o,s)},i)}};t.default=e})(ri);var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.SensorTabIndex=Jt.SensorClassName=Jt.SizeSensorId=void 0;var hc="size-sensor-id";Jt.SizeSensorId=hc;var vc="size-sensor-object";Jt.SensorClassName=vc;var pc="-1";Jt.SensorTabIndex=pc;Object.defineProperty(ir,"__esModule",{value:!0});ir.createSensor=void 0;var gc=yc(ri),Li=Jt;function yc(t){return t&&t.__esModule?t:{default:t}}var mc=function(e){var n=void 0,r=[],i=function(){getComputedStyle(e).position==="static"&&(e.style.position="relative");var c=document.createElement("object");return c.onload=function(){c.contentDocument.defaultView.addEventListener("resize",a),a()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("class",Li.SensorClassName),c.setAttribute("tabindex",Li.SensorTabIndex),c.type="text/html",e.appendChild(c),c.data="about:blank",c},a=(0,gc.default)(function(){r.forEach(function(l){l(e)})}),o=function(c){n||(n=i()),r.indexOf(c)===-1&&r.push(c)},u=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",a),n.parentNode.removeChild(n),n=void 0,r=[])},s=function(c){var f=r.indexOf(c);f!==-1&&r.splice(f,1),r.length===0&&n&&u()};return{element:e,bind:o,destroy:u,unbind:s}};ir.createSensor=mc;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.createSensor=void 0;var xc=bc(ri);function bc(t){return t&&t.__esModule?t:{default:t}}var Fc=function(e){var n=void 0,r=[],i=(0,xc.default)(function(){r.forEach(function(l){l(e)})}),a=function(){var c=new ResizeObserver(i);return c.observe(e),i(),c},o=function(c){n||(n=a()),r.indexOf(c)===-1&&r.push(c)},u=function(){n.disconnect(),r=[],n=void 0},s=function(c){var f=r.indexOf(c);f!==-1&&r.splice(f,1),r.length===0&&n&&u()};return{element:e,bind:o,destroy:u,unbind:s}};ar.createSensor=Fc;Object.defineProperty(rr,"__esModule",{value:!0});rr.createSensor=void 0;var wc=ir,Sc=ar,Ac=typeof ResizeObserver<"u"?Sc.createSensor:wc.createSensor;rr.createSensor=Ac;Object.defineProperty($e,"__esModule",{value:!0});$e.removeSensor=$e.getSensor=void 0;var _c=kc(Ha),Dc=rr,Wn=Jt;function kc(t){return t&&t.__esModule?t:{default:t}}var Je={},Ec=function(e){var n=e.getAttribute(Wn.SizeSensorId);if(n&&Je[n])return Je[n];var r=(0,_c.default)();e.setAttribute(Wn.SizeSensorId,r);var i=(0,Dc.createSensor)(e);return Je[r]=i,i};$e.getSensor=Ec;var Ic=function(e){var n=e.element.getAttribute(Wn.SizeSensorId);e.element.removeAttribute(Wn.SizeSensorId),e.destroy(),n&&Je[n]&&delete Je[n]};$e.removeSensor=Ic;Object.defineProperty(xe,"__esModule",{value:!0});xe.ver=xe.clear=Xa=xe.bind=void 0;var $r=$e,Tc=function(e,n){var r=(0,$r.getSensor)(e);return r.bind(n),function(){r.unbind(n)}},Xa=xe.bind=Tc,Oc=function(e){var n=(0,$r.getSensor)(e);(0,$r.removeSensor)(n)};xe.clear=Oc;var Mc="1.0.1";xe.ver=Mc;var Ci="data-chart-source-type",Ya=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],q=function(t){U(e,t);function e(n,r){var i=t.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=S({},i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var n=this.options,r=n.width,i=n.height,a=n.defaultInteractions;this.chart=new en(m(m(m(m({container:this.container,autoFit:!1},this.getChartSize(r,i)),{localRefresh:!1}),nt(this.options,Ya)),{defaultInteractions:a})),this.container.setAttribute(Ci,"G2Plot")},e.prototype.getChartSize=function(n,r){var i=Mr(this.container);return{width:n||i.width||400,height:r||i.height||400}},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r?.type&&n.emit(r.type,r)})},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(n){this.updateOption(n),this.render()},e.prototype.updateOption=function(n){this.options=S({},this.options,n)},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=an(this.chart);P(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=an(this.chart),r=[];return P(n,function(i){var a=i.getData(),o=i.getStates();P(o,function(u){r.push({data:a,state:u,geometry:i.geometry,element:i})})}),r},e.prototype.changeData=function(n){this.update({data:n})},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.addAnnotations=function(n,r){r=r||this.chart;var i=st(n),a=r.getController("annotation"),o=a.getComponents().map(function(l){return l.extra});a.clear(!0);for(var u=function(l){var c=o[l],f=i.findIndex(function(d){return d.id&&d.id===c.id});f!==-1&&(c=S({},c,i[f]),i.splice(f,1)),a.annotation(c)},s=0;s<o.length;s++)u(s);i.forEach(function(l){return a.annotation(l)}),r.render(!0)},e.prototype.removeAnnotations=function(n){var r=this.chart.getController("annotation"),i=r.getComponents().map(function(u){return u.extra});r.clear(!0);for(var a=function(u){var s=i[u];n.find(function(l){return l.id&&l.id===s.id})||r.annotation(s)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(Ci)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor(),r=this.options,i=r.padding,a=r.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this;if(!this.unbind){var r=this.options.autoFit,i=r===void 0?!0:r;i&&(this.unbind=Xa(this.container,function(){var a=Mr(n.container),o=a.width,u=a.height;(o!==n.chart.width||u!==n.chart.height)&&n.triggerResize()}))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(ds);function ja(t,e,n,r){var i=_t(t,function(a,o){var u=o[n],s=a.has(u)?a.get(u):0,l=o[e];return s=Fe(l)?s+l:s,a.set(u,s),a},new Map);return zt(t,function(a){var o,u=a[e],s=a[n],l=Fe(u)&&i.get(s)!==0?u/i.get(s):0;return m(m({},a),(o={},o[r]=l,o))})}function $c(t,e,n,r){var i=_t(t,function(a,o){var u=_t(n,function(c,f){return""+c+o[f]},""),s=a.has(u)?a.get(u):0,l=o[e];return s=Fe(l)?s+l:s,a.set(u,s),a},new Map);return zt(t,function(a){var o,u=a[e],s=_t(n,function(c,f){return""+c+a[f]},""),l=Fe(u)&&i.get(s)!==0?u/i.get(s):0;return m(m({},a),(o={},o[r]=l,o))})}function yn(t,e,n,r,i){return i?ja(t,e,n,r):t}function Pc(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,u=n.point,s=n.area,l=n.seriesField,c=u?.state,f=s?.state;e.data(r);var d=S({},t,{options:{shapeField:l,line:{color:i,style:a,shape:o},point:u&&m({color:i,shape:"circle"},u),area:s&&m({color:i},s),label:void 0}}),h=S({},d,{options:{tooltip:!1,state:c}}),v=S({},d,{options:{tooltip:!1,state:f}});return Ve(d),Ot(h),er(v),t}function or(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.data;return V(ct((e={},e[o]=i,e[u]=a,e),(n={},n[o]={type:"cat"},n[u]=Zr(s,u),n)))(t)}function Lc(t){var e=t.chart,n=t.options,r=n.reflect;if(r){var i=r;it(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});e.coordinate({type:"rect",actions:a})}return t}function Za(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function Ka(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function Cc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=bt(e,"line");if(!r)a.label(!1);else{var o=r.callback,u=St(r,["callback"]);a.label({fields:[i],callback:o,cfg:m({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},mt(u))})}return t}function Rc(t){var e=t.chart,n=t.options,r=n.isStack;return r&&P(e.geometries,function(i){i.adjust("stack")}),t}function Qa(t){return V(Pc,or,Rc,J,Lc,Za,Ka,gt,Cc,gn,ei,ot,rt,ut(),we)(t)}function zc(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,u=n.line,s=n.isPercent,l=n.xField,c=n.yField,f=n.tooltip,d=n.seriesField,h=n.startOnZero,v=o?.state,p=yn(r,c,l,c,s);e.data(p);var y=s?m({formatter:function(b){return{name:b[d]||b[l],value:(Number(b[c])*100).toFixed(2)+"%"}}},f):f,g=S({},t,{options:{area:{color:a,style:i},point:o&&m({color:a},o),tooltip:y,label:void 0,args:{startOnZero:h}}}),x={chart:e,options:S({line:{size:2}},Zn(n,["state"]),{line:u&&m({color:a},u),sizeField:d,state:u?.state,tooltip:!1,label:void 0,args:{startOnZero:h}})},w=S({},g,{options:{tooltip:!1,state:v}});return er(g),Ve(x),Ot(w),t}function Nc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=bt(e,"area");if(!r)a.label(!1);else{var o=r.callback,u=St(r,["callback"]);a.label({fields:[i],callback:o,cfg:m({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},mt(u))})}return t}function Vc(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,a=n.seriesField;return(i||r)&&a&&P(e.geometries,function(o){o.adjust("stack")}),t}function Ja(t){return V(J,Tt("areaStyle"),Ga("rect"),zc,or,Vc,Za,Ka,gt,Nc,gn,ut(),ot,rt,we)(t)}var Wc=S({},q.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Bc=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return Wc},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.isPercent,a=r.xField,o=r.yField,u=this,s=u.chart,l=u.options;or({chart:s,options:l}),this.chart.changeData(yn(n,o,a,o,i))},e.prototype.getSchemaAdaptor=function(){return Ja},e}(q),Gc=10,Uc=5,qc={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},Hc=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.buttonGroup=null,n.buttonCfg=m({name:"button"},qc),n}return e.prototype.getButtonCfg=function(){var n=this.context.view,r=k(n,["interactions","filter-action","cfg","buttonConfig"]);return S(this.buttonCfg,r,this.cfg)},e.prototype.drawButton=function(){var n=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:n.name}),i=this.drawText(r);this.drawBackground(r,i.getBBox()),this.buttonGroup=r},e.prototype.drawText=function(n){var r,i=this.getButtonCfg();return n.addShape({type:"text",name:"button-text",attrs:m({text:i.text},(r=i.textStyle)===null||r===void 0?void 0:r.default)})},e.prototype.drawBackground=function(n,r){var i,a=this.getButtonCfg(),o=se(a.padding),u=n.addShape({type:"rect",name:"button-rect",attrs:m({x:r.x-o[3],y:r.y-o[0],width:r.width+o[1]+o[3],height:r.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return u.toBack(),n.on("mouseenter",function(){var s;u.attr((s=a.buttonStyle)===null||s===void 0?void 0:s.active)}),n.on("mouseleave",function(){var s;u.attr((s=a.buttonStyle)===null||s===void 0?void 0:s.default)}),u},e.prototype.resetPosition=function(){var n=this.context.view,r=n.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),u=Dt.transform(null,[["t",i.x-o.width-Gc,i.y+o.height+Uc]]);a.setMatrix(u)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var n=this.buttonGroup;n&&n.remove(),t.prototype.destroy.call(this)},e}(re);It("brush-reset-button",Hc,{name:"brush-reset-button"});lt("filter-action",{});function Yt(t){return t.isInPlot()}function _e(t,e,n){var r=n||{},i=r.mask,a=r.isStartEnable,o=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Yt,action:["brush:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Yt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Yt,action:["brush:filter","brush:end",o+"-mask:end",o+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(u){return a?!a(u):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Yt,action:["brush-x:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Yt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Yt,action:["brush-x:filter","brush-x:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Yt,action:["brush-y:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i?.style}]}],processing:[{trigger:"mousemove",isEnable:Yt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Yt,action:["brush-y:filter","brush-y:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i?.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};default:return{}}}lt("brush",_e("brush"));lt("brush-highlight",_e("brush-highlight"));lt("brush-x",_e("brush-x","x-rect"));lt("brush-y",_e("brush-y","y-rect"));lt("brush-x-highlight",_e("brush-x-highlight","x-rect"));lt("brush-y-highlight",_e("brush-y-highlight","y-rect"));var Ri=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function to(t){var e=t.options,n=e.brush,r=ze(e.interactions||[],function(i){return Ri.indexOf(i.type)===-1});return n?.enabled&&(Ri.forEach(function(i){var a=!1;switch(n.type){case"x-rect":a=i===(n.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":a=i===(n.action==="highlight"?"brush-y-highlight":"brush-y");break;default:a=i===(n.action==="highlight"?"brush-highlight":"brush");break}var o={type:i,enable:a};n&&(o.cfg=_e(i,n.type,n)),r.push(o)}),n?.action!=="highlight"&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),S({},t,{options:{interactions:r}})}var be={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},ii=function(t,e){return t==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};lt(be.hover,{start:ii(be.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});lt(be.click,{start:ii(be.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function Xc(t){return t===void 0&&(t=!1),function(e){var n=e.chart,r=e.options,i=r.connectedArea,a=function(){n.removeInteraction(be.hover),n.removeInteraction(be.click)};if(!t&&i){var o=i.trigger||"hover";a(),n.interaction(be[o],{start:ii(o,i.style)})}else a();return e}}function eo(t,e){return!dt(t)||!dt(e)||t===0&&e===0?"-":t===e?"100%":t===0?"∞":(100*e/t).toFixed(2)+"%"}function Yc(t,e){return S({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:t.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:t.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:eo}},t)}function Bn(t,e){return zt(e.getModel().points,function(n){return t.convertPoint(n)})}function jc(t,e,n){var r=t.view,i=t.geometry,a=t.group,o=t.options,u=t.horizontal,s=o.offset,l=o.size,c=o.arrow,f=r.getCoordinate(),d=Bn(f,e)[3],h=Bn(f,n)[0],v=h.y-d.y,p=h.x-d.x;if(typeof c!="boolean"){var y=c.headSize,g=o.spacing,x;u?(p-y)/2<g?(g=Math.max(1,(p-y)/2),x=[[d.x+g,d.y-s],[d.x+g,d.y-s-l],[h.x-g,h.y-s-l/2]]):x=[[d.x+g,d.y-s],[d.x+g,d.y-s-l],[h.x-g-y,h.y-s-l],[h.x-g,h.y-s-l/2],[h.x-g-y,h.y-s]]:(v-y)/2<g?(g=Math.max(1,(v-y)/2),x=[[d.x+s,d.y+g],[d.x+s+l,d.y+g],[h.x+s+l/2,h.y-g]]):x=[[d.x+s,d.y+g],[d.x+s+l,d.y+g],[h.x+s+l,h.y-g-y],[h.x+s+l/2,h.y-g],[h.x+s,h.y-g-y]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:m(m({},c.style||{}),{points:x})})}}function Zc(t,e,n){var r,i,a,o=t.view,u=t.geometry,s=t.group,l=t.options,c=t.field,f=t.horizontal,d=l.offset,h=l.size;if(typeof l.text!="boolean"){var v=o.getCoordinate(),p=((r=l.text)===null||r===void 0?void 0:r.formatter)&&((i=l.text)===null||i===void 0?void 0:i.formatter(e.getData()[c],n.getData()[c])),y=Bn(v,e)[f?3:0],g=Bn(v,n)[f?0:3],x=s.addShape("text",{id:o.id+"-conversion-tag-text-"+u.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:m(m({},((a=l.text)===null||a===void 0?void 0:a.style)||{}),{text:p,x:f?(y.x+g.x)/2:y.x+d+h/2,y:f?y.y-d-h/2:(y.y+g.y)/2})});if(f){var w=g.x-y.x,b=x.getBBox().width;if(b>w){var A=b/p.length,D=Math.max(1,Math.ceil(w/A)-1),T=p.slice(0,D)+"...";x.attr("text",T)}}}}function Kc(t,e,n){jc(t,e,n),Zc(t,e,n)}function Qc(t,e,n){return e===void 0&&(e=!0),n===void 0&&(n=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,u=i.theme;return o&&!n&&(a.theme(S({},Ae(u)?u:Ea(u),{columnWidthRatio:1/3})),a.annotation().shape({render:function(s,l){var c=s.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),f=Ia(a.geometries,function(v){return v.type==="interval"}),d={view:l,geometry:f,group:c,field:t,horizontal:e,options:Yc(o,e)},h=f.elements;P(h,function(v,p){p>0&&Kc(d,h[p-1],v)})}})),r}}function Jc(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?n!==!1&&(n=m({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function tf(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,u=n.isPercent,s=n.isGroup,l=n.isStack,c=n.xField,f=n.yField,d=n.seriesField,h=n.groupField,v=n.tooltip,p=n.shape,y=u&&s&&l?$c(r,f,[c,h],f):yn(r,f,c,f,u),g=[];l&&d&&!s?y.forEach(function(b){var A=g.find(function(D){return D[c]===b[c]&&D[d]===b[d]});A?A[f]+=b[f]||0:g.push(m({},b))}):g=y,e.data(g);var x=u?m({formatter:function(b){return{name:s&&l?b[d]+" - "+b[h]:b[d]||b[c],value:(Number(b[f])*100).toFixed(2)+"%"}}},v):v,w=S({},t,{options:{data:g,widthRatio:o,tooltip:x,interval:{shape:p,style:i,color:a}}});return Ft(w),w}function ai(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.data,l=r.isPercent,c=l?{max:1,min:0,minLimit:0,maxLimit:1}:{};return V(ct((e={},e[o]=i,e[u]=a,e),(n={},n[o]={type:"cat"},n[u]=m(m({},Zr(s,u)),c),n)))(t)}function ef(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function nf(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function rf(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=n.isRange,o=bt(e,"interval");if(!r)o.label(!1);else{var u=r.callback,s=St(r,["callback"]);o.label({fields:[i],callback:u,cfg:m({layout:s?.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},mt(a?m({content:function(l){var c;return(c=l[i])===null||c===void 0?void 0:c.join("-")}},s):s))})}return t}function af(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,u=n.data,s=n.xField,l=n.yField,c=n.seriesField;if(r===!1)e.tooltip(!1);else{var f=r;if(i&&a){var d=f.customItems,h=f?.formatter||function(v){return{name:v[c]+" - "+v[o],value:v[l]}};f=m(m({},f),{customItems:function(v){var p=[];return P(v,function(y){var g=ze(u,function(x){return hs(x,nt(y.data,[s,c]))});g.forEach(function(x){p.push(m(m(m({},y),{value:x[l],data:x,mappingData:{_origin:x}}),h(x)))})}),d?d(p):p}})}e.tooltip(f)}return t}function lr(t,e){e===void 0&&(e=!1);var n=t.options,r=n.seriesField;return V(Jc,J,Tt("columnStyle"),pe,Ga("rect"),tf,ai,ef,nf,af,gn,ei,rf,to,ot,rt,ut(),Qc(n.yField,!e,!!r),Xc(!n.isStack),we)(t)}function of(t){var e=t.options,n=e.xField,r=e.yField,i=e.xAxis,a=e.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},u=a!==!1?m({position:o[a?.position||"left"]},a):!1,s=i!==!1?m({position:o[i?.position||"bottom"]},i):!1;return m(m({},t),{options:m(m({},e),{xField:r,yField:n,xAxis:u,yAxis:s})})}function lf(t){var e=t.options,n=e.label;return n&&!n.position&&(n.position="left",n.layout||(n.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),S({},t,{options:{label:n}})}function sf(t){var e=t.options,n=e.seriesField,r=e.isStack,i=e.legend;return n?i!==!1&&(i=m({position:r?"top-left":"right-top"},i||{})):i=!1,S({},t,{options:{legend:i}})}function uf(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return S({},t,{options:{coordinate:n}})}function cf(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,u=n.barBackground;return lr({chart:e,options:m(m({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:u})},!0)}function no(t){return V(of,lf,sf,gt,uf,cf)(t)}var ff=S({},q.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),ro=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bar",n}return e.getDefaultOptions=function(){return ff},e.prototype.changeData=function(n){var r,i;this.updateOption({data:n});var a=this,o=a.chart,u=a.options,s=u.isPercent,l=u.xField,c=u.yField,f=u.xAxis,d=u.yAxis;r=[c,l],l=r[0],c=r[1],i=[d,f],f=i[0],d=i[1];var h=m(m({},u),{xField:l,yField:c,yAxis:d,xAxis:f});ai({chart:o,options:h}),o.changeData(yn(n,l,c,l,s))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return no},e}(q),df=S({},q.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),hf=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return df},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.yField,a=r.xField,o=r.isPercent,u=this,s=u.chart,l=u.options;ai({chart:s,options:l}),this.chart.changeData(yn(n,i,a,i,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return lr},e}(q),xr,ue="$$percentage$$",ce="$$mappingValue$$",te="$$conversion$$",Pr="$$totalPercentage$$",on="$$x$$",ln="$$y$$",vf={appendPadding:[0,80],minSize:0,maxSize:1,meta:(xr={},xr[ce]={min:0,max:1,nice:!1},xr),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},io="CONVERSION_TAG_NAME";function oi(t,e,n){var r=[],i=n.yField,a=n.maxSize,o=n.minSize,u=k(Pa(e,i),[i]),s=dt(a)?a:1,l=dt(o)?o:0;return r=zt(t,function(c,f){var d=(c[i]||0)/u;return c[ue]=d,c[ce]=(s-l)*d+l,c[te]=[k(t,[f-1,i]),c[i]],c}),r}function li(t){return function(e){var n=e.chart,r=e.options,i=r.conversionTag,a=r.filteredData,o=a||n.getOptions().data;if(i){var u=i.formatter;o.forEach(function(s,l){if(!(l<=0||Number.isNaN(s[ce]))){var c=t(s,l,o,{top:!0,name:io,text:{content:ft(u)?u(s,o):u,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:m({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(c)}})}return e}}function pf(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=n.maxSize,u=n.minSize,s=oi(i,i,{yField:a,maxSize:o,minSize:u});return e.data(s),t}function gf(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,s=n.shape,l=s===void 0?"funnel":s,c=n.funnelStyle,f=n.state,d=Nt(o,[r,i]),h=d.fields,v=d.formatter;kt({chart:e,options:{type:"interval",xField:r,yField:ce,colorField:r,tooltipFields:it(h)&&h.concat([ue,te]),mapping:{shape:l,tooltip:v,color:a,style:c},label:u,state:f}});var p=bt(t.chart,"interval");return p.adjust("symmetric"),t}function yf(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[]:[["transpose"],["scale",1,-1]]}),t}function ao(t){var e=t.options,n=t.chart,r=e.maxSize,i=k(n,["geometries","0","dataArray"],[]),a=k(n,["options","data","length"]),o=zt(i,function(s){return k(s,["0","nextPoints","0","x"])*a-.5}),u=function(s,l,c,f){var d=r-(r-s[ce])/2;return m(m({},f),{start:[o[l-1]||l-.5,d],end:[o[l-1]||l-.5,d+.05]})};return li(u)(t),t}function oo(t){return V(pf,gf,yf,ao)(t)}function mf(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function xf(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,u=n.compareField,s=n.isTransposed,l=n.tooltip,c=n.maxSize,f=n.minSize,d=n.label,h=n.funnelStyle,v=n.state,p=n.showFacetTitle;return e.facet("mirror",{fields:[u],transpose:!s,padding:s?0:[32,0,0,0],showTitle:p,eachView:function(y,g){var x=s?g.rowIndex:g.columnIndex;s||y.coordinate({type:"rect",actions:[["transpose"],["scale",x===0?-1:1,-1]]});var w=oi(g.data,r,{yField:a,maxSize:c,minSize:f});y.data(w);var b=Nt(l,[i,a,u]),A=b.fields,D=b.formatter,T=s?{offset:x===0?10:-23,position:x===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:x===0?"end":"start"}};kt({chart:y,options:{type:"interval",xField:i,yField:ce,colorField:i,tooltipFields:it(A)&&A.concat([ue,te]),mapping:{shape:"funnel",tooltip:D,color:o,style:h},label:d===!1?!1:S({},T,d),state:v}})}}),t}function lo(t){var e=t.chart,n=t.index,r=t.options,i=r.conversionTag,a=r.isTransposed;(dt(n)?[e]:e.views).forEach(function(o,u){var s=k(o,["geometries","0","dataArray"],[]),l=k(o,["options","data","length"]),c=zt(s,function(d){return k(d,["0","nextPoints","0","x"])*l-.5}),f=function(d,h,v,p){var y=(n||u)===0?-1:1;return S({},p,{start:[c[h-1]||h-.5,d[ce]],end:[c[h-1]||h-.5,d[ce]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:i!==!1?y*i.offsetX:0,style:{textAlign:(n||u)===0?"end":"start"}}})};li(f)(S({},{chart:o,options:r}))})}function bf(t){var e=t.chart;return e.once("beforepaint",function(){return lo(t)}),t}function Ff(t){return V(mf,xf,bf)(t)}function wf(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=_t(i,function(l,c){return l+(c[a]||0)},0),u=Pa(i,a)[a],s=zt(i,function(l,c){var f=[],d=[];if(l[Pr]=(l[a]||0)/o,c){var h=i[c-1][on],v=i[c-1][ln];f[0]=h[3],d[0]=v[3],f[1]=h[2],d[1]=v[2]}else f[0]=-.5,d[0]=1,f[1]=.5,d[1]=1;return d[2]=d[1]-l[Pr],f[2]=(d[2]+1)/4,d[3]=d[2],f[3]=-f[2],l[on]=f,l[ln]=d,l[ue]=(l[a]||0)/u,l[te]=[k(i,[c-1,a]),l[a]],l});return e.data(s),t}function Sf(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,s=n.funnelStyle,l=n.state,c=Nt(o,[r,i]),f=c.fields,d=c.formatter;return kt({chart:e,options:{type:"polygon",xField:on,yField:ln,colorField:r,tooltipFields:it(f)&&f.concat([ue,te]),label:u,state:l,mapping:{tooltip:d,color:a,style:s}}}),t}function Af(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[["transpose"],["reflect","x"]]:[]}),t}function _f(t){var e=function(n,r,i,a){return m(m({},a),{start:[n[on][1],n[ln][1]],end:[n[on][1]+.05,n[ln][1]]})};return li(e)(t),t}function Df(t){return V(wf,Sf,Af,_f)(t)}function kf(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function Ef(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,a=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(o,u){oo(S({},t,{chart:o,options:{data:u.data}}))}}),t}function If(t){return V(kf,Ef)(t)}var Tf=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.rendering=!1,n}return e.prototype.change=function(n){var r=this;if(!this.rendering){var i=n.seriesField,a=n.compareField,o=a?lo:ao,u=this.context.view,s=i||a?u.views:[u];zt(s,function(l,c){var f=l.getController("annotation"),d=ze(k(f,["option"],[]),function(v){var p=v.name;return p!==io});f.clear(!0),P(d,function(v){typeof v=="object"&&l.annotation()[v.type](v)});var h=k(l,["filteredData"],l.getOptions().data);o({chart:l,index:c,options:m(m({},n),{filteredData:oi(h,h,n)})}),l.filterData(h),r.rendering=!0,l.render(!0)})}this.rendering=!1},e}(re),so="funnel-conversion-tag",Lr="funnel-afterrender",uo={trigger:"afterrender",action:so+":change"};It(so,Tf);lt(Lr,{start:[uo]});function Of(t){var e=t.options,n=e.compareField,r=e.xField,i=e.yField,a=e.locale,o=e.funnelStyle,u=e.data,s=tr(a),l={label:n?{fields:[r,i,n,ue,te],formatter:function(f){return""+f[i]}}:{fields:[r,i,ue,te],offset:0,position:"middle",formatter:function(f){return f[r]+" "+f[i]}},tooltip:{title:r,formatter:function(f){return{name:f[r],value:f[i]}}},conversionTag:{formatter:function(f){return s.get(["conversionTag","label"])+": "+eo.apply(void 0,f[te])}}},c;return(n||o)&&(c=function(f){return S({},n&&{lineWidth:1,stroke:"#fff"},ft(o)?o(f):o)}),S({options:l},t,{options:{funnelStyle:c,data:Ta(u)}})}function Mf(t){var e=t.options,n=e.compareField,r=e.dynamicHeight,i=e.seriesField;return i?If(t):n?Ff(t):r?Df(t):oo(t)}function $f(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return V(ct((e={},e[a]=r,e[o]=i,e)))(t)}function Pf(t){var e=t.chart;return e.axis(!1),t}function Lf(t){var e=t.chart,n=t.options,r=n.legend;return r===!1?e.legend(!1):e.legend(r),t}function Cf(t){var e=t.chart,n=t.options,r=n.interactions,i=n.dynamicHeight;return P(r,function(a){a.enable===!1?e.removeInteraction(a.type):e.interaction(a.type,a.cfg||{})}),i?e.removeInteraction(Lr):e.interaction(Lr,{start:[m(m({},uo),{arg:n})]}),t}function co(t){return V(Of,Mf,$f,Pf,gt,Cf,Lf,rt,J,ut())(t)}var Rf=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="funnel",n}return e.getDefaultOptions=function(){return vf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return co},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=an(this.chart);P(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=an(this.chart),r=[];return P(n,function(i){var a=i.getData(),o=i.getStates();P(o,function(u){r.push({data:a,state:u,geometry:i.geometry,element:i})})}),r},e.CONVERSATION_FIELD=te,e.PERCENT_FIELD=ue,e.TOTAL_PERCENT_FIELD=Pr,e}(q),_n,si="range",fo="type",Kt="percent",zf="#f0f0f0",ho="indicator-view",vo="range-view",Nf={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(_n={},_n[si]={sync:"v"},_n[Kt]={sync:"v",tickCount:5,tickInterval:.2},_n),animation:!1};function Vf(t,e){return t.map(function(n,r){var i;return i={},i[si]=n-(t[r-1]||0),i[fo]=""+r,i[Kt]=e,i})}function po(t){var e;return[(e={},e[Kt]=Yn(t,0,1),e)]}function go(t,e){var n=k(e,["ticks"],[]),r=rn(n)?nn(n):[0,Yn(t,0,1),1];return r[0]||r.shift(),Vf(r,t)}function Wf(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,u=n.startAngle,s=n.endAngle,l=n.axis,c=n.indicator,f=n.gaugeStyle,d=n.type,h=n.meter,v=i.color,p=i.width;if(c){var y=po(r),g=e.createView({id:ho});g.data(y),g.point().position(Kt+"*1").shape(c.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:c}),g.coordinate("polar",{startAngle:u,endAngle:s,radius:o*a}),g.axis(Kt,l),g.scale(Kt,nt(l,At))}var x=go(r,n.range),w=e.createView({id:vo});w.data(x);var b=wt(v)?[v,zf]:v,A=Ft({chart:w,options:{xField:"1",yField:si,seriesField:fo,rawFields:[Kt],isStack:!0,interval:{color:b,style:f,shape:d==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:p,maxColumnWidth:p}}).ext,D=A.geometry;return D.customInfo({meter:h}),w.coordinate("polar",{innerRadius:o,radius:a,startAngle:u,endAngle:s}).transpose(),t}function Bf(t){var e;return V(ct((e={range:{min:0,max:1,maxLimit:1,minLimit:0}},e[Kt]={},e)))(t)}function yo(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,u=void 0;o&&(u=S({},{content:(a*100).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),Ku(n,{statistic:m(m({},i),{content:u})},{percent:a})}return e&&n.render(!0),t}function Gf(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(S({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(i,a){var o=k(a,[0,"data",Kt],0);return(o*100).toFixed(2)+"%"}},r)):e.tooltip(!1),t}function Uf(t){var e=t.chart;return e.legend(!1),t}function mo(t){return V(J,rt,Wf,Bf,Gf,yo,ot,ut(),Uf)(t)}ve("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,u=a.pin,s=e.addGroup(),l=this.parsePoint({x:0,y:0});return o&&s.addShape("line",{name:"pointer",attrs:m({x1:l.x,y1:l.y,x2:t.x,y2:t.y,stroke:i},o.style)}),u&&s.addShape("circle",{name:"pin",attrs:m({x:l.x,y:l.y,stroke:i},u.style)}),s}});ve("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=n===void 0?{}:n,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,u=o===void 0?.5:o;a=a<1?1:a,u=Yn(u,0,1);var s=this.coordinate,l=s.startAngle,c=s.endAngle,f=0;if(u>0&&u<1){var d=c-l;f=d/a/(u/(1-u)+1-1/a)}for(var h=f/(1-u)*u,v=e.addGroup(),p=this.coordinate.getCenter(),y=this.coordinate.getRadius(),g=Dt.getAngle(t,this.coordinate),x=g.startAngle,w=g.endAngle,b=x;b<w;){var A=void 0,D=(b-l)%(h+f);D<h?A=b+(h-D):(b+=h+f-D,A=b+h);var T=Dt.getSectorPath(p.x,p.y,y,b,Math.min(A,w),y*this.coordinate.innerRadius);v.addShape("path",{name:"meter-gauge",attrs:{path:T,fill:t.color,stroke:t.color,lineWidth:.5}}),b=A+f}return v}});var qf=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="gauge",n}return e.getDefaultOptions=function(){return Nf},e.prototype.changeData=function(n){this.chart.emit(ht.BEFORE_CHANGE_DATA,Ut.fromData(this.chart,ht.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n});var r=this.chart.views.find(function(a){return a.id===ho});r&&r.data(po(n));var i=this.chart.views.find(function(a){return a.id===vo});i&&i.data(go(n,this.options.range)),yo({chart:this.chart,options:this.options},!0),this.chart.emit(ht.AFTER_CHANGE_DATA,Ut.fromData(this.chart,ht.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mo},e}(q);function zi(t,e,n){if(n===1)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function Hf(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function xo(t,e,n,r,i){var a=Ta(t);_s(a,e);var o=Oa(a,e),u=vs(o),s=u.max-u.min,l=n;if(!n&&r&&(l=r>1?s/(r-1):u.max),!n&&!r){var c=Hf(o);l=s/c}var f={},d=Qe(a,i);Xn(d)?P(a,function(v){var p=v[e],y=zi(p,l,r),g=y[0]+"-"+y[1];Ei(f,g)||(f[g]={range:y,count:0}),f[g].count+=1}):Object.keys(d).forEach(function(v){P(d[v],function(p){var y=p[e],g=zi(y,l,r),x=g[0]+"-"+g[1],w=x+"-"+v;Ei(f,w)||(f[w]={range:g,count:0},f[w][i]=v),f[w].count+=1})});var h=[];return P(f,function(v){h.push(v)}),h}var Gn="range",sn="count",Xf=S({},q.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Yf(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,u=n.color,s=n.stackField,l=n.legend,c=n.columnStyle,f=xo(r,i,o,a,s);e.data(f);var d=S({},t,{options:{xField:Gn,yField:sn,seriesField:s,isStack:!0,interval:{color:u,style:c}}});return Ft(d),l&&s?e.legend(s,l):e.legend(!1),t}function jf(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return V(ct((e={},e[Gn]=r,e[sn]=i,e)))(t)}function Zf(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return r===!1?e.axis(Gn,!1):e.axis(Gn,r),i===!1?e.axis(sn,!1):e.axis(sn,i),t}function Kf(t){var e=t.chart,n=t.options,r=n.label,i=bt(e,"interval");if(!r)i.label(!1);else{var a=r.callback,o=St(r,["callback"]);i.label({fields:[sn],callback:a,cfg:mt(o)})}return t}function bo(t){return V(J,Tt("columnStyle"),Yf,jf,Zf,pe,Kf,gt,ot,rt)(t)}var Qf=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="histogram",n}return e.getDefaultOptions=function(){return Xf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.binField,a=r.binNumber,o=r.binWidth,u=r.stackField;this.chart.changeData(xo(n,i,o,a,u))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bo},e}(q),Jf=S({},q.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),td=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.active=function(){var n=this.getView(),r=this.context.event;if(r.data){var i=r.data.items,a=n.geometries.filter(function(o){return o.type==="point"});P(a,function(o){P(o.elements,function(u){var s=$a(i,function(l){return l.data===u.data})!==-1;u.setState("active",s)})})}},e.prototype.reset=function(){var n=this.getView(),r=n.geometries.filter(function(i){return i.type==="point"});P(r,function(i){P(i.elements,function(a){a.setState("active",!1)})})},e.prototype.getView=function(){return this.context.view},e}(re);It("marker-active",td);lt("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var ed=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return Jf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;or({chart:i,options:a}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Qa},e}(q),Fo=S({},q.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),nd=[1,0,0,0,1,0,0,0,1];function Cr(t,e){var n=e?st(e):st(nd);return Dt.transform(n,t)}var rd=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getActiveElements=function(){var n=Dt.getDelegationObject(this.context);if(n){var r=this.context.view,i=n.component,a=n.item,o=i.get("field");if(o){var u=r.geometries[0].elements;return u.filter(function(s){return s.getModel().data[o]===a.value})}}return[]},e.prototype.getActiveElementLabels=function(){var n=this.context.view,r=this.getActiveElements(),i=n.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return r.find(function(o){return jr(o.getData(),a.get("data"))})})},e.prototype.transfrom=function(n){n===void 0&&(n=7.5);var r=this.getActiveElements(),i=this.getActiveElementLabels();r.forEach(function(a,o){var u=i[o],s=a.geometry.coordinate;if(s.isPolar&&s.isTransposed){var l=Dt.getAngle(a.getModel(),s),c=l.startAngle,f=l.endAngle,d=(c+f)/2,h=n,v=h*Math.cos(d),p=h*Math.sin(d);a.shape.setMatrix(Cr([["t",v,p]])),u.setMatrix(Cr([["t",v,p]]))}})},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(re);function id(t){var e=t.event,n,r=e.target;return r&&(n=r.get("element")),n}var ad=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAnnotations=function(n){var r=n||this.context.view;return r.getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var n=this,r=this.context.view;r.removeInteraction("tooltip"),r.on("afterchangesize",function(){var i=n.getAnnotations(r);n.initialAnnotation=i})},e.prototype.change=function(n){var r=this.context,i=r.view,a=r.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=k(a,["data","data"]);if(a.type.match("legend-item")){var u=Dt.getDelegationObject(this.context),s=i.getGroupedFields()[0];if(u&&s){var l=u.item;o=i.getData().find(function(h){return h[s]===l.value})}}if(o){var c=k(n,"annotations",[]),f=k(n,"statistic",{});i.getController("annotation").clear(!0),P(c,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),Qn(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var d=id(this.context);d&&d.shape.toFront()},e.prototype.reset=function(){var n=this.context.view,r=n.getController("annotation");r.clear(!0);var i=this.getInitialAnnotation();P(i,function(a){n.annotation()[a.type](a)}),n.render(!0)},e}(re),wo="pie-statistic";It(wo,ad);lt("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});It("pie-legend",rd);lt("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function od(t,e){var n=null;return P(t,function(r){typeof r[e]=="number"&&(n+=r[e])}),n}function ld(t,e){var n;switch(t){case"inner":return n="-30%",wt(e)&&e.endsWith("%")?parseFloat(e)*.01>0?n:e:e<0?e:n;case"outer":return n=12,wt(e)&&e.endsWith("%")?parseFloat(e)*.01<0?n:e:e>0?e:n;default:return e}}function Un(t,e){return Ma(Me(t,e),function(n){return n[e]===0})}function sd(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,u=n.pieStyle,s=n.shape,l=Me(r,i);if(Un(l,i)){var c="$$percentage$$";l=l.map(function(d){var h;return m(m({},d),(h={},h[c]=1/l.length,h))}),e.data(l);var f=S({},t,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,shape:s,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}});Ft(f)}else{e.data(l);var f=S({},t,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:s,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}});Ft(f)}return t}function ud(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.colorField,o=S({},i);return n.scale(o,(e={},e[a]={type:"cat"},e)),t}function cd(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function fd(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.angleField,o=e.geometries[0];if(!r)o.label(!1);else{var u=r.callback,s=St(r,["callback"]),l=mt(s);if(l.content){var c=l.content;l.content=function(v,p,y){var g=v[i],x=v[a],w=e.getScaleByField(a),b=w?.scale(x);return ft(c)?c(m(m({},v),{percent:b}),p,y):wt(c)?Va(c,{value:x,name:g,percentage:dt(b)&&!Rt(x)?(b*100).toFixed(2)+"%":null}):c}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},d=l.type?f[l.type]:"pie-outer",h=l.layout?it(l.layout)?l.layout:[l.layout]:[];l.layout=(d?[{type:d}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:u,cfg:m(m({},l),{offset:ld(l.type,l.offset),type:"pie"})})}return t}function So(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,a=t.meta,o=t.locale,u=tr(o);if(e&&n){var s=S({},Fo.statistic,n),l=s.title,c=s.content;return l!==!1&&(l=S({},{formatter:function(f){var d=f?f[i]:Rt(l.content)?u.get(["statistic","total"]):l.content,h=k(a,[i,"formatter"])||function(v){return v};return h(d)}},l)),c!==!1&&(c=S({},{formatter:function(f,d){var h=f?f[r]:od(d,r),v=k(a,[r,"formatter"])||function(p){return p};return f||Rt(c.content)?v(h):c.content}},c)),S({},{statistic:{title:l,content:c}},t)}return t}function Ao(t){var e=t.chart,n=t.options,r=So(n),i=r.innerRadius,a=r.statistic;return e.getController("annotation").clear(!0),V(ut())(t),i&&a&&Qn(e,{statistic:a,plotType:"pie"}),t}function dd(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(r===!1)e.tooltip(r);else if(e.tooltip(S({},r,{shared:!1})),Un(o,a)){var u=k(r,"fields"),s=k(r,"formatter");Xn(k(r,"fields"))&&(u=[i,a],s=s||function(l){return{name:l[i],value:ps(l[a])}}),e.geometries[0].tooltip(u.join("*"),Ee(u,s))}return t}function hd(t){var e=t.chart,n=t.options,r=So(n),i=r.interactions,a=r.statistic,o=r.annotations;return P(i,function(u){var s,l;if(u.enable===!1)e.removeInteraction(u.type);else if(u.type==="pie-statistic-active"){var c=[];!((s=u.cfg)===null||s===void 0)&&s.start||(c=[{trigger:"element:mouseenter",action:wo+":change",arg:{statistic:a,annotations:o}}]),P((l=u.cfg)===null||l===void 0?void 0:l.start,function(f){c.push(m(m({},f),{arg:{statistic:a,annotations:o}}))}),e.interaction(u.type,S({},u.cfg,{start:c}))}else e.interaction(u.type,u.cfg||{})}),t}function _o(t){return V(Tt("pieStyle"),sd,ud,J,cd,Ne,dd,fd,pe,Ao,hd,rt)(t)}var vd=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return Fo},e.prototype.changeData=function(n){this.chart.emit(ht.BEFORE_CHANGE_DATA,Ut.fromData(this.chart,ht.BEFORE_CHANGE_DATA,null));var r=this.options,i=this.options.angleField,a=Me(r.data,i),o=Me(n,i);Un(a,i)||Un(o,i)?this.update({data:n}):(this.updateOption({data:n}),this.chart.data(o),Ao({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(ht.AFTER_CHANGE_DATA,Ut.fromData(this.chart,ht.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _o},e}(q),Do=["#FAAD14","#E8EDF3"],pd={percent:.2,color:Do,animation:{}};function ui(t){var e=Yn(Fe(t)?t:0,0,1);return[{current:""+e,type:"current",percent:e},{current:""+e,type:"target",percent:1}]}function ko(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;e.data(ui(r));var u=S({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:wt(a)?[a,Do[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return Ft(u),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function gd(t){var e=t.chart;return e.coordinate("rect").transpose(),t}function Eo(t){return V(ko,ct({}),gd,rt,J,ut())(t)}var yd=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="process",n}return e.getDefaultOptions=function(){return pd},e.prototype.changeData=function(n){this.updateOption({percent:n}),this.chart.changeData(ui(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Eo},e}(q);function md(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function Io(t,e){var n=t.chart,r=t.options,i=r.innerRadius,a=r.statistic,o=r.percent,u=r.meta;if(n.getController("annotation").clear(!0),i&&a){var s=k(u,["percent","formatter"])||function(c){return(c*100).toFixed(2)+"%"},l=a.content;l&&(l=S({},l,{content:Rt(l.content)?s(o):l.content})),Qn(n,{statistic:m(m({},a),{content:l}),plotType:"ring-progress"},{percent:o})}return e&&n.render(!0),t}function To(t){return V(ko,ct({}),md,Io,rt,J,ut())(t)}var xd={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},bd=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="ring-process",n}return e.getDefaultOptions=function(){return xd},e.prototype.changeData=function(n){this.chart.emit(ht.BEFORE_CHANGE_DATA,Ut.fromData(this.chart,ht.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(ui(n)),Io({chart:this.chart,options:this.options},!0),this.chart.emit(ht.AFTER_CHANGE_DATA,Ut.fromData(this.chart,ht.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return To},e}(q);function fe(t,e){return Fd(t)||wd(t,e)||Sd()}function Fd(t){if(Array.isArray(t))return t}function wd(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),u;!(r=(u=o.next()).done)&&(n.push(u.value),!(e&&n.length===e));r=!0);}catch(s){i=!0,a=s}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}function Sd(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ci(t,e,n,r){t=t.filter(function(v,p){var y=e(v,p),g=n(v,p);return y!=null&&isFinite(y)&&g!=null&&isFinite(g)}),r&&t.sort(function(v,p){return e(v)-e(p)});for(var i=t.length,a=new Float64Array(i),o=new Float64Array(i),u=0,s=0,l,c,f,d=0;d<i;)f=t[d],a[d]=l=+e(f,d,t),o[d]=c=+n(f,d,t),++d,u+=(l-u)/d,s+=(c-s)/d;for(var h=0;h<i;++h)a[h]-=u,o[h]-=s;return[a,o,u,s]}function De(t,e,n,r){for(var i=0,a=0,o=t.length;a<o;a++){var u=t[a],s=+e(u,a,t),l=+n(u,a,t);s!=null&&isFinite(s)&&l!=null&&isFinite(l)&&r(s,l,i++)}}function We(t,e,n,r,i){var a=0,o=0;return De(t,e,n,function(u,s){var l=s-i(u),c=s-r;a+=l*l,o+=c*c}),1-a/o}function Ni(t){return Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])*180/Math.PI}function Ad(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function mn(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=1e4,o=[s(t),s(e)],u=0;l(o)&&u<a;);return o;function s(c){return[c,n(c)]}function l(c){u++;for(var f=c.length,d=!1,h=0;h<f-1;h++){var v=c[h],p=c[h+1],y=Ad([v,p]),g=s(y[0]),x=Ni([v,y]),w=Ni([v,g]),b=Math.abs(x-w);b>i&&(c.splice(h+1,0,g),d=!0)}return d}}function xn(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,o=e-a*t;return[o,a]}function _d(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,s=0,l=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0;De(i,t,e,function(w,b){var A=Math.log(b),D=w*b;++a,o+=(b-o)/a,s+=(D-s)/a,c+=(w*D-c)/a,u+=(b*A-u)/a,l+=(D*A-l)/a,n||(w<f&&(f=w),w>d&&(d=w))});var h=xn(s/o,u/o,l/o,c/o),v=fe(h,2),p=v[0],y=v[1];p=Math.exp(p);var g=function(b){return p*Math.exp(y*b)},x=mn(f,d,g);return x.a=p,x.b=y,x.predict=g,x.rSquared=We(i,t,e,o,g),x}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Oo(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,s=0,l=0,c=n?+n[0]:1/0,f=n?+n[1]:-1/0;De(i,t,e,function(x,w){++a,o+=(x-o)/a,u+=(w-u)/a,s+=(x*w-s)/a,l+=(x*x-l)/a,n||(x<c&&(c=x),x>f&&(f=x))});var d=xn(o,u,s,l),h=fe(d,2),v=h[0],p=h[1],y=function(w){return p*w+v},g=[[c,y(c)],[f,y(f)]];return g.a=p,g.b=v,g.predict=y,g.rSquared=We(i,t,e,u,y),g}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Dd(t){t.sort(function(n,r){return n-r});var e=t.length/2;return e%1===0?(t[e-1]+t[e])/2:t[Math.floor(e)]}var Vi=2,Wi=1e-12;function kd(){var t=function(a){return a[0]},e=function(a){return a[1]},n=.3;function r(i){for(var a=ci(i,t,e,!0),o=fe(a,4),u=o[0],s=o[1],l=o[2],c=o[3],f=u.length,d=Math.max(2,~~(n*f)),h=new Float64Array(f),v=new Float64Array(f),p=new Float64Array(f).fill(1),y=-1;++y<=Vi;){for(var g=[0,d-1],x=0;x<f;++x){for(var w=u[x],b=g[0],A=g[1],D=w-u[b]>u[A]-w?b:A,T=0,O=0,C=0,M=0,E=0,L=1/Math.abs(u[D]-w||1),G=b;G<=A;++G){var Z=u[G],tt=s[G],_=Ed(Math.abs(w-Z)*L)*p[G],I=Z*_;T+=_,O+=I,C+=tt*_,M+=tt*I,E+=Z*I}var N=xn(O/T,C/T,M/T,E/T),R=fe(N,2),$=R[0],z=R[1];h[x]=$+z*w,v[x]=Math.abs(s[x]-h[x]),Id(u,x+1,g)}if(y===Vi)break;var K=Dd(v);if(Math.abs(K)<Wi)break;for(var Q=0,W,j;Q<f;++Q)W=v[Q]/(6*K),p[Q]=W>=1?Wi:(j=1-W*W)*j}return Td(u,h,l,c)}return r.bandwidth=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Ed(t){return(t=1-t*t*t)*t*t}function Id(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}function Td(t,e,n,r){for(var i=t.length,a=[],o=0,u=0,s=[],l;o<i;++o)l=t[o]+n,s[0]===l?s[1]+=(e[o]-s[1])/++u:(u=0,s[1]+=r,s=[l,e[o]],a.push(s));return s[1]+=r,a}function Od(){var t=function(o){return o[0]},e=function(o){return o[1]},n=Math.E,r;function i(a){var o=0,u=0,s=0,l=0,c=0,f=r?+r[0]:1/0,d=r?+r[1]:-1/0,h=Math.log(n);De(a,t,e,function(b,A){var D=Math.log(b)/h;++o,u+=(D-u)/o,s+=(A-s)/o,l+=(D*A-l)/o,c+=(D*D-c)/o,r||(b<f&&(f=b),b>d&&(d=b))});var v=xn(u,s,l,c),p=fe(v,2),y=p[0],g=p[1],x=function(A){return g*Math.log(A)/h+y},w=mn(f,d,x);return w.a=g,w.b=y,w.predict=x,w.rSquared=We(a,t,e,s,x),w}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.base=function(a){return arguments.length?(n=a,i):n},i}function Mo(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=ci(i,t,e),o=fe(a,4),u=o[0],s=o[1],l=o[2],c=o[3],f=u.length,d=0,h=0,v=0,p=0,y=0,g,x,w,b;for(g=0;g<f;)x=u[g],w=s[g++],b=x*x,d+=(b-d)/g,h+=(b*x-h)/g,v+=(b*b-v)/g,p+=(x*w-p)/g,y+=(b*w-y)/g;var A=0,D=0,T=n?+n[0]:1/0,O=n?+n[1]:-1/0;De(i,t,e,function(_,I){D++,A+=(I-A)/D,n||(_<T&&(T=_),_>O&&(O=_))});var C=v-d*d,M=d*C-h*h,E=(y*d-p*h)/M,L=(p*C-y*h)/M,G=-E*d,Z=function(I){return I=I-l,E*I*I+L*I+G+c},tt=mn(T,O,Z);return tt.a=E,tt.b=L-2*E*l,tt.c=G-L*l+E*l*l+c,tt.predict=Z,tt.rSquared=We(i,t,e,A,Z),tt}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Md(){var t=function(o){return o[0]},e=function(o){return o[1]},n=3,r;function i(a){if(n===1){var o=Oo().x(t).y(e).domain(r)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(n===2){var u=Mo().x(t).y(e).domain(r)(a);return u.coefficients=[u.c,u.b,u.a],delete u.a,delete u.b,delete u.c,u}var s=ci(a,t,e),l=fe(s,4),c=l[0],f=l[1],d=l[2],h=l[3],v=c.length,p=[],y=[],g=n+1,x=0,w=0,b=r?+r[0]:1/0,A=r?+r[1]:-1/0;De(a,t,e,function(Z,tt){++w,x+=(tt-x)/w,r||(Z<b&&(b=Z),Z>A&&(A=Z))});var D,T,O,C,M;for(D=0;D<g;++D){for(O=0,C=0;O<v;++O)C+=Math.pow(c[O],D)*f[O];for(p.push(C),M=new Float64Array(g),T=0;T<g;++T){for(O=0,C=0;O<v;++O)C+=Math.pow(c[O],D+T);M[T]=C}y.push(M)}y.push(p);var E=Pd(y),L=function(tt){tt-=d;var _=h+E[0]+E[1]*tt+E[2]*tt*tt;for(D=3;D<g;++D)_+=E[D]*Math.pow(tt,D);return _},G=mn(b,A,L);return G.coefficients=$d(g,E,-d,h),G.predict=L,G.rSquared=We(a,t,e,x,L),G}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.order=function(a){return arguments.length?(n=a,i):n},i}function $d(t,e,n,r){var i=Array(t),a,o,u,s;for(a=0;a<t;++a)i[a]=0;for(a=t-1;a>=0;--a)for(u=e[a],s=1,i[a]+=u,o=1;o<=a;++o)s*=(a+1-o)/o,i[a-o]+=u*Math.pow(n,o)*s;return i[0]+=r,i}function Pd(t){var e=t.length-1,n=[],r,i,a,o,u;for(r=0;r<e;++r){for(o=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(a=r;a<e+1;++a)u=t[a][r],t[a][r]=t[a][o],t[a][o]=u;for(i=r+1;i<e;++i)for(a=e;a>=r;a--)t[a][i]-=t[a][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(u=0,a=i+1;a<e;++a)u+=t[a][i]*n[a];n[i]=(t[e][i]-u)/t[i][i]}return n}function Ld(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,s=0,l=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0;De(i,t,e,function(w,b){var A=Math.log(w),D=Math.log(b);++a,o+=(A-o)/a,u+=(D-u)/a,s+=(A*D-s)/a,l+=(A*A-l)/a,c+=(b-c)/a,n||(w<f&&(f=w),w>d&&(d=w))});var h=xn(o,u,s,l),v=fe(h,2),p=v[0],y=v[1];p=Math.exp(p);var g=function(b){return p*Math.pow(b,y)},x=mn(f,d,g);return x.a=p,x.b=y,x.predict=g,x.rSquared=We(i,t,e,c,g),x}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var Cd={exp:_d,linear:Oo,loess:kd,log:Od,poly:Md,pow:Ld,quad:Mo};function Rd(t,e){var n=10,r={regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-n,offsetY:-n,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-n,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-n,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return r}var zd=function(t,e){var n=e.view,r=e.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),u=n.getScaleByField(a),s=t.map(function(l){return n.getCoordinate().convert({x:o.scale(l[0]),y:u.scale(l[1])})});return Zu(s,!1)},Nd=function(t){var e=t.options,n=e.xField,r=e.yField,i=e.data,a=e.regressionLine,o=a.type,u=o===void 0?"linear":o,s=a.algorithm,l;if(s)l=it(s)?s:s(i);else{var c=Cd[u]().x(function(f){return f[n]}).y(function(f){return f[r]});l=c(i)}return zd(l,t)},Vd=function(t){var e,n=t.meta,r=n===void 0?{}:n,i=t.xField,a=t.yField,o=t.data,u=o[0][i],s=o[0][a],l=u>0,c=s>0;function f(d,h){var v=k(r,[d]);function p(g){return k(v,g)}var y={};return h==="x"?(dt(u)&&(dt(p("min"))||(y.min=l?0:u*2),dt(p("max"))||(y.max=l?u*2:0)),y):(dt(s)&&(dt(p("min"))||(y.min=c?0:s*2),dt(p("max"))||(y.max=c?s*2:0)),y)}return m(m({},r),(e={},e[i]=m(m({},r[i]),f(i,"x")),e[a]=m(m({},r[a]),f(a,"y")),e))};function $o(t){var e=t.data,n=e===void 0?[]:e,r=t.xField,i=t.yField;if(n.length){for(var a=!0,o=!0,u=n[0],s=void 0,l=1;l<n.length&&(s=n[l],u[r]!==s[r]&&(a=!1),u[i]!==s[i]&&(o=!1),!(!a&&!o));l++)u=s;var c=[];a&&c.push(r),o&&c.push(i);var f=nt(Vd(t),c);return S({},t,{meta:f})}return t}function Wd(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.color,o=n.shape,u=n.pointStyle,s=n.shapeField,l=n.colorField,c=n.xField,f=n.yField,d=n.sizeField,h=n.size,v=n.tooltip;d&&(h||(h=[2,8]),dt(h)&&(h=[h,h])),v&&!v.fields&&(v=m(m({},v),{fields:[c,f,l,d,s]})),e.data(r),Ot(S({},t,{options:{seriesField:l,point:{color:a,shape:o,size:h,style:u},tooltip:v}}));var p=bt(e,"point");return i&&p.adjust(i),t}function On(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=$o(n);return V(ct((e={},e[a]=r,e[o]=i,e)))(S({},t,{options:u}))}function Bd(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return e.axis(a,r),e.axis(o,i),t}function Gd(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,u=n.shapeLegend,s=n.sizeLegend,l=r!==!1;return i&&e.legend(i,l?r:!1),a&&(u?e.legend(a,u):e.legend(a,u===!1?!1:r)),o&&e.legend(o,s||!1),!l&&!u&&!s&&e.legend(!1),t}function Ud(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=bt(e,"point");if(!r)a.label(!1);else{var o=r.callback,u=St(r,["callback"]);a.label({fields:[i],callback:o,cfg:mt(u)})}return t}function qd(t){var e=t.options,n=e.quadrant,r=[];if(n){var i=n.xBaseline,a=i===void 0?0:i,o=n.yBaseline,u=o===void 0?0:o,s=n.labels,l=n.regionStyle,c=n.lineStyle,f=Rd(a,u),d=new Array(4).join(",").split(",");d.forEach(function(h,v){r.push(m(m({type:"region",top:!1},f.regionStyle[v].position),{style:S({},f.regionStyle[v].style,l?.[v])}),m({type:"text",top:!0},S({},f.labelStyle[v],s?.[v])))}),r.push({type:"line",top:!1,start:["min",u],end:["max",u],style:S({},f.lineStyle,c)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:S({},f.lineStyle,c)})}return V(ut(r))(t)}function Hd(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,a=r.top,o=a===void 0?!1:a,u={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(s,l){var c=s.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),f=Nd({view:l,options:e});c.addShape("path",{name:"regression-line",attrs:m(m({path:f},u),i)})}})}return t}function Xd(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(r):r===!1&&e.tooltip(!1),t}function Po(t){return V(Wd,On,Bd,Gd,Xd,Ud,to,gn,ei,ot,qd,rt,J,Hd)(t)}var Yd=S({},q.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});lt("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var jd=function(t){U(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.type="scatter",i.on(ht.BEFORE_RENDER,function(a){var o,u,s=i,l=s.options,c=s.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===Ii.FILTER){var f=i.chart.filterData(i.chart.getData());On({chart:c,options:m(m({},l),{data:f})})}((u=a.data)===null||u===void 0?void 0:u.source)===Ii.RESET&&On({chart:c,options:l})}),i}return e.getDefaultOptions=function(){return Yd},e.prototype.changeData=function(n){this.updateOption($o(S({},this.options,{data:n})));var r=this,i=r.options,a=r.chart;On({chart:a,options:i}),this.chart.changeData(n)},e.prototype.getSchemaAdaptor=function(){return Po},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(q),un="$$stock-range$$",sr="trend",Lo="up",Co="down",Zd={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if(t==="x"){var i=n[0];r=i?i.title:e}else r=e;return{position:t==="y"?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},Kd=S({},q.getDefaultOptions(),{tooltip:Zd,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Ro(t,e){return zt(t,function(n){var r=n&&m({},n);if(it(e)&&r){var i=e[0],a=e[1],o=e[2],u=e[3];r[sr]=r[i]<=r[a]?Lo:Co,r[un]=[r[i],r[a],r[o],r[u]]}return r})}function Qd(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,u=n.tooltip,s=n.stockStyle;e.data(Ro(i,r));var l=u;return l!==!1&&(l=S({},{fields:r},l)),ni(S({},t,{options:{schema:{shape:"candle",color:[a,o],style:s},yField:un,seriesField:sr,rawFields:r,tooltip:l}})),t}function Jd(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,s=i.xField,l=(e={},e[s]={type:"timeCat",tickCount:6},e[sr]={values:[Lo,Co]},e),c=S(l,a,(n={},n[s]=nt(o,At),n[un]=nt(u,At),n));return r.scale(c),t}function th(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(un,!1):e.axis(un,i),t}function eh(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==!1?e.tooltip(r):e.tooltip(!1),t}function nh(t){var e=t.chart,n=t.options,r=n.legend;return r?e.legend(sr,r):r===!1&&e.legend(!1),t}function zo(t){V(J,Qd,Jd,th,eh,nh,ot,rt,ut(),gn)(t)}var rh=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return Kd},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zo},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField;this.chart.changeData(Ro(n,r))},e}(q);function ke(t){return zt(t||[],function(e,n){return{x:""+n,y:e}})}var cn="x",Te="y",No={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+k(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},ih={appendPadding:2,tooltip:m({},No),animation:{}};function ah(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,u=n.line,s=o?.state,l=ke(r);e.data(l);var c=S({},t,{options:{xField:cn,yField:Te,area:{color:i,style:a},line:u,point:o}}),f=S({},c,{options:{tooltip:!1}}),d=S({},c,{options:{tooltip:!1,state:s}});return er(c),Ve(f),Ot(d),e.axis(!1),e.legend(!1),t}function Be(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.data,u=ke(o);return V(ct((e={},e[cn]=i,e[Te]=a,e),(n={},n[cn]={type:"cat"},n[Te]=Zr(u,Te),n)))(t)}function Vo(t){return V(Tt("areaStyle"),ah,Be,gt,J,rt,ut())(t)}var oh={appendPadding:2,tooltip:m({},No),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},lh=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-area",n}return e.getDefaultOptions=function(){return oh},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Be({chart:i,options:a}),i.changeData(ke(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vo},e}(q);function sh(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,u=ke(r);e.data(u);var s=S({},t,{options:{xField:cn,yField:Te,widthRatio:o,interval:{style:a,color:i}}});return Ft(s),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function Wo(t){return V(J,Tt("columnStyle"),sh,Be,gt,rt,ut())(t)}var uh={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+k(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},ch={appendPadding:2,tooltip:m({},uh),animation:{}},fh=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-column",n}return e.getDefaultOptions=function(){return ch},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Be({chart:i,options:a}),i.changeData(ke(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Wo},e}(q);function dh(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,u=o?.state,s=ke(r);e.data(s);var l=S({},t,{options:{xField:cn,yField:Te,line:{color:i,style:a},point:o}}),c=S({},l,{options:{tooltip:!1,state:u}});return Ve(l),Ot(c),e.axis(!1),e.legend(!1),t}function Bo(t){return V(dh,Be,J,gt,rt,ut())(t)}var hh=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-line",n}return e.getDefaultOptions=function(){return ih},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Be({chart:i,options:a}),i.changeData(ke(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Bo},e}(q),vh={line:Qa,pie:_o,column:lr,bar:no,area:Ja,gauge:mo,"tiny-line":Bo,"tiny-column":Wo,"tiny-area":Vo,"ring-progress":To,progress:Eo,scatter:Po,histogram:bo,funnel:co,stock:zo},ph={line:ed,pie:vd,column:hf,bar:ro,area:Bc,gauge:qf,"tiny-line":hh,"tiny-column":fh,"tiny-area":lh,"ring-progress":bd,progress:yd,scatter:jd,histogram:Qf,funnel:Rf,stock:rh},gh={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function Rr(t,e,n){var r=ph[t];if(!r){console.error("could not find "+t+" plot");return}var i=vh[t];i({chart:e,options:S({},r.getDefaultOptions(),k(gh,t,{}),n)})}function yh(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return P(r,function(a){var o=a.region,u=a.data,s=a.meta,l=a.axes,c=a.coordinate,f=a.interactions,d=a.annotations,h=a.tooltip,v=a.geometries,p=e.createView({region:o});p.data(u);var y={};l&&P(l,function(g,x){y[x]=nt(g,At)}),y=S({},s,y),p.scale(y),l?P(l,function(g,x){p.axis(x,g)}):p.axis(!1),p.coordinate(c),P(v,function(g){var x=kt({chart:p,options:g}).ext,w=g.adjust;w&&x.geometry.adjust(w)}),P(f,function(g){g.enable===!1?p.removeInteraction(g.type):p.interaction(g.type,g.cfg)}),P(d,function(g){p.annotation()[g.type](m({},g))}),typeof a.animation=="boolean"?p.animate(!1):(p.animate(!0),P(p.geometries,function(g){g.animate(a.animation)})),h&&(p.interaction("tooltip"),p.tooltip(h))}),i?P(i,function(a,o){e.legend(o,a)}):e.legend(!1),e.tooltip(n.tooltip),t}function mh(t){var e=t.chart,n=t.options,r=n.plots,i=n.data,a=i===void 0?[]:i;return P(r,function(o){var u=o.type,s=o.region,l=o.options,c=l===void 0?{}:l,f=o.top,d=c.tooltip;if(f){Rr(u,e,m(m({},c),{data:a}));return}var h=e.createView(m({region:s},nt(c,Ya)));d&&h.interaction("tooltip"),Rr(u,h,m({data:a},c))}),t}function xh(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function bh(t){return V(rt,yh,mh,ot,rt,J,gt,xh,ut())(t)}function Fh(t,e){var n=t.getModel(),r=n.data,i;return it(r)?i=r[0][e]:i=r[e],i}function wh(t){var e=Vn(t);P(e,function(n){n.hasState("active")&&n.setState("active",!1),n.hasState("selected")&&n.setState("selected",!1),n.hasState("inactive")&&n.setState("inactive",!1)})}var Sh=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAssociationItems=function(n,r){var i,a=this.context.event,o=r||{},u=o.linkField,s=o.dim,l=[];if(!((i=a.data)===null||i===void 0)&&i.data){var c=a.data.data;P(n,function(f){var d,h,v=u;if(s==="x"?v=f.getXScale().field:s==="y"?v=(d=f.getYScales().find(function(y){return y.field===v}))===null||d===void 0?void 0:d.field:v||(v=(h=f.getGroupScales()[0])===null||h===void 0?void 0:h.field),!!v){var p=zt(Vn(f),function(y){var g=!1,x=!1,w=it(c)?k(c[0],v):k(c,v);return Fh(y,v)===w?g=!0:x=!0,{element:y,view:f,active:g,inactive:x}});l.push.apply(l,p)}})}return l},e.prototype.showTooltip=function(n){var r=Pi(this.context.view),i=this.getAssociationItems(r,n);P(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},e.prototype.hideTooltip=function(){var n=Pi(this.context.view);P(n,function(r){r.hideTooltip()})},e.prototype.active=function(n){var r=je(this.context.view),i=this.getAssociationItems(r,n);P(i,function(a){var o=a.active,u=a.element;o&&u.setState("active",!0)})},e.prototype.selected=function(n){var r=je(this.context.view),i=this.getAssociationItems(r,n);P(i,function(a){var o=a.active,u=a.element;o&&u.setState("selected",!0)})},e.prototype.highlight=function(n){var r=je(this.context.view),i=this.getAssociationItems(r,n);P(i,function(a){var o=a.inactive,u=a.element;o&&u.setState("inactive",!0)})},e.prototype.reset=function(){var n=je(this.context.view);P(n,function(r){wh(r)})},e}(re);It("association",Sh);lt("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});lt("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});lt("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});lt("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="mix",n}return e.prototype.getSchemaAdaptor=function(){return bh},e})(q);var Bi;(function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"})(Bi||(Bi={}));var Ht="first-axes-view",Xt="second-axes-view",ye="series-field-key";function Go(t,e,n,r,i){var a=[];e.forEach(function(f){r.forEach(function(d){var h,v=(h={},h[t]=d[t],h[n]=f,h[f]=d[f],h);a.push(v)})});var o=Object.values(Qe(a,n)),u=o[0],s=u===void 0?[]:u,l=o[1],c=l===void 0?[]:l;return i?[s.reverse(),c.reverse()]:[s,c]}function Qt(t){return t!=="vertical"}function Ah(t,e,n){var r=e[0],i=e[1],a=r.autoPadding,o=i.autoPadding,u=t.__axisPosition,s=u.layout,l=u.position;if(Qt(s)&&l==="top"&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),Qt(s)&&l==="bottom"&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!Qt(s)&&l==="bottom"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!Qt(s)&&l==="top"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,c),i.autoPadding=n.instance(0,o.right,a.top,c)}}function _h(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,u=n.barStyle,s=n.widthRatio,l=n.legend,c=n.layout,f=Go(i,a,ye,r,Qt(c));l?e.legend(ye,l):l===!1&&e.legend(!1);var d,h,v=f[0],p=f[1];Qt(c)?(d=e.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Ht}),d.coordinate().transpose().reflect("x"),h=e.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Xt}),h.coordinate().transpose(),d.data(v),h.data(p)):(d=e.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Ht}),h=e.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Xt}),h.coordinate().reflect("y"),d.data(v),h.data(p));var y=S({},t,{chart:d,options:{widthRatio:s,xField:i,yField:a[0],seriesField:ye,interval:{color:o,style:u}}});Ft(y);var g=S({},t,{chart:h,options:{xField:i,yField:a[1],seriesField:ye,widthRatio:s,interval:{color:o,style:u}}});return Ft(g),t}function Dh(t){var e,n,r,i=t.options,a=t.chart,o=i.xAxis,u=i.yAxis,s=i.xField,l=i.yField,c=H(a,Ht),f=H(a,Xt),d={};return gs(i?.meta||{}).map(function(h){k(i?.meta,[h,"alias"])&&(d[h]=i.meta[h].alias)}),a.scale((e={},e[ye]={sync:!0,formatter:function(h){return k(d,h,h)}},e)),ct((n={},n[s]=o,n[l[0]]=u[l[0]],n))(S({},t,{chart:c})),ct((r={},r[s]=o,r[l[1]]=u[l[1]],r))(S({},t,{chart:f})),t}function kh(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=n.layout,s=H(e,Ht),l=H(e,Xt);return r?.position==="bottom"?l.axis(a,m(m({},r),{label:{formatter:function(){return""}}})):l.axis(a,!1),r===!1?s.axis(a,!1):s.axis(a,m({position:Qt(u)?"top":"bottom"},r)),i===!1?(s.axis(o[0],!1),l.axis(o[1],!1)):(s.axis(o[0],i[o[0]]),l.axis(o[1],i[o[1]])),e.__axisPosition={position:s.getOptions().axes[a].position,layout:u},t}function Eh(t){var e=t.chart;return ot(S({},t,{chart:H(e,Ht)})),ot(S({},t,{chart:H(e,Xt)})),t}function Ih(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return we(S({},t,{chart:H(e,Ht),options:{yAxis:i[r[0]]}})),we(S({},t,{chart:H(e,Xt),options:{yAxis:i[r[1]]}})),t}function Th(t){var e=t.chart;return J(S({},t,{chart:H(e,Ht)})),J(S({},t,{chart:H(e,Xt)})),J(t),t}function Oh(t){var e=t.chart;return rt(S({},t,{chart:H(e,Ht)})),rt(S({},t,{chart:H(e,Xt)})),t}function Mh(t){var e=this,n,r,i=t.chart,a=t.options,o=a.label,u=a.yField,s=a.layout,l=H(i,Ht),c=H(i,Xt),f=bt(l,"interval"),d=bt(c,"interval");if(!o)f.label(!1),d.label(!1);else{var h=o.callback,v=St(o,["callback"]);v.position||(v.position="middle"),v.offset===void 0&&(v.offset=2);var p=m({},v);if(Qt(s)){var y=((n=p.style)===null||n===void 0?void 0:n.textAlign)||(v.position==="middle"?"center":"left");v.style=S({},v.style,{textAlign:y});var g={left:"right",right:"left",center:"center"};p.style=S({},p.style,{textAlign:g[y]})}else{var x={top:"bottom",bottom:"top",middle:"middle"};typeof v.position=="string"?v.position=x[v.position]:typeof v.position=="function"&&(v.position=function(){for(var A=[],D=0;D<arguments.length;D++)A[D]=arguments[D];return x[v.position.apply(e,A)]});var w=((r=p.style)===null||r===void 0?void 0:r.textBaseline)||"bottom";p.style=S({},p.style,{textBaseline:w});var b={top:"bottom",bottom:"top",middle:"middle"};v.style=S({},v.style,{textBaseline:b[w]})}f.label({fields:[u[0]],callback:h,cfg:mt(p)}),d.label({fields:[u[1]],callback:h,cfg:mt(v)})}return t}function $h(t){return V(_h,Dh,kh,Ih,Th,Mh,gt,Eh,Oh)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bidirectional-bar",n}return e.getDefaultOptions=function(){return S({},t.getDefaultOptions.call(this),{syncViewPadding:Ah})},e.prototype.changeData=function(n){n===void 0&&(n=[]),this.chart.emit(ht.BEFORE_CHANGE_DATA,Ut.fromData(this.chart,ht.BEFORE_CHANGE_DATA,null)),this.updateOption({data:n});var r=this.options,i=r.xField,a=r.yField,o=r.layout,u=Go(i,a,ye,n,Qt(o)),s=u[0],l=u[1],c=H(this.chart,Ht),f=H(this.chart,Xt);c.data(s),f.data(l),this.chart.render(!0),this.chart.emit(ht.AFTER_CHANGE_DATA,Ut.fromData(this.chart,ht.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $h},e.SERIES_FIELD_KEY=ye,e})(q);var br,Pe="$$range$$",Ph="low-q1-median-q3-high",Lh="$$y_outliers$$",Uo="outliers_view",Ch=S({},q.getDefaultOptions(),{meta:(br={},br[Pe]={min:0,alias:Ph},br),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),qo=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4];n=zt(t,function(s){return s[Pe]=[s[r],s[i],s[a],s[o],s[u]],s})}return n};function Rh(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,u=n.tooltip,s=n.boxStyle;e.data(qo(n.data,i));var l=it(i)?Pe:i,c=i?it(i)?i:[i]:[],f=u;f!==!1&&(f=S({},{fields:it(i)?i:[]},f));var d=ni(S({},t,{options:{xField:r,yField:l,seriesField:a,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:o,style:s}}})).ext;return a&&d.geometry.adjust("dodge"),t}function zh(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,u=n.padding,s=n.label;if(!a)return t;var l=e.createView({padding:u,id:Uo}),c=i.reduce(function(f,d){var h=d[a];return h.forEach(function(v){var p;return f.push(m(m({},d),(p={},p[a]=v,p)))}),f},[]);return l.data(c),Ot({chart:l,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:s}}),l.axis(!1),t}function Nh(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,s=i.xField,l=i.yField,c=i.outliersField,f=Array.isArray(l)?Pe:l,d={};if(c){var h=Lh;d=(e={},e[c]={sync:h,nice:!0},e[f]={sync:h,nice:!0},e)}var v=S(d,a,(n={},n[s]=nt(o,At),n[f]=nt(u,At),n));return r.scale(v),t}function Vh(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=Array.isArray(o)?Pe:o;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(Pe,!1):e.axis(u,i),t}function Wh(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function Bh(t){return V(Rh,zh,Nh,Vh,Wh,gt,ut(),ot,rt,J)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return Ch},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField,i=this.chart.views.find(function(a){return a.id===Uo});i&&i.data(n),this.chart.changeData(qo(n,r))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Bh},e})(q);function Gi(t,e,n){return t.length>1?e+"_"+n:""+e}function Ho(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,a=t.targetField,o=t.layout,u=[],s=[];e.forEach(function(f,d){var h=[f[i]].flat();h.sort(function(y,g){return y-g}),h.forEach(function(y,g){var x,w=g===0?y:h[g]-h[g-1];u.push((x={rKey:i+"_"+g},x[n]=n?f[n]:String(d),x[i]=w,x))});var v=[f[r]].flat();v.forEach(function(y,g){var x;u.push((x={mKey:Gi(v,r,g)},x[n]=n?f[n]:String(d),x[r]=y,x))});var p=[f[a]].flat();p.forEach(function(y,g){var x;u.push((x={tKey:Gi(p,a,g)},x[n]=n?f[n]:String(d),x[a]=y,x))}),s.push(f[i],f[r],f[a])});var l=Math.min.apply(Math,s.flat(1/0)),c=Math.max.apply(Math,s.flat(1/0));return l=l>0?0:l,o==="vertical"&&u.reverse(),{min:l,max:c,ds:u}}function Gh(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,u=n.xField,s=n.color,l=n.layout,c=n.size,f=n.label,d=Ho(n),h=d.min,v=d.max,p=d.ds;e.data(p);var y=S({},t,{options:{xField:u,yField:a,seriesField:"rKey",isStack:!0,label:k(f,"range"),interval:{color:k(s,"range"),style:k(r,"range"),size:k(c,"range")}}});Ft(y),e.geometries[0].tooltip(!1);var g=S({},t,{options:{xField:u,yField:o,seriesField:"mKey",isStack:!0,label:k(f,"measure"),interval:{color:k(s,"measure"),style:k(r,"measure"),size:k(c,"measure")}}});Ft(g);var x=S({},t,{options:{xField:u,yField:i,seriesField:"tKey",label:k(f,"target"),point:{color:k(s,"target"),style:k(r,"target"),size:ft(k(c,"target"))?function(w){return k(c,"target")(w)/2}:k(c,"target")/2,shape:l==="horizontal"?"line":"hyphen"}}});return Ot(x),l==="horizontal"&&e.coordinate().transpose(),m(m({},t),{ext:{data:{min:h,max:v}}})}function Xo(t){var e,n,r=t.options,i=t.ext,a=r.xAxis,o=r.yAxis,u=r.targetField,s=r.rangeField,l=r.measureField,c=r.xField,f=i.data;return V(ct((e={},e[c]=a,e[l]=o,e),(n={},n[l]={min:f?.min,max:f?.max,sync:!0},n[u]={sync:""+l},n[s]={sync:""+l},n)))(t)}function Uh(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,u=n.rangeField,s=n.targetField;return e.axis(""+u,!1),e.axis(""+s,!1),r===!1?e.axis(""+a,!1):e.axis(""+a,r),i===!1?e.axis(""+o,!1):e.axis(""+o,i),t}function qh(t){var e=t.chart,n=t.options,r=n.legend;return e.removeInteraction("legend-filter"),e.legend(r),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function Hh(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,u=e.geometries,s=u[0],l=u[1],c=u[2];return k(r,"range")?s.label(""+o,m({layout:[{type:"limit-in-plot"}]},mt(r.range))):s.label(!1),k(r,"measure")?l.label(""+i,m({layout:[{type:"limit-in-plot"}]},mt(r.measure))):l.label(!1),k(r,"target")?c.label(""+a,m({layout:[{type:"limit-in-plot"}]},mt(r.target))):c.label(!1),t}function Xh(t){V(Gh,Xo,Uh,qh,J,Hh,gt,ot,rt)(t)}var Yh=S({},q.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return Yh},e.prototype.changeData=function(n){this.updateOption({data:n});var r=Ho(this.options),i=r.min,a=r.max,o=r.ds;Xo({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},e.prototype.getSchemaAdaptor=function(){return Xh},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var jh={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function Zh(t,e,n){P(t,function(r,i){r.inEdges=e.filter(function(a){return""+n.target(a)==""+i}),r.outEdges=e.filter(function(a){return""+n.source(a)==""+i}),r.edges=r.outEdges.concat(r.inEdges),r.frequency=r.edges.length,r.value=0,r.inEdges.forEach(function(a){r.value+=n.targetWeight(a)}),r.outEdges.forEach(function(a){r.value+=n.sourceWeight(a)})})}function Kh(t,e){var n={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return(""+e.id(i)).localeCompare(""+e.id(a))}},r=n[e.sortBy];!r&&ft(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}function Qh(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;t.forEach(function(s){o+=s.value}),t.forEach(function(s){s.weight=s.value/o,s.width=s.weight*(1-r),s.height=a}),t.forEach(function(s,l){for(var c=0,f=l-1;f>=0;f--)c+=t[f].width+2*i;var d=s.minX=i+c,h=s.maxX=s.minX+s.width,v=s.minY=e.y-a/2,p=s.maxY=v+a;s.x=[d,h,h,d],s.y=[v,v,p,p]})}else{var u=1/n;t.forEach(function(s,l){s.x=(l+.5)*u,s.y=e.y})}return t}function Jh(t,e,n){if(n.weight){var r={};P(t,function(i,a){r[a]=i.value}),e.forEach(function(i){var a=n.source(i),o=n.target(i),u=t[a],s=t[o];if(u&&s){var l=r[a],c=n.sourceWeight(i),f=u.minX+(u.value-l)/u.value*u.width,d=f+c/u.value*u.width;r[a]-=c;var h=r[o],v=n.targetWeight(i),p=s.minX+(s.value-h)/s.value*s.width,y=p+v/s.value*s.width;r[o]-=v;var g=n.y;i.x=[f,d,p,y],i.y=[g,g,g,g],i.source=u,i.target=s}})}else e.forEach(function(i){var a=t[n.source(i)],o=t[n.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return e}function tv(t){return qt({},jh,t)}function ev(t,e){var n=tv(t),r={},i=e.nodes,a=e.links;i.forEach(function(s){var l=n.id(s);r[l]=s}),Zh(r,a,n),Kh(i,n);var o=Qh(i,n),u=Jh(r,a,n);return{nodes:o,links:u}}var Yo="x",jo="y",Zo="name",Ko="source",nv={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){var n=(t[0]+t[1])/2,r=n>.5?-4:4;return{offsetX:r,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!k(t,[0,"data","isNode"])},formatter:function(t){var e=t.source,n=t.target,r=t.value;return{name:e+" -> "+n,value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function rv(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,u=e.nodeWidthRatio,s=e.rawFields,l=s===void 0?[]:s,c=La(n,r,i,a),f=ev({weight:!0,nodePaddingRatio:o,nodeWidthRatio:u},c),d=f.nodes,h=f.links,v=d.map(function(y){return m(m({},nt(y,st(["id","x","y","name"],l))),{isNode:!0})}),p=h.map(function(y){return m(m({source:y.source.name,target:y.target.name,name:y.source.name||y.target.name},nt(y,st(["x","y","value"],l))),{isNode:!1})});return m(m({},t),{ext:m(m({},t.ext),{chordData:{nodesData:v,edgesData:p}})})}function iv(t){var e,n=t.chart;return n.scale((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},e[Zo]={sync:"color"},e[Ko]={sync:"color"},e)),t}function av(t){var e=t.chart;return e.axis(!1),t}function ov(t){var e=t.chart;return e.legend(!1),t}function lv(t){var e=t.chart,n=t.options,r=n.tooltip;return e.tooltip(r),t}function sv(t){var e=t.chart;return e.coordinate("polar").reflect("y"),t}function uv(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,u=e.createView();return u.data(r),nr({chart:u,options:{xField:Yo,yField:jo,seriesField:Zo,polygon:{style:i},label:a,tooltip:o}}),t}function cv(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=e.createView();o.data(r);var u={xField:Yo,yField:jo,seriesField:Ko,edge:{style:i,shape:"arc"},tooltip:a};return qa({chart:o,options:u}),t}function fv(t){var e=t.chart,n=t.options,r=n.animation;return pn(e,r,Uu(e)),t}function dv(t){return V(J,rv,sv,iv,av,ov,lv,cv,uv,ot,pe,fv)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="chord",n}return e.getDefaultOptions=function(){return nv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dv},e})(q);var hv=["x","y","r","name","value","path","depth"],vv={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},Ui=4,pv=0,qi=5,Hi="drilldown-bread-crumb",gv={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},fn="hierarchy-data-transform-params",yv=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.name="drill-down",n.historyCache=[],n.breadCrumbGroup=null,n.breadCrumbCfg=gv,n}return e.prototype.click=function(){var n=k(this.context,["event","data","data"]);if(!n)return!1;this.drill(n),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var n=this.context.view.getCoordinate(),r=this.breadCrumbGroup,i=r.getBBox(),a=this.getButtonCfg().position,o={x:n.start.x,y:n.end.y-(i.height+qi*2)};n.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:n.start.x,y:n.start.y});var u=Dt.transform(null,[["t",o.x+pv,o.y+i.height+qi]]);r.setMatrix(u)}},e.prototype.back=function(){rn(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(n){var r=this.context.view,i=k(r,["interactions","drill-down","cfg","transformData"],function(l){return l}),a=i(m({data:n.data},n[fn]));r.changeData(a);for(var o=[],u=n;u;){var s=u.data;o.unshift({id:s.name+"_"+u.height+"_"+u.depth,name:s.name,children:i(m({data:s},n[fn]))}),u=u.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},e.prototype.backTo=function(n){if(!(!n||n.length<=0)){var r=this.context.view,i=gr(n).children;r.changeData(i),n.length>1?(this.historyCache=n,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var n=this.context.view,r=k(n,["interactions","drill-down","cfg","drillDownConfig"]);return S(this.breadCrumbCfg,r?.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var n=this,r=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Hi});var a=0;i.forEach(function(o,u){var s=n.breadCrumbGroup.addShape({type:"text",id:o.id,name:Hi+"_"+o.name+"_text",attrs:m(m({text:u===0&&!Rt(r.rootText)?r.rootText:o.name},r.textStyle),{x:a,y:0})}),l=s.getBBox();if(a+=l.width+Ui,s.on("click",function(d){var h,v=d.target.get("id");if(v!==((h=gr(i))===null||h===void 0?void 0:h.id)){var p=i.slice(0,i.findIndex(function(y){return y.id===v})+1);n.backTo(p)}}),s.on("mouseenter",function(d){var h,v=d.target.get("id");v!==((h=gr(i))===null||h===void 0?void 0:h.id)?s.attr(r.activeTextStyle):s.attr({cursor:"default"})}),s.on("mouseleave",function(){s.attr(r.textStyle)}),u<i.length-1){var c=n.breadCrumbGroup.addShape({type:"text",name:r.name+"_"+o.name+"_divider",attrs:m(m({text:r.dividerText},r.textStyle),{x:a,y:0})}),f=c.getBBox();a+=f.width+Ui}})},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(re);function mv(t,e){return t.parent===e.parent?1:2}function xv(t){return t.reduce(bv,0)/t.length}function bv(t,e){return t+e.x}function Fv(t){return 1+t.reduce(wv,0)}function wv(t,e){return Math.max(t,e.y)}function Sv(t){for(var e;e=t.children;)t=e[0];return t}function Av(t){for(var e;e=t.children;)t=e[e.length-1];return t}function _v(){var t=mv,e=1,n=1,r=!1;function i(a){var o,u=0;a.eachAfter(function(d){var h=d.children;h?(d.x=xv(h),d.y=Fv(h)):(d.x=o?u+=t(d,o):0,d.y=0,o=d)});var s=Sv(a),l=Av(a),c=s.x-t(s,l)/2,f=l.x+t(l,s)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*e,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function Dv(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function kv(){return this.eachAfter(Dv)}function Ev(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Iv(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Tv(t,e){for(var n=this,r=[n],i=[],a,o,u,s=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,u=a.length;o<u;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++s,this);return this}function Ov(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Mv(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function $v(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Pv(t){for(var e=this,n=Lv(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Lv(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Cv(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Rv(){return Array.from(this)}function zv(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Nv(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Vv(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Ge(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Gv)):e===void 0&&(e=Bv);for(var n=new Le(t),r,i=[n],a,o,u,s;r=i.pop();)if((o=e(r.data))&&(s=(o=Array.from(o)).length))for(r.children=o,u=s-1;u>=0;--u)i.push(a=o[u]=new Le(o[u])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(Qo)}function Wv(){return Ge(this).eachBefore(Uv)}function Bv(t){return t.children}function Gv(t){return Array.isArray(t)?t[1]:null}function Uv(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Qo(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Le(t){this.data=t,this.depth=this.height=0,this.parent=null}Le.prototype=Ge.prototype={constructor:Le,count:kv,each:Ev,eachAfter:Tv,eachBefore:Iv,find:Ov,sum:Mv,sort:$v,path:Pv,ancestors:Cv,descendants:Rv,leaves:zv,links:Nv,copy:Wv,[Symbol.iterator]:Vv};function qv(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Hv(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t}function Jo(t){for(var e=0,n=(t=Hv(Array.from(t))).length,r=[],i,a;e<n;)i=t[e],a&&tl(a,i)?++e:(a=Yv(r=Xv(r,i)),e=0);return a}function Xv(t,e){var n,r;if(Fr(e,t))return[e];for(n=0;n<t.length;++n)if(Dn(e,t[n])&&Fr(Ze(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Dn(Ze(t[n],t[r]),e)&&Dn(Ze(t[n],e),t[r])&&Dn(Ze(t[r],e),t[n])&&Fr(el(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Dn(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function tl(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Fr(t,e){for(var n=0;n<e.length;++n)if(!tl(t,e[n]))return!1;return!0}function Yv(t){switch(t.length){case 1:return jv(t[0]);case 2:return Ze(t[0],t[1]);case 3:return el(t[0],t[1],t[2])}}function jv(t){return{x:t.x,y:t.y,r:t.r}}function Ze(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,s=a-n,l=o-r,c=u-i,f=Math.sqrt(s*s+l*l);return{x:(n+a+s/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+u)/2}}function el(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,s=e.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,v=i-u,p=i-c,y=s-a,g=f-a,x=r*r+i*i-a*a,w=x-o*o-u*u+s*s,b=x-l*l-c*c+f*f,A=h*v-d*p,D=(v*b-p*w)/(A*2)-r,T=(p*y-v*g)/A,O=(h*w-d*b)/(A*2)-i,C=(d*g-h*y)/A,M=T*T+C*C-1,E=2*(a+D*T+O*C),L=D*D+O*O-a*a,G=-(M?(E+Math.sqrt(E*E-4*M*L))/(2*M):L/E);return{x:r+D+T*G,y:i+O+C*G,r:G}}function Xi(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,u,s,l=r*r+o*o;l?(a=e.r+n.r,a*=a,s=t.r+n.r,s*=s,a>s?(i=(l+s-a)/(2*l),u=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x-i*r-u*o,n.y=t.y-i*o+u*r):(i=(l+a-s)/(2*l),u=Math.sqrt(Math.max(0,a/l-i*i)),n.x=e.x+i*r-u*o,n.y=e.y+i*o+u*r)):(n.x=e.x+n.r,n.y=e.y)}function Yi(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ji(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function kn(t){this._=t,this.next=null,this.previous=null}function nl(t){if(!(i=(t=qv(t)).length))return 0;var e,n,r,i,a,o,u,s,l,c,f;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Xi(n,e,r=t[2]),e=new kn(e),n=new kn(n),r=new kn(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){Xi(e._,n._,r=t[u]),r=new kn(r),s=n.next,l=e.previous,c=n._.r,f=e._.r;do if(c<=f){if(Yi(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(Yi(l._,r._)){e=l,e.next=n,n.previous=e,--u;continue t}f+=l._.r,l=l.previous}while(s!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=ji(e);(r=r.next)!==n;)(o=ji(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Jo(e),u=0;u<i;++u)e=t[u],e.x-=r.x,e.y-=r.y;return r.r}function Zv(t){return nl(t),t}function Kv(t){return t==null?null:qn(t)}function qn(t){if(typeof t!="function")throw new Error;return t}function ge(){return 0}function Ie(t){return function(){return t}}function Qv(t){return Math.sqrt(t.value)}function rl(){var t=null,e=1,n=1,r=ge;function i(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(Zi(t)).eachAfter(wr(r,.5)).eachBefore(Ki(1)):a.eachBefore(Zi(Qv)).eachAfter(wr(ge,1)).eachAfter(wr(r,a.r/Math.min(e,n))).eachBefore(Ki(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Kv(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Ie(+a),i):r},i}function Zi(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function wr(t,e){return function(n){if(r=n.children){var r,i,a=r.length,o=t(n)*e||0,u;if(o)for(i=0;i<a;++i)r[i].r+=o;if(u=nl(r),o)for(i=0;i<a;++i)r[i].r-=o;n.r=u+o}}}function Ki(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function il(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function bn(t,e,n,r,i){for(var a=t.children,o,u=-1,s=a.length,l=t.value&&(r-e)/t.value;++u<s;)o=a[u],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function al(){var t=1,e=1,n=0,r=!1;function i(o){var u=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/u,o.eachBefore(a(e,u)),r&&o.eachBefore(il),o}function a(o,u){return function(s){s.children&&bn(s,s.x0,o*(s.depth+1)/u,s.x1,o*(s.depth+2)/u);var l=s.x0,c=s.y0,f=s.x1-n,d=s.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),s.x0=l,s.y0=c,s.x1=f,s.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Jv={depth:-1},Qi={};function tp(t){return t.id}function ep(t){return t.parentId}function np(){var t=tp,e=ep;function n(r){var i=Array.from(r),a=i.length,o,u,s,l,c,f,d,h=new Map;for(u=0;u<a;++u)o=i[u],c=i[u]=new Le(o),(f=t(o,u,r))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?Qi:c)),(f=e(o,u,r))!=null&&(f+="")&&(c.parent=f);for(u=0;u<a;++u)if(c=i[u],f=c.parent){if(l=h.get(f),!l)throw new Error("missing: "+f);if(l===Qi)throw new Error("ambiguous: "+f);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(s.parent=Jv,s.eachBefore(function(v){v.depth=v.parent.depth+1,--a}).eachBefore(Qo),s.parent=null,a>0)throw new Error("cycle");return s}return n.id=function(r){return arguments.length?(t=qn(r),n):t},n.parentId=function(r){return arguments.length?(e=qn(r),n):e},n}function rp(t,e){return t.parent===e.parent?1:2}function Sr(t){var e=t.children;return e?e[0]:t.t}function Ar(t){var e=t.children;return e?e[e.length-1]:t.t}function ip(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ap(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function op(t,e,n){return t.a.parent===e.parent?t.a:n}function Mn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Mn.prototype=Object.create(Le.prototype);function lp(t){for(var e=new Mn(t,0),n,r=[e],i,a,o,u;n=r.pop();)if(a=n._.children)for(n.children=new Array(u=a.length),o=u-1;o>=0;--o)r.push(i=n.children[o]=new Mn(a[o],o)),i.parent=n;return(e.parent=new Mn(null,0)).children=[e],e}function sp(){var t=rp,e=1,n=1,r=null;function i(l){var c=lp(l);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(s);else{var f=l,d=l,h=l;l.eachBefore(function(x){x.x<f.x&&(f=x),x.x>d.x&&(d=x),x.depth>h.depth&&(h=x)});var v=f===d?1:t(f,d)/2,p=v-f.x,y=e/(d.x+v+p),g=n/(h.depth||1);l.eachBefore(function(x){x.x=(x.x+p)*y,x.y=x.depth*g})}return l}function a(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){ap(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+t(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+t(l._,d._));l.parent.A=u(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function u(l,c,f){if(c){for(var d=l,h=l,v=c,p=d.parent.children[0],y=d.m,g=h.m,x=v.m,w=p.m,b;v=Ar(v),d=Sr(d),v&&d;)p=Sr(p),h=Ar(h),h.a=l,b=v.z+x-d.z-y+t(v._,d._),b>0&&(ip(op(v,l,f),l,b),y+=b,g+=b),x+=v.m,y+=d.m,w+=p.m,g+=h.m;v&&!Ar(h)&&(h.t=v,h.m+=x-g),d&&!Sr(p)&&(p.t=d,p.m+=y-w,f=l)}return f}function s(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}function ur(t,e,n,r,i){for(var a=t.children,o,u=-1,s=a.length,l=t.value&&(i-n)/t.value;++u<s;)o=a[u],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var ol=(1+Math.sqrt(5))/2;function ll(t,e,n,r,i,a){for(var o=[],u=e.children,s,l,c=0,f=0,d=u.length,h,v,p=e.value,y,g,x,w,b,A,D;c<d;){h=i-n,v=a-r;do y=u[f++].value;while(!y&&f<d);for(g=x=y,A=Math.max(v/h,h/v)/(p*t),D=y*y*A,b=Math.max(x/D,D/g);f<d;++f){if(y+=l=u[f].value,l<g&&(g=l),l>x&&(x=l),D=y*y*A,w=Math.max(x/D,D/g),w>b){y-=l;break}b=w}o.push(s={value:y,dice:h<v,children:u.slice(c,f)}),s.dice?bn(s,n,r,i,p?r+=v*y/p:a):ur(s,n,r,p?n+=h*y/p:i,a),p-=y,c=f}return o}const sl=function t(e){function n(r,i,a,o,u){ll(e,r,i,a,o,u)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(ol);function ul(){var t=sl,e=!1,n=1,r=1,i=[0],a=ge,o=ge,u=ge,s=ge,l=ge;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(il),d}function f(d){var h=i[d.depth],v=d.x0+h,p=d.y0+h,y=d.x1-h,g=d.y1-h;y<v&&(v=y=(v+y)/2),g<p&&(p=g=(p+g)/2),d.x0=v,d.y0=p,d.x1=y,d.y1=g,d.children&&(h=i[d.depth+1]=a(d)/2,v+=l(d)-h,p+=o(d)-h,y-=u(d)-h,g-=s(d)-h,y<v&&(v=y=(v+y)/2),g<p&&(p=g=(p+g)/2),t(d,v,p,y,g))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(t=qn(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Ie(+d),c):a},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Ie(+d),c):o},c.paddingRight=function(d){return arguments.length?(u=typeof d=="function"?d:Ie(+d),c):u},c.paddingBottom=function(d){return arguments.length?(s=typeof d=="function"?d:Ie(+d),c):s},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Ie(+d),c):l},c}function up(t,e,n,r,i){var a=t.children,o,u=a.length,s,l=new Array(u+1);for(l[0]=s=o=0;o<u;++o)l[o+1]=s+=a[o].value;c(0,u,t.value,e,n,r,i);function c(f,d,h,v,p,y,g){if(f>=d-1){var x=a[f];x.x0=v,x.y0=p,x.x1=y,x.y1=g;return}for(var w=l[f],b=h/2+w,A=f+1,D=d-1;A<D;){var T=A+D>>>1;l[T]<b?A=T+1:D=T}b-l[A-1]<l[A]-b&&f+1<A&&--A;var O=l[A]-w,C=h-O;if(y-v>g-p){var M=h?(v*C+y*O)/h:y;c(f,A,O,v,p,M,g),c(A,d,C,M,p,y,g)}else{var E=h?(p*C+g*O)/h:g;c(f,A,O,v,p,y,E),c(A,d,C,v,E,y,g)}}}function cp(t,e,n,r,i){(t.depth&1?ur:bn)(t,e,n,r,i)}const fp=function t(e){function n(r,i,a,o,u){if((s=r._squarify)&&s.ratio===e)for(var s,l,c,f,d=-1,h,v=s.length,p=r.value;++d<v;){for(l=s[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?bn(l,i,a,o,p?a+=(u-a)*l.value/p:u):ur(l,i,a,p?i+=(o-i)*l.value/p:o,u),p-=l.value}else r._squarify=s=ll(e,r,i,a,o,u),s.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(ol),Ji=Object.freeze(Object.defineProperty({__proto__:null,cluster:_v,hierarchy:Ge,pack:rl,packSiblings:Zv,packEnclose:Jo,partition:al,stratify:np,tree:sp,treemap:ul,treemapBinary:up,treemapDice:bn,treemapSlice:ur,treemapSliceDice:cp,treemapSquarify:sl,treemapResquarify:fp},Symbol.toStringTag,{value:"Module"}));var cl="nodeIndex",fl="childNodeCount",fi="nodeAncestor",_r="Invalid field: it must be a string!";function di(t,e){var n=t.field,r=t.fields;if(wt(n))return n;if(it(n))return console.warn(_r),n[0];if(console.warn(_r+" will try to get fields instead."),wt(r))return r;if(it(r)&&r.length)return r[0];if(e)return e;throw new TypeError(_r)}function hi(t){var e=[];if(t&&t.each){var n,r;t.each(function(i){var a,o;i.parent!==n?(n=i.parent,r=0):r+=1;var u=ze((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(s){return e.find(function(l){return l.name===s.name})||s}),function(s){var l=s.depth;return l>0&&l<i.depth});i[fi]=u,i[fl]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[cl]=r,e.push(i)})}else t&&t.eachNode&&t.eachNode(function(i){e.push(i)});return e}var dp={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function hp(t,e){e=qt({},dp,e);var n=e.as;if(!it(n)||n.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var r;try{r=di(e)}catch(l){console.warn(l)}var i=function(l){return rl().size(e.size).padding(e.padding)(Ge(l).sum(function(c){return c[r]}).sort(e.sort))},a=i(t),o=n[0],u=n[1],s=n[2];return a.each(function(l){l[o]=l.x,l[u]=l.y,l[s]=l.r}),hi(a)}function dl(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=r===void 0?[]:r,a=t.enableDrillDown,o=hp(e,m(m({},n),{field:"value",as:["x","y","r"]})),u=[];return o.forEach(function(s){for(var l,c=s.data.name,f=m({},s);f.depth>1;)c=((l=f.parent.data)===null||l===void 0?void 0:l.name)+" / "+c,f=f.parent;if(a&&s.depth>2)return null;var d=S({},s.data,m(m(m({},nt(s.data,i)),{path:c}),s));d.ext=n,d[fn]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},u.push(d)}),u}function hl(t,e,n){var r=Kr([t,e]),i=r[0],a=r[1],o=r[2],u=r[3],s=n.width,l=n.height,c=s-(u+a),f=l-(i+o),d=Math.min(c,f),h=(c-d)/2,v=(f-d)/2,p=i+v,y=a+h,g=o+v,x=u+h,w=[p,y,g,x],b=d<0?0:d;return{finalPadding:w,finalSize:b}}function vp(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return S({options:{size:function(r){var i=r.r;return i*n}}},t)}function pp(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,u=a;if(o?.enabled){var s=Kn(n.appendPadding,k(o,["breadCrumb","position"]));u=Kr([s,a])}var l=hl(i,u,r).finalPadding;return n.padding=l,n.appendPadding=0,t}function gp(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,a=n.color,o=n.colorField,u=n.pointStyle,s=n.hierarchyConfig,l=n.sizeField,c=n.rawFields,f=c===void 0?[]:c,d=n.drilldown,h=dl({data:n.data,hierarchyConfig:s,enableDrillDown:d?.enabled,rawFields:f});e.data(h);var v=e.viewBBox,p=hl(r,i,v).finalSize,y=function(g){var x=g.r;return x*p};return l&&(y=function(g){return g[l]*p}),Ot(S({},t,{options:{xField:"x",yField:"y",seriesField:o,sizeField:l,rawFields:st(hv,f),point:{color:a,style:u,shape:"circle",size:y}}})),t}function yp(t){return V(ct({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function mp(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;k(r,"fields")||(i=S({},{customItems:function(a){return a.map(function(o){var u=k(e.getOptions(),"scales"),s=k(u,["name","formatter"],function(c){return c}),l=k(u,["value","formatter"],function(c){return c});return m(m({},o),{name:s(o.data.name),value:l(o.data.value)})})}},i)),e.tooltip(i)}return t}function xp(t){var e=t.chart;return e.axis(!1),t}function bp(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e?.enabled?S({},t,{interactions:st(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:dl,enableDrillDown:!0}}])}):t}function Fp(t){var e=t.chart,n=t.options;return ot({chart:e,options:bp(n)}),t}function wp(t){return V(Tt("pointStyle"),vp,pp,J,yp,gp,xp,Ne,mp,Fp,rt,ut())(t)}function ta(t){var e=k(t,["event","data","data"],{});return it(e.children)&&e.children.length>0}function ea(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,a=r.y,o=e.center,u=o.x,s=o.y,l=e.getRadius()*n,c=Math.sqrt(Math.pow(u-i,2)+Math.pow(s-a,2));return c<l}return!1}It("drill-down-action",yv);lt("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:ta},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:ea}],start:[{trigger:"element:click",isEnable:ta,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:ea,action:["drill-down-action:back"]}]});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="circle-packing",n}return e.getDefaultOptions=function(){return vv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wp},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(q);var Mt="left-axes-view",$t="right-axes-view",vl={nice:!0,label:{autoHide:!0,autoRotate:!1}},Sp=m(m({},vl),{position:"left"}),Ap=m(m({},vl),{position:"right",grid:null}),Ce;(function(t){t.Left="Left",t.Right="Right"})(Ce||(Ce={}));var Se;(function(t){t.Line="line",t.Column="column"})(Se||(Se={}));function zr(t){return k(t,"geometry")===Se.Line}function vi(t){return k(t,"geometry")===Se.Column}function na(t,e,n){return vi(n)?S({},{geometry:Se.Column,label:n.label&&n.isRange?{content:function(r){var i;return(i=r[e])===null||i===void 0?void 0:i.join("-")}}:void 0},n):m({geometry:Se.Line},n)}function ra(t,e){var n=t[0],r=t[1];if(it(e)){var i=e[0],a=e[1];return[i,a]}var o=k(e,n),u=k(e,r);return[o,u]}function ia(t,e){return e===Ce.Left?t===!1?!1:S({},Sp,t):e===Ce.Right?t===!1?!1:S({},Ap,t):t}function _p(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,u=r.groupField,s=r.isGroup,l=["xField","yField"];if(zr(r)){Ve(S({},t,{options:m(m(m({},nt(e,l)),r),{line:{color:r.color,style:r.lineStyle}})})),Ot(S({},t,{options:m(m(m({},nt(e,l)),r),{point:r.point&&m({color:a,shape:"circle"},r.point)})}));var c=[];s&&c.push({type:"dodge",dodgeBy:u||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&P(n.geometries,function(f){f.adjust(c)})}return vi(r)&&lr(S({},t,{options:m(m(m({},nt(e,l)),r),{widthRatio:r.columnWidthRatio,interval:m(m({},nt(r,["color"])),{style:r.columnStyle})})})),t}function aa(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,a=k(i,"marker"),o=bt(e,zr(n)?"line":"interval");if(!n.seriesField){var u=k(e,"options.scales."+r+".alias")||r,s=o.getAttribute("color"),l=e.getTheme().defaultColor;s&&(l=Dt.getMappingValue(s,u,k(s,["values",0],l)));var c=(ft(a)?a:!Xn(a)&&S({},{style:{stroke:l,fill:l}},a))||(zr(n)?{symbol:function(d,h,v){return[["M",d-v,h],["L",d+v,h]]},style:{lineWidth:2,r:6,stroke:l}}:{symbol:"square",style:{fill:l}});return[{value:r,name:u,marker:c,isGeometry:!0,viewId:e.id}]}var f=o.getGroupAttributes();return _t(f,function(d,h){var v=Dt.getLegendItems(e,o,h,e.getTheme(),a);return d.concat(v)},[])}var oa=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,a=t.getXScale(),o=rn(i);if(!(!a||!o)){var u=Oa(i,a.field),s=u,l=rn(s),c=Math.floor(n*(l-1)),f=Math.floor(r*(l-1));t.filter(a.field,function(d){var h=s.indexOf(d);return h>-1?Hu(h,c,f):!0}),t.getRootView().render(!0)}};function Dp(t){var e,n=t.options,r=n.geometryOptions,i=r===void 0?[]:r,a=n.xField,o=n.yField,u=Ma(i,function(s){var l=s.geometry;return l===Se.Line||l===void 0});return S({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:u?[0,1]:void 0},e),tooltip:{showMarkers:u,showCrosshairs:u,shared:!0,crosshairs:{type:"x"}},interactions:u?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:ra(o,n.yAxis),geometryOptions:[na(a,o[0],i[0]),na(a,o[1],i[1])],annotations:ra(o,n.annotations)}})}function kp(t){var e,n,r=t.chart,i=t.options,a=i.geometryOptions,o={line:0,column:1},u=[{type:(e=a[0])===null||e===void 0?void 0:e.geometry,id:Mt},{type:(n=a[1])===null||n===void 0?void 0:n.geometry,id:$t}];return u.sort(function(s,l){return-o[s.type]+o[l.type]}).forEach(function(s){return r.createView({id:s.id})}),t}function Ep(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,u=n.tooltip,s=[m(m({},a[0]),{id:Mt,data:o[0],yField:i[0]}),m(m({},a[1]),{id:$t,data:o[1],yField:i[1]})];return s.forEach(function(l){var c=l.id,f=l.data,d=l.yField,h=vi(l)&&l.isPercent,v=h?ja(f,d,r,d):f,p=H(e,c).data(v),y=h?m({formatter:function(g){return{name:g[l.seriesField]||d,value:(Number(g[d])*100).toFixed(2)+"%"}}},u):u;_p({chart:p,options:{xField:r,yField:d,tooltip:y,geometryOption:l}})}),t}function Ip(t){var e,n=t.chart,r=t.options,i=r.geometryOptions,a=((e=n.getTheme())===null||e===void 0?void 0:e.colors10)||[],o=0;return n.once("beforepaint",function(){P(i,function(u,s){var l=H(n,s===0?Mt:$t);if(!u.color){var c=l.getGroupScales(),f=k(c,[0,"values","length"],1),d=a.slice(o,o+f).concat(s===0?[]:a);l.geometries.forEach(function(h){u.seriesField?h.color(u.seriesField,d):h.color(d[0])}),o+=f}}),n.render(!0)}),t}function Tp(t){var e,n,r=t.chart,i=t.options,a=i.xAxis,o=i.yAxis,u=i.xField,s=i.yField;return ct((e={},e[u]=a,e[s[0]]=o[0],e))(S({},t,{chart:H(r,Mt)})),ct((n={},n[u]=a,n[s[1]]=o[1],n))(S({},t,{chart:H(r,$t)})),t}function Op(t){var e=t.chart,n=t.options,r=H(e,Mt),i=H(e,$t),a=n.xField,o=n.yField,u=n.xAxis,s=n.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),r.axis(a,u),r.axis(o[0],ia(s[0],Ce.Left)),i.axis(a,!1),i.axis(o[1],ia(s[1],Ce.Right)),t}function Mp(t){var e=t.chart,n=t.options,r=n.tooltip,i=H(e,Mt),a=H(e,$t);return e.tooltip(r),i.tooltip({shared:!0}),a.tooltip({shared:!0}),t}function $p(t){var e=t.chart;return ot(S({},t,{chart:H(e,Mt)})),ot(S({},t,{chart:H(e,$t)})),t}function Pp(t){var e=t.chart,n=t.options,r=n.annotations,i=k(r,[0]),a=k(r,[1]);return ut(i)(S({},t,{chart:H(e,Mt),options:{annotations:i}})),ut(a)(S({},t,{chart:H(e,$t),options:{annotations:a}})),t}function Lp(t){var e=t.chart;return J(S({},t,{chart:H(e,Mt)})),J(S({},t,{chart:H(e,$t)})),J(t),t}function Cp(t){var e=t.chart;return rt(S({},t,{chart:H(e,Mt)})),rt(S({},t,{chart:H(e,$t)})),t}function Rp(t){var e=t.chart,n=t.options,r=n.yAxis;return we(S({},t,{chart:H(e,Mt),options:{yAxis:r[0]}})),we(S({},t,{chart:H(e,$t),options:{yAxis:r[1]}})),t}function zp(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,u=H(e,Mt),s=H(e,$t);if(r===!1)e.legend(!1);else if(Ae(r)&&r.custom===!0)e.legend(r);else{var l=k(i,[0,"legend"],r),c=k(i,[1,"legend"],r);e.once("beforepaint",function(){var f=o[0].length?aa({view:u,geometryOption:i[0],yField:a[0],legend:l}):[],d=o[1].length?aa({view:s,geometryOption:i[1],yField:a[1],legend:c}):[];e.legend(S({},r,{custom:!0,items:f.concat(d)}))}),i[0].seriesField&&u.legend(i[0].seriesField,l),i[1].seriesField&&s.legend(i[1].seriesField,c),e.on("legend-item:click",function(f){var d=k(f,"gEvent.delegateObject",{});if(d&&d.item){var h=d.item,v=h.value,p=h.isGeometry,y=h.viewId;if(p){var g=$a(a,function(b){return b===v});if(g>-1){var x=k(H(e,y),"geometries");P(x,function(b){b.changeVisible(!d.item.unchecked)})}}else{var w=k(e.getController("legend"),"option.items",[]);P(e.views,function(b){var A=b.getGroupScales();P(A,function(D){D.values&&D.values.indexOf(v)>-1&&b.filter(D.field,function(T){var O=Ia(w,function(C){return C.value===T});return!O.unchecked})}),e.render(!0)})}}})}return t}function Np(t){var e=t.chart,n=t.options,r=n.slider,i=H(e,Mt),a=H(e,$t);return r&&(i.option("slider",r),i.on("slider:valuechanged",function(o){var u=o.event,s=u.value,l=u.originValue;jr(s,l)||oa(a,s)}),e.once("afterpaint",function(){if(!ys(r)){var o=r.start,u=r.end;(o||u)&&oa(a,[o,u])}})),t}function Vp(t){return V(Dp,kp,Lp,Ep,Tp,Op,Rp,Mp,$p,Pp,Cp,Ip,zp,Np)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dual-axes",n}return e.prototype.getDefaultOptions=function(){return S({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return Vp},e})(q);function Wp(t,e){var n=e.data,r=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,u=e.tooltip,s=e.axes,l=e.meta,c=e.geometries;n&&t.data(n);var f={};s&&P(s,function(d,h){f[h]=nt(d,At)}),f=S({},l,f),t.scale(f),r&&t.coordinate(r),s===!1?t.axis(!1):P(s,function(d,h){t.axis(h,d)}),P(c,function(d){var h=kt({chart:t,options:d}).ext,v=d.adjust;v&&h.geometry.adjust(v)}),P(i,function(d){d.enable===!1?t.removeInteraction(d.type):t.interaction(d.type,d.cfg)}),P(a,function(d){t.annotation()[d.type](m({},d))}),pn(t,o),u?(t.interaction("tooltip"),t.tooltip(u)):u===!1&&t.removeInteraction("tooltip")}function Bp(t){var e=t.chart,n=t.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,u=Zn(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,m(m({},u),{fields:a,eachView:function(s,l){var c=o(s,l);if(c.geometries)Wp(s,c);else{var f=c,d=f.options;d.tooltip&&s.interaction("tooltip"),Rr(f.type,s,d)}}})),t}function Gp(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,u=n.theme,s=n.legend,l=n.interactions,c=n.annotations,f={};return r&&P(r,function(d,h){f[h]=nt(d,At)}),f=S({},i,f),e.scale(f),e.coordinate(o),r?P(r,function(d,h){e.axis(h,d)}):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):a===!1&&e.removeInteraction("tooltip"),e.legend(s),u&&e.theme(u),P(l,function(d){d.enable===!1?e.removeInteraction(d.type):e.interaction(d.type,d.cfg)}),P(c,function(d){e.annotation()[d.type](m({},d))}),t}function Up(t){return V(J,Bp,Gp)(t)}var qp={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return qp},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Up},e})(q);function Hp(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.xField,o=n.yField,u=n.colorField,s=n.sizeField,l=n.sizeRatio,c=n.shape,f=n.color,d=n.tooltip,h=n.heatmapStyle,v=n.meta;e.data(r);var p="polygon";i==="density"&&(p="heatmap");var y=Nt(d,[a,o,u]),g=y.fields,x=y.formatter,w=1;return(l||l===0)&&(!c&&!s?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):l<0||l>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):w=l),kt(S({},t,{options:{type:p,colorField:u,tooltipFields:g,shapeField:s||"",label:void 0,mapping:{tooltip:x,shape:c&&(s?function(b){var A=r.map(function(C){return C[s]}),D=v?.[s]||{},T=D.min,O=D.max;return T=dt(T)?T:Math.min.apply(Math,A),O=dt(O)?O:Math.max.apply(Math,A),[c,(k(b,s)-T)/(O-T),w]}:function(){return[c,1,w]}),color:f||u&&e.getTheme().sequenceColors.join("-"),style:h}}})),t}function Xp(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return V(ct((e={},e[a]=r,e[o]=i,e)))(t)}function Yp(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function jp(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,u=r!==!1;return i&&e.legend(i,u?r:!1),a&&e.legend(a,o===void 0?r:o),!u&&!o&&e.legend(!1),t}function Zp(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.type,o=bt(e,a==="density"?"heatmap":"polygon");if(!r)o.label(!1);else if(i){var u=r.callback,s=St(r,["callback"]);o.label({fields:[i],callback:u,cfg:mt(s)})}return t}function Kp(t){var e,n,r=t.chart,i=t.options,a=i.coordinate,o=i.reflect,u=S({actions:[]},a??{type:"rect"});return o&&((n=(e=u.actions)===null||e===void 0?void 0:e.push)===null||n===void 0||n.call(e,["reflect",o])),r.coordinate(u),t}function Qp(t){return V(J,Tt("heatmapStyle"),Xp,Kp,Hp,Yp,jp,gt,Zp,ut(),ot,rt,pe)(t)}var Jp=S({},q.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});ve("polygon","circle",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),s=Math.abs(o[1].y-o[0].y),l=Math.min(u,s)/2,c=Number(t.shape[1]),f=Number(t.shape[2]),d=Math.sqrt(f),h=l*d*Math.sqrt(c),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("circle",{attrs:m(m(m({x:i,y:a,r:h},t.defaultStyle),t.style),{fill:v})});return p}});ve("polygon","square",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),s=Math.abs(o[1].y-o[0].y),l=Math.min(u,s),c=Number(t.shape[1]),f=Number(t.shape[2]),d=Math.sqrt(f),h=l*d*Math.sqrt(c),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),p=e.addShape("rect",{attrs:m(m(m({x:i-h/2,y:a-h/2,width:h,height:h},t.defaultStyle),t.style),{fill:v})});return p}});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return Jp},e.prototype.getSchemaAdaptor=function(){return Qp},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var tg="liquid";function pl(t){return[{percent:t,type:tg}]}function eg(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,u=n.wave,s=n.shape,l=n.shapeStyle,c=n.animation;e.scale({percent:{min:0,max:1}}),e.data(pl(r));var f=n.color||e.getTheme().defaultColor,d=S({},t,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:f,style:i,shape:"liquid-fill-gauge"}}}),h=Ft(d).ext,v=h.geometry,p=e.getTheme().background,y={radius:a,outline:o,wave:u,shape:s,shapeStyle:l,background:p,animation:c};return v.customInfo(y),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function gl(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var u=k(o,["percent","formatter"])||function(l){return(l*100).toFixed(2)+"%"},s=i.content;return s&&(s=S({},s,{content:Rt(s.content)?u(a):s.content})),Qn(n,{statistic:m(m({},i),{content:s}),plotType:"liquid"},{percent:a}),e&&n.render(!0),t}function ng(t){return V(J,Tt("liquidStyle"),eg,gl,ct({}),rt,ot)(t)}var rg={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},la=5e3;function sa(t,e,n){return t+(e-t)*n}function ig(t){var e=m({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}function ag(t){var e={fill:"#fff",fillOpacity:0,lineWidth:4},n=qt({},e,t.style);return t.color&&!n.stroke&&(n.stroke=t.color),dt(t.opacity)&&(n.opacity=n.strokeOpacity=t.opacity),n}function og(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function lg(t,e,n,r,i,a,o){for(var u=Math.ceil(2*t/n*4)*4,s=[],l=r;l<-Math.PI*2;)l+=Math.PI*2;for(;l>0;)l-=Math.PI*2;l=l/Math.PI/2*n;var c=a-t+l-t*2;s.push(["M",c,e]);for(var f=0,d=0;d<u;++d){var h=d%4,v=og(d*n/4,h,n,i);s.push(["C",v[0][0]+c,-v[0][1]+e,v[1][0]+c,-v[1][1]+e,v[2][0]+c,-v[2][1]+e]),d===u-1&&(f=v[2][0])}return s.push(["L",f+c,o+t]),s.push(["L",c,o+t]),s.push(["Z"]),s}function sg(t,e,n,r,i,a,o,u,s,l){for(var c=i.fill,f=i.opacity,d=o.getBBox(),h=d.maxX-d.minX,v=d.maxY-d.minY,p=0;p<r;p++){var y=r<=1?1:p/(r-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:lg(u,d.minY+v*n,s,0,h/32,t,e),fill:c,opacity:sa(.2,.9,y)*f}});try{if(l===!1)return;var x=Cr([["t",s,0]]);g.stopAnimate(),g.animate({matrix:x},{duration:sa(.5*la,la,y),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function ug(t,e,n,r){var i=n*2/3,a=Math.max(i,r),o=i/2,u=t,s=o+e-a/2,l=Math.asin(o/((a-o)*.85)),c=Math.sin(l)*o,f=Math.cos(l)*o,d=u-f,h=s+c,v=t,p=s+o/Math.sin(l);return`
      M `+d+" "+h+`
      A `+o+" "+o+" 0 1 1 "+(d+f*2)+" "+h+`
      Q `+v+" "+p+" "+t+" "+(e+a/2)+`
      Q `+v+" "+p+" "+d+" "+h+`
      Z 
    `}function cg(t,e,n,r){var i=n/2,a=r/2;return`
      M `+t+" "+(e-a)+` 
      a `+i+" "+a+" 0 1 0 0 "+a*2+`
      a `+i+" "+a+" 0 1 0 0 "+-a*2+`
      Z
    `}function fg(t,e,n,r){var i=r/2,a=n/2;return`
      M `+t+" "+(e-i)+`
      L `+(t+a)+" "+e+`
      L `+t+" "+(e+i)+`
      L `+(t-a)+" "+e+`
      Z
    `}function dg(t,e,n,r){var i=r/2,a=n/2;return`
      M `+t+" "+(e-i)+`
      L `+(t+a)+" "+(e+i)+`
      L `+(t-a)+" "+(e+i)+`
      Z
    `}function hg(t,e,n,r){var i=.618,a=r/2,o=n/2*i;return`
      M `+(t-o)+" "+(e-a)+`
      L `+(t+o)+" "+(e-a)+`
      L `+(t+o)+" "+(e+a)+`
      L `+(t-o)+" "+(e+a)+`
      Z
    `}var ua={pin:ug,circle:cg,diamond:fg,triangle:dg,rect:hg};ve("interval","liquid-fill-gauge",{draw:function(t,e){var n=.5,r=.5,i=t.customInfo,a=i,o=a.radius,u=a.shape,s=a.shapeStyle,l=a.background,c=a.animation,f=i.outline,d=i.wave,h=f.border,v=f.distance,p=d.count,y=d.length,g=_t(t.points,function(G,Z){return Math.min(G,Z.x)},1/0),x=this.parsePoint({x:n,y:r}),w=this.parsePoint({x:g,y:r}),b=x.x-w.x,A=Math.min(b,w.y*o),D=ig(t),T=ag(qt({},t,f)),O=A-h/2,C=typeof u=="function"?u:ua[u]||ua.circle,M=C(x.x,x.y,O*2,O*2);s&&e.addShape("path",{name:"shape",attrs:m({path:M},s)});var E=e.addGroup({name:"waves"}),L=E.setClip({type:"path",attrs:{path:M}});return sg(x.x,x.y,1-t.points[1].y,p,D,E,L,A*2,y,c),e.addShape("path",{name:"distance",attrs:{path:M,fill:"transparent",lineWidth:h+v*2,stroke:l==="transparent"?"#fff":l}}),e.addShape("path",{name:"wrap",attrs:qt(T,{path:M,fill:"transparent",lineWidth:h})}),e}});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="liquid",n}return e.getDefaultOptions=function(){return rg},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.chart.emit(ht.BEFORE_CHANGE_DATA,Ut.fromData(this.chart,ht.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(pl(n)),gl({chart:this.chart,options:this.options},!0),this.chart.emit(ht.AFTER_CHANGE_DATA,Ut.fromData(this.chart,ht.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return ng},e})(q);function vg(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,u=n.area;e.data(r);var s=S({},t,{options:{line:{style:i,color:a},point:o&&m({color:a},o),area:u&&m({color:a},u),label:void 0}}),l=S({},s,{options:{tooltip:!1}}),c=o?.state||n.state,f=S({},s,{options:{tooltip:!1,state:c}});return Ve(s),Ot(f),er(l),t}function pg(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return V(ct((e={},e[a]=r,e[o]=i,e)))(t)}function gg(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,a=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),t}function yg(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return e.axis(r,i),e.axis(a,o),t}function mg(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=bt(e,"line");if(!r)a.label(!1);else{var o=r.callback,u=St(r,["callback"]);a.label({fields:[i],callback:o,cfg:mt(u)})}return t}function xg(t){return V(vg,pg,J,gg,yg,Ne,gt,mg,ot,rt,ut())(t)}var bg=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(n){var r=this.getTooltipCfg(),i=r.shared,a=r.title,o=t.prototype.getTooltipItems.call(this,n);if(o.length>0){var u=this.view.geometries[0],s=u.dataArray,l=o[0].name,c=[];return s.forEach(function(f){f.forEach(function(d){var h=Dt.getTooltipItems(d,u),v=h[0];if(!i&&v&&v.name===l){var p=Rt(a)?l:a;c.push(m(m({},v),{name:v.title,title:p}))}else if(i&&v){var p=Rt(a)?v.name||l:a;c.push(m(m({},v),{name:v.title,title:p}))}})}),c}return[]},e}(ms);xs("radar-tooltip",bg);var Fg=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=this.context.view;n.removeInteraction("tooltip")},e.prototype.show=function(){var n=this.context.event,r=this.getTooltipController();r.showTooltip({x:n.x,y:n.y})},e.prototype.hide=function(){var n=this.getTooltipController();n.hideTooltip()},e.prototype.getTooltipController=function(){var n=this.context.view;return n.getController("radar-tooltip")},e}(re);It("radar-tooltip",Fg);lt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return S({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return xg},e})(q);function wg(t,e,n){var r=n.map(function(o){return o[e]}).filter(function(o){return o!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(t)%360;return a?i*360/a:i}function Sg(t,e,n){var r=[];return t.forEach(function(i){var a=r.find(function(o){return o[e]===i[e]});a?a[n]+=i[n]||null:r.push(m({},i))}),r}function Ag(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,u=n.type,s=n.xField,l=n.yField,c=n.data,f=Me(c,l);e.data(f);var d=S({},t,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:u==="line"?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}});return Ft(d),u==="line"&&Ot({chart:e,options:{xField:s,yField:l,seriesField:o,point:{shape:"circle",color:i}}}),t}function yl(t){var e,n=t.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,u=n.isGroup,s=n.colorField,l=n.maxAngle,c=o&&!u&&s?Sg(a,i,r):a,f=Me(c,r);return V(ct((e={},e[r]={min:0,max:wg(l,r,f)},e)))(t)}function _g(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),t}function Dg(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function kg(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=bt(e,"interval");if(!r)a.label(!1);else{var o=r.callback,u=St(r,["callback"]);a.label({fields:[i],callback:o,cfg:m(m({},mt(u)),{type:"polar"})})}return t}function Eg(t){return V(Tt("barStyle"),Ag,yl,Dg,_g,ot,rt,J,gt,Ne,ut(),kg)(t)}var Ig=S({},q.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial-bar",n}return e.getDefaultOptions=function(){return Ig},e.prototype.changeData=function(n){this.updateOption({data:n}),yl({chart:this.chart,options:this.options}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Eg},e})(q);function Tg(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,a=n.color;return e.data(r),V(Ft)(S({},t,{options:{marginRatio:1,interval:{style:i,color:a}}})),t}function Og(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,a=bt(e,"interval");if(r===!1)a.label(!1);else if(Ae(r)){var o=r.callback,u=r.fields,s=St(r,["callback","fields"]),l=s.offset,c=s.layout;(l===void 0||l>=0)&&(c=c?it(c)?c:[c]:[],s.layout=ze(c,function(f){return f.type!=="limit-in-shape"}),s.layout.length||delete s.layout),a.label({fields:u||[i],callback:o,cfg:mt(s)})}else ne(Wt.WARN,r===null,"the label option must be an Object."),a.label({fields:[i]});return t}function Mg(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r===!1?e.legend(!1):i&&e.legend(i,r),t}function $g(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function Pg(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return V(ct((e={},e[a]=r,e[o]=i,e)))(t)}function Lg(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?e.axis(a,r):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),t}function Cg(t){V(Tt("sectorStyle"),Tg,Pg,Og,$g,Lg,Mg,gt,ot,rt,J,ut(),pe)(t)}var Rg=S({},q.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return Rg},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Cg},e})(q);var ca="x",fa="y",da="name",cr="nodes",fr="edges";function zg(t,e,n){var r=[];return t.forEach(function(i){var a=i[e],o=i[n];r.includes(a)||r.push(a),r.includes(o)||r.push(o)}),r}function Ng(t,e,n,r){var i={};return e.forEach(function(a){i[a]={},e.forEach(function(o){i[a][o]=0})}),t.forEach(function(a){i[a[n]][a[r]]=1}),i}function Vg(t,e,n){if(!it(t))return[];var r=[],i=zg(t,e,n),a=Ng(t,i,e,n),o={};i.forEach(function(s){o[s]=0});function u(s){o[s]=1,i.forEach(function(l){if(a[s][l]!=0)if(o[l]==1)r.push(s+"_"+l);else{if(o[l]==-1)return;u(l)}}),o[s]=-1}return i.forEach(function(s){o[s]!=-1&&u(s)}),r.length!==0&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),t.filter(function(s){return r.findIndex(function(l){return l===s[e]+"_"+s[n]})<0})}function Wg(t){return t.target.depth}function Bg(t){return t.depth}function Gg(t,e){return e-1-t.height}function pi(t,e){return t.sourceLinks.length?t.depth:e-1}function Ug(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Ds(t.sourceLinks,Wg)-1:0}function En(t){return function(){return t}}function Dr(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function kr(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function qg(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}function ha(t,e){return Hn(t.source,e.source)||t.index-e.index}function va(t,e){return Hn(t.target,e.target)||t.index-e.index}function Hn(t,e){return t.y0-e.y0}function Er(t){return t.value}function Hg(t){return t.index}function Xg(t){return t.nodes}function Yg(t){return t.links}function pa(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function ga(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){for(var i=r[n],a=i.y0,o=a,u=0,s=i.sourceLinks;u<s.length;u++){var l=s[u];l.y0=a+l.width/2,a+=l.width}for(var c=0,f=i.targetLinks;c<f.length;c++){var l=f[c];l.y1=o+l.width/2,o+=l.width}}}function jg(){var t=0,e=0,n=1,r=1,i=24,a=8,o,u=Hg,s=pi,l,c,f,d=Xg,h=Yg,v=6;function p(_){var I={nodes:d(_),links:h(_)};return y(I),g(I),x(I),w(I),D(I),ga(I),I}p.update=function(_){return ga(_),_},p.nodeId=function(_){return arguments.length?(u=typeof _=="function"?_:En(_),p):u},p.nodeAlign=function(_){return arguments.length?(s=typeof _=="function"?_:En(_),p):s},p.nodeDepth=function(_){return arguments.length?(l=_,p):l},p.nodeSort=function(_){return arguments.length?(c=_,p):c},p.nodeWidth=function(_){return arguments.length?(i=+_,p):i},p.nodePadding=function(_){return arguments.length?(a=o=+_,p):a},p.nodes=function(_){return arguments.length?(d=typeof _=="function"?_:En(_),p):d},p.links=function(_){return arguments.length?(h=typeof _=="function"?_:En(_),p):h},p.linkSort=function(_){return arguments.length?(f=_,p):f},p.size=function(_){return arguments.length?(t=e=0,n=+_[0],r=+_[1],p):[n-t,r-e]},p.extent=function(_){return arguments.length?(t=+_[0][0],n=+_[1][0],e=+_[0][1],r=+_[1][1],p):[[t,e],[n,r]]},p.iterations=function(_){return arguments.length?(v=+_,p):v};function y(_){var I=_.nodes,N=_.links;I.forEach(function(j,at){j.index=at,j.sourceLinks=[],j.targetLinks=[]});var R=new Map(I.map(function(j){return[u(j),j]}));if(N.forEach(function(j,at){j.index=at;var vt=j.source,pt=j.target;typeof vt!="object"&&(vt=j.source=pa(R,vt)),typeof pt!="object"&&(pt=j.target=pa(R,pt)),vt.sourceLinks.push(j),pt.targetLinks.push(j)}),f!=null)for(var $=0,z=I;$<z.length;$++){var K=z[$],Q=K.sourceLinks,W=K.targetLinks;Q.sort(f),W.sort(f)}}function g(_){for(var I=_.nodes,N=0,R=I;N<R.length;N++){var $=R[N];$.value=$.fixedValue===void 0?Math.max(Dr($.sourceLinks,Er),Dr($.targetLinks,Er)):$.fixedValue}}function x(_){for(var I=_.nodes,N=I.length,R=new Set(I),$=new Set,z=0;R.size;){if(R.forEach(function(j){j.depth=z;for(var at=0,vt=j.sourceLinks;at<vt.length;at++){var pt=vt[at].target;$.add(pt)}}),++z>N)throw new Error("circular link");R=$,$=new Set}if(l)for(var K=Math.max(kr(I,function(j){return j.depth})+1,0),Q=void 0,W=0;W<I.length;W++)Q=I[W],Q.depth=l.call(null,Q,K)}function w(_){for(var I=_.nodes,N=I.length,R=new Set(I),$=new Set,z=0;R.size;){if(R.forEach(function(K){K.height=z;for(var Q=0,W=K.targetLinks;Q<W.length;Q++){var j=W[Q].source;$.add(j)}}),++z>N)throw new Error("circular link");R=$,$=new Set}}function b(_){for(var I=_.nodes,N=Math.max(kr(I,function(pt){return pt.depth})+1,0),R=(n-t-i)/(N-1),$=new Array(N).fill(0).map(function(){return[]}),z=0,K=I;z<K.length;z++){var Q=K[z],W=Math.max(0,Math.min(N-1,Math.floor(s.call(null,Q,N))));Q.layer=W,Q.x0=t+W*R,Q.x1=Q.x0+i,$[W]?$[W].push(Q):$[W]=[Q]}if(c)for(var j=0,at=$;j<at.length;j++){var vt=at[j];vt.sort(c)}return $}function A(_){for(var I=qg(_,function(ie){return(r-e-(ie.length-1)*o)/Dr(ie,Er)}),N=0,R=_;N<R.length;N++){for(var $=R[N],z=e,K=0,Q=$;K<Q.length;K++){var W=Q[K];W.y0=z,W.y1=z+W.value*I,z=W.y1+o;for(var j=0,at=W.sourceLinks;j<at.length;j++){var vt=at[j];vt.width=vt.value*I}}z=(r-z+o)/($.length+1);for(var pt=0;pt<$.length;++pt){var W=$[pt];W.y0+=z*(pt+1),W.y1+=z*(pt+1)}G($)}}function D(_){var I=b(_);o=Math.min(a,(r-e)/(kr(I,function(z){return z.length})-1)),A(I);for(var N=0;N<v;++N){var R=Math.pow(.99,N),$=Math.max(1-R,(N+1)/v);O(I,R,$),T(I,R,$)}}function T(_,I,N){for(var R=1,$=_.length;R<$;++R){for(var z=_[R],K=0,Q=z;K<Q.length;K++){for(var W=Q[K],j=0,at=0,vt=0,pt=W.targetLinks;vt<pt.length;vt++){var ie=pt[vt],Ue=ie.source,vr=ie.value,qe=vr*(W.layer-Ue.layer);j+=Z(Ue,W)*qe,at+=qe}if(at>0){var He=(j/at-W.y0)*I;W.y0+=He,W.y1+=He,L(W)}}c===void 0&&z.sort(Hn),z.length&&C(z,N)}}function O(_,I,N){for(var R=_.length,$=R-2;$>=0;--$){for(var z=_[$],K=0,Q=z;K<Q.length;K++){for(var W=Q[K],j=0,at=0,vt=0,pt=W.sourceLinks;vt<pt.length;vt++){var ie=pt[vt],Ue=ie.target,vr=ie.value,qe=vr*(Ue.layer-W.layer);j+=tt(W,Ue)*qe,at+=qe}if(at>0){var He=(j/at-W.y0)*I;W.y0+=He,W.y1+=He,L(W)}}c===void 0&&z.sort(Hn),z.length&&C(z,N)}}function C(_,I){var N=_.length>>1,R=_[N];E(_,R.y0-o,N-1,I),M(_,R.y1+o,N+1,I),E(_,r,_.length-1,I),M(_,e,0,I)}function M(_,I,N,R){for(;N<_.length;++N){var $=_[N],z=(I-$.y0)*R;z>1e-6&&($.y0+=z,$.y1+=z),I=$.y1+o}}function E(_,I,N,R){for(;N>=0;--N){var $=_[N],z=($.y1-I)*R;z>1e-6&&($.y0-=z,$.y1-=z),I=$.y0-o}}function L(_){var I=_.sourceLinks,N=_.targetLinks;if(f===void 0){for(var R=0,$=N;R<$.length;R++){var z=$[R].source.sourceLinks;z.sort(va)}for(var K=0,Q=I;K<Q.length;K++){var W=Q[K].target.targetLinks;W.sort(ha)}}}function G(_){if(f===void 0)for(var I=0,N=_;I<N.length;I++){var R=N[I],$=R.sourceLinks,z=R.targetLinks;$.sort(va),z.sort(ha)}}function Z(_,I){for(var N=_.y0-(_.sourceLinks.length-1)*o/2,R=0,$=_.sourceLinks;R<$.length;R++){var z=$[R],K=z.target,Q=z.width;if(K===I)break;N+=Q+o}for(var W=0,j=I.targetLinks;W<j.length;W++){var at=j[W],K=at.source,Q=at.width;if(K===_)break;N-=Q}return N}function tt(_,I){for(var N=I.y0-(I.targetLinks.length-1)*o/2,R=0,$=I.targetLinks;R<$.length;R++){var z=$[R],K=z.source,Q=z.width;if(K===_)break;N+=Q+o}for(var W=0,j=_.sourceLinks;W<j.length;W++){var at=j[W],K=at.target,Q=at.width;if(K===I)break;N-=Q}return N}return p}var Zg={left:Bg,right:Gg,center:Ug,justify:pi},Kg={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function Qg(t){var e=wt(t)?Zg[t]:ft(t)?t:null;return e||pi}function Jg(t){return qt({},Kg,t)}function ty(t,e){var n=Jg(t),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,u=n.nodePadding,s=n.nodeDepth,l=jg().nodeSort(i).nodeWidth(o).nodePadding(u).nodeDepth(s).nodeAlign(Qg(a)).extent([[0,0],[1,1]]).nodeId(r),c=l(e),f=c.nodes.map(function(h){var v=h.x0,p=h.x1,y=h.y0,g=h.y1;return h.x=[v,p,p,v],h.y=[y,y,g,g],h}).filter(function(h){return h.name!==null}),d=c.links.map(function(h){var v=h.source,p=h.target,y=v.x1,g=p.x0;h.x=[y,y,g,g];var x=h.width/2;return h.y=[h.y0+x,h.y0-x,h.y1+x,h.y1-x],h}).filter(function(h){var v=h.source,p=h.target;return v.name!==null&&p.name!==null});return{nodes:f,links:d}}function ey(t){return t==="node-link"}function ny(t,e,n){return Fe(t)?t/n:e}function ry(t,e,n){return Fe(t)?t/n:e}function ml(t,e,n){var r=t.dataType,i=t.data,a=t.sourceField,o=t.targetField,u=t.weightField,s=t.nodeAlign,l=t.nodeSort,c=t.nodePadding,f=t.nodePaddingRatio,d=t.nodeWidth,h=t.nodeWidthRatio,v=t.nodeDepth,p=t.rawFields,y=p===void 0?[]:p,g;ey(r)?g=i:g=La(Vg(i,a,o),a,o,u,y);var x=ty({nodeAlign:s,nodePadding:ry(c,f,n),nodeWidth:ny(d,h,e),nodeSort:l,nodeDepth:v},g),w=x.nodes,b=x.links;return{nodes:w.map(function(A){return m(m({},nt(A,st(["x","y","name"],y))),{isNode:!0})}),edges:b.map(function(A){return m(m({source:A.source.name,target:A.target.name,name:A.source.name||A.target.name},nt(A,st(["x","y","value"],y))),{isNode:!1})})}}function iy(t){var e=t.options,n=e.rawFields,r=n===void 0?[]:n;return S({},{options:{tooltip:{fields:nn(st(["name","source","target","value","isNode"],r))},label:{fields:nn(st(["x","name"],r))}}},t)}function ay(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,u=n.tooltip,s=n.nodeState,l=n.edgeState;e.legend(!1),e.tooltip(u),e.axis(!1),e.coordinate().reflect("y");var c=ml(n,e.width,e.height),f=c.nodes,d=c.edges,h=e.createView({id:fr});h.data(d),qa({chart:h,options:{xField:ca,yField:fa,seriesField:da,edge:{color:r,style:a,shape:"arc"},tooltip:u,state:l}});var v=e.createView({id:cr});return v.data(f),nr({chart:v,options:{xField:ca,yField:fa,seriesField:da,polygon:{color:r,style:i},label:o,tooltip:u,state:s}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function oy(t){var e=t.chart,n=t.options,r=n.animation,i=st(e.views[0].geometries,e.views[1].geometries);return pn(e,r,i),t}function ly(t){var e=t.chart,n=t.options,r=n.nodeDraggable,i="sankey-node-draggable";return r?e.interaction(i):e.removeInteraction(i),t}function sy(t){var e=t.chart,n=t.options,r=n.interactions,i=r===void 0?[]:r,a=[].concat(i,n.nodeInteractions||[]),o=[].concat(i,n.edgeInteractions||[]),u=H(e,cr),s=H(e,fr);return a.forEach(function(l){l?.enable===!1?u.removeInteraction(l.type):u.interaction(l.type,l.cfg||{})}),o.forEach(function(l){l?.enable===!1?s.removeInteraction(l.type):s.interaction(l.type,l.cfg||{})}),t}function uy(t){return V(iy,ay,sy,ly,oy,J)(t)}var cy=function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDragging=!1,n}return e.prototype.isNodeElement=function(){var n=k(this.context,"event.target");if(n){var r=n.get("element");return r&&r.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return H(this.context.view,cr)},e.prototype.getEdgeView=function(){return H(this.context.view,fr)},e.prototype.getCurrentDatumIdx=function(n){return this.getNodeView().geometries[0].elements.indexOf(n)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:k(this.context,"event.x"),y:k(this.context,"event.y")};var n=this.context.event.target.get("element"),r=this.getCurrentDatumIdx(n);if(r===-1)return;this.currentElementIdx=r,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var n=this.context.view,r={x:k(this.context,"event.x"),y:k(this.context,"event.y")},i=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,o=this.getNodeView(),u=o.geometries[0].elements[this.currentElementIdx];if(u&&u.getModel()){var s=u.getModel().data,l=o.getOptions().data,c=o.getCoordinate(),f={x:i/c.getWidth(),y:a/c.getHeight()},d=m(m({},s),{x:s.x.map(function(g){return g+=f.x}),y:s.y.map(function(g){return g+=f.y})}),h=st(l);h[this.currentElementIdx]=d,o.data(h);var v=s.name,p=this.getEdgeView(),y=p.getOptions().data;y.forEach(function(g){g.source===v&&(g.x[0]+=f.x,g.x[1]+=f.x,g.y[0]+=f.y,g.y[1]+=f.y),g.target===v&&(g.x[2]+=f.x,g.x[3]+=f.x,g.y[2]+=f.y,g.y[3]+=f.y)}),p.data(y),this.prevPoint=r,n.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(re);It("sankey-node-drag",cy);lt("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(n){var r=n.name;return r},callback:function(n){var r=n[1]===1;return{style:{fill:"#545454",textAlign:r?"end":"start"},offsetX:r?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(n){return!k(n,[0,"data","isNode"])},formatter:function(n){var r=n.source,i=n.target,a=n.value;return{name:r+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(n){this.updateOption({data:n});var r=ml(this.options,this.chart.width,this.chart.height),i=r.nodes,a=r.edges,o=H(this.chart,cr),u=H(this.chart,fr);o.changeData(i),u.changeData(a)},e.prototype.getSchemaAdaptor=function(){return uy},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var gi="ancestor-node",xl="value",dn="path",fy=[dn,cl,fi,fl,"name","depth","height"],dy=S({},q.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),hy={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function vy(t,e){e=qt({},hy,e);var n=e.as;if(!it(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=di(e)}catch(s){console.warn(s)}var i=function(s){return al().size(e.size).round(e.round).padding(e.padding)(Ge(s).sum(function(l){return rn(l.children)?e.ignoreParentValue?0:l[r]-_t(l.children,function(c,f){return c+f[r]},0):l[r]}).sort(e.sort))},a=i(t),o=n[0],u=n[1];return a.each(function(s){var l,c;s[o]=[s.x0,s.x1,s.x1,s.x0],s[u]=[s.y1,s.y1,s.y0,s.y0],s.name=s.name||((l=s.data)===null||l===void 0?void 0:l.name)||((c=s.data)===null||c===void 0?void 0:c.label),s.data.name=s.name,["x0","x1","y0","y1"].forEach(function(f){n.indexOf(f)===-1&&delete s[f]})}),hi(a)}var py={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function gy(t,e){return t==="treemapSquarify"?Ji[t].ratio(e):Ji[t]}function bl(t,e){e=qt({},py,e);var n=e.as;if(!it(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=di(e)}catch(l){console.warn(l)}var i=gy(e.tile,e.ratio),a=function(l){return ul().tile(i).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Ge(l).sum(function(c){return e.ignoreParentValue&&c.children?0:c[r]}).sort(e.sort))},o=a(t),u=n[0],s=n[1];return o.each(function(l){l[u]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],["x0","x1","y0","y1"].forEach(function(c){n.indexOf(c)===-1&&delete l[c]})}),hi(o)}function Fl(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,u={partition:vy,treemap:bl},s=t.seriesField,l=t.type||"partition",c=u[l](e,m(m({field:s||"value"},Zn(a,["activeDepth"])),{type:"hierarchy."+l,as:["x","y"]})),f=[];return c.forEach(function(d){var h,v,p,y,g,x;if(d.depth===0||o>0&&d.depth>o)return null;for(var w=d.data.name,b=m({},d);b.depth>1;)w=((v=b.parent.data)===null||v===void 0?void 0:v.name)+" / "+w,b=b.parent;var A=m(m(m({},nt(d.data,st(r||[],[a.field]))),(h={},h[dn]=w,h[gi]=b.data.name,h)),d);s&&(A[s]=d.data[s]||((y=(p=d.parent)===null||p===void 0?void 0:p.data)===null||y===void 0?void 0:y[s])),n&&(A[n]=d.data[n]||((x=(g=d.parent)===null||g===void 0?void 0:g.data)===null||x===void 0?void 0:x[n])),A.ext=a,A[fn]={hierarchyConfig:a,colorField:n,rawFields:r},f.push(A)}),f}function yy(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=i===void 0?gi:i,o=n.sunburstStyle,u=n.rawFields,s=u===void 0?[]:u,l=Fl(n);e.data(l);var c;return o&&(c=function(f){return S({},{fillOpacity:Math.pow(.85,f.depth)},ft(o)?o(f):o)}),nr(S({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:nn(st(fy,s)),polygon:{color:r,style:c}}})),t}function my(t){var e=t.chart;return e.axis(!1),t}function xy(t){var e=t.chart,n=t.options,r=n.label,i=bt(e,"polygon");if(!r)i.label(!1);else{var a=r.fields,o=a===void 0?["name"]:a,u=r.callback,s=St(r,["fields","callback"]);i.label({fields:o,callback:u,cfg:mt(s)})}return t}function by(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),t}function Fy(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return V(ct({},(e={},e[xl]=k(i,k(r,["field"],"value")),e)))(t)}function wy(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;k(r,"fields")||(i=S({},{customItems:function(a){return a.map(function(o){var u=k(e.getOptions(),"scales"),s=k(u,[dn,"formatter"],function(c){return c}),l=k(u,[xl,"formatter"],function(c){return c});return m(m({},o),{name:s(o.data[dn]),value:l(o.data.value)})})}},i)),e.tooltip(i)}return t}function Sy(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e?.enabled?S({},t,{interactions:st(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:Fl}}])}):t}function Ay(t){var e=t.chart,n=t.options,r=n.drilldown;return ot({chart:e,options:Sy(n)}),r?.enabled&&(e.appendPadding=Kn(e.appendPadding,k(r,["breadCrumb","position"]))),t}function _y(t){return V(J,Tt("sunburstStyle"),yy,my,Fy,Ne,by,wy,xy,Ay,rt,ut())(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sunburst",n}return e.getDefaultOptions=function(){return dy},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _y},e.SUNBURST_ANCESTOR_FIELD=gi,e.SUNBURST_PATH_FIELD=dn,e.NODE_ANCESTORS_FIELD=fi,e})(q);function wl(t,e){if(it(t))return t.find(function(n){return n.type===e})}function Sl(t,e){var n=wl(t,e);return n&&n.enable!==!1}function yi(t){var e=t.interactions,n=t.drilldown;return k(n,"enabled")||Sl(e,"treemap-drill-down")}function Dy(t){var e=t.interactions["drill-down"];if(e){var n=e.context.actions.find(function(r){return r.name==="drill-down-action"});n.reset()}}function mi(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,a=bl(e,m(m({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(u){if(u.depth===0||r&&u.depth!==1||!r&&u.children)return null;var s=u.ancestors().map(function(d){return{data:d.data,height:d.height,value:d.value}}),l=r&&it(e.path)?s.concat(e.path.slice(1)):s,c=Object.assign({},u.data,m({x:u.x,y:u.y,depth:u.depth,value:u.value,path:l},u));if(!u.data[n]&&u.parent){var f=u.ancestors().find(function(d){return d.data[n]});c[n]=f?.data[n]}else c[n]=u.data[n];c[fn]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(c)}),o}function ky(t){var e=t.options,n=e.colorField;return S({options:{rawFields:["value"],tooltip:{fields:["name","value",n,"path"],formatter:function(r){return{name:r.name,value:r.value}}}}},t)}function Ey(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,u=n.rawFields,s=mi({data:n.data,colorField:n.colorField,enableDrillDown:yi(n),hierarchyConfig:o});return e.data(s),nr(S({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:u,polygon:{color:r,style:a}}})),e.coordinate().reflect("y"),t}function Iy(t){var e=t.chart;return e.axis(!1),t}function Ty(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n,i=yi(t);return i?S({},t,{interactions:st(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:mi}}])}):t}function Oy(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;ot({chart:e,options:Ty(n)});var a=wl(r,"view-zoom");a&&(a.enable!==!1?e.getCanvas().on("mousewheel",function(u){u.preventDefault()}):e.getCanvas().off("mousewheel"));var o=yi(n);return o&&(e.appendPadding=Kn(e.appendPadding,k(i,["breadCrumb","position"]))),t}function My(t){return V(ky,J,Tt("rectStyle"),Ey,Iy,Ne,gt,Oy,rt,ut())(t)}var $y={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return $y},e.prototype.changeData=function(n){var r=this.options,i=r.colorField,a=r.interactions,o=r.hierarchyConfig;this.updateOption({data:n});var u=mi({data:n,colorField:i,enableDrillDown:Sl(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(u),Dy(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return My},e})(q);var ee="id",Nr="path",Py={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function dr(t){if(t){var e=t.geometries[0].elements;e.forEach(function(n){n.shape.toFront()})}}var Ly=jn("element-active"),Cy=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){dr(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Ly),Ry=jn("element-highlight"),zy=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){dr(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Ry),Ny=jn("element-selected"),Vy=jn("element-single-selected"),Wy=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){dr(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Ny),By=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){dr(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Vy);It("venn-element-active",Cy);It("venn-element-highlight",zy);It("venn-element-selected",Wy);It("venn-element-single-selected",By);lt("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});lt("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});lt("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});lt("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});lt("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});lt("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var Gy=function(t){U(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelPoint=function(n,r,i){var a=n.data,o=a.x,u=a.y,s=n.customLabelInfo,l=s.offsetX,c=s.offsetY;return{content:n.content[i],x:o+l,y:u+c}},e}(Fs);bs("venn",Gy);function Uy(t){return S({},t.defaultStyle,{fill:t.color},t.style)}ve("schema","venn",{draw:function(t,e){var n=t.data,r=ws(n[Nr]),i=Uy(t),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:m(m({},i),{path:r}),name:"venn-path"});var o=t.customInfo,u=o.offsetX,s=o.offsetY,l=Dt.transform(null,[["t",u,s]]);return a.setMatrix(l),a},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var qy=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},ya={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},burn:function(t,e){return e===255?255:t===0?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}},Hy=function(t){if(!ya[t])throw new Error("unknown blend mode "+t);return ya[t]};function Xy(t,e,n){n===void 0&&(n="normal");var r=qy(Hy(n))(In(t),In(e)),i=In(t),a=i[0],o=i[1],u=i[2],s=i[3],l=In(e),c=l[0],f=l[1],d=l[2],h=l[3],v=Number((s+h*(1-s)).toFixed(2)),p=Math.round((s*(1-h)*(a/255)+s*h*(r[0]/255)+(1-s)*h*(c/255))/v*255),y=Math.round((s*(1-h)*(o/255)+s*h*(r[1]/255)+(1-s)*h*(f/255))/v*255),g=Math.round((s*(1-h)*(u/255)+s*h*(r[2]/255)+(1-s)*h*(d/255))/v*255);return"rgba("+p+", "+y+", "+g+", "+v+")"}function In(t){var e=t.replace("/s+/g",""),n;return typeof e=="string"&&!e.startsWith("rgba")&&!e.startsWith("#")?n=yr.rgb2arr(yr.toRGB(e)).concat([1]):(e.startsWith("rgba")&&(n=e.replace("rgba(","").replace(")","").split(",")),e.startsWith("#")&&(n=yr.rgb2arr(e).concat([1])),n.map(function(r,i){return i===3?Number(r):r|0}))}function Yy(t,e,n,r){r=r||{};var i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(e),u=t(n),s=n-e;if(o*u>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(u===0)return n;for(var l=0;l<i;++l){s/=2;var c=e+s,f=t(c);if(f*o>=0&&(e=c),Math.abs(s)<a||f===0)return c}return e+s}function Vr(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function ma(t,e){return Vr(t).map(function(){return Vr(e)})}function Oe(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function Wr(t){return Math.sqrt(Oe(t,t))}function Br(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function Zt(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function Al(t,e,n){n=n||{};var r=n.maxIterations||e.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,s=n.rho!==void 0?n.rho:1,l=n.chi!==void 0?n.chi:2,c=n.psi!==void 0?n.psi:-.5,f=n.sigma!==void 0?n.sigma:.5,d,h=e.length,v=new Array(h+1);v[0]=e,v[0].fx=t(e),v[0].id=0;for(var p=0;p<h;++p){var y=e.slice();y[p]=y[p]?y[p]*i:a,v[p+1]=y,v[p+1].fx=t(y),v[p+1].id=p+1}function g(L){for(var G=0;G<L.length;G++)v[h][G]=L[G];v[h].fx=L.fx}for(var x=function(L,G){return L.fx-G.fx},w=e.slice(),b=e.slice(),A=e.slice(),D=e.slice(),T=0;T<r;++T){if(v.sort(x),n.history){var O=v.map(function(L){var G=L.slice();return G.fx=L.fx,G.id=L.id,G});O.sort(function(L,G){return L.id-G.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:O})}for(d=0,p=0;p<h;++p)d=Math.max(d,Math.abs(v[0][p]-v[1][p]));if(Math.abs(v[0].fx-v[h].fx)<o&&d<u)break;for(p=0;p<h;++p){w[p]=0;for(var C=0;C<h;++C)w[p]+=v[C][p];w[p]/=h}var M=v[h];if(Zt(b,1+s,w,-s,M),b.fx=t(b),b.fx<v[0].fx)Zt(D,1+l,w,-l,M),D.fx=t(D),D.fx<b.fx?g(D):g(b);else if(b.fx>=v[h-1].fx){var E=!1;if(b.fx>M.fx?(Zt(A,1+c,w,-c,M),A.fx=t(A),A.fx<M.fx?g(A):E=!0):(Zt(A,1-c*s,w,c*s,M),A.fx=t(A),A.fx<b.fx?g(A):E=!0),E){if(f>=1)break;for(p=1;p<v.length;++p)Zt(v[p],1-f,v[0],f,v[p]),v[p].fx=t(v[p])}}else g(b)}return v.sort(x),{fx:v[0].fx,x:v[0]}}function jy(t,e,n,r,i,a,o){var u=n.fx,s=Oe(n.fxprime,e),l=u,c=u,f=s,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,y,g){for(var x=0;x<16;++x)if(i=(p+y)/2,Zt(r.x,1,n.x,i,e),l=r.fx=t(r.x,r.fxprime),f=Oe(r.fxprime,e),l>u+a*i*s||l>=g)y=i;else{if(Math.abs(f)<=-o*s)return i;f*(y-p)>=0&&(y=p),p=i,g=l}return 0}for(var v=0;v<10;++v){if(Zt(r.x,1,n.x,i,e),l=r.fx=t(r.x,r.fxprime),f=Oe(r.fxprime,e),l>u+a*i*s||v&&l>=c)return h(d,i,c);if(Math.abs(f)<=-o*s)return i;if(f>=0)return h(i,d,l);c=l,d=i,i*=2}return i}function Zy(t,e,n){var r={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()},a=e.slice(),o,u,s=1,l;n=n||{},l=n.maxIterations||e.length*20,r.fx=t(r.x,r.fxprime),o=r.fxprime.slice(),Br(o,r.fxprime,-1);for(var c=0;c<l;++c){if(s=jy(t,o,r,i,s),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),!s)Br(o,r.fxprime,-1);else{Zt(a,1,i.fxprime,-1,r.fxprime);var f=Oe(r.fxprime,r.fxprime),d=Math.max(0,Oe(a,i.fxprime)/f);Zt(o,d,o,-1,i.fxprime),u=r,r=i,i=u}if(Wr(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),r}var _l=1e-10;function xi(t,e){var n=Qy(t),r=n.filter(function(T){return Ky(T,t)}),i=0,a=0,o,u=[];if(r.length>1){var s=El(r);for(o=0;o<r.length;++o){var l=r[o];l.angle=Math.atan2(l.x-s.x,l.y-s.y)}r.sort(function(T,O){return O.angle-T.angle});var c=r[r.length-1];for(o=0;o<r.length;++o){var f=r[o];a+=(c.x+f.x)*(f.y-c.y);for(var d={x:(f.x+c.x)/2,y:(f.y+c.y)/2},h=null,v=0;v<f.parentIndex.length;++v)if(c.parentIndex.indexOf(f.parentIndex[v])>-1){var p=t[f.parentIndex[v]],y=Math.atan2(f.x-p.x,f.y-p.y),g=Math.atan2(c.x-p.x,c.y-p.y),x=g-y;x<0&&(x+=2*Math.PI);var w=g-x/2,b=Vt(d,{x:p.x+p.radius*Math.sin(w),y:p.y+p.radius*Math.cos(w)});b>p.radius*2&&(b=p.radius*2),(h===null||h.width>b)&&(h={circle:p,width:b,p1:f,p2:c})}h!==null&&(u.push(h),i+=Gr(h.circle.radius,h.width),c=f)}}else{var A=t[0];for(o=1;o<t.length;++o)t[o].radius<A.radius&&(A=t[o]);var D=!1;for(o=0;o<t.length;++o)if(Vt(t[o],A)>Math.abs(A.radius-t[o].radius)){D=!0;break}D?i=a=0:(i=A.radius*A.radius*Math.PI,u.push({circle:A,p1:{x:A.x,y:A.y+A.radius},p2:{x:A.x-_l,y:A.y+A.radius},width:A.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=u,e.innerPoints=r,e.intersectionPoints=n),i+a}function Ky(t,e){for(var n=0;n<e.length;++n)if(Vt(t,e[n])>e[n].radius+_l)return!1;return!0}function Qy(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=kl(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}function Gr(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Vt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Dl(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return Gr(t,r)+Gr(e,i)}function kl(t,e){var n=Vt(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),u=t.x+a*(e.x-t.x)/n,s=t.y+a*(e.y-t.y)/n,l=-(e.y-t.y)*(o/n),c=-(e.x-t.x)*(o/n);return[{x:u+l,y:s-c},{x:u-l,y:s+c}]}function El(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function Ir(t,e,n){var r=e[0].radius-Vt(e[0],t),i,a;for(i=1;i<e.length;++i)a=e[i].radius-Vt(e[i],t),a<=r&&(r=a);for(i=0;i<n.length;++i)a=Vt(n[i],t)-n[i].radius,a<=r&&(r=a);return r}function Il(t,e){var n=[],r;for(r=0;r<t.length;++r){var i=t[r];n.push({x:i.x,y:i.y}),n.push({x:i.x+i.radius/2,y:i.y}),n.push({x:i.x-i.radius/2,y:i.y}),n.push({x:i.x,y:i.y+i.radius/2}),n.push({x:i.x,y:i.y-i.radius/2})}var a=n[0],o=Ir(n[0],t,e);for(r=1;r<n.length;++r){var u=Ir(n[r],t,e);u>=o&&(a=n[r],o=u)}var s=Al(function(d){return-1*Ir({x:d[0],y:d[1]},t,e)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,l={x:s[0],y:s[1]},c=!0;for(r=0;r<t.length;++r)if(Vt(l,t[r])>t[r].radius){c=!1;break}for(r=0;r<e.length;++r)if(Vt(l,e[r])<e[r].radius){c=!1;break}if(!c)if(t.length==1)l={x:t[0].x,y:t[0].y};else{var f={};xi(t,f),f.arcs.length===0?l={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?l={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:e.length?l=Il(t,[]):l=El(f.arcs.map(function(d){return d.p1}))}return l}function Jy(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var a=t[n[i]],o=i+1;o<n.length;++o){var u=t[n[o]],s=Vt(a,u);s+u.radius<=a.radius+1e-10?e[n[o]].push(n[i]):s+a.radius<=u.radius+1e-10&&e[n[i]].push(n[o])}return e}function t0(t,e){for(var n={},r=Jy(t),i=0;i<e.length;++i){for(var a=e[i].sets,o={},u={},s=0;s<a.length;++s){o[a[s]]=!0;for(var l=r[a[s]],c=0;c<l.length;++c)u[l[c]]=!0}var f=[],d=[];for(var h in t)h in o?f.push(t[h]):h in u||d.push(t[h]);var v=Il(f,d);n[a]=v,v.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}function e0(t,e,n){var r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function n0(t){var e={};xi(t,e);var n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){var r=n[0].circle;return e0(r.x,r.y,r.radius)}else{for(var i=[`
M`,n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],u=o.circle.radius,s=o.width>u;i.push(`
A`,u,u,0,s?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}function r0(t,e){e=e||{},e.maxIterations=e.maxIterations||500;var n=e.initialLayout||l0,r=e.lossFunction||bi;t=i0(t);var i=n(t,e),a=[],o=[],u;for(u in i)i.hasOwnProperty(u)&&(a.push(i[u].x),a.push(i[u].y),o.push(u));for(var s=Al(function(f){for(var d={},h=0;h<o.length;++h){var v=o[h];d[v]={x:f[2*h],y:f[2*h+1],radius:i[v].radius}}return r(d,t)},a,e),l=s.x,c=0;c<o.length;++c)u=o[c],i[u].x=l[2*c],i[u].y=l[2*c+1];return i}var Tl=1e-10;function Ur(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+Tl?Math.abs(t-e):Yy(function(r){return Dl(t,e,r)-n},0,t+e)}function i0(t){t=t.slice();var e=[],n={},r,i,a,o;for(r=0;r<t.length;++r){var u=t[r];u.sets.length==1?e.push(u.sets[0]):u.sets.length==2&&(a=u.sets[0],o=u.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(e.sort(function(s,l){return s>l?1:-1}),r=0;r<e.length;++r)for(a=e[r],i=r+1;i<e.length;++i)o=e[i],[a,o]in n||t.push({sets:[a,o],size:0});return t}function a0(t,e,n){var r=ma(e.length,e.length),i=ma(e.length,e.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){var o=n[a.sets[0]],u=n[a.sets[1]],s=Math.sqrt(e[o].size/Math.PI),l=Math.sqrt(e[u].size/Math.PI),c=Ur(s,l,a.size);r[o][u]=r[u][o]=c;var f=0;a.size+1e-10>=Math.min(e[o].size,e[u].size)?f=1:a.size<=1e-10&&(f=-1),i[o][u]=i[u][o]=f}),{distances:r,constraints:i}}function o0(t,e,n,r){var i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a)for(var o=t[2*a],u=t[2*a+1],s=a+1;s<n.length;++s){var l=t[2*s],c=t[2*s+1],f=n[a][s],d=r[a][s],h=(l-o)*(l-o)+(c-u)*(c-u),v=Math.sqrt(h),p=h-f*f;d>0&&v<=f||d<0&&v>=f||(i+=2*p*p,e[2*a]+=4*p*(o-l),e[2*a+1]+=4*p*(u-c),e[2*s]+=4*p*(l-o),e[2*s+1]+=4*p*(c-u))}return i}function l0(t,e){var n=u0(t,e),r=e.lossFunction||bi;if(t.length>=8){var i=s0(t,e),a=r(i,t),o=r(n,t);a+1e-8<o&&(n=i)}return n}function s0(t,e){e=e||{};var n=e.restarts||10,r=[],i={},a;for(a=0;a<t.length;++a){var o=t[a];o.sets.length==1&&(i[o.sets[0]]=r.length,r.push(o))}var u=a0(t,r,i),s=u.distances,l=u.constraints,c=Wr(s.map(Wr))/s.length;s=s.map(function(x){return x.map(function(w){return w/c})});var f=function(x,w){return o0(x,w,s,l)},d,h;for(a=0;a<n;++a){var v=Vr(s.length*2).map(Math.random);h=Zy(f,v,e),(!d||h.fx<d.fx)&&(d=h)}var p=d.x,y={};for(a=0;a<r.length;++a){var g=r[a];y[g.sets[0]]={x:p[2*a]*c,y:p[2*a+1]*c,radius:Math.sqrt(g.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)Br(e.history[a].x,c);return y}function u0(t,e){for(var n=e&&e.lossFunction?e.lossFunction:bi,r={},i={},a,o=0;o<t.length;++o){var u=t[o];u.sets.length==1&&(a=u.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:u.size,radius:Math.sqrt(u.size/Math.PI)},i[a]=[])}t=t.filter(function(_){return _.sets.length==2});for(var o=0;o<t.length;++o){var s=t[o],l=s.hasOwnProperty("weight")?s.weight:1,c=s.sets[0],f=s.sets[1];s.size+Tl>=Math.min(r[c].size,r[f].size)&&(l=0),i[c].push({set:f,size:s.size,weight:l}),i[f].push({set:c,size:s.size,weight:l})}var d=[];for(a in i)if(i.hasOwnProperty(a)){for(var h=0,o=0;o<i[a].length;++o)h+=i[a][o].size*i[a][o].weight;d.push({set:a,size:h})}function v(_,I){return I.size-_.size}d.sort(v);var p={};function y(_){return _.set in p}function g(_,I){r[I].x=_.x,r[I].y=_.y,p[I]=!0}g({x:0,y:0},d[0].set);for(var o=1;o<d.length;++o){var x=d[o].set,w=i[x].filter(y);if(a=r[x],w.sort(v),w.length===0)throw"ERROR: missing pairwise overlap information";for(var b=[],A=0;A<w.length;++A){var D=r[w[A].set],T=Ur(a.radius,D.radius,w[A].size);b.push({x:D.x+T,y:D.y}),b.push({x:D.x-T,y:D.y}),b.push({y:D.y+T,x:D.x}),b.push({y:D.y-T,x:D.x});for(var O=A+1;O<w.length;++O)for(var C=r[w[O].set],M=Ur(a.radius,C.radius,w[O].size),E=kl({x:D.x,y:D.y,radius:T},{x:C.x,y:C.y,radius:M}),L=0;L<E.length;++L)b.push(E[L])}for(var G=1e50,Z=b[0],A=0;A<b.length;++A){r[x].x=b[A].x,r[x].y=b[A].y;var tt=n(r,t);tt<G&&(G=tt,Z=b[A])}g(Z,x)}return r}function bi(t,e){var n=0;function r(c){return c.map(function(f){return t[f]})}for(var i=0;i<e.length;++i){var a=e[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var u=t[a.sets[0]],s=t[a.sets[1]];o=Dl(u.radius,s.radius,Vt(u,s))}else o=xi(r(a.sets));var l=a.hasOwnProperty("weight")?a.weight:1;n+=l*(o-a.size)*(o-a.size)}}return n}function c0(t){var e=function(n){var r=Math.max.apply(null,t.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function f0(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var u=c0(i),s=u.xRange,l=u.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;for(var c=e/(s.max-s.min),f=n/(l.max-l.min),d=Math.min(f,c),h=(e-(s.max-s.min)*d)/2,v=(n-(l.max-l.min)*d)/2,p={},y=0;y<i.length;++y){var g=i[y];p[a[y]]={radius:d*g.radius,x:r+h+(g.x-s.min)*d,y:r+v+(g.y-l.min)*d}}return p}var d0=ka(function(t,e,n,r){var i=new Map,a=t.length;return e.forEach(function(o,u){if(o[r].length===1)i.set(o[ee],t[(u+a)%a]);else{var s=o[r].map(function(l){return i.get(l)});i.set(o[ee],s.slice(1).reduce(function(l,c){return Xy(l,c,n)},s[0]))}}),i},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)});function h0(t,e,n,r){r===void 0&&(r=0);var i=t.data,a=t.setsField,o=t.sizeField;if(i.length===0)return ne(Wt.WARN,!1,"warn: %s","数据不能为空"),[];var u=i.map(function(f){var d;return m(m({},f),(d={sets:f[a]||[],size:f[o]},d[Nr]="",d[ee]="",d))});u.sort(function(f,d){return f.sets.length-d.sets.length});var s=r0(u),l=f0(s,e,n,r),c=t0(l,u);return u.forEach(function(f){var d=f.sets,h=d.join(",");f[ee]=h;var v=d.map(function(g){return l[g]}),p=n0(v);/[zZ]$/.test(p)||(p+=" Z"),f[Nr]=p;var y=c[h]||{x:0,y:0};qt(f,y)}),u}function v0(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}var p0=40;function Ol(t,e,n){var r=t.chart,i=t.options,a=i.blendMode,o=i.setsField,u=r.getTheme(),s=u.colors10,l=u.colors20,c=n;it(c)||(c=e.filter(function(d){return d[o].length===1}).length<=10?s:l);var f=d0(c,e,a,o);return function(d){return f.get(d)||c[0]}}function g0(t,e){var n=t.options,r=n.color;if(typeof r!="function"){var i=typeof r=="string"?[r]:r,a=Ol(t,e,i);return function(o){return a(o[ee])}}return r}function y0(t){var e=t.chart,n=t.options,r=n.legend,i=n.appendPadding,a=n.padding,o=se(i);return r!==!1&&(o=Kn(i,k(r,"position"),p0)),e.appendPadding=Kr([o,a]),t}function m0(t){var e=t.options,n=e.data;n||(ne(Wt.WARN,!1,"warn: %s","数据不能为空"),n=[]);var r=n.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=n.filter(function(a){var o=a.sets;return v0(r,o)});return jr(i,n)||ne(Wt.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Yr({},t,{options:{data:i}})}function x0(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=se(e.appendPadding),u=o[0],s=o[1],l=o[2],c=o[3],f={offsetX:c,offsetY:u},d=e.viewBBox,h=d.width,v=d.height,p=h0(n,Math.max(h-(s+c),0),Math.max(v-(u+l),0),0);e.data(p);var y=ni(S({},t,{options:{xField:"x",yField:"y",sizeField:a,seriesField:ee,rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext,g=y.geometry;g.customInfo(f);var x=g0(t,p);return typeof x=="function"&&g.color(ee,function(w){var b=p.find(function(D){return D[ee]===w}),A=Ol(t,p)(w);return x(b,A)}),t}function b0(t){var e=t.chart,n=t.options,r=n.label,i=se(e.appendPadding),a=i[0],o=i[3],u={offsetX:o,offsetY:a},s=bt(e,"schema");if(!r)s.label(!1);else{var l=r.callback,c=St(r,["callback"]);s.label({fields:["id"],callback:l,cfg:Yr({},mt(c),{type:"venn",customLabelInfo:u})})}return t}function F0(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend(ee,r),e.legend(i,!1),t}function w0(t){var e=t.chart;return e.axis(!1),t}function S0(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};ot(S({},t,{options:{interactions:r.map(function(a){return m(m({},a),{type:i[a.type]||a.type})})}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function A0(t){return V(y0,J,m0,x0,b0,ct({}),F0,w0,gt,S0,rt)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return Py},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return A0},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(q);var Pt="x",me="violinY",_0="violinSize",Ml="minMax",$l="quantile",Pl="median",Fi="violin_view",D0="min_max_view",k0="quantile_view",E0="median_view",I0=S({},q.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),qr={},T0={get exports(){return qr},set exports(t){qr=t}},Hr={},O0={get exports(){return Hr},set exports(t){Hr=t}};(function(t){var e=t.exports;t.exports.isNumber=function(n){return typeof n=="number"},t.exports.findMin=function(n){if(n.length===0)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r},t.exports.findMax=function(n){if(n.length===0)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r},t.exports.findMinMulti=function(n){for(var r=e.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,e.findMin(n[i]));return r},t.exports.findMaxMulti=function(n){for(var r=e.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,e.findMax(n[i]));return r},t.exports.inside=function(n,r,i){return n<=i&&i<=r}})(O0);(function(t){var e=50,n=2,r=Math.log(2),i=t.exports,a=Hr;function o(s){return 1-Math.abs(s)}t.exports.getUnifiedMinMax=function(s,l){return i.getUnifiedMinMaxMulti([s],l)},t.exports.getUnifiedMinMaxMulti=function(s,l){l=l||{};var c=!1,f=!1,d=a.isNumber(l.width)?l.width:n,h=a.isNumber(l.size)?l.size:e,v=a.isNumber(l.min)?l.min:(c=!0,a.findMinMulti(s)),p=a.isNumber(l.max)?l.max:(f=!0,a.findMaxMulti(s)),y=p-v,g=y/(h-1);return c&&(v=v-2*d*g),f&&(p=p+2*d*g),{min:v,max:p}},t.exports.create=function(s,l){if(l=l||{},!s||s.length===0)return[];var c=a.isNumber(l.size)?l.size:e,f=a.isNumber(l.width)?l.width:n,d=i.getUnifiedMinMax(s,{size:c,width:f,min:l.min,max:l.max}),h=d.min,v=d.max,p=v-h,y=p/(c-1);if(p===0)return[{x:h,y:1}];for(var g=[],x=0;x<c;x++)g.push({x:h+x*y,y:0});var w=function(E){return Math.floor((E-h)/y)},b=u(o,f),A=b[f],D=b[f-1]-b[f-2],T=0;s.forEach(function(E){var L=w(E);if(!(L+f<0||L-f>=g.length)){var G=Math.max(L-f,0),Z=L,tt=Math.min(L+f,g.length-1),_=G-(L-f),I=L+f-tt,N=b[-f-1+_]||0,R=b[-f-1+I]||0,$=A/(A-N-R);_>0&&(T+=$*(_-1)*D);var z=Math.max(0,L-f+1);a.inside(0,g.length-1,z)&&(g[z].y+=$*1*D),a.inside(0,g.length-1,Z+1)&&(g[Z+1].y-=$*2*D),a.inside(0,g.length-1,tt+1)&&(g[tt+1].y+=$*1*D)}});var O=T,C=0,M=0;return g.forEach(function(E){C+=E.y,O+=C,E.y=O,M+=O}),M>0&&g.forEach(function(E){E.y/=M}),g};function u(s,l){for(var c={},f=0,d=-l;d<=l;d++)f+=s(d/l),c[d]=f;return c}t.exports.getExpectedValueFromPdf=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(c){l+=c.x*c.y}),l}},t.exports.getXWithLeftTailArea=function(s,l){if(!(!s||s.length===0)){for(var c=0,f=0,d=0;d<s.length&&(f=d,c+=s[d].y,!(c>=l));d++);return s[f].x}},t.exports.getPerplexity=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(c){var f=Math.log(c.y);isFinite(f)&&(l+=c.y*f)}),l=-l/r,Math.pow(2,l)}}})(T0);const M0=qr;function xa(t,e){var n=t.length*e;if(t.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?t[t.length-1]:e===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Xe(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function $n(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,a=e-n+1,o=Math.log(i),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(i-u)/i);a-i/2<0&&(s*=-1);var l=Math.max(n,Math.floor(e-a*u/i+s)),c=Math.min(r,Math.floor(e+(i-a)*u/i+s));$n(t,e,l,c)}var f=t[e],d=n,h=r;for(Xe(t,n,e),t[r]>f&&Xe(t,n,r);d<h;){for(Xe(t,d,h),d++,h--;t[d]<f;)d++;for(;t[h]>f;)h--}t[n]===f?Xe(t,n,h):(h++,Xe(t,h,r)),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function Ye(t,e){var n=t.slice();if(Array.isArray(e)){$0(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=xa(n,e[i]);return r}else{var a=Cl(n.length,e);return Ll(n,a,0,n.length-1),xa(n,e)}}function Ll(t,e,n,r){e%1===0?$n(t,e,n,r):(e=Math.floor(e),$n(t,e,n,r),$n(t,e+1,e+1,r))}function $0(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(Cl(t.length,e[r]));n.push(t.length-1),n.sort(P0);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var u=Math.floor((o+a)/2);Ll(t,n[u],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,u,u,a)}}}function P0(t,e){return t-e}function Cl(t,e){var n=t*e;return e===1?t-1:e===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}var ba=function(t){return{low:Ti(t),high:Oi(t),q1:Ye(t,.25),q3:Ye(t,.75),median:Ye(t,[.5]),minMax:[Ti(t),Oi(t)],quantile:[Ye(t,.25),Ye(t,.75)]}},Fa=function(t,e){var n=M0.create(t,e);return{violinSize:n.map(function(r){return r.y}),violinY:n.map(function(r){return r.x})}},Rl=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,a=t.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var u=Qe(i,e);return Object.keys(u).map(function(c){var f=u[c],d=f.map(function(h){return h[n]});return m(m({x:c},Fa(d,o)),ba(d))})}var s=[],l=Qe(i,r);return Object.keys(l).forEach(function(c){var f=Qe(l[c],e);return Object.keys(f).forEach(function(d){var h,v=f[d],p=v.map(function(y){return y[n]});s.push(m(m((h={x:d},h[r]=c,h),Fa(p,o)),ba(p)))})}),s},Pn=["low","high","q1","q3","median"],Ln=[{type:"dodge",marginRatio:1/32}];function L0(t){var e=t.chart,n=t.options;return e.data(Rl(n)),t}function C0(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.shape,o=a===void 0?"violin":a,u=n.violinStyle,s=n.tooltip,l=n.state,c=e.createView({id:Fi});return dc({chart:c,options:{xField:Pt,yField:me,seriesField:r||Pt,sizeField:_0,tooltip:m({fields:Pn},s),violin:{style:u,color:i,shape:o},state:l}}),c.geometries[0].adjust(Ln),t}function R0(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(o===!1)return t;var u=e.createView({id:D0});Ft({chart:u,options:{xField:Pt,yField:Ml,seriesField:r||Pt,tooltip:m({fields:Pn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),u.geometries[0].adjust(Ln);var s=e.createView({id:k0});Ft({chart:s,options:{xField:Pt,yField:$l,seriesField:r||Pt,tooltip:m({fields:Pn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),s.geometries[0].adjust(Ln);var l=e.createView({id:E0});return Ot({chart:l,options:{xField:Pt,yField:Pl,seriesField:r||Pt,tooltip:m({fields:Pn},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),l.geometries[0].adjust(Ln),s.axis(!1),u.axis(!1),l.axis(!1),l.legend(!1),u.legend(!1),s.legend(!1),t}function z0(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.xAxis,o=r.yAxis,u={},s=S(u,i,(e={},e[Pt]=m(m({sync:!0},nt(a,At)),{type:"cat"}),e[me]=m({sync:!0},nt(o,At)),e[Ml]=m({sync:me},nt(o,At)),e[$l]=m({sync:me},nt(o,At)),e[Pl]=m({sync:me},nt(o,At)),e));return n.scale(s),t}function N0(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=H(e,Fi);return r===!1?a.axis(Pt,!1):a.axis(Pt,r),i===!1?a.axis(me,!1):a.axis(me,i),e.axis(!1),t}function V0(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,a=n.shape;if(r===!1)e.legend(!1);else{var o=i||Pt,u=Zn(r,["selected"]);(!a||!a.startsWith("hollow"))&&(k(u,["marker","style","lineWidth"])||Ss(u,["marker","style","lineWidth"],0)),e.legend(o,u),k(r,"selected")&&P(e.views,function(s){return s.legend(o,r)})}return t}function W0(t){var e=t.chart,n=H(e,Fi);return ut()(m(m({},t),{chart:n})),t}function B0(t){var e=t.chart,n=t.options,r=n.animation;return P(e.views,function(i){pn(i,r)}),t}function G0(t){return V(J,L0,C0,R0,z0,gt,N0,V0,ot,W0,B0)(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return I0},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(Rl(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return G0},e})(q);var Ct="$$yField$$",hr="$$diffField$$",wi="$$absoluteField$$",Xr="$$isTotal$$",U0={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function q0(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=n===0?"M":"L";e.push([i,r.x,r.y])}}var a=t[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}function H0(t){return S({},t.defaultStyle,t.style,{fill:t.color})}ve("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,a=e.addGroup(),o=this.parsePath(q0(r)),u=H0(t);a.addShape("path",{attrs:m(m({},u),{path:o})});var s=k(n,"leaderLine");if(s&&i){var l=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(l[1]=["L",i[1].x,i[1].y]),l=this.parsePath(l),a.addShape("path",{attrs:m({path:l},s.style||{})})}return a}});function X0(t,e,n,r,i){var a,o=[];if(_t(t,function(s,l){var c;ne(Wt.WARN,dt(l[n]),l[n]+" is not a valid number");var f=As(l[n])?null:l[n];return o.push(m(m({},l),(c={},c[r]=[s,s+f],c))),s+f},0),o.length&&i){var u=k(o,[[t.length-1],r,[1]]);o.push((a={},a[e]=i.label,a[n]=u,a[r]=[0,u],a))}return o}function zl(t,e,n,r){var i=X0(t,e,n,Ct,r);return i.map(function(a,o){var u;return Ae(a)?m(m({},a),(u={},u[wi]=a[Ct][1],u[hr]=a[Ct][1]-a[Ct][0],u[Xr]=o===t.length,u)):a})}function Y0(t){var e=t.options,n=e.locale,r=e.total,i=tr(n).get(["waterfall","total"]);return r&&typeof r.label!="string"&&i&&(t.options.total.label=i),t}function j0(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.total,u=n.leaderLine,s=n.columnWidthRatio,l=n.waterfallStyle,c=n.risingFill,f=n.fallingFill,d=n.color;e.data(zl(r,i,a,o));var h=d||function(g){return k(g,[Xr])?k(o,["style","fill"],""):k(g,[Ct,1])-k(g,[Ct,0])>0?c:f},v=S({},t,{options:{xField:i,yField:Ct,seriesField:i,rawFields:[a,hr,Xr,Ct],widthRatio:s,interval:{style:l,shape:"waterfall",color:h}}}),p=Ft(v).ext,y=p.geometry;return y.customInfo({leaderLine:u}),t}function Z0(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,s=r.meta,l=S({},{alias:u},k(s,u));return V(ct((e={},e[o]=i,e[u]=a,e[Ct]=a,e),S({},s,(n={},n[Ct]=l,n[hr]=l,n[wi]=l,n))))(t)}function K0(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?(e.axis(o,!1),e.axis(Ct,!1)):(e.axis(o,i),e.axis(Ct,i)),t}function Q0(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,u=n.locale,s=tr(u);if(r===!1)e.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:S({},{r:5},k(i,"style"))}}),e.legend(S({},{custom:!0,position:"top",items:l},r)),e.removeInteraction("legend-filter")}return t}function J0(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,a=n.xField,o=bt(e,"interval");if(!r)o.label(!1);else{var u=r.callback,s=St(r,["callback"]);o.label({fields:i==="absolute"?[wi,a]:[hr,a],callback:u,cfg:mt(s)})}return t}function tm(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,a=n.yField;if(r!==!1){e.tooltip(m({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=e.geometries[0];r?.formatter?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else e.tooltip(!1);return t}function em(t){return V(Y0,J,j0,Z0,K0,Q0,tm,J0,pe,ot,rt,ut())(t)}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return U0},e.prototype.changeData=function(n){var r=this.options,i=r.xField,a=r.yField,o=r.total;this.updateOption({data:n}),this.chart.changeData(zl(n,i,a,o))},e.prototype.getSchemaAdaptor=function(){return em},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(q);var Si="color",nm=S({},q.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",Si],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),rm={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function im(t,e){return e=qt({},rm,e),am(t,e)}function am(t,e){var n=mm();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(s){Rt(e[s])||n[s](e[s])}),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start(),i=r._tags;i.forEach(function(s){s.x+=e.size[0]/2,s.y+=e.size[1]/2});var a=e.size,o=a[0],u=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:u,opacity:0}),i}var Tr=Math.PI/180,Ke=1<<11>>5,Cn=1<<11;function om(t){return t.text}function lm(){return"serif"}function wa(){return"normal"}function sm(t){return t.value}function um(){return~~(Math.random()*2)*90}function cm(){return 1}function fm(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(Ke<<5)/a,Cn/a);var o=0,u=0,s=0,l=n.length;for(--r;++r<l;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var c=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*Tr),h=Math.cos(e.rotate*Tr),v=c*h,p=c*d,y=f*h,g=f*d;c=Math.max(Math.abs(v+g),Math.abs(v-g))+31>>5<<5,f=~~Math.max(Math.abs(p+y),Math.abs(p-y))}else c=c+31>>5<<5;if(f>s&&(s=f),o+c>=Ke<<5&&(o=0,u+=s,s=0),u+f>=Cn)break;i.translate((o+(c>>1))/a,(u+(f>>1))/a),e.rotate&&i.rotate(e.rotate*Tr),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=f,e.xoff=o,e.yoff=u,e.x1=c>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(Ke<<5)/a,Cn/a).data,w=[];--r>=0;)if(e=n[r],!!e.hasText){for(var c=e.width,b=c>>5,f=e.y1-e.y0,A=0;A<f*b;A++)w[A]=0;if(o=e.xoff,o==null)return;u=e.yoff;for(var D=0,T=-1,O=0;O<f;O++){for(var A=0;A<c;A++){var C=b*O+(A>>5),M=x[(u+O)*(Ke<<5)+(o+A)<<2]?1<<31-A%32:0;w[C]|=M,D|=M}D?T=O:(e.y0++,f--,O--,u++)}e.y1=e.y0+T,e.sprite=w.slice(0,(e.y1-e.y0)*b)}}}function dm(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,u=32-o,s=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),c,f=0;f<s;f++){c=0;for(var d=0;d<=i;d++)if((c<<u|(d<i?(c=r[f*i+d])>>>o:0))&e[l+d])return!0;l+=n}return!1}function hm(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function vm(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Nl(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function pm(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function Sa(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function gm(){return document.createElement("canvas")}function Bt(t){return ft(t)?t:function(){return t}}var ym={archimedean:Nl,rectangular:pm};function mm(){var t=[256,256],e=lm,n=sm,r=wa,i=um,a=cm,o=Nl,u=Math.random,s=[],l=1/0,c=om,f=wa,d=gm,h={};h.start=function(){var y=t[0],g=t[1],x=v(d()),w=h.board?h.board:Sa((t[0]>>5)*t[1]),b=s.length,A=[],D=s.map(function(M,E,L){return M.text=c.call(this,M,E,L),M.font=e.call(this,M,E,L),M.style=f.call(this,M,E,L),M.weight=r.call(this,M,E,L),M.rotate=i.call(this,M,E,L),M.size=~~n.call(this,M,E,L),M.padding=a.call(this,M,E,L),M}).sort(function(M,E){return E.size-M.size}),T=-1,O=h.board?[{x:0,y:0},{x:y,y:g}]:null;C();function C(){for(var M=Date.now();Date.now()-M<l&&++T<b;){var E=D[T];E.x=y*(u()+.5)>>1,E.y=g*(u()+.5)>>1,fm(x,E,D,T),E.hasText&&p(w,E,O)&&(A.push(E),O?h.hasImage||hm(O,E):O=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=t[0]>>1,E.y-=t[1]>>1)}h._tags=A,h._bounds=O}return h};function v(y){y.width=y.height=1;var g=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Ke<<5)/g,y.height=Cn/g;var x=y.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:g}}function p(y,g,x){for(var w=g.x,b=g.y,A=Math.sqrt(t[0]*t[0]+t[1]*t[1]),D=o(t),T=u()<.5?1:-1,O,C=-T,M,E;(O=D(C+=T))&&(M=~~O[0],E=~~O[1],!(Math.min(Math.abs(M),Math.abs(E))>=A));)if(g.x=w+M,g.y=b+E,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!x||!dm(g,y,t[0]))&&(!x||vm(g,x))){for(var L=g.sprite,G=g.width>>5,Z=t[0]>>5,tt=g.x-(G<<4),_=tt&127,I=32-_,N=g.y1-g.y0,R=void 0,$=(g.y+g.y0)*Z+(tt>>5),z=0;z<N;z++){R=0;for(var K=0;K<=G;K++)y[$+K]|=R<<I|(K<G?(R=L[z*G+K])>>>_:0);$+=Z}return delete g.sprite,!0}return!1}return h.createMask=function(y){var g=document.createElement("canvas"),x=t[0],w=t[1];if(!(!x||!w)){var b=x>>5,A=Sa((x>>5)*w);g.width=x,g.height=w;var D=g.getContext("2d");D.drawImage(y,0,0,y.width,y.height,0,0,x,w);for(var T=D.getImageData(0,0,x,w).data,O=0;O<w;O++)for(var C=0;C<x;C++){var M=b*O+(C>>5),E=O*x+C<<2,L=T[E]>=250&&T[E+1]>=250&&T[E+2]>=250,G=L?1<<31-C%32:0;A[M]|=G}h.board=A,h.hasImage=!0}},h.timeInterval=function(y){l=y??1/0},h.words=function(y){s=y},h.size=function(y){t=[+y[0],+y[1]]},h.font=function(y){e=Bt(y)},h.fontWeight=function(y){r=Bt(y)},h.rotate=function(y){i=Bt(y)},h.spiral=function(y){o=ym[y]||y},h.fontSize=function(y){n=Bt(y)},h.padding=function(y){a=Bt(y)},h.random=function(y){u=Bt(y)},h}function Vl(t){var e=t.options,n=t.chart,r=n,i=r.width,a=r.height,o=r.padding,u=r.appendPadding,s=r.ele,l=e.data,c=e.imageMask,f=e.wordField,d=e.weightField,h=e.colorField,v=e.wordStyle,p=e.timeInterval,y=e.random,g=e.spiral,x=e.autoFit,w=x===void 0?!0:x,b=e.placementStrategy;if(!l||!l.length)return[];var A=v.fontFamily,D=v.fontWeight,T=v.padding,O=v.fontSize,C=Sm(l,d),M=[Dm(C),km(C)],E=l.map(function(Z){return{text:Z[f],value:Z[d],color:Z[h],datum:Z}}),L={imageMask:c,font:A,fontSize:wm(O,M),fontWeight:D,size:xm({width:i,height:a,padding:o,appendPadding:u,autoFit:w,container:s}),padding:T,timeInterval:p,random:y,spiral:g,rotate:Am(e)};if(ft(b)){var G=E.map(function(Z,tt,_){return m(m(m({},Z),{hasText:!!Z.text,font:Bt(L.font)(Z,tt,_),weight:Bt(L.fontWeight)(Z,tt,_),rotate:Bt(L.rotate)(Z,tt,_),size:Bt(L.fontSize)(Z,tt,_),style:"normal"}),b.call(n,Z,tt,_))});return G.push({text:"",value:0,x:0,y:0,opacity:0}),G.push({text:"",value:0,x:L.size[0],y:L.size[1],opacity:0}),G}return im(E,L)}function xm(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,a=t.padding,o=t.appendPadding;if(i){var u=Mr(r);e=u.width,n=u.height}e=e||400,n=n||400;var s=bm({padding:a,appendPadding:o}),l=s[0],c=s[1],f=s[2],d=s[3],h=[e-(d+c),n-(l+f)];return h}function bm(t){var e=se(t.padding),n=se(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],a=e[2]+n[2],o=e[3]+n[3];return[r,i,a,o]}function Fm(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement){e(t);return}if(wt(t)){var r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=function(){e(r)},r.onerror=function(){ne(Wt.ERROR,!1,"image %s load failed !!!",t),n()};return}ne(Wt.WARN,t===void 0,"The type of imageMask option must be String or HTMLImageElement."),n()})}function wm(t,e){if(ft(t))return t;if(it(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],a=e[1];return a===i?function(){return(r+n)/2}:function(u){var s=u.value;return(r-n)/(a-i)*(s-i)+n}}return function(){return t}}function Sm(t,e){return t.map(function(n){return n[e]}).filter(function(n){return typeof n=="number"&&!isNaN(n)})}function Am(t){var e=_m(t),n=e.rotation,r=e.rotationSteps;if(!it(n))return n;var i=n[0],a=n[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function _m(t){var e=t.wordStyle.rotationSteps;return e<1&&(ne(Wt.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1),{rotation:t.wordStyle.rotation,rotationSteps:e}}function Dm(t){return Math.min.apply(Math,t)}function km(t){return Math.max.apply(Math,t)}function Em(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,a=Vl(t);e.data(a);var o=S({},t,{options:{xField:"x",yField:"y",seriesField:r&&Si,rawFields:ft(i)&&st(k(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}}),u=Ot(o).ext;return u.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function Im(t){return V(ct({x:{nice:!1},y:{nice:!1}}))(t)}function Tm(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return r===!1?e.legend(!1):i&&e.legend(Si,r),t}function Om(t){V(Em,Im,gt,Tm,ot,rt,J,pe)(t)}ve("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:m(m({},Mm(t)),{x:n,y:r})}),a=t.data.rotate;return typeof a=="number"&&Dt.rotate(i,a*Math.PI/180),i}});function Mm(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(t){U(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="word-cloud",n}return e.getDefaultOptions=function(){return nm},e.prototype.changeData=function(n){this.updateOption({data:n}),this.options.imageMask?this.render():this.chart.changeData(Vl({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var n=this;return new Promise(function(r){var i=n.options.imageMask;if(!i){t.prototype.render.call(n),r();return}var a=function(o){n.options=m(m({},n.options),{imageMask:o||null}),t.prototype.render.call(n),r()};Fm(i).then(a).catch(a)})},e.prototype.getSchemaAdaptor=function(){return Om},e.prototype.triggerResize=function(){var n=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){t.prototype.triggerResize.call(n)}))},e})(q);(function(t){U(e,t);function e(n,r,i,a){var o=t.call(this,n,S({},a,r))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor},e})(q);Ua("en-US",uc);Ua("zh-CN",cc);const $m=F("hr",null,null,-1),Pm={class:"flex justify-center"},Lm=F("span",null,"In the last",-1),Cm=["value","selected"],Rm=F("span",null,"days",-1),zm=F("hr",null,null,-1),Nm=F("h1",{class:"text-xl text-gray-700 font-semibold"}," Process peformance for samples in average days ",-1),Vm=F("hr",{class:"my-2"},null,-1),Wm={key:0,class:"text-start my-4 w-100"},Bm={class:"flex flex-wrap justify-start"},Gm={class:"mr-4 items-center content-center"},Um={class:"bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},qm=F("div",{class:"font-semibold text-gray-400 text-l"},"received to published",-1),Hm={class:"mr-4 font-bold text-gray-600 text-xl"},Xm=F("div",{id:"rtp-graph"},[F("div",{id:"process-rtp",class:"mt-3"})],-1),Ym={class:"mr-4 items-center content-center"},jm={class:"bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},Zm=F("div",{class:"font-semibold text-gray-400 text-l"},"received to submitted",-1),Km={class:"mr-4 font-bold text-gray-600 text-xl"},Qm=F("div",{id:"rts-graph"},[F("div",{id:"process-rts",class:"mt-3"})],-1),Jm={class:"mr-4 items-center content-center"},tx={class:"bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},ex=F("div",{class:"font-semibold text-gray-400 text-l"},"submitted to verified",-1),nx={class:"mr-4 font-bold text-gray-600 text-xl"},rx=F("div",{id:"stv-graph"},[F("div",{id:"process-stv",class:"mt-3"})],-1),ix={class:"mr-4 items-center content-center"},ax={class:"bg-white shadow rounded-sm px-6 pt-3 pb-5 border border-white mr-8 text-center"},ox=F("div",{class:"font-semibold text-gray-400 text-l"},"verified to published",-1),lx={class:"mr-4 font-bold text-gray-600 text-xl"},sx=F("div",{id:"vtp-graph"},[F("div",{id:"process-vtp",class:"mt-3"})],-1),ux={class:"mt-4 text-xl text-gray-700 font-semibold"},cx=F("span",null,"Process peformance by anayses service",-1),fx=["value","selected"],dx=F("hr",{class:"my-2"},null,-1),hx={key:1,class:"text-start my-4 w-100"},vx=F("div",{id:"ap-graphs"},[F("div",{id:"process-service",class:"mt-3"})],-1),px=de({__name:"Peformance",setup(t){const e=hn(),{dashboard:n}=vn(e);Re(()=>{e.getSampleProcessPeformance(),e.getAnalysisProcessPeformance()}),oe(()=>n.value.currentPeformancePeriod,(d,h)=>{f(),c(),e.getSampleProcessPeformance(),e.getAnalysisProcessPeformance()});const r=ae({}),i=ae({}),a=ae({}),o=ae({});oe(()=>n.value.peformanceStats.sample,(d,h)=>{d?.forEach(v=>{const p=[{item:"On-Time",count:v?.counts?.totalNotLate,percent:v?.counts?.totalNotLate/v?.counts?.totalSamples*100},{item:"Delayed",count:v?.counts?.totalLate,percent:v?.counts?.totalLate/v?.counts?.totalSamples*100}];switch(v?.process){case"received_to_published":r.value=v,l(p,"process-rtp");break;case"received_to_submitted":i.value=v,l(p,"process-rts");break;case"submitted_to_verified":a.value=v,l(p,"process-stv");break;case"verified_to_published":o.value=v,l(p,"process-vtp");break}})});const u=ae({});oe(()=>n.value.currentPeformance,(d,h)=>{c(),e.getAnalysisProcessPeformance()}),oe(()=>n.value.peformanceStats.analysis,(d,h)=>{u.value=d[0];const v=[];d[0]?.groups?.forEach(p=>{v.push({analysis:p?.service,value:p?.processAverage,total:p?.totalSamples})}),s(v,"process-service")});const s=(d,h)=>{new ro(h,{data:d,xField:"value",yField:"analysis",seriesField:"",meta:{analysis:{alias:"Analysis"},value:{alias:"process average in days"}},label:{position:"middle"},minBarWidth:5,maxBarWidth:20}).render()},l=(d,h)=>{const v=new en({container:h,autoFit:!0,height:150,width:300});v.data(d),v.scale("percent",{formatter:p=>(p=p*100+"%",p)}),v.coordinate("theta",{radius:.75,innerRadius:.6}),v.tooltip({showTitle:!1,showMarkers:!1,itemTpl:'<li class="g2-tooltip-list-item"><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),v.annotation(),v.interval().adjust("stack").position("percent").color("item").label("percent",p=>({content:y=>`${p*100}%`})).tooltip("item*percent",(p,y)=>(y=y*100+"%",{name:p,value:y})),v.interaction("element-active"),v.render()},c=()=>{document.getElementById("ap-graphs").innerHTML="",document.getElementById("ap-graphs").innerHTML='<div id="process-service" class="mt-3"></div>'},f=()=>{document.getElementById("rtp-graph").innerHTML="",document.getElementById("rtp-graph").innerHTML='<div id="process-rtp" class="mt-3"></div>',document.getElementById("rts-graph").innerHTML="",document.getElementById("rts-graph").innerHTML='<div id="process-rts" class="mt-3"></div>',document.getElementById("stv-graph").innerHTML="",document.getElementById("stv-graph").innerHTML='<div id="process-stv" class="mt-3"></div>',document.getElementById("vtp-graph").innerHTML="",document.getElementById("vtp-graph").innerHTML='<div id="process-vtp" class="mt-3"></div>'};return(d,h)=>(B(),Y(xt,null,[$m,F("section",Pm,[Lm,F("select",{name:"",id:"",class:"mx-4 p-1",onChange:h[0]||(h[0]=v=>X(e).setCurrentPeformancePeriod(v))},[(B(!0),Y(xt,null,Lt(X(n).peformancePeriods,v=>(B(),Y("option",{key:v,value:v,selected:v===X(n).currentPeformancePeriod},et(v),9,Cm))),128))],32),Rm]),zm,Nm,Vm,X(n).fetchingSampePeformanceStats?(B(),Y("div",Wm,[le(tn,{message:"fetching updated sample peformance stats ..."})])):yt("v-if",!0),F("div",Bm,[F("div",Gm,[F("div",Um,[qm,F("div",Hm,et(r.value?.counts?.processAverage??0)+" days ",1)]),Xm]),F("div",Ym,[F("div",jm,[Zm,F("div",Km,et(i.value?.counts?.processAverage??0)+" days ",1)]),Qm]),F("div",Jm,[F("div",tx,[ex,F("div",nx,et(a.value?.counts?.processAverage??0)+" days ",1)]),rx]),F("div",ix,[F("div",ax,[ox,F("div",lx,et(o.value?.counts?.processAverage??0)+" days ",1)]),sx])]),F("h1",ux,[cx,F("select",{name:"",id:"",class:"ml-8 p-1",onChange:h[1]||(h[1]=v=>X(e).setCurrentPeformance(v))},[(B(!0),Y(xt,null,Lt(X(n).performances,v=>(B(),Y("option",{key:v,value:v,selected:v===X(n).currentPeformance},et(v),9,fx))),128))],32)]),dx,X(n).fetchingAnalysisPeformanceStats?(B(),Y("div",hx,[le(tn,{message:"fetching analysis peformance stats ..."})])):yt("v-if",!0),vx],64))}}),gx=he(px,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Peformance.vue"]]),yx=de({name:"tab-tat",setup(){return{}}}),mx={class:"text-xl text-gray-700 font-semibold"};function xx(t,e,n,r,i,a){return B(),Y("h1",mx,"Turn Aroud Time Measures")}const bx=he(yx,[["render",xx],["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Tat.vue"]]),Fx={class:"overflow-x-auto mt-4"},wx={key:0,class:"align-middle inline-block min-w-full shadow overflow-hidden bg-white shadow-dashboard px-2 pt-1 rounded-bl-sm rounded-br-sm"},Sx={class:"min-w-full"},Ax=F("thead",null,[F("tr",null,[F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"},[F("input",{type:"checkbox"})]),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left leading-4 text-gray-800 tracking-wider"}," Report Type "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Generated By "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Date Generated "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Period Start "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Period End "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300 text-left text-sm leading-4 text-gray-800 tracking-wider"}," Status "),F("th",{class:"px-1 py-1 border-b-2 border-gray-300"})])],-1),_x={class:"bg-white"},Dx=F("td",null,[F("input",{type:"checkbox"})],-1),kx={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Ex={class:"text-sm leading-5 text-sky-800"},Ix={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Tx={class:"text-sm leading-5 text-sky-800"},Ox={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Mx={class:"text-sm leading-5 text-sky-800"},$x={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Px={class:"text-sm leading-5 text-sky-800"},Lx={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},Cx={class:"text-sm leading-5 text-sky-800"},Rx={class:"px-1 py-1 whitespace-no-wrap border-b border-gray-500"},zx={class:"text-sm leading-5 text-sky-800"},Nx={class:"px-1 py-1 whitespace-no-wrap text-right border-b border-gray-500 text-sm leading-5"},Vx=["onClick"],Wx=["onClick"],Bx={key:1,class:"py-4 pl-4 bg-white"},Gx=F("p",{class:"text-orange-600"},"There are no downloaded reports yet",-1),Ux=F("hr",null,null,-1),qx=F("p",{class:"italic"}," Once a download request has been done. Your reports will be appear here ",-1),Hx=[Gx,Ux,qx],Xx={class:"mt-4"},Yx={action:"post",class:"p-1"},jx={class:"grid grid-cols-3 gap-x-4 mb-4"},Zx={class:"block col-span-1 mb-2"},Kx=F("span",{class:"text-gray-700"},"Report Type",-1),Qx=F("option",{value:"line_listing",selected:""},"line listing",-1),Jx=[Qx],tb={class:"block col-span-1 mb-2"},eb=F("span",{class:"text-gray-700"},"Analyses",-1),nb=["value"],rb={class:"block col-span-1 mb-2"},ib=F("span",{class:"text-gray-700"},"States",-1),ab=F("option",{value:""},null,-1),ob=F("option",{value:"published"},"published",-1),lb=F("option",{value:"verified"},"verified",-1),sb=F("option",{value:"to_be_verified"},"to_be_verified",-1),ub=F("option",{value:"received"},"received",-1),cb=F("option",{value:"cancelled"},"cancelled",-1),fb=F("option",{value:"rejected"},"rejected",-1),db=F("option",{value:"invalidated"},"invalidated",-1),hb=F("option",{value:"due"},"due",-1),vb=[ab,ob,lb,sb,ub,cb,fb,db,hb],pb={class:"grid grid-cols-3 gap-x-4 mb-4"},gb={class:"block col-span-1 mb-2"},yb=F("span",{class:"text-gray-700"},"Period Date Criteria",-1),mb=F("option",{value:"created_at"},"Created Date",-1),xb=F("option",{value:"date_published"},"Published Date",-1),bb=F("option",{value:"date_submitted"},"Submission Date",-1),Fb=F("option",{value:"date_verified"},"Verified Date",-1),wb=F("option",{value:"date_cancelled"},"Cacellation Date",-1),Sb=F("option",{value:"date_invalidated"},"Invalidation Date",-1),Ab=[mb,xb,bb,Fb,wb,Sb],_b={class:"block col-span-1 mb-2"},Db=F("span",{class:"text-gray-700"},"Period Start",-1),kb={class:"block col-span-1 mb-2"},Eb=F("span",{class:"text-gray-700"},"Period End",-1),Ib=F("hr",null,null,-1),Tb=de({__name:"LineListing",setup(t){const e=Ul(),{reports:n,fetchReports:r,generateReport:i,deleteReport:a}=ql(),o=Aa({listingForm:{report_type:"",analyses_uids:[],sample_states:[],date_column:"",period_start:"",period_end:""}});Re(async()=>{e.fetchAnalysesServices({first:void 0,after:"",text:"",sortBy:["name"]}),await r()});const u=()=>i({...o.listingForm}),s=l=>{const c=document.createElement("a");c.download=l.report_type+"-"+l.crated_at,c.href=Hl+"/"+l.location,document.body.appendChild(c),c.click(),document.body.removeChild(c)};return(l,c)=>(B(),Y(xt,null,[le(Or,null,{title:Gt(()=>[zn("Downloaded Line Listing Reports")]),body:Gt(()=>[F("div",Fx,[X(n)?.length>0?(B(),Y("div",wx,[F("table",Sx,[Ax,F("tbody",_x,[(B(!0),Y(xt,null,Lt(X(n),f=>(B(),Y("tr",{key:f.uid},[Dx,F("td",kx,[F("div",Ex,et(f.report_type),1)]),F("td",Ix,[F("div",Tx,et(f?.created_by?.first_name)+" "+et(f?.created_by?.last_name),1)]),F("td",Ox,[F("div",Mx,et(f?.created_at),1)]),F("td",$x,[F("div",Px,et(f?.period_start),1)]),F("td",Lx,[F("div",Cx,et(f?.period_end),1)]),F("td",Rx,[F("div",zx,et(f?.status),1)]),F("td",Nx,[Et(F("button",{onClick:d=>s(f),class:"px-2 py-1 mr-2 border-sky-800 border text-sky-800rounded-smtransition duration-300 hover:bg-sky-800 hover:text-white focus:outline-none"}," Download ",8,Vx),[[Rn,f.status=="READY"]]),Et(F("button",{onClick:d=>X(a)(f),class:"px-2 py-1 mr-2 border-orange-600 border text-orange-600rounded-smtransition duration-300 hover:bg-orange-600 hover:text-white focus:outline-none"}," Delete ",8,Wx),[[Rn,f.status=="READY"]])])]))),128))])])])):(B(),Y("div",Bx,Hx))])]),_:1}),le(Or,null,{title:Gt(()=>[zn("Listing Report Request")]),body:Gt(()=>[F("div",Xx,[F("form",Yx,[F("div",jx,[F("label",Zx,[Kx,Et(F("select",{name:"report_type","onUpdate:modelValue":c[0]||(c[0]=f=>o.listingForm.report_type=f),class:"form-input mt-1 block w-full"},Jx,512),[[Fn,o.listingForm.report_type]])]),F("label",tb,[eb,Et(F("select",{name:"analyses_uids","onUpdate:modelValue":c[1]||(c[1]=f=>o.listingForm.analyses_uids=f),class:"form-input mt-1 block w-full",multiple:""},[(B(!0),Y(xt,null,Lt(X(e).analysesServices,f=>(B(),Y("option",{key:f.uid,value:f.uid},et(f.name),9,nb))),128))],512),[[Fn,o.listingForm.analyses_uids]])]),F("label",rb,[ib,Et(F("select",{name:"sample_states","onUpdate:modelValue":c[2]||(c[2]=f=>o.listingForm.sample_states=f),class:"form-input mt-1 block w-full",multiple:""},vb,512),[[Fn,o.listingForm.sample_states]])])]),F("div",pb,[F("label",gb,[yb,Et(F("select",{name:"date_column","onUpdate:modelValue":c[3]||(c[3]=f=>o.listingForm.date_column=f),class:"form-input mt-1 block w-full"},Ab,512),[[Fn,o.listingForm.date_column]])]),F("label",_b,[Db,Et(F("input",{name:"period_start",type:"datetime-local",class:"form-input mt-1 block w-full",autocomplete:"off","onUpdate:modelValue":c[4]||(c[4]=f=>o.listingForm.period_start=f),placeholder:"From ..."},null,512),[[Nn,o.listingForm.period_start]])]),F("label",kb,[Eb,Et(F("input",{name:"period_end",type:"datetime-local",class:"form-input mt-1 block w-full","onUpdate:modelValue":c[5]||(c[5]=f=>o.listingForm.period_end=f),placeholder:"To ..."},null,512),[[Nn,o.listingForm.period_end]])])]),Ib,F("button",{type:"button",onClick:c[6]||(c[6]=Da(f=>u(),["prevent"])),class:"-mb-4 w-full border border-sky-800 bg-sky-800 text-white rounded-sm px-4 py-2 m-2 transition-colors duration-500 ease select-none hover:bg-sky-800 focus:outline-none focus:shadow-outline"}," Save Form ")])])]),_:1})],64))}}),Ob=he(Tb,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/LineListing.vue"]]),Mb=F("h1",{class:"text-xl text-gray-700 font-semibold my-2"},"Notice Board",-1),$b={class:"flex justify-start w-full"},Pb={class:"w-full"},Lb={class:"flex justify-between w-full"},Cb={class:""},Rb={class:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-gray-600 rounded-full"},zb={class:"ml-4"},Nb={class:"text-sm font-semibold italic text-orange-600"},Vb=de({__name:"Notice",setup(t){const e=Xl(),n=Yl();return Re(()=>{const r=e.auth?.user;n.fetchMyNotices(r?.uid)}),(r,i)=>(B(),Y(xt,null,[Mb,F("section",$b,[F("ul",Pb,[(B(!0),Y(xt,null,Lt(X(n).notices,(a,o)=>(B(),Y("li",{key:a.uid,class:"w-full"},[le(Or,{class:"w-full"},{title:Gt(()=>[F("div",Lb,[F("div",Cb,[F("span",Rb,et(o+1),1),F("span",zb,et(a.title),1)]),F("div",Nb,et(a.status),1)])]),body:Gt(()=>[zn(et(a.body),1)]),_:2},1024)]))),128))])])],64))}}),Wb=he(Vb,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/Notice.vue"]]),Bb={class:"col-span-12 mt-2"},Gb={class:"bg-white shadow-md mt-2"},Ub={class:"-mb-px flex justify-start"},qb=["onClick"],Hb={class:"pt-4",initial:{opacity:0,y:100},enter:{opacity:1,y:0,scale:1},variants:{custom:{scale:2}},delay:400},Xb=de({__name:"index",setup(t){const e=hn(),{dashboard:n}=vn(e);return(r,i)=>{const a=jl("motion");return B(),Y("section",Bb,[F("nav",Gb,[F("div",Ub,[(B(!0),Y(xt,null,Lt(X(n).tabs,o=>(B(),Y("a",{key:o,class:_a(["no-underline text-gray-500 uppercase tracking-wide font-bold text-xs py-1 px-4 tab hover:bg-sky-600 hover:text-gray-200",{"tab-active":X(n).currentTab===o}]),onClick:u=>X(e).setCurrentTab(o),href:"#"},et(o),11,qb))),128))])]),Et((B(),Y("div",Hb,[X(n).currentTab==="overview"?(B(),jt(Js,{key:0})):yt("v-if",!0),X(n).currentTab==="resource"?(B(),jt(Ru,{key:1})):yt("v-if",!0),X(n).currentTab==="laggard"?(B(),jt(gu,{key:2})):yt("v-if",!0),X(n).currentTab==="peformance"?(B(),jt(gx,{key:3})):yt("v-if",!0),X(n).currentTab==="tat"?(B(),jt(bx,{key:4})):yt("v-if",!0),X(n).currentTab==="notices"?(B(),jt(Wb,{key:5})):yt("v-if",!0),X(n).currentTab==="line-listing"?(B(),jt(Ob,{key:6})):yt("v-if",!0)])),[[a]])])}}}),Kb=he(Xb,[["__file","/home/aurthur/Development/Python/felicity/felicity-lims/webapp/views/dashboard/index.vue"]]);export{Kb as default};
