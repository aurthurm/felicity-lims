
mutation AddReflexRule($payload: ReflexRuleInput!) {
    createReflexRule(payload: $payload) {
        __typename
        ... on ReflexRuleType {
            uid
            name
            description
            createdByUid
            createdAt
        }
        ... on OperationError {
            error
            suggestion
        }
    }
}

mutation EditReflexRule($uid: String!, $payload: ReflexRuleInput!) {
    updateReflexRule(uid: $uid, payload: $payload) {
        __typename
        ... on ReflexRuleType {
            uid
            name
            description
            isActive
            createdByUid
            createdAt
        }
        ... on OperationError {
            error
            suggestion
        }
    }
}


mutation createReflexDecision($payload: ReflexDecisionInput!) {
  createReflexDecision(payload: $payload) {
    ... on ReflexDecisionType {
      uid
      reflexTriggerUid
      description
      priority
      ruleGroups {
        uid
        description
        priority
        rules {
          uid
          analysisUid
          operator
          value
          priority
        }
      }
      addAnalyses {
        uid
        analysisUid
        count
      }
      finalizeAnalyses {
        uid
        analysisUid
        value
      }
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation updateReflexDecision($uid: String!, $payload: ReflexDecisionInput!) {
  updateReflexDecision(uid: $uid, payload: $payload) {
    ... on ReflexDecisionType {
      uid
      reflexTriggerUid
      description
      priority
      ruleGroups {
        uid
        description
        priority
        rules {
          uid
          analysisUid
          operator
          value
          priority
        }
      }
      addAnalyses {
        uid
        analysisUid
        count
      }
      finalizeAnalyses {
        uid
        analysisUid
        value
      }
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation createReflexTrigger($payload: ReflexTriggerInput!) {
  createReflexTrigger(payload: $payload) {
    ... on ReflexTriggerType {
      uid
      reflexRuleUid
      level
      description
      sampleTypeUid
      posX
      posY
      analyses {
        uid
        name
      }
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation updateReflexTrigger($uid: String!, $payload: ReflexTriggerInput!) {
  updateReflexTrigger(uid: $uid, payload: $payload) {
    ... on ReflexTriggerType {
      uid
      reflexRuleUid
      level
      description
      sampleTypeUid
      analyses {
        uid
        name
      }
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation deleteReflexTrigger($uid: String!) {
  deleteReflexTrigger(uid: $uid) {
    ... on DeletedItem {
      uid
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation deleteReflexDecision($uid: String!) {
  deleteReflexDecision(uid: $uid) {
    ... on DeletedItem {
      uid
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}

mutation saveReflexRuleGraph($uid: String!, $graph: ReflexRuleGraphInput!) {
  saveReflexRuleGraph(uid: $uid, graph: $graph) {
    ... on ReflexRuleType {
      uid
      name
      description
      isActive
      priority
      reflexTriggers {
        uid
        level
        description
        posX
        posY
        analyses {
          uid
          name
        }
        decisions {
          uid
          description
          priority
          posX
          posY
          ruleGroups {
            uid
            description
            priority
            posX
            posY
            rules {
              uid
              analysisUid
              operator
              value
              priority
            }
          }
          addAnalyses {
            uid
            analysisUid
            count
            posX
            posY
          }
          finalizeAnalyses {
            uid
            analysisUid
            value
            posX
            posY
          }
        }
      }
    }
    ... on OperationError {
      __typename
      error
      suggestion
    }
  }
}
