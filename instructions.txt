sudo apt install libcairo2-dev pkg-config python3-dev gcc g++;
conda create -n felicity-lims python=3.11
conda activate felicity-lims
pip install -r requirements.txt;
pnpm i;
pnpm database:al:upgrade;

# using docker with aio
docker compose -f ./docker-compose.prod.aio.yml logs -f
docker compose -f ./docker-compose.prod.aio.yml up -d felicity_db
docker compose -f ./docker-compose.prod.aio.yml exec felicity_db dropdb felicity_lims -U felicity
docker compose -f ./docker-compose.prod.aio.yml exec felicity_db createdb felicity_lims -U felicity
docker compose -f ./docker-compose.prod.aio.yml up -d felicity_aio
docker compose -f ./docker-compose.prod.aio.yml exec felicity_aio alembic upgrade head
docker compose -f ./docker-compose.prod.aio.yml exec felicity_db psql -d felicity_lims -U felicity
docker compose -f ./docker-compose.prod.aio.yml ps

# using docker with static server proxies
docker compose -f ./docker-compose.prod.aio.yml up -d felicity_static_nginx --build
